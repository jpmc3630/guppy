var tu=Object.defineProperty,nu=Object.defineProperties;var ou=Object.getOwnPropertyDescriptors;var to=Object.getOwnPropertySymbols;var wi=Object.prototype.hasOwnProperty,xi=Object.prototype.propertyIsEnumerable;var _i=(e,t,n)=>t in e?tu(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Y=(e,t)=>{for(var n in t||(t={}))wi.call(t,n)&&_i(e,n,t[n]);if(to)for(var n of to(t))xi.call(t,n)&&_i(e,n,t[n]);return e},ce=(e,t)=>nu(e,ou(t));var Jt=(e,t)=>{var n={};for(var o in e)wi.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&to)for(var o of to(e))t.indexOf(o)<0&&xi.call(e,o)&&(n[o]=e[o]);return n};const ru=function(){const t=document.createElement("link").relList;return t&&t.supports&&t.supports("modulepreload")?"modulepreload":"preload"}(),Ci={},iu="/",Ln=function(t,n){return!n||n.length===0?t():Promise.all(n.map(o=>{if(o=`${iu}${o}`,o in Ci)return;Ci[o]=!0;const r=o.endsWith(".css"),i=r?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${o}"]${i}`))return;const s=document.createElement("link");if(s.rel=r?"stylesheet":ru,r||(s.as="script",s.crossOrigin=""),s.href=o,document.head.appendChild(s),r)return new Promise((a,l)=>{s.addEventListener("load",a),s.addEventListener("error",()=>l(new Error(`Unable to preload CSS for ${o}`)))})})).then(()=>t())};function Dr(e,t){const n=Object.create(null),o=e.split(",");for(let r=0;r<o.length;r++)n[o[r]]=!0;return t?r=>!!n[r.toLowerCase()]:r=>!!n[r]}const su="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",lu=Dr(su);function Xs(e){return!!e||e===""}function zr(e){if(re(e)){const t={};for(let n=0;n<e.length;n++){const o=e[n],r=Re(o)?cu(o):zr(o);if(r)for(const i in r)t[i]=r[i]}return t}else{if(Re(e))return e;if(ke(e))return e}}const au=/;(?![^(]*\))/g,uu=/:(.+)/;function cu(e){const t={};return e.split(au).forEach(n=>{if(n){const o=n.split(uu);o.length>1&&(t[o[0].trim()]=o[1].trim())}}),t}function Hr(e){let t="";if(Re(e))t=e;else if(re(e))for(let n=0;n<e.length;n++){const o=Hr(e[n]);o&&(t+=o+" ")}else if(ke(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const pg=e=>Re(e)?e:e==null?"":re(e)||ke(e)&&(e.toString===nl||!le(e.toString))?JSON.stringify(e,Gs,2):String(e),Gs=(e,t)=>t&&t.__v_isRef?Gs(e,t.value):dn(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[o,r])=>(n[`${o} =>`]=r,n),{})}:el(t)?{[`Set(${t.size})`]:[...t.values()]}:ke(t)&&!re(t)&&!ol(t)?String(t):t,be={},fn=[],nt=()=>{},fu=()=>!1,du=/^on[^a-z]/,qo=e=>du.test(e),Ur=e=>e.startsWith("onUpdate:"),qe=Object.assign,Kr=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},hu=Object.prototype.hasOwnProperty,fe=(e,t)=>hu.call(e,t),re=Array.isArray,dn=e=>Mo(e)==="[object Map]",el=e=>Mo(e)==="[object Set]",le=e=>typeof e=="function",Re=e=>typeof e=="string",Wr=e=>typeof e=="symbol",ke=e=>e!==null&&typeof e=="object",tl=e=>ke(e)&&le(e.then)&&le(e.catch),nl=Object.prototype.toString,Mo=e=>nl.call(e),mu=e=>Mo(e).slice(8,-1),ol=e=>Mo(e)==="[object Object]",Qr=e=>Re(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,go=Dr(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),$o=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},gu=/-(\w)/g,ut=$o(e=>e.replace(gu,(t,n)=>n?n.toUpperCase():"")),vu=/\B([A-Z])/g,yn=$o(e=>e.replace(vu,"-$1").toLowerCase()),Oo=$o(e=>e.charAt(0).toUpperCase()+e.slice(1)),Wo=$o(e=>e?`on${Oo(e)}`:""),zn=(e,t)=>!Object.is(e,t),Qo=(e,t)=>{for(let n=0;n<e.length;n++)e[n](t)},_o=(e,t,n)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:n})},rl=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let ki;const pu=()=>ki||(ki=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof global!="undefined"?global:{});let lt;class il{constructor(t=!1){this.active=!0,this.effects=[],this.cleanups=[],!t&&lt&&(this.parent=lt,this.index=(lt.scopes||(lt.scopes=[])).push(this)-1)}run(t){if(this.active){const n=lt;try{return lt=this,t()}finally{lt=n}}}on(){lt=this}off(){lt=this.parent}stop(t){if(this.active){let n,o;for(n=0,o=this.effects.length;n<o;n++)this.effects[n].stop();for(n=0,o=this.cleanups.length;n<o;n++)this.cleanups[n]();if(this.scopes)for(n=0,o=this.scopes.length;n<o;n++)this.scopes[n].stop(!0);if(this.parent&&!t){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.active=!1}}}function bu(e){return new il(e)}function yu(e,t=lt){t&&t.active&&t.effects.push(e)}const Yr=e=>{const t=new Set(e);return t.w=0,t.n=0,t},sl=e=>(e.w&Rt)>0,ll=e=>(e.n&Rt)>0,_u=({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=Rt},wu=e=>{const{deps:t}=e;if(t.length){let n=0;for(let o=0;o<t.length;o++){const r=t[o];sl(r)&&!ll(r)?r.delete(e):t[n++]=r,r.w&=~Rt,r.n&=~Rt}t.length=n}},mr=new WeakMap;let Mn=0,Rt=1;const gr=30;let et;const Nt=Symbol(""),vr=Symbol("");class Zr{constructor(t,n=null,o){this.fn=t,this.scheduler=n,this.active=!0,this.deps=[],this.parent=void 0,yu(this,o)}run(){if(!this.active)return this.fn();let t=et,n=Et;for(;t;){if(t===this)return;t=t.parent}try{return this.parent=et,et=this,Et=!0,Rt=1<<++Mn,Mn<=gr?_u(this):Ei(this),this.fn()}finally{Mn<=gr&&wu(this),Rt=1<<--Mn,et=this.parent,Et=n,this.parent=void 0,this.deferStop&&this.stop()}}stop(){et===this?this.deferStop=!0:this.active&&(Ei(this),this.onStop&&this.onStop(),this.active=!1)}}function Ei(e){const{deps:t}=e;if(t.length){for(let n=0;n<t.length;n++)t[n].delete(e);t.length=0}}let Et=!0;const al=[];function _n(){al.push(Et),Et=!1}function wn(){const e=al.pop();Et=e===void 0?!0:e}function ze(e,t,n){if(Et&&et){let o=mr.get(e);o||mr.set(e,o=new Map);let r=o.get(n);r||o.set(n,r=Yr()),ul(r)}}function ul(e,t){let n=!1;Mn<=gr?ll(e)||(e.n|=Rt,n=!sl(e)):n=!e.has(et),n&&(e.add(et),et.deps.push(e))}function ht(e,t,n,o,r,i){const s=mr.get(e);if(!s)return;let a=[];if(t==="clear")a=[...s.values()];else if(n==="length"&&re(e))s.forEach((l,u)=>{(u==="length"||u>=o)&&a.push(l)});else switch(n!==void 0&&a.push(s.get(n)),t){case"add":re(e)?Qr(n)&&a.push(s.get("length")):(a.push(s.get(Nt)),dn(e)&&a.push(s.get(vr)));break;case"delete":re(e)||(a.push(s.get(Nt)),dn(e)&&a.push(s.get(vr)));break;case"set":dn(e)&&a.push(s.get(Nt));break}if(a.length===1)a[0]&&pr(a[0]);else{const l=[];for(const u of a)u&&l.push(...u);pr(Yr(l))}}function pr(e,t){for(const n of re(e)?e:[...e])(n!==et||n.allowRecurse)&&(n.scheduler?n.scheduler():n.run())}const xu=Dr("__proto__,__v_isRef,__isVue"),cl=new Set(Object.getOwnPropertyNames(Symbol).map(e=>Symbol[e]).filter(Wr)),Cu=Jr(),ku=Jr(!1,!0),Eu=Jr(!0),Si=Su();function Su(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...n){const o=he(this);for(let i=0,s=this.length;i<s;i++)ze(o,"get",i+"");const r=o[t](...n);return r===-1||r===!1?o[t](...n.map(he)):r}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...n){_n();const o=he(this)[t].apply(this,n);return wn(),o}}),e}function Jr(e=!1,t=!1){return function(o,r,i){if(r==="__v_isReactive")return!e;if(r==="__v_isReadonly")return e;if(r==="__v_isShallow")return t;if(r==="__v_raw"&&i===(e?t?Du:gl:t?ml:hl).get(o))return o;const s=re(o);if(!e&&s&&fe(Si,r))return Reflect.get(Si,r,i);const a=Reflect.get(o,r,i);return(Wr(r)?cl.has(r):xu(r))||(e||ze(o,"get",r),t)?a:Ae(a)?!s||!Qr(r)?a.value:a:ke(a)?e?vl(a):Kt(a):a}}const Ru=fl(),Tu=fl(!0);function fl(e=!1){return function(n,o,r,i){let s=n[o];if(Hn(s)&&Ae(s)&&!Ae(r))return!1;if(!e&&!Hn(r)&&(pl(r)||(r=he(r),s=he(s)),!re(n)&&Ae(s)&&!Ae(r)))return s.value=r,!0;const a=re(n)&&Qr(o)?Number(o)<n.length:fe(n,o),l=Reflect.set(n,o,r,i);return n===he(i)&&(a?zn(r,s)&&ht(n,"set",o,r):ht(n,"add",o,r)),l}}function Pu(e,t){const n=fe(e,t);e[t];const o=Reflect.deleteProperty(e,t);return o&&n&&ht(e,"delete",t,void 0),o}function Au(e,t){const n=Reflect.has(e,t);return(!Wr(t)||!cl.has(t))&&ze(e,"has",t),n}function qu(e){return ze(e,"iterate",re(e)?"length":Nt),Reflect.ownKeys(e)}const dl={get:Cu,set:Ru,deleteProperty:Pu,has:Au,ownKeys:qu},Mu={get:Eu,set(e,t){return!0},deleteProperty(e,t){return!0}},$u=qe({},dl,{get:ku,set:Tu}),Xr=e=>e,Lo=e=>Reflect.getPrototypeOf(e);function no(e,t,n=!1,o=!1){e=e.__v_raw;const r=he(e),i=he(t);t!==i&&!n&&ze(r,"get",t),!n&&ze(r,"get",i);const{has:s}=Lo(r),a=o?Xr:n?ti:Un;if(s.call(r,t))return a(e.get(t));if(s.call(r,i))return a(e.get(i));e!==r&&e.get(t)}function oo(e,t=!1){const n=this.__v_raw,o=he(n),r=he(e);return e!==r&&!t&&ze(o,"has",e),!t&&ze(o,"has",r),e===r?n.has(e):n.has(e)||n.has(r)}function ro(e,t=!1){return e=e.__v_raw,!t&&ze(he(e),"iterate",Nt),Reflect.get(e,"size",e)}function Ri(e){e=he(e);const t=he(this);return Lo(t).has.call(t,e)||(t.add(e),ht(t,"add",e,e)),this}function Ti(e,t){t=he(t);const n=he(this),{has:o,get:r}=Lo(n);let i=o.call(n,e);i||(e=he(e),i=o.call(n,e));const s=r.call(n,e);return n.set(e,t),i?zn(t,s)&&ht(n,"set",e,t):ht(n,"add",e,t),this}function Pi(e){const t=he(this),{has:n,get:o}=Lo(t);let r=n.call(t,e);r||(e=he(e),r=n.call(t,e)),o&&o.call(t,e);const i=t.delete(e);return r&&ht(t,"delete",e,void 0),i}function Ai(){const e=he(this),t=e.size!==0,n=e.clear();return t&&ht(e,"clear",void 0,void 0),n}function io(e,t){return function(o,r){const i=this,s=i.__v_raw,a=he(s),l=t?Xr:e?ti:Un;return!e&&ze(a,"iterate",Nt),s.forEach((u,c)=>o.call(r,l(u),l(c),i))}}function so(e,t,n){return function(...o){const r=this.__v_raw,i=he(r),s=dn(i),a=e==="entries"||e===Symbol.iterator&&s,l=e==="keys"&&s,u=r[e](...o),c=n?Xr:t?ti:Un;return!t&&ze(i,"iterate",l?vr:Nt),{next(){const{value:d,done:f}=u.next();return f?{value:d,done:f}:{value:a?[c(d[0]),c(d[1])]:c(d),done:f}},[Symbol.iterator](){return this}}}}function vt(e){return function(...t){return e==="delete"?!1:this}}function Ou(){const e={get(i){return no(this,i)},get size(){return ro(this)},has:oo,add:Ri,set:Ti,delete:Pi,clear:Ai,forEach:io(!1,!1)},t={get(i){return no(this,i,!1,!0)},get size(){return ro(this)},has:oo,add:Ri,set:Ti,delete:Pi,clear:Ai,forEach:io(!1,!0)},n={get(i){return no(this,i,!0)},get size(){return ro(this,!0)},has(i){return oo.call(this,i,!0)},add:vt("add"),set:vt("set"),delete:vt("delete"),clear:vt("clear"),forEach:io(!0,!1)},o={get(i){return no(this,i,!0,!0)},get size(){return ro(this,!0)},has(i){return oo.call(this,i,!0)},add:vt("add"),set:vt("set"),delete:vt("delete"),clear:vt("clear"),forEach:io(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(i=>{e[i]=so(i,!1,!1),n[i]=so(i,!0,!1),t[i]=so(i,!1,!0),o[i]=so(i,!0,!0)}),[e,n,t,o]}const[Lu,Bu,Fu,Iu]=Ou();function Gr(e,t){const n=t?e?Iu:Fu:e?Bu:Lu;return(o,r,i)=>r==="__v_isReactive"?!e:r==="__v_isReadonly"?e:r==="__v_raw"?o:Reflect.get(fe(n,r)&&r in o?n:o,r,i)}const Nu={get:Gr(!1,!1)},Vu={get:Gr(!1,!0)},ju={get:Gr(!0,!1)},hl=new WeakMap,ml=new WeakMap,gl=new WeakMap,Du=new WeakMap;function zu(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Hu(e){return e.__v_skip||!Object.isExtensible(e)?0:zu(mu(e))}function Kt(e){return Hn(e)?e:ei(e,!1,dl,Nu,hl)}function Uu(e){return ei(e,!1,$u,Vu,ml)}function vl(e){return ei(e,!0,Mu,ju,gl)}function ei(e,t,n,o,r){if(!ke(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const i=r.get(e);if(i)return i;const s=Hu(e);if(s===0)return e;const a=new Proxy(e,s===2?o:n);return r.set(e,a),a}function hn(e){return Hn(e)?hn(e.__v_raw):!!(e&&e.__v_isReactive)}function Hn(e){return!!(e&&e.__v_isReadonly)}function pl(e){return!!(e&&e.__v_isShallow)}function bl(e){return hn(e)||Hn(e)}function he(e){const t=e&&e.__v_raw;return t?he(t):e}function Wt(e){return _o(e,"__v_skip",!0),e}const Un=e=>ke(e)?Kt(e):e,ti=e=>ke(e)?vl(e):e;function yl(e){Et&&et&&(e=he(e),ul(e.dep||(e.dep=Yr())))}function _l(e,t){e=he(e),e.dep&&pr(e.dep)}function Ae(e){return!!(e&&e.__v_isRef===!0)}function me(e){return wl(e,!1)}function Ku(e){return wl(e,!0)}function wl(e,t){return Ae(e)?e:new Wu(e,t)}class Wu{constructor(t,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?t:he(t),this._value=n?t:Un(t)}get value(){return yl(this),this._value}set value(t){t=this.__v_isShallow?t:he(t),zn(t,this._rawValue)&&(this._rawValue=t,this._value=this.__v_isShallow?t:Un(t),_l(this))}}function Bn(e){return Ae(e)?e.value:e}const Qu={get:(e,t,n)=>Bn(Reflect.get(e,t,n)),set:(e,t,n,o)=>{const r=e[t];return Ae(r)&&!Ae(n)?(r.value=n,!0):Reflect.set(e,t,n,o)}};function xl(e){return hn(e)?e:new Proxy(e,Qu)}class Yu{constructor(t,n,o,r){this._setter=n,this.dep=void 0,this.__v_isRef=!0,this._dirty=!0,this.effect=new Zr(t,()=>{this._dirty||(this._dirty=!0,_l(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!r,this.__v_isReadonly=o}get value(){const t=he(this);return yl(t),(t._dirty||!t._cacheable)&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}function Zu(e,t,n=!1){let o,r;const i=le(e);return i?(o=e,r=nt):(o=e.get,r=e.set),new Yu(o,r,i||!r,n)}function St(e,t,n,o){let r;try{r=o?e(...o):e()}catch(i){Bo(i,t,n)}return r}function Ye(e,t,n,o){if(le(e)){const i=St(e,t,n,o);return i&&tl(i)&&i.catch(s=>{Bo(s,t,n)}),i}const r=[];for(let i=0;i<e.length;i++)r.push(Ye(e[i],t,n,o));return r}function Bo(e,t,n,o=!0){const r=t?t.vnode:null;if(t){let i=t.parent;const s=t.proxy,a=n;for(;i;){const u=i.ec;if(u){for(let c=0;c<u.length;c++)if(u[c](e,s,a)===!1)return}i=i.parent}const l=t.appContext.config.errorHandler;if(l){St(l,null,10,[e,s,a]);return}}Ju(e,n,r,o)}function Ju(e,t,n,o=!0){console.error(e)}let wo=!1,br=!1;const De=[];let ft=0;const Fn=[];let $n=null,sn=0;const In=[];let _t=null,ln=0;const Cl=Promise.resolve();let ni=null,yr=null;function Fe(e){const t=ni||Cl;return e?t.then(this?e.bind(this):e):t}function Xu(e){let t=ft+1,n=De.length;for(;t<n;){const o=t+n>>>1;Kn(De[o])<e?t=o+1:n=o}return t}function kl(e){(!De.length||!De.includes(e,wo&&e.allowRecurse?ft+1:ft))&&e!==yr&&(e.id==null?De.push(e):De.splice(Xu(e.id),0,e),El())}function El(){!wo&&!br&&(br=!0,ni=Cl.then(Tl))}function Gu(e){const t=De.indexOf(e);t>ft&&De.splice(t,1)}function Sl(e,t,n,o){re(e)?n.push(...e):(!t||!t.includes(e,e.allowRecurse?o+1:o))&&n.push(e),El()}function ec(e){Sl(e,$n,Fn,sn)}function tc(e){Sl(e,_t,In,ln)}function oi(e,t=null){if(Fn.length){for(yr=t,$n=[...new Set(Fn)],Fn.length=0,sn=0;sn<$n.length;sn++)$n[sn]();$n=null,sn=0,yr=null,oi(e,t)}}function Rl(e){if(In.length){const t=[...new Set(In)];if(In.length=0,_t){_t.push(...t);return}for(_t=t,_t.sort((n,o)=>Kn(n)-Kn(o)),ln=0;ln<_t.length;ln++)_t[ln]();_t=null,ln=0}}const Kn=e=>e.id==null?1/0:e.id;function Tl(e){br=!1,wo=!0,oi(e),De.sort((n,o)=>Kn(n)-Kn(o));const t=nt;try{for(ft=0;ft<De.length;ft++){const n=De[ft];n&&n.active!==!1&&St(n,null,14)}}finally{ft=0,De.length=0,Rl(),wo=!1,ni=null,(De.length||Fn.length||In.length)&&Tl(e)}}function nc(e,t,...n){if(e.isUnmounted)return;const o=e.vnode.props||be;let r=n;const i=t.startsWith("update:"),s=i&&t.slice(7);if(s&&s in o){const c=`${s==="modelValue"?"model":s}Modifiers`,{number:d,trim:f}=o[c]||be;f?r=n.map(m=>m.trim()):d&&(r=n.map(rl))}let a,l=o[a=Wo(t)]||o[a=Wo(ut(t))];!l&&i&&(l=o[a=Wo(yn(t))]),l&&Ye(l,e,6,r);const u=o[a+"Once"];if(u){if(!e.emitted)e.emitted={};else if(e.emitted[a])return;e.emitted[a]=!0,Ye(u,e,6,r)}}function Pl(e,t,n=!1){const o=t.emitsCache,r=o.get(e);if(r!==void 0)return r;const i=e.emits;let s={},a=!1;if(!le(e)){const l=u=>{const c=Pl(u,t,!0);c&&(a=!0,qe(s,c))};!n&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!i&&!a?(o.set(e,null),null):(re(i)?i.forEach(l=>s[l]=null):qe(s,i),o.set(e,s),s)}function Fo(e,t){return!e||!qo(t)?!1:(t=t.slice(2).replace(/Once$/,""),fe(e,t[0].toLowerCase()+t.slice(1))||fe(e,yn(t))||fe(e,t))}let Qe=null,Al=null;function xo(e){const t=Qe;return Qe=e,Al=e&&e.type.__scopeId||null,t}function oc(e,t=Qe,n){if(!t||e._n)return e;const o=(...r)=>{o._d&&Di(-1);const i=xo(t),s=e(...r);return xo(i),o._d&&Di(1),s};return o._n=!0,o._c=!0,o._d=!0,o}function Yo(e){const{type:t,vnode:n,proxy:o,withProxy:r,props:i,propsOptions:[s],slots:a,attrs:l,emit:u,render:c,renderCache:d,data:f,setupState:m,ctx:v,inheritAttrs:P}=e;let _,k;const S=xo(e);try{if(n.shapeFlag&4){const T=r||o;_=at(c.call(T,T,d,i,m,f,v)),k=l}else{const T=t;_=at(T.length>1?T(i,{attrs:l,slots:a,emit:u}):T(i,null)),k=t.props?l:rc(l)}}catch(T){Vn.length=0,Bo(T,e,1),_=Ve(ot)}let A=_;if(k&&P!==!1){const T=Object.keys(k),{shapeFlag:U}=A;T.length&&U&7&&(s&&T.some(Ur)&&(k=ic(k,s)),A=Ht(A,k))}return n.dirs&&(A.dirs=A.dirs?A.dirs.concat(n.dirs):n.dirs),n.transition&&(A.transition=n.transition),_=A,xo(S),_}const rc=e=>{let t;for(const n in e)(n==="class"||n==="style"||qo(n))&&((t||(t={}))[n]=e[n]);return t},ic=(e,t)=>{const n={};for(const o in e)(!Ur(o)||!(o.slice(9)in t))&&(n[o]=e[o]);return n};function sc(e,t,n){const{props:o,children:r,component:i}=e,{props:s,children:a,patchFlag:l}=t,u=i.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return o?qi(o,s,u):!!s;if(l&8){const c=t.dynamicProps;for(let d=0;d<c.length;d++){const f=c[d];if(s[f]!==o[f]&&!Fo(u,f))return!0}}}else return(r||a)&&(!a||!a.$stable)?!0:o===s?!1:o?s?qi(o,s,u):!0:!!s;return!1}function qi(e,t,n){const o=Object.keys(t);if(o.length!==Object.keys(e).length)return!0;for(let r=0;r<o.length;r++){const i=o[r];if(t[i]!==e[i]&&!Fo(n,i))return!0}return!1}function lc({vnode:e,parent:t},n){for(;t&&t.subTree===e;)(e=t.vnode).el=n,t=t.parent}const ac=e=>e.__isSuspense;function uc(e,t){t&&t.pendingBranch?re(e)?t.effects.push(...e):t.effects.push(e):tc(e)}function vo(e,t){if(Pe){let n=Pe.provides;const o=Pe.parent&&Pe.parent.provides;o===n&&(n=Pe.provides=Object.create(o)),n[e]=t}}function dt(e,t,n=!1){const o=Pe||Qe;if(o){const r=o.parent==null?o.vnode.appContext&&o.vnode.appContext.provides:o.parent.provides;if(r&&e in r)return r[e];if(arguments.length>1)return n&&le(t)?t.call(o.proxy):t}}const Mi={};function _e(e,t,n){return ql(e,t,n)}function ql(e,t,{immediate:n,deep:o,flush:r,onTrack:i,onTrigger:s}=be){const a=Pe;let l,u=!1,c=!1;if(Ae(e)?(l=()=>e.value,u=pl(e)):hn(e)?(l=()=>e,o=!0):re(e)?(c=!0,u=e.some(hn),l=()=>e.map(k=>{if(Ae(k))return k.value;if(hn(k))return Bt(k);if(le(k))return St(k,a,2)})):le(e)?t?l=()=>St(e,a,2):l=()=>{if(!(a&&a.isUnmounted))return d&&d(),Ye(e,a,3,[f])}:l=nt,t&&o){const k=l;l=()=>Bt(k())}let d,f=k=>{d=_.onStop=()=>{St(k,a,4)}};if(Yn)return f=nt,t?n&&Ye(t,a,3,[l(),c?[]:void 0,f]):l(),nt;let m=c?[]:Mi;const v=()=>{if(!!_.active)if(t){const k=_.run();(o||u||(c?k.some((S,A)=>zn(S,m[A])):zn(k,m)))&&(d&&d(),Ye(t,a,3,[k,m===Mi?void 0:m,f]),m=k)}else _.run()};v.allowRecurse=!!t;let P;r==="sync"?P=v:r==="post"?P=()=>Ie(v,a&&a.suspense):P=()=>{!a||a.isMounted?ec(v):v()};const _=new Zr(l,P);return t?n?v():m=_.run():r==="post"?Ie(_.run.bind(_),a&&a.suspense):_.run(),()=>{_.stop(),a&&a.scope&&Kr(a.scope.effects,_)}}function cc(e,t,n){const o=this.proxy,r=Re(e)?e.includes(".")?Ml(o,e):()=>o[e]:e.bind(o,o);let i;le(t)?i=t:(i=t.handler,n=t);const s=Pe;mn(this);const a=ql(r,i.bind(o),n);return s?mn(s):jt(),a}function Ml(e,t){const n=t.split(".");return()=>{let o=e;for(let r=0;r<n.length&&o;r++)o=o[n[r]];return o}}function Bt(e,t){if(!ke(e)||e.__v_skip||(t=t||new Set,t.has(e)))return e;if(t.add(e),Ae(e))Bt(e.value,t);else if(re(e))for(let n=0;n<e.length;n++)Bt(e[n],t);else if(el(e)||dn(e))e.forEach(n=>{Bt(n,t)});else if(ol(e))for(const n in e)Bt(e[n],t);return e}function $l(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return xn(()=>{e.isMounted=!0}),rt(()=>{e.isUnmounting=!0}),e}const He=[Function,Array],fc={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:He,onEnter:He,onAfterEnter:He,onEnterCancelled:He,onBeforeLeave:He,onLeave:He,onAfterLeave:He,onLeaveCancelled:He,onBeforeAppear:He,onAppear:He,onAfterAppear:He,onAppearCancelled:He},setup(e,{slots:t}){const n=Te(),o=$l();let r;return()=>{const i=t.default&&ri(t.default(),!0);if(!i||!i.length)return;let s=i[0];if(i.length>1){for(const P of i)if(P.type!==ot){s=P;break}}const a=he(e),{mode:l}=a;if(o.isLeaving)return Zo(s);const u=$i(s);if(!u)return Zo(s);const c=Wn(u,a,o,n);Qn(u,c);const d=n.subTree,f=d&&$i(d);let m=!1;const{getTransitionKey:v}=u.type;if(v){const P=v();r===void 0?r=P:P!==r&&(r=P,m=!0)}if(f&&f.type!==ot&&(!Ot(u,f)||m)){const P=Wn(f,a,o,n);if(Qn(f,P),l==="out-in")return o.isLeaving=!0,P.afterLeave=()=>{o.isLeaving=!1,n.update()},Zo(s);l==="in-out"&&u.type!==ot&&(P.delayLeave=(_,k,S)=>{const A=Ll(o,f);A[String(f.key)]=f,_._leaveCb=()=>{k(),_._leaveCb=void 0,delete c.delayedLeave},c.delayedLeave=S})}return s}}},Ol=fc;function Ll(e,t){const{leavingVNodes:n}=e;let o=n.get(t.type);return o||(o=Object.create(null),n.set(t.type,o)),o}function Wn(e,t,n,o){const{appear:r,mode:i,persisted:s=!1,onBeforeEnter:a,onEnter:l,onAfterEnter:u,onEnterCancelled:c,onBeforeLeave:d,onLeave:f,onAfterLeave:m,onLeaveCancelled:v,onBeforeAppear:P,onAppear:_,onAfterAppear:k,onAppearCancelled:S}=t,A=String(e.key),T=Ll(n,e),U=(y,$)=>{y&&Ye(y,o,9,$)},x={mode:i,persisted:s,beforeEnter(y){let $=a;if(!n.isMounted)if(r)$=P||a;else return;y._leaveCb&&y._leaveCb(!0);const O=T[A];O&&Ot(e,O)&&O.el._leaveCb&&O.el._leaveCb(),U($,[y])},enter(y){let $=l,O=u,N=c;if(!n.isMounted)if(r)$=_||l,O=k||u,N=S||c;else return;let B=!1;const C=y._enterCb=H=>{B||(B=!0,H?U(N,[y]):U(O,[y]),x.delayedLeave&&x.delayedLeave(),y._enterCb=void 0)};$?($(y,C),$.length<=1&&C()):C()},leave(y,$){const O=String(e.key);if(y._enterCb&&y._enterCb(!0),n.isUnmounting)return $();U(d,[y]);let N=!1;const B=y._leaveCb=C=>{N||(N=!0,$(),C?U(v,[y]):U(m,[y]),y._leaveCb=void 0,T[O]===e&&delete T[O])};T[O]=e,f?(f(y,B),f.length<=1&&B()):B()},clone(y){return Wn(y,t,n,o)}};return x}function Zo(e){if(No(e))return e=Ht(e),e.children=null,e}function $i(e){return No(e)?e.children?e.children[0]:void 0:e}function Qn(e,t){e.shapeFlag&6&&e.component?Qn(e.component.subTree,t):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function ri(e,t=!1,n){let o=[],r=0;for(let i=0;i<e.length;i++){let s=e[i];const a=n==null?s.key:String(n)+String(s.key!=null?s.key:i);s.type===Ge?(s.patchFlag&128&&r++,o=o.concat(ri(s.children,t,a))):(t||s.type!==ot)&&o.push(a!=null?Ht(s,{key:a}):s)}if(r>1)for(let i=0;i<o.length;i++)o[i].patchFlag=-2;return o}function Io(e){return le(e)?{setup:e,name:e.name}:e}const _r=e=>!!e.type.__asyncLoader,No=e=>e.type.__isKeepAlive;function Bl(e,t){Il(e,"a",t)}function Fl(e,t){Il(e,"da",t)}function Il(e,t,n=Pe){const o=e.__wdc||(e.__wdc=()=>{let r=n;for(;r;){if(r.isDeactivated)return;r=r.parent}return e()});if(Vo(t,o,n),n){let r=n.parent;for(;r&&r.parent;)No(r.parent.vnode)&&dc(o,t,n,r),r=r.parent}}function dc(e,t,n,o){const r=Vo(t,e,o,!0);ii(()=>{Kr(o[t],r)},n)}function Vo(e,t,n=Pe,o=!1){if(n){const r=n[e]||(n[e]=[]),i=t.__weh||(t.__weh=(...s)=>{if(n.isUnmounted)return;_n(),mn(n);const a=Ye(t,n,e,s);return jt(),wn(),a});return o?r.unshift(i):r.push(i),i}}const gt=e=>(t,n=Pe)=>(!Yn||e==="sp")&&Vo(e,t,n),hc=gt("bm"),xn=gt("m"),Nl=gt("bu"),Vl=gt("u"),rt=gt("bum"),ii=gt("um"),mc=gt("sp"),gc=gt("rtg"),vc=gt("rtc");function pc(e,t=Pe){Vo("ec",e,t)}let wr=!0;function bc(e){const t=Dl(e),n=e.proxy,o=e.ctx;wr=!1,t.beforeCreate&&Oi(t.beforeCreate,e,"bc");const{data:r,computed:i,methods:s,watch:a,provide:l,inject:u,created:c,beforeMount:d,mounted:f,beforeUpdate:m,updated:v,activated:P,deactivated:_,beforeDestroy:k,beforeUnmount:S,destroyed:A,unmounted:T,render:U,renderTracked:x,renderTriggered:y,errorCaptured:$,serverPrefetch:O,expose:N,inheritAttrs:B,components:C,directives:H,filters:W}=t;if(u&&yc(u,o,null,e.appContext.config.unwrapInjectedRef),s)for(const E in s){const K=s[E];le(K)&&(o[E]=K.bind(n))}if(r){const E=r.call(n,n);ke(E)&&(e.data=Kt(E))}if(wr=!0,i)for(const E in i){const K=i[E],F=le(K)?K.bind(n,n):le(K.get)?K.get.bind(n,n):nt,ae=!le(K)&&le(K.set)?K.set.bind(n):nt,Ce=w({get:F,set:ae});Object.defineProperty(o,E,{enumerable:!0,configurable:!0,get:()=>Ce.value,set:xe=>Ce.value=xe})}if(a)for(const E in a)jl(a[E],o,n,E);if(l){const E=le(l)?l.call(n):l;Reflect.ownKeys(E).forEach(K=>{vo(K,E[K])})}c&&Oi(c,e,"c");function G(E,K){re(K)?K.forEach(F=>E(F.bind(n))):K&&E(K.bind(n))}if(G(hc,d),G(xn,f),G(Nl,m),G(Vl,v),G(Bl,P),G(Fl,_),G(pc,$),G(vc,x),G(gc,y),G(rt,S),G(ii,T),G(mc,O),re(N))if(N.length){const E=e.exposed||(e.exposed={});N.forEach(K=>{Object.defineProperty(E,K,{get:()=>n[K],set:F=>n[K]=F})})}else e.exposed||(e.exposed={});U&&e.render===nt&&(e.render=U),B!=null&&(e.inheritAttrs=B),C&&(e.components=C),H&&(e.directives=H)}function yc(e,t,n=nt,o=!1){re(e)&&(e=xr(e));for(const r in e){const i=e[r];let s;ke(i)?"default"in i?s=dt(i.from||r,i.default,!0):s=dt(i.from||r):s=dt(i),Ae(s)&&o?Object.defineProperty(t,r,{enumerable:!0,configurable:!0,get:()=>s.value,set:a=>s.value=a}):t[r]=s}}function Oi(e,t,n){Ye(re(e)?e.map(o=>o.bind(t.proxy)):e.bind(t.proxy),t,n)}function jl(e,t,n,o){const r=o.includes(".")?Ml(n,o):()=>n[o];if(Re(e)){const i=t[e];le(i)&&_e(r,i)}else if(le(e))_e(r,e.bind(n));else if(ke(e))if(re(e))e.forEach(i=>jl(i,t,n,o));else{const i=le(e.handler)?e.handler.bind(n):t[e.handler];le(i)&&_e(r,i,e)}}function Dl(e){const t=e.type,{mixins:n,extends:o}=t,{mixins:r,optionsCache:i,config:{optionMergeStrategies:s}}=e.appContext,a=i.get(t);let l;return a?l=a:!r.length&&!n&&!o?l=t:(l={},r.length&&r.forEach(u=>Co(l,u,s,!0)),Co(l,t,s)),i.set(t,l),l}function Co(e,t,n,o=!1){const{mixins:r,extends:i}=t;i&&Co(e,i,n,!0),r&&r.forEach(s=>Co(e,s,n,!0));for(const s in t)if(!(o&&s==="expose")){const a=_c[s]||n&&n[s];e[s]=a?a(e[s],t[s]):t[s]}return e}const _c={data:Li,props:Mt,emits:Mt,methods:Mt,computed:Mt,beforeCreate:Be,created:Be,beforeMount:Be,mounted:Be,beforeUpdate:Be,updated:Be,beforeDestroy:Be,beforeUnmount:Be,destroyed:Be,unmounted:Be,activated:Be,deactivated:Be,errorCaptured:Be,serverPrefetch:Be,components:Mt,directives:Mt,watch:xc,provide:Li,inject:wc};function Li(e,t){return t?e?function(){return qe(le(e)?e.call(this,this):e,le(t)?t.call(this,this):t)}:t:e}function wc(e,t){return Mt(xr(e),xr(t))}function xr(e){if(re(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function Be(e,t){return e?[...new Set([].concat(e,t))]:t}function Mt(e,t){return e?qe(qe(Object.create(null),e),t):t}function xc(e,t){if(!e)return t;if(!t)return e;const n=qe(Object.create(null),e);for(const o in t)n[o]=Be(e[o],t[o]);return n}function Cc(e,t,n,o=!1){const r={},i={};_o(i,jo,1),e.propsDefaults=Object.create(null),zl(e,t,r,i);for(const s in e.propsOptions[0])s in r||(r[s]=void 0);n?e.props=o?r:Uu(r):e.type.props?e.props=r:e.props=i,e.attrs=i}function kc(e,t,n,o){const{props:r,attrs:i,vnode:{patchFlag:s}}=e,a=he(r),[l]=e.propsOptions;let u=!1;if((o||s>0)&&!(s&16)){if(s&8){const c=e.vnode.dynamicProps;for(let d=0;d<c.length;d++){let f=c[d];if(Fo(e.emitsOptions,f))continue;const m=t[f];if(l)if(fe(i,f))m!==i[f]&&(i[f]=m,u=!0);else{const v=ut(f);r[v]=Cr(l,a,v,m,e,!1)}else m!==i[f]&&(i[f]=m,u=!0)}}}else{zl(e,t,r,i)&&(u=!0);let c;for(const d in a)(!t||!fe(t,d)&&((c=yn(d))===d||!fe(t,c)))&&(l?n&&(n[d]!==void 0||n[c]!==void 0)&&(r[d]=Cr(l,a,d,void 0,e,!0)):delete r[d]);if(i!==a)for(const d in i)(!t||!fe(t,d)&&!0)&&(delete i[d],u=!0)}u&&ht(e,"set","$attrs")}function zl(e,t,n,o){const[r,i]=e.propsOptions;let s=!1,a;if(t)for(let l in t){if(go(l))continue;const u=t[l];let c;r&&fe(r,c=ut(l))?!i||!i.includes(c)?n[c]=u:(a||(a={}))[c]=u:Fo(e.emitsOptions,l)||(!(l in o)||u!==o[l])&&(o[l]=u,s=!0)}if(i){const l=he(n),u=a||be;for(let c=0;c<i.length;c++){const d=i[c];n[d]=Cr(r,l,d,u[d],e,!fe(u,d))}}return s}function Cr(e,t,n,o,r,i){const s=e[n];if(s!=null){const a=fe(s,"default");if(a&&o===void 0){const l=s.default;if(s.type!==Function&&le(l)){const{propsDefaults:u}=r;n in u?o=u[n]:(mn(r),o=u[n]=l.call(null,t),jt())}else o=l}s[0]&&(i&&!a?o=!1:s[1]&&(o===""||o===yn(n))&&(o=!0))}return o}function Hl(e,t,n=!1){const o=t.propsCache,r=o.get(e);if(r)return r;const i=e.props,s={},a=[];let l=!1;if(!le(e)){const c=d=>{l=!0;const[f,m]=Hl(d,t,!0);qe(s,f),m&&a.push(...m)};!n&&t.mixins.length&&t.mixins.forEach(c),e.extends&&c(e.extends),e.mixins&&e.mixins.forEach(c)}if(!i&&!l)return o.set(e,fn),fn;if(re(i))for(let c=0;c<i.length;c++){const d=ut(i[c]);Bi(d)&&(s[d]=be)}else if(i)for(const c in i){const d=ut(c);if(Bi(d)){const f=i[c],m=s[d]=re(f)||le(f)?{type:f}:f;if(m){const v=Ni(Boolean,m.type),P=Ni(String,m.type);m[0]=v>-1,m[1]=P<0||v<P,(v>-1||fe(m,"default"))&&a.push(d)}}}const u=[s,a];return o.set(e,u),u}function Bi(e){return e[0]!=="$"}function Fi(e){const t=e&&e.toString().match(/^\s*function (\w+)/);return t?t[1]:e===null?"null":""}function Ii(e,t){return Fi(e)===Fi(t)}function Ni(e,t){return re(t)?t.findIndex(n=>Ii(n,e)):le(t)&&Ii(t,e)?0:-1}const Ul=e=>e[0]==="_"||e==="$stable",si=e=>re(e)?e.map(at):[at(e)],Ec=(e,t,n)=>{const o=oc((...r)=>si(t(...r)),n);return o._c=!1,o},Kl=(e,t,n)=>{const o=e._ctx;for(const r in e){if(Ul(r))continue;const i=e[r];if(le(i))t[r]=Ec(r,i,o);else if(i!=null){const s=si(i);t[r]=()=>s}}},Wl=(e,t)=>{const n=si(t);e.slots.default=()=>n},Sc=(e,t)=>{if(e.vnode.shapeFlag&32){const n=t._;n?(e.slots=he(t),_o(t,"_",n)):Kl(t,e.slots={})}else e.slots={},t&&Wl(e,t);_o(e.slots,jo,1)},Rc=(e,t,n)=>{const{vnode:o,slots:r}=e;let i=!0,s=be;if(o.shapeFlag&32){const a=t._;a?n&&a===1?i=!1:(qe(r,t),!n&&a===1&&delete r._):(i=!t.$stable,Kl(t,r)),s=t}else t&&(Wl(e,t),s={default:1});if(i)for(const a in r)!Ul(a)&&!(a in s)&&delete r[a]};function Ql(e,t){const n=Qe;if(n===null)return e;const o=Do(n)||n.proxy,r=e.dirs||(e.dirs=[]);for(let i=0;i<t.length;i++){let[s,a,l,u=be]=t[i];le(s)&&(s={mounted:s,updated:s}),s.deep&&Bt(a),r.push({dir:s,instance:o,value:a,oldValue:void 0,arg:l,modifiers:u})}return e}function Pt(e,t,n,o){const r=e.dirs,i=t&&t.dirs;for(let s=0;s<r.length;s++){const a=r[s];i&&(a.oldValue=i[s].value);let l=a.dir[o];l&&(_n(),Ye(l,n,8,[e.el,a,e,t]),wn())}}function Yl(){return{app:null,config:{isNativeTag:fu,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Tc=0;function Pc(e,t){return function(o,r=null){le(o)||(o=Object.assign({},o)),r!=null&&!ke(r)&&(r=null);const i=Yl(),s=new Set;let a=!1;const l=i.app={_uid:Tc++,_component:o,_props:r,_container:null,_context:i,_instance:null,version:tf,get config(){return i.config},set config(u){},use(u,...c){return s.has(u)||(u&&le(u.install)?(s.add(u),u.install(l,...c)):le(u)&&(s.add(u),u(l,...c))),l},mixin(u){return i.mixins.includes(u)||i.mixins.push(u),l},component(u,c){return c?(i.components[u]=c,l):i.components[u]},directive(u,c){return c?(i.directives[u]=c,l):i.directives[u]},mount(u,c,d){if(!a){const f=Ve(o,r);return f.appContext=i,c&&t?t(f,u):e(f,u,d),a=!0,l._container=u,u.__vue_app__=l,Do(f.component)||f.component.proxy}},unmount(){a&&(e(null,l._container),delete l._container.__vue_app__)},provide(u,c){return i.provides[u]=c,l}};return l}}function kr(e,t,n,o,r=!1){if(re(e)){e.forEach((f,m)=>kr(f,t&&(re(t)?t[m]:t),n,o,r));return}if(_r(o)&&!r)return;const i=o.shapeFlag&4?Do(o.component)||o.component.proxy:o.el,s=r?null:i,{i:a,r:l}=e,u=t&&t.r,c=a.refs===be?a.refs={}:a.refs,d=a.setupState;if(u!=null&&u!==l&&(Re(u)?(c[u]=null,fe(d,u)&&(d[u]=null)):Ae(u)&&(u.value=null)),le(l))St(l,a,12,[s,c]);else{const f=Re(l),m=Ae(l);if(f||m){const v=()=>{if(e.f){const P=f?c[l]:l.value;r?re(P)&&Kr(P,i):re(P)?P.includes(i)||P.push(i):f?(c[l]=[i],fe(d,l)&&(d[l]=c[l])):(l.value=[i],e.k&&(c[e.k]=l.value))}else f?(c[l]=s,fe(d,l)&&(d[l]=s)):Ae(l)&&(l.value=s,e.k&&(c[e.k]=s))};s?(v.id=-1,Ie(v,n)):v()}}}const Ie=uc;function Ac(e){return qc(e)}function qc(e,t){const n=pu();n.__VUE__=!0;const{insert:o,remove:r,patchProp:i,createElement:s,createText:a,createComment:l,setText:u,setElementText:c,parentNode:d,nextSibling:f,setScopeId:m=nt,cloneNode:v,insertStaticContent:P}=e,_=(h,g,p,M=null,q=null,V=null,Q=!1,I=null,z=!!g.dynamicChildren)=>{if(h===g)return;h&&!Ot(h,g)&&(M=ee(h),ge(h,q,V,!0),h=null),g.patchFlag===-2&&(z=!1,g.dynamicChildren=null);const{type:L,ref:te,shapeFlag:J}=g;switch(L){case ai:k(h,g,p,M);break;case ot:S(h,g,p,M);break;case Jo:h==null&&A(g,p,M,Q);break;case Ge:H(h,g,p,M,q,V,Q,I,z);break;default:J&1?x(h,g,p,M,q,V,Q,I,z):J&6?W(h,g,p,M,q,V,Q,I,z):(J&64||J&128)&&L.process(h,g,p,M,q,V,Q,I,z,ue)}te!=null&&q&&kr(te,h&&h.ref,V,g||h,!g)},k=(h,g,p,M)=>{if(h==null)o(g.el=a(g.children),p,M);else{const q=g.el=h.el;g.children!==h.children&&u(q,g.children)}},S=(h,g,p,M)=>{h==null?o(g.el=l(g.children||""),p,M):g.el=h.el},A=(h,g,p,M)=>{[h.el,h.anchor]=P(h.children,g,p,M,h.el,h.anchor)},T=({el:h,anchor:g},p,M)=>{let q;for(;h&&h!==g;)q=f(h),o(h,p,M),h=q;o(g,p,M)},U=({el:h,anchor:g})=>{let p;for(;h&&h!==g;)p=f(h),r(h),h=p;r(g)},x=(h,g,p,M,q,V,Q,I,z)=>{Q=Q||g.type==="svg",h==null?y(g,p,M,q,V,Q,I,z):N(h,g,q,V,Q,I,z)},y=(h,g,p,M,q,V,Q,I)=>{let z,L;const{type:te,props:J,shapeFlag:ne,transition:oe,patchFlag:de,dirs:we}=h;if(h.el&&v!==void 0&&de===-1)z=h.el=v(h.el);else{if(z=h.el=s(h.type,V,J&&J.is,J),ne&8?c(z,h.children):ne&16&&O(h.children,z,null,M,q,V&&te!=="foreignObject",Q,I),we&&Pt(h,null,M,"created"),J){for(const ye in J)ye!=="value"&&!go(ye)&&i(z,ye,null,J[ye],V,h.children,M,q,j);"value"in J&&i(z,"value",null,J.value),(L=J.onVnodeBeforeMount)&&st(L,M,h)}$(z,h,h.scopeId,Q,M)}we&&Pt(h,null,M,"beforeMount");const ve=(!q||q&&!q.pendingBranch)&&oe&&!oe.persisted;ve&&oe.beforeEnter(z),o(z,g,p),((L=J&&J.onVnodeMounted)||ve||we)&&Ie(()=>{L&&st(L,M,h),ve&&oe.enter(z),we&&Pt(h,null,M,"mounted")},q)},$=(h,g,p,M,q)=>{if(p&&m(h,p),M)for(let V=0;V<M.length;V++)m(h,M[V]);if(q){let V=q.subTree;if(g===V){const Q=q.vnode;$(h,Q,Q.scopeId,Q.slotScopeIds,q.parent)}}},O=(h,g,p,M,q,V,Q,I,z=0)=>{for(let L=z;L<h.length;L++){const te=h[L]=I?wt(h[L]):at(h[L]);_(null,te,g,p,M,q,V,Q,I)}},N=(h,g,p,M,q,V,Q)=>{const I=g.el=h.el;let{patchFlag:z,dynamicChildren:L,dirs:te}=g;z|=h.patchFlag&16;const J=h.props||be,ne=g.props||be;let oe;p&&At(p,!1),(oe=ne.onVnodeBeforeUpdate)&&st(oe,p,g,h),te&&Pt(g,h,p,"beforeUpdate"),p&&At(p,!0);const de=q&&g.type!=="foreignObject";if(L?B(h.dynamicChildren,L,I,p,M,de,V):Q||F(h,g,I,null,p,M,de,V,!1),z>0){if(z&16)C(I,g,J,ne,p,M,q);else if(z&2&&J.class!==ne.class&&i(I,"class",null,ne.class,q),z&4&&i(I,"style",J.style,ne.style,q),z&8){const we=g.dynamicProps;for(let ve=0;ve<we.length;ve++){const ye=we[ve],Je=J[ye],Zt=ne[ye];(Zt!==Je||ye==="value")&&i(I,ye,Je,Zt,q,h.children,p,M,j)}}z&1&&h.children!==g.children&&c(I,g.children)}else!Q&&L==null&&C(I,g,J,ne,p,M,q);((oe=ne.onVnodeUpdated)||te)&&Ie(()=>{oe&&st(oe,p,g,h),te&&Pt(g,h,p,"updated")},M)},B=(h,g,p,M,q,V,Q)=>{for(let I=0;I<g.length;I++){const z=h[I],L=g[I],te=z.el&&(z.type===Ge||!Ot(z,L)||z.shapeFlag&70)?d(z.el):p;_(z,L,te,null,M,q,V,Q,!0)}},C=(h,g,p,M,q,V,Q)=>{if(p!==M){for(const I in M){if(go(I))continue;const z=M[I],L=p[I];z!==L&&I!=="value"&&i(h,I,L,z,Q,g.children,q,V,j)}if(p!==be)for(const I in p)!go(I)&&!(I in M)&&i(h,I,p[I],null,Q,g.children,q,V,j);"value"in M&&i(h,"value",p.value,M.value)}},H=(h,g,p,M,q,V,Q,I,z)=>{const L=g.el=h?h.el:a(""),te=g.anchor=h?h.anchor:a("");let{patchFlag:J,dynamicChildren:ne,slotScopeIds:oe}=g;oe&&(I=I?I.concat(oe):oe),h==null?(o(L,p,M),o(te,p,M),O(g.children,p,te,q,V,Q,I,z)):J>0&&J&64&&ne&&h.dynamicChildren?(B(h.dynamicChildren,ne,p,q,V,Q,I),(g.key!=null||q&&g===q.subTree)&&li(h,g,!0)):F(h,g,p,te,q,V,Q,I,z)},W=(h,g,p,M,q,V,Q,I,z)=>{g.slotScopeIds=I,h==null?g.shapeFlag&512?q.ctx.activate(g,p,M,Q,z):D(g,p,M,q,V,Q,z):G(h,g,z)},D=(h,g,p,M,q,V,Q)=>{const I=h.component=Qc(h,M,q);if(No(h)&&(I.ctx.renderer=ue),Yc(I),I.asyncDep){if(q&&q.registerDep(I,E),!h.el){const z=I.subTree=Ve(ot);S(null,z,g,p)}return}E(I,h,g,p,q,V,Q)},G=(h,g,p)=>{const M=g.component=h.component;if(sc(h,g,p))if(M.asyncDep&&!M.asyncResolved){K(M,g,p);return}else M.next=g,Gu(M.update),M.update();else g.component=h.component,g.el=h.el,M.vnode=g},E=(h,g,p,M,q,V,Q)=>{const I=()=>{if(h.isMounted){let{next:te,bu:J,u:ne,parent:oe,vnode:de}=h,we=te,ve;At(h,!1),te?(te.el=de.el,K(h,te,Q)):te=de,J&&Qo(J),(ve=te.props&&te.props.onVnodeBeforeUpdate)&&st(ve,oe,te,de),At(h,!0);const ye=Yo(h),Je=h.subTree;h.subTree=ye,_(Je,ye,d(Je.el),ee(Je),h,q,V),te.el=ye.el,we===null&&lc(h,ye.el),ne&&Ie(ne,q),(ve=te.props&&te.props.onVnodeUpdated)&&Ie(()=>st(ve,oe,te,de),q)}else{let te;const{el:J,props:ne}=g,{bm:oe,m:de,parent:we}=h,ve=_r(g);if(At(h,!1),oe&&Qo(oe),!ve&&(te=ne&&ne.onVnodeBeforeMount)&&st(te,we,g),At(h,!0),J&&ie){const ye=()=>{h.subTree=Yo(h),ie(J,h.subTree,h,q,null)};ve?g.type.__asyncLoader().then(()=>!h.isUnmounted&&ye()):ye()}else{const ye=h.subTree=Yo(h);_(null,ye,p,M,h,q,V),g.el=ye.el}if(de&&Ie(de,q),!ve&&(te=ne&&ne.onVnodeMounted)){const ye=g;Ie(()=>st(te,we,ye),q)}g.shapeFlag&256&&h.a&&Ie(h.a,q),h.isMounted=!0,g=p=M=null}},z=h.effect=new Zr(I,()=>kl(h.update),h.scope),L=h.update=z.run.bind(z);L.id=h.uid,At(h,!0),L()},K=(h,g,p)=>{g.component=h;const M=h.vnode.props;h.vnode=g,h.next=null,kc(h,g.props,M,p),Rc(h,g.children,p),_n(),oi(void 0,h.update),wn()},F=(h,g,p,M,q,V,Q,I,z=!1)=>{const L=h&&h.children,te=h?h.shapeFlag:0,J=g.children,{patchFlag:ne,shapeFlag:oe}=g;if(ne>0){if(ne&128){Ce(L,J,p,M,q,V,Q,I,z);return}else if(ne&256){ae(L,J,p,M,q,V,Q,I,z);return}}oe&8?(te&16&&j(L,q,V),J!==L&&c(p,J)):te&16?oe&16?Ce(L,J,p,M,q,V,Q,I,z):j(L,q,V,!0):(te&8&&c(p,""),oe&16&&O(J,p,M,q,V,Q,I,z))},ae=(h,g,p,M,q,V,Q,I,z)=>{h=h||fn,g=g||fn;const L=h.length,te=g.length,J=Math.min(L,te);let ne;for(ne=0;ne<J;ne++){const oe=g[ne]=z?wt(g[ne]):at(g[ne]);_(h[ne],oe,p,null,q,V,Q,I,z)}L>te?j(h,q,V,!0,!1,J):O(g,p,M,q,V,Q,I,z,J)},Ce=(h,g,p,M,q,V,Q,I,z)=>{let L=0;const te=g.length;let J=h.length-1,ne=te-1;for(;L<=J&&L<=ne;){const oe=h[L],de=g[L]=z?wt(g[L]):at(g[L]);if(Ot(oe,de))_(oe,de,p,null,q,V,Q,I,z);else break;L++}for(;L<=J&&L<=ne;){const oe=h[J],de=g[ne]=z?wt(g[ne]):at(g[ne]);if(Ot(oe,de))_(oe,de,p,null,q,V,Q,I,z);else break;J--,ne--}if(L>J){if(L<=ne){const oe=ne+1,de=oe<te?g[oe].el:M;for(;L<=ne;)_(null,g[L]=z?wt(g[L]):at(g[L]),p,de,q,V,Q,I,z),L++}}else if(L>ne)for(;L<=J;)ge(h[L],q,V,!0),L++;else{const oe=L,de=L,we=new Map;for(L=de;L<=ne;L++){const je=g[L]=z?wt(g[L]):at(g[L]);je.key!=null&&we.set(je.key,L)}let ve,ye=0;const Je=ne-de+1;let Zt=!1,pi=0;const Sn=new Array(Je);for(L=0;L<Je;L++)Sn[L]=0;for(L=oe;L<=J;L++){const je=h[L];if(ye>=Je){ge(je,q,V,!0);continue}let it;if(je.key!=null)it=we.get(je.key);else for(ve=de;ve<=ne;ve++)if(Sn[ve-de]===0&&Ot(je,g[ve])){it=ve;break}it===void 0?ge(je,q,V,!0):(Sn[it-de]=L+1,it>=pi?pi=it:Zt=!0,_(je,g[it],p,null,q,V,Q,I,z),ye++)}const bi=Zt?Mc(Sn):fn;for(ve=bi.length-1,L=Je-1;L>=0;L--){const je=de+L,it=g[je],yi=je+1<te?g[je+1].el:M;Sn[L]===0?_(null,it,p,yi,q,V,Q,I,z):Zt&&(ve<0||L!==bi[ve]?xe(it,p,yi,2):ve--)}}},xe=(h,g,p,M,q=null)=>{const{el:V,type:Q,transition:I,children:z,shapeFlag:L}=h;if(L&6){xe(h.component.subTree,g,p,M);return}if(L&128){h.suspense.move(g,p,M);return}if(L&64){Q.move(h,g,p,ue);return}if(Q===Ge){o(V,g,p);for(let J=0;J<z.length;J++)xe(z[J],g,p,M);o(h.anchor,g,p);return}if(Q===Jo){T(h,g,p);return}if(M!==2&&L&1&&I)if(M===0)I.beforeEnter(V),o(V,g,p),Ie(()=>I.enter(V),q);else{const{leave:J,delayLeave:ne,afterLeave:oe}=I,de=()=>o(V,g,p),we=()=>{J(V,()=>{de(),oe&&oe()})};ne?ne(V,de,we):we()}else o(V,g,p)},ge=(h,g,p,M=!1,q=!1)=>{const{type:V,props:Q,ref:I,children:z,dynamicChildren:L,shapeFlag:te,patchFlag:J,dirs:ne}=h;if(I!=null&&kr(I,null,p,h,!0),te&256){g.ctx.deactivate(h);return}const oe=te&1&&ne,de=!_r(h);let we;if(de&&(we=Q&&Q.onVnodeBeforeUnmount)&&st(we,g,h),te&6)Z(h.component,p,M);else{if(te&128){h.suspense.unmount(p,M);return}oe&&Pt(h,null,g,"beforeUnmount"),te&64?h.type.remove(h,g,p,q,ue,M):L&&(V!==Ge||J>0&&J&64)?j(L,g,p,!1,!0):(V===Ge&&J&384||!q&&te&16)&&j(z,g,p),M&&Ze(h)}(de&&(we=Q&&Q.onVnodeUnmounted)||oe)&&Ie(()=>{we&&st(we,g,h),oe&&Pt(h,null,g,"unmounted")},p)},Ze=h=>{const{type:g,el:p,anchor:M,transition:q}=h;if(g===Ge){R(p,M);return}if(g===Jo){U(h);return}const V=()=>{r(p),q&&!q.persisted&&q.afterLeave&&q.afterLeave()};if(h.shapeFlag&1&&q&&!q.persisted){const{leave:Q,delayLeave:I}=q,z=()=>Q(p,V);I?I(h.el,V,z):z()}else V()},R=(h,g)=>{let p;for(;h!==g;)p=f(h),r(h),h=p;r(g)},Z=(h,g,p)=>{const{bum:M,scope:q,update:V,subTree:Q,um:I}=h;M&&Qo(M),q.stop(),V&&(V.active=!1,ge(Q,h,g,p)),I&&Ie(I,g),Ie(()=>{h.isUnmounted=!0},g),g&&g.pendingBranch&&!g.isUnmounted&&h.asyncDep&&!h.asyncResolved&&h.suspenseId===g.pendingId&&(g.deps--,g.deps===0&&g.resolve())},j=(h,g,p,M=!1,q=!1,V=0)=>{for(let Q=V;Q<h.length;Q++)ge(h[Q],g,p,M,q)},ee=h=>h.shapeFlag&6?ee(h.component.subTree):h.shapeFlag&128?h.suspense.next():f(h.anchor||h.el),X=(h,g,p)=>{h==null?g._vnode&&ge(g._vnode,null,null,!0):_(g._vnode||null,h,g,null,null,null,p),Rl(),g._vnode=h},ue={p:_,um:ge,m:xe,r:Ze,mt:D,mc:O,pc:F,pbc:B,n:ee,o:e};let se,ie;return t&&([se,ie]=t(ue)),{render:X,hydrate:se,createApp:Pc(X,se)}}function At({effect:e,update:t},n){e.allowRecurse=t.allowRecurse=n}function li(e,t,n=!1){const o=e.children,r=t.children;if(re(o)&&re(r))for(let i=0;i<o.length;i++){const s=o[i];let a=r[i];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=r[i]=wt(r[i]),a.el=s.el),n||li(s,a))}}function Mc(e){const t=e.slice(),n=[0];let o,r,i,s,a;const l=e.length;for(o=0;o<l;o++){const u=e[o];if(u!==0){if(r=n[n.length-1],e[r]<u){t[o]=r,n.push(o);continue}for(i=0,s=n.length-1;i<s;)a=i+s>>1,e[n[a]]<u?i=a+1:s=a;u<e[n[i]]&&(i>0&&(t[o]=n[i-1]),n[i]=o)}}for(i=n.length,s=n[i-1];i-- >0;)n[i]=s,s=t[s];return n}const $c=e=>e.__isTeleport,Nn=e=>e&&(e.disabled||e.disabled===""),Vi=e=>typeof SVGElement!="undefined"&&e instanceof SVGElement,Er=(e,t)=>{const n=e&&e.to;return Re(n)?t?t(n):null:n},Oc={__isTeleport:!0,process(e,t,n,o,r,i,s,a,l,u){const{mc:c,pc:d,pbc:f,o:{insert:m,querySelector:v,createText:P,createComment:_}}=u,k=Nn(t.props);let{shapeFlag:S,children:A,dynamicChildren:T}=t;if(e==null){const U=t.el=P(""),x=t.anchor=P("");m(U,n,o),m(x,n,o);const y=t.target=Er(t.props,v),$=t.targetAnchor=P("");y&&(m($,y),s=s||Vi(y));const O=(N,B)=>{S&16&&c(A,N,B,r,i,s,a,l)};k?O(n,x):y&&O(y,$)}else{t.el=e.el;const U=t.anchor=e.anchor,x=t.target=e.target,y=t.targetAnchor=e.targetAnchor,$=Nn(e.props),O=$?n:x,N=$?U:y;if(s=s||Vi(x),T?(f(e.dynamicChildren,T,O,r,i,s,a),li(e,t,!0)):l||d(e,t,O,N,r,i,s,a,!1),k)$||lo(t,n,U,u,1);else if((t.props&&t.props.to)!==(e.props&&e.props.to)){const B=t.target=Er(t.props,v);B&&lo(t,B,null,u,0)}else $&&lo(t,x,y,u,1)}},remove(e,t,n,o,{um:r,o:{remove:i}},s){const{shapeFlag:a,children:l,anchor:u,targetAnchor:c,target:d,props:f}=e;if(d&&i(c),(s||!Nn(f))&&(i(u),a&16))for(let m=0;m<l.length;m++){const v=l[m];r(v,t,n,!0,!!v.dynamicChildren)}},move:lo,hydrate:Lc};function lo(e,t,n,{o:{insert:o},m:r},i=2){i===0&&o(e.targetAnchor,t,n);const{el:s,anchor:a,shapeFlag:l,children:u,props:c}=e,d=i===2;if(d&&o(s,t,n),(!d||Nn(c))&&l&16)for(let f=0;f<u.length;f++)r(u[f],t,n,2);d&&o(a,t,n)}function Lc(e,t,n,o,r,i,{o:{nextSibling:s,parentNode:a,querySelector:l}},u){const c=t.target=Er(t.props,l);if(c){const d=c._lpa||c.firstChild;t.shapeFlag&16&&(Nn(t.props)?(t.anchor=u(s(e),t,a(e),n,o,r,i),t.targetAnchor=d):(t.anchor=s(e),t.targetAnchor=u(d,t,c,n,o,r,i)),c._lpa=t.targetAnchor&&s(t.targetAnchor))}return t.anchor&&s(t.anchor)}const Bc=Oc,Zl="components";function Fc(e,t){return Nc(Zl,e,!0,t)||e}const Ic=Symbol();function Nc(e,t,n=!0,o=!1){const r=Qe||Pe;if(r){const i=r.type;if(e===Zl){const a=Gc(i);if(a&&(a===t||a===ut(t)||a===Oo(ut(t))))return i}const s=ji(r[e]||i[e],t)||ji(r.appContext[e],t);return!s&&o?i:s}}function ji(e,t){return e&&(e[t]||e[ut(t)]||e[Oo(ut(t))])}const Ge=Symbol(void 0),ai=Symbol(void 0),ot=Symbol(void 0),Jo=Symbol(void 0),Vn=[];let Vt=null;function Jl(e=!1){Vn.push(Vt=e?null:[])}function Vc(){Vn.pop(),Vt=Vn[Vn.length-1]||null}let ko=1;function Di(e){ko+=e}function Xl(e){return e.dynamicChildren=ko>0?Vt||fn:null,Vc(),ko>0&&Vt&&Vt.push(e),e}function bg(e,t,n,o,r,i){return Xl(ta(e,t,n,o,r,i,!0))}function Gl(e,t,n,o,r){return Xl(Ve(e,t,n,o,r,!0))}function Sr(e){return e?e.__v_isVNode===!0:!1}function Ot(e,t){return e.type===t.type&&e.key===t.key}const jo="__vInternal",ea=({key:e})=>e!=null?e:null,po=({ref:e,ref_key:t,ref_for:n})=>e!=null?Re(e)||Ae(e)||le(e)?{i:Qe,r:e,k:t,f:!!n}:e:null;function ta(e,t=null,n=null,o=0,r=null,i=e===Ge?0:1,s=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&ea(t),ref:t&&po(t),scopeId:Al,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:o,dynamicProps:r,dynamicChildren:null,appContext:null};return a?(ui(l,n),i&128&&e.normalize(l)):n&&(l.shapeFlag|=Re(n)?8:16),ko>0&&!s&&Vt&&(l.patchFlag>0||i&6)&&l.patchFlag!==32&&Vt.push(l),l}const Ve=jc;function jc(e,t=null,n=null,o=0,r=null,i=!1){if((!e||e===Ic)&&(e=ot),Sr(e)){const a=Ht(e,t,!0);return n&&ui(a,n),a}if(ef(e)&&(e=e.__vccOpts),t){t=Dc(t);let{class:a,style:l}=t;a&&!Re(a)&&(t.class=Hr(a)),ke(l)&&(bl(l)&&!re(l)&&(l=qe({},l)),t.style=zr(l))}const s=Re(e)?1:ac(e)?128:$c(e)?64:ke(e)?4:le(e)?2:0;return ta(e,t,n,o,r,s,i,!0)}function Dc(e){return e?bl(e)||jo in e?qe({},e):e:null}function Ht(e,t,n=!1){const{props:o,ref:r,patchFlag:i,children:s}=e,a=t?Hc(o||{},t):o;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:a,key:a&&ea(a),ref:t&&t.ref?n&&r?re(r)?r.concat(po(t)):[r,po(t)]:po(t):r,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:s,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Ge?i===-1?16:i|16:i,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Ht(e.ssContent),ssFallback:e.ssFallback&&Ht(e.ssFallback),el:e.el,anchor:e.anchor}}function zc(e=" ",t=0){return Ve(ai,null,e,t)}function yg(e="",t=!1){return t?(Jl(),Gl(ot,null,e)):Ve(ot,null,e)}function at(e){return e==null||typeof e=="boolean"?Ve(ot):re(e)?Ve(Ge,null,e.slice()):typeof e=="object"?wt(e):Ve(ai,null,String(e))}function wt(e){return e.el===null||e.memo?e:Ht(e)}function ui(e,t){let n=0;const{shapeFlag:o}=e;if(t==null)t=null;else if(re(t))n=16;else if(typeof t=="object")if(o&65){const r=t.default;r&&(r._c&&(r._d=!1),ui(e,r()),r._c&&(r._d=!0));return}else{n=32;const r=t._;!r&&!(jo in t)?t._ctx=Qe:r===3&&Qe&&(Qe.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else le(t)?(t={default:t,_ctx:Qe},n=32):(t=String(t),o&64?(n=16,t=[zc(t)]):n=8);e.children=t,e.shapeFlag|=n}function Hc(...e){const t={};for(let n=0;n<e.length;n++){const o=e[n];for(const r in o)if(r==="class")t.class!==o.class&&(t.class=Hr([t.class,o.class]));else if(r==="style")t.style=zr([t.style,o.style]);else if(qo(r)){const i=t[r],s=o[r];s&&i!==s&&!(re(i)&&i.includes(s))&&(t[r]=i?[].concat(i,s):s)}else r!==""&&(t[r]=o[r])}return t}function st(e,t,n,o=null){Ye(e,t,7,[n,o])}function _g(e,t,n,o){let r;const i=n&&n[o];if(re(e)||Re(e)){r=new Array(e.length);for(let s=0,a=e.length;s<a;s++)r[s]=t(e[s],s,void 0,i&&i[s])}else if(typeof e=="number"){r=new Array(e);for(let s=0;s<e;s++)r[s]=t(s+1,s,void 0,i&&i[s])}else if(ke(e))if(e[Symbol.iterator])r=Array.from(e,(s,a)=>t(s,a,void 0,i&&i[a]));else{const s=Object.keys(e);r=new Array(s.length);for(let a=0,l=s.length;a<l;a++){const u=s[a];r[a]=t(e[u],u,a,i&&i[a])}}else r=[];return n&&(n[o]=r),r}const Rr=e=>e?na(e)?Do(e)||e.proxy:Rr(e.parent):null,Eo=qe(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Rr(e.parent),$root:e=>Rr(e.root),$emit:e=>e.emit,$options:e=>Dl(e),$forceUpdate:e=>()=>kl(e.update),$nextTick:e=>Fe.bind(e.proxy),$watch:e=>cc.bind(e)}),Uc={get({_:e},t){const{ctx:n,setupState:o,data:r,props:i,accessCache:s,type:a,appContext:l}=e;let u;if(t[0]!=="$"){const m=s[t];if(m!==void 0)switch(m){case 1:return o[t];case 2:return r[t];case 4:return n[t];case 3:return i[t]}else{if(o!==be&&fe(o,t))return s[t]=1,o[t];if(r!==be&&fe(r,t))return s[t]=2,r[t];if((u=e.propsOptions[0])&&fe(u,t))return s[t]=3,i[t];if(n!==be&&fe(n,t))return s[t]=4,n[t];wr&&(s[t]=0)}}const c=Eo[t];let d,f;if(c)return t==="$attrs"&&ze(e,"get",t),c(e);if((d=a.__cssModules)&&(d=d[t]))return d;if(n!==be&&fe(n,t))return s[t]=4,n[t];if(f=l.config.globalProperties,fe(f,t))return f[t]},set({_:e},t,n){const{data:o,setupState:r,ctx:i}=e;return r!==be&&fe(r,t)?(r[t]=n,!0):o!==be&&fe(o,t)?(o[t]=n,!0):fe(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(i[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:o,appContext:r,propsOptions:i}},s){let a;return!!n[s]||e!==be&&fe(e,s)||t!==be&&fe(t,s)||(a=i[0])&&fe(a,s)||fe(o,s)||fe(Eo,s)||fe(r.config.globalProperties,s)},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:fe(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}},Kc=Yl();let Wc=0;function Qc(e,t,n){const o=e.type,r=(t?t.appContext:e.appContext)||Kc,i={uid:Wc++,vnode:e,type:o,parent:t,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,scope:new il(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(r.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Hl(o,r),emitsOptions:Pl(o,r),emit:null,emitted:null,propsDefaults:be,inheritAttrs:o.inheritAttrs,ctx:be,data:be,props:be,attrs:be,slots:be,refs:be,setupState:be,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=t?t.root:i,i.emit=nc.bind(null,i),e.ce&&e.ce(i),i}let Pe=null;const Te=()=>Pe||Qe,mn=e=>{Pe=e,e.scope.on()},jt=()=>{Pe&&Pe.scope.off(),Pe=null};function na(e){return e.vnode.shapeFlag&4}let Yn=!1;function Yc(e,t=!1){Yn=t;const{props:n,children:o}=e.vnode,r=na(e);Cc(e,n,r,t),Sc(e,o);const i=r?Zc(e,t):void 0;return Yn=!1,i}function Zc(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=Wt(new Proxy(e.ctx,Uc));const{setup:o}=n;if(o){const r=e.setupContext=o.length>1?Xc(e):null;mn(e),_n();const i=St(o,e,0,[e.props,r]);if(wn(),jt(),tl(i)){if(i.then(jt,jt),t)return i.then(s=>{zi(e,s,t)}).catch(s=>{Bo(s,e,0)});e.asyncDep=i}else zi(e,i,t)}else oa(e,t)}function zi(e,t,n){le(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:ke(t)&&(e.setupState=xl(t)),oa(e,n)}let Hi;function oa(e,t,n){const o=e.type;if(!e.render){if(!t&&Hi&&!o.render){const r=o.template;if(r){const{isCustomElement:i,compilerOptions:s}=e.appContext.config,{delimiters:a,compilerOptions:l}=o,u=qe(qe({isCustomElement:i,delimiters:a},s),l);o.render=Hi(r,u)}}e.render=o.render||nt}mn(e),_n(),bc(e),wn(),jt()}function Jc(e){return new Proxy(e.attrs,{get(t,n){return ze(e,"get","$attrs"),t[n]}})}function Xc(e){const t=o=>{e.exposed=o||{}};let n;return{get attrs(){return n||(n=Jc(e))},slots:e.slots,emit:e.emit,expose:t}}function Do(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(xl(Wt(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in Eo)return Eo[n](e)}}))}function Gc(e){return le(e)&&e.displayName||e.name}function ef(e){return le(e)&&"__vccOpts"in e}const w=(e,t)=>Zu(e,t,Yn);function b(e,t,n){const o=arguments.length;return o===2?ke(t)&&!re(t)?Sr(t)?Ve(e,null,[t]):Ve(e,t):Ve(e,null,t):(o>3?n=Array.prototype.slice.call(arguments,2):o===3&&Sr(n)&&(n=[n]),Ve(e,t,n))}const tf="3.2.33",nf="http://www.w3.org/2000/svg",Lt=typeof document!="undefined"?document:null,Ui=Lt&&Lt.createElement("template"),of={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,o)=>{const r=t?Lt.createElementNS(nf,e):Lt.createElement(e,n?{is:n}:void 0);return e==="select"&&o&&o.multiple!=null&&r.setAttribute("multiple",o.multiple),r},createText:e=>Lt.createTextNode(e),createComment:e=>Lt.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Lt.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},cloneNode(e){const t=e.cloneNode(!0);return"_value"in e&&(t._value=e._value),t},insertStaticContent(e,t,n,o,r,i){const s=n?n.previousSibling:t.lastChild;if(r&&(r===i||r.nextSibling))for(;t.insertBefore(r.cloneNode(!0),n),!(r===i||!(r=r.nextSibling)););else{Ui.innerHTML=o?`<svg>${e}</svg>`:e;const a=Ui.content;if(o){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}t.insertBefore(a,n)}return[s?s.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}};function rf(e,t,n){const o=e._vtc;o&&(t=(t?[t,...o]:[...o]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}function sf(e,t,n){const o=e.style,r=Re(n);if(n&&!r){for(const i in n)Tr(o,i,n[i]);if(t&&!Re(t))for(const i in t)n[i]==null&&Tr(o,i,"")}else{const i=o.display;r?t!==n&&(o.cssText=n):t&&e.removeAttribute("style"),"_vod"in e&&(o.display=i)}}const Ki=/\s*!important$/;function Tr(e,t,n){if(re(n))n.forEach(o=>Tr(e,t,o));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const o=lf(e,t);Ki.test(n)?e.setProperty(yn(o),n.replace(Ki,""),"important"):e[o]=n}}const Wi=["Webkit","Moz","ms"],Xo={};function lf(e,t){const n=Xo[t];if(n)return n;let o=ut(t);if(o!=="filter"&&o in e)return Xo[t]=o;o=Oo(o);for(let r=0;r<Wi.length;r++){const i=Wi[r]+o;if(i in e)return Xo[t]=i}return t}const Qi="http://www.w3.org/1999/xlink";function af(e,t,n,o,r){if(o&&t.startsWith("xlink:"))n==null?e.removeAttributeNS(Qi,t.slice(6,t.length)):e.setAttributeNS(Qi,t,n);else{const i=lu(t);n==null||i&&!Xs(n)?e.removeAttribute(t):e.setAttribute(t,i?"":n)}}function uf(e,t,n,o,r,i,s){if(t==="innerHTML"||t==="textContent"){o&&s(o,r,i),e[t]=n==null?"":n;return}if(t==="value"&&e.tagName!=="PROGRESS"&&!e.tagName.includes("-")){e._value=n;const l=n==null?"":n;(e.value!==l||e.tagName==="OPTION")&&(e.value=l),n==null&&e.removeAttribute(t);return}let a=!1;if(n===""||n==null){const l=typeof e[t];l==="boolean"?n=Xs(n):n==null&&l==="string"?(n="",a=!0):l==="number"&&(n=0,a=!0)}try{e[t]=n}catch{}a&&e.removeAttribute(t)}const[ra,cf]=(()=>{let e=Date.now,t=!1;if(typeof window!="undefined"){Date.now()>document.createEvent("Event").timeStamp&&(e=()=>performance.now());const n=navigator.userAgent.match(/firefox\/(\d+)/i);t=!!(n&&Number(n[1])<=53)}return[e,t]})();let Pr=0;const ff=Promise.resolve(),df=()=>{Pr=0},hf=()=>Pr||(ff.then(df),Pr=ra());function mf(e,t,n,o){e.addEventListener(t,n,o)}function gf(e,t,n,o){e.removeEventListener(t,n,o)}function vf(e,t,n,o,r=null){const i=e._vei||(e._vei={}),s=i[t];if(o&&s)s.value=o;else{const[a,l]=pf(t);if(o){const u=i[t]=bf(o,r);mf(e,a,u,l)}else s&&(gf(e,a,s,l),i[t]=void 0)}}const Yi=/(?:Once|Passive|Capture)$/;function pf(e){let t;if(Yi.test(e)){t={};let n;for(;n=e.match(Yi);)e=e.slice(0,e.length-n[0].length),t[n[0].toLowerCase()]=!0}return[yn(e.slice(2)),t]}function bf(e,t){const n=o=>{const r=o.timeStamp||ra();(cf||r>=n.attached-1)&&Ye(yf(o,n.value),t,5,[o])};return n.value=e,n.attached=hf(),n}function yf(e,t){if(re(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(o=>r=>!r._stopped&&o&&o(r))}else return t}const Zi=/^on[a-z]/,_f=(e,t,n,o,r=!1,i,s,a,l)=>{t==="class"?rf(e,o,r):t==="style"?sf(e,n,o):qo(t)?Ur(t)||vf(e,t,n,o,s):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):wf(e,t,o,r))?uf(e,t,o,i,s,a,l):(t==="true-value"?e._trueValue=o:t==="false-value"&&(e._falseValue=o),af(e,t,o,r))};function wf(e,t,n,o){return o?!!(t==="innerHTML"||t==="textContent"||t in e&&Zi.test(t)&&le(n)):t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA"||Zi.test(t)&&Re(n)?!1:t in e}const pt="transition",Rn="animation",Ut=(e,{slots:t})=>b(Ol,sa(e),t);Ut.displayName="Transition";const ia={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},xf=Ut.props=qe({},Ol.props,ia),qt=(e,t=[])=>{re(e)?e.forEach(n=>n(...t)):e&&e(...t)},Ji=e=>e?re(e)?e.some(t=>t.length>1):e.length>1:!1;function sa(e){const t={};for(const C in e)C in ia||(t[C]=e[C]);if(e.css===!1)return t;const{name:n="v",type:o,duration:r,enterFromClass:i=`${n}-enter-from`,enterActiveClass:s=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:l=i,appearActiveClass:u=s,appearToClass:c=a,leaveFromClass:d=`${n}-leave-from`,leaveActiveClass:f=`${n}-leave-active`,leaveToClass:m=`${n}-leave-to`}=e,v=Cf(r),P=v&&v[0],_=v&&v[1],{onBeforeEnter:k,onEnter:S,onEnterCancelled:A,onLeave:T,onLeaveCancelled:U,onBeforeAppear:x=k,onAppear:y=S,onAppearCancelled:$=A}=t,O=(C,H,W)=>{$t(C,H?c:a),$t(C,H?u:s),W&&W()},N=(C,H)=>{$t(C,m),$t(C,f),H&&H()},B=C=>(H,W)=>{const D=C?y:S,G=()=>O(H,C,W);qt(D,[H,G]),Xi(()=>{$t(H,C?l:i),ct(H,C?c:a),Ji(D)||Gi(H,o,P,G)})};return qe(t,{onBeforeEnter(C){qt(k,[C]),ct(C,i),ct(C,s)},onBeforeAppear(C){qt(x,[C]),ct(C,l),ct(C,u)},onEnter:B(!1),onAppear:B(!0),onLeave(C,H){const W=()=>N(C,H);ct(C,d),aa(),ct(C,f),Xi(()=>{$t(C,d),ct(C,m),Ji(T)||Gi(C,o,_,W)}),qt(T,[C,W])},onEnterCancelled(C){O(C,!1),qt(A,[C])},onAppearCancelled(C){O(C,!0),qt($,[C])},onLeaveCancelled(C){N(C),qt(U,[C])}})}function Cf(e){if(e==null)return null;if(ke(e))return[Go(e.enter),Go(e.leave)];{const t=Go(e);return[t,t]}}function Go(e){return rl(e)}function ct(e,t){t.split(/\s+/).forEach(n=>n&&e.classList.add(n)),(e._vtc||(e._vtc=new Set)).add(t)}function $t(e,t){t.split(/\s+/).forEach(o=>o&&e.classList.remove(o));const{_vtc:n}=e;n&&(n.delete(t),n.size||(e._vtc=void 0))}function Xi(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let kf=0;function Gi(e,t,n,o){const r=e._endId=++kf,i=()=>{r===e._endId&&o()};if(n)return setTimeout(i,n);const{type:s,timeout:a,propCount:l}=la(e,t);if(!s)return o();const u=s+"end";let c=0;const d=()=>{e.removeEventListener(u,f),i()},f=m=>{m.target===e&&++c>=l&&d()};setTimeout(()=>{c<l&&d()},a+1),e.addEventListener(u,f)}function la(e,t){const n=window.getComputedStyle(e),o=v=>(n[v]||"").split(", "),r=o(pt+"Delay"),i=o(pt+"Duration"),s=es(r,i),a=o(Rn+"Delay"),l=o(Rn+"Duration"),u=es(a,l);let c=null,d=0,f=0;t===pt?s>0&&(c=pt,d=s,f=i.length):t===Rn?u>0&&(c=Rn,d=u,f=l.length):(d=Math.max(s,u),c=d>0?s>u?pt:Rn:null,f=c?c===pt?i.length:l.length:0);const m=c===pt&&/\b(transform|all)(,|$)/.test(n[pt+"Property"]);return{type:c,timeout:d,propCount:f,hasTransform:m}}function es(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((n,o)=>ts(n)+ts(e[o])))}function ts(e){return Number(e.slice(0,-1).replace(",","."))*1e3}function aa(){return document.body.offsetHeight}const ua=new WeakMap,ca=new WeakMap,Ef={name:"TransitionGroup",props:qe({},xf,{tag:String,moveClass:String}),setup(e,{slots:t}){const n=Te(),o=$l();let r,i;return Vl(()=>{if(!r.length)return;const s=e.moveClass||`${e.name||"v"}-move`;if(!Af(r[0].el,n.vnode.el,s))return;r.forEach(Rf),r.forEach(Tf);const a=r.filter(Pf);aa(),a.forEach(l=>{const u=l.el,c=u.style;ct(u,s),c.transform=c.webkitTransform=c.transitionDuration="";const d=u._moveCb=f=>{f&&f.target!==u||(!f||/transform$/.test(f.propertyName))&&(u.removeEventListener("transitionend",d),u._moveCb=null,$t(u,s))};u.addEventListener("transitionend",d)})}),()=>{const s=he(e),a=sa(s);let l=s.tag||Ge;r=i,i=t.default?ri(t.default()):[];for(let u=0;u<i.length;u++){const c=i[u];c.key!=null&&Qn(c,Wn(c,a,o,n))}if(r)for(let u=0;u<r.length;u++){const c=r[u];Qn(c,Wn(c,a,o,n)),ua.set(c,c.el.getBoundingClientRect())}return Ve(l,null,i)}}},Sf=Ef;function Rf(e){const t=e.el;t._moveCb&&t._moveCb(),t._enterCb&&t._enterCb()}function Tf(e){ca.set(e,e.el.getBoundingClientRect())}function Pf(e){const t=ua.get(e),n=ca.get(e),o=t.left-n.left,r=t.top-n.top;if(o||r){const i=e.el.style;return i.transform=i.webkitTransform=`translate(${o}px,${r}px)`,i.transitionDuration="0s",e}}function Af(e,t,n){const o=e.cloneNode();e._vtc&&e._vtc.forEach(s=>{s.split(/\s+/).forEach(a=>a&&o.classList.remove(a))}),n.split(/\s+/).forEach(s=>s&&o.classList.add(s)),o.style.display="none";const r=t.nodeType===1?t:t.parentNode;r.appendChild(o);const{hasTransform:i}=la(o);return r.removeChild(o),i}const qf=qe({patchProp:_f},of);let ns;function Mf(){return ns||(ns=Ac(qf))}const ci=(...e)=>{const t=Mf().createApp(...e),{mount:n}=t;return t.mount=o=>{const r=$f(o);if(!r)return;const i=t._component;!le(i)&&!i.render&&!i.template&&(i.template=r.innerHTML),r.innerHTML="";const s=n(r,!1,r instanceof SVGElement);return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),s},t};function $f(e){return Re(e)?document.querySelector(e):e}function zo(e,t,n,o){Object.defineProperty(e,t,{get:n,set:o,enumerable:!0})}const Tt=me(!1);let Ho;function Of(e,t){const n=/(edg|edge|edga|edgios)\/([\w.]+)/.exec(e)||/(opr)[\/]([\w.]+)/.exec(e)||/(vivaldi)[\/]([\w.]+)/.exec(e)||/(chrome|crios)[\/]([\w.]+)/.exec(e)||/(version)(applewebkit)[\/]([\w.]+).*(safari)[\/]([\w.]+)/.exec(e)||/(webkit)[\/]([\w.]+).*(version)[\/]([\w.]+).*(safari)[\/]([\w.]+)/.exec(e)||/(firefox|fxios)[\/]([\w.]+)/.exec(e)||/(webkit)[\/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[\/]([\w.]+)/.exec(e)||[];return{browser:n[5]||n[3]||n[1]||"",version:n[2]||n[4]||"0",versionNumber:n[4]||n[2]||"0",platform:t[0]||""}}function Lf(e){return/(ipad)/.exec(e)||/(ipod)/.exec(e)||/(windows phone)/.exec(e)||/(iphone)/.exec(e)||/(kindle)/.exec(e)||/(silk)/.exec(e)||/(android)/.exec(e)||/(win)/.exec(e)||/(mac)/.exec(e)||/(linux)/.exec(e)||/(cros)/.exec(e)||/(playbook)/.exec(e)||/(bb)/.exec(e)||/(blackberry)/.exec(e)||[]}const fa="ontouchstart"in window||window.navigator.maxTouchPoints>0;function Bf(e){Ho={is:Y({},e)},delete e.mac,delete e.desktop;const t=Math.min(window.innerHeight,window.innerWidth)>414?"ipad":"iphone";Object.assign(e,{mobile:!0,ios:!0,platform:t,[t]:!0})}function Ff(e){const t=e.toLowerCase(),n=Lf(t),o=Of(t,n),r={};o.browser&&(r[o.browser]=!0,r.version=o.version,r.versionNumber=parseInt(o.versionNumber,10)),o.platform&&(r[o.platform]=!0);const i=r.android||r.ios||r.bb||r.blackberry||r.ipad||r.iphone||r.ipod||r.kindle||r.playbook||r.silk||r["windows phone"];return i===!0||t.indexOf("mobile")>-1?(r.mobile=!0,r.edga||r.edgios?(r.edge=!0,o.browser="edge"):r.crios?(r.chrome=!0,o.browser="chrome"):r.fxios&&(r.firefox=!0,o.browser="firefox")):r.desktop=!0,(r.ipod||r.ipad||r.iphone)&&(r.ios=!0),r["windows phone"]&&(r.winphone=!0,delete r["windows phone"]),(r.chrome||r.opr||r.safari||r.vivaldi||r.mobile===!0&&r.ios!==!0&&i!==!0)&&(r.webkit=!0),r.edg&&(o.browser="edgechromium",r.edgeChromium=!0),(r.safari&&r.blackberry||r.bb)&&(o.browser="blackberry",r.blackberry=!0),r.safari&&r.playbook&&(o.browser="playbook",r.playbook=!0),r.opr&&(o.browser="opera",r.opera=!0),r.safari&&r.android&&(o.browser="android",r.android=!0),r.safari&&r.kindle&&(o.browser="kindle",r.kindle=!0),r.safari&&r.silk&&(o.browser="silk",r.silk=!0),r.vivaldi&&(o.browser="vivaldi",r.vivaldi=!0),r.name=o.browser,r.platform=o.platform,t.indexOf("electron")>-1?r.electron=!0:document.location.href.indexOf("-extension://")>-1?r.bex=!0:(window.Capacitor!==void 0?(r.capacitor=!0,r.nativeMobile=!0,r.nativeMobileWrapper="capacitor"):(window._cordovaNative!==void 0||window.cordova!==void 0)&&(r.cordova=!0,r.nativeMobile=!0,r.nativeMobileWrapper="cordova"),fa===!0&&r.mac===!0&&(r.desktop===!0&&r.safari===!0||r.nativeMobile===!0&&r.android!==!0&&r.ios!==!0&&r.ipad!==!0)&&Bf(r)),r}const os=navigator.userAgent||navigator.vendor||window.opera,If={has:{touch:!1,webStorage:!1},within:{iframe:!1}},Se={userAgent:os,is:Ff(os),has:{touch:fa},within:{iframe:window.self!==window.top}},Ar={install(e){const{$q:t}=e;Tt.value===!0?(e.onSSRHydrated.push(()=>{Tt.value=!1,Object.assign(t.platform,Se),Ho=void 0}),t.platform=Kt(this)):t.platform=this}};{let e;zo(Se.has,"webStorage",()=>{if(e!==void 0)return e;try{if(window.localStorage)return e=!0,!0}catch{}return e=!1,!1}),Se.is.ios===!0&&window.navigator.vendor.toLowerCase().indexOf("apple"),Tt.value===!0?Object.assign(Ar,Se,Ho,If):Object.assign(Ar,Se)}var eo=(e,t)=>{const n=Kt(e);for(const o in e)zo(t,o,()=>n[o],r=>{n[o]=r});return t};const Ne={hasPassive:!1,passiveCapture:!0,notPassiveCapture:!0};try{const e=Object.defineProperty({},"passive",{get(){Object.assign(Ne,{hasPassive:!0,passive:{passive:!0},notPassive:{passive:!1},passiveCapture:{passive:!0,capture:!0},notPassiveCapture:{passive:!1,capture:!0}})}});window.addEventListener("qtest",null,e),window.removeEventListener("qtest",null,e)}catch{}function Zn(){}function wg(e){return e.button===0}function Nf(e){return e.touches&&e.touches[0]?e=e.touches[0]:e.changedTouches&&e.changedTouches[0]?e=e.changedTouches[0]:e.targetTouches&&e.targetTouches[0]&&(e=e.targetTouches[0]),{top:e.clientY,left:e.clientX}}function Vf(e){if(e.path)return e.path;if(e.composedPath)return e.composedPath();const t=[];let n=e.target;for(;n;){if(t.push(n),n.tagName==="HTML")return t.push(document),t.push(window),t;n=n.parentElement}}function So(e){e.stopPropagation()}function kt(e){e.cancelable!==!1&&e.preventDefault()}function Ke(e){e.cancelable!==!1&&e.preventDefault(),e.stopPropagation()}function xg(e,t){if(e===void 0||t===!0&&e.__dragPrevented===!0)return;const n=t===!0?o=>{o.__dragPrevented=!0,o.addEventListener("dragstart",kt,Ne.notPassiveCapture)}:o=>{delete o.__dragPrevented,o.removeEventListener("dragstart",kt,Ne.notPassiveCapture)};e.querySelectorAll("a, img").forEach(n)}function jf(e,t,n){const o=`__q_${t}_evt`;e[o]=e[o]!==void 0?e[o].concat(n):n,n.forEach(r=>{r[0].addEventListener(r[1],e[r[2]],Ne[r[3]])})}function Df(e,t){const n=`__q_${t}_evt`;e[n]!==void 0&&(e[n].forEach(o=>{o[0].removeEventListener(o[1],e[o[2]],Ne[o[3]])}),e[n]=void 0)}function da(e,t=250,n){let o;function r(){const i=arguments,s=()=>{o=void 0,n!==!0&&e.apply(this,i)};clearTimeout(o),n===!0&&o===void 0&&e.apply(this,i),o=setTimeout(s,t)}return r.cancel=()=>{clearTimeout(o)},r}const er=["sm","md","lg","xl"],{passive:rs}=Ne;var zf=eo({width:0,height:0,name:"xs",sizes:{sm:600,md:1024,lg:1440,xl:1920},lt:{sm:!0,md:!0,lg:!0,xl:!0},gt:{xs:!1,sm:!1,md:!1,lg:!1},xs:!0,sm:!1,md:!1,lg:!1,xl:!1},{setSizes:Zn,setDebounce:Zn,install({$q:e,onSSRHydrated:t}){if(e.screen=this,this.__installed===!0){e.config.screen!==void 0&&(e.config.screen.bodyClasses===!1?document.body.classList.remove(`screen--${this.name}`):this.__update(!0));return}const{visualViewport:n}=window,o=n||window,r=document.scrollingElement||document.documentElement,i=n===void 0||Se.is.mobile===!0?()=>[Math.max(window.innerWidth,r.clientWidth),Math.max(window.innerHeight,r.clientHeight)]:()=>[n.width*n.scale+window.innerWidth-r.clientWidth,n.height*n.scale+window.innerHeight-r.clientHeight],s=e.config.screen!==void 0&&e.config.screen.bodyClasses===!0;this.__update=d=>{const[f,m]=i();if(m!==this.height&&(this.height=m),f!==this.width)this.width=f;else if(d!==!0)return;let v=this.sizes;this.gt.xs=f>=v.sm,this.gt.sm=f>=v.md,this.gt.md=f>=v.lg,this.gt.lg=f>=v.xl,this.lt.sm=f<v.sm,this.lt.md=f<v.md,this.lt.lg=f<v.lg,this.lt.xl=f<v.xl,this.xs=this.lt.sm,this.sm=this.gt.xs===!0&&this.lt.md===!0,this.md=this.gt.sm===!0&&this.lt.lg===!0,this.lg=this.gt.md===!0&&this.lt.xl===!0,this.xl=this.gt.lg,v=this.xs===!0&&"xs"||this.sm===!0&&"sm"||this.md===!0&&"md"||this.lg===!0&&"lg"||"xl",v!==this.name&&(s===!0&&(document.body.classList.remove(`screen--${this.name}`),document.body.classList.add(`screen--${v}`)),this.name=v)};let a,l={},u=16;this.setSizes=d=>{er.forEach(f=>{d[f]!==void 0&&(l[f]=d[f])})},this.setDebounce=d=>{u=d};const c=()=>{const d=getComputedStyle(document.body);d.getPropertyValue("--q-size-sm")&&er.forEach(f=>{this.sizes[f]=parseInt(d.getPropertyValue(`--q-size-${f}`),10)}),this.setSizes=f=>{er.forEach(m=>{f[m]&&(this.sizes[m]=f[m])}),this.__update(!0)},this.setDebounce=f=>{a!==void 0&&o.removeEventListener("resize",a,rs),a=f>0?da(this.__update,f):this.__update,o.addEventListener("resize",a,rs)},this.setDebounce(u),Object.keys(l).length>0?(this.setSizes(l),l=void 0):this.__update(),s===!0&&this.name==="xs"&&document.body.classList.add("screen--xs")};Tt.value===!0?t.push(c):c()}});const Le=eo({isActive:!1,mode:!1},{__media:void 0,set(e){Le.mode=e,e==="auto"?(Le.__media===void 0&&(Le.__media=window.matchMedia("(prefers-color-scheme: dark)"),Le.__updateMedia=()=>{Le.set("auto")},Le.__media.addListener(Le.__updateMedia)),e=Le.__media.matches):Le.__media!==void 0&&(Le.__media.removeListener(Le.__updateMedia),Le.__media=void 0),Le.isActive=e===!0,document.body.classList.remove(`body--${e===!0?"light":"dark"}`),document.body.classList.add(`body--${e===!0?"dark":"light"}`)},toggle(){Le.set(Le.isActive===!1)},install({$q:e,onSSRHydrated:t,ssrContext:n}){const{dark:o}=e.config;if(e.dark=this,this.__installed===!0&&o===void 0)return;this.isActive=o===!0;const r=o!==void 0?o:!1;if(Tt.value===!0){const i=a=>{this.__fromSSR=a},s=this.set;this.set=i,i(r),t.push(()=>{this.set=s,this.set(this.__fromSSR)})}else this.set(r)}}),ha=()=>!0;function Hf(e){return typeof e=="string"&&e!==""&&e!=="/"&&e!=="#/"}function Uf(e){return e.startsWith("#")===!0&&(e=e.substring(1)),e.startsWith("/")===!1&&(e="/"+e),e.endsWith("/")===!0&&(e=e.substring(0,e.length-1)),"#"+e}function Kf(e){if(e.backButtonExit===!1)return()=>!1;if(e.backButtonExit==="*")return ha;const t=["#/"];return Array.isArray(e.backButtonExit)===!0&&t.push(...e.backButtonExit.filter(Hf).map(Uf)),()=>t.includes(window.location.hash)}var qr={__history:[],add:Zn,remove:Zn,install({$q:e}){if(this.__installed===!0)return;const{cordova:t,capacitor:n}=Se.is;if(t!==!0&&n!==!0)return;const o=e.config[t===!0?"cordova":"capacitor"];if(o!==void 0&&o.backButton===!1||n===!0&&(window.Capacitor===void 0||window.Capacitor.Plugins.App===void 0))return;this.add=s=>{s.condition===void 0&&(s.condition=ha),this.__history.push(s)},this.remove=s=>{const a=this.__history.indexOf(s);a>=0&&this.__history.splice(a,1)};const r=Kf(Object.assign({backButtonExit:!0},o)),i=()=>{if(this.__history.length){const s=this.__history[this.__history.length-1];s.condition()===!0&&(this.__history.pop(),s.handler())}else r()===!0?navigator.app.exitApp():window.history.back()};t===!0?document.addEventListener("deviceready",()=>{document.addEventListener("backbutton",i,!1)}):window.Capacitor.Plugins.App.addListener("backButton",i)}},is={isoName:"en-US",nativeName:"English (US)",label:{clear:"Clear",ok:"OK",cancel:"Cancel",close:"Close",set:"Set",select:"Select",reset:"Reset",remove:"Remove",update:"Update",create:"Create",search:"Search",filter:"Filter",refresh:"Refresh"},date:{days:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),daysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),firstDayOfWeek:0,format24h:!1,pluralDay:"days"},table:{noData:"No data available",noResults:"No matching records found",loading:"Loading...",selectedRecords:e=>e===1?"1 record selected.":(e===0?"No":e)+" records selected.",recordsPerPage:"Records per page:",allRows:"All",pagination:(e,t,n)=>e+"-"+t+" of "+n,columns:"Columns"},editor:{url:"URL",bold:"Bold",italic:"Italic",strikethrough:"Strikethrough",underline:"Underline",unorderedList:"Unordered List",orderedList:"Ordered List",subscript:"Subscript",superscript:"Superscript",hyperlink:"Hyperlink",toggleFullscreen:"Toggle Fullscreen",quote:"Quote",left:"Left align",center:"Center align",right:"Right align",justify:"Justify align",print:"Print",outdent:"Decrease indentation",indent:"Increase indentation",removeFormat:"Remove formatting",formatting:"Formatting",fontSize:"Font Size",align:"Align",hr:"Insert Horizontal Rule",undo:"Undo",redo:"Redo",heading1:"Heading 1",heading2:"Heading 2",heading3:"Heading 3",heading4:"Heading 4",heading5:"Heading 5",heading6:"Heading 6",paragraph:"Paragraph",code:"Code",size1:"Very small",size2:"A bit small",size3:"Normal",size4:"Medium-large",size5:"Big",size6:"Very big",size7:"Maximum",defaultFont:"Default Font",viewSource:"View Source"},tree:{noNodes:"No nodes available",noResults:"No matching nodes found"}};function ss(){const e=Array.isArray(navigator.languages)===!0&&navigator.languages.length>0?navigator.languages[0]:navigator.language;if(typeof e=="string")return e.split(/[-_]/).map((t,n)=>n===0?t.toLowerCase():n>1||t.length<4?t.toUpperCase():t[0].toUpperCase()+t.slice(1).toLowerCase()).join("-")}const xt=eo({__langPack:{}},{getLocale:ss,set(e=is,t){const n=ce(Y({},e),{rtl:e.rtl===!0,getLocale:ss});{const o=document.documentElement;o.setAttribute("dir",n.rtl===!0?"rtl":"ltr"),o.setAttribute("lang",n.isoName),n.set=xt.set,Object.assign(xt.__langPack,n),xt.props=n,xt.isoName=n.isoName,xt.nativeName=n.nativeName}},install({$q:e,lang:t,ssrContext:n}){e.lang=xt.__langPack,this.__installed===!0?t!==void 0&&this.set(t):this.set(t||is)}});function Wf(e,t,n=document.body){if(typeof e!="string")throw new TypeError("Expected a string as propName");if(typeof t!="string")throw new TypeError("Expected a string as value");if(!(n instanceof Element))throw new TypeError("Expected a DOM element");n.style.setProperty(`--q-${e}`,t)}let ma=!1;function Qf(e){ma=e.isComposing===!0}function ga(e){return ma===!0||e!==Object(e)||e.isComposing===!0||e.qKeyEvent===!0}function Jn(e,t){return ga(e)===!0?!1:[].concat(t).includes(e.keyCode)}function Yf(e){if(e.ios===!0)return"ios";if(e.android===!0)return"android"}function Zf({is:e,has:t,within:n},o){const r=[e.desktop===!0?"desktop":"mobile",`${t.touch===!1?"no-":""}touch`];if(e.mobile===!0){const i=Yf(e);i!==void 0&&r.push("platform-"+i)}if(e.nativeMobile===!0){const i=e.nativeMobileWrapper;r.push(i),r.push("native-mobile"),e.ios===!0&&(o[i]===void 0||o[i].iosStatusBarPadding!==!1)&&r.push("q-ios-padding")}else e.electron===!0?r.push("electron"):e.bex===!0&&r.push("bex");return n.iframe===!0&&r.push("within-iframe"),r}function Jf(){const e=document.body.className;let t=e;Ho!==void 0&&(t=t.replace("desktop","platform-ios mobile")),Se.has.touch===!0&&(t=t.replace("no-touch","touch")),Se.within.iframe===!0&&(t+=" within-iframe"),e!==t&&(document.body.className=t)}function Xf(e){for(const t in e)Wf(t,e[t])}var Gf={install(e){if(this.__installed!==!0){if(Tt.value===!0)Jf();else{const{$q:t}=e;t.config.brand!==void 0&&Xf(t.config.brand);const n=Zf(Se,t.config);document.body.classList.add.apply(document.body.classList,n)}Se.is.ios===!0&&document.body.addEventListener("touchstart",Zn),window.addEventListener("keydown",Qf,!0)}}},ed={name:"material-icons",type:{positive:"check_circle",negative:"warning",info:"info",warning:"priority_high"},arrow:{up:"arrow_upward",right:"arrow_forward",down:"arrow_downward",left:"arrow_back",dropdown:"arrow_drop_down"},chevron:{left:"chevron_left",right:"chevron_right"},colorPicker:{spectrum:"gradient",tune:"tune",palette:"style"},pullToRefresh:{icon:"refresh"},carousel:{left:"chevron_left",right:"chevron_right",up:"keyboard_arrow_up",down:"keyboard_arrow_down",navigationIcon:"lens"},chip:{remove:"cancel",selected:"check"},datetime:{arrowLeft:"chevron_left",arrowRight:"chevron_right",now:"access_time",today:"today"},editor:{bold:"format_bold",italic:"format_italic",strikethrough:"strikethrough_s",underline:"format_underlined",unorderedList:"format_list_bulleted",orderedList:"format_list_numbered",subscript:"vertical_align_bottom",superscript:"vertical_align_top",hyperlink:"link",toggleFullscreen:"fullscreen",quote:"format_quote",left:"format_align_left",center:"format_align_center",right:"format_align_right",justify:"format_align_justify",print:"print",outdent:"format_indent_decrease",indent:"format_indent_increase",removeFormat:"format_clear",formatting:"text_format",fontSize:"format_size",align:"format_align_left",hr:"remove",undo:"undo",redo:"redo",heading:"format_size",code:"code",size:"format_size",font:"font_download",viewSource:"code"},expansionItem:{icon:"keyboard_arrow_down",denseIcon:"arrow_drop_down"},fab:{icon:"add",activeIcon:"close"},field:{clear:"cancel",error:"error"},pagination:{first:"first_page",prev:"keyboard_arrow_left",next:"keyboard_arrow_right",last:"last_page"},rating:{icon:"grade"},stepper:{done:"check",active:"edit",error:"warning"},tabs:{left:"chevron_left",right:"chevron_right",up:"keyboard_arrow_up",down:"keyboard_arrow_down"},table:{arrowUp:"arrow_upward",warning:"warning",firstPage:"first_page",prevPage:"chevron_left",nextPage:"chevron_right",lastPage:"last_page"},tree:{icon:"play_arrow"},uploader:{done:"done",clear:"clear",add:"add_box",upload:"cloud_upload",removeQueue:"clear_all",removeUploaded:"done_all"}};const Ro=eo({iconMapFn:null,__icons:{}},{set(e,t){const n=ce(Y({},e),{rtl:e.rtl===!0});n.set=Ro.set,Object.assign(Ro.__icons,n)},install({$q:e,iconSet:t,ssrContext:n}){e.config.iconMapFn!==void 0&&(this.iconMapFn=e.config.iconMapFn),e.iconSet=this.__icons,zo(e,"iconMapFn",()=>this.iconMapFn,o=>{this.iconMapFn=o}),this.__installed===!0?t!==void 0&&this.set(t):this.set(t||ed)}}),td="_q_",Cg="_q_l_",kg="_q_pc_",nd="_q_fo_",To={};let va=!1;function od(){va=!0}function We(e){return e!==null&&typeof e=="object"&&Array.isArray(e)!==!0}const ls=[Ar,Gf,Le,zf,qr,xt,Ro];function pa(e,t){const n=ci(e);n.config.globalProperties=t.config.globalProperties;const i=t._context,{reload:o}=i,r=Jt(i,["reload"]);return Object.assign(n._context,r),n}function as(e,t){t.forEach(n=>{n.install(e),n.__installed=!0})}function rd(e,t,n){e.config.globalProperties.$q=n.$q,e.provide(td,n.$q),as(n,ls),t.components!==void 0&&Object.values(t.components).forEach(o=>{We(o)===!0&&o.name!==void 0&&e.component(o.name,o)}),t.directives!==void 0&&Object.values(t.directives).forEach(o=>{We(o)===!0&&o.name!==void 0&&e.directive(o.name,o)}),t.plugins!==void 0&&as(n,Object.values(t.plugins).filter(o=>typeof o.install=="function"&&ls.includes(o)===!1)),Tt.value===!0&&(n.$q.onSSRHydrated=()=>{n.onSSRHydrated.forEach(o=>{o()}),n.$q.onSSRHydrated=()=>{}})}var id=function(e,t={}){const n={version:"2.6.6"};va===!1?(t.config!==void 0&&Object.assign(To,t.config),n.config=Y({},To),od()):n.config=t.config||{},rd(e,t,{parentApp:e,$q:n,lang:t.lang,iconSet:t.iconSet,onSSRHydrated:[]})},sd={version:"2.6.6",install:id,lang:xt,iconSet:Ro},ld=(e,t)=>{const n=e.__vccOpts||e;for(const[o,r]of t)n[o]=r;return n};const ad=Io({name:"App"});function ud(e,t,n,o,r,i){const s=Fc("router-view");return Jl(),Gl(s)}var cd=ld(ad,[["render",ud]]);function Eg(e){return e}var fd=!1;/*!
  * pinia v2.0.13
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */const dd=e=>e,hd=Symbol();var us;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(us||(us={}));function md(){const e=bu(!0),t=e.run(()=>me({}));let n=[],o=[];const r=Wt({install(i){dd(r),r._a=i,i.provide(hd,r),i.config.globalProperties.$pinia=r,o.forEach(s=>n.push(s)),o=[]},use(i){return!this._a&&!fd?o.push(i):n.push(i),this},_p:n,_a:null,_e:e,_s:new Map,state:t});return r}var tr=()=>md();/*!
  * vue-router v4.0.14
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */const ba=typeof Symbol=="function"&&typeof Symbol.toStringTag=="symbol",Cn=e=>ba?Symbol(e):"_vr_"+e,gd=Cn("rvlm"),cs=Cn("rvd"),fi=Cn("r"),ya=Cn("rl"),Mr=Cn("rvl"),an=typeof window!="undefined";function vd(e){return e.__esModule||ba&&e[Symbol.toStringTag]==="Module"}const pe=Object.assign;function nr(e,t){const n={};for(const o in t){const r=t[o];n[o]=Array.isArray(r)?r.map(e):e(r)}return n}const jn=()=>{},pd=/\/$/,bd=e=>e.replace(pd,"");function or(e,t,n="/"){let o,r={},i="",s="";const a=t.indexOf("?"),l=t.indexOf("#",a>-1?a:0);return a>-1&&(o=t.slice(0,a),i=t.slice(a+1,l>-1?l:t.length),r=e(i)),l>-1&&(o=o||t.slice(0,l),s=t.slice(l,t.length)),o=xd(o!=null?o:t,n),{fullPath:o+(i&&"?")+i+s,path:o,query:r,hash:s}}function yd(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function fs(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function _d(e,t,n){const o=t.matched.length-1,r=n.matched.length-1;return o>-1&&o===r&&gn(t.matched[o],n.matched[r])&&_a(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function gn(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function _a(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!wd(e[n],t[n]))return!1;return!0}function wd(e,t){return Array.isArray(e)?ds(e,t):Array.isArray(t)?ds(t,e):e===t}function ds(e,t){return Array.isArray(t)?e.length===t.length&&e.every((n,o)=>n===t[o]):e.length===1&&e[0]===t}function xd(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),o=e.split("/");let r=n.length-1,i,s;for(i=0;i<o.length;i++)if(s=o[i],!(r===1||s==="."))if(s==="..")r--;else break;return n.slice(0,r).join("/")+"/"+o.slice(i-(i===o.length?1:0)).join("/")}var Xn;(function(e){e.pop="pop",e.push="push"})(Xn||(Xn={}));var Dn;(function(e){e.back="back",e.forward="forward",e.unknown=""})(Dn||(Dn={}));function Cd(e){if(!e)if(an){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),bd(e)}const kd=/^[^#]+#/;function Ed(e,t){return e.replace(kd,"#")+t}function Sd(e,t){const n=document.documentElement.getBoundingClientRect(),o=e.getBoundingClientRect();return{behavior:t.behavior,left:o.left-n.left-(t.left||0),top:o.top-n.top-(t.top||0)}}const Uo=()=>({left:window.pageXOffset,top:window.pageYOffset});function Rd(e){let t;if("el"in e){const n=e.el,o=typeof n=="string"&&n.startsWith("#"),r=typeof n=="string"?o?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!r)return;t=Sd(r,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.pageXOffset,t.top!=null?t.top:window.pageYOffset)}function hs(e,t){return(history.state?history.state.position-t:-1)+e}const $r=new Map;function Td(e,t){$r.set(e,t)}function Pd(e){const t=$r.get(e);return $r.delete(e),t}let Ad=()=>location.protocol+"//"+location.host;function wa(e,t){const{pathname:n,search:o,hash:r}=t,i=e.indexOf("#");if(i>-1){let a=r.includes(e.slice(i))?e.slice(i).length:1,l=r.slice(a);return l[0]!=="/"&&(l="/"+l),fs(l,"")}return fs(n,e)+o+r}function qd(e,t,n,o){let r=[],i=[],s=null;const a=({state:f})=>{const m=wa(e,location),v=n.value,P=t.value;let _=0;if(f){if(n.value=m,t.value=f,s&&s===v){s=null;return}_=P?f.position-P.position:0}else o(m);r.forEach(k=>{k(n.value,v,{delta:_,type:Xn.pop,direction:_?_>0?Dn.forward:Dn.back:Dn.unknown})})};function l(){s=n.value}function u(f){r.push(f);const m=()=>{const v=r.indexOf(f);v>-1&&r.splice(v,1)};return i.push(m),m}function c(){const{history:f}=window;!f.state||f.replaceState(pe({},f.state,{scroll:Uo()}),"")}function d(){for(const f of i)f();i=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",c)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",c),{pauseListeners:l,listen:u,destroy:d}}function ms(e,t,n,o=!1,r=!1){return{back:e,current:t,forward:n,replaced:o,position:window.history.length,scroll:r?Uo():null}}function Md(e){const{history:t,location:n}=window,o={value:wa(e,n)},r={value:t.state};r.value||i(o.value,{back:null,current:o.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function i(l,u,c){const d=e.indexOf("#"),f=d>-1?(n.host&&document.querySelector("base")?e:e.slice(d))+l:Ad()+e+l;try{t[c?"replaceState":"pushState"](u,"",f),r.value=u}catch(m){console.error(m),n[c?"replace":"assign"](f)}}function s(l,u){const c=pe({},t.state,ms(r.value.back,l,r.value.forward,!0),u,{position:r.value.position});i(l,c,!0),o.value=l}function a(l,u){const c=pe({},r.value,t.state,{forward:l,scroll:Uo()});i(c.current,c,!0);const d=pe({},ms(o.value,l,null),{position:c.position+1},u);i(l,d,!1),o.value=l}return{location:o,state:r,push:a,replace:s}}function $d(e){e=Cd(e);const t=Md(e),n=qd(e,t.state,t.location,t.replace);function o(i,s=!0){s||n.pauseListeners(),history.go(i)}const r=pe({location:"",base:e,go:o,createHref:Ed.bind(null,e)},t,n);return Object.defineProperty(r,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(r,"state",{enumerable:!0,get:()=>t.state.value}),r}function Od(e){return typeof e=="string"||e&&typeof e=="object"}function xa(e){return typeof e=="string"||typeof e=="symbol"}const bt={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},Ca=Cn("nf");var gs;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(gs||(gs={}));function vn(e,t){return pe(new Error,{type:e,[Ca]:!0},t)}function yt(e,t){return e instanceof Error&&Ca in e&&(t==null||!!(e.type&t))}const vs="[^/]+?",Ld={sensitive:!1,strict:!1,start:!0,end:!0},Bd=/[.+*?^${}()[\]/\\]/g;function Fd(e,t){const n=pe({},Ld,t),o=[];let r=n.start?"^":"";const i=[];for(const u of e){const c=u.length?[]:[90];n.strict&&!u.length&&(r+="/");for(let d=0;d<u.length;d++){const f=u[d];let m=40+(n.sensitive?.25:0);if(f.type===0)d||(r+="/"),r+=f.value.replace(Bd,"\\$&"),m+=40;else if(f.type===1){const{value:v,repeatable:P,optional:_,regexp:k}=f;i.push({name:v,repeatable:P,optional:_});const S=k||vs;if(S!==vs){m+=10;try{new RegExp(`(${S})`)}catch(T){throw new Error(`Invalid custom RegExp for param "${v}" (${S}): `+T.message)}}let A=P?`((?:${S})(?:/(?:${S}))*)`:`(${S})`;d||(A=_&&u.length<2?`(?:/${A})`:"/"+A),_&&(A+="?"),r+=A,m+=20,_&&(m+=-8),P&&(m+=-20),S===".*"&&(m+=-50)}c.push(m)}o.push(c)}if(n.strict&&n.end){const u=o.length-1;o[u][o[u].length-1]+=.7000000000000001}n.strict||(r+="/?"),n.end?r+="$":n.strict&&(r+="(?:/|$)");const s=new RegExp(r,n.sensitive?"":"i");function a(u){const c=u.match(s),d={};if(!c)return null;for(let f=1;f<c.length;f++){const m=c[f]||"",v=i[f-1];d[v.name]=m&&v.repeatable?m.split("/"):m}return d}function l(u){let c="",d=!1;for(const f of e){(!d||!c.endsWith("/"))&&(c+="/"),d=!1;for(const m of f)if(m.type===0)c+=m.value;else if(m.type===1){const{value:v,repeatable:P,optional:_}=m,k=v in u?u[v]:"";if(Array.isArray(k)&&!P)throw new Error(`Provided param "${v}" is an array but it is not repeatable (* or + modifiers)`);const S=Array.isArray(k)?k.join("/"):k;if(!S)if(_)f.length<2&&(c.endsWith("/")?c=c.slice(0,-1):d=!0);else throw new Error(`Missing required param "${v}"`);c+=S}}return c}return{re:s,score:o,keys:i,parse:a,stringify:l}}function Id(e,t){let n=0;for(;n<e.length&&n<t.length;){const o=t[n]-e[n];if(o)return o;n++}return e.length<t.length?e.length===1&&e[0]===40+40?-1:1:e.length>t.length?t.length===1&&t[0]===40+40?1:-1:0}function Nd(e,t){let n=0;const o=e.score,r=t.score;for(;n<o.length&&n<r.length;){const i=Id(o[n],r[n]);if(i)return i;n++}return r.length-o.length}const Vd={type:0,value:""},jd=/[a-zA-Z0-9_]/;function Dd(e){if(!e)return[[]];if(e==="/")return[[Vd]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(m){throw new Error(`ERR (${n})/"${u}": ${m}`)}let n=0,o=n;const r=[];let i;function s(){i&&r.push(i),i=[]}let a=0,l,u="",c="";function d(){!u||(n===0?i.push({type:0,value:u}):n===1||n===2||n===3?(i.length>1&&(l==="*"||l==="+")&&t(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),i.push({type:1,value:u,regexp:c,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):t("Invalid state to consume buffer"),u="")}function f(){u+=l}for(;a<e.length;){if(l=e[a++],l==="\\"&&n!==2){o=n,n=4;continue}switch(n){case 0:l==="/"?(u&&d(),s()):l===":"?(d(),n=1):f();break;case 4:f(),n=o;break;case 1:l==="("?n=2:jd.test(l)?f():(d(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?c[c.length-1]=="\\"?c=c.slice(0,-1)+l:n=3:c+=l;break;case 3:d(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,c="";break;default:t("Unknown state");break}}return n===2&&t(`Unfinished custom RegExp for param "${u}"`),d(),s(),r}function zd(e,t,n){const o=Fd(Dd(e.path),n),r=pe(o,{record:e,parent:t,children:[],alias:[]});return t&&!r.record.aliasOf==!t.record.aliasOf&&t.children.push(r),r}function Hd(e,t){const n=[],o=new Map;t=bs({strict:!1,end:!0,sensitive:!1},t);function r(c){return o.get(c)}function i(c,d,f){const m=!f,v=Kd(c);v.aliasOf=f&&f.record;const P=bs(t,c),_=[v];if("alias"in c){const A=typeof c.alias=="string"?[c.alias]:c.alias;for(const T of A)_.push(pe({},v,{components:f?f.record.components:v.components,path:T,aliasOf:f?f.record:v}))}let k,S;for(const A of _){const{path:T}=A;if(d&&T[0]!=="/"){const U=d.record.path,x=U[U.length-1]==="/"?"":"/";A.path=d.record.path+(T&&x+T)}if(k=zd(A,d,P),f?f.alias.push(k):(S=S||k,S!==k&&S.alias.push(k),m&&c.name&&!ps(k)&&s(c.name)),"children"in v){const U=v.children;for(let x=0;x<U.length;x++)i(U[x],k,f&&f.children[x])}f=f||k,l(k)}return S?()=>{s(S)}:jn}function s(c){if(xa(c)){const d=o.get(c);d&&(o.delete(c),n.splice(n.indexOf(d),1),d.children.forEach(s),d.alias.forEach(s))}else{const d=n.indexOf(c);d>-1&&(n.splice(d,1),c.record.name&&o.delete(c.record.name),c.children.forEach(s),c.alias.forEach(s))}}function a(){return n}function l(c){let d=0;for(;d<n.length&&Nd(c,n[d])>=0&&(c.record.path!==n[d].record.path||!ka(c,n[d]));)d++;n.splice(d,0,c),c.record.name&&!ps(c)&&o.set(c.record.name,c)}function u(c,d){let f,m={},v,P;if("name"in c&&c.name){if(f=o.get(c.name),!f)throw vn(1,{location:c});P=f.record.name,m=pe(Ud(d.params,f.keys.filter(S=>!S.optional).map(S=>S.name)),c.params),v=f.stringify(m)}else if("path"in c)v=c.path,f=n.find(S=>S.re.test(v)),f&&(m=f.parse(v),P=f.record.name);else{if(f=d.name?o.get(d.name):n.find(S=>S.re.test(d.path)),!f)throw vn(1,{location:c,currentLocation:d});P=f.record.name,m=pe({},d.params,c.params),v=f.stringify(m)}const _=[];let k=f;for(;k;)_.unshift(k.record),k=k.parent;return{name:P,path:v,params:m,matched:_,meta:Qd(_)}}return e.forEach(c=>i(c)),{addRoute:i,resolve:u,removeRoute:s,getRoutes:a,getRecordMatcher:r}}function Ud(e,t){const n={};for(const o of t)o in e&&(n[o]=e[o]);return n}function Kd(e){return{path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:void 0,beforeEnter:e.beforeEnter,props:Wd(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||{}:{default:e.component}}}function Wd(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const o in e.components)t[o]=typeof n=="boolean"?n:n[o];return t}function ps(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function Qd(e){return e.reduce((t,n)=>pe(t,n.meta),{})}function bs(e,t){const n={};for(const o in e)n[o]=o in t?t[o]:e[o];return n}function ka(e,t){return t.children.some(n=>n===e||ka(e,n))}const Ea=/#/g,Yd=/&/g,Zd=/\//g,Jd=/=/g,Xd=/\?/g,Sa=/\+/g,Gd=/%5B/g,eh=/%5D/g,Ra=/%5E/g,th=/%60/g,Ta=/%7B/g,nh=/%7C/g,Pa=/%7D/g,oh=/%20/g;function di(e){return encodeURI(""+e).replace(nh,"|").replace(Gd,"[").replace(eh,"]")}function rh(e){return di(e).replace(Ta,"{").replace(Pa,"}").replace(Ra,"^")}function Or(e){return di(e).replace(Sa,"%2B").replace(oh,"+").replace(Ea,"%23").replace(Yd,"%26").replace(th,"`").replace(Ta,"{").replace(Pa,"}").replace(Ra,"^")}function ih(e){return Or(e).replace(Jd,"%3D")}function sh(e){return di(e).replace(Ea,"%23").replace(Xd,"%3F")}function lh(e){return e==null?"":sh(e).replace(Zd,"%2F")}function Po(e){try{return decodeURIComponent(""+e)}catch{}return""+e}function ah(e){const t={};if(e===""||e==="?")return t;const o=(e[0]==="?"?e.slice(1):e).split("&");for(let r=0;r<o.length;++r){const i=o[r].replace(Sa," "),s=i.indexOf("="),a=Po(s<0?i:i.slice(0,s)),l=s<0?null:Po(i.slice(s+1));if(a in t){let u=t[a];Array.isArray(u)||(u=t[a]=[u]),u.push(l)}else t[a]=l}return t}function ys(e){let t="";for(let n in e){const o=e[n];if(n=ih(n),o==null){o!==void 0&&(t+=(t.length?"&":"")+n);continue}(Array.isArray(o)?o.map(i=>i&&Or(i)):[o&&Or(o)]).forEach(i=>{i!==void 0&&(t+=(t.length?"&":"")+n,i!=null&&(t+="="+i))})}return t}function uh(e){const t={};for(const n in e){const o=e[n];o!==void 0&&(t[n]=Array.isArray(o)?o.map(r=>r==null?null:""+r):o==null?o:""+o)}return t}function Tn(){let e=[];function t(o){return e.push(o),()=>{const r=e.indexOf(o);r>-1&&e.splice(r,1)}}function n(){e=[]}return{add:t,list:()=>e,reset:n}}function Ct(e,t,n,o,r){const i=o&&(o.enterCallbacks[r]=o.enterCallbacks[r]||[]);return()=>new Promise((s,a)=>{const l=d=>{d===!1?a(vn(4,{from:n,to:t})):d instanceof Error?a(d):Od(d)?a(vn(2,{from:t,to:d})):(i&&o.enterCallbacks[r]===i&&typeof d=="function"&&i.push(d),s())},u=e.call(o&&o.instances[r],t,n,l);let c=Promise.resolve(u);e.length<3&&(c=c.then(l)),c.catch(d=>a(d))})}function rr(e,t,n,o){const r=[];for(const i of e)for(const s in i.components){let a=i.components[s];if(!(t!=="beforeRouteEnter"&&!i.instances[s]))if(ch(a)){const u=(a.__vccOpts||a)[t];u&&r.push(Ct(u,n,o,i,s))}else{let l=a();r.push(()=>l.then(u=>{if(!u)return Promise.reject(new Error(`Couldn't resolve component "${s}" at "${i.path}"`));const c=vd(u)?u.default:u;i.components[s]=c;const f=(c.__vccOpts||c)[t];return f&&Ct(f,n,o,i,s)()}))}}return r}function ch(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function _s(e){const t=dt(fi),n=dt(ya),o=w(()=>t.resolve(Bn(e.to))),r=w(()=>{const{matched:l}=o.value,{length:u}=l,c=l[u-1],d=n.matched;if(!c||!d.length)return-1;const f=d.findIndex(gn.bind(null,c));if(f>-1)return f;const m=ws(l[u-2]);return u>1&&ws(c)===m&&d[d.length-1].path!==m?d.findIndex(gn.bind(null,l[u-2])):f}),i=w(()=>r.value>-1&&mh(n.params,o.value.params)),s=w(()=>r.value>-1&&r.value===n.matched.length-1&&_a(n.params,o.value.params));function a(l={}){return hh(l)?t[Bn(e.replace)?"replace":"push"](Bn(e.to)).catch(jn):Promise.resolve()}return{route:o,href:w(()=>o.value.href),isActive:i,isExactActive:s,navigate:a}}const fh=Io({name:"RouterLink",props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:_s,setup(e,{slots:t}){const n=Kt(_s(e)),{options:o}=dt(fi),r=w(()=>({[xs(e.activeClass,o.linkActiveClass,"router-link-active")]:n.isActive,[xs(e.exactActiveClass,o.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const i=t.default&&t.default(n);return e.custom?i:b("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:r.value},i)}}}),dh=fh;function hh(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function mh(e,t){for(const n in t){const o=t[n],r=e[n];if(typeof o=="string"){if(o!==r)return!1}else if(!Array.isArray(r)||r.length!==o.length||o.some((i,s)=>i!==r[s]))return!1}return!0}function ws(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const xs=(e,t,n)=>e!=null?e:t!=null?t:n,gh=Io({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},setup(e,{attrs:t,slots:n}){const o=dt(Mr),r=w(()=>e.route||o.value),i=dt(cs,0),s=w(()=>r.value.matched[i]);vo(cs,i+1),vo(gd,s),vo(Mr,r);const a=me();return _e(()=>[a.value,s.value,e.name],([l,u,c],[d,f,m])=>{u&&(u.instances[c]=l,f&&f!==u&&l&&l===d&&(u.leaveGuards.size||(u.leaveGuards=f.leaveGuards),u.updateGuards.size||(u.updateGuards=f.updateGuards))),l&&u&&(!f||!gn(u,f)||!d)&&(u.enterCallbacks[c]||[]).forEach(v=>v(l))},{flush:"post"}),()=>{const l=r.value,u=s.value,c=u&&u.components[e.name],d=e.name;if(!c)return Cs(n.default,{Component:c,route:l});const f=u.props[e.name],m=f?f===!0?l.params:typeof f=="function"?f(l):f:null,P=b(c,pe({},m,t,{onVnodeUnmounted:_=>{_.component.isUnmounted&&(u.instances[d]=null)},ref:a}));return Cs(n.default,{Component:P,route:l})||P}}});function Cs(e,t){if(!e)return null;const n=e(t);return n.length===1?n[0]:n}const vh=gh;function ph(e){const t=Hd(e.routes,e),n=e.parseQuery||ah,o=e.stringifyQuery||ys,r=e.history,i=Tn(),s=Tn(),a=Tn(),l=Ku(bt);let u=bt;an&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const c=nr.bind(null,R=>""+R),d=nr.bind(null,lh),f=nr.bind(null,Po);function m(R,Z){let j,ee;return xa(R)?(j=t.getRecordMatcher(R),ee=Z):ee=R,t.addRoute(ee,j)}function v(R){const Z=t.getRecordMatcher(R);Z&&t.removeRoute(Z)}function P(){return t.getRoutes().map(R=>R.record)}function _(R){return!!t.getRecordMatcher(R)}function k(R,Z){if(Z=pe({},Z||l.value),typeof R=="string"){const ie=or(n,R,Z.path),h=t.resolve({path:ie.path},Z),g=r.createHref(ie.fullPath);return pe(ie,h,{params:f(h.params),hash:Po(ie.hash),redirectedFrom:void 0,href:g})}let j;if("path"in R)j=pe({},R,{path:or(n,R.path,Z.path).path});else{const ie=pe({},R.params);for(const h in ie)ie[h]==null&&delete ie[h];j=pe({},R,{params:d(R.params)}),Z.params=d(Z.params)}const ee=t.resolve(j,Z),X=R.hash||"";ee.params=c(f(ee.params));const ue=yd(o,pe({},R,{hash:rh(X),path:ee.path})),se=r.createHref(ue);return pe({fullPath:ue,hash:X,query:o===ys?uh(R.query):R.query||{}},ee,{redirectedFrom:void 0,href:se})}function S(R){return typeof R=="string"?or(n,R,l.value.path):pe({},R)}function A(R,Z){if(u!==R)return vn(8,{from:Z,to:R})}function T(R){return y(R)}function U(R){return T(pe(S(R),{replace:!0}))}function x(R){const Z=R.matched[R.matched.length-1];if(Z&&Z.redirect){const{redirect:j}=Z;let ee=typeof j=="function"?j(R):j;return typeof ee=="string"&&(ee=ee.includes("?")||ee.includes("#")?ee=S(ee):{path:ee},ee.params={}),pe({query:R.query,hash:R.hash,params:R.params},ee)}}function y(R,Z){const j=u=k(R),ee=l.value,X=R.state,ue=R.force,se=R.replace===!0,ie=x(j);if(ie)return y(pe(S(ie),{state:X,force:ue,replace:se}),Z||j);const h=j;h.redirectedFrom=Z;let g;return!ue&&_d(o,ee,j)&&(g=vn(16,{to:h,from:ee}),ae(ee,ee,!0,!1)),(g?Promise.resolve(g):O(h,ee)).catch(p=>yt(p)?yt(p,2)?p:F(p):E(p,h,ee)).then(p=>{if(p){if(yt(p,2))return y(pe(S(p.to),{state:X,force:ue,replace:se}),Z||h)}else p=B(h,ee,!0,se,X);return N(h,ee,p),p})}function $(R,Z){const j=A(R,Z);return j?Promise.reject(j):Promise.resolve()}function O(R,Z){let j;const[ee,X,ue]=bh(R,Z);j=rr(ee.reverse(),"beforeRouteLeave",R,Z);for(const ie of ee)ie.leaveGuards.forEach(h=>{j.push(Ct(h,R,Z))});const se=$.bind(null,R,Z);return j.push(se),Xt(j).then(()=>{j=[];for(const ie of i.list())j.push(Ct(ie,R,Z));return j.push(se),Xt(j)}).then(()=>{j=rr(X,"beforeRouteUpdate",R,Z);for(const ie of X)ie.updateGuards.forEach(h=>{j.push(Ct(h,R,Z))});return j.push(se),Xt(j)}).then(()=>{j=[];for(const ie of R.matched)if(ie.beforeEnter&&!Z.matched.includes(ie))if(Array.isArray(ie.beforeEnter))for(const h of ie.beforeEnter)j.push(Ct(h,R,Z));else j.push(Ct(ie.beforeEnter,R,Z));return j.push(se),Xt(j)}).then(()=>(R.matched.forEach(ie=>ie.enterCallbacks={}),j=rr(ue,"beforeRouteEnter",R,Z),j.push(se),Xt(j))).then(()=>{j=[];for(const ie of s.list())j.push(Ct(ie,R,Z));return j.push(se),Xt(j)}).catch(ie=>yt(ie,8)?ie:Promise.reject(ie))}function N(R,Z,j){for(const ee of a.list())ee(R,Z,j)}function B(R,Z,j,ee,X){const ue=A(R,Z);if(ue)return ue;const se=Z===bt,ie=an?history.state:{};j&&(ee||se?r.replace(R.fullPath,pe({scroll:se&&ie&&ie.scroll},X)):r.push(R.fullPath,X)),l.value=R,ae(R,Z,j,se),F()}let C;function H(){C=r.listen((R,Z,j)=>{const ee=k(R),X=x(ee);if(X){y(pe(X,{replace:!0}),ee).catch(jn);return}u=ee;const ue=l.value;an&&Td(hs(ue.fullPath,j.delta),Uo()),O(ee,ue).catch(se=>yt(se,12)?se:yt(se,2)?(y(se.to,ee).then(ie=>{yt(ie,20)&&!j.delta&&j.type===Xn.pop&&r.go(-1,!1)}).catch(jn),Promise.reject()):(j.delta&&r.go(-j.delta,!1),E(se,ee,ue))).then(se=>{se=se||B(ee,ue,!1),se&&(j.delta?r.go(-j.delta,!1):j.type===Xn.pop&&yt(se,20)&&r.go(-1,!1)),N(ee,ue,se)}).catch(jn)})}let W=Tn(),D=Tn(),G;function E(R,Z,j){F(R);const ee=D.list();return ee.length?ee.forEach(X=>X(R,Z,j)):console.error(R),Promise.reject(R)}function K(){return G&&l.value!==bt?Promise.resolve():new Promise((R,Z)=>{W.add([R,Z])})}function F(R){return G||(G=!R,H(),W.list().forEach(([Z,j])=>R?j(R):Z()),W.reset()),R}function ae(R,Z,j,ee){const{scrollBehavior:X}=e;if(!an||!X)return Promise.resolve();const ue=!j&&Pd(hs(R.fullPath,0))||(ee||!j)&&history.state&&history.state.scroll||null;return Fe().then(()=>X(R,Z,ue)).then(se=>se&&Rd(se)).catch(se=>E(se,R,Z))}const Ce=R=>r.go(R);let xe;const ge=new Set;return{currentRoute:l,addRoute:m,removeRoute:v,hasRoute:_,getRoutes:P,resolve:k,options:e,push:T,replace:U,go:Ce,back:()=>Ce(-1),forward:()=>Ce(1),beforeEach:i.add,beforeResolve:s.add,afterEach:a.add,onError:D.add,isReady:K,install(R){const Z=this;R.component("RouterLink",dh),R.component("RouterView",vh),R.config.globalProperties.$router=Z,Object.defineProperty(R.config.globalProperties,"$route",{enumerable:!0,get:()=>Bn(l)}),an&&!xe&&l.value===bt&&(xe=!0,T(r.location).catch(X=>{}));const j={};for(const X in bt)j[X]=w(()=>l.value[X]);R.provide(fi,Z),R.provide(ya,Kt(j)),R.provide(Mr,l);const ee=R.unmount;ge.add(R),R.unmount=function(){ge.delete(R),ge.size<1&&(u=bt,C&&C(),l.value=bt,xe=!1,G=!1),ee()}}}}function Xt(e){return e.reduce((t,n)=>t.then(()=>n()),Promise.resolve())}function bh(e,t){const n=[],o=[],r=[],i=Math.max(t.matched.length,e.matched.length);for(let s=0;s<i;s++){const a=t.matched[s];a&&(e.matched.find(u=>gn(u,a))?o.push(a):n.push(a));const l=e.matched[s];l&&(t.matched.find(u=>gn(u,l))||r.push(l))}return[n,o,r]}const yh=[{path:"/",component:()=>Ln(()=>import("./MainLayout.10b5e4ba.js"),[]),children:[{path:"",component:()=>Ln(()=>import("./IndexPage.70728cbc.js"),[])}]},{path:"/:catchAll(.*)*",component:()=>Ln(()=>import("./ErrorNotFound.c998582a.js"),[])}];var ir=function(){return ph({scrollBehavior:()=>({left:0,top:0}),routes:yh,history:$d("/")})};async function _h(e,t){const n=e(cd);n.use(sd,t);const o=typeof tr=="function"?await tr({}):tr;n.use(o);const r=Wt(typeof ir=="function"?await ir({store:o}):ir);return o.use(({store:i})=>{i.router=r}),{app:n,store:o,router:r}}const Lr={xs:18,sm:24,md:32,lg:38,xl:46},kn={size:String};function En(e,t=Lr){return w(()=>e.size!==void 0?{fontSize:e.size in t?`${t[e.size]}px`:e.size}:null)}const Oe=e=>Wt(Io(e)),wh=e=>Wt(e);function tt(e,t){return e!==void 0&&e()||t}function Sg(e,t){if(e!==void 0){const n=e();if(n!=null)return n.slice()}return t}function Ft(e,t){return e!==void 0?t.concat(e()):t}function Aa(e,t){return e===void 0?t:t!==void 0?t.concat(e()):e()}function Rg(e,t,n,o,r,i){t.key=o+r;const s=b(e,t,n);return r===!0?Ql(s,i()):s}const ks="0 0 24 24",Es=e=>e,sr=e=>`ionicons ${e}`,qa={"mdi-":e=>`mdi ${e}`,"icon-":Es,"bt-":e=>`bt ${e}`,"eva-":e=>`eva ${e}`,"ion-md":sr,"ion-ios":sr,"ion-logo":sr,"iconfont ":Es,"ti-":e=>`themify-icon ${e}`,"bi-":e=>`bootstrap-icons ${e}`},Ma={o_:"-outlined",r_:"-round",s_:"-sharp"},xh=new RegExp("^("+Object.keys(qa).join("|")+")"),Ch=new RegExp("^("+Object.keys(Ma).join("|")+")"),kh=/^[Mm]\s?[-+]?\.?\d/,Eh=/^img:/,Sh=/^svguse:/,Rh=/^ion-/,Th=/^(fa-(solid|regular|light|brands|duotone|thin)|[lf]a[srlbdk]?) /;var mt=Oe({name:"QIcon",props:ce(Y({},kn),{tag:{type:String,default:"i"},name:String,color:String,left:Boolean,right:Boolean}),setup(e,{slots:t}){const{proxy:{$q:n}}=Te(),o=En(e),r=w(()=>"q-icon"+(e.left===!0?" on-left":"")+(e.right===!0?" on-right":"")+(e.color!==void 0?` text-${e.color}`:"")),i=w(()=>{let s,a=e.name;if(a==="none"||!a)return{none:!0};if(n.iconMapFn!==null){const c=n.iconMapFn(a);if(c!==void 0)if(c.icon!==void 0){if(a=c.icon,a==="none"||!a)return{none:!0}}else return{cls:c.cls,content:c.content!==void 0?c.content:" "}}if(kh.test(a)===!0){const[c,d=ks]=a.split("|");return{svg:!0,viewBox:d,nodes:c.split("&&").map(f=>{const[m,v,P]=f.split("@@");return b("path",{style:v,d:m,transform:P})})}}if(Eh.test(a)===!0)return{img:!0,src:a.substring(4)};if(Sh.test(a)===!0){const[c,d=ks]=a.split("|");return{svguse:!0,src:c.substring(7),viewBox:d}}let l=" ";const u=a.match(xh);if(u!==null)s=qa[u[1]](a);else if(Th.test(a)===!0)s=a;else if(Rh.test(a)===!0)s=`ionicons ion-${n.platform.is.ios===!0?"ios":"md"}${a.substring(3)}`;else{s="notranslate material-icons";const c=a.match(Ch);c!==null&&(a=a.substring(2),s+=Ma[c[1]]),l=a}return{cls:s,content:l}});return()=>{const s={class:r.value,style:o.value,"aria-hidden":"true",role:"presentation"};return i.value.none===!0?b(e.tag,s,tt(t.default)):i.value.img===!0?b("span",s,Ft(t.default,[b("img",{src:i.value.src})])):i.value.svg===!0?b("span",s,Ft(t.default,[b("svg",{viewBox:i.value.viewBox},i.value.nodes)])):i.value.svguse===!0?b("span",s,Ft(t.default,[b("svg",{viewBox:i.value.viewBox},[b("use",{"xlink:href":i.value.src})])])):(i.value.cls!==void 0&&(s.class+=" "+i.value.cls),b(e.tag,s,Ft(t.default,[i.value.content])))}}}),Ph=Oe({name:"QAvatar",props:ce(Y({},kn),{fontSize:String,color:String,textColor:String,icon:String,square:Boolean,rounded:Boolean}),setup(e,{slots:t}){const n=En(e),o=w(()=>"q-avatar"+(e.color?` bg-${e.color}`:"")+(e.textColor?` text-${e.textColor} q-chip--colored`:"")+(e.square===!0?" q-avatar--square":e.rounded===!0?" rounded-borders":"")),r=w(()=>e.fontSize?{fontSize:e.fontSize}:null);return()=>{const i=e.icon!==void 0?[b(mt,{name:e.icon})]:void 0;return b("div",{class:o.value,style:n.value},[b("div",{class:"q-avatar__content row flex-center overflow-hidden",style:r.value},Aa(t.default,i))])}}});const Ah={size:{type:[Number,String],default:"1em"},color:String};function qh(e){return{cSize:w(()=>e.size in Lr?`${Lr[e.size]}px`:e.size),classes:w(()=>"q-spinner"+(e.color?` text-${e.color}`:""))}}var pn=Oe({name:"QSpinner",props:ce(Y({},Ah),{thickness:{type:Number,default:5}}),setup(e){const{cSize:t,classes:n}=qh(e);return()=>b("svg",{class:n.value+" q-spinner-mat",width:t.value,height:t.value,viewBox:"25 25 50 50"},[b("circle",{class:"path",cx:"50",cy:"50",r:"20",fill:"none",stroke:"currentColor","stroke-width":e.thickness,"stroke-miterlimit":"10"})])}});function Br(e,t){const n=e.style;for(const o in t)n[o]=t[o]}function Mh(e){if(e==null)return;if(typeof e=="string")try{return document.querySelector(e)||void 0}catch{return}const t=Ae(e)===!0?e.value:e;if(t)return t.$el||t}function $h(e,t){if(e==null||e.contains(t)===!0)return!0;for(let n=e.nextElementSibling;n!==null;n=n.nextElementSibling)if(n.contains(t))return!0;return!1}function Oh(e,t=250){let n=!1,o;return function(){return n===!1&&(n=!0,setTimeout(()=>{n=!1},t),o=e.apply(this,arguments)),o}}function Ss(e,t,n,o){n.modifiers.stop===!0&&So(e);const r=n.modifiers.color;let i=n.modifiers.center;i=i===!0||o===!0;const s=document.createElement("span"),a=document.createElement("span"),l=Nf(e),{left:u,top:c,width:d,height:f}=t.getBoundingClientRect(),m=Math.sqrt(d*d+f*f),v=m/2,P=`${(d-m)/2}px`,_=i?P:`${l.left-u-v}px`,k=`${(f-m)/2}px`,S=i?k:`${l.top-c-v}px`;a.className="q-ripple__inner",Br(a,{height:`${m}px`,width:`${m}px`,transform:`translate3d(${_},${S},0) scale3d(.2,.2,1)`,opacity:0}),s.className=`q-ripple${r?" text-"+r:""}`,s.setAttribute("dir","ltr"),s.appendChild(a),t.appendChild(s);const A=()=>{s.remove(),clearTimeout(T)};n.abort.push(A);let T=setTimeout(()=>{a.classList.add("q-ripple__inner--enter"),a.style.transform=`translate3d(${P},${k},0) scale3d(1,1,1)`,a.style.opacity=.2,T=setTimeout(()=>{a.classList.remove("q-ripple__inner--enter"),a.classList.add("q-ripple__inner--leave"),a.style.opacity=0,T=setTimeout(()=>{s.remove(),n.abort.splice(n.abort.indexOf(A),1)},275)},250)},50)}function Rs(e,{modifiers:t,value:n,arg:o,instance:r}){const i=Object.assign({},r.$q.config.ripple,t,n);e.modifiers={early:i.early===!0,stop:i.stop===!0,center:i.center===!0,color:i.color||o,keyCodes:[].concat(i.keyCodes||13)}}var Lh=wh({name:"ripple",beforeMount(e,t){const n={enabled:t.value!==!1,modifiers:{},abort:[],start(o){n.enabled===!0&&o.qSkipRipple!==!0&&(n.modifiers.early===!0?["mousedown","touchstart"].includes(o.type)===!0:o.type==="click")&&Ss(o,e,n,o.qKeyEvent===!0)},keystart:Oh(o=>{n.enabled===!0&&o.qSkipRipple!==!0&&Jn(o,n.modifiers.keyCodes)===!0&&o.type===`key${n.modifiers.early===!0?"down":"up"}`&&Ss(o,e,n,!0)},300)};Rs(n,t),e.__qripple=n,jf(n,"main",[[e,"mousedown","start","passive"],[e,"touchstart","start","passive"],[e,"click","start","passive"],[e,"keydown","keystart","passive"],[e,"keyup","keystart","passive"]])},updated(e,t){if(t.oldValue!==t.value){const n=e.__qripple;n.enabled=t.value!==!1,n.enabled===!0&&Object(t.value)===t.value&&Rs(n,t)}},beforeUnmount(e){const t=e.__qripple;t.abort.forEach(n=>{n()}),Df(t,"main"),delete e._qripple}});const $a={left:"start",center:"center",right:"end",between:"between",around:"around",evenly:"evenly",stretch:"stretch"},Bh=Object.keys($a),Oa={align:{type:String,validator:e=>Bh.includes(e)}};function La(e){return w(()=>{const t=e.align===void 0?e.vertical===!0?"stretch":"left":e.align;return`${e.vertical===!0?"items":"justify"}-${$a[t]}`})}function Ba(e){return e.appContext.config.globalProperties.$router!==void 0}function Ts(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}function Ps(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function Fh(e,t){for(const n in t){const o=t[n],r=e[n];if(typeof o=="string"){if(o!==r)return!1}else if(Array.isArray(r)===!1||r.length!==o.length||o.some((i,s)=>i!==r[s]))return!1}return!0}function As(e,t){return Array.isArray(t)===!0?e.length===t.length&&e.every((n,o)=>n===t[o]):e.length===1&&e[0]===t}function Ih(e,t){return Array.isArray(e)===!0?As(e,t):Array.isArray(t)===!0?As(t,e):e===t}function Nh(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(Ih(e[n],t[n])===!1)return!1;return!0}const Vh={to:[String,Object],replace:Boolean,exact:Boolean,activeClass:{type:String,default:"q-router-link--active"},exactActiveClass:{type:String,default:"q-router-link--exact-active"},href:String,target:String,disable:Boolean};function jh(e){const t=Te(),{props:n,proxy:o}=t,r=Ba(t),i=w(()=>n.disable!==!0&&n.href!==void 0),s=w(()=>r===!0&&n.disable!==!0&&i.value!==!0&&n.to!==void 0&&n.to!==null&&n.to!==""),a=w(()=>{if(s.value===!0)try{return o.$router.resolve(n.to)}catch{}return null}),l=w(()=>a.value!==null),u=w(()=>i.value===!0||l.value===!0),c=w(()=>n.type==="a"||u.value===!0?"a":n.tag||e||"div"),d=w(()=>i.value===!0?{href:n.href,target:n.target}:l.value===!0?{href:a.value.href,target:n.target}:{}),f=w(()=>{if(l.value===!1)return null;const{matched:k}=a.value,{length:S}=k,A=k[S-1];if(A===void 0)return-1;const T=o.$route.matched;if(T.length===0)return-1;const U=T.findIndex(Ps.bind(null,A));if(U>-1)return U;const x=Ts(k[S-2]);return S>1&&Ts(A)===x&&T[T.length-1].path!==x?T.findIndex(Ps.bind(null,k[S-2])):U}),m=w(()=>l.value===!0&&f.value>-1&&Fh(o.$route.params,a.value.params)),v=w(()=>m.value===!0&&f.value===o.$route.matched.length-1&&Nh(o.$route.params,a.value.params)),P=w(()=>l.value===!0?v.value===!0?` ${n.exactActiveClass} ${n.activeClass}`:n.exact===!0?"":m.value===!0?` ${n.activeClass}`:"":"");function _(k){return n.disable===!0||k.metaKey||k.altKey||k.ctrlKey||k.shiftKey||k.__qNavigate!==!0&&k.defaultPrevented===!0||k.button!==void 0&&k.button!==0||n.target==="_blank"?!1:(kt(k),o.$router[n.replace===!0?"replace":"push"](n.to).catch(S=>S))}return{hasRouterLink:l,hasHrefLink:i,hasLink:u,linkTag:c,linkRoute:a,linkIsActive:m,linkIsExactActive:v,linkClass:P,linkProps:d,navigateToRouterLink:_}}const qs={none:0,xs:4,sm:8,md:16,lg:24,xl:32},Dh={xs:8,sm:10,md:14,lg:20,xl:24},zh=["button","submit","reset"],Hh=/[^\s]\/[^\s]/,Uh=ce(Y(Y({},kn),Vh),{type:{type:String,default:"button"},label:[Number,String],icon:String,iconRight:String,round:Boolean,outline:Boolean,flat:Boolean,unelevated:Boolean,rounded:Boolean,push:Boolean,glossy:Boolean,size:String,fab:Boolean,fabMini:Boolean,padding:String,color:String,textColor:String,noCaps:Boolean,noWrap:Boolean,dense:Boolean,tabindex:[Number,String],ripple:{type:[Boolean,Object],default:!0},align:ce(Y({},Oa.align),{default:"center"}),stack:Boolean,stretch:Boolean,loading:{type:Boolean,default:null},disable:Boolean});function Kh(e){const t=En(e,Dh),n=La(e),{hasRouterLink:o,hasLink:r,linkTag:i,linkProps:s,navigateToRouterLink:a}=jh("button"),l=w(()=>{const _=e.fab===!1&&e.fabMini===!1?t.value:{};return e.padding!==void 0?Object.assign({},_,{padding:e.padding.split(/\s+/).map(k=>k in qs?qs[k]+"px":k).join(" "),minWidth:"0",minHeight:"0"}):_}),u=w(()=>e.rounded===!0||e.fab===!0||e.fabMini===!0),c=w(()=>e.disable!==!0&&e.loading!==!0),d=w(()=>c.value===!0?e.tabindex||0:-1),f=w(()=>e.flat===!0?"flat":e.outline===!0?"outline":e.push===!0?"push":e.unelevated===!0?"unelevated":"standard"),m=w(()=>{const _={tabindex:d.value};return r.value===!0?Object.assign(_,s.value):zh.includes(e.type)===!0&&(_.type=e.type),i.value==="a"?(e.disable===!0?_["aria-disabled"]="true":_.href===void 0&&(_.role="button"),o.value!==!0&&Hh.test(e.type)===!0&&(_.type=e.type)):e.disable===!0&&(_.disabled="",_["aria-disabled"]="true"),e.loading===!0&&e.percentage!==void 0&&Object.assign(_,{role:"progressbar","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":e.percentage}),_}),v=w(()=>{let _;return e.color!==void 0?e.flat===!0||e.outline===!0?_=`text-${e.textColor||e.color}`:_=`bg-${e.color} text-${e.textColor||"white"}`:e.textColor&&(_=`text-${e.textColor}`),`q-btn--${f.value} q-btn--${e.round===!0?"round":`rectangle${u.value===!0?" q-btn--rounded":""}`}`+(_!==void 0?" "+_:"")+(c.value===!0?" q-btn--actionable q-focusable q-hoverable":e.disable===!0?" disabled":"")+(e.fab===!0?" q-btn--fab":e.fabMini===!0?" q-btn--fab-mini":"")+(e.noCaps===!0?" q-btn--no-uppercase":"")+(e.dense===!0?" q-btn--dense":"")+(e.stretch===!0?" no-border-radius self-stretch":"")+(e.glossy===!0?" glossy":"")}),P=w(()=>n.value+(e.stack===!0?" column":" row")+(e.noWrap===!0?" no-wrap text-no-wrap":"")+(e.loading===!0?" q-btn__content--hidden":""));return{classes:v,style:l,innerClasses:P,attributes:m,hasRouterLink:o,hasLink:r,linkTag:i,navigateToRouterLink:a,isActionable:c}}const{passiveCapture:Ue}=Ne;let Gt=null,en=null,tn=null;var Fr=Oe({name:"QBtn",props:ce(Y({},Uh),{percentage:Number,darkPercentage:Boolean}),emits:["click","keydown","touchstart","mousedown","keyup"],setup(e,{slots:t,emit:n}){const{proxy:o}=Te(),{classes:r,style:i,innerClasses:s,attributes:a,hasRouterLink:l,hasLink:u,linkTag:c,navigateToRouterLink:d,isActionable:f}=Kh(e),m=me(null),v=me(null);let P=null,_,k;const S=w(()=>e.label!==void 0&&e.label!==null&&e.label!==""),A=w(()=>e.disable===!0||e.ripple===!1?!1:Y({keyCodes:u.value===!0?[13,32]:[13]},e.ripple===!0?{}:e.ripple)),T=w(()=>({center:e.round})),U=w(()=>{const D=Math.max(0,Math.min(100,e.percentage));return D>0?{transition:"transform 0.6s",transform:`translateX(${D-100}%)`}:{}}),x=w(()=>e.loading===!0?{onMousedown:W,onTouchstartPassive:W,onClick:W,onKeydown:W,onKeyup:W}:f.value===!0?{onClick:$,onKeydown:O,onMousedown:B,onTouchstart:N}:{onClick:Ke}),y=w(()=>Y(Y({ref:m,class:"q-btn q-btn-item non-selectable no-outline "+r.value,style:i.value},a.value),x.value));function $(D){if(m.value!==null){if(D!==void 0){if(D.defaultPrevented===!0)return;const G=document.activeElement;if(e.type==="submit"&&G!==document.body&&m.value.contains(G)===!1&&G.contains(m.value)===!1){m.value.focus();const E=()=>{document.removeEventListener("keydown",Ke,!0),document.removeEventListener("keyup",E,Ue),m.value!==null&&m.value.removeEventListener("blur",E,Ue)};document.addEventListener("keydown",Ke,!0),document.addEventListener("keyup",E,Ue),m.value.addEventListener("blur",E,Ue)}}if(l.value===!0){const G=()=>{D.__qNavigate=!0,d(D)};n("click",D,G),D.defaultPrevented!==!0&&G()}else n("click",D)}}function O(D){m.value!==null&&(n("keydown",D),Jn(D,[13,32])===!0&&en!==m.value&&(en!==null&&H(),D.defaultPrevented!==!0&&(m.value.focus(),en=m.value,m.value.classList.add("q-btn--active"),document.addEventListener("keyup",C,!0),m.value.addEventListener("blur",C,Ue)),Ke(D)))}function N(D){m.value!==null&&(n("touchstart",D),D.defaultPrevented!==!0&&(Gt!==m.value&&(Gt!==null&&H(),Gt=m.value,P=D.target,P.addEventListener("touchcancel",C,Ue),P.addEventListener("touchend",C,Ue)),_=!0,clearTimeout(k),k=setTimeout(()=>{_=!1},200)))}function B(D){m.value!==null&&(D.qSkipRipple=_===!0,n("mousedown",D),D.defaultPrevented!==!0&&tn!==m.value&&(tn!==null&&H(),tn=m.value,m.value.classList.add("q-btn--active"),document.addEventListener("mouseup",C,Ue)))}function C(D){if(m.value!==null&&!(D!==void 0&&D.type==="blur"&&document.activeElement===m.value)){if(D!==void 0&&D.type==="keyup"){if(en===m.value&&Jn(D,[13,32])===!0){const G=new MouseEvent("click",D);G.qKeyEvent=!0,D.defaultPrevented===!0&&kt(G),D.cancelBubble===!0&&So(G),m.value.dispatchEvent(G),Ke(D),D.qKeyEvent=!0}n("keyup",D)}H()}}function H(D){const G=v.value;D!==!0&&(Gt===m.value||tn===m.value)&&G!==null&&G!==document.activeElement&&(G.setAttribute("tabindex",-1),G.focus()),Gt===m.value&&(P!==null&&(P.removeEventListener("touchcancel",C,Ue),P.removeEventListener("touchend",C,Ue)),Gt=P=null),tn===m.value&&(document.removeEventListener("mouseup",C,Ue),tn=null),en===m.value&&(document.removeEventListener("keyup",C,!0),m.value!==null&&m.value.removeEventListener("blur",C,Ue),en=null),m.value!==null&&m.value.classList.remove("q-btn--active")}function W(D){Ke(D),D.qSkipRipple=!0}return rt(()=>{H(!0)}),Object.assign(o,{click:$}),()=>{let D=[];e.icon!==void 0&&D.push(b(mt,{name:e.icon,left:e.stack===!1&&S.value===!0,role:"img","aria-hidden":"true"})),S.value===!0&&D.push(b("span",{class:"block"},[e.label])),D=Ft(t.default,D),e.iconRight!==void 0&&e.round===!1&&D.push(b(mt,{name:e.iconRight,right:e.stack===!1&&S.value===!0,role:"img","aria-hidden":"true"}));const G=[b("span",{class:"q-focus-helper",ref:v})];return e.loading===!0&&e.percentage!==void 0&&G.push(b("span",{class:"q-btn__progress absolute-full overflow-hidden"},[b("span",{class:"q-btn__progress-indicator fit block"+(e.darkPercentage===!0?" q-btn__progress--dark":""),style:U.value})])),G.push(b("span",{class:"q-btn__content text-center col items-center q-anchor--skip "+s.value},D)),e.loading!==null&&G.push(b(Ut,{name:"q-transition--fade"},()=>e.loading===!0?[b("span",{key:"loading",class:"absolute-full flex flex-center"},t.loading!==void 0?t.loading():[b(pn)])]:null)),Ql(b(c.value,y.value,G),[[Lh,A.value,void 0,T.value]])}}});let Wh=document.body;function Ko(e){const t=document.createElement("div");if(e!==void 0&&(t.id=e),To.globalNodes!==void 0){const n=To.globalNodes.class;n!==void 0&&(t.className=n)}return Wh.appendChild(t),t}function hi(e){e.remove()}let Qh=0;const bo={},yo={},Xe={},Fa={},Yh=/^\s*$/,Ia=[],mi=["top-left","top-right","bottom-left","bottom-right","top","bottom","left","right","center"],Zh=["top-left","top-right","bottom-left","bottom-right"],un={positive:{icon:e=>e.iconSet.type.positive,color:"positive"},negative:{icon:e=>e.iconSet.type.negative,color:"negative"},warning:{icon:e=>e.iconSet.type.warning,color:"warning",textColor:"dark"},info:{icon:e=>e.iconSet.type.info,color:"info"},ongoing:{group:!1,timeout:0,spinner:!0,color:"grey-8"}};function Na(e,t,n){if(!e)return Pn("parameter required");let o;const r={textColor:"white"};if(e.ignoreDefaults!==!0&&Object.assign(r,bo),We(e)===!1&&(r.type&&Object.assign(r,un[r.type]),e={message:e}),Object.assign(r,un[e.type||r.type],e),typeof r.icon=="function"&&(r.icon=r.icon(t)),r.spinner?(r.spinner===!0&&(r.spinner=pn),r.spinner=Wt(r.spinner)):r.spinner=!1,r.meta={hasMedia:Boolean(r.spinner!==!1||r.icon||r.avatar),hasText:Ms(r.message)||Ms(r.caption)},r.position){if(mi.includes(r.position)===!1)return Pn("wrong position",e)}else r.position="bottom";if(r.timeout===void 0)r.timeout=5e3;else{const l=parseInt(r.timeout,10);if(isNaN(l)||l<0)return Pn("wrong timeout",e);r.timeout=l}r.timeout===0?r.progress=!1:r.progress===!0&&(r.meta.progressClass="q-notification__progress"+(r.progressClass?` ${r.progressClass}`:""),r.meta.progressStyle={animationDuration:`${r.timeout+1e3}ms`});const i=(Array.isArray(e.actions)===!0?e.actions:[]).concat(e.ignoreDefaults!==!0&&Array.isArray(bo.actions)===!0?bo.actions:[]).concat(un[e.type]!==void 0&&Array.isArray(un[e.type].actions)===!0?un[e.type].actions:[]),{closeBtn:s}=r;if(s&&i.push({label:typeof s=="string"?s:t.lang.label.close}),r.actions=i.map(d=>{var f=d,{handler:l,noDismiss:u}=f,c=Jt(f,["handler","noDismiss"]);return ce(Y({flat:!0},c),{onClick:typeof l=="function"?()=>{l(),u!==!0&&a()}:()=>{a()}})}),r.multiLine===void 0&&(r.multiLine=r.actions.length>1),Object.assign(r.meta,{class:`q-notification row items-stretch q-notification--${r.multiLine===!0?"multi-line":"standard"}`+(r.color!==void 0?` bg-${r.color}`:"")+(r.textColor!==void 0?` text-${r.textColor}`:"")+(r.classes!==void 0?` ${r.classes}`:""),wrapperClass:"q-notification__wrapper col relative-position border-radius-inherit "+(r.multiLine===!0?"column no-wrap justify-center":"row items-center"),contentClass:"q-notification__content row items-center"+(r.multiLine===!0?"":" col"),leftClass:r.meta.hasText===!0?"additional":"single",attrs:Y({role:"alert"},r.attrs)}),r.group===!1?(r.group=void 0,r.meta.group=void 0):((r.group===void 0||r.group===!0)&&(r.group=[r.message,r.caption,r.multiline].concat(r.actions.map(l=>`${l.label}*${l.icon}`)).join("|")),r.meta.group=r.group+"|"+r.position),r.actions.length===0?r.actions=void 0:r.meta.actionsClass="q-notification__actions row items-center "+(r.multiLine===!0?"justify-end":"col-auto")+(r.meta.hasMedia===!0?" q-notification__actions--with-media":""),n!==void 0){clearTimeout(n.notif.meta.timer),r.meta.uid=n.notif.meta.uid;const l=Xe[r.position].value.indexOf(n.notif);Xe[r.position].value[l]=r}else{const l=yo[r.meta.group];if(l===void 0){if(r.meta.uid=Qh++,r.meta.badge=1,["left","right","center"].indexOf(r.position)!==-1)Xe[r.position].value.splice(Math.floor(Xe[r.position].value.length/2),0,r);else{const u=r.position.indexOf("top")>-1?"unshift":"push";Xe[r.position].value[u](r)}r.group!==void 0&&(yo[r.meta.group]=r)}else{if(clearTimeout(l.meta.timer),r.badgePosition!==void 0){if(Zh.includes(r.badgePosition)===!1)return Pn("wrong badgePosition",e)}else r.badgePosition=`top-${r.position.indexOf("left")>-1?"right":"left"}`;r.meta.uid=l.meta.uid,r.meta.badge=l.meta.badge+1,r.meta.badgeClass=`q-notification__badge q-notification__badge--${r.badgePosition}`+(r.badgeColor!==void 0?` bg-${r.badgeColor}`:"")+(r.badgeTextColor!==void 0?` text-${r.badgeTextColor}`:"")+(r.badgeClass?` ${r.badgeClass}`:"");const u=Xe[r.position].value.indexOf(l);Xe[r.position].value[u]=yo[r.meta.group]=r}}const a=()=>{Jh(r),o=void 0};if(r.timeout>0&&(r.meta.timer=setTimeout(()=>{a()},r.timeout+1e3)),r.group!==void 0)return l=>{l!==void 0?Pn("trying to update a grouped one which is forbidden",e):a()};if(o={dismiss:a,config:e,notif:r},n!==void 0){Object.assign(n,o);return}return l=>{if(o!==void 0)if(l===void 0)o.dismiss();else{const u=Object.assign({},o.config,l,{group:!1,position:r.position});Na(u,t,o)}}}function Jh(e){clearTimeout(e.meta.timer);const t=Xe[e.position].value.indexOf(e);if(t!==-1){e.group!==void 0&&delete yo[e.meta.group];const n=Ia[""+e.meta.uid];if(n){const{width:o,height:r}=getComputedStyle(n);n.style.left=`${n.offsetLeft}px`,n.style.width=o,n.style.height=r}Xe[e.position].value.splice(t,1),typeof e.onDismiss=="function"&&e.onDismiss()}}function Ms(e){return e!=null&&Yh.test(e)!==!0}function Pn(e,t){return console.error(`Notify: ${e}`,t),!1}function Xh(){return Oe({name:"QNotifications",devtools:{hide:!0},setup(){return()=>b("div",{class:"q-notifications"},mi.map(e=>b(Sf,{key:e,class:Fa[e],tag:"div",name:`q-notification--${e}`},()=>Xe[e].value.map(t=>{const n=t.meta,o=[];if(n.hasMedia===!0&&(t.spinner!==!1?o.push(b(t.spinner,{class:"q-notification__spinner q-notification__spinner--"+n.leftClass,color:t.spinnerColor,size:t.spinnerSize})):t.icon?o.push(b(mt,{class:"q-notification__icon q-notification__icon--"+n.leftClass,name:t.icon,color:t.iconColor,size:t.iconSize,role:"img"})):t.avatar&&o.push(b(Ph,{class:"q-notification__avatar q-notification__avatar--"+n.leftClass},()=>b("img",{src:t.avatar,"aria-hidden":"true"})))),n.hasText===!0){let i;const s={class:"q-notification__message col"};if(t.html===!0)s.innerHTML=t.caption?`<div>${t.message}</div><div class="q-notification__caption">${t.caption}</div>`:t.message;else{const a=[t.message];i=t.caption?[b("div",a),b("div",{class:"q-notification__caption"},[t.caption])]:a}o.push(b("div",s,i))}const r=[b("div",{class:n.contentClass},o)];return t.progress===!0&&r.push(b("div",{key:`${n.uid}|p|${n.badge}`,class:n.progressClass,style:n.progressStyle})),t.actions!==void 0&&r.push(b("div",{class:n.actionsClass},t.actions.map(i=>b(Fr,i)))),n.badge>1&&r.push(b("div",{key:`${n.uid}|${n.badge}`,class:t.meta.badgeClass,style:t.badgeStyle},[n.badge])),b("div",Y({ref:i=>{Ia[""+n.uid]=i},key:n.uid,class:n.class},n.attrs),[b("div",{class:n.wrapperClass},r)])}))))}})}var Gh={setDefaults(e){We(e)===!0&&Object.assign(bo,e)},registerType(e,t){We(t)===!0&&(un[e]=t)},install({$q:e,parentApp:t}){if(e.notify=this.create=n=>Na(n,e),e.notify.setDefaults=this.setDefaults,e.notify.registerType=this.registerType,e.config.notify!==void 0&&this.setDefaults(e.config.notify),this.__installed!==!0){mi.forEach(o=>{Xe[o]=me([]);const r=["left","center","right"].includes(o)===!0?"center":o.indexOf("top")>-1?"top":"bottom",i=o.indexOf("left")>-1?"start":o.indexOf("right")>-1?"end":"center",s=["left","right"].includes(o)?`items-${o==="left"?"start":"end"} justify-center`:o==="center"?"flex-center":`items-${i}`;Fa[o]=`q-notifications__list q-notifications__list--${r} fixed column no-wrap ${s}`});const n=Ko("q-notify");pa(Xh(),t).mount(n)}}};const em=[null,document,document.body,document.scrollingElement,document.documentElement];function Tg(e,t){let n=Mh(t);if(n===void 0){if(e==null)return window;n=e.closest(".scroll,.scroll-y,.overflow-auto")}return em.includes(n)?window:n}function tm(e){return e===window?window.pageYOffset||window.scrollY||document.body.scrollTop||0:e.scrollTop}function nm(e){return e===window?window.pageXOffset||window.scrollX||document.body.scrollLeft||0:e.scrollLeft}let ao;function Pg(){if(ao!==void 0)return ao;const e=document.createElement("p"),t=document.createElement("div");Br(e,{width:"100%",height:"200px"}),Br(t,{position:"absolute",top:"0px",left:"0px",visibility:"hidden",width:"200px",height:"150px",overflow:"hidden"}),t.appendChild(e),document.body.appendChild(t);const n=e.offsetWidth;t.style.overflow="scroll";let o=e.offsetWidth;return n===o&&(o=t.clientWidth),t.remove(),ao=n-o,ao}function om(e,t=!0){return!e||e.nodeType!==Node.ELEMENT_NODE?!1:t?e.scrollHeight>e.clientHeight&&(e.classList.contains("scroll")||e.classList.contains("overflow-auto")||["auto","scroll"].includes(window.getComputedStyle(e)["overflow-y"])):e.scrollWidth>e.clientWidth&&(e.classList.contains("scroll")||e.classList.contains("overflow-auto")||["auto","scroll"].includes(window.getComputedStyle(e)["overflow-x"]))}let An=0,lr,ar,On,ur=!1,$s,Os,nn;function rm(e){im(e)&&Ke(e)}function im(e){if(e.target===document.body||e.target.classList.contains("q-layout__backdrop"))return!0;const t=Vf(e),n=e.shiftKey&&!e.deltaX,o=!n&&Math.abs(e.deltaX)<=Math.abs(e.deltaY),r=n||o?e.deltaY:e.deltaX;for(let i=0;i<t.length;i++){const s=t[i];if(om(s,o))return o?r<0&&s.scrollTop===0?!0:r>0&&s.scrollTop+s.clientHeight===s.scrollHeight:r<0&&s.scrollLeft===0?!0:r>0&&s.scrollLeft+s.clientWidth===s.scrollWidth}return!0}function Ls(e){e.target===document&&(document.scrollingElement.scrollTop=document.scrollingElement.scrollTop)}function uo(e){ur!==!0&&(ur=!0,requestAnimationFrame(()=>{ur=!1;const{height:t}=e.target,{clientHeight:n,scrollTop:o}=document.scrollingElement;(On===void 0||t!==window.innerHeight)&&(On=n-t,document.scrollingElement.scrollTop=o),o>On&&(document.scrollingElement.scrollTop-=Math.ceil((o-On)/8))}))}function Bs(e){const t=document.body,n=window.visualViewport!==void 0;if(e==="add"){const{overflowY:o,overflowX:r}=window.getComputedStyle(t);lr=nm(window),ar=tm(window),$s=t.style.left,Os=t.style.top,t.style.left=`-${lr}px`,t.style.top=`-${ar}px`,r!=="hidden"&&(r==="scroll"||t.scrollWidth>window.innerWidth)&&t.classList.add("q-body--force-scrollbar-x"),o!=="hidden"&&(o==="scroll"||t.scrollHeight>window.innerHeight)&&t.classList.add("q-body--force-scrollbar-y"),t.classList.add("q-body--prevent-scroll"),document.qScrollPrevented=!0,Se.is.ios===!0&&(n===!0?(window.scrollTo(0,0),window.visualViewport.addEventListener("resize",uo,Ne.passiveCapture),window.visualViewport.addEventListener("scroll",uo,Ne.passiveCapture),window.scrollTo(0,0)):window.addEventListener("scroll",Ls,Ne.passiveCapture))}Se.is.desktop===!0&&Se.is.mac===!0&&window[`${e}EventListener`]("wheel",rm,Ne.notPassive),e==="remove"&&(Se.is.ios===!0&&(n===!0?(window.visualViewport.removeEventListener("resize",uo,Ne.passiveCapture),window.visualViewport.removeEventListener("scroll",uo,Ne.passiveCapture)):window.removeEventListener("scroll",Ls,Ne.passiveCapture)),t.classList.remove("q-body--prevent-scroll"),t.classList.remove("q-body--force-scrollbar-x"),t.classList.remove("q-body--force-scrollbar-y"),document.qScrollPrevented=!1,t.style.left=$s,t.style.top=Os,window.scrollTo(lr,ar),On=void 0)}function Ir(e){let t="add";if(e===!0){if(An++,nn!==void 0){clearTimeout(nn),nn=void 0;return}if(An>1)return}else{if(An===0||(An--,An>0))return;if(t="remove",Se.is.ios===!0&&Se.is.nativeMobile===!0){clearTimeout(nn),nn=setTimeout(()=>{Bs(t),nn=void 0},100);return}}Bs(t)}let on,cr,Fs=0,rn,Me={};const Va={delay:0,message:!1,html:!1,spinnerSize:80,spinnerColor:"",messageColor:"",backgroundColor:"",boxClass:"",spinner:pn,customClass:""},Is=Y({},Va),cn=eo({isActive:!1},{show(e){if(Me=We(e)===!0&&e.ignoreDefaults===!0?Y(Y({},Va),e):Y(Y({},Is),e),cn.isActive=!0,on!==void 0){Me.uid=Fs,cr.$forceUpdate();return}Me.uid=++Fs,clearTimeout(rn),rn=setTimeout(()=>{rn=void 0;const t=Ko("q-loading");on=ci({name:"QLoading",setup(){xn(()=>{Ir(!0)});function n(){cn.isActive!==!0&&on!==void 0&&(Ir(!1),on.unmount(t),hi(t),on=void 0,cr=void 0)}function o(){if(cn.isActive!==!0)return null;const r=[b(Me.spinner,{class:"q-loading__spinner",color:Me.spinnerColor,size:Me.spinnerSize})];return Me.message&&r.push(b("div",{class:"q-loading__message"+(Me.messageColor?` text-${Me.messageColor}`:""),[Me.html===!0?"innerHTML":"textContent"]:Me.message})),b("div",{class:"q-loading fullscreen flex flex-center z-max "+Me.customClass.trim(),key:Me.uid},[b("div",{class:"q-loading__backdrop"+(Me.backgroundColor?` bg-${Me.backgroundColor}`:"")}),b("div",{class:"q-loading__box column items-center "+Me.boxClass},r)])}return()=>b(Ut,{name:"q-transition--fade",appear:!0,onAfterLeave:n},o)}}),cr=on.mount(t)},Me.delay)},hide(){cn.isActive===!0&&(rn!==void 0&&(clearTimeout(rn),rn=void 0),cn.isActive=!1)},setDefaults(e){We(e)===!0&&Object.assign(Is,e)},install({$q:e}){e.loading=this,e.config.loading!==void 0&&this.setDefaults(e.config.loading)}});function sm(e,t,n){let o;function r(){o!==void 0&&(qr.remove(o),o=void 0)}return rt(()=>{e.value===!0&&r()}),{removeFromHistory:r,addToHistory(){o={condition:()=>n.value===!0,handler:t},qr.add(o)}}}function lm(){let e;return rt(()=>{clearTimeout(e)}),{registerTimeout(t,n){clearTimeout(e),e=setTimeout(t,n)},removeTimeout(){clearTimeout(e)}}}function am(){let e;return rt(()=>{e=void 0}),{registerTick(t){e=t,Fe(()=>{e===t&&(e(),e=void 0)})},removeTick(){e=void 0}}}const um={modelValue:{type:Boolean,default:null},"onUpdate:modelValue":[Function,Array]},cm=["before-show","show","before-hide","hide"];function fm({showing:e,canShow:t,hideOnRouteChange:n,handleShow:o,handleHide:r,processOnMount:i}){const s=Te(),{props:a,emit:l,proxy:u}=s;let c;function d(S){e.value===!0?v(S):f(S)}function f(S){if(a.disable===!0||S!==void 0&&S.qAnchorHandled===!0||t!==void 0&&t(S)!==!0)return;const A=a["onUpdate:modelValue"]!==void 0;A===!0&&(l("update:modelValue",!0),c=S,Fe(()=>{c===S&&(c=void 0)})),(a.modelValue===null||A===!1)&&m(S)}function m(S){e.value!==!0&&(e.value=!0,l("before-show",S),o!==void 0?o(S):l("show",S))}function v(S){if(a.disable===!0)return;const A=a["onUpdate:modelValue"]!==void 0;A===!0&&(l("update:modelValue",!1),c=S,Fe(()=>{c===S&&(c=void 0)})),(a.modelValue===null||A===!1)&&P(S)}function P(S){e.value!==!1&&(e.value=!1,l("before-hide",S),r!==void 0?r(S):l("hide",S))}function _(S){a.disable===!0&&S===!0?a["onUpdate:modelValue"]!==void 0&&l("update:modelValue",!1):S===!0!==e.value&&(S===!0?m:P)(c)}_e(()=>a.modelValue,_),n!==void 0&&Ba(s)===!0&&_e(()=>u.$route.fullPath,()=>{n.value===!0&&e.value===!0&&v()}),i===!0&&xn(()=>{_(a.modelValue)});const k={show:f,hide:v,toggle:d};return Object.assign(u,k),k}const dm={transitionShow:{type:String,default:"fade"},transitionHide:{type:String,default:"fade"},transitionDuration:{type:[String,Number],default:300}};let It=[],Gn=[];function ja(e){Gn=Gn.filter(t=>t!==e)}function hm(e){ja(e),Gn.push(e)}function Ns(e){ja(e),Gn.length===0&&It.length>0&&(It[It.length-1](),It=[])}function gi(e){Gn.length===0?e():It.push(e)}function mm(e){It=It.filter(t=>t!==e)}const fr=[];function gm(e){for(e=e.parent;e!=null;){if(e.type.name==="QGlobalDialog")return!0;if(e.type.name==="QDialog"||e.type.name==="QMenu")return!1;e=e.parent}return!1}function vm(e,t,n,o){const r=me(!1),i=me(!1);let s=null;const a={},l=o===!0&&gm(e);function u(d){if(d===!0){Ns(a),i.value=!0;return}i.value=!1,r.value===!1&&(l===!1&&s===null&&(s=Ko()),r.value=!0,fr.push(e.proxy),hm(a))}function c(d){if(i.value=!1,d!==!0)return;Ns(a),r.value=!1;const f=fr.indexOf(e.proxy);f>-1&&fr.splice(f,1),s!==null&&(hi(s),s=null)}return ii(()=>{c(!0)}),Object.assign(e.proxy,{__qPortalInnerRef:t}),{showPortal:u,hidePortal:c,portalIsActive:r,portalIsAccessible:i,renderPortal:()=>l===!0?n():r.value===!0?[b(Bc,{to:s},n())]:void 0}}function pm(){let e;return{preventBodyScroll(t){t!==e&&(e!==void 0||t===!0)&&(e=t,Ir(t))}}}const Dt=[];let bn;function bm(e){bn=e.keyCode===27}function ym(){bn===!0&&(bn=!1)}function _m(e){bn===!0&&(bn=!1,Jn(e,27)===!0&&Dt[Dt.length-1](e))}function Da(e){window[e]("keydown",bm),window[e]("blur",ym),window[e]("keyup",_m),bn=!1}function wm(e){Se.is.desktop===!0&&(Dt.push(e),Dt.length===1&&Da("addEventListener"))}function Vs(e){const t=Dt.indexOf(e);t>-1&&(Dt.splice(t,1),Dt.length===0&&Da("removeEventListener"))}const zt=[];function za(e){zt[zt.length-1](e)}function xm(e){Se.is.desktop===!0&&(zt.push(e),zt.length===1&&document.body.addEventListener("focusin",za))}function js(e){const t=zt.indexOf(e);t>-1&&(zt.splice(t,1),zt.length===0&&document.body.removeEventListener("focusin",za))}let co=0;const Cm={standard:"fixed-full flex-center",top:"fixed-top justify-center",bottom:"fixed-bottom justify-center",right:"fixed-right items-center",left:"fixed-left items-center"},Ds={standard:["scale","scale"],top:["slide-down","slide-up"],bottom:["slide-up","slide-down"],right:["slide-left","slide-right"],left:["slide-right","slide-left"]};var km=Oe({name:"QDialog",inheritAttrs:!1,props:ce(Y(Y({},um),dm),{transitionShow:String,transitionHide:String,persistent:Boolean,autoClose:Boolean,noEscDismiss:Boolean,noBackdropDismiss:Boolean,noRouteDismiss:Boolean,noRefocus:Boolean,noFocus:Boolean,noShake:Boolean,seamless:Boolean,maximized:Boolean,fullWidth:Boolean,fullHeight:Boolean,square:Boolean,position:{type:String,default:"standard",validator:e=>e==="standard"||["top","bottom","left","right"].includes(e)}}),emits:[...cm,"shake","click","escape-key"],setup(e,{slots:t,emit:n,attrs:o}){const r=Te(),i=me(null),s=me(!1),a=me(!1),l=me(!1);let u,c=null,d,f;const m=w(()=>e.persistent!==!0&&e.noRouteDismiss!==!0&&e.seamless!==!0),{preventBodyScroll:v}=pm(),{registerTimeout:P,removeTimeout:_}=lm(),{registerTick:k,removeTick:S}=am(),{showPortal:A,hidePortal:T,portalIsAccessible:U,renderPortal:x}=vm(r,i,ee,!0),{hide:y}=fm({showing:s,hideOnRouteChange:m,handleShow:K,handleHide:F,processOnMount:!0}),{addToHistory:$,removeFromHistory:O}=sm(s,y,m),N=w(()=>`q-dialog__inner flex no-pointer-events q-dialog__inner--${e.maximized===!0?"maximized":"minimized"} q-dialog__inner--${e.position} ${Cm[e.position]}`+(l.value===!0?" q-dialog__inner--animating":"")+(e.fullWidth===!0?" q-dialog__inner--fullwidth":"")+(e.fullHeight===!0?" q-dialog__inner--fullheight":"")+(e.square===!0?" q-dialog__inner--square":"")),B=w(()=>"q-transition--"+(e.transitionShow===void 0?Ds[e.position][0]:e.transitionShow)),C=w(()=>"q-transition--"+(e.transitionHide===void 0?Ds[e.position][1]:e.transitionHide)),H=w(()=>a.value===!0?C.value:B.value),W=w(()=>`--q-transition-duration: ${e.transitionDuration}ms`),D=w(()=>s.value===!0&&e.seamless!==!0),G=w(()=>e.autoClose===!0?{onClick:R}:{}),E=w(()=>[`q-dialog fullscreen no-pointer-events q-dialog--${D.value===!0?"modal":"seamless"}`,o.class]);_e(s,X=>{Fe(()=>{a.value=X})}),_e(()=>e.maximized,X=>{s.value===!0&&Ze(X)}),_e(D,X=>{v(X),X===!0?(xm(j),wm(xe)):(js(j),Vs(xe))});function K(X){_(),S(),$(),c=e.noRefocus===!1&&document.activeElement!==null?document.activeElement:null,Ze(e.maximized),A(),l.value=!0,e.noFocus!==!0&&(document.activeElement!==null&&document.activeElement.blur(),k(ae)),P(()=>{if(r.proxy.$q.platform.is.ios===!0){if(e.seamless!==!0&&document.activeElement){const{top:ue,bottom:se}=document.activeElement.getBoundingClientRect(),{innerHeight:ie}=window,h=window.visualViewport!==void 0?window.visualViewport.height:ie;ue>0&&se>h/2&&(document.scrollingElement.scrollTop=Math.min(document.scrollingElement.scrollHeight-h,se>=ie?1/0:Math.ceil(document.scrollingElement.scrollTop+se-h/2))),document.activeElement.scrollIntoView()}f=!0,i.value.click(),f=!1}A(!0),l.value=!1,n("show",X)},e.transitionDuration)}function F(X){_(),S(),O(),ge(!0),l.value=!0,T(),c!==null&&(c.focus(),c=null),P(()=>{T(!0),l.value=!1,n("hide",X)},e.transitionDuration)}function ae(X){gi(()=>{let ue=i.value;ue===null||ue.contains(document.activeElement)===!0||(ue=ue.querySelector(X||"[autofocus], [data-autofocus]")||ue,ue.focus({preventScroll:!0}))})}function Ce(){ae(),n("shake");const X=i.value;X!==null&&(X.classList.remove("q-animate--scale"),X.classList.add("q-animate--scale"),clearTimeout(u),u=setTimeout(()=>{i.value!==null&&(X.classList.remove("q-animate--scale"),ae())},170))}function xe(){e.seamless!==!0&&(e.persistent===!0||e.noEscDismiss===!0?e.maximized!==!0&&e.noShake!==!0&&Ce():(n("escape-key"),y()))}function ge(X){clearTimeout(u),(X===!0||s.value===!0)&&(Ze(!1),e.seamless!==!0&&(v(!1),js(j),Vs(xe))),X!==!0&&(c=null)}function Ze(X){X===!0?d!==!0&&(co<1&&document.body.classList.add("q-body--dialog"),co++,d=!0):d===!0&&(co<2&&document.body.classList.remove("q-body--dialog"),co--,d=!1)}function R(X){f!==!0&&(y(X),n("click",X))}function Z(X){e.persistent!==!0&&e.noBackdropDismiss!==!0?y(X):e.noShake!==!0&&Ce()}function j(X){U.value===!0&&$h(i.value,X.target)!==!0&&ae('[tabindex]:not([tabindex="-1"])')}Object.assign(r.proxy,{focus:ae,shake:Ce,__updateRefocusTarget(X){c=X||null}}),rt(ge);function ee(){return b("div",ce(Y({},o),{class:E.value}),[b(Ut,{name:"q-transition--fade",appear:!0},()=>D.value===!0?b("div",{class:"q-dialog__backdrop fixed-full",style:W.value,"aria-hidden":"true",onMousedown:Z}):null),b(Ut,{name:H.value,appear:!0},()=>s.value===!0?b("div",Y({ref:i,class:N.value,style:W.value,tabindex:-1},G.value),tt(t.default)):null)])}return x}});const Qt={dark:{type:Boolean,default:null}};function Yt(e,t){return w(()=>e.dark===null?t.dark.isActive:e.dark)}var Em=Oe({name:"QCard",props:ce(Y({},Qt),{tag:{type:String,default:"div"},square:Boolean,flat:Boolean,bordered:Boolean}),setup(e,{slots:t}){const n=Te(),o=Yt(e,n.proxy.$q),r=w(()=>"q-card"+(o.value===!0?" q-card--dark q-dark":"")+(e.bordered===!0?" q-card--bordered":"")+(e.square===!0?" q-card--square no-border-radius":"")+(e.flat===!0?" q-card--flat no-shadow":""));return()=>b(e.tag,{class:r.value},tt(t.default))}}),qn=Oe({name:"QCardSection",props:{tag:{type:String,default:"div"},horizontal:Boolean},setup(e,{slots:t}){const n=w(()=>`q-card__section q-card__section--${e.horizontal===!0?"horiz row no-wrap":"vert"}`);return()=>b(e.tag,{class:n.value},tt(t.default))}}),Sm=Oe({name:"QCardActions",props:ce(Y({},Oa),{vertical:Boolean}),setup(e,{slots:t}){const n=La(e),o=w(()=>`q-card__actions ${n.value} q-card__actions--${e.vertical===!0?"vert column":"horiz row"}`);return()=>b("div",{class:o.value},tt(t.default))}});const Rm={true:"inset",item:"item-inset","item-thumbnail":"item-thumbnail-inset"},dr={xs:2,sm:4,md:8,lg:16,xl:24};var zs=Oe({name:"QSeparator",props:ce(Y({},Qt),{spaced:[Boolean,String],inset:[Boolean,String],vertical:Boolean,color:String,size:String}),setup(e){const t=Te(),n=Yt(e,t.proxy.$q),o=w(()=>e.vertical===!0?"vertical":"horizontal"),r=w(()=>` q-separator--${o.value}`),i=w(()=>e.inset!==!1?`${r.value}-${Rm[e.inset]}`:""),s=w(()=>`q-separator${r.value}${i.value}`+(e.color!==void 0?` bg-${e.color}`:"")+(n.value===!0?" q-separator--dark":"")),a=w(()=>{const l={};if(e.size!==void 0&&(l[e.vertical===!0?"width":"height"]=e.size),e.spaced!==!1){const u=e.spaced===!0?`${dr.md}px`:e.spaced in dr?`${dr[e.spaced]}px`:e.spaced,c=e.vertical===!0?["Left","Right"]:["Top","Bottom"];l[`margin${c[0]}`]=l[`margin${c[1]}`]=u}return l});return()=>b("hr",{class:s.value,style:a.value,"aria-orientation":o.value})}});function Tm({validate:e,resetValidation:t,requiresQForm:n}){const o=dt(nd,!1);if(o!==!1){const{props:r,proxy:i}=Te();Object.assign(i,{validate:e,resetValidation:t}),_e(()=>r.disable,s=>{s===!0?(typeof t=="function"&&t(),o.unbindComponent(i)):o.bindComponent(i)}),r.disable!==!0&&o.bindComponent(i),rt(()=>{r.disable!==!0&&o.unbindComponent(i)})}else n===!0&&console.error("Parent QForm not found on useFormChild()!")}const Hs=/^#[0-9a-fA-F]{3}([0-9a-fA-F]{3})?$/,Us=/^#[0-9a-fA-F]{4}([0-9a-fA-F]{4})?$/,Ks=/^#([0-9a-fA-F]{3}|[0-9a-fA-F]{4}|[0-9a-fA-F]{6}|[0-9a-fA-F]{8})$/,fo=/^rgb\(((0|[1-9][\d]?|1[\d]{0,2}|2[\d]?|2[0-4][\d]|25[0-5]),){2}(0|[1-9][\d]?|1[\d]{0,2}|2[\d]?|2[0-4][\d]|25[0-5])\)$/,ho=/^rgba\(((0|[1-9][\d]?|1[\d]{0,2}|2[\d]?|2[0-4][\d]|25[0-5]),){2}(0|[1-9][\d]?|1[\d]{0,2}|2[\d]?|2[0-4][\d]|25[0-5]),(0|0\.[0-9]+[1-9]|0\.[1-9]+|1)\)$/,Ws={date:e=>/^-?[\d]+\/[0-1]\d\/[0-3]\d$/.test(e),time:e=>/^([0-1]?\d|2[0-3]):[0-5]\d$/.test(e),fulltime:e=>/^([0-1]?\d|2[0-3]):[0-5]\d:[0-5]\d$/.test(e),timeOrFulltime:e=>/^([0-1]?\d|2[0-3]):[0-5]\d(:[0-5]\d)?$/.test(e),email:e=>/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e),hexColor:e=>Hs.test(e),hexaColor:e=>Us.test(e),hexOrHexaColor:e=>Ks.test(e),rgbColor:e=>fo.test(e),rgbaColor:e=>ho.test(e),rgbOrRgbaColor:e=>fo.test(e)||ho.test(e),hexOrRgbColor:e=>Hs.test(e)||fo.test(e),hexaOrRgbaColor:e=>Us.test(e)||ho.test(e),anyColor:e=>Ks.test(e)||fo.test(e)||ho.test(e)},Pm={};"Boolean Number String Function Array Date RegExp Object".split(" ").forEach(e=>{Pm["[object "+e+"]"]=e.toLowerCase()});const Am=ce(Y({},kn),{min:{type:Number,default:0},max:{type:Number,default:100},color:String,centerColor:String,trackColor:String,fontSize:String,thickness:{type:Number,default:.2,validator:e=>e>=0&&e<=1},angle:{type:Number,default:0},showValue:Boolean,reverse:Boolean,instantFeedback:Boolean});function qm(e,t,n){return n<=t?t:Math.min(n,Math.max(t,e))}const Nr=50,Ha=2*Nr,Ua=Ha*Math.PI,Mm=Math.round(Ua*1e3)/1e3;Oe({name:"QCircularProgress",props:ce(Y({},Am),{value:{type:Number,default:0},animationSpeed:{type:[String,Number],default:600},indeterminate:Boolean}),setup(e,{slots:t}){const{proxy:{$q:n}}=Te(),o=En(e),r=w(()=>{const f=(n.lang.rtl===!0?-1:1)*e.angle;return{transform:e.reverse!==(n.lang.rtl===!0)?`scale3d(-1, 1, 1) rotate3d(0, 0, 1, ${-90-f}deg)`:`rotate3d(0, 0, 1, ${f-90}deg)`}}),i=w(()=>e.instantFeedback!==!0&&e.indeterminate!==!0?{transition:`stroke-dashoffset ${e.animationSpeed}ms ease 0s, stroke ${e.animationSpeed}ms ease`}:""),s=w(()=>Ha/(1-e.thickness/2)),a=w(()=>`${s.value/2} ${s.value/2} ${s.value} ${s.value}`),l=w(()=>qm(e.value,e.min,e.max)),u=w(()=>Ua*(1-(l.value-e.min)/(e.max-e.min))),c=w(()=>e.thickness/2*s.value);function d({thickness:f,offset:m,color:v,cls:P}){return b("circle",{class:"q-circular-progress__"+P+(v!==void 0?` text-${v}`:""),style:i.value,fill:"transparent",stroke:"currentColor","stroke-width":f,"stroke-dasharray":Mm,"stroke-dashoffset":m,cx:s.value,cy:s.value,r:Nr})}return()=>{const f=[];e.centerColor!==void 0&&e.centerColor!=="transparent"&&f.push(b("circle",{class:`q-circular-progress__center text-${e.centerColor}`,fill:"currentColor",r:Nr-c.value/2,cx:s.value,cy:s.value})),e.trackColor!==void 0&&e.trackColor!=="transparent"&&f.push(d({cls:"track",thickness:c.value,offset:0,color:e.trackColor})),f.push(d({cls:"circle",thickness:c.value,offset:u.value,color:e.color}));const m=[b("svg",{class:"q-circular-progress__svg",style:r.value,viewBox:a.value,"aria-hidden":"true"},f)];return e.showValue===!0&&m.push(b("div",{class:"q-circular-progress__text absolute-full row flex-center content-center",style:{fontSize:e.fontSize}},t.default!==void 0?t.default():[b("div",l.value)])),b("div",{class:`q-circular-progress q-circular-progress--${e.indeterminate===!0?"in":""}determinate`,style:o.value,role:"progressbar","aria-valuemin":e.min,"aria-valuemax":e.max,"aria-valuenow":e.indeterminate===!0?void 0:l.value},Aa(t.internal,m))}}});const $m=["rejected"],Om=[...$m,"start","finish","added","removed"],Lm=()=>!0;function Bm(e){const t={};return e.forEach(n=>{t[n]=Lm}),t}Bm(Om);let hr,mo=0;const $e=new Array(256);for(let e=0;e<256;e++)$e[e]=(e+256).toString(16).substring(1);const Fm=(()=>{const e=typeof crypto!="undefined"?crypto:typeof window!="undefined"?window.crypto||window.msCrypto:void 0;if(e!==void 0){if(e.randomBytes!==void 0)return e.randomBytes;if(e.getRandomValues!==void 0)return t=>{const n=new Uint8Array(t);return e.getRandomValues(n),n}}return t=>{const n=[];for(let o=t;o>0;o--)n.push(Math.floor(Math.random()*256));return n}})(),Qs=4096;function Im(){(hr===void 0||mo+16>Qs)&&(mo=0,hr=Fm(Qs));const e=Array.prototype.slice.call(hr,mo,mo+=16);return e[6]=e[6]&15|64,e[8]=e[8]&63|128,$e[e[0]]+$e[e[1]]+$e[e[2]]+$e[e[3]]+"-"+$e[e[4]]+$e[e[5]]+"-"+$e[e[6]]+$e[e[7]]+"-"+$e[e[8]]+$e[e[9]]+"-"+$e[e[10]]+$e[e[11]]+$e[e[12]]+$e[e[13]]+$e[e[14]]+$e[e[15]]}const Nm=[!0,!1,"ondemand"],Vm={modelValue:{},error:{type:Boolean,default:null},errorMessage:String,noErrorIcon:Boolean,rules:Array,reactiveRules:Boolean,lazyRules:{type:[Boolean,String],validator:e=>Nm.includes(e)}};function jm(e,t){const{props:n,proxy:o}=Te(),r=me(!1),i=me(null),s=me(null);Tm({validate:v,resetValidation:m});let a=0,l;const u=w(()=>n.rules!==void 0&&n.rules!==null&&n.rules.length>0),c=w(()=>n.disable!==!0&&u.value===!0),d=w(()=>n.error===!0||r.value===!0),f=w(()=>typeof n.errorMessage=="string"&&n.errorMessage.length>0?n.errorMessage:i.value);_e(()=>n.modelValue,()=>{P()}),_e(()=>n.reactiveRules,k=>{k===!0?l===void 0&&(l=_e(()=>n.rules,()=>{P(!0)})):l!==void 0&&(l(),l=void 0)},{immediate:!0}),_e(e,k=>{k===!0?s.value===null&&(s.value=!1):s.value===!1&&(s.value=!0,c.value===!0&&n.lazyRules!=="ondemand"&&t.value===!1&&_())});function m(){a++,t.value=!1,s.value=null,r.value=!1,i.value=null,_.cancel()}function v(k=n.modelValue){if(c.value!==!0)return!0;const S=++a;t.value!==!0&&n.lazyRules!==!0&&(s.value=!0);const A=(U,x)=>{r.value!==U&&(r.value=U);const y=x||void 0;i.value!==y&&(i.value=y),t.value=!1},T=[];for(let U=0;U<n.rules.length;U++){const x=n.rules[U];let y;if(typeof x=="function"?y=x(k):typeof x=="string"&&Ws[x]!==void 0&&(y=Ws[x](k)),y===!1||typeof y=="string")return A(!0,y),!1;y!==!0&&y!==void 0&&T.push(y)}return T.length===0?(A(!1),!0):(t.value=!0,Promise.all(T).then(U=>{if(U===void 0||Array.isArray(U)===!1||U.length===0)return S===a&&A(!1),!0;const x=U.find(y=>y===!1||typeof y=="string");return S===a&&A(x!==void 0,x),x===void 0},U=>(S===a&&(console.error(U),A(!0)),!1)))}function P(k){c.value===!0&&n.lazyRules!=="ondemand"&&(s.value===!0||n.lazyRules!==!0&&k!==!0)&&_()}const _=da(v,0);return rt(()=>{l!==void 0&&l(),_.cancel()}),Object.assign(o,{resetValidation:m,validate:v}),zo(o,"hasError",()=>d.value),{isDirtyModel:s,hasRules:u,hasError:d,errorMessage:f,validate:v,resetValidation:m}}const Ys=/^on[A-Z]/;function Dm(e,t){const n={listeners:me({}),attributes:me({})};function o(){const r={},i={};for(const s in e)s!=="class"&&s!=="style"&&Ys.test(s)===!1&&(r[s]=e[s]);for(const s in t.props)Ys.test(s)===!0&&(i[s]=t.props[s]);n.attributes.value=r,n.listeners.value=i}return Nl(o),o(),n}function Vr(e){return e===void 0?`f_${Im()}`:e}function jr(e){return e!=null&&(""+e).length>0}const zm=ce(Y(Y({},Qt),Vm),{label:String,stackLabel:Boolean,hint:String,hideHint:Boolean,prefix:String,suffix:String,labelColor:String,color:String,bgColor:String,filled:Boolean,outlined:Boolean,borderless:Boolean,standout:[Boolean,String],square:Boolean,loading:Boolean,labelSlot:Boolean,bottomSlots:Boolean,hideBottomSpace:Boolean,rounded:Boolean,dense:Boolean,itemAligned:Boolean,counter:Boolean,clearable:Boolean,clearIcon:String,disable:Boolean,readonly:Boolean,autofocus:Boolean,for:String,maxlength:[Number,String]}),Hm=["update:modelValue","clear","focus","blur","popup-show","popup-hide"];function Um(){const{props:e,attrs:t,proxy:n,vnode:o}=Te();return{isDark:Yt(e,n.$q),editable:w(()=>e.disable!==!0&&e.readonly!==!0),innerLoading:me(!1),focused:me(!1),hasPopupOpen:!1,splitAttrs:Dm(t,o),targetUid:me(Vr(e.for)),rootRef:me(null),targetRef:me(null),controlRef:me(null)}}function Km(e){const{props:t,emit:n,slots:o,attrs:r,proxy:i}=Te(),{$q:s}=i;let a;e.hasValue===void 0&&(e.hasValue=w(()=>jr(t.modelValue))),e.emitValue===void 0&&(e.emitValue=E=>{n("update:modelValue",E)}),e.controlEvents===void 0&&(e.controlEvents={onFocusin:O,onFocusout:N}),Object.assign(e,{clearValue:B,onControlFocusin:O,onControlFocusout:N,focus:y}),e.computedCounter===void 0&&(e.computedCounter=w(()=>{if(t.counter!==!1){const E=typeof t.modelValue=="string"||typeof t.modelValue=="number"?(""+t.modelValue).length:Array.isArray(t.modelValue)===!0?t.modelValue.length:0,K=t.maxlength!==void 0?t.maxlength:t.maxValues;return E+(K!==void 0?" / "+K:"")}}));const{isDirtyModel:l,hasRules:u,hasError:c,errorMessage:d,resetValidation:f}=jm(e.focused,e.innerLoading),m=e.floatingLabel!==void 0?w(()=>t.stackLabel===!0||e.focused.value===!0||e.floatingLabel.value===!0):w(()=>t.stackLabel===!0||e.focused.value===!0||e.hasValue.value===!0),v=w(()=>t.bottomSlots===!0||t.hint!==void 0||u.value===!0||t.counter===!0||t.error!==null),P=w(()=>t.filled===!0?"filled":t.outlined===!0?"outlined":t.borderless===!0?"borderless":t.standout?"standout":"standard"),_=w(()=>`q-field row no-wrap items-start q-field--${P.value}`+(e.fieldClass!==void 0?` ${e.fieldClass.value}`:"")+(t.rounded===!0?" q-field--rounded":"")+(t.square===!0?" q-field--square":"")+(m.value===!0?" q-field--float":"")+(S.value===!0?" q-field--labeled":"")+(t.dense===!0?" q-field--dense":"")+(t.itemAligned===!0?" q-field--item-aligned q-item-type":"")+(e.isDark.value===!0?" q-field--dark":"")+(e.getControl===void 0?" q-field--auto-height":"")+(e.focused.value===!0?" q-field--focused":"")+(c.value===!0?" q-field--error":"")+(c.value===!0||e.focused.value===!0?" q-field--highlighted":"")+(t.hideBottomSpace!==!0&&v.value===!0?" q-field--with-bottom":"")+(t.disable===!0?" q-field--disabled":t.readonly===!0?" q-field--readonly":"")),k=w(()=>"q-field__control relative-position row no-wrap"+(t.bgColor!==void 0?` bg-${t.bgColor}`:"")+(c.value===!0?" text-negative":typeof t.standout=="string"&&t.standout.length>0&&e.focused.value===!0?` ${t.standout}`:t.color!==void 0?` text-${t.color}`:"")),S=w(()=>t.labelSlot===!0||t.label!==void 0),A=w(()=>"q-field__label no-pointer-events absolute ellipsis"+(t.labelColor!==void 0&&c.value!==!0?` text-${t.labelColor}`:"")),T=w(()=>({id:e.targetUid.value,editable:e.editable.value,focused:e.focused.value,floatingLabel:m.value,modelValue:t.modelValue,emitValue:e.emitValue})),U=w(()=>{const E={for:e.targetUid.value};return t.disable===!0?E["aria-disabled"]="true":t.readonly===!0&&(E["aria-readonly"]="true"),E});_e(()=>t.for,E=>{e.targetUid.value=Vr(E)});function x(){const E=document.activeElement;let K=e.targetRef!==void 0&&e.targetRef.value;K&&(E===null||E.id!==e.targetUid.value)&&(K.hasAttribute("tabindex")===!0||(K=K.querySelector("[tabindex]")),K&&K!==E&&K.focus({preventScroll:!0}))}function y(){gi(x)}function $(){mm(x);const E=document.activeElement;E!==null&&e.rootRef.value.contains(E)&&E.blur()}function O(E){clearTimeout(a),e.editable.value===!0&&e.focused.value===!1&&(e.focused.value=!0,n("focus",E))}function N(E,K){clearTimeout(a),a=setTimeout(()=>{document.hasFocus()===!0&&(e.hasPopupOpen===!0||e.controlRef===void 0||e.controlRef.value===null||e.controlRef.value.contains(document.activeElement)!==!1)||(e.focused.value===!0&&(e.focused.value=!1,n("blur",E)),K!==void 0&&K())})}function B(E){Ke(E),s.platform.is.mobile!==!0?(e.targetRef!==void 0&&e.targetRef.value||e.rootRef.value).focus():e.rootRef.value.contains(document.activeElement)===!0&&document.activeElement.blur(),t.type==="file"&&(e.inputRef.value.value=null),n("update:modelValue",null),n("clear",t.modelValue),Fe(()=>{f(),s.platform.is.mobile!==!0&&(l.value=!1)})}function C(){const E=[];return o.prepend!==void 0&&E.push(b("div",{class:"q-field__prepend q-field__marginal row no-wrap items-center",key:"prepend",onClick:kt},o.prepend())),E.push(b("div",{class:"q-field__control-container col relative-position row no-wrap q-anchor--skip"},H())),c.value===!0&&t.noErrorIcon===!1&&E.push(D("error",[b(mt,{name:s.iconSet.field.error,color:"negative"})])),t.loading===!0||e.innerLoading.value===!0?E.push(D("inner-loading-append",o.loading!==void 0?o.loading():[b(pn,{color:t.color})])):t.clearable===!0&&e.hasValue.value===!0&&e.editable.value===!0&&E.push(D("inner-clearable-append",[b(mt,{class:"q-field__focusable-action",tag:"button",name:t.clearIcon||s.iconSet.field.clear,tabindex:0,type:"button","aria-hidden":null,role:null,onClick:B})])),o.append!==void 0&&E.push(b("div",{class:"q-field__append q-field__marginal row no-wrap items-center",key:"append",onClick:kt},o.append())),e.getInnerAppend!==void 0&&E.push(D("inner-append",e.getInnerAppend())),e.getControlChild!==void 0&&E.push(e.getControlChild()),E}function H(){const E=[];return t.prefix!==void 0&&t.prefix!==null&&E.push(b("div",{class:"q-field__prefix no-pointer-events row items-center"},t.prefix)),e.getShadowControl!==void 0&&e.hasShadow.value===!0&&E.push(e.getShadowControl()),e.getControl!==void 0?E.push(e.getControl()):o.rawControl!==void 0?E.push(o.rawControl()):o.control!==void 0&&E.push(b("div",ce(Y({ref:e.targetRef,class:"q-field__native row"},e.splitAttrs.attributes.value),{"data-autofocus":t.autofocus===!0||void 0}),o.control(T.value))),S.value===!0&&E.push(b("div",{class:A.value},tt(o.label,t.label))),t.suffix!==void 0&&t.suffix!==null&&E.push(b("div",{class:"q-field__suffix no-pointer-events row items-center"},t.suffix)),E.concat(tt(o.default))}function W(){let E,K;c.value===!0?d.value!==null?(E=[b("div",{role:"alert"},d.value)],K=`q--slot-error-${d.value}`):(E=tt(o.error),K="q--slot-error"):(t.hideHint!==!0||e.focused.value===!0)&&(t.hint!==void 0?(E=[b("div",t.hint)],K=`q--slot-hint-${t.hint}`):(E=tt(o.hint),K="q--slot-hint"));const F=t.counter===!0||o.counter!==void 0;if(t.hideBottomSpace===!0&&F===!1&&E===void 0)return;const ae=b("div",{key:K,class:"q-field__messages col"},E);return b("div",{class:"q-field__bottom row items-start q-field__bottom--"+(t.hideBottomSpace!==!0?"animated":"stale")},[t.hideBottomSpace===!0?ae:b(Ut,{name:"q-transition--field-message"},()=>ae),F===!0?b("div",{class:"q-field__counter"},o.counter!==void 0?o.counter():e.computedCounter.value):null])}function D(E,K){return K===null?null:b("div",{key:E,class:"q-field__append q-field__marginal row no-wrap items-center q-anchor--skip"},K)}Object.assign(i,{focus:y,blur:$});let G=!1;return Fl(()=>{G=!0}),Bl(()=>{G===!0&&t.autofocus===!0&&i.focus()}),xn(()=>{Tt.value===!0&&t.for===void 0&&(e.targetUid.value=Vr()),t.autofocus===!0&&i.focus()}),rt(()=>{clearTimeout(a)}),function(){const K=e.getControl===void 0&&o.control===void 0?Y(ce(Y({},e.splitAttrs.attributes.value),{"data-autofocus":t.autofocus}),U.value):U.value;return b("label",Y({ref:e.rootRef,class:[_.value,r.class],style:r.style},K),[o.before!==void 0?b("div",{class:"q-field__before q-field__marginal row no-wrap items-center",onClick:kt},o.before()):null,b("div",{class:"q-field__inner relative-position col self-stretch"},[b("div",Y({ref:e.controlRef,class:k.value,tabindex:-1},e.controlEvents),C()),v.value===!0?W():null]),o.after!==void 0?b("div",{class:"q-field__after q-field__marginal row no-wrap items-center",onClick:kt},o.after()):null])}}const Zs={date:"####/##/##",datetime:"####/##/## ##:##",time:"##:##",fulltime:"##:##:##",phone:"(###) ### - ####",card:"#### #### #### ####"},Ao={"#":{pattern:"[\\d]",negate:"[^\\d]"},S:{pattern:"[a-zA-Z]",negate:"[^a-zA-Z]"},N:{pattern:"[0-9a-zA-Z]",negate:"[^0-9a-zA-Z]"},A:{pattern:"[a-zA-Z]",negate:"[^a-zA-Z]",transform:e=>e.toLocaleUpperCase()},a:{pattern:"[a-zA-Z]",negate:"[^a-zA-Z]",transform:e=>e.toLocaleLowerCase()},X:{pattern:"[0-9a-zA-Z]",negate:"[^0-9a-zA-Z]",transform:e=>e.toLocaleUpperCase()},x:{pattern:"[0-9a-zA-Z]",negate:"[^0-9a-zA-Z]",transform:e=>e.toLocaleLowerCase()}},Ka=Object.keys(Ao);Ka.forEach(e=>{Ao[e].regex=new RegExp(Ao[e].pattern)});const Wm=new RegExp("\\\\([^.*+?^${}()|([\\]])|([.*+?^${}()|[\\]])|(["+Ka.join("")+"])|(.)","g"),Js=/[.*+?^${}()|[\]\\]/g,Ee=String.fromCharCode(1),Qm={mask:String,reverseFillMask:Boolean,fillMask:[Boolean,String],unmaskedValue:Boolean};function Ym(e,t,n,o){let r,i,s,a;const l=me(null),u=me(d());function c(){return e.autogrow===!0||["textarea","text","search","url","tel","password"].includes(e.type)}_e(()=>e.type+e.autogrow,m),_e(()=>e.mask,x=>{if(x!==void 0)v(u.value,!0);else{const y=T(u.value);m(),e.modelValue!==y&&t("update:modelValue",y)}}),_e(()=>e.fillMask+e.reverseFillMask,()=>{l.value===!0&&v(u.value,!0)}),_e(()=>e.unmaskedValue,()=>{l.value===!0&&v(u.value)});function d(){if(m(),l.value===!0){const x=S(T(e.modelValue));return e.fillMask!==!1?U(x):x}return e.modelValue}function f(x){if(x<r.length)return r.slice(-x);let y="",$=r;const O=$.indexOf(Ee);if(O>-1){for(let N=x-$.length;N>0;N--)y+=Ee;$=$.slice(0,O)+y+$.slice(O)}return $}function m(){if(l.value=e.mask!==void 0&&e.mask.length>0&&c(),l.value===!1){a=void 0,r="",i="";return}const x=Zs[e.mask]===void 0?e.mask:Zs[e.mask],y=typeof e.fillMask=="string"&&e.fillMask.length>0?e.fillMask.slice(0,1):"_",$=y.replace(Js,"\\$&"),O=[],N=[],B=[];let C=e.reverseFillMask===!0,H="",W="";x.replace(Wm,(K,F,ae,Ce,xe)=>{if(Ce!==void 0){const ge=Ao[Ce];B.push(ge),W=ge.negate,C===!0&&(N.push("(?:"+W+"+)?("+ge.pattern+"+)?(?:"+W+"+)?("+ge.pattern+"+)?"),C=!1),N.push("(?:"+W+"+)?("+ge.pattern+")?")}else if(ae!==void 0)H="\\"+(ae==="\\"?"":ae),B.push(ae),O.push("([^"+H+"]+)?"+H+"?");else{const ge=F!==void 0?F:xe;H=ge==="\\"?"\\\\\\\\":ge.replace(Js,"\\\\$&"),B.push(ge),O.push("([^"+H+"]+)?"+H+"?")}});const D=new RegExp("^"+O.join("")+"("+(H===""?".":"[^"+H+"]")+"+)?$"),G=N.length-1,E=N.map((K,F)=>F===0&&e.reverseFillMask===!0?new RegExp("^"+$+"*"+K):F===G?new RegExp("^"+K+"("+(W===""?".":W)+"+)?"+(e.reverseFillMask===!0?"$":$+"*")):new RegExp("^"+K));s=B,a=K=>{const F=D.exec(K);F!==null&&(K=F.slice(1).join(""));const ae=[],Ce=E.length;for(let xe=0,ge=K;xe<Ce;xe++){const Ze=E[xe].exec(ge);if(Ze===null)break;ge=ge.slice(Ze.shift().length),ae.push(...Ze)}return ae.length>0?ae.join(""):K},r=B.map(K=>typeof K=="string"?K:Ee).join(""),i=r.split(Ee).join(y)}function v(x,y,$){const O=o.value,N=O.selectionEnd,B=O.value.length-N,C=T(x);y===!0&&m();const H=S(C),W=e.fillMask!==!1?U(H):H,D=u.value!==W;O.value!==W&&(O.value=W),D===!0&&(u.value=W),document.activeElement===O&&Fe(()=>{if(W===i){const E=e.reverseFillMask===!0?i.length:0;O.setSelectionRange(E,E,"forward");return}if($==="insertFromPaste"&&e.reverseFillMask!==!0){const E=N-1;_.right(O,E,E);return}if(["deleteContentBackward","deleteContentForward"].indexOf($)>-1){const E=e.reverseFillMask===!0?N===0?W.length>H.length?1:0:Math.max(0,W.length-(W===i?0:Math.min(H.length,B)+1))+1:N;O.setSelectionRange(E,E,"forward");return}if(e.reverseFillMask===!0)if(D===!0){const E=Math.max(0,W.length-(W===i?0:Math.min(H.length,B+1)));E===1&&N===1?O.setSelectionRange(E,E,"forward"):_.rightReverse(O,E,E)}else{const E=W.length-B;O.setSelectionRange(E,E,"backward")}else if(D===!0){const E=Math.max(0,r.indexOf(Ee),Math.min(H.length,N)-1);_.right(O,E,E)}else{const E=N-1;_.right(O,E,E)}});const G=e.unmaskedValue===!0?T(W):W;String(e.modelValue)!==G&&n(G,!0)}function P(x,y,$){const O=S(T(x.value));y=Math.max(0,r.indexOf(Ee),Math.min(O.length,y)),x.setSelectionRange(y,$,"forward")}const _={left(x,y,$,O){const N=r.slice(y-1).indexOf(Ee)===-1;let B=Math.max(0,y-1);for(;B>=0;B--)if(r[B]===Ee){y=B,N===!0&&y++;break}if(B<0&&r[y]!==void 0&&r[y]!==Ee)return _.right(x,0,0);y>=0&&x.setSelectionRange(y,O===!0?$:y,"backward")},right(x,y,$,O){const N=x.value.length;let B=Math.min(N,$+1);for(;B<=N;B++)if(r[B]===Ee){$=B;break}else r[B-1]===Ee&&($=B);if(B>N&&r[$-1]!==void 0&&r[$-1]!==Ee)return _.left(x,N,N);x.setSelectionRange(O?y:$,$,"forward")},leftReverse(x,y,$,O){const N=f(x.value.length);let B=Math.max(0,y-1);for(;B>=0;B--)if(N[B-1]===Ee){y=B;break}else if(N[B]===Ee&&(y=B,B===0))break;if(B<0&&N[y]!==void 0&&N[y]!==Ee)return _.rightReverse(x,0,0);y>=0&&x.setSelectionRange(y,O===!0?$:y,"backward")},rightReverse(x,y,$,O){const N=x.value.length,B=f(N),C=B.slice(0,$+1).indexOf(Ee)===-1;let H=Math.min(N,$+1);for(;H<=N;H++)if(B[H-1]===Ee){$=H,$>0&&C===!0&&$--;break}if(H>N&&B[$-1]!==void 0&&B[$-1]!==Ee)return _.leftReverse(x,N,N);x.setSelectionRange(O===!0?y:$,$,"forward")}};function k(x){if(ga(x)===!0)return;const y=o.value,$=y.selectionStart,O=y.selectionEnd;if(x.keyCode===37||x.keyCode===39){const N=_[(x.keyCode===39?"right":"left")+(e.reverseFillMask===!0?"Reverse":"")];x.preventDefault(),N(y,$,O,x.shiftKey)}else x.keyCode===8&&e.reverseFillMask!==!0&&$===O?_.left(y,$,O,!0):x.keyCode===46&&e.reverseFillMask===!0&&$===O&&_.rightReverse(y,$,O,!0)}function S(x){if(x==null||x==="")return"";if(e.reverseFillMask===!0)return A(x);const y=s;let $=0,O="";for(let N=0;N<y.length;N++){const B=x[$],C=y[N];if(typeof C=="string")O+=C,B===C&&$++;else if(B!==void 0&&C.regex.test(B))O+=C.transform!==void 0?C.transform(B):B,$++;else return O}return O}function A(x){const y=s,$=r.indexOf(Ee);let O=x.length-1,N="";for(let B=y.length-1;B>=0&&O>-1;B--){const C=y[B];let H=x[O];if(typeof C=="string")N=C+N,H===C&&O--;else if(H!==void 0&&C.regex.test(H))do N=(C.transform!==void 0?C.transform(H):H)+N,O--,H=x[O];while($===B&&H!==void 0&&C.regex.test(H));else return N}return N}function T(x){return typeof x!="string"||a===void 0?typeof x=="number"?a(""+x):x:a(x)}function U(x){return i.length-x.length<=0?x:e.reverseFillMask===!0&&x.length>0?i.slice(0,-x.length)+x:x+i.slice(x.length)}return{innerValue:u,hasMask:l,moveCursorForPaste:P,updateMaskValue:v,onMaskedKeydown:k}}const vi={name:String};function Wa(e={}){return(t,n,o)=>{t[n](b("input",Y({class:"hidden"+(o||"")},e.value)))}}function Zm(e){return w(()=>e.name||e.for)}function Jm(e,t){function n(){const o=e.modelValue;try{const r="DataTransfer"in window?new DataTransfer:"ClipboardEvent"in window?new ClipboardEvent("").clipboardData:void 0;return Object(o)===o&&("length"in o?Array.from(o):[o]).forEach(i=>{r.items.add(i)}),{files:r.files}}catch{return{files:void 0}}}return w(t===!0?()=>{if(e.type==="file")return n()}:n)}const Xm=/[\u3000-\u303f\u3040-\u309f\u30a0-\u30ff\uff00-\uff9f\u4e00-\u9faf\u3400-\u4dbf]/,Gm=/[\u4e00-\u9fff\u3400-\u4dbf\u{20000}-\u{2a6df}\u{2a700}-\u{2b73f}\u{2b740}-\u{2b81f}\u{2b820}-\u{2ceaf}\uf900-\ufaff\u3300-\u33ff\ufe30-\ufe4f\uf900-\ufaff\u{2f800}-\u{2fa1f}]/u,eg=/[\u3131-\u314e\u314f-\u3163\uac00-\ud7a3]/;function tg(e){return function(n){if(n.type==="compositionend"||n.type==="change"){if(n.target.composing!==!0)return;n.target.composing=!1,e(n)}else n.type==="compositionupdate"?typeof n.data=="string"&&Xm.test(n.data)===!1&&Gm.test(n.data)===!1&&eg.test(n.data)===!1&&(n.target.composing=!1):n.target.composing=!0}}var ng=Oe({name:"QInput",inheritAttrs:!1,props:ce(Y(Y(Y({},zm),Qm),vi),{modelValue:{required:!1},shadowText:String,type:{type:String,default:"text"},debounce:[String,Number],autogrow:Boolean,inputClass:[Array,String,Object],inputStyle:[Array,String,Object]}),emits:[...Hm,"paste","change"],setup(e,{emit:t,attrs:n}){const o={};let r=NaN,i,s,a,l;const u=me(null),c=Zm(e),{innerValue:d,hasMask:f,moveCursorForPaste:m,updateMaskValue:v,onMaskedKeydown:P}=Ym(e,t,C,u),_=Jm(e,!0),k=w(()=>jr(d.value)),S=tg(B),A=Um(),T=w(()=>e.type==="textarea"||e.autogrow===!0),U=w(()=>T.value===!0||["text","search","url","tel","password"].includes(e.type)),x=w(()=>{const F=ce(Y({},A.splitAttrs.listeners.value),{onInput:B,onPaste:N,onChange:W,onBlur:D,onFocus:So});return F.onCompositionstart=F.onCompositionupdate=F.onCompositionend=S,f.value===!0&&(F.onKeydown=P),e.autogrow===!0&&(F.onAnimationend=H),F}),y=w(()=>{const F=ce(Y({tabindex:0,"data-autofocus":e.autofocus===!0||void 0,rows:e.type==="textarea"?6:void 0,"aria-label":e.label,name:c.value},A.splitAttrs.attributes.value),{id:A.targetUid.value,maxlength:e.maxlength,disabled:e.disable===!0,readonly:e.readonly===!0});return T.value===!1&&(F.type=e.type),e.autogrow===!0&&(F.rows=1),F});_e(()=>e.type,()=>{u.value&&(u.value.value=e.modelValue)}),_e(()=>e.modelValue,F=>{if(f.value===!0){if(s===!0&&(s=!1,String(F)===r))return;v(F)}else d.value!==F&&(d.value=F,e.type==="number"&&o.hasOwnProperty("value")===!0&&(i===!0?i=!1:delete o.value));e.autogrow===!0&&Fe(H)}),_e(()=>e.autogrow,F=>{F===!0?Fe(H):u.value!==null&&n.rows>0&&(u.value.style.height="auto")}),_e(()=>e.dense,()=>{e.autogrow===!0&&Fe(H)});function $(){gi(()=>{const F=document.activeElement;u.value!==null&&u.value!==F&&(F===null||F.id!==A.targetUid.value)&&u.value.focus({preventScroll:!0})})}function O(){u.value!==null&&u.value.select()}function N(F){if(f.value===!0&&e.reverseFillMask!==!0){const ae=F.target;m(ae,ae.selectionStart,ae.selectionEnd)}t("paste",F)}function B(F){if(!F||!F.target||F.target.composing===!0)return;if(e.type==="file"){t("update:modelValue",F.target.files);return}const ae=F.target.value;if(f.value===!0)v(ae,!1,F.inputType);else if(C(ae),U.value===!0&&F.target===document.activeElement){const{selectionStart:Ce,selectionEnd:xe}=F.target;Ce!==void 0&&xe!==void 0&&Fe(()=>{F.target===document.activeElement&&ae.indexOf(F.target.value)===0&&F.target.setSelectionRange(Ce,xe)})}e.autogrow===!0&&H()}function C(F,ae){l=()=>{e.type!=="number"&&o.hasOwnProperty("value")===!0&&delete o.value,e.modelValue!==F&&r!==F&&(ae===!0&&(s=!0),t("update:modelValue",F),Fe(()=>{r===F&&(r=NaN)})),l=void 0},e.type==="number"&&(i=!0,o.value=F),e.debounce!==void 0?(clearTimeout(a),o.value=F,a=setTimeout(l,e.debounce)):l()}function H(){const F=u.value;if(F!==null){const ae=F.parentNode.style;ae.marginBottom=F.scrollHeight-1+"px",F.style.height="1px",F.style.height=F.scrollHeight+"px",ae.marginBottom=""}}function W(F){S(F),clearTimeout(a),l!==void 0&&l(),t("change",F.target.value)}function D(F){F!==void 0&&So(F),clearTimeout(a),l!==void 0&&l(),i=!1,s=!1,delete o.value,e.type!=="file"&&setTimeout(()=>{u.value!==null&&(u.value.value=d.value!==void 0?d.value:"")})}function G(){return o.hasOwnProperty("value")===!0?o.value:d.value!==void 0?d.value:""}rt(()=>{D()}),xn(()=>{e.autogrow===!0&&H()}),Object.assign(A,{innerValue:d,fieldClass:w(()=>`q-${T.value===!0?"textarea":"input"}`+(e.autogrow===!0?" q-textarea--autogrow":"")),hasShadow:w(()=>e.type!=="file"&&typeof e.shadowText=="string"&&e.shadowText.length>0),inputRef:u,emitValue:C,hasValue:k,floatingLabel:w(()=>k.value===!0||jr(e.displayValue)),getControl:()=>b(T.value===!0?"textarea":"input",Y(Y(Y({ref:u,class:["q-field__native q-placeholder",e.inputClass],style:e.inputStyle},y.value),x.value),e.type!=="file"?{value:G()}:_.value)),getShadowControl:()=>b("div",{class:"q-field__native q-field__shadow absolute-bottom no-pointer-events"+(T.value===!0?"":" text-no-wrap")},[b("span",{class:"invisible"},G()),b("span",e.shadowText)])});const E=Km(A),K=Te();return Object.assign(K.proxy,{focus:$,select:O,getNativeElement:()=>u.value}),E}});function Qa(e,t){const n=me(null),o=w(()=>e.disable!==!0?null:b("span",{ref:n,class:"no-outline",tabindex:-1}));function r(i){const s=t.value;i!==void 0&&i.type.indexOf("key")===0?s!==null&&document.activeElement!==s&&s.contains(document.activeElement)===!0&&s.focus():n.value!==null&&(i===void 0||s!==null&&s.contains(i.target)===!0)&&n.value.focus()}return{refocusTargetEl:o,refocusTarget:r}}var Ya={xs:30,sm:35,md:40,lg:50,xl:60};const og=b("svg",{key:"svg",class:"q-radio__bg absolute non-selectable",viewBox:"0 0 24 24","aria-hidden":"true"},[b("path",{d:"M12,22a10,10 0 0 1 -10,-10a10,10 0 0 1 10,-10a10,10 0 0 1 10,10a10,10 0 0 1 -10,10m0,-22a12,12 0 0 0 -12,12a12,12 0 0 0 12,12a12,12 0 0 0 12,-12a12,12 0 0 0 -12,-12"}),b("path",{class:"q-radio__check",d:"M12,6a6,6 0 0 0 -6,6a6,6 0 0 0 6,6a6,6 0 0 0 6,-6a6,6 0 0 0 -6,-6"})]);var rg=Oe({name:"QRadio",props:ce(Y(Y(Y({},Qt),kn),vi),{modelValue:{required:!0},val:{required:!0},label:String,leftLabel:Boolean,checkedIcon:String,uncheckedIcon:String,color:String,keepColor:Boolean,dense:Boolean,disable:Boolean,tabindex:[String,Number]}),emits:["update:modelValue"],setup(e,{slots:t,emit:n}){const{proxy:o}=Te(),r=Yt(e,o.$q),i=En(e,Ya),s=me(null),{refocusTargetEl:a,refocusTarget:l}=Qa(e,s),u=w(()=>e.modelValue===e.val),c=w(()=>"q-radio cursor-pointer no-outline row inline no-wrap items-center"+(e.disable===!0?" disabled":"")+(r.value===!0?" q-radio--dark":"")+(e.dense===!0?" q-radio--dense":"")+(e.leftLabel===!0?" reverse":"")),d=w(()=>{const A=e.color!==void 0&&(e.keepColor===!0||u.value===!0)?` text-${e.color}`:"";return`q-radio__inner relative-position q-radio__inner--${u.value===!0?"truthy":"falsy"}${A}`}),f=w(()=>(u.value===!0?e.checkedIcon:e.uncheckedIcon)||null),m=w(()=>e.disable===!0?-1:e.tabindex||0),v=w(()=>{const A={type:"radio"};return e.name!==void 0&&Object.assign(A,{"^checked":u.value===!0?"checked":void 0,name:e.name,value:e.val}),A}),P=Wa(v);function _(A){A!==void 0&&(Ke(A),l(A)),e.disable!==!0&&u.value!==!0&&n("update:modelValue",e.val,A)}function k(A){(A.keyCode===13||A.keyCode===32)&&Ke(A)}function S(A){(A.keyCode===13||A.keyCode===32)&&_(A)}return Object.assign(o,{set:_}),()=>{const A=f.value!==null?[b("div",{key:"icon",class:"q-radio__icon-container absolute-full flex flex-center no-wrap"},[b(mt,{class:"q-radio__icon",name:f.value})])]:[og];e.disable!==!0&&P(A,"unshift"," q-radio__native q-ma-none q-pa-none");const T=[b("div",{class:d.value,style:i.value},A)];a.value!==null&&T.push(a.value);const U=e.label!==void 0?Ft(t.default,[e.label]):tt(t.default);return U!==void 0&&T.push(b("div",{class:"q-radio__label q-anchor--skip"},U)),b("div",{ref:s,class:c.value,tabindex:m.value,role:"radio","aria-label":e.label,"aria-checked":u.value===!0?"true":"false","aria-disabled":e.disable===!0?"true":void 0,onClick:_,onKeydown:k,onKeyup:S},T)}}});const Za=ce(Y(Y(Y({},Qt),kn),vi),{modelValue:{required:!0,default:null},val:{},trueValue:{default:!0},falseValue:{default:!1},indeterminateValue:{default:null},checkedIcon:String,uncheckedIcon:String,indeterminateIcon:String,toggleOrder:{type:String,validator:e=>e==="tf"||e==="ft"},toggleIndeterminate:Boolean,label:String,leftLabel:Boolean,color:String,keepColor:Boolean,dense:Boolean,disable:Boolean,tabindex:[String,Number]}),Ja=["update:modelValue"];function Xa(e,t){const{props:n,slots:o,emit:r,proxy:i}=Te(),{$q:s}=i,a=Yt(n,s),l=me(null),{refocusTargetEl:u,refocusTarget:c}=Qa(n,l),d=En(n,Ya),f=w(()=>n.val!==void 0&&Array.isArray(n.modelValue)),m=w(()=>f.value===!0?n.modelValue.indexOf(n.val):-1),v=w(()=>f.value===!0?m.value>-1:n.modelValue===n.trueValue),P=w(()=>f.value===!0?m.value===-1:n.modelValue===n.falseValue),_=w(()=>v.value===!1&&P.value===!1),k=w(()=>n.disable===!0?-1:n.tabindex||0),S=w(()=>`q-${e} cursor-pointer no-outline row inline no-wrap items-center`+(n.disable===!0?" disabled":"")+(a.value===!0?` q-${e}--dark`:"")+(n.dense===!0?` q-${e}--dense`:"")+(n.leftLabel===!0?" reverse":"")),A=w(()=>{const C=v.value===!0?"truthy":P.value===!0?"falsy":"indet",H=n.color!==void 0&&(n.keepColor===!0||(e==="toggle"?v.value===!0:P.value!==!0))?` text-${n.color}`:"";return`q-${e}__inner relative-position non-selectable q-${e}__inner--${C}${H}`}),T=w(()=>{const C={type:"checkbox"};return n.name!==void 0&&Object.assign(C,{"^checked":v.value===!0?"checked":void 0,name:n.name,value:f.value===!0?n.val:n.trueValue}),C}),U=Wa(T),x=w(()=>{const C={tabindex:k.value,role:"checkbox","aria-label":n.label,"aria-checked":_.value===!0?"mixed":v.value===!0?"true":"false"};return n.disable===!0&&(C["aria-disabled"]="true"),C});function y(C){C!==void 0&&(Ke(C),c(C)),n.disable!==!0&&r("update:modelValue",$(),C)}function $(){if(f.value===!0){if(v.value===!0){const C=n.modelValue.slice();return C.splice(m.value,1),C}return n.modelValue.concat([n.val])}if(v.value===!0){if(n.toggleOrder!=="ft"||n.toggleIndeterminate===!1)return n.falseValue}else if(P.value===!0){if(n.toggleOrder==="ft"||n.toggleIndeterminate===!1)return n.trueValue}else return n.toggleOrder!=="ft"?n.trueValue:n.falseValue;return n.indeterminateValue}function O(C){(C.keyCode===13||C.keyCode===32)&&Ke(C)}function N(C){(C.keyCode===13||C.keyCode===32)&&y(C)}const B=t(v,_);return Object.assign(i,{toggle:y}),()=>{const C=B();n.disable!==!0&&U(C,"unshift",` q-${e}__native absolute q-ma-none q-pa-none`);const H=[b("div",{class:A.value,style:d.value},C)];u.value!==null&&H.push(u.value);const W=n.label!==void 0?Ft(o.default,[n.label]):tt(o.default);return W!==void 0&&H.push(b("div",{class:`q-${e}__label q-anchor--skip`},W)),b("div",ce(Y({ref:l,class:S.value},x.value),{onClick:y,onKeydown:O,onKeyup:N}),H)}}const ig=b("div",{key:"svg",class:"q-checkbox__bg absolute"},[b("svg",{class:"q-checkbox__svg fit absolute-full",viewBox:"0 0 24 24","aria-hidden":"true"},[b("path",{class:"q-checkbox__truthy",fill:"none",d:"M1.73,12.91 8.1,19.28 22.79,4.59"}),b("path",{class:"q-checkbox__indet",d:"M4,14H20V10H4"})])]);var sg=Oe({name:"QCheckbox",props:Za,emits:Ja,setup(e){function t(n,o){const r=w(()=>(n.value===!0?e.checkedIcon:o.value===!0?e.indeterminateIcon:e.uncheckedIcon)||null);return()=>r.value!==null?[b("div",{key:"icon",class:"q-checkbox__icon-container absolute-full flex flex-center no-wrap"},[b(mt,{class:"q-checkbox__icon",name:r.value})])]:[ig]}return Xa("checkbox",t)}}),lg=Oe({name:"QToggle",props:ce(Y({},Za),{icon:String,iconColor:String}),emits:Ja,setup(e){function t(n,o){const r=w(()=>(n.value===!0?e.checkedIcon:o.value===!0?e.indeterminateIcon:e.uncheckedIcon)||e.icon),i=w(()=>n.value===!0?e.iconColor:null);return()=>[b("div",{class:"q-toggle__track"}),b("div",{class:"q-toggle__thumb absolute flex flex-center no-wrap"},r.value!==void 0?[b(mt,{name:r.value,color:i.value})]:void 0)]}return Xa("toggle",t)}});const Ga={radio:rg,checkbox:sg,toggle:lg},ag=Object.keys(Ga);var ug=Oe({name:"QOptionGroup",props:ce(Y({},Qt),{modelValue:{required:!0},options:{type:Array,validator:e=>e.every(t=>"value"in t&&"label"in t)},name:String,type:{default:"radio",validator:e=>ag.includes(e)},color:String,keepColor:Boolean,dense:Boolean,size:String,leftLabel:Boolean,inline:Boolean,disable:Boolean}),emits:["update:modelValue"],setup(e,{emit:t,slots:n}){const{proxy:{$q:o}}=Te(),r=Array.isArray(e.modelValue);e.type==="radio"?r===!0&&console.error("q-option-group: model should not be array"):r===!1&&console.error("q-option-group: model should be array in your case");const i=Yt(e,o),s=w(()=>Ga[e.type]),a=w(()=>"q-option-group q-gutter-x-sm"+(e.inline===!0?" q-option-group--inline":"")),l=w(()=>{const c={};return e.type==="radio"&&(c.role="radiogroup",e.disable===!0&&(c["aria-disabled"]="true")),c});function u(c){t("update:modelValue",c)}return()=>b("div",Y({class:a.value},l.value),e.options.map((c,d)=>{const f=n["label-"+d]!==void 0?()=>n["label-"+d](c):n.label!==void 0?()=>n.label(c):void 0;return b("div",[b(s.value,{modelValue:e.modelValue,val:c.value,name:c.name===void 0?e.name:c.name,disable:e.disable||c.disable,label:f===void 0?c.label:null,leftLabel:c.leftLabel===void 0?e.leftLabel:c.leftLabel,color:c.color===void 0?e.color:c.color,checkedIcon:c.checkedIcon,uncheckedIcon:c.uncheckedIcon,dark:c.dark||i.value,size:c.size===void 0?e.size:c.size,dense:e.dense,keepColor:c.keepColor===void 0?e.keepColor:c.keepColor,"onUpdate:modelValue":u},f)])}))}}),cg=Oe({name:"DialogPlugin",props:ce(Y({},Qt),{title:String,message:String,prompt:Object,options:Object,progress:[Boolean,Object],html:Boolean,ok:{type:[String,Object,Boolean],default:!0},cancel:[String,Object,Boolean],focus:{type:String,default:"ok",validator:e=>["ok","cancel","none"].includes(e)},stackButtons:Boolean,color:String,cardClass:[String,Array,Object],cardStyle:[String,Array,Object]}),emits:["ok","hide"],setup(e,{emit:t}){const{proxy:n}=Te(),{$q:o}=n,r=Yt(e,o),i=me(null),s=me(e.prompt!==void 0?e.prompt.model:e.options!==void 0?e.options.model:void 0),a=w(()=>"q-dialog-plugin"+(r.value===!0?" q-dialog-plugin--dark q-dark":"")+(e.progress!==!1?" q-dialog-plugin--progress":"")),l=w(()=>e.color||(r.value===!0?"amber":"primary")),u=w(()=>e.progress===!1?null:We(e.progress)===!0?{component:e.progress.spinner||pn,props:{color:e.progress.color||l.value}}:{component:pn,props:{color:l.value}}),c=w(()=>e.prompt!==void 0||e.options!==void 0),d=w(()=>{if(c.value!==!0)return{};const K=e.prompt!==void 0?e.prompt:e.options,{model:W,isValid:D,items:G}=K;return Jt(K,["model","isValid","items"])}),f=w(()=>We(e.ok)===!0||e.ok===!0?o.lang.label.ok:e.ok),m=w(()=>We(e.cancel)===!0||e.cancel===!0?o.lang.label.cancel:e.cancel),v=w(()=>e.prompt!==void 0?e.prompt.isValid!==void 0&&e.prompt.isValid(s.value)!==!0:e.options!==void 0?e.options.isValid!==void 0&&e.options.isValid(s.value)!==!0:!1),P=w(()=>ce(Y({color:l.value,label:f.value,ripple:!1,disable:v.value},We(e.ok)===!0?e.ok:{flat:!0}),{"data-autofocus":e.focus==="ok"&&c.value!==!0||void 0,onClick:A})),_=w(()=>ce(Y({color:l.value,label:m.value,ripple:!1},We(e.cancel)===!0?e.cancel:{flat:!0}),{"data-autofocus":e.focus==="cancel"&&c.value!==!0||void 0,onClick:T}));_e(()=>e.prompt&&e.prompt.model,x),_e(()=>e.options&&e.options.model,x);function k(){i.value.show()}function S(){i.value.hide()}function A(){t("ok",he(s.value)),S()}function T(){S()}function U(){t("hide")}function x(W){s.value=W}function y(W){v.value!==!0&&e.prompt.type!=="textarea"&&Jn(W,13)===!0&&A()}function $(W,D){return e.html===!0?b(qn,{class:W,innerHTML:D}):b(qn,{class:W},()=>D)}function O(){return[b(ng,ce(Y({modelValue:s.value},d.value),{color:l.value,dense:!0,autofocus:!0,dark:r.value,"onUpdate:modelValue":x,onKeyup:y}))]}function N(){return[b(ug,ce(Y({modelValue:s.value},d.value),{color:l.value,options:e.options.items,dark:r.value,"onUpdate:modelValue":x}))]}function B(){const W=[];return e.cancel&&W.push(b(Fr,_.value)),e.ok&&W.push(b(Fr,P.value)),b(Sm,{class:e.stackButtons===!0?"items-end":"",vertical:e.stackButtons,align:"right"},()=>W)}function C(){const W=[];return e.title&&W.push($("q-dialog__title",e.title)),e.progress!==!1&&W.push(b(qn,{class:"q-dialog__progress"},()=>b(u.value.component,u.value.props))),e.message&&W.push($("q-dialog__message",e.message)),e.prompt!==void 0?W.push(b(qn,{class:"scroll q-dialog-plugin__form"},O)):e.options!==void 0&&W.push(b(zs,{dark:r.value}),b(qn,{class:"scroll q-dialog-plugin__form"},N),b(zs,{dark:r.value})),(e.ok||e.cancel)&&W.push(B()),W}function H(){return[b(Em,{class:[a.value,e.cardClass],style:e.cardStyle,dark:r.value},C)]}return Object.assign(n,{show:k,hide:S}),()=>b(km,{ref:i,onHide:U},H)}});function eu(e,t){for(const n in t)n!=="spinner"&&Object(t[n])===t[n]?(e[n]=Object(e[n])!==e[n]?{}:Y({},e[n]),eu(e[n],t[n])):e[n]=t[n]}function fg(e,t,n){return o=>{let r,i;const s=t===!0&&o.component!==void 0;if(s===!0){const{component:T,componentProps:U}=o;r=typeof T=="string"?n.component(T):T,i=U}else{const A=o,{class:T,style:U}=A,x=Jt(A,["class","style"]);r=e,i=x,T!==void 0&&(x.cardClass=T),U!==void 0&&(x.cardStyle=U)}let a,l=!1;const u=me(null),c=Ko(),d=T=>{u.value!==null&&u.value[T]!==void 0?u.value[T]():a.$.subTree&&a.$.subTree.component&&a.$.subTree.component.proxy&&a.$.subTree.component.proxy[T]?a.$.subTree.component.proxy[T]():console.error("[Quasar] Incorrectly defined Dialog component")},f=[],m=[],v={onOk(T){return f.push(T),v},onCancel(T){return m.push(T),v},onDismiss(T){return f.push(T),m.push(T),v},hide(){return d("hide"),v},update(T){if(a!==null){if(s===!0)Object.assign(i,T);else{const U=T,{class:x,style:y}=U,$=Jt(U,["class","style"]);x!==void 0&&($.cardClass=x),y!==void 0&&($.cardStyle=y),eu(i,$)}a.$forceUpdate()}return v}},P=T=>{l=!0,f.forEach(U=>{U(T)})},_=()=>{k.unmount(c),hi(c),k=null,a=null,l!==!0&&m.forEach(T=>{T()})};let k=pa({name:"QGlobalDialog",setup:()=>()=>b(r,ce(Y({},i),{ref:u,onOk:P,onHide:_}))},n);a=k.mount(c);function S(){d("show")}return typeof r.__asyncLoader=="function"?r.__asyncLoader().then(()=>{Fe(S)}):Fe(S),v}}var dg={install({$q:e,parentApp:t}){e.dialog=fg(cg,!0,t),this.__installed!==!0&&(this.create=e.dialog)}},hg={config:{},plugins:{Notify:Gh,Loading:cn,Dialog:dg}};const mg="/";async function gg({app:e,router:t,store:n},o){let r=!1;const i=l=>{try{return t.resolve(l).href}catch{}return Object(l)===l?null:l},s=l=>{if(r=!0,typeof l=="string"&&/^https?:\/\//.test(l)){window.location.href=l;return}const u=i(l);u!==null&&(window.location.href=u)},a=window.location.href.replace(window.location.origin,"");for(let l=0;r===!1&&l<o.length;l++)try{await o[l]({app:e,router:t,store:n,ssrContext:null,redirect:s,urlPath:a,publicPath:mg})}catch(u){if(u&&u.url){s(u.url);return}console.error("[Quasar] boot error:",u);return}r!==!0&&(e.use(t),e.mount("#q-app"))}_h(ci,hg).then(e=>Promise.all([Ln(()=>import("./i18n.e52d44e8.js"),[]),Ln(()=>import("./axios.f1d53af5.js"),[])]).then(t=>{const n=t.map(o=>o.default).filter(o=>typeof o=="function");gg(e,n)}));export{jh as $,xg as A,kt as B,So as C,Nf as D,Df as E,Ge as F,Ke as G,um as H,cm as I,lm as J,fm as K,sm as L,qm as M,Ql as N,Rg as O,Ar as P,pm as Q,vo as R,kg as S,ai as T,Tg as U,tm as V,nm as W,Pg as X,Kt as Y,Ft as Z,Vh as _,ii as a,Jn as a0,Io as a1,ld as a2,Jl as a3,Gl as a4,oc as a5,mt as a6,yg as a7,zc as a8,pg as a9,Fc as aa,Fr as ab,bg as ac,_g as ad,ta as ae,Hc as af,Ae as b,w as c,Ve as d,Eg as e,Oe as f,Te as g,b as h,dt as i,tt as j,Tt as k,rt as l,Zn as m,Fe as n,xn as o,Ne as p,Cg as q,me as r,Sg as s,Yt as t,Qt as u,wh as v,_e as w,Se as x,wg as y,jf as z};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguMzRmNjdmMjYuanMiLCJzb3VyY2VzIjpbIi4uLy4uL3ZpdGUvcHJlbG9hZC1oZWxwZXIiLCIuLi8uLi9ub2RlX21vZHVsZXMvQHZ1ZS9zaGFyZWQvZGlzdC9zaGFyZWQuZXNtLWJ1bmRsZXIuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvQHZ1ZS9yZWFjdGl2aXR5L2Rpc3QvcmVhY3Rpdml0eS5lc20tYnVuZGxlci5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9AdnVlL3J1bnRpbWUtY29yZS9kaXN0L3J1bnRpbWUtY29yZS5lc20tYnVuZGxlci5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9AdnVlL3J1bnRpbWUtZG9tL2Rpc3QvcnVudGltZS1kb20uZXNtLWJ1bmRsZXIuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvcXVhc2FyL3NyYy91dGlscy9wcml2YXRlL2luamVjdC1vYmotcHJvcC5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9xdWFzYXIvc3JjL3BsdWdpbnMvUGxhdGZvcm0uanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvcXVhc2FyL3NyYy91dGlscy9wcml2YXRlL2RlZmluZS1yZWFjdGl2ZS1wbHVnaW4uanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvcXVhc2FyL3NyYy91dGlscy9ldmVudC5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9xdWFzYXIvc3JjL3V0aWxzL2RlYm91bmNlLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL3F1YXNhci9zcmMvcGx1Z2lucy9TY3JlZW4uanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvcXVhc2FyL3NyYy9wbHVnaW5zL0RhcmsuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvcXVhc2FyL3NyYy9oaXN0b3J5LmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL3F1YXNhci9sYW5nL2VuLVVTLm1qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9xdWFzYXIvc3JjL2xhbmcuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvcXVhc2FyL3NyYy91dGlscy9zZXQtY3NzLXZhci5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9xdWFzYXIvc3JjL3V0aWxzL3ByaXZhdGUva2V5LWNvbXBvc2l0aW9uLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL3F1YXNhci9zcmMvYm9keS5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9xdWFzYXIvaWNvbi1zZXQvbWF0ZXJpYWwtaWNvbnMubWpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL3F1YXNhci9zcmMvaWNvbi1zZXQuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvcXVhc2FyL3NyYy91dGlscy9wcml2YXRlL3N5bWJvbHMuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvcXVhc2FyL3NyYy91dGlscy9wcml2YXRlL2dsb2JhbC1jb25maWcuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvcXVhc2FyL3NyYy91dGlscy9wcml2YXRlL2lzLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL3F1YXNhci9zcmMvaW5zdGFsbC1xdWFzYXIuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvcXVhc2FyL3NyYy92dWUtcGx1Z2luLmpzIiwiLi4vLi4vcGx1Z2luLXZ1ZTpleHBvcnQtaGVscGVyIiwiLi4vLi4vc3JjL0FwcC52dWUiLCIuLi8uLi9ub2RlX21vZHVsZXMvcXVhc2FyL3dyYXBwZXJzL2luZGV4Lm1qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9waW5pYS9ub2RlX21vZHVsZXMvdnVlLWRlbWkvbGliL2luZGV4Lm1qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9waW5pYS9kaXN0L3BpbmlhLmVzbS1icm93c2VyLmpzIiwiLi4vLi4vc3JjL3N0b3Jlcy9pbmRleC5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy92dWUtcm91dGVyL2Rpc3QvdnVlLXJvdXRlci5lc20tYnVuZGxlci5qcyIsIi4uLy4uL3NyYy9yb3V0ZXIvcm91dGVzLmpzIiwiLi4vLi4vc3JjL3JvdXRlci9pbmRleC5qcyIsIi4uLy4uLy5xdWFzYXIvYXBwLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL3F1YXNhci9zcmMvY29tcG9zYWJsZXMvcHJpdmF0ZS91c2Utc2l6ZS5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9xdWFzYXIvc3JjL3V0aWxzL3ByaXZhdGUvY3JlYXRlLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL3F1YXNhci9zcmMvdXRpbHMvcHJpdmF0ZS9yZW5kZXIuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvcXVhc2FyL3NyYy9jb21wb25lbnRzL2ljb24vUUljb24uanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvcXVhc2FyL3NyYy9jb21wb25lbnRzL2F2YXRhci9RQXZhdGFyLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL3F1YXNhci9zcmMvY29tcG9uZW50cy9zcGlubmVyL3VzZS1zcGlubmVyLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL3F1YXNhci9zcmMvY29tcG9uZW50cy9zcGlubmVyL1FTcGlubmVyLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL3F1YXNhci9zcmMvdXRpbHMvZG9tLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL3F1YXNhci9zcmMvdXRpbHMvdGhyb3R0bGUuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvcXVhc2FyL3NyYy9kaXJlY3RpdmVzL1JpcHBsZS5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9xdWFzYXIvc3JjL2NvbXBvc2FibGVzL3ByaXZhdGUvdXNlLWFsaWduLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL3F1YXNhci9zcmMvdXRpbHMvcHJpdmF0ZS92bS5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9xdWFzYXIvc3JjL2NvbXBvc2FibGVzL3ByaXZhdGUvdXNlLXJvdXRlci1saW5rLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL3F1YXNhci9zcmMvY29tcG9uZW50cy9idG4vdXNlLWJ0bi5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9xdWFzYXIvc3JjL2NvbXBvbmVudHMvYnRuL1FCdG4uanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvcXVhc2FyL3NyYy91dGlscy9wcml2YXRlL2dsb2JhbC1ub2Rlcy5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9xdWFzYXIvc3JjL3BsdWdpbnMvTm90aWZ5LmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL3F1YXNhci9zcmMvdXRpbHMvc2Nyb2xsLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL3F1YXNhci9zcmMvdXRpbHMvcHJldmVudC1zY3JvbGwuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvcXVhc2FyL3NyYy9wbHVnaW5zL0xvYWRpbmcuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvcXVhc2FyL3NyYy9jb21wb3NhYmxlcy9wcml2YXRlL3VzZS1oaXN0b3J5LmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL3F1YXNhci9zcmMvY29tcG9zYWJsZXMvcHJpdmF0ZS91c2UtdGltZW91dC5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9xdWFzYXIvc3JjL2NvbXBvc2FibGVzL3ByaXZhdGUvdXNlLXRpY2suanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvcXVhc2FyL3NyYy9jb21wb3NhYmxlcy9wcml2YXRlL3VzZS1tb2RlbC10b2dnbGUuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvcXVhc2FyL3NyYy9jb21wb3NhYmxlcy9wcml2YXRlL3VzZS10cmFuc2l0aW9uLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL3F1YXNhci9zcmMvdXRpbHMvcHJpdmF0ZS9mb2N1cy1tYW5hZ2VyLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL3F1YXNhci9zcmMvdXRpbHMvcHJpdmF0ZS9wb3J0YWwuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvcXVhc2FyL3NyYy9jb21wb3NhYmxlcy9wcml2YXRlL3VzZS1wb3J0YWwuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvcXVhc2FyL3NyYy9jb21wb3NhYmxlcy9wcml2YXRlL3VzZS1wcmV2ZW50LXNjcm9sbC5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9xdWFzYXIvc3JjL3V0aWxzL3ByaXZhdGUvZXNjYXBlLWtleS5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9xdWFzYXIvc3JjL3V0aWxzL3ByaXZhdGUvZm9jdXNvdXQuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvcXVhc2FyL3NyYy9jb21wb25lbnRzL2RpYWxvZy9RRGlhbG9nLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL3F1YXNhci9zcmMvY29tcG9zYWJsZXMvcHJpdmF0ZS91c2UtZGFyay5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9xdWFzYXIvc3JjL2NvbXBvbmVudHMvY2FyZC9RQ2FyZC5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9xdWFzYXIvc3JjL2NvbXBvbmVudHMvY2FyZC9RQ2FyZFNlY3Rpb24uanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvcXVhc2FyL3NyYy9jb21wb25lbnRzL2NhcmQvUUNhcmRBY3Rpb25zLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL3F1YXNhci9zcmMvY29tcG9uZW50cy9zZXBhcmF0b3IvUVNlcGFyYXRvci5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9xdWFzYXIvc3JjL2NvbXBvc2FibGVzL3VzZS1mb3JtLWNoaWxkLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL3F1YXNhci9zcmMvdXRpbHMvcGF0dGVybnMuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvcXVhc2FyL3NyYy91dGlscy9leHRlbmQuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvcXVhc2FyL3NyYy9jb21wb25lbnRzL2NpcmN1bGFyLXByb2dyZXNzL3VzZS1jaXJjdWxhci1wcm9ncmVzcy5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9xdWFzYXIvc3JjL3V0aWxzL2Zvcm1hdC5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9xdWFzYXIvc3JjL2NvbXBvbmVudHMvY2lyY3VsYXItcHJvZ3Jlc3MvUUNpcmN1bGFyUHJvZ3Jlc3MuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvcXVhc2FyL3NyYy9jb21wb3NhYmxlcy9wcml2YXRlL3VzZS1maWxlLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL3F1YXNhci9zcmMvY29tcG9uZW50cy91cGxvYWRlci91cGxvYWRlci1jb3JlLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL3F1YXNhci9zcmMvdXRpbHMvcHJpdmF0ZS9nZXQtZW1pdHMtb2JqZWN0LmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL3F1YXNhci9zcmMvdXRpbHMvY3JlYXRlLXVwbG9hZGVyLWNvbXBvbmVudC5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9xdWFzYXIvc3JjL3V0aWxzL3VpZC5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9xdWFzYXIvc3JjL2NvbXBvc2FibGVzL3ByaXZhdGUvdXNlLXZhbGlkYXRlLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL3F1YXNhci9zcmMvY29tcG9zYWJsZXMvcHJpdmF0ZS91c2Utc3BsaXQtYXR0cnMuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvcXVhc2FyL3NyYy9jb21wb3NhYmxlcy9wcml2YXRlL3VzZS1maWVsZC5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9xdWFzYXIvc3JjL2NvbXBvbmVudHMvaW5wdXQvdXNlLW1hc2suanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvcXVhc2FyL3NyYy9jb21wb3NhYmxlcy9wcml2YXRlL3VzZS1mb3JtLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL3F1YXNhci9zcmMvY29tcG9zYWJsZXMvcHJpdmF0ZS91c2UtZmlsZS1kb20tcHJvcHMuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvcXVhc2FyL3NyYy9jb21wb3NhYmxlcy9wcml2YXRlL3VzZS1rZXktY29tcG9zaXRpb24uanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvcXVhc2FyL3NyYy9jb21wb25lbnRzL2lucHV0L1FJbnB1dC5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9xdWFzYXIvc3JjL2NvbXBvc2FibGVzL3ByaXZhdGUvdXNlLXJlZm9jdXMtdGFyZ2V0LmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL3F1YXNhci9zcmMvdXRpbHMvcHJpdmF0ZS9vcHRpb24tc2l6ZXMuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvcXVhc2FyL3NyYy9jb21wb25lbnRzL3JhZGlvL1FSYWRpby5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9xdWFzYXIvc3JjL2NvbXBvbmVudHMvY2hlY2tib3gvdXNlLWNoZWNrYm94LmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL3F1YXNhci9zcmMvY29tcG9uZW50cy9jaGVja2JveC9RQ2hlY2tib3guanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvcXVhc2FyL3NyYy9jb21wb25lbnRzL3RvZ2dsZS9RVG9nZ2xlLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL3F1YXNhci9zcmMvY29tcG9uZW50cy9vcHRpb24tZ3JvdXAvUU9wdGlvbkdyb3VwLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL3F1YXNhci9zcmMvY29tcG9uZW50cy9kaWFsb2ctcGx1Z2luL0RpYWxvZ1BsdWdpbi5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9xdWFzYXIvc3JjL3V0aWxzL3ByaXZhdGUvZ2xvYmFsLWRpYWxvZy5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9xdWFzYXIvc3JjL3BsdWdpbnMvRGlhbG9nLmpzIiwiLi4vLi4vLnF1YXNhci9xdWFzYXItdXNlci1vcHRpb25zLmpzIiwiLi4vLi4vLnF1YXNhci9jbGllbnQtZW50cnkuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3Qgc2NyaXB0UmVsID0gKGZ1bmN0aW9uIGRldGVjdFNjcmlwdFJlbCgpIHtcbiAgICAvLyBAdHMtaWdub3JlXG4gICAgY29uc3QgcmVsTGlzdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpbmsnKS5yZWxMaXN0O1xuICAgIC8vIEB0cy1pZ25vcmVcbiAgICByZXR1cm4gcmVsTGlzdCAmJiByZWxMaXN0LnN1cHBvcnRzICYmIHJlbExpc3Quc3VwcG9ydHMoJ21vZHVsZXByZWxvYWQnKVxuICAgICAgICA/ICdtb2R1bGVwcmVsb2FkJ1xuICAgICAgICA6ICdwcmVsb2FkJztcbn0pKCk7Y29uc3Qgc2VlbiA9IHt9O2NvbnN0IGJhc2UgPSAnLyc7ZXhwb3J0IGNvbnN0IF9fdml0ZVByZWxvYWQgPSBmdW5jdGlvbiBwcmVsb2FkKGJhc2VNb2R1bGUsIGRlcHMpIHtcbiAgICAvLyBAdHMtaWdub3JlXG4gICAgaWYgKCFfX1ZJVEVfSVNfTU9ERVJOX18gfHwgIWRlcHMgfHwgZGVwcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgcmV0dXJuIGJhc2VNb2R1bGUoKTtcbiAgICB9XG4gICAgcmV0dXJuIFByb21pc2UuYWxsKGRlcHMubWFwKChkZXApID0+IHtcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICBkZXAgPSBgJHtiYXNlfSR7ZGVwfWA7XG4gICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgaWYgKGRlcCBpbiBzZWVuKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgIHNlZW5bZGVwXSA9IHRydWU7XG4gICAgICAgIGNvbnN0IGlzQ3NzID0gZGVwLmVuZHNXaXRoKCcuY3NzJyk7XG4gICAgICAgIGNvbnN0IGNzc1NlbGVjdG9yID0gaXNDc3MgPyAnW3JlbD1cInN0eWxlc2hlZXRcIl0nIDogJyc7XG4gICAgICAgIC8vIEB0cy1pZ25vcmUgY2hlY2sgaWYgdGhlIGZpbGUgaXMgYWxyZWFkeSBwcmVsb2FkZWQgYnkgU1NSIG1hcmt1cFxuICAgICAgICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgbGlua1tocmVmPVwiJHtkZXB9XCJdJHtjc3NTZWxlY3Rvcn1gKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgY29uc3QgbGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpbmsnKTtcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICBsaW5rLnJlbCA9IGlzQ3NzID8gJ3N0eWxlc2hlZXQnIDogc2NyaXB0UmVsO1xuICAgICAgICBpZiAoIWlzQ3NzKSB7XG4gICAgICAgICAgICBsaW5rLmFzID0gJ3NjcmlwdCc7XG4gICAgICAgICAgICBsaW5rLmNyb3NzT3JpZ2luID0gJyc7XG4gICAgICAgIH1cbiAgICAgICAgbGluay5ocmVmID0gZGVwO1xuICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQobGluayk7XG4gICAgICAgIGlmIChpc0Nzcykge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXMsIHJlaikgPT4ge1xuICAgICAgICAgICAgICAgIGxpbmsuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIHJlcyk7XG4gICAgICAgICAgICAgICAgbGluay5hZGRFdmVudExpc3RlbmVyKCdlcnJvcicsICgpID0+IHJlaihuZXcgRXJyb3IoYFVuYWJsZSB0byBwcmVsb2FkIENTUyBmb3IgJHtkZXB9YCkpKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfSkpLnRoZW4oKCkgPT4gYmFzZU1vZHVsZSgpKTtcbn0iLCIvKipcclxuICogTWFrZSBhIG1hcCBhbmQgcmV0dXJuIGEgZnVuY3Rpb24gZm9yIGNoZWNraW5nIGlmIGEga2V5XHJcbiAqIGlzIGluIHRoYXQgbWFwLlxyXG4gKiBJTVBPUlRBTlQ6IGFsbCBjYWxscyBvZiB0aGlzIGZ1bmN0aW9uIG11c3QgYmUgcHJlZml4ZWQgd2l0aFxyXG4gKiBcXC9cXCojXFxfXFxfUFVSRVxcX1xcX1xcKlxcL1xyXG4gKiBTbyB0aGF0IHJvbGx1cCBjYW4gdHJlZS1zaGFrZSB0aGVtIGlmIG5lY2Vzc2FyeS5cclxuICovXHJcbmZ1bmN0aW9uIG1ha2VNYXAoc3RyLCBleHBlY3RzTG93ZXJDYXNlKSB7XHJcbiAgICBjb25zdCBtYXAgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xyXG4gICAgY29uc3QgbGlzdCA9IHN0ci5zcGxpdCgnLCcpO1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgbWFwW2xpc3RbaV1dID0gdHJ1ZTtcclxuICAgIH1cclxuICAgIHJldHVybiBleHBlY3RzTG93ZXJDYXNlID8gdmFsID0+ICEhbWFwW3ZhbC50b0xvd2VyQ2FzZSgpXSA6IHZhbCA9PiAhIW1hcFt2YWxdO1xyXG59XG5cbi8qKlxyXG4gKiBkZXYgb25seSBmbGFnIC0+IG5hbWUgbWFwcGluZ1xyXG4gKi9cclxuY29uc3QgUGF0Y2hGbGFnTmFtZXMgPSB7XHJcbiAgICBbMSAvKiBURVhUICovXTogYFRFWFRgLFxyXG4gICAgWzIgLyogQ0xBU1MgKi9dOiBgQ0xBU1NgLFxyXG4gICAgWzQgLyogU1RZTEUgKi9dOiBgU1RZTEVgLFxyXG4gICAgWzggLyogUFJPUFMgKi9dOiBgUFJPUFNgLFxyXG4gICAgWzE2IC8qIEZVTExfUFJPUFMgKi9dOiBgRlVMTF9QUk9QU2AsXHJcbiAgICBbMzIgLyogSFlEUkFURV9FVkVOVFMgKi9dOiBgSFlEUkFURV9FVkVOVFNgLFxyXG4gICAgWzY0IC8qIFNUQUJMRV9GUkFHTUVOVCAqL106IGBTVEFCTEVfRlJBR01FTlRgLFxyXG4gICAgWzEyOCAvKiBLRVlFRF9GUkFHTUVOVCAqL106IGBLRVlFRF9GUkFHTUVOVGAsXHJcbiAgICBbMjU2IC8qIFVOS0VZRURfRlJBR01FTlQgKi9dOiBgVU5LRVlFRF9GUkFHTUVOVGAsXHJcbiAgICBbNTEyIC8qIE5FRURfUEFUQ0ggKi9dOiBgTkVFRF9QQVRDSGAsXHJcbiAgICBbMTAyNCAvKiBEWU5BTUlDX1NMT1RTICovXTogYERZTkFNSUNfU0xPVFNgLFxyXG4gICAgWzIwNDggLyogREVWX1JPT1RfRlJBR01FTlQgKi9dOiBgREVWX1JPT1RfRlJBR01FTlRgLFxyXG4gICAgWy0xIC8qIEhPSVNURUQgKi9dOiBgSE9JU1RFRGAsXHJcbiAgICBbLTIgLyogQkFJTCAqL106IGBCQUlMYFxyXG59O1xuXG4vKipcclxuICogRGV2IG9ubHlcclxuICovXHJcbmNvbnN0IHNsb3RGbGFnc1RleHQgPSB7XHJcbiAgICBbMSAvKiBTVEFCTEUgKi9dOiAnU1RBQkxFJyxcclxuICAgIFsyIC8qIERZTkFNSUMgKi9dOiAnRFlOQU1JQycsXHJcbiAgICBbMyAvKiBGT1JXQVJERUQgKi9dOiAnRk9SV0FSREVEJ1xyXG59O1xuXG5jb25zdCBHTE9CQUxTX1dISVRFX0xJU1RFRCA9ICdJbmZpbml0eSx1bmRlZmluZWQsTmFOLGlzRmluaXRlLGlzTmFOLHBhcnNlRmxvYXQscGFyc2VJbnQsZGVjb2RlVVJJLCcgK1xyXG4gICAgJ2RlY29kZVVSSUNvbXBvbmVudCxlbmNvZGVVUkksZW5jb2RlVVJJQ29tcG9uZW50LE1hdGgsTnVtYmVyLERhdGUsQXJyYXksJyArXHJcbiAgICAnT2JqZWN0LEJvb2xlYW4sU3RyaW5nLFJlZ0V4cCxNYXAsU2V0LEpTT04sSW50bCxCaWdJbnQnO1xyXG5jb25zdCBpc0dsb2JhbGx5V2hpdGVsaXN0ZWQgPSAvKiNfX1BVUkVfXyovIG1ha2VNYXAoR0xPQkFMU19XSElURV9MSVNURUQpO1xuXG5jb25zdCByYW5nZSA9IDI7XHJcbmZ1bmN0aW9uIGdlbmVyYXRlQ29kZUZyYW1lKHNvdXJjZSwgc3RhcnQgPSAwLCBlbmQgPSBzb3VyY2UubGVuZ3RoKSB7XHJcbiAgICAvLyBTcGxpdCB0aGUgY29udGVudCBpbnRvIGluZGl2aWR1YWwgbGluZXMgYnV0IGNhcHR1cmUgdGhlIG5ld2xpbmUgc2VxdWVuY2VcclxuICAgIC8vIHRoYXQgc2VwYXJhdGVkIGVhY2ggbGluZS4gVGhpcyBpcyBpbXBvcnRhbnQgYmVjYXVzZSB0aGUgYWN0dWFsIHNlcXVlbmNlIGlzXHJcbiAgICAvLyBuZWVkZWQgdG8gcHJvcGVybHkgdGFrZSBpbnRvIGFjY291bnQgdGhlIGZ1bGwgbGluZSBsZW5ndGggZm9yIG9mZnNldFxyXG4gICAgLy8gY29tcGFyaXNvblxyXG4gICAgbGV0IGxpbmVzID0gc291cmNlLnNwbGl0KC8oXFxyP1xcbikvKTtcclxuICAgIC8vIFNlcGFyYXRlIHRoZSBsaW5lcyBhbmQgbmV3bGluZSBzZXF1ZW5jZXMgaW50byBzZXBhcmF0ZSBhcnJheXMgZm9yIGVhc2llciByZWZlcmVuY2luZ1xyXG4gICAgY29uc3QgbmV3bGluZVNlcXVlbmNlcyA9IGxpbmVzLmZpbHRlcigoXywgaWR4KSA9PiBpZHggJSAyID09PSAxKTtcclxuICAgIGxpbmVzID0gbGluZXMuZmlsdGVyKChfLCBpZHgpID0+IGlkeCAlIDIgPT09IDApO1xyXG4gICAgbGV0IGNvdW50ID0gMDtcclxuICAgIGNvbnN0IHJlcyA9IFtdO1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsaW5lcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGNvdW50ICs9XHJcbiAgICAgICAgICAgIGxpbmVzW2ldLmxlbmd0aCArXHJcbiAgICAgICAgICAgICAgICAoKG5ld2xpbmVTZXF1ZW5jZXNbaV0gJiYgbmV3bGluZVNlcXVlbmNlc1tpXS5sZW5ndGgpIHx8IDApO1xyXG4gICAgICAgIGlmIChjb3VudCA+PSBzdGFydCkge1xyXG4gICAgICAgICAgICBmb3IgKGxldCBqID0gaSAtIHJhbmdlOyBqIDw9IGkgKyByYW5nZSB8fCBlbmQgPiBjb3VudDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoaiA8IDAgfHwgaiA+PSBsaW5lcy5sZW5ndGgpXHJcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBsaW5lID0gaiArIDE7XHJcbiAgICAgICAgICAgICAgICByZXMucHVzaChgJHtsaW5lfSR7JyAnLnJlcGVhdChNYXRoLm1heCgzIC0gU3RyaW5nKGxpbmUpLmxlbmd0aCwgMCkpfXwgICR7bGluZXNbal19YCk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBsaW5lTGVuZ3RoID0gbGluZXNbal0ubGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbmV3TGluZVNlcUxlbmd0aCA9IChuZXdsaW5lU2VxdWVuY2VzW2pdICYmIG5ld2xpbmVTZXF1ZW5jZXNbal0ubGVuZ3RoKSB8fCAwO1xyXG4gICAgICAgICAgICAgICAgaWYgKGogPT09IGkpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBwdXNoIHVuZGVybGluZVxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhZCA9IHN0YXJ0IC0gKGNvdW50IC0gKGxpbmVMZW5ndGggKyBuZXdMaW5lU2VxTGVuZ3RoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbGVuZ3RoID0gTWF0aC5tYXgoMSwgZW5kID4gY291bnQgPyBsaW5lTGVuZ3RoIC0gcGFkIDogZW5kIC0gc3RhcnQpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlcy5wdXNoKGAgICB8ICBgICsgJyAnLnJlcGVhdChwYWQpICsgJ14nLnJlcGVhdChsZW5ndGgpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGogPiBpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVuZCA+IGNvdW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGxlbmd0aCA9IE1hdGgubWF4KE1hdGgubWluKGVuZCAtIGNvdW50LCBsaW5lTGVuZ3RoKSwgMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcy5wdXNoKGAgICB8ICBgICsgJ14nLnJlcGVhdChsZW5ndGgpKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgY291bnQgKz0gbGluZUxlbmd0aCArIG5ld0xpbmVTZXFMZW5ndGg7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHJlcy5qb2luKCdcXG4nKTtcclxufVxuXG4vKipcclxuICogT24gdGhlIGNsaWVudCB3ZSBvbmx5IG5lZWQgdG8gb2ZmZXIgc3BlY2lhbCBjYXNlcyBmb3IgYm9vbGVhbiBhdHRyaWJ1dGVzIHRoYXRcclxuICogaGF2ZSBkaWZmZXJlbnQgbmFtZXMgZnJvbSB0aGVpciBjb3JyZXNwb25kaW5nIGRvbSBwcm9wZXJ0aWVzOlxyXG4gKiAtIGl0ZW1zY29wZSAtPiBOL0FcclxuICogLSBhbGxvd2Z1bGxzY3JlZW4gLT4gYWxsb3dGdWxsc2NyZWVuXHJcbiAqIC0gZm9ybW5vdmFsaWRhdGUgLT4gZm9ybU5vVmFsaWRhdGVcclxuICogLSBpc21hcCAtPiBpc01hcFxyXG4gKiAtIG5vbW9kdWxlIC0+IG5vTW9kdWxlXHJcbiAqIC0gbm92YWxpZGF0ZSAtPiBub1ZhbGlkYXRlXHJcbiAqIC0gcmVhZG9ubHkgLT4gcmVhZE9ubHlcclxuICovXHJcbmNvbnN0IHNwZWNpYWxCb29sZWFuQXR0cnMgPSBgaXRlbXNjb3BlLGFsbG93ZnVsbHNjcmVlbixmb3Jtbm92YWxpZGF0ZSxpc21hcCxub21vZHVsZSxub3ZhbGlkYXRlLHJlYWRvbmx5YDtcclxuY29uc3QgaXNTcGVjaWFsQm9vbGVhbkF0dHIgPSAvKiNfX1BVUkVfXyovIG1ha2VNYXAoc3BlY2lhbEJvb2xlYW5BdHRycyk7XHJcbi8qKlxyXG4gKiBUaGUgZnVsbCBsaXN0IGlzIG5lZWRlZCBkdXJpbmcgU1NSIHRvIHByb2R1Y2UgdGhlIGNvcnJlY3QgaW5pdGlhbCBtYXJrdXAuXHJcbiAqL1xyXG5jb25zdCBpc0Jvb2xlYW5BdHRyID0gLyojX19QVVJFX18qLyBtYWtlTWFwKHNwZWNpYWxCb29sZWFuQXR0cnMgK1xyXG4gICAgYCxhc3luYyxhdXRvZm9jdXMsYXV0b3BsYXksY29udHJvbHMsZGVmYXVsdCxkZWZlcixkaXNhYmxlZCxoaWRkZW4sYCArXHJcbiAgICBgbG9vcCxvcGVuLHJlcXVpcmVkLHJldmVyc2VkLHNjb3BlZCxzZWFtbGVzcyxgICtcclxuICAgIGBjaGVja2VkLG11dGVkLG11bHRpcGxlLHNlbGVjdGVkYCk7XHJcbi8qKlxyXG4gKiBCb29sZWFuIGF0dHJpYnV0ZXMgc2hvdWxkIGJlIGluY2x1ZGVkIGlmIHRoZSB2YWx1ZSBpcyB0cnV0aHkgb3IgJycuXHJcbiAqIGUuZy4gYDxzZWxlY3QgbXVsdGlwbGU+YCBjb21waWxlcyB0byBgeyBtdWx0aXBsZTogJycgfWBcclxuICovXHJcbmZ1bmN0aW9uIGluY2x1ZGVCb29sZWFuQXR0cih2YWx1ZSkge1xyXG4gICAgcmV0dXJuICEhdmFsdWUgfHwgdmFsdWUgPT09ICcnO1xyXG59XHJcbmNvbnN0IHVuc2FmZUF0dHJDaGFyUkUgPSAvWz4vPVwiJ1xcdTAwMDlcXHUwMDBhXFx1MDAwY1xcdTAwMjBdLztcclxuY29uc3QgYXR0clZhbGlkYXRpb25DYWNoZSA9IHt9O1xyXG5mdW5jdGlvbiBpc1NTUlNhZmVBdHRyTmFtZShuYW1lKSB7XHJcbiAgICBpZiAoYXR0clZhbGlkYXRpb25DYWNoZS5oYXNPd25Qcm9wZXJ0eShuYW1lKSkge1xyXG4gICAgICAgIHJldHVybiBhdHRyVmFsaWRhdGlvbkNhY2hlW25hbWVdO1xyXG4gICAgfVxyXG4gICAgY29uc3QgaXNVbnNhZmUgPSB1bnNhZmVBdHRyQ2hhclJFLnRlc3QobmFtZSk7XHJcbiAgICBpZiAoaXNVbnNhZmUpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKGB1bnNhZmUgYXR0cmlidXRlIG5hbWU6ICR7bmFtZX1gKTtcclxuICAgIH1cclxuICAgIHJldHVybiAoYXR0clZhbGlkYXRpb25DYWNoZVtuYW1lXSA9ICFpc1Vuc2FmZSk7XHJcbn1cclxuY29uc3QgcHJvcHNUb0F0dHJNYXAgPSB7XHJcbiAgICBhY2NlcHRDaGFyc2V0OiAnYWNjZXB0LWNoYXJzZXQnLFxyXG4gICAgY2xhc3NOYW1lOiAnY2xhc3MnLFxyXG4gICAgaHRtbEZvcjogJ2ZvcicsXHJcbiAgICBodHRwRXF1aXY6ICdodHRwLWVxdWl2J1xyXG59O1xyXG4vKipcclxuICogQ1NTIHByb3BlcnRpZXMgdGhhdCBhY2NlcHQgcGxhaW4gbnVtYmVyc1xyXG4gKi9cclxuY29uc3QgaXNOb1VuaXROdW1lcmljU3R5bGVQcm9wID0gLyojX19QVVJFX18qLyBtYWtlTWFwKGBhbmltYXRpb24taXRlcmF0aW9uLWNvdW50LGJvcmRlci1pbWFnZS1vdXRzZXQsYm9yZGVyLWltYWdlLXNsaWNlLGAgK1xyXG4gICAgYGJvcmRlci1pbWFnZS13aWR0aCxib3gtZmxleCxib3gtZmxleC1ncm91cCxib3gtb3JkaW5hbC1ncm91cCxjb2x1bW4tY291bnQsYCArXHJcbiAgICBgY29sdW1ucyxmbGV4LGZsZXgtZ3JvdyxmbGV4LXBvc2l0aXZlLGZsZXgtc2hyaW5rLGZsZXgtbmVnYXRpdmUsZmxleC1vcmRlcixgICtcclxuICAgIGBncmlkLXJvdyxncmlkLXJvdy1lbmQsZ3JpZC1yb3ctc3BhbixncmlkLXJvdy1zdGFydCxncmlkLWNvbHVtbixgICtcclxuICAgIGBncmlkLWNvbHVtbi1lbmQsZ3JpZC1jb2x1bW4tc3BhbixncmlkLWNvbHVtbi1zdGFydCxmb250LXdlaWdodCxsaW5lLWNsYW1wLGAgK1xyXG4gICAgYGxpbmUtaGVpZ2h0LG9wYWNpdHksb3JkZXIsb3JwaGFucyx0YWItc2l6ZSx3aWRvd3Msei1pbmRleCx6b29tLGAgK1xyXG4gICAgLy8gU1ZHXHJcbiAgICBgZmlsbC1vcGFjaXR5LGZsb29kLW9wYWNpdHksc3RvcC1vcGFjaXR5LHN0cm9rZS1kYXNoYXJyYXksc3Ryb2tlLWRhc2hvZmZzZXQsYCArXHJcbiAgICBgc3Ryb2tlLW1pdGVybGltaXQsc3Ryb2tlLW9wYWNpdHksc3Ryb2tlLXdpZHRoYCk7XHJcbi8qKlxyXG4gKiBLbm93biBhdHRyaWJ1dGVzLCB0aGlzIGlzIHVzZWQgZm9yIHN0cmluZ2lmaWNhdGlvbiBvZiBydW50aW1lIHN0YXRpYyBub2Rlc1xyXG4gKiBzbyB0aGF0IHdlIGRvbid0IHN0cmluZ2lmeSBiaW5kaW5ncyB0aGF0IGNhbm5vdCBiZSBzZXQgZnJvbSBIVE1MLlxyXG4gKiBEb24ndCBhbHNvIGZvcmdldCB0byBhbGxvdyBgZGF0YS0qYCBhbmQgYGFyaWEtKmAhXHJcbiAqIEdlbmVyYXRlZCBmcm9tIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0hUTUwvQXR0cmlidXRlc1xyXG4gKi9cclxuY29uc3QgaXNLbm93bkh0bWxBdHRyID0gLyojX19QVVJFX18qLyBtYWtlTWFwKGBhY2NlcHQsYWNjZXB0LWNoYXJzZXQsYWNjZXNza2V5LGFjdGlvbixhbGlnbixhbGxvdyxhbHQsYXN5bmMsYCArXHJcbiAgICBgYXV0b2NhcGl0YWxpemUsYXV0b2NvbXBsZXRlLGF1dG9mb2N1cyxhdXRvcGxheSxiYWNrZ3JvdW5kLGJnY29sb3IsYCArXHJcbiAgICBgYm9yZGVyLGJ1ZmZlcmVkLGNhcHR1cmUsY2hhbGxlbmdlLGNoYXJzZXQsY2hlY2tlZCxjaXRlLGNsYXNzLGNvZGUsYCArXHJcbiAgICBgY29kZWJhc2UsY29sb3IsY29scyxjb2xzcGFuLGNvbnRlbnQsY29udGVudGVkaXRhYmxlLGNvbnRleHRtZW51LGNvbnRyb2xzLGAgK1xyXG4gICAgYGNvb3Jkcyxjcm9zc29yaWdpbixjc3AsZGF0YSxkYXRldGltZSxkZWNvZGluZyxkZWZhdWx0LGRlZmVyLGRpcixkaXJuYW1lLGAgK1xyXG4gICAgYGRpc2FibGVkLGRvd25sb2FkLGRyYWdnYWJsZSxkcm9wem9uZSxlbmN0eXBlLGVudGVya2V5aGludCxmb3IsZm9ybSxgICtcclxuICAgIGBmb3JtYWN0aW9uLGZvcm1lbmN0eXBlLGZvcm1tZXRob2QsZm9ybW5vdmFsaWRhdGUsZm9ybXRhcmdldCxoZWFkZXJzLGAgK1xyXG4gICAgYGhlaWdodCxoaWRkZW4saGlnaCxocmVmLGhyZWZsYW5nLGh0dHAtZXF1aXYsaWNvbixpZCxpbXBvcnRhbmNlLGludGVncml0eSxgICtcclxuICAgIGBpc21hcCxpdGVtcHJvcCxrZXl0eXBlLGtpbmQsbGFiZWwsbGFuZyxsYW5ndWFnZSxsb2FkaW5nLGxpc3QsbG9vcCxsb3csYCArXHJcbiAgICBgbWFuaWZlc3QsbWF4LG1heGxlbmd0aCxtaW5sZW5ndGgsbWVkaWEsbWluLG11bHRpcGxlLG11dGVkLG5hbWUsbm92YWxpZGF0ZSxgICtcclxuICAgIGBvcGVuLG9wdGltdW0scGF0dGVybixwaW5nLHBsYWNlaG9sZGVyLHBvc3RlcixwcmVsb2FkLHJhZGlvZ3JvdXAscmVhZG9ubHksYCArXHJcbiAgICBgcmVmZXJyZXJwb2xpY3kscmVsLHJlcXVpcmVkLHJldmVyc2VkLHJvd3Mscm93c3BhbixzYW5kYm94LHNjb3BlLHNjb3BlZCxgICtcclxuICAgIGBzZWxlY3RlZCxzaGFwZSxzaXplLHNpemVzLHNsb3Qsc3BhbixzcGVsbGNoZWNrLHNyYyxzcmNkb2Msc3JjbGFuZyxzcmNzZXQsYCArXHJcbiAgICBgc3RhcnQsc3RlcCxzdHlsZSxzdW1tYXJ5LHRhYmluZGV4LHRhcmdldCx0aXRsZSx0cmFuc2xhdGUsdHlwZSx1c2VtYXAsYCArXHJcbiAgICBgdmFsdWUsd2lkdGgsd3JhcGApO1xyXG4vKipcclxuICogR2VuZXJhdGVkIGZyb20gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvU1ZHL0F0dHJpYnV0ZVxyXG4gKi9cclxuY29uc3QgaXNLbm93blN2Z0F0dHIgPSAvKiNfX1BVUkVfXyovIG1ha2VNYXAoYHhtbG5zLGFjY2VudC1oZWlnaHQsYWNjdW11bGF0ZSxhZGRpdGl2ZSxhbGlnbm1lbnQtYmFzZWxpbmUsYWxwaGFiZXRpYyxhbXBsaXR1ZGUsYCArXHJcbiAgICBgYXJhYmljLWZvcm0sYXNjZW50LGF0dHJpYnV0ZU5hbWUsYXR0cmlidXRlVHlwZSxhemltdXRoLGJhc2VGcmVxdWVuY3ksYCArXHJcbiAgICBgYmFzZWxpbmUtc2hpZnQsYmFzZVByb2ZpbGUsYmJveCxiZWdpbixiaWFzLGJ5LGNhbGNNb2RlLGNhcC1oZWlnaHQsY2xhc3MsYCArXHJcbiAgICBgY2xpcCxjbGlwUGF0aFVuaXRzLGNsaXAtcGF0aCxjbGlwLXJ1bGUsY29sb3IsY29sb3ItaW50ZXJwb2xhdGlvbixgICtcclxuICAgIGBjb2xvci1pbnRlcnBvbGF0aW9uLWZpbHRlcnMsY29sb3ItcHJvZmlsZSxjb2xvci1yZW5kZXJpbmcsYCArXHJcbiAgICBgY29udGVudFNjcmlwdFR5cGUsY29udGVudFN0eWxlVHlwZSxjcm9zc29yaWdpbixjdXJzb3IsY3gsY3ksZCxkZWNlbGVyYXRlLGAgK1xyXG4gICAgYGRlc2NlbnQsZGlmZnVzZUNvbnN0YW50LGRpcmVjdGlvbixkaXNwbGF5LGRpdmlzb3IsZG9taW5hbnQtYmFzZWxpbmUsZHVyLGR4LGAgK1xyXG4gICAgYGR5LGVkZ2VNb2RlLGVsZXZhdGlvbixlbmFibGUtYmFja2dyb3VuZCxlbmQsZXhwb25lbnQsZmlsbCxmaWxsLW9wYWNpdHksYCArXHJcbiAgICBgZmlsbC1ydWxlLGZpbHRlcixmaWx0ZXJSZXMsZmlsdGVyVW5pdHMsZmxvb2QtY29sb3IsZmxvb2Qtb3BhY2l0eSxgICtcclxuICAgIGBmb250LWZhbWlseSxmb250LXNpemUsZm9udC1zaXplLWFkanVzdCxmb250LXN0cmV0Y2gsZm9udC1zdHlsZSxgICtcclxuICAgIGBmb250LXZhcmlhbnQsZm9udC13ZWlnaHQsZm9ybWF0LGZyb20sZnIsZngsZnksZzEsZzIsZ2x5cGgtbmFtZSxgICtcclxuICAgIGBnbHlwaC1vcmllbnRhdGlvbi1ob3Jpem9udGFsLGdseXBoLW9yaWVudGF0aW9uLXZlcnRpY2FsLGdseXBoUmVmLGAgK1xyXG4gICAgYGdyYWRpZW50VHJhbnNmb3JtLGdyYWRpZW50VW5pdHMsaGFuZ2luZyxoZWlnaHQsaHJlZixocmVmbGFuZyxob3Jpei1hZHYteCxgICtcclxuICAgIGBob3Jpei1vcmlnaW4teCxpZCxpZGVvZ3JhcGhpYyxpbWFnZS1yZW5kZXJpbmcsaW4saW4yLGludGVyY2VwdCxrLGsxLGsyLGszLGAgK1xyXG4gICAgYGs0LGtlcm5lbE1hdHJpeCxrZXJuZWxVbml0TGVuZ3RoLGtlcm5pbmcsa2V5UG9pbnRzLGtleVNwbGluZXMsa2V5VGltZXMsYCArXHJcbiAgICBgbGFuZyxsZW5ndGhBZGp1c3QsbGV0dGVyLXNwYWNpbmcsbGlnaHRpbmctY29sb3IsbGltaXRpbmdDb25lQW5nbGUsbG9jYWwsYCArXHJcbiAgICBgbWFya2VyLWVuZCxtYXJrZXItbWlkLG1hcmtlci1zdGFydCxtYXJrZXJIZWlnaHQsbWFya2VyVW5pdHMsbWFya2VyV2lkdGgsYCArXHJcbiAgICBgbWFzayxtYXNrQ29udGVudFVuaXRzLG1hc2tVbml0cyxtYXRoZW1hdGljYWwsbWF4LG1lZGlhLG1ldGhvZCxtaW4sbW9kZSxgICtcclxuICAgIGBuYW1lLG51bU9jdGF2ZXMsb2Zmc2V0LG9wYWNpdHksb3BlcmF0b3Isb3JkZXIsb3JpZW50LG9yaWVudGF0aW9uLG9yaWdpbixgICtcclxuICAgIGBvdmVyZmxvdyxvdmVybGluZS1wb3NpdGlvbixvdmVybGluZS10aGlja25lc3MscGFub3NlLTEscGFpbnQtb3JkZXIscGF0aCxgICtcclxuICAgIGBwYXRoTGVuZ3RoLHBhdHRlcm5Db250ZW50VW5pdHMscGF0dGVyblRyYW5zZm9ybSxwYXR0ZXJuVW5pdHMscGluZyxgICtcclxuICAgIGBwb2ludGVyLWV2ZW50cyxwb2ludHMscG9pbnRzQXRYLHBvaW50c0F0WSxwb2ludHNBdFoscHJlc2VydmVBbHBoYSxgICtcclxuICAgIGBwcmVzZXJ2ZUFzcGVjdFJhdGlvLHByaW1pdGl2ZVVuaXRzLHIscmFkaXVzLHJlZmVycmVyUG9saWN5LHJlZlgscmVmWSxyZWwsYCArXHJcbiAgICBgcmVuZGVyaW5nLWludGVudCxyZXBlYXRDb3VudCxyZXBlYXREdXIscmVxdWlyZWRFeHRlbnNpb25zLHJlcXVpcmVkRmVhdHVyZXMsYCArXHJcbiAgICBgcmVzdGFydCxyZXN1bHQscm90YXRlLHJ4LHJ5LHNjYWxlLHNlZWQsc2hhcGUtcmVuZGVyaW5nLHNsb3BlLHNwYWNpbmcsYCArXHJcbiAgICBgc3BlY3VsYXJDb25zdGFudCxzcGVjdWxhckV4cG9uZW50LHNwZWVkLHNwcmVhZE1ldGhvZCxzdGFydE9mZnNldCxgICtcclxuICAgIGBzdGREZXZpYXRpb24sc3RlbWgsc3RlbXYsc3RpdGNoVGlsZXMsc3RvcC1jb2xvcixzdG9wLW9wYWNpdHksYCArXHJcbiAgICBgc3RyaWtldGhyb3VnaC1wb3NpdGlvbixzdHJpa2V0aHJvdWdoLXRoaWNrbmVzcyxzdHJpbmcsc3Ryb2tlLGAgK1xyXG4gICAgYHN0cm9rZS1kYXNoYXJyYXksc3Ryb2tlLWRhc2hvZmZzZXQsc3Ryb2tlLWxpbmVjYXAsc3Ryb2tlLWxpbmVqb2luLGAgK1xyXG4gICAgYHN0cm9rZS1taXRlcmxpbWl0LHN0cm9rZS1vcGFjaXR5LHN0cm9rZS13aWR0aCxzdHlsZSxzdXJmYWNlU2NhbGUsYCArXHJcbiAgICBgc3lzdGVtTGFuZ3VhZ2UsdGFiaW5kZXgsdGFibGVWYWx1ZXMsdGFyZ2V0LHRhcmdldFgsdGFyZ2V0WSx0ZXh0LWFuY2hvcixgICtcclxuICAgIGB0ZXh0LWRlY29yYXRpb24sdGV4dC1yZW5kZXJpbmcsdGV4dExlbmd0aCx0byx0cmFuc2Zvcm0sdHJhbnNmb3JtLW9yaWdpbixgICtcclxuICAgIGB0eXBlLHUxLHUyLHVuZGVybGluZS1wb3NpdGlvbix1bmRlcmxpbmUtdGhpY2tuZXNzLHVuaWNvZGUsdW5pY29kZS1iaWRpLGAgK1xyXG4gICAgYHVuaWNvZGUtcmFuZ2UsdW5pdHMtcGVyLWVtLHYtYWxwaGFiZXRpYyx2LWhhbmdpbmcsdi1pZGVvZ3JhcGhpYyxgICtcclxuICAgIGB2LW1hdGhlbWF0aWNhbCx2YWx1ZXMsdmVjdG9yLWVmZmVjdCx2ZXJzaW9uLHZlcnQtYWR2LXksdmVydC1vcmlnaW4teCxgICtcclxuICAgIGB2ZXJ0LW9yaWdpbi15LHZpZXdCb3gsdmlld1RhcmdldCx2aXNpYmlsaXR5LHdpZHRoLHdpZHRocyx3b3JkLXNwYWNpbmcsYCArXHJcbiAgICBgd3JpdGluZy1tb2RlLHgseC1oZWlnaHQseDEseDIseENoYW5uZWxTZWxlY3Rvcix4bGluazphY3R1YXRlLHhsaW5rOmFyY3JvbGUsYCArXHJcbiAgICBgeGxpbms6aHJlZix4bGluazpyb2xlLHhsaW5rOnNob3cseGxpbms6dGl0bGUseGxpbms6dHlwZSx4bWw6YmFzZSx4bWw6bGFuZyxgICtcclxuICAgIGB4bWw6c3BhY2UseSx5MSx5Mix5Q2hhbm5lbFNlbGVjdG9yLHosem9vbUFuZFBhbmApO1xuXG5mdW5jdGlvbiBub3JtYWxpemVTdHlsZSh2YWx1ZSkge1xyXG4gICAgaWYgKGlzQXJyYXkodmFsdWUpKSB7XHJcbiAgICAgICAgY29uc3QgcmVzID0ge307XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB2YWx1ZS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBjb25zdCBpdGVtID0gdmFsdWVbaV07XHJcbiAgICAgICAgICAgIGNvbnN0IG5vcm1hbGl6ZWQgPSBpc1N0cmluZyhpdGVtKVxyXG4gICAgICAgICAgICAgICAgPyBwYXJzZVN0cmluZ1N0eWxlKGl0ZW0pXHJcbiAgICAgICAgICAgICAgICA6IG5vcm1hbGl6ZVN0eWxlKGl0ZW0pO1xyXG4gICAgICAgICAgICBpZiAobm9ybWFsaXplZCkge1xyXG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gbm9ybWFsaXplZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc1trZXldID0gbm9ybWFsaXplZFtrZXldO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByZXM7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChpc1N0cmluZyh2YWx1ZSkpIHtcclxuICAgICAgICByZXR1cm4gdmFsdWU7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChpc09iamVjdCh2YWx1ZSkpIHtcclxuICAgICAgICByZXR1cm4gdmFsdWU7XHJcbiAgICB9XHJcbn1cclxuY29uc3QgbGlzdERlbGltaXRlclJFID0gLzsoPyFbXihdKlxcKSkvZztcclxuY29uc3QgcHJvcGVydHlEZWxpbWl0ZXJSRSA9IC86KC4rKS87XHJcbmZ1bmN0aW9uIHBhcnNlU3RyaW5nU3R5bGUoY3NzVGV4dCkge1xyXG4gICAgY29uc3QgcmV0ID0ge307XHJcbiAgICBjc3NUZXh0LnNwbGl0KGxpc3REZWxpbWl0ZXJSRSkuZm9yRWFjaChpdGVtID0+IHtcclxuICAgICAgICBpZiAoaXRlbSkge1xyXG4gICAgICAgICAgICBjb25zdCB0bXAgPSBpdGVtLnNwbGl0KHByb3BlcnR5RGVsaW1pdGVyUkUpO1xyXG4gICAgICAgICAgICB0bXAubGVuZ3RoID4gMSAmJiAocmV0W3RtcFswXS50cmltKCldID0gdG1wWzFdLnRyaW0oKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gcmV0O1xyXG59XHJcbmZ1bmN0aW9uIHN0cmluZ2lmeVN0eWxlKHN0eWxlcykge1xyXG4gICAgbGV0IHJldCA9ICcnO1xyXG4gICAgaWYgKCFzdHlsZXMgfHwgaXNTdHJpbmcoc3R5bGVzKSkge1xyXG4gICAgICAgIHJldHVybiByZXQ7XHJcbiAgICB9XHJcbiAgICBmb3IgKGNvbnN0IGtleSBpbiBzdHlsZXMpIHtcclxuICAgICAgICBjb25zdCB2YWx1ZSA9IHN0eWxlc1trZXldO1xyXG4gICAgICAgIGNvbnN0IG5vcm1hbGl6ZWRLZXkgPSBrZXkuc3RhcnRzV2l0aChgLS1gKSA/IGtleSA6IGh5cGhlbmF0ZShrZXkpO1xyXG4gICAgICAgIGlmIChpc1N0cmluZyh2YWx1ZSkgfHxcclxuICAgICAgICAgICAgKHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicgJiYgaXNOb1VuaXROdW1lcmljU3R5bGVQcm9wKG5vcm1hbGl6ZWRLZXkpKSkge1xyXG4gICAgICAgICAgICAvLyBvbmx5IHJlbmRlciB2YWxpZCB2YWx1ZXNcclxuICAgICAgICAgICAgcmV0ICs9IGAke25vcm1hbGl6ZWRLZXl9OiR7dmFsdWV9O2A7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHJldDtcclxufVxyXG5mdW5jdGlvbiBub3JtYWxpemVDbGFzcyh2YWx1ZSkge1xyXG4gICAgbGV0IHJlcyA9ICcnO1xyXG4gICAgaWYgKGlzU3RyaW5nKHZhbHVlKSkge1xyXG4gICAgICAgIHJlcyA9IHZhbHVlO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoaXNBcnJheSh2YWx1ZSkpIHtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHZhbHVlLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG5vcm1hbGl6ZWQgPSBub3JtYWxpemVDbGFzcyh2YWx1ZVtpXSk7XHJcbiAgICAgICAgICAgIGlmIChub3JtYWxpemVkKSB7XHJcbiAgICAgICAgICAgICAgICByZXMgKz0gbm9ybWFsaXplZCArICcgJztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGVsc2UgaWYgKGlzT2JqZWN0KHZhbHVlKSkge1xyXG4gICAgICAgIGZvciAoY29uc3QgbmFtZSBpbiB2YWx1ZSkge1xyXG4gICAgICAgICAgICBpZiAodmFsdWVbbmFtZV0pIHtcclxuICAgICAgICAgICAgICAgIHJlcyArPSBuYW1lICsgJyAnO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHJlcy50cmltKCk7XHJcbn1cclxuZnVuY3Rpb24gbm9ybWFsaXplUHJvcHMocHJvcHMpIHtcclxuICAgIGlmICghcHJvcHMpXHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICBsZXQgeyBjbGFzczoga2xhc3MsIHN0eWxlIH0gPSBwcm9wcztcclxuICAgIGlmIChrbGFzcyAmJiAhaXNTdHJpbmcoa2xhc3MpKSB7XHJcbiAgICAgICAgcHJvcHMuY2xhc3MgPSBub3JtYWxpemVDbGFzcyhrbGFzcyk7XHJcbiAgICB9XHJcbiAgICBpZiAoc3R5bGUpIHtcclxuICAgICAgICBwcm9wcy5zdHlsZSA9IG5vcm1hbGl6ZVN0eWxlKHN0eWxlKTtcclxuICAgIH1cclxuICAgIHJldHVybiBwcm9wcztcclxufVxuXG4vLyBUaGVzZSB0YWcgY29uZmlncyBhcmUgc2hhcmVkIGJldHdlZW4gY29tcGlsZXItZG9tIGFuZCBydW50aW1lLWRvbSwgc28gdGhleVxyXG4vLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9IVE1ML0VsZW1lbnRcclxuY29uc3QgSFRNTF9UQUdTID0gJ2h0bWwsYm9keSxiYXNlLGhlYWQsbGluayxtZXRhLHN0eWxlLHRpdGxlLGFkZHJlc3MsYXJ0aWNsZSxhc2lkZSxmb290ZXIsJyArXHJcbiAgICAnaGVhZGVyLGgxLGgyLGgzLGg0LGg1LGg2LG5hdixzZWN0aW9uLGRpdixkZCxkbCxkdCxmaWdjYXB0aW9uLCcgK1xyXG4gICAgJ2ZpZ3VyZSxwaWN0dXJlLGhyLGltZyxsaSxtYWluLG9sLHAscHJlLHVsLGEsYixhYmJyLGJkaSxiZG8sYnIsY2l0ZSxjb2RlLCcgK1xyXG4gICAgJ2RhdGEsZGZuLGVtLGksa2JkLG1hcmsscSxycCxydCxydWJ5LHMsc2FtcCxzbWFsbCxzcGFuLHN0cm9uZyxzdWIsc3VwLCcgK1xyXG4gICAgJ3RpbWUsdSx2YXIsd2JyLGFyZWEsYXVkaW8sbWFwLHRyYWNrLHZpZGVvLGVtYmVkLG9iamVjdCxwYXJhbSxzb3VyY2UsJyArXHJcbiAgICAnY2FudmFzLHNjcmlwdCxub3NjcmlwdCxkZWwsaW5zLGNhcHRpb24sY29sLGNvbGdyb3VwLHRhYmxlLHRoZWFkLHRib2R5LHRkLCcgK1xyXG4gICAgJ3RoLHRyLGJ1dHRvbixkYXRhbGlzdCxmaWVsZHNldCxmb3JtLGlucHV0LGxhYmVsLGxlZ2VuZCxtZXRlcixvcHRncm91cCwnICtcclxuICAgICdvcHRpb24sb3V0cHV0LHByb2dyZXNzLHNlbGVjdCx0ZXh0YXJlYSxkZXRhaWxzLGRpYWxvZyxtZW51LCcgK1xyXG4gICAgJ3N1bW1hcnksdGVtcGxhdGUsYmxvY2txdW90ZSxpZnJhbWUsdGZvb3QnO1xyXG4vLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9TVkcvRWxlbWVudFxyXG5jb25zdCBTVkdfVEFHUyA9ICdzdmcsYW5pbWF0ZSxhbmltYXRlTW90aW9uLGFuaW1hdGVUcmFuc2Zvcm0sY2lyY2xlLGNsaXBQYXRoLGNvbG9yLXByb2ZpbGUsJyArXHJcbiAgICAnZGVmcyxkZXNjLGRpc2NhcmQsZWxsaXBzZSxmZUJsZW5kLGZlQ29sb3JNYXRyaXgsZmVDb21wb25lbnRUcmFuc2ZlciwnICtcclxuICAgICdmZUNvbXBvc2l0ZSxmZUNvbnZvbHZlTWF0cml4LGZlRGlmZnVzZUxpZ2h0aW5nLGZlRGlzcGxhY2VtZW50TWFwLCcgK1xyXG4gICAgJ2ZlRGlzdGFuY2VMaWdodCxmZURyb3BTaGFkb3csZmVGbG9vZCxmZUZ1bmNBLGZlRnVuY0IsZmVGdW5jRyxmZUZ1bmNSLCcgK1xyXG4gICAgJ2ZlR2F1c3NpYW5CbHVyLGZlSW1hZ2UsZmVNZXJnZSxmZU1lcmdlTm9kZSxmZU1vcnBob2xvZ3ksZmVPZmZzZXQsJyArXHJcbiAgICAnZmVQb2ludExpZ2h0LGZlU3BlY3VsYXJMaWdodGluZyxmZVNwb3RMaWdodCxmZVRpbGUsZmVUdXJidWxlbmNlLGZpbHRlciwnICtcclxuICAgICdmb3JlaWduT2JqZWN0LGcsaGF0Y2gsaGF0Y2hwYXRoLGltYWdlLGxpbmUsbGluZWFyR3JhZGllbnQsbWFya2VyLG1hc2ssJyArXHJcbiAgICAnbWVzaCxtZXNoZ3JhZGllbnQsbWVzaHBhdGNoLG1lc2hyb3csbWV0YWRhdGEsbXBhdGgscGF0aCxwYXR0ZXJuLCcgK1xyXG4gICAgJ3BvbHlnb24scG9seWxpbmUscmFkaWFsR3JhZGllbnQscmVjdCxzZXQsc29saWRjb2xvcixzdG9wLHN3aXRjaCxzeW1ib2wsJyArXHJcbiAgICAndGV4dCx0ZXh0UGF0aCx0aXRsZSx0c3Bhbix1bmtub3duLHVzZSx2aWV3JztcclxuY29uc3QgVk9JRF9UQUdTID0gJ2FyZWEsYmFzZSxicixjb2wsZW1iZWQsaHIsaW1nLGlucHV0LGxpbmssbWV0YSxwYXJhbSxzb3VyY2UsdHJhY2ssd2JyJztcclxuLyoqXHJcbiAqIENvbXBpbGVyIG9ubHkuXHJcbiAqIERvIE5PVCB1c2UgaW4gcnVudGltZSBjb2RlIHBhdGhzIHVubGVzcyBiZWhpbmQgYChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKWAgZmxhZy5cclxuICovXHJcbmNvbnN0IGlzSFRNTFRhZyA9IC8qI19fUFVSRV9fKi8gbWFrZU1hcChIVE1MX1RBR1MpO1xyXG4vKipcclxuICogQ29tcGlsZXIgb25seS5cclxuICogRG8gTk9UIHVzZSBpbiBydW50aW1lIGNvZGUgcGF0aHMgdW5sZXNzIGJlaGluZCBgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpYCBmbGFnLlxyXG4gKi9cclxuY29uc3QgaXNTVkdUYWcgPSAvKiNfX1BVUkVfXyovIG1ha2VNYXAoU1ZHX1RBR1MpO1xyXG4vKipcclxuICogQ29tcGlsZXIgb25seS5cclxuICogRG8gTk9UIHVzZSBpbiBydW50aW1lIGNvZGUgcGF0aHMgdW5sZXNzIGJlaGluZCBgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpYCBmbGFnLlxyXG4gKi9cclxuY29uc3QgaXNWb2lkVGFnID0gLyojX19QVVJFX18qLyBtYWtlTWFwKFZPSURfVEFHUyk7XG5cbmNvbnN0IGVzY2FwZVJFID0gL1tcIicmPD5dLztcclxuZnVuY3Rpb24gZXNjYXBlSHRtbChzdHJpbmcpIHtcclxuICAgIGNvbnN0IHN0ciA9ICcnICsgc3RyaW5nO1xyXG4gICAgY29uc3QgbWF0Y2ggPSBlc2NhcGVSRS5leGVjKHN0cik7XHJcbiAgICBpZiAoIW1hdGNoKSB7XHJcbiAgICAgICAgcmV0dXJuIHN0cjtcclxuICAgIH1cclxuICAgIGxldCBodG1sID0gJyc7XHJcbiAgICBsZXQgZXNjYXBlZDtcclxuICAgIGxldCBpbmRleDtcclxuICAgIGxldCBsYXN0SW5kZXggPSAwO1xyXG4gICAgZm9yIChpbmRleCA9IG1hdGNoLmluZGV4OyBpbmRleCA8IHN0ci5sZW5ndGg7IGluZGV4KyspIHtcclxuICAgICAgICBzd2l0Y2ggKHN0ci5jaGFyQ29kZUF0KGluZGV4KSkge1xyXG4gICAgICAgICAgICBjYXNlIDM0OiAvLyBcIlxyXG4gICAgICAgICAgICAgICAgZXNjYXBlZCA9ICcmcXVvdDsnO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgMzg6IC8vICZcclxuICAgICAgICAgICAgICAgIGVzY2FwZWQgPSAnJmFtcDsnO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgMzk6IC8vICdcclxuICAgICAgICAgICAgICAgIGVzY2FwZWQgPSAnJiMzOTsnO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgNjA6IC8vIDxcclxuICAgICAgICAgICAgICAgIGVzY2FwZWQgPSAnJmx0Oyc7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSA2MjogLy8gPlxyXG4gICAgICAgICAgICAgICAgZXNjYXBlZCA9ICcmZ3Q7JztcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChsYXN0SW5kZXggIT09IGluZGV4KSB7XHJcbiAgICAgICAgICAgIGh0bWwgKz0gc3RyLnNsaWNlKGxhc3RJbmRleCwgaW5kZXgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsYXN0SW5kZXggPSBpbmRleCArIDE7XHJcbiAgICAgICAgaHRtbCArPSBlc2NhcGVkO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGxhc3RJbmRleCAhPT0gaW5kZXggPyBodG1sICsgc3RyLnNsaWNlKGxhc3RJbmRleCwgaW5kZXgpIDogaHRtbDtcclxufVxyXG4vLyBodHRwczovL3d3dy53My5vcmcvVFIvaHRtbDUyL3N5bnRheC5odG1sI2NvbW1lbnRzXHJcbmNvbnN0IGNvbW1lbnRTdHJpcFJFID0gL14tPz58PCEtLXwtLT58LS0hPnw8IS0kL2c7XHJcbmZ1bmN0aW9uIGVzY2FwZUh0bWxDb21tZW50KHNyYykge1xyXG4gICAgcmV0dXJuIHNyYy5yZXBsYWNlKGNvbW1lbnRTdHJpcFJFLCAnJyk7XHJcbn1cblxuZnVuY3Rpb24gbG9vc2VDb21wYXJlQXJyYXlzKGEsIGIpIHtcclxuICAgIGlmIChhLmxlbmd0aCAhPT0gYi5sZW5ndGgpXHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgbGV0IGVxdWFsID0gdHJ1ZTtcclxuICAgIGZvciAobGV0IGkgPSAwOyBlcXVhbCAmJiBpIDwgYS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGVxdWFsID0gbG9vc2VFcXVhbChhW2ldLCBiW2ldKTtcclxuICAgIH1cclxuICAgIHJldHVybiBlcXVhbDtcclxufVxyXG5mdW5jdGlvbiBsb29zZUVxdWFsKGEsIGIpIHtcclxuICAgIGlmIChhID09PSBiKVxyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgbGV0IGFWYWxpZFR5cGUgPSBpc0RhdGUoYSk7XHJcbiAgICBsZXQgYlZhbGlkVHlwZSA9IGlzRGF0ZShiKTtcclxuICAgIGlmIChhVmFsaWRUeXBlIHx8IGJWYWxpZFR5cGUpIHtcclxuICAgICAgICByZXR1cm4gYVZhbGlkVHlwZSAmJiBiVmFsaWRUeXBlID8gYS5nZXRUaW1lKCkgPT09IGIuZ2V0VGltZSgpIDogZmFsc2U7XHJcbiAgICB9XHJcbiAgICBhVmFsaWRUeXBlID0gaXNBcnJheShhKTtcclxuICAgIGJWYWxpZFR5cGUgPSBpc0FycmF5KGIpO1xyXG4gICAgaWYgKGFWYWxpZFR5cGUgfHwgYlZhbGlkVHlwZSkge1xyXG4gICAgICAgIHJldHVybiBhVmFsaWRUeXBlICYmIGJWYWxpZFR5cGUgPyBsb29zZUNvbXBhcmVBcnJheXMoYSwgYikgOiBmYWxzZTtcclxuICAgIH1cclxuICAgIGFWYWxpZFR5cGUgPSBpc09iamVjdChhKTtcclxuICAgIGJWYWxpZFR5cGUgPSBpc09iamVjdChiKTtcclxuICAgIGlmIChhVmFsaWRUeXBlIHx8IGJWYWxpZFR5cGUpIHtcclxuICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWY6IHRoaXMgaWYgd2lsbCBwcm9iYWJseSBuZXZlciBiZSBjYWxsZWQgKi9cclxuICAgICAgICBpZiAoIWFWYWxpZFR5cGUgfHwgIWJWYWxpZFR5cGUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBhS2V5c0NvdW50ID0gT2JqZWN0LmtleXMoYSkubGVuZ3RoO1xyXG4gICAgICAgIGNvbnN0IGJLZXlzQ291bnQgPSBPYmplY3Qua2V5cyhiKS5sZW5ndGg7XHJcbiAgICAgICAgaWYgKGFLZXlzQ291bnQgIT09IGJLZXlzQ291bnQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBhKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGFIYXNLZXkgPSBhLmhhc093blByb3BlcnR5KGtleSk7XHJcbiAgICAgICAgICAgIGNvbnN0IGJIYXNLZXkgPSBiLmhhc093blByb3BlcnR5KGtleSk7XHJcbiAgICAgICAgICAgIGlmICgoYUhhc0tleSAmJiAhYkhhc0tleSkgfHxcclxuICAgICAgICAgICAgICAgICghYUhhc0tleSAmJiBiSGFzS2V5KSB8fFxyXG4gICAgICAgICAgICAgICAgIWxvb3NlRXF1YWwoYVtrZXldLCBiW2tleV0pKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gU3RyaW5nKGEpID09PSBTdHJpbmcoYik7XHJcbn1cclxuZnVuY3Rpb24gbG9vc2VJbmRleE9mKGFyciwgdmFsKSB7XHJcbiAgICByZXR1cm4gYXJyLmZpbmRJbmRleChpdGVtID0+IGxvb3NlRXF1YWwoaXRlbSwgdmFsKSk7XHJcbn1cblxuLyoqXHJcbiAqIEZvciBjb252ZXJ0aW5nIHt7IGludGVycG9sYXRpb24gfX0gdmFsdWVzIHRvIGRpc3BsYXllZCBzdHJpbmdzLlxyXG4gKiBAcHJpdmF0ZVxyXG4gKi9cclxuY29uc3QgdG9EaXNwbGF5U3RyaW5nID0gKHZhbCkgPT4ge1xyXG4gICAgcmV0dXJuIGlzU3RyaW5nKHZhbClcclxuICAgICAgICA/IHZhbFxyXG4gICAgICAgIDogdmFsID09IG51bGxcclxuICAgICAgICAgICAgPyAnJ1xyXG4gICAgICAgICAgICA6IGlzQXJyYXkodmFsKSB8fFxyXG4gICAgICAgICAgICAgICAgKGlzT2JqZWN0KHZhbCkgJiZcclxuICAgICAgICAgICAgICAgICAgICAodmFsLnRvU3RyaW5nID09PSBvYmplY3RUb1N0cmluZyB8fCAhaXNGdW5jdGlvbih2YWwudG9TdHJpbmcpKSlcclxuICAgICAgICAgICAgICAgID8gSlNPTi5zdHJpbmdpZnkodmFsLCByZXBsYWNlciwgMilcclxuICAgICAgICAgICAgICAgIDogU3RyaW5nKHZhbCk7XHJcbn07XHJcbmNvbnN0IHJlcGxhY2VyID0gKF9rZXksIHZhbCkgPT4ge1xyXG4gICAgLy8gY2FuJ3QgdXNlIGlzUmVmIGhlcmUgc2luY2UgQHZ1ZS9zaGFyZWQgaGFzIG5vIGRlcHNcclxuICAgIGlmICh2YWwgJiYgdmFsLl9fdl9pc1JlZikge1xyXG4gICAgICAgIHJldHVybiByZXBsYWNlcihfa2V5LCB2YWwudmFsdWUpO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoaXNNYXAodmFsKSkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIFtgTWFwKCR7dmFsLnNpemV9KWBdOiBbLi4udmFsLmVudHJpZXMoKV0ucmVkdWNlKChlbnRyaWVzLCBba2V5LCB2YWxdKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBlbnRyaWVzW2Ake2tleX0gPT5gXSA9IHZhbDtcclxuICAgICAgICAgICAgICAgIHJldHVybiBlbnRyaWVzO1xyXG4gICAgICAgICAgICB9LCB7fSlcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoaXNTZXQodmFsKSkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIFtgU2V0KCR7dmFsLnNpemV9KWBdOiBbLi4udmFsLnZhbHVlcygpXVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChpc09iamVjdCh2YWwpICYmICFpc0FycmF5KHZhbCkgJiYgIWlzUGxhaW5PYmplY3QodmFsKSkge1xyXG4gICAgICAgIHJldHVybiBTdHJpbmcodmFsKTtcclxuICAgIH1cclxuICAgIHJldHVybiB2YWw7XHJcbn07XG5cbmNvbnN0IEVNUFRZX09CSiA9IChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKVxyXG4gICAgPyBPYmplY3QuZnJlZXplKHt9KVxyXG4gICAgOiB7fTtcclxuY29uc3QgRU1QVFlfQVJSID0gKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpID8gT2JqZWN0LmZyZWV6ZShbXSkgOiBbXTtcclxuY29uc3QgTk9PUCA9ICgpID0+IHsgfTtcclxuLyoqXHJcbiAqIEFsd2F5cyByZXR1cm4gZmFsc2UuXHJcbiAqL1xyXG5jb25zdCBOTyA9ICgpID0+IGZhbHNlO1xyXG5jb25zdCBvblJFID0gL15vblteYS16XS87XHJcbmNvbnN0IGlzT24gPSAoa2V5KSA9PiBvblJFLnRlc3Qoa2V5KTtcclxuY29uc3QgaXNNb2RlbExpc3RlbmVyID0gKGtleSkgPT4ga2V5LnN0YXJ0c1dpdGgoJ29uVXBkYXRlOicpO1xyXG5jb25zdCBleHRlbmQgPSBPYmplY3QuYXNzaWduO1xyXG5jb25zdCByZW1vdmUgPSAoYXJyLCBlbCkgPT4ge1xyXG4gICAgY29uc3QgaSA9IGFyci5pbmRleE9mKGVsKTtcclxuICAgIGlmIChpID4gLTEpIHtcclxuICAgICAgICBhcnIuc3BsaWNlKGksIDEpO1xyXG4gICAgfVxyXG59O1xyXG5jb25zdCBoYXNPd25Qcm9wZXJ0eSA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7XHJcbmNvbnN0IGhhc093biA9ICh2YWwsIGtleSkgPT4gaGFzT3duUHJvcGVydHkuY2FsbCh2YWwsIGtleSk7XHJcbmNvbnN0IGlzQXJyYXkgPSBBcnJheS5pc0FycmF5O1xyXG5jb25zdCBpc01hcCA9ICh2YWwpID0+IHRvVHlwZVN0cmluZyh2YWwpID09PSAnW29iamVjdCBNYXBdJztcclxuY29uc3QgaXNTZXQgPSAodmFsKSA9PiB0b1R5cGVTdHJpbmcodmFsKSA9PT0gJ1tvYmplY3QgU2V0XSc7XHJcbmNvbnN0IGlzRGF0ZSA9ICh2YWwpID0+IHZhbCBpbnN0YW5jZW9mIERhdGU7XHJcbmNvbnN0IGlzRnVuY3Rpb24gPSAodmFsKSA9PiB0eXBlb2YgdmFsID09PSAnZnVuY3Rpb24nO1xyXG5jb25zdCBpc1N0cmluZyA9ICh2YWwpID0+IHR5cGVvZiB2YWwgPT09ICdzdHJpbmcnO1xyXG5jb25zdCBpc1N5bWJvbCA9ICh2YWwpID0+IHR5cGVvZiB2YWwgPT09ICdzeW1ib2wnO1xyXG5jb25zdCBpc09iamVjdCA9ICh2YWwpID0+IHZhbCAhPT0gbnVsbCAmJiB0eXBlb2YgdmFsID09PSAnb2JqZWN0JztcclxuY29uc3QgaXNQcm9taXNlID0gKHZhbCkgPT4ge1xyXG4gICAgcmV0dXJuIGlzT2JqZWN0KHZhbCkgJiYgaXNGdW5jdGlvbih2YWwudGhlbikgJiYgaXNGdW5jdGlvbih2YWwuY2F0Y2gpO1xyXG59O1xyXG5jb25zdCBvYmplY3RUb1N0cmluZyA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmc7XHJcbmNvbnN0IHRvVHlwZVN0cmluZyA9ICh2YWx1ZSkgPT4gb2JqZWN0VG9TdHJpbmcuY2FsbCh2YWx1ZSk7XHJcbmNvbnN0IHRvUmF3VHlwZSA9ICh2YWx1ZSkgPT4ge1xyXG4gICAgLy8gZXh0cmFjdCBcIlJhd1R5cGVcIiBmcm9tIHN0cmluZ3MgbGlrZSBcIltvYmplY3QgUmF3VHlwZV1cIlxyXG4gICAgcmV0dXJuIHRvVHlwZVN0cmluZyh2YWx1ZSkuc2xpY2UoOCwgLTEpO1xyXG59O1xyXG5jb25zdCBpc1BsYWluT2JqZWN0ID0gKHZhbCkgPT4gdG9UeXBlU3RyaW5nKHZhbCkgPT09ICdbb2JqZWN0IE9iamVjdF0nO1xyXG5jb25zdCBpc0ludGVnZXJLZXkgPSAoa2V5KSA9PiBpc1N0cmluZyhrZXkpICYmXHJcbiAgICBrZXkgIT09ICdOYU4nICYmXHJcbiAgICBrZXlbMF0gIT09ICctJyAmJlxyXG4gICAgJycgKyBwYXJzZUludChrZXksIDEwKSA9PT0ga2V5O1xyXG5jb25zdCBpc1Jlc2VydmVkUHJvcCA9IC8qI19fUFVSRV9fKi8gbWFrZU1hcChcclxuLy8gdGhlIGxlYWRpbmcgY29tbWEgaXMgaW50ZW50aW9uYWwgc28gZW1wdHkgc3RyaW5nIFwiXCIgaXMgYWxzbyBpbmNsdWRlZFxyXG4nLGtleSxyZWYscmVmX2ZvcixyZWZfa2V5LCcgK1xyXG4gICAgJ29uVm5vZGVCZWZvcmVNb3VudCxvblZub2RlTW91bnRlZCwnICtcclxuICAgICdvblZub2RlQmVmb3JlVXBkYXRlLG9uVm5vZGVVcGRhdGVkLCcgK1xyXG4gICAgJ29uVm5vZGVCZWZvcmVVbm1vdW50LG9uVm5vZGVVbm1vdW50ZWQnKTtcclxuY29uc3QgaXNCdWlsdEluRGlyZWN0aXZlID0gLyojX19QVVJFX18qLyBtYWtlTWFwKCdiaW5kLGNsb2FrLGVsc2UtaWYsZWxzZSxmb3IsaHRtbCxpZixtb2RlbCxvbixvbmNlLHByZSxzaG93LHNsb3QsdGV4dCxtZW1vJyk7XHJcbmNvbnN0IGNhY2hlU3RyaW5nRnVuY3Rpb24gPSAoZm4pID0+IHtcclxuICAgIGNvbnN0IGNhY2hlID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcclxuICAgIHJldHVybiAoKHN0cikgPT4ge1xyXG4gICAgICAgIGNvbnN0IGhpdCA9IGNhY2hlW3N0cl07XHJcbiAgICAgICAgcmV0dXJuIGhpdCB8fCAoY2FjaGVbc3RyXSA9IGZuKHN0cikpO1xyXG4gICAgfSk7XHJcbn07XHJcbmNvbnN0IGNhbWVsaXplUkUgPSAvLShcXHcpL2c7XHJcbi8qKlxyXG4gKiBAcHJpdmF0ZVxyXG4gKi9cclxuY29uc3QgY2FtZWxpemUgPSBjYWNoZVN0cmluZ0Z1bmN0aW9uKChzdHIpID0+IHtcclxuICAgIHJldHVybiBzdHIucmVwbGFjZShjYW1lbGl6ZVJFLCAoXywgYykgPT4gKGMgPyBjLnRvVXBwZXJDYXNlKCkgOiAnJykpO1xyXG59KTtcclxuY29uc3QgaHlwaGVuYXRlUkUgPSAvXFxCKFtBLVpdKS9nO1xyXG4vKipcclxuICogQHByaXZhdGVcclxuICovXHJcbmNvbnN0IGh5cGhlbmF0ZSA9IGNhY2hlU3RyaW5nRnVuY3Rpb24oKHN0cikgPT4gc3RyLnJlcGxhY2UoaHlwaGVuYXRlUkUsICctJDEnKS50b0xvd2VyQ2FzZSgpKTtcclxuLyoqXHJcbiAqIEBwcml2YXRlXHJcbiAqL1xyXG5jb25zdCBjYXBpdGFsaXplID0gY2FjaGVTdHJpbmdGdW5jdGlvbigoc3RyKSA9PiBzdHIuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBzdHIuc2xpY2UoMSkpO1xyXG4vKipcclxuICogQHByaXZhdGVcclxuICovXHJcbmNvbnN0IHRvSGFuZGxlcktleSA9IGNhY2hlU3RyaW5nRnVuY3Rpb24oKHN0cikgPT4gc3RyID8gYG9uJHtjYXBpdGFsaXplKHN0cil9YCA6IGBgKTtcclxuLy8gY29tcGFyZSB3aGV0aGVyIGEgdmFsdWUgaGFzIGNoYW5nZWQsIGFjY291bnRpbmcgZm9yIE5hTi5cclxuY29uc3QgaGFzQ2hhbmdlZCA9ICh2YWx1ZSwgb2xkVmFsdWUpID0+ICFPYmplY3QuaXModmFsdWUsIG9sZFZhbHVlKTtcclxuY29uc3QgaW52b2tlQXJyYXlGbnMgPSAoZm5zLCBhcmcpID0+IHtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZm5zLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgZm5zW2ldKGFyZyk7XHJcbiAgICB9XHJcbn07XHJcbmNvbnN0IGRlZiA9IChvYmosIGtleSwgdmFsdWUpID0+IHtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwge1xyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcclxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcclxuICAgICAgICB2YWx1ZVxyXG4gICAgfSk7XHJcbn07XHJcbmNvbnN0IHRvTnVtYmVyID0gKHZhbCkgPT4ge1xyXG4gICAgY29uc3QgbiA9IHBhcnNlRmxvYXQodmFsKTtcclxuICAgIHJldHVybiBpc05hTihuKSA/IHZhbCA6IG47XHJcbn07XHJcbmxldCBfZ2xvYmFsVGhpcztcclxuY29uc3QgZ2V0R2xvYmFsVGhpcyA9ICgpID0+IHtcclxuICAgIHJldHVybiAoX2dsb2JhbFRoaXMgfHxcclxuICAgICAgICAoX2dsb2JhbFRoaXMgPVxyXG4gICAgICAgICAgICB0eXBlb2YgZ2xvYmFsVGhpcyAhPT0gJ3VuZGVmaW5lZCdcclxuICAgICAgICAgICAgICAgID8gZ2xvYmFsVGhpc1xyXG4gICAgICAgICAgICAgICAgOiB0eXBlb2Ygc2VsZiAhPT0gJ3VuZGVmaW5lZCdcclxuICAgICAgICAgICAgICAgICAgICA/IHNlbGZcclxuICAgICAgICAgICAgICAgICAgICA6IHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgID8gd2luZG93XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDogdHlwZW9mIGdsb2JhbCAhPT0gJ3VuZGVmaW5lZCdcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gZ2xvYmFsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHt9KSk7XHJcbn07XG5cbmV4cG9ydCB7IEVNUFRZX0FSUiwgRU1QVFlfT0JKLCBOTywgTk9PUCwgUGF0Y2hGbGFnTmFtZXMsIGNhbWVsaXplLCBjYXBpdGFsaXplLCBkZWYsIGVzY2FwZUh0bWwsIGVzY2FwZUh0bWxDb21tZW50LCBleHRlbmQsIGdlbmVyYXRlQ29kZUZyYW1lLCBnZXRHbG9iYWxUaGlzLCBoYXNDaGFuZ2VkLCBoYXNPd24sIGh5cGhlbmF0ZSwgaW5jbHVkZUJvb2xlYW5BdHRyLCBpbnZva2VBcnJheUZucywgaXNBcnJheSwgaXNCb29sZWFuQXR0ciwgaXNCdWlsdEluRGlyZWN0aXZlLCBpc0RhdGUsIGlzRnVuY3Rpb24sIGlzR2xvYmFsbHlXaGl0ZWxpc3RlZCwgaXNIVE1MVGFnLCBpc0ludGVnZXJLZXksIGlzS25vd25IdG1sQXR0ciwgaXNLbm93blN2Z0F0dHIsIGlzTWFwLCBpc01vZGVsTGlzdGVuZXIsIGlzTm9Vbml0TnVtZXJpY1N0eWxlUHJvcCwgaXNPYmplY3QsIGlzT24sIGlzUGxhaW5PYmplY3QsIGlzUHJvbWlzZSwgaXNSZXNlcnZlZFByb3AsIGlzU1NSU2FmZUF0dHJOYW1lLCBpc1NWR1RhZywgaXNTZXQsIGlzU3BlY2lhbEJvb2xlYW5BdHRyLCBpc1N0cmluZywgaXNTeW1ib2wsIGlzVm9pZFRhZywgbG9vc2VFcXVhbCwgbG9vc2VJbmRleE9mLCBtYWtlTWFwLCBub3JtYWxpemVDbGFzcywgbm9ybWFsaXplUHJvcHMsIG5vcm1hbGl6ZVN0eWxlLCBvYmplY3RUb1N0cmluZywgcGFyc2VTdHJpbmdTdHlsZSwgcHJvcHNUb0F0dHJNYXAsIHJlbW92ZSwgc2xvdEZsYWdzVGV4dCwgc3RyaW5naWZ5U3R5bGUsIHRvRGlzcGxheVN0cmluZywgdG9IYW5kbGVyS2V5LCB0b051bWJlciwgdG9SYXdUeXBlLCB0b1R5cGVTdHJpbmcgfTtcbiIsImltcG9ydCB7IGV4dGVuZCwgaXNBcnJheSwgaXNNYXAsIGlzSW50ZWdlcktleSwgaGFzT3duLCBpc1N5bWJvbCwgaXNPYmplY3QsIGhhc0NoYW5nZWQsIG1ha2VNYXAsIGNhcGl0YWxpemUsIHRvUmF3VHlwZSwgZGVmLCBpc0Z1bmN0aW9uLCBOT09QIH0gZnJvbSAnQHZ1ZS9zaGFyZWQnO1xuXG5mdW5jdGlvbiB3YXJuKG1zZywgLi4uYXJncykge1xyXG4gICAgY29uc29sZS53YXJuKGBbVnVlIHdhcm5dICR7bXNnfWAsIC4uLmFyZ3MpO1xyXG59XG5cbmxldCBhY3RpdmVFZmZlY3RTY29wZTtcclxuY2xhc3MgRWZmZWN0U2NvcGUge1xyXG4gICAgY29uc3RydWN0b3IoZGV0YWNoZWQgPSBmYWxzZSkge1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBpbnRlcm5hbFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuYWN0aXZlID0gdHJ1ZTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAaW50ZXJuYWxcclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLmVmZmVjdHMgPSBbXTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAaW50ZXJuYWxcclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLmNsZWFudXBzID0gW107XHJcbiAgICAgICAgaWYgKCFkZXRhY2hlZCAmJiBhY3RpdmVFZmZlY3RTY29wZSkge1xyXG4gICAgICAgICAgICB0aGlzLnBhcmVudCA9IGFjdGl2ZUVmZmVjdFNjb3BlO1xyXG4gICAgICAgICAgICB0aGlzLmluZGV4ID1cclxuICAgICAgICAgICAgICAgIChhY3RpdmVFZmZlY3RTY29wZS5zY29wZXMgfHwgKGFjdGl2ZUVmZmVjdFNjb3BlLnNjb3BlcyA9IFtdKSkucHVzaCh0aGlzKSAtIDE7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcnVuKGZuKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuYWN0aXZlKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRFZmZlY3RTY29wZSA9IGFjdGl2ZUVmZmVjdFNjb3BlO1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgYWN0aXZlRWZmZWN0U2NvcGUgPSB0aGlzO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZuKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZmluYWxseSB7XHJcbiAgICAgICAgICAgICAgICBhY3RpdmVFZmZlY3RTY29wZSA9IGN1cnJlbnRFZmZlY3RTY29wZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcclxuICAgICAgICAgICAgd2FybihgY2Fubm90IHJ1biBhbiBpbmFjdGl2ZSBlZmZlY3Qgc2NvcGUuYCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGlzIHNob3VsZCBvbmx5IGJlIGNhbGxlZCBvbiBub24tZGV0YWNoZWQgc2NvcGVzXHJcbiAgICAgKiBAaW50ZXJuYWxcclxuICAgICAqL1xyXG4gICAgb24oKSB7XHJcbiAgICAgICAgYWN0aXZlRWZmZWN0U2NvcGUgPSB0aGlzO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGlzIHNob3VsZCBvbmx5IGJlIGNhbGxlZCBvbiBub24tZGV0YWNoZWQgc2NvcGVzXHJcbiAgICAgKiBAaW50ZXJuYWxcclxuICAgICAqL1xyXG4gICAgb2ZmKCkge1xyXG4gICAgICAgIGFjdGl2ZUVmZmVjdFNjb3BlID0gdGhpcy5wYXJlbnQ7XHJcbiAgICB9XHJcbiAgICBzdG9wKGZyb21QYXJlbnQpIHtcclxuICAgICAgICBpZiAodGhpcy5hY3RpdmUpIHtcclxuICAgICAgICAgICAgbGV0IGksIGw7XHJcbiAgICAgICAgICAgIGZvciAoaSA9IDAsIGwgPSB0aGlzLmVmZmVjdHMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmVmZmVjdHNbaV0uc3RvcCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGZvciAoaSA9IDAsIGwgPSB0aGlzLmNsZWFudXBzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jbGVhbnVwc1tpXSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnNjb3Blcykge1xyXG4gICAgICAgICAgICAgICAgZm9yIChpID0gMCwgbCA9IHRoaXMuc2NvcGVzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2NvcGVzW2ldLnN0b3AodHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gbmVzdGVkIHNjb3BlLCBkZXJlZmVyZW5jZSBmcm9tIHBhcmVudCB0byBhdm9pZCBtZW1vcnkgbGVha3NcclxuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50ICYmICFmcm9tUGFyZW50KSB7XHJcbiAgICAgICAgICAgICAgICAvLyBvcHRpbWl6ZWQgTygxKSByZW1vdmFsXHJcbiAgICAgICAgICAgICAgICBjb25zdCBsYXN0ID0gdGhpcy5wYXJlbnQuc2NvcGVzLnBvcCgpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGxhc3QgJiYgbGFzdCAhPT0gdGhpcykge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LnNjb3Blc1t0aGlzLmluZGV4XSA9IGxhc3Q7XHJcbiAgICAgICAgICAgICAgICAgICAgbGFzdC5pbmRleCA9IHRoaXMuaW5kZXg7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5hY3RpdmUgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gZWZmZWN0U2NvcGUoZGV0YWNoZWQpIHtcclxuICAgIHJldHVybiBuZXcgRWZmZWN0U2NvcGUoZGV0YWNoZWQpO1xyXG59XHJcbmZ1bmN0aW9uIHJlY29yZEVmZmVjdFNjb3BlKGVmZmVjdCwgc2NvcGUgPSBhY3RpdmVFZmZlY3RTY29wZSkge1xyXG4gICAgaWYgKHNjb3BlICYmIHNjb3BlLmFjdGl2ZSkge1xyXG4gICAgICAgIHNjb3BlLmVmZmVjdHMucHVzaChlZmZlY3QpO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIGdldEN1cnJlbnRTY29wZSgpIHtcclxuICAgIHJldHVybiBhY3RpdmVFZmZlY3RTY29wZTtcclxufVxyXG5mdW5jdGlvbiBvblNjb3BlRGlzcG9zZShmbikge1xyXG4gICAgaWYgKGFjdGl2ZUVmZmVjdFNjb3BlKSB7XHJcbiAgICAgICAgYWN0aXZlRWZmZWN0U2NvcGUuY2xlYW51cHMucHVzaChmbik7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcclxuICAgICAgICB3YXJuKGBvblNjb3BlRGlzcG9zZSgpIGlzIGNhbGxlZCB3aGVuIHRoZXJlIGlzIG5vIGFjdGl2ZSBlZmZlY3Qgc2NvcGVgICtcclxuICAgICAgICAgICAgYCB0byBiZSBhc3NvY2lhdGVkIHdpdGguYCk7XHJcbiAgICB9XHJcbn1cblxuY29uc3QgY3JlYXRlRGVwID0gKGVmZmVjdHMpID0+IHtcclxuICAgIGNvbnN0IGRlcCA9IG5ldyBTZXQoZWZmZWN0cyk7XHJcbiAgICBkZXAudyA9IDA7XHJcbiAgICBkZXAubiA9IDA7XHJcbiAgICByZXR1cm4gZGVwO1xyXG59O1xyXG5jb25zdCB3YXNUcmFja2VkID0gKGRlcCkgPT4gKGRlcC53ICYgdHJhY2tPcEJpdCkgPiAwO1xyXG5jb25zdCBuZXdUcmFja2VkID0gKGRlcCkgPT4gKGRlcC5uICYgdHJhY2tPcEJpdCkgPiAwO1xyXG5jb25zdCBpbml0RGVwTWFya2VycyA9ICh7IGRlcHMgfSkgPT4ge1xyXG4gICAgaWYgKGRlcHMubGVuZ3RoKSB7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkZXBzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGRlcHNbaV0udyB8PSB0cmFja09wQml0OyAvLyBzZXQgd2FzIHRyYWNrZWRcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn07XHJcbmNvbnN0IGZpbmFsaXplRGVwTWFya2VycyA9IChlZmZlY3QpID0+IHtcclxuICAgIGNvbnN0IHsgZGVwcyB9ID0gZWZmZWN0O1xyXG4gICAgaWYgKGRlcHMubGVuZ3RoKSB7XHJcbiAgICAgICAgbGV0IHB0ciA9IDA7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkZXBzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGRlcCA9IGRlcHNbaV07XHJcbiAgICAgICAgICAgIGlmICh3YXNUcmFja2VkKGRlcCkgJiYgIW5ld1RyYWNrZWQoZGVwKSkge1xyXG4gICAgICAgICAgICAgICAgZGVwLmRlbGV0ZShlZmZlY3QpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgZGVwc1twdHIrK10gPSBkZXA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gY2xlYXIgYml0c1xyXG4gICAgICAgICAgICBkZXAudyAmPSB+dHJhY2tPcEJpdDtcclxuICAgICAgICAgICAgZGVwLm4gJj0gfnRyYWNrT3BCaXQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGRlcHMubGVuZ3RoID0gcHRyO1xyXG4gICAgfVxyXG59O1xuXG5jb25zdCB0YXJnZXRNYXAgPSBuZXcgV2Vha01hcCgpO1xyXG4vLyBUaGUgbnVtYmVyIG9mIGVmZmVjdHMgY3VycmVudGx5IGJlaW5nIHRyYWNrZWQgcmVjdXJzaXZlbHkuXHJcbmxldCBlZmZlY3RUcmFja0RlcHRoID0gMDtcclxubGV0IHRyYWNrT3BCaXQgPSAxO1xyXG4vKipcclxuICogVGhlIGJpdHdpc2UgdHJhY2sgbWFya2VycyBzdXBwb3J0IGF0IG1vc3QgMzAgbGV2ZWxzIG9mIHJlY3Vyc2lvbi5cclxuICogVGhpcyB2YWx1ZSBpcyBjaG9zZW4gdG8gZW5hYmxlIG1vZGVybiBKUyBlbmdpbmVzIHRvIHVzZSBhIFNNSSBvbiBhbGwgcGxhdGZvcm1zLlxyXG4gKiBXaGVuIHJlY3Vyc2lvbiBkZXB0aCBpcyBncmVhdGVyLCBmYWxsIGJhY2sgdG8gdXNpbmcgYSBmdWxsIGNsZWFudXAuXHJcbiAqL1xyXG5jb25zdCBtYXhNYXJrZXJCaXRzID0gMzA7XHJcbmxldCBhY3RpdmVFZmZlY3Q7XHJcbmNvbnN0IElURVJBVEVfS0VZID0gU3ltYm9sKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSA/ICdpdGVyYXRlJyA6ICcnKTtcclxuY29uc3QgTUFQX0tFWV9JVEVSQVRFX0tFWSA9IFN5bWJvbCgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgPyAnTWFwIGtleSBpdGVyYXRlJyA6ICcnKTtcclxuY2xhc3MgUmVhY3RpdmVFZmZlY3Qge1xyXG4gICAgY29uc3RydWN0b3IoZm4sIHNjaGVkdWxlciA9IG51bGwsIHNjb3BlKSB7XHJcbiAgICAgICAgdGhpcy5mbiA9IGZuO1xyXG4gICAgICAgIHRoaXMuc2NoZWR1bGVyID0gc2NoZWR1bGVyO1xyXG4gICAgICAgIHRoaXMuYWN0aXZlID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLmRlcHMgPSBbXTtcclxuICAgICAgICB0aGlzLnBhcmVudCA9IHVuZGVmaW5lZDtcclxuICAgICAgICByZWNvcmRFZmZlY3RTY29wZSh0aGlzLCBzY29wZSk7XHJcbiAgICB9XHJcbiAgICBydW4oKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmFjdGl2ZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5mbigpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgcGFyZW50ID0gYWN0aXZlRWZmZWN0O1xyXG4gICAgICAgIGxldCBsYXN0U2hvdWxkVHJhY2sgPSBzaG91bGRUcmFjaztcclxuICAgICAgICB3aGlsZSAocGFyZW50KSB7XHJcbiAgICAgICAgICAgIGlmIChwYXJlbnQgPT09IHRoaXMpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBwYXJlbnQgPSBwYXJlbnQucGFyZW50O1xyXG4gICAgICAgIH1cclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICB0aGlzLnBhcmVudCA9IGFjdGl2ZUVmZmVjdDtcclxuICAgICAgICAgICAgYWN0aXZlRWZmZWN0ID0gdGhpcztcclxuICAgICAgICAgICAgc2hvdWxkVHJhY2sgPSB0cnVlO1xyXG4gICAgICAgICAgICB0cmFja09wQml0ID0gMSA8PCArK2VmZmVjdFRyYWNrRGVwdGg7XHJcbiAgICAgICAgICAgIGlmIChlZmZlY3RUcmFja0RlcHRoIDw9IG1heE1hcmtlckJpdHMpIHtcclxuICAgICAgICAgICAgICAgIGluaXREZXBNYXJrZXJzKHRoaXMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgY2xlYW51cEVmZmVjdCh0aGlzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5mbigpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmaW5hbGx5IHtcclxuICAgICAgICAgICAgaWYgKGVmZmVjdFRyYWNrRGVwdGggPD0gbWF4TWFya2VyQml0cykge1xyXG4gICAgICAgICAgICAgICAgZmluYWxpemVEZXBNYXJrZXJzKHRoaXMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRyYWNrT3BCaXQgPSAxIDw8IC0tZWZmZWN0VHJhY2tEZXB0aDtcclxuICAgICAgICAgICAgYWN0aXZlRWZmZWN0ID0gdGhpcy5wYXJlbnQ7XHJcbiAgICAgICAgICAgIHNob3VsZFRyYWNrID0gbGFzdFNob3VsZFRyYWNrO1xyXG4gICAgICAgICAgICB0aGlzLnBhcmVudCA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgaWYgKHRoaXMuZGVmZXJTdG9wKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnN0b3AoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHN0b3AoKSB7XHJcbiAgICAgICAgLy8gc3RvcHBlZCB3aGlsZSBydW5uaW5nIGl0c2VsZiAtIGRlZmVyIHRoZSBjbGVhbnVwXHJcbiAgICAgICAgaWYgKGFjdGl2ZUVmZmVjdCA9PT0gdGhpcykge1xyXG4gICAgICAgICAgICB0aGlzLmRlZmVyU3RvcCA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHRoaXMuYWN0aXZlKSB7XHJcbiAgICAgICAgICAgIGNsZWFudXBFZmZlY3QodGhpcyk7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLm9uU3RvcCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vblN0b3AoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLmFjdGl2ZSA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBjbGVhbnVwRWZmZWN0KGVmZmVjdCkge1xyXG4gICAgY29uc3QgeyBkZXBzIH0gPSBlZmZlY3Q7XHJcbiAgICBpZiAoZGVwcy5sZW5ndGgpIHtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRlcHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgZGVwc1tpXS5kZWxldGUoZWZmZWN0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZGVwcy5sZW5ndGggPSAwO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIGVmZmVjdChmbiwgb3B0aW9ucykge1xyXG4gICAgaWYgKGZuLmVmZmVjdCkge1xyXG4gICAgICAgIGZuID0gZm4uZWZmZWN0LmZuO1xyXG4gICAgfVxyXG4gICAgY29uc3QgX2VmZmVjdCA9IG5ldyBSZWFjdGl2ZUVmZmVjdChmbik7XHJcbiAgICBpZiAob3B0aW9ucykge1xyXG4gICAgICAgIGV4dGVuZChfZWZmZWN0LCBvcHRpb25zKTtcclxuICAgICAgICBpZiAob3B0aW9ucy5zY29wZSlcclxuICAgICAgICAgICAgcmVjb3JkRWZmZWN0U2NvcGUoX2VmZmVjdCwgb3B0aW9ucy5zY29wZSk7XHJcbiAgICB9XHJcbiAgICBpZiAoIW9wdGlvbnMgfHwgIW9wdGlvbnMubGF6eSkge1xyXG4gICAgICAgIF9lZmZlY3QucnVuKCk7XHJcbiAgICB9XHJcbiAgICBjb25zdCBydW5uZXIgPSBfZWZmZWN0LnJ1bi5iaW5kKF9lZmZlY3QpO1xyXG4gICAgcnVubmVyLmVmZmVjdCA9IF9lZmZlY3Q7XHJcbiAgICByZXR1cm4gcnVubmVyO1xyXG59XHJcbmZ1bmN0aW9uIHN0b3AocnVubmVyKSB7XHJcbiAgICBydW5uZXIuZWZmZWN0LnN0b3AoKTtcclxufVxyXG5sZXQgc2hvdWxkVHJhY2sgPSB0cnVlO1xyXG5jb25zdCB0cmFja1N0YWNrID0gW107XHJcbmZ1bmN0aW9uIHBhdXNlVHJhY2tpbmcoKSB7XHJcbiAgICB0cmFja1N0YWNrLnB1c2goc2hvdWxkVHJhY2spO1xyXG4gICAgc2hvdWxkVHJhY2sgPSBmYWxzZTtcclxufVxyXG5mdW5jdGlvbiBlbmFibGVUcmFja2luZygpIHtcclxuICAgIHRyYWNrU3RhY2sucHVzaChzaG91bGRUcmFjayk7XHJcbiAgICBzaG91bGRUcmFjayA9IHRydWU7XHJcbn1cclxuZnVuY3Rpb24gcmVzZXRUcmFja2luZygpIHtcclxuICAgIGNvbnN0IGxhc3QgPSB0cmFja1N0YWNrLnBvcCgpO1xyXG4gICAgc2hvdWxkVHJhY2sgPSBsYXN0ID09PSB1bmRlZmluZWQgPyB0cnVlIDogbGFzdDtcclxufVxyXG5mdW5jdGlvbiB0cmFjayh0YXJnZXQsIHR5cGUsIGtleSkge1xyXG4gICAgaWYgKHNob3VsZFRyYWNrICYmIGFjdGl2ZUVmZmVjdCkge1xyXG4gICAgICAgIGxldCBkZXBzTWFwID0gdGFyZ2V0TWFwLmdldCh0YXJnZXQpO1xyXG4gICAgICAgIGlmICghZGVwc01hcCkge1xyXG4gICAgICAgICAgICB0YXJnZXRNYXAuc2V0KHRhcmdldCwgKGRlcHNNYXAgPSBuZXcgTWFwKCkpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IGRlcCA9IGRlcHNNYXAuZ2V0KGtleSk7XHJcbiAgICAgICAgaWYgKCFkZXApIHtcclxuICAgICAgICAgICAgZGVwc01hcC5zZXQoa2V5LCAoZGVwID0gY3JlYXRlRGVwKCkpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgZXZlbnRJbmZvID0gKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpXHJcbiAgICAgICAgICAgID8geyBlZmZlY3Q6IGFjdGl2ZUVmZmVjdCwgdGFyZ2V0LCB0eXBlLCBrZXkgfVxyXG4gICAgICAgICAgICA6IHVuZGVmaW5lZDtcclxuICAgICAgICB0cmFja0VmZmVjdHMoZGVwLCBldmVudEluZm8pO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIHRyYWNrRWZmZWN0cyhkZXAsIGRlYnVnZ2VyRXZlbnRFeHRyYUluZm8pIHtcclxuICAgIGxldCBzaG91bGRUcmFjayA9IGZhbHNlO1xyXG4gICAgaWYgKGVmZmVjdFRyYWNrRGVwdGggPD0gbWF4TWFya2VyQml0cykge1xyXG4gICAgICAgIGlmICghbmV3VHJhY2tlZChkZXApKSB7XHJcbiAgICAgICAgICAgIGRlcC5uIHw9IHRyYWNrT3BCaXQ7IC8vIHNldCBuZXdseSB0cmFja2VkXHJcbiAgICAgICAgICAgIHNob3VsZFRyYWNrID0gIXdhc1RyYWNrZWQoZGVwKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICAvLyBGdWxsIGNsZWFudXAgbW9kZS5cclxuICAgICAgICBzaG91bGRUcmFjayA9ICFkZXAuaGFzKGFjdGl2ZUVmZmVjdCk7XHJcbiAgICB9XHJcbiAgICBpZiAoc2hvdWxkVHJhY2spIHtcclxuICAgICAgICBkZXAuYWRkKGFjdGl2ZUVmZmVjdCk7XHJcbiAgICAgICAgYWN0aXZlRWZmZWN0LmRlcHMucHVzaChkZXApO1xyXG4gICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgYWN0aXZlRWZmZWN0Lm9uVHJhY2spIHtcclxuICAgICAgICAgICAgYWN0aXZlRWZmZWN0Lm9uVHJhY2soT2JqZWN0LmFzc2lnbih7IGVmZmVjdDogYWN0aXZlRWZmZWN0IH0sIGRlYnVnZ2VyRXZlbnRFeHRyYUluZm8pKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gdHJpZ2dlcih0YXJnZXQsIHR5cGUsIGtleSwgbmV3VmFsdWUsIG9sZFZhbHVlLCBvbGRUYXJnZXQpIHtcclxuICAgIGNvbnN0IGRlcHNNYXAgPSB0YXJnZXRNYXAuZ2V0KHRhcmdldCk7XHJcbiAgICBpZiAoIWRlcHNNYXApIHtcclxuICAgICAgICAvLyBuZXZlciBiZWVuIHRyYWNrZWRcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBsZXQgZGVwcyA9IFtdO1xyXG4gICAgaWYgKHR5cGUgPT09IFwiY2xlYXJcIiAvKiBDTEVBUiAqLykge1xyXG4gICAgICAgIC8vIGNvbGxlY3Rpb24gYmVpbmcgY2xlYXJlZFxyXG4gICAgICAgIC8vIHRyaWdnZXIgYWxsIGVmZmVjdHMgZm9yIHRhcmdldFxyXG4gICAgICAgIGRlcHMgPSBbLi4uZGVwc01hcC52YWx1ZXMoKV07XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChrZXkgPT09ICdsZW5ndGgnICYmIGlzQXJyYXkodGFyZ2V0KSkge1xyXG4gICAgICAgIGRlcHNNYXAuZm9yRWFjaCgoZGVwLCBrZXkpID0+IHtcclxuICAgICAgICAgICAgaWYgKGtleSA9PT0gJ2xlbmd0aCcgfHwga2V5ID49IG5ld1ZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICBkZXBzLnB1c2goZGVwKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgLy8gc2NoZWR1bGUgcnVucyBmb3IgU0VUIHwgQUREIHwgREVMRVRFXHJcbiAgICAgICAgaWYgKGtleSAhPT0gdm9pZCAwKSB7XHJcbiAgICAgICAgICAgIGRlcHMucHVzaChkZXBzTWFwLmdldChrZXkpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gYWxzbyBydW4gZm9yIGl0ZXJhdGlvbiBrZXkgb24gQUREIHwgREVMRVRFIHwgTWFwLlNFVFxyXG4gICAgICAgIHN3aXRjaCAodHlwZSkge1xyXG4gICAgICAgICAgICBjYXNlIFwiYWRkXCIgLyogQUREICovOlxyXG4gICAgICAgICAgICAgICAgaWYgKCFpc0FycmF5KHRhcmdldCkpIHtcclxuICAgICAgICAgICAgICAgICAgICBkZXBzLnB1c2goZGVwc01hcC5nZXQoSVRFUkFURV9LRVkpKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaXNNYXAodGFyZ2V0KSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZXBzLnB1c2goZGVwc01hcC5nZXQoTUFQX0tFWV9JVEVSQVRFX0tFWSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGlzSW50ZWdlcktleShrZXkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gbmV3IGluZGV4IGFkZGVkIHRvIGFycmF5IC0+IGxlbmd0aCBjaGFuZ2VzXHJcbiAgICAgICAgICAgICAgICAgICAgZGVwcy5wdXNoKGRlcHNNYXAuZ2V0KCdsZW5ndGgnKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBcImRlbGV0ZVwiIC8qIERFTEVURSAqLzpcclxuICAgICAgICAgICAgICAgIGlmICghaXNBcnJheSh0YXJnZXQpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVwcy5wdXNoKGRlcHNNYXAuZ2V0KElURVJBVEVfS0VZKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzTWFwKHRhcmdldCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVwcy5wdXNoKGRlcHNNYXAuZ2V0KE1BUF9LRVlfSVRFUkFURV9LRVkpKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBcInNldFwiIC8qIFNFVCAqLzpcclxuICAgICAgICAgICAgICAgIGlmIChpc01hcCh0YXJnZXQpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVwcy5wdXNoKGRlcHNNYXAuZ2V0KElURVJBVEVfS0VZKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBjb25zdCBldmVudEluZm8gPSAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJylcclxuICAgICAgICA/IHsgdGFyZ2V0LCB0eXBlLCBrZXksIG5ld1ZhbHVlLCBvbGRWYWx1ZSwgb2xkVGFyZ2V0IH1cclxuICAgICAgICA6IHVuZGVmaW5lZDtcclxuICAgIGlmIChkZXBzLmxlbmd0aCA9PT0gMSkge1xyXG4gICAgICAgIGlmIChkZXBzWzBdKSB7XHJcbiAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcclxuICAgICAgICAgICAgICAgIHRyaWdnZXJFZmZlY3RzKGRlcHNbMF0sIGV2ZW50SW5mbyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0cmlnZ2VyRWZmZWN0cyhkZXBzWzBdKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIGNvbnN0IGVmZmVjdHMgPSBbXTtcclxuICAgICAgICBmb3IgKGNvbnN0IGRlcCBvZiBkZXBzKSB7XHJcbiAgICAgICAgICAgIGlmIChkZXApIHtcclxuICAgICAgICAgICAgICAgIGVmZmVjdHMucHVzaCguLi5kZXApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcclxuICAgICAgICAgICAgdHJpZ2dlckVmZmVjdHMoY3JlYXRlRGVwKGVmZmVjdHMpLCBldmVudEluZm8pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdHJpZ2dlckVmZmVjdHMoY3JlYXRlRGVwKGVmZmVjdHMpKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gdHJpZ2dlckVmZmVjdHMoZGVwLCBkZWJ1Z2dlckV2ZW50RXh0cmFJbmZvKSB7XHJcbiAgICAvLyBzcHJlYWQgaW50byBhcnJheSBmb3Igc3RhYmlsaXphdGlvblxyXG4gICAgZm9yIChjb25zdCBlZmZlY3Qgb2YgaXNBcnJheShkZXApID8gZGVwIDogWy4uLmRlcF0pIHtcclxuICAgICAgICBpZiAoZWZmZWN0ICE9PSBhY3RpdmVFZmZlY3QgfHwgZWZmZWN0LmFsbG93UmVjdXJzZSkge1xyXG4gICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmIGVmZmVjdC5vblRyaWdnZXIpIHtcclxuICAgICAgICAgICAgICAgIGVmZmVjdC5vblRyaWdnZXIoZXh0ZW5kKHsgZWZmZWN0IH0sIGRlYnVnZ2VyRXZlbnRFeHRyYUluZm8pKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoZWZmZWN0LnNjaGVkdWxlcikge1xyXG4gICAgICAgICAgICAgICAgZWZmZWN0LnNjaGVkdWxlcigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgZWZmZWN0LnJ1bigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XG5cbmNvbnN0IGlzTm9uVHJhY2thYmxlS2V5cyA9IC8qI19fUFVSRV9fKi8gbWFrZU1hcChgX19wcm90b19fLF9fdl9pc1JlZixfX2lzVnVlYCk7XHJcbmNvbnN0IGJ1aWx0SW5TeW1ib2xzID0gbmV3IFNldChcclxuLyojX19QVVJFX18qL1xyXG5PYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhTeW1ib2wpXHJcbiAgICAubWFwKGtleSA9PiBTeW1ib2xba2V5XSlcclxuICAgIC5maWx0ZXIoaXNTeW1ib2wpKTtcclxuY29uc3QgZ2V0ID0gLyojX19QVVJFX18qLyBjcmVhdGVHZXR0ZXIoKTtcclxuY29uc3Qgc2hhbGxvd0dldCA9IC8qI19fUFVSRV9fKi8gY3JlYXRlR2V0dGVyKGZhbHNlLCB0cnVlKTtcclxuY29uc3QgcmVhZG9ubHlHZXQgPSAvKiNfX1BVUkVfXyovIGNyZWF0ZUdldHRlcih0cnVlKTtcclxuY29uc3Qgc2hhbGxvd1JlYWRvbmx5R2V0ID0gLyojX19QVVJFX18qLyBjcmVhdGVHZXR0ZXIodHJ1ZSwgdHJ1ZSk7XHJcbmNvbnN0IGFycmF5SW5zdHJ1bWVudGF0aW9ucyA9IC8qI19fUFVSRV9fKi8gY3JlYXRlQXJyYXlJbnN0cnVtZW50YXRpb25zKCk7XHJcbmZ1bmN0aW9uIGNyZWF0ZUFycmF5SW5zdHJ1bWVudGF0aW9ucygpIHtcclxuICAgIGNvbnN0IGluc3RydW1lbnRhdGlvbnMgPSB7fTtcclxuICAgIFsnaW5jbHVkZXMnLCAnaW5kZXhPZicsICdsYXN0SW5kZXhPZiddLmZvckVhY2goa2V5ID0+IHtcclxuICAgICAgICBpbnN0cnVtZW50YXRpb25zW2tleV0gPSBmdW5jdGlvbiAoLi4uYXJncykge1xyXG4gICAgICAgICAgICBjb25zdCBhcnIgPSB0b1Jhdyh0aGlzKTtcclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDAsIGwgPSB0aGlzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgdHJhY2soYXJyLCBcImdldFwiIC8qIEdFVCAqLywgaSArICcnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyB3ZSBydW4gdGhlIG1ldGhvZCB1c2luZyB0aGUgb3JpZ2luYWwgYXJncyBmaXJzdCAod2hpY2ggbWF5IGJlIHJlYWN0aXZlKVxyXG4gICAgICAgICAgICBjb25zdCByZXMgPSBhcnJba2V5XSguLi5hcmdzKTtcclxuICAgICAgICAgICAgaWYgKHJlcyA9PT0gLTEgfHwgcmVzID09PSBmYWxzZSkge1xyXG4gICAgICAgICAgICAgICAgLy8gaWYgdGhhdCBkaWRuJ3Qgd29yaywgcnVuIGl0IGFnYWluIHVzaW5nIHJhdyB2YWx1ZXMuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gYXJyW2tleV0oLi4uYXJncy5tYXAodG9SYXcpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXM7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgfSk7XHJcbiAgICBbJ3B1c2gnLCAncG9wJywgJ3NoaWZ0JywgJ3Vuc2hpZnQnLCAnc3BsaWNlJ10uZm9yRWFjaChrZXkgPT4ge1xyXG4gICAgICAgIGluc3RydW1lbnRhdGlvbnNba2V5XSA9IGZ1bmN0aW9uICguLi5hcmdzKSB7XHJcbiAgICAgICAgICAgIHBhdXNlVHJhY2tpbmcoKTtcclxuICAgICAgICAgICAgY29uc3QgcmVzID0gdG9SYXcodGhpcylba2V5XS5hcHBseSh0aGlzLCBhcmdzKTtcclxuICAgICAgICAgICAgcmVzZXRUcmFja2luZygpO1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzO1xyXG4gICAgICAgIH07XHJcbiAgICB9KTtcclxuICAgIHJldHVybiBpbnN0cnVtZW50YXRpb25zO1xyXG59XHJcbmZ1bmN0aW9uIGNyZWF0ZUdldHRlcihpc1JlYWRvbmx5ID0gZmFsc2UsIHNoYWxsb3cgPSBmYWxzZSkge1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uIGdldCh0YXJnZXQsIGtleSwgcmVjZWl2ZXIpIHtcclxuICAgICAgICBpZiAoa2V5ID09PSBcIl9fdl9pc1JlYWN0aXZlXCIgLyogSVNfUkVBQ1RJVkUgKi8pIHtcclxuICAgICAgICAgICAgcmV0dXJuICFpc1JlYWRvbmx5O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChrZXkgPT09IFwiX192X2lzUmVhZG9ubHlcIiAvKiBJU19SRUFET05MWSAqLykge1xyXG4gICAgICAgICAgICByZXR1cm4gaXNSZWFkb25seTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoa2V5ID09PSBcIl9fdl9pc1NoYWxsb3dcIiAvKiBJU19TSEFMTE9XICovKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBzaGFsbG93O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChrZXkgPT09IFwiX192X3Jhd1wiIC8qIFJBVyAqLyAmJlxyXG4gICAgICAgICAgICByZWNlaXZlciA9PT1cclxuICAgICAgICAgICAgICAgIChpc1JlYWRvbmx5XHJcbiAgICAgICAgICAgICAgICAgICAgPyBzaGFsbG93XHJcbiAgICAgICAgICAgICAgICAgICAgICAgID8gc2hhbGxvd1JlYWRvbmx5TWFwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDogcmVhZG9ubHlNYXBcclxuICAgICAgICAgICAgICAgICAgICA6IHNoYWxsb3dcclxuICAgICAgICAgICAgICAgICAgICAgICAgPyBzaGFsbG93UmVhY3RpdmVNYXBcclxuICAgICAgICAgICAgICAgICAgICAgICAgOiByZWFjdGl2ZU1hcCkuZ2V0KHRhcmdldCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRhcmdldDtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgdGFyZ2V0SXNBcnJheSA9IGlzQXJyYXkodGFyZ2V0KTtcclxuICAgICAgICBpZiAoIWlzUmVhZG9ubHkgJiYgdGFyZ2V0SXNBcnJheSAmJiBoYXNPd24oYXJyYXlJbnN0cnVtZW50YXRpb25zLCBrZXkpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBSZWZsZWN0LmdldChhcnJheUluc3RydW1lbnRhdGlvbnMsIGtleSwgcmVjZWl2ZXIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCByZXMgPSBSZWZsZWN0LmdldCh0YXJnZXQsIGtleSwgcmVjZWl2ZXIpO1xyXG4gICAgICAgIGlmIChpc1N5bWJvbChrZXkpID8gYnVpbHRJblN5bWJvbHMuaGFzKGtleSkgOiBpc05vblRyYWNrYWJsZUtleXMoa2V5KSkge1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIWlzUmVhZG9ubHkpIHtcclxuICAgICAgICAgICAgdHJhY2sodGFyZ2V0LCBcImdldFwiIC8qIEdFVCAqLywga2V5KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHNoYWxsb3cpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHJlcztcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGlzUmVmKHJlcykpIHtcclxuICAgICAgICAgICAgLy8gcmVmIHVud3JhcHBpbmcgLSBkb2VzIG5vdCBhcHBseSBmb3IgQXJyYXkgKyBpbnRlZ2VyIGtleS5cclxuICAgICAgICAgICAgY29uc3Qgc2hvdWxkVW53cmFwID0gIXRhcmdldElzQXJyYXkgfHwgIWlzSW50ZWdlcktleShrZXkpO1xyXG4gICAgICAgICAgICByZXR1cm4gc2hvdWxkVW53cmFwID8gcmVzLnZhbHVlIDogcmVzO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoaXNPYmplY3QocmVzKSkge1xyXG4gICAgICAgICAgICAvLyBDb252ZXJ0IHJldHVybmVkIHZhbHVlIGludG8gYSBwcm94eSBhcyB3ZWxsLiB3ZSBkbyB0aGUgaXNPYmplY3QgY2hlY2tcclxuICAgICAgICAgICAgLy8gaGVyZSB0byBhdm9pZCBpbnZhbGlkIHZhbHVlIHdhcm5pbmcuIEFsc28gbmVlZCB0byBsYXp5IGFjY2VzcyByZWFkb25seVxyXG4gICAgICAgICAgICAvLyBhbmQgcmVhY3RpdmUgaGVyZSB0byBhdm9pZCBjaXJjdWxhciBkZXBlbmRlbmN5LlxyXG4gICAgICAgICAgICByZXR1cm4gaXNSZWFkb25seSA/IHJlYWRvbmx5KHJlcykgOiByZWFjdGl2ZShyZXMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcmVzO1xyXG4gICAgfTtcclxufVxyXG5jb25zdCBzZXQgPSAvKiNfX1BVUkVfXyovIGNyZWF0ZVNldHRlcigpO1xyXG5jb25zdCBzaGFsbG93U2V0ID0gLyojX19QVVJFX18qLyBjcmVhdGVTZXR0ZXIodHJ1ZSk7XHJcbmZ1bmN0aW9uIGNyZWF0ZVNldHRlcihzaGFsbG93ID0gZmFsc2UpIHtcclxuICAgIHJldHVybiBmdW5jdGlvbiBzZXQodGFyZ2V0LCBrZXksIHZhbHVlLCByZWNlaXZlcikge1xyXG4gICAgICAgIGxldCBvbGRWYWx1ZSA9IHRhcmdldFtrZXldO1xyXG4gICAgICAgIGlmIChpc1JlYWRvbmx5KG9sZFZhbHVlKSAmJiBpc1JlZihvbGRWYWx1ZSkgJiYgIWlzUmVmKHZhbHVlKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghc2hhbGxvdyAmJiAhaXNSZWFkb25seSh2YWx1ZSkpIHtcclxuICAgICAgICAgICAgaWYgKCFpc1NoYWxsb3codmFsdWUpKSB7XHJcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IHRvUmF3KHZhbHVlKTtcclxuICAgICAgICAgICAgICAgIG9sZFZhbHVlID0gdG9SYXcob2xkVmFsdWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICghaXNBcnJheSh0YXJnZXQpICYmIGlzUmVmKG9sZFZhbHVlKSAmJiAhaXNSZWYodmFsdWUpKSB7XHJcbiAgICAgICAgICAgICAgICBvbGRWYWx1ZS52YWx1ZSA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgaGFkS2V5ID0gaXNBcnJheSh0YXJnZXQpICYmIGlzSW50ZWdlcktleShrZXkpXHJcbiAgICAgICAgICAgID8gTnVtYmVyKGtleSkgPCB0YXJnZXQubGVuZ3RoXHJcbiAgICAgICAgICAgIDogaGFzT3duKHRhcmdldCwga2V5KTtcclxuICAgICAgICBjb25zdCByZXN1bHQgPSBSZWZsZWN0LnNldCh0YXJnZXQsIGtleSwgdmFsdWUsIHJlY2VpdmVyKTtcclxuICAgICAgICAvLyBkb24ndCB0cmlnZ2VyIGlmIHRhcmdldCBpcyBzb21ldGhpbmcgdXAgaW4gdGhlIHByb3RvdHlwZSBjaGFpbiBvZiBvcmlnaW5hbFxyXG4gICAgICAgIGlmICh0YXJnZXQgPT09IHRvUmF3KHJlY2VpdmVyKSkge1xyXG4gICAgICAgICAgICBpZiAoIWhhZEtleSkge1xyXG4gICAgICAgICAgICAgICAgdHJpZ2dlcih0YXJnZXQsIFwiYWRkXCIgLyogQUREICovLCBrZXksIHZhbHVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChoYXNDaGFuZ2VkKHZhbHVlLCBvbGRWYWx1ZSkpIHtcclxuICAgICAgICAgICAgICAgIHRyaWdnZXIodGFyZ2V0LCBcInNldFwiIC8qIFNFVCAqLywga2V5LCB2YWx1ZSwgb2xkVmFsdWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9O1xyXG59XHJcbmZ1bmN0aW9uIGRlbGV0ZVByb3BlcnR5KHRhcmdldCwga2V5KSB7XHJcbiAgICBjb25zdCBoYWRLZXkgPSBoYXNPd24odGFyZ2V0LCBrZXkpO1xyXG4gICAgY29uc3Qgb2xkVmFsdWUgPSB0YXJnZXRba2V5XTtcclxuICAgIGNvbnN0IHJlc3VsdCA9IFJlZmxlY3QuZGVsZXRlUHJvcGVydHkodGFyZ2V0LCBrZXkpO1xyXG4gICAgaWYgKHJlc3VsdCAmJiBoYWRLZXkpIHtcclxuICAgICAgICB0cmlnZ2VyKHRhcmdldCwgXCJkZWxldGVcIiAvKiBERUxFVEUgKi8sIGtleSwgdW5kZWZpbmVkLCBvbGRWYWx1ZSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG59XHJcbmZ1bmN0aW9uIGhhcyh0YXJnZXQsIGtleSkge1xyXG4gICAgY29uc3QgcmVzdWx0ID0gUmVmbGVjdC5oYXModGFyZ2V0LCBrZXkpO1xyXG4gICAgaWYgKCFpc1N5bWJvbChrZXkpIHx8ICFidWlsdEluU3ltYm9scy5oYXMoa2V5KSkge1xyXG4gICAgICAgIHRyYWNrKHRhcmdldCwgXCJoYXNcIiAvKiBIQVMgKi8sIGtleSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG59XHJcbmZ1bmN0aW9uIG93bktleXModGFyZ2V0KSB7XHJcbiAgICB0cmFjayh0YXJnZXQsIFwiaXRlcmF0ZVwiIC8qIElURVJBVEUgKi8sIGlzQXJyYXkodGFyZ2V0KSA/ICdsZW5ndGgnIDogSVRFUkFURV9LRVkpO1xyXG4gICAgcmV0dXJuIFJlZmxlY3Qub3duS2V5cyh0YXJnZXQpO1xyXG59XHJcbmNvbnN0IG11dGFibGVIYW5kbGVycyA9IHtcclxuICAgIGdldCxcclxuICAgIHNldCxcclxuICAgIGRlbGV0ZVByb3BlcnR5LFxyXG4gICAgaGFzLFxyXG4gICAgb3duS2V5c1xyXG59O1xyXG5jb25zdCByZWFkb25seUhhbmRsZXJzID0ge1xyXG4gICAgZ2V0OiByZWFkb25seUdldCxcclxuICAgIHNldCh0YXJnZXQsIGtleSkge1xyXG4gICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcclxuICAgICAgICAgICAgd2FybihgU2V0IG9wZXJhdGlvbiBvbiBrZXkgXCIke1N0cmluZyhrZXkpfVwiIGZhaWxlZDogdGFyZ2V0IGlzIHJlYWRvbmx5LmAsIHRhcmdldCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfSxcclxuICAgIGRlbGV0ZVByb3BlcnR5KHRhcmdldCwga2V5KSB7XHJcbiAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xyXG4gICAgICAgICAgICB3YXJuKGBEZWxldGUgb3BlcmF0aW9uIG9uIGtleSBcIiR7U3RyaW5nKGtleSl9XCIgZmFpbGVkOiB0YXJnZXQgaXMgcmVhZG9ubHkuYCwgdGFyZ2V0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcbn07XHJcbmNvbnN0IHNoYWxsb3dSZWFjdGl2ZUhhbmRsZXJzID0gLyojX19QVVJFX18qLyBleHRlbmQoe30sIG11dGFibGVIYW5kbGVycywge1xyXG4gICAgZ2V0OiBzaGFsbG93R2V0LFxyXG4gICAgc2V0OiBzaGFsbG93U2V0XHJcbn0pO1xyXG4vLyBQcm9wcyBoYW5kbGVycyBhcmUgc3BlY2lhbCBpbiB0aGUgc2Vuc2UgdGhhdCBpdCBzaG91bGQgbm90IHVud3JhcCB0b3AtbGV2ZWxcclxuLy8gcmVmcyAoaW4gb3JkZXIgdG8gYWxsb3cgcmVmcyB0byBiZSBleHBsaWNpdGx5IHBhc3NlZCBkb3duKSwgYnV0IHNob3VsZFxyXG4vLyByZXRhaW4gdGhlIHJlYWN0aXZpdHkgb2YgdGhlIG5vcm1hbCByZWFkb25seSBvYmplY3QuXHJcbmNvbnN0IHNoYWxsb3dSZWFkb25seUhhbmRsZXJzID0gLyojX19QVVJFX18qLyBleHRlbmQoe30sIHJlYWRvbmx5SGFuZGxlcnMsIHtcclxuICAgIGdldDogc2hhbGxvd1JlYWRvbmx5R2V0XHJcbn0pO1xuXG5jb25zdCB0b1NoYWxsb3cgPSAodmFsdWUpID0+IHZhbHVlO1xyXG5jb25zdCBnZXRQcm90byA9ICh2KSA9PiBSZWZsZWN0LmdldFByb3RvdHlwZU9mKHYpO1xyXG5mdW5jdGlvbiBnZXQkMSh0YXJnZXQsIGtleSwgaXNSZWFkb25seSA9IGZhbHNlLCBpc1NoYWxsb3cgPSBmYWxzZSkge1xyXG4gICAgLy8gIzE3NzI6IHJlYWRvbmx5KHJlYWN0aXZlKE1hcCkpIHNob3VsZCByZXR1cm4gcmVhZG9ubHkgKyByZWFjdGl2ZSB2ZXJzaW9uXHJcbiAgICAvLyBvZiB0aGUgdmFsdWVcclxuICAgIHRhcmdldCA9IHRhcmdldFtcIl9fdl9yYXdcIiAvKiBSQVcgKi9dO1xyXG4gICAgY29uc3QgcmF3VGFyZ2V0ID0gdG9SYXcodGFyZ2V0KTtcclxuICAgIGNvbnN0IHJhd0tleSA9IHRvUmF3KGtleSk7XHJcbiAgICBpZiAoa2V5ICE9PSByYXdLZXkpIHtcclxuICAgICAgICAhaXNSZWFkb25seSAmJiB0cmFjayhyYXdUYXJnZXQsIFwiZ2V0XCIgLyogR0VUICovLCBrZXkpO1xyXG4gICAgfVxyXG4gICAgIWlzUmVhZG9ubHkgJiYgdHJhY2socmF3VGFyZ2V0LCBcImdldFwiIC8qIEdFVCAqLywgcmF3S2V5KTtcclxuICAgIGNvbnN0IHsgaGFzIH0gPSBnZXRQcm90byhyYXdUYXJnZXQpO1xyXG4gICAgY29uc3Qgd3JhcCA9IGlzU2hhbGxvdyA/IHRvU2hhbGxvdyA6IGlzUmVhZG9ubHkgPyB0b1JlYWRvbmx5IDogdG9SZWFjdGl2ZTtcclxuICAgIGlmIChoYXMuY2FsbChyYXdUYXJnZXQsIGtleSkpIHtcclxuICAgICAgICByZXR1cm4gd3JhcCh0YXJnZXQuZ2V0KGtleSkpO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoaGFzLmNhbGwocmF3VGFyZ2V0LCByYXdLZXkpKSB7XHJcbiAgICAgICAgcmV0dXJuIHdyYXAodGFyZ2V0LmdldChyYXdLZXkpKTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKHRhcmdldCAhPT0gcmF3VGFyZ2V0KSB7XHJcbiAgICAgICAgLy8gIzM2MDIgcmVhZG9ubHkocmVhY3RpdmUoTWFwKSlcclxuICAgICAgICAvLyBlbnN1cmUgdGhhdCB0aGUgbmVzdGVkIHJlYWN0aXZlIGBNYXBgIGNhbiBkbyB0cmFja2luZyBmb3IgaXRzZWxmXHJcbiAgICAgICAgdGFyZ2V0LmdldChrZXkpO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIGhhcyQxKGtleSwgaXNSZWFkb25seSA9IGZhbHNlKSB7XHJcbiAgICBjb25zdCB0YXJnZXQgPSB0aGlzW1wiX192X3Jhd1wiIC8qIFJBVyAqL107XHJcbiAgICBjb25zdCByYXdUYXJnZXQgPSB0b1Jhdyh0YXJnZXQpO1xyXG4gICAgY29uc3QgcmF3S2V5ID0gdG9SYXcoa2V5KTtcclxuICAgIGlmIChrZXkgIT09IHJhd0tleSkge1xyXG4gICAgICAgICFpc1JlYWRvbmx5ICYmIHRyYWNrKHJhd1RhcmdldCwgXCJoYXNcIiAvKiBIQVMgKi8sIGtleSk7XHJcbiAgICB9XHJcbiAgICAhaXNSZWFkb25seSAmJiB0cmFjayhyYXdUYXJnZXQsIFwiaGFzXCIgLyogSEFTICovLCByYXdLZXkpO1xyXG4gICAgcmV0dXJuIGtleSA9PT0gcmF3S2V5XHJcbiAgICAgICAgPyB0YXJnZXQuaGFzKGtleSlcclxuICAgICAgICA6IHRhcmdldC5oYXMoa2V5KSB8fCB0YXJnZXQuaGFzKHJhd0tleSk7XHJcbn1cclxuZnVuY3Rpb24gc2l6ZSh0YXJnZXQsIGlzUmVhZG9ubHkgPSBmYWxzZSkge1xyXG4gICAgdGFyZ2V0ID0gdGFyZ2V0W1wiX192X3Jhd1wiIC8qIFJBVyAqL107XHJcbiAgICAhaXNSZWFkb25seSAmJiB0cmFjayh0b1Jhdyh0YXJnZXQpLCBcIml0ZXJhdGVcIiAvKiBJVEVSQVRFICovLCBJVEVSQVRFX0tFWSk7XHJcbiAgICByZXR1cm4gUmVmbGVjdC5nZXQodGFyZ2V0LCAnc2l6ZScsIHRhcmdldCk7XHJcbn1cclxuZnVuY3Rpb24gYWRkKHZhbHVlKSB7XHJcbiAgICB2YWx1ZSA9IHRvUmF3KHZhbHVlKTtcclxuICAgIGNvbnN0IHRhcmdldCA9IHRvUmF3KHRoaXMpO1xyXG4gICAgY29uc3QgcHJvdG8gPSBnZXRQcm90byh0YXJnZXQpO1xyXG4gICAgY29uc3QgaGFkS2V5ID0gcHJvdG8uaGFzLmNhbGwodGFyZ2V0LCB2YWx1ZSk7XHJcbiAgICBpZiAoIWhhZEtleSkge1xyXG4gICAgICAgIHRhcmdldC5hZGQodmFsdWUpO1xyXG4gICAgICAgIHRyaWdnZXIodGFyZ2V0LCBcImFkZFwiIC8qIEFERCAqLywgdmFsdWUsIHZhbHVlKTtcclxuICAgIH1cclxuICAgIHJldHVybiB0aGlzO1xyXG59XHJcbmZ1bmN0aW9uIHNldCQxKGtleSwgdmFsdWUpIHtcclxuICAgIHZhbHVlID0gdG9SYXcodmFsdWUpO1xyXG4gICAgY29uc3QgdGFyZ2V0ID0gdG9SYXcodGhpcyk7XHJcbiAgICBjb25zdCB7IGhhcywgZ2V0IH0gPSBnZXRQcm90byh0YXJnZXQpO1xyXG4gICAgbGV0IGhhZEtleSA9IGhhcy5jYWxsKHRhcmdldCwga2V5KTtcclxuICAgIGlmICghaGFkS2V5KSB7XHJcbiAgICAgICAga2V5ID0gdG9SYXcoa2V5KTtcclxuICAgICAgICBoYWRLZXkgPSBoYXMuY2FsbCh0YXJnZXQsIGtleSk7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcclxuICAgICAgICBjaGVja0lkZW50aXR5S2V5cyh0YXJnZXQsIGhhcywga2V5KTtcclxuICAgIH1cclxuICAgIGNvbnN0IG9sZFZhbHVlID0gZ2V0LmNhbGwodGFyZ2V0LCBrZXkpO1xyXG4gICAgdGFyZ2V0LnNldChrZXksIHZhbHVlKTtcclxuICAgIGlmICghaGFkS2V5KSB7XHJcbiAgICAgICAgdHJpZ2dlcih0YXJnZXQsIFwiYWRkXCIgLyogQUREICovLCBrZXksIHZhbHVlKTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKGhhc0NoYW5nZWQodmFsdWUsIG9sZFZhbHVlKSkge1xyXG4gICAgICAgIHRyaWdnZXIodGFyZ2V0LCBcInNldFwiIC8qIFNFVCAqLywga2V5LCB2YWx1ZSwgb2xkVmFsdWUpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRoaXM7XHJcbn1cclxuZnVuY3Rpb24gZGVsZXRlRW50cnkoa2V5KSB7XHJcbiAgICBjb25zdCB0YXJnZXQgPSB0b1Jhdyh0aGlzKTtcclxuICAgIGNvbnN0IHsgaGFzLCBnZXQgfSA9IGdldFByb3RvKHRhcmdldCk7XHJcbiAgICBsZXQgaGFkS2V5ID0gaGFzLmNhbGwodGFyZ2V0LCBrZXkpO1xyXG4gICAgaWYgKCFoYWRLZXkpIHtcclxuICAgICAgICBrZXkgPSB0b1JhdyhrZXkpO1xyXG4gICAgICAgIGhhZEtleSA9IGhhcy5jYWxsKHRhcmdldCwga2V5KTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xyXG4gICAgICAgIGNoZWNrSWRlbnRpdHlLZXlzKHRhcmdldCwgaGFzLCBrZXkpO1xyXG4gICAgfVxyXG4gICAgY29uc3Qgb2xkVmFsdWUgPSBnZXQgPyBnZXQuY2FsbCh0YXJnZXQsIGtleSkgOiB1bmRlZmluZWQ7XHJcbiAgICAvLyBmb3J3YXJkIHRoZSBvcGVyYXRpb24gYmVmb3JlIHF1ZXVlaW5nIHJlYWN0aW9uc1xyXG4gICAgY29uc3QgcmVzdWx0ID0gdGFyZ2V0LmRlbGV0ZShrZXkpO1xyXG4gICAgaWYgKGhhZEtleSkge1xyXG4gICAgICAgIHRyaWdnZXIodGFyZ2V0LCBcImRlbGV0ZVwiIC8qIERFTEVURSAqLywga2V5LCB1bmRlZmluZWQsIG9sZFZhbHVlKTtcclxuICAgIH1cclxuICAgIHJldHVybiByZXN1bHQ7XHJcbn1cclxuZnVuY3Rpb24gY2xlYXIoKSB7XHJcbiAgICBjb25zdCB0YXJnZXQgPSB0b1Jhdyh0aGlzKTtcclxuICAgIGNvbnN0IGhhZEl0ZW1zID0gdGFyZ2V0LnNpemUgIT09IDA7XHJcbiAgICBjb25zdCBvbGRUYXJnZXQgPSAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJylcclxuICAgICAgICA/IGlzTWFwKHRhcmdldClcclxuICAgICAgICAgICAgPyBuZXcgTWFwKHRhcmdldClcclxuICAgICAgICAgICAgOiBuZXcgU2V0KHRhcmdldClcclxuICAgICAgICA6IHVuZGVmaW5lZDtcclxuICAgIC8vIGZvcndhcmQgdGhlIG9wZXJhdGlvbiBiZWZvcmUgcXVldWVpbmcgcmVhY3Rpb25zXHJcbiAgICBjb25zdCByZXN1bHQgPSB0YXJnZXQuY2xlYXIoKTtcclxuICAgIGlmIChoYWRJdGVtcykge1xyXG4gICAgICAgIHRyaWdnZXIodGFyZ2V0LCBcImNsZWFyXCIgLyogQ0xFQVIgKi8sIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBvbGRUYXJnZXQpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxufVxyXG5mdW5jdGlvbiBjcmVhdGVGb3JFYWNoKGlzUmVhZG9ubHksIGlzU2hhbGxvdykge1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uIGZvckVhY2goY2FsbGJhY2ssIHRoaXNBcmcpIHtcclxuICAgICAgICBjb25zdCBvYnNlcnZlZCA9IHRoaXM7XHJcbiAgICAgICAgY29uc3QgdGFyZ2V0ID0gb2JzZXJ2ZWRbXCJfX3ZfcmF3XCIgLyogUkFXICovXTtcclxuICAgICAgICBjb25zdCByYXdUYXJnZXQgPSB0b1Jhdyh0YXJnZXQpO1xyXG4gICAgICAgIGNvbnN0IHdyYXAgPSBpc1NoYWxsb3cgPyB0b1NoYWxsb3cgOiBpc1JlYWRvbmx5ID8gdG9SZWFkb25seSA6IHRvUmVhY3RpdmU7XHJcbiAgICAgICAgIWlzUmVhZG9ubHkgJiYgdHJhY2socmF3VGFyZ2V0LCBcIml0ZXJhdGVcIiAvKiBJVEVSQVRFICovLCBJVEVSQVRFX0tFWSk7XHJcbiAgICAgICAgcmV0dXJuIHRhcmdldC5mb3JFYWNoKCh2YWx1ZSwga2V5KSA9PiB7XHJcbiAgICAgICAgICAgIC8vIGltcG9ydGFudDogbWFrZSBzdXJlIHRoZSBjYWxsYmFjayBpc1xyXG4gICAgICAgICAgICAvLyAxLiBpbnZva2VkIHdpdGggdGhlIHJlYWN0aXZlIG1hcCBhcyBgdGhpc2AgYW5kIDNyZCBhcmdcclxuICAgICAgICAgICAgLy8gMi4gdGhlIHZhbHVlIHJlY2VpdmVkIHNob3VsZCBiZSBhIGNvcnJlc3BvbmRpbmcgcmVhY3RpdmUvcmVhZG9ubHkuXHJcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjay5jYWxsKHRoaXNBcmcsIHdyYXAodmFsdWUpLCB3cmFwKGtleSksIG9ic2VydmVkKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbn1cclxuZnVuY3Rpb24gY3JlYXRlSXRlcmFibGVNZXRob2QobWV0aG9kLCBpc1JlYWRvbmx5LCBpc1NoYWxsb3cpIHtcclxuICAgIHJldHVybiBmdW5jdGlvbiAoLi4uYXJncykge1xyXG4gICAgICAgIGNvbnN0IHRhcmdldCA9IHRoaXNbXCJfX3ZfcmF3XCIgLyogUkFXICovXTtcclxuICAgICAgICBjb25zdCByYXdUYXJnZXQgPSB0b1Jhdyh0YXJnZXQpO1xyXG4gICAgICAgIGNvbnN0IHRhcmdldElzTWFwID0gaXNNYXAocmF3VGFyZ2V0KTtcclxuICAgICAgICBjb25zdCBpc1BhaXIgPSBtZXRob2QgPT09ICdlbnRyaWVzJyB8fCAobWV0aG9kID09PSBTeW1ib2wuaXRlcmF0b3IgJiYgdGFyZ2V0SXNNYXApO1xyXG4gICAgICAgIGNvbnN0IGlzS2V5T25seSA9IG1ldGhvZCA9PT0gJ2tleXMnICYmIHRhcmdldElzTWFwO1xyXG4gICAgICAgIGNvbnN0IGlubmVySXRlcmF0b3IgPSB0YXJnZXRbbWV0aG9kXSguLi5hcmdzKTtcclxuICAgICAgICBjb25zdCB3cmFwID0gaXNTaGFsbG93ID8gdG9TaGFsbG93IDogaXNSZWFkb25seSA/IHRvUmVhZG9ubHkgOiB0b1JlYWN0aXZlO1xyXG4gICAgICAgICFpc1JlYWRvbmx5ICYmXHJcbiAgICAgICAgICAgIHRyYWNrKHJhd1RhcmdldCwgXCJpdGVyYXRlXCIgLyogSVRFUkFURSAqLywgaXNLZXlPbmx5ID8gTUFQX0tFWV9JVEVSQVRFX0tFWSA6IElURVJBVEVfS0VZKTtcclxuICAgICAgICAvLyByZXR1cm4gYSB3cmFwcGVkIGl0ZXJhdG9yIHdoaWNoIHJldHVybnMgb2JzZXJ2ZWQgdmVyc2lvbnMgb2YgdGhlXHJcbiAgICAgICAgLy8gdmFsdWVzIGVtaXR0ZWQgZnJvbSB0aGUgcmVhbCBpdGVyYXRvclxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIC8vIGl0ZXJhdG9yIHByb3RvY29sXHJcbiAgICAgICAgICAgIG5leHQoKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB7IHZhbHVlLCBkb25lIH0gPSBpbm5lckl0ZXJhdG9yLm5leHQoKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBkb25lXHJcbiAgICAgICAgICAgICAgICAgICAgPyB7IHZhbHVlLCBkb25lIH1cclxuICAgICAgICAgICAgICAgICAgICA6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGlzUGFpciA/IFt3cmFwKHZhbHVlWzBdKSwgd3JhcCh2YWx1ZVsxXSldIDogd3JhcCh2YWx1ZSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvbmVcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAvLyBpdGVyYWJsZSBwcm90b2NvbFxyXG4gICAgICAgICAgICBbU3ltYm9sLml0ZXJhdG9yXSgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgIH07XHJcbn1cclxuZnVuY3Rpb24gY3JlYXRlUmVhZG9ubHlNZXRob2QodHlwZSkge1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uICguLi5hcmdzKSB7XHJcbiAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xyXG4gICAgICAgICAgICBjb25zdCBrZXkgPSBhcmdzWzBdID8gYG9uIGtleSBcIiR7YXJnc1swXX1cIiBgIDogYGA7XHJcbiAgICAgICAgICAgIGNvbnNvbGUud2FybihgJHtjYXBpdGFsaXplKHR5cGUpfSBvcGVyYXRpb24gJHtrZXl9ZmFpbGVkOiB0YXJnZXQgaXMgcmVhZG9ubHkuYCwgdG9SYXcodGhpcykpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdHlwZSA9PT0gXCJkZWxldGVcIiAvKiBERUxFVEUgKi8gPyBmYWxzZSA6IHRoaXM7XHJcbiAgICB9O1xyXG59XHJcbmZ1bmN0aW9uIGNyZWF0ZUluc3RydW1lbnRhdGlvbnMoKSB7XHJcbiAgICBjb25zdCBtdXRhYmxlSW5zdHJ1bWVudGF0aW9ucyA9IHtcclxuICAgICAgICBnZXQoa2V5KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBnZXQkMSh0aGlzLCBrZXkpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZ2V0IHNpemUoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBzaXplKHRoaXMpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgaGFzOiBoYXMkMSxcclxuICAgICAgICBhZGQsXHJcbiAgICAgICAgc2V0OiBzZXQkMSxcclxuICAgICAgICBkZWxldGU6IGRlbGV0ZUVudHJ5LFxyXG4gICAgICAgIGNsZWFyLFxyXG4gICAgICAgIGZvckVhY2g6IGNyZWF0ZUZvckVhY2goZmFsc2UsIGZhbHNlKVxyXG4gICAgfTtcclxuICAgIGNvbnN0IHNoYWxsb3dJbnN0cnVtZW50YXRpb25zID0ge1xyXG4gICAgICAgIGdldChrZXkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGdldCQxKHRoaXMsIGtleSwgZmFsc2UsIHRydWUpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZ2V0IHNpemUoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBzaXplKHRoaXMpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgaGFzOiBoYXMkMSxcclxuICAgICAgICBhZGQsXHJcbiAgICAgICAgc2V0OiBzZXQkMSxcclxuICAgICAgICBkZWxldGU6IGRlbGV0ZUVudHJ5LFxyXG4gICAgICAgIGNsZWFyLFxyXG4gICAgICAgIGZvckVhY2g6IGNyZWF0ZUZvckVhY2goZmFsc2UsIHRydWUpXHJcbiAgICB9O1xyXG4gICAgY29uc3QgcmVhZG9ubHlJbnN0cnVtZW50YXRpb25zID0ge1xyXG4gICAgICAgIGdldChrZXkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGdldCQxKHRoaXMsIGtleSwgdHJ1ZSk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBnZXQgc2l6ZSgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHNpemUodGhpcywgdHJ1ZSk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBoYXMoa2V5KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBoYXMkMS5jYWxsKHRoaXMsIGtleSwgdHJ1ZSk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBhZGQ6IGNyZWF0ZVJlYWRvbmx5TWV0aG9kKFwiYWRkXCIgLyogQUREICovKSxcclxuICAgICAgICBzZXQ6IGNyZWF0ZVJlYWRvbmx5TWV0aG9kKFwic2V0XCIgLyogU0VUICovKSxcclxuICAgICAgICBkZWxldGU6IGNyZWF0ZVJlYWRvbmx5TWV0aG9kKFwiZGVsZXRlXCIgLyogREVMRVRFICovKSxcclxuICAgICAgICBjbGVhcjogY3JlYXRlUmVhZG9ubHlNZXRob2QoXCJjbGVhclwiIC8qIENMRUFSICovKSxcclxuICAgICAgICBmb3JFYWNoOiBjcmVhdGVGb3JFYWNoKHRydWUsIGZhbHNlKVxyXG4gICAgfTtcclxuICAgIGNvbnN0IHNoYWxsb3dSZWFkb25seUluc3RydW1lbnRhdGlvbnMgPSB7XHJcbiAgICAgICAgZ2V0KGtleSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZ2V0JDEodGhpcywga2V5LCB0cnVlLCB0cnVlKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGdldCBzaXplKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gc2l6ZSh0aGlzLCB0cnVlKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGhhcyhrZXkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGhhcyQxLmNhbGwodGhpcywga2V5LCB0cnVlKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGFkZDogY3JlYXRlUmVhZG9ubHlNZXRob2QoXCJhZGRcIiAvKiBBREQgKi8pLFxyXG4gICAgICAgIHNldDogY3JlYXRlUmVhZG9ubHlNZXRob2QoXCJzZXRcIiAvKiBTRVQgKi8pLFxyXG4gICAgICAgIGRlbGV0ZTogY3JlYXRlUmVhZG9ubHlNZXRob2QoXCJkZWxldGVcIiAvKiBERUxFVEUgKi8pLFxyXG4gICAgICAgIGNsZWFyOiBjcmVhdGVSZWFkb25seU1ldGhvZChcImNsZWFyXCIgLyogQ0xFQVIgKi8pLFxyXG4gICAgICAgIGZvckVhY2g6IGNyZWF0ZUZvckVhY2godHJ1ZSwgdHJ1ZSlcclxuICAgIH07XHJcbiAgICBjb25zdCBpdGVyYXRvck1ldGhvZHMgPSBbJ2tleXMnLCAndmFsdWVzJywgJ2VudHJpZXMnLCBTeW1ib2wuaXRlcmF0b3JdO1xyXG4gICAgaXRlcmF0b3JNZXRob2RzLmZvckVhY2gobWV0aG9kID0+IHtcclxuICAgICAgICBtdXRhYmxlSW5zdHJ1bWVudGF0aW9uc1ttZXRob2RdID0gY3JlYXRlSXRlcmFibGVNZXRob2QobWV0aG9kLCBmYWxzZSwgZmFsc2UpO1xyXG4gICAgICAgIHJlYWRvbmx5SW5zdHJ1bWVudGF0aW9uc1ttZXRob2RdID0gY3JlYXRlSXRlcmFibGVNZXRob2QobWV0aG9kLCB0cnVlLCBmYWxzZSk7XHJcbiAgICAgICAgc2hhbGxvd0luc3RydW1lbnRhdGlvbnNbbWV0aG9kXSA9IGNyZWF0ZUl0ZXJhYmxlTWV0aG9kKG1ldGhvZCwgZmFsc2UsIHRydWUpO1xyXG4gICAgICAgIHNoYWxsb3dSZWFkb25seUluc3RydW1lbnRhdGlvbnNbbWV0aG9kXSA9IGNyZWF0ZUl0ZXJhYmxlTWV0aG9kKG1ldGhvZCwgdHJ1ZSwgdHJ1ZSk7XHJcbiAgICB9KTtcclxuICAgIHJldHVybiBbXHJcbiAgICAgICAgbXV0YWJsZUluc3RydW1lbnRhdGlvbnMsXHJcbiAgICAgICAgcmVhZG9ubHlJbnN0cnVtZW50YXRpb25zLFxyXG4gICAgICAgIHNoYWxsb3dJbnN0cnVtZW50YXRpb25zLFxyXG4gICAgICAgIHNoYWxsb3dSZWFkb25seUluc3RydW1lbnRhdGlvbnNcclxuICAgIF07XHJcbn1cclxuY29uc3QgW211dGFibGVJbnN0cnVtZW50YXRpb25zLCByZWFkb25seUluc3RydW1lbnRhdGlvbnMsIHNoYWxsb3dJbnN0cnVtZW50YXRpb25zLCBzaGFsbG93UmVhZG9ubHlJbnN0cnVtZW50YXRpb25zXSA9IC8qICNfX1BVUkVfXyovIGNyZWF0ZUluc3RydW1lbnRhdGlvbnMoKTtcclxuZnVuY3Rpb24gY3JlYXRlSW5zdHJ1bWVudGF0aW9uR2V0dGVyKGlzUmVhZG9ubHksIHNoYWxsb3cpIHtcclxuICAgIGNvbnN0IGluc3RydW1lbnRhdGlvbnMgPSBzaGFsbG93XHJcbiAgICAgICAgPyBpc1JlYWRvbmx5XHJcbiAgICAgICAgICAgID8gc2hhbGxvd1JlYWRvbmx5SW5zdHJ1bWVudGF0aW9uc1xyXG4gICAgICAgICAgICA6IHNoYWxsb3dJbnN0cnVtZW50YXRpb25zXHJcbiAgICAgICAgOiBpc1JlYWRvbmx5XHJcbiAgICAgICAgICAgID8gcmVhZG9ubHlJbnN0cnVtZW50YXRpb25zXHJcbiAgICAgICAgICAgIDogbXV0YWJsZUluc3RydW1lbnRhdGlvbnM7XHJcbiAgICByZXR1cm4gKHRhcmdldCwga2V5LCByZWNlaXZlcikgPT4ge1xyXG4gICAgICAgIGlmIChrZXkgPT09IFwiX192X2lzUmVhY3RpdmVcIiAvKiBJU19SRUFDVElWRSAqLykge1xyXG4gICAgICAgICAgICByZXR1cm4gIWlzUmVhZG9ubHk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGtleSA9PT0gXCJfX3ZfaXNSZWFkb25seVwiIC8qIElTX1JFQURPTkxZICovKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBpc1JlYWRvbmx5O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChrZXkgPT09IFwiX192X3Jhd1wiIC8qIFJBVyAqLykge1xyXG4gICAgICAgICAgICByZXR1cm4gdGFyZ2V0O1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gUmVmbGVjdC5nZXQoaGFzT3duKGluc3RydW1lbnRhdGlvbnMsIGtleSkgJiYga2V5IGluIHRhcmdldFxyXG4gICAgICAgICAgICA/IGluc3RydW1lbnRhdGlvbnNcclxuICAgICAgICAgICAgOiB0YXJnZXQsIGtleSwgcmVjZWl2ZXIpO1xyXG4gICAgfTtcclxufVxyXG5jb25zdCBtdXRhYmxlQ29sbGVjdGlvbkhhbmRsZXJzID0ge1xyXG4gICAgZ2V0OiAvKiNfX1BVUkVfXyovIGNyZWF0ZUluc3RydW1lbnRhdGlvbkdldHRlcihmYWxzZSwgZmFsc2UpXHJcbn07XHJcbmNvbnN0IHNoYWxsb3dDb2xsZWN0aW9uSGFuZGxlcnMgPSB7XHJcbiAgICBnZXQ6IC8qI19fUFVSRV9fKi8gY3JlYXRlSW5zdHJ1bWVudGF0aW9uR2V0dGVyKGZhbHNlLCB0cnVlKVxyXG59O1xyXG5jb25zdCByZWFkb25seUNvbGxlY3Rpb25IYW5kbGVycyA9IHtcclxuICAgIGdldDogLyojX19QVVJFX18qLyBjcmVhdGVJbnN0cnVtZW50YXRpb25HZXR0ZXIodHJ1ZSwgZmFsc2UpXHJcbn07XHJcbmNvbnN0IHNoYWxsb3dSZWFkb25seUNvbGxlY3Rpb25IYW5kbGVycyA9IHtcclxuICAgIGdldDogLyojX19QVVJFX18qLyBjcmVhdGVJbnN0cnVtZW50YXRpb25HZXR0ZXIodHJ1ZSwgdHJ1ZSlcclxufTtcclxuZnVuY3Rpb24gY2hlY2tJZGVudGl0eUtleXModGFyZ2V0LCBoYXMsIGtleSkge1xyXG4gICAgY29uc3QgcmF3S2V5ID0gdG9SYXcoa2V5KTtcclxuICAgIGlmIChyYXdLZXkgIT09IGtleSAmJiBoYXMuY2FsbCh0YXJnZXQsIHJhd0tleSkpIHtcclxuICAgICAgICBjb25zdCB0eXBlID0gdG9SYXdUeXBlKHRhcmdldCk7XHJcbiAgICAgICAgY29uc29sZS53YXJuKGBSZWFjdGl2ZSAke3R5cGV9IGNvbnRhaW5zIGJvdGggdGhlIHJhdyBhbmQgcmVhY3RpdmUgYCArXHJcbiAgICAgICAgICAgIGB2ZXJzaW9ucyBvZiB0aGUgc2FtZSBvYmplY3Qke3R5cGUgPT09IGBNYXBgID8gYCBhcyBrZXlzYCA6IGBgfSwgYCArXHJcbiAgICAgICAgICAgIGB3aGljaCBjYW4gbGVhZCB0byBpbmNvbnNpc3RlbmNpZXMuIGAgK1xyXG4gICAgICAgICAgICBgQXZvaWQgZGlmZmVyZW50aWF0aW5nIGJldHdlZW4gdGhlIHJhdyBhbmQgcmVhY3RpdmUgdmVyc2lvbnMgYCArXHJcbiAgICAgICAgICAgIGBvZiBhbiBvYmplY3QgYW5kIG9ubHkgdXNlIHRoZSByZWFjdGl2ZSB2ZXJzaW9uIGlmIHBvc3NpYmxlLmApO1xyXG4gICAgfVxyXG59XG5cbmNvbnN0IHJlYWN0aXZlTWFwID0gbmV3IFdlYWtNYXAoKTtcclxuY29uc3Qgc2hhbGxvd1JlYWN0aXZlTWFwID0gbmV3IFdlYWtNYXAoKTtcclxuY29uc3QgcmVhZG9ubHlNYXAgPSBuZXcgV2Vha01hcCgpO1xyXG5jb25zdCBzaGFsbG93UmVhZG9ubHlNYXAgPSBuZXcgV2Vha01hcCgpO1xyXG5mdW5jdGlvbiB0YXJnZXRUeXBlTWFwKHJhd1R5cGUpIHtcclxuICAgIHN3aXRjaCAocmF3VHlwZSkge1xyXG4gICAgICAgIGNhc2UgJ09iamVjdCc6XHJcbiAgICAgICAgY2FzZSAnQXJyYXknOlxyXG4gICAgICAgICAgICByZXR1cm4gMSAvKiBDT01NT04gKi87XHJcbiAgICAgICAgY2FzZSAnTWFwJzpcclxuICAgICAgICBjYXNlICdTZXQnOlxyXG4gICAgICAgIGNhc2UgJ1dlYWtNYXAnOlxyXG4gICAgICAgIGNhc2UgJ1dlYWtTZXQnOlxyXG4gICAgICAgICAgICByZXR1cm4gMiAvKiBDT0xMRUNUSU9OICovO1xyXG4gICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgIHJldHVybiAwIC8qIElOVkFMSUQgKi87XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gZ2V0VGFyZ2V0VHlwZSh2YWx1ZSkge1xyXG4gICAgcmV0dXJuIHZhbHVlW1wiX192X3NraXBcIiAvKiBTS0lQICovXSB8fCAhT2JqZWN0LmlzRXh0ZW5zaWJsZSh2YWx1ZSlcclxuICAgICAgICA/IDAgLyogSU5WQUxJRCAqL1xyXG4gICAgICAgIDogdGFyZ2V0VHlwZU1hcCh0b1Jhd1R5cGUodmFsdWUpKTtcclxufVxyXG5mdW5jdGlvbiByZWFjdGl2ZSh0YXJnZXQpIHtcclxuICAgIC8vIGlmIHRyeWluZyB0byBvYnNlcnZlIGEgcmVhZG9ubHkgcHJveHksIHJldHVybiB0aGUgcmVhZG9ubHkgdmVyc2lvbi5cclxuICAgIGlmIChpc1JlYWRvbmx5KHRhcmdldCkpIHtcclxuICAgICAgICByZXR1cm4gdGFyZ2V0O1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGNyZWF0ZVJlYWN0aXZlT2JqZWN0KHRhcmdldCwgZmFsc2UsIG11dGFibGVIYW5kbGVycywgbXV0YWJsZUNvbGxlY3Rpb25IYW5kbGVycywgcmVhY3RpdmVNYXApO1xyXG59XHJcbi8qKlxyXG4gKiBSZXR1cm4gYSBzaGFsbG93bHktcmVhY3RpdmUgY29weSBvZiB0aGUgb3JpZ2luYWwgb2JqZWN0LCB3aGVyZSBvbmx5IHRoZSByb290XHJcbiAqIGxldmVsIHByb3BlcnRpZXMgYXJlIHJlYWN0aXZlLiBJdCBhbHNvIGRvZXMgbm90IGF1dG8tdW53cmFwIHJlZnMgKGV2ZW4gYXQgdGhlXHJcbiAqIHJvb3QgbGV2ZWwpLlxyXG4gKi9cclxuZnVuY3Rpb24gc2hhbGxvd1JlYWN0aXZlKHRhcmdldCkge1xyXG4gICAgcmV0dXJuIGNyZWF0ZVJlYWN0aXZlT2JqZWN0KHRhcmdldCwgZmFsc2UsIHNoYWxsb3dSZWFjdGl2ZUhhbmRsZXJzLCBzaGFsbG93Q29sbGVjdGlvbkhhbmRsZXJzLCBzaGFsbG93UmVhY3RpdmVNYXApO1xyXG59XHJcbi8qKlxyXG4gKiBDcmVhdGVzIGEgcmVhZG9ubHkgY29weSBvZiB0aGUgb3JpZ2luYWwgb2JqZWN0LiBOb3RlIHRoZSByZXR1cm5lZCBjb3B5IGlzIG5vdFxyXG4gKiBtYWRlIHJlYWN0aXZlLCBidXQgYHJlYWRvbmx5YCBjYW4gYmUgY2FsbGVkIG9uIGFuIGFscmVhZHkgcmVhY3RpdmUgb2JqZWN0LlxyXG4gKi9cclxuZnVuY3Rpb24gcmVhZG9ubHkodGFyZ2V0KSB7XHJcbiAgICByZXR1cm4gY3JlYXRlUmVhY3RpdmVPYmplY3QodGFyZ2V0LCB0cnVlLCByZWFkb25seUhhbmRsZXJzLCByZWFkb25seUNvbGxlY3Rpb25IYW5kbGVycywgcmVhZG9ubHlNYXApO1xyXG59XHJcbi8qKlxyXG4gKiBSZXR1cm5zIGEgcmVhY3RpdmUtY29weSBvZiB0aGUgb3JpZ2luYWwgb2JqZWN0LCB3aGVyZSBvbmx5IHRoZSByb290IGxldmVsXHJcbiAqIHByb3BlcnRpZXMgYXJlIHJlYWRvbmx5LCBhbmQgZG9lcyBOT1QgdW53cmFwIHJlZnMgbm9yIHJlY3Vyc2l2ZWx5IGNvbnZlcnRcclxuICogcmV0dXJuZWQgcHJvcGVydGllcy5cclxuICogVGhpcyBpcyB1c2VkIGZvciBjcmVhdGluZyB0aGUgcHJvcHMgcHJveHkgb2JqZWN0IGZvciBzdGF0ZWZ1bCBjb21wb25lbnRzLlxyXG4gKi9cclxuZnVuY3Rpb24gc2hhbGxvd1JlYWRvbmx5KHRhcmdldCkge1xyXG4gICAgcmV0dXJuIGNyZWF0ZVJlYWN0aXZlT2JqZWN0KHRhcmdldCwgdHJ1ZSwgc2hhbGxvd1JlYWRvbmx5SGFuZGxlcnMsIHNoYWxsb3dSZWFkb25seUNvbGxlY3Rpb25IYW5kbGVycywgc2hhbGxvd1JlYWRvbmx5TWFwKTtcclxufVxyXG5mdW5jdGlvbiBjcmVhdGVSZWFjdGl2ZU9iamVjdCh0YXJnZXQsIGlzUmVhZG9ubHksIGJhc2VIYW5kbGVycywgY29sbGVjdGlvbkhhbmRsZXJzLCBwcm94eU1hcCkge1xyXG4gICAgaWYgKCFpc09iamVjdCh0YXJnZXQpKSB7XHJcbiAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xyXG4gICAgICAgICAgICBjb25zb2xlLndhcm4oYHZhbHVlIGNhbm5vdCBiZSBtYWRlIHJlYWN0aXZlOiAke1N0cmluZyh0YXJnZXQpfWApO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGFyZ2V0O1xyXG4gICAgfVxyXG4gICAgLy8gdGFyZ2V0IGlzIGFscmVhZHkgYSBQcm94eSwgcmV0dXJuIGl0LlxyXG4gICAgLy8gZXhjZXB0aW9uOiBjYWxsaW5nIHJlYWRvbmx5KCkgb24gYSByZWFjdGl2ZSBvYmplY3RcclxuICAgIGlmICh0YXJnZXRbXCJfX3ZfcmF3XCIgLyogUkFXICovXSAmJlxyXG4gICAgICAgICEoaXNSZWFkb25seSAmJiB0YXJnZXRbXCJfX3ZfaXNSZWFjdGl2ZVwiIC8qIElTX1JFQUNUSVZFICovXSkpIHtcclxuICAgICAgICByZXR1cm4gdGFyZ2V0O1xyXG4gICAgfVxyXG4gICAgLy8gdGFyZ2V0IGFscmVhZHkgaGFzIGNvcnJlc3BvbmRpbmcgUHJveHlcclxuICAgIGNvbnN0IGV4aXN0aW5nUHJveHkgPSBwcm94eU1hcC5nZXQodGFyZ2V0KTtcclxuICAgIGlmIChleGlzdGluZ1Byb3h5KSB7XHJcbiAgICAgICAgcmV0dXJuIGV4aXN0aW5nUHJveHk7XHJcbiAgICB9XHJcbiAgICAvLyBvbmx5IGEgd2hpdGVsaXN0IG9mIHZhbHVlIHR5cGVzIGNhbiBiZSBvYnNlcnZlZC5cclxuICAgIGNvbnN0IHRhcmdldFR5cGUgPSBnZXRUYXJnZXRUeXBlKHRhcmdldCk7XHJcbiAgICBpZiAodGFyZ2V0VHlwZSA9PT0gMCAvKiBJTlZBTElEICovKSB7XHJcbiAgICAgICAgcmV0dXJuIHRhcmdldDtcclxuICAgIH1cclxuICAgIGNvbnN0IHByb3h5ID0gbmV3IFByb3h5KHRhcmdldCwgdGFyZ2V0VHlwZSA9PT0gMiAvKiBDT0xMRUNUSU9OICovID8gY29sbGVjdGlvbkhhbmRsZXJzIDogYmFzZUhhbmRsZXJzKTtcclxuICAgIHByb3h5TWFwLnNldCh0YXJnZXQsIHByb3h5KTtcclxuICAgIHJldHVybiBwcm94eTtcclxufVxyXG5mdW5jdGlvbiBpc1JlYWN0aXZlKHZhbHVlKSB7XHJcbiAgICBpZiAoaXNSZWFkb25seSh2YWx1ZSkpIHtcclxuICAgICAgICByZXR1cm4gaXNSZWFjdGl2ZSh2YWx1ZVtcIl9fdl9yYXdcIiAvKiBSQVcgKi9dKTtcclxuICAgIH1cclxuICAgIHJldHVybiAhISh2YWx1ZSAmJiB2YWx1ZVtcIl9fdl9pc1JlYWN0aXZlXCIgLyogSVNfUkVBQ1RJVkUgKi9dKTtcclxufVxyXG5mdW5jdGlvbiBpc1JlYWRvbmx5KHZhbHVlKSB7XHJcbiAgICByZXR1cm4gISEodmFsdWUgJiYgdmFsdWVbXCJfX3ZfaXNSZWFkb25seVwiIC8qIElTX1JFQURPTkxZICovXSk7XHJcbn1cclxuZnVuY3Rpb24gaXNTaGFsbG93KHZhbHVlKSB7XHJcbiAgICByZXR1cm4gISEodmFsdWUgJiYgdmFsdWVbXCJfX3ZfaXNTaGFsbG93XCIgLyogSVNfU0hBTExPVyAqL10pO1xyXG59XHJcbmZ1bmN0aW9uIGlzUHJveHkodmFsdWUpIHtcclxuICAgIHJldHVybiBpc1JlYWN0aXZlKHZhbHVlKSB8fCBpc1JlYWRvbmx5KHZhbHVlKTtcclxufVxyXG5mdW5jdGlvbiB0b1JhdyhvYnNlcnZlZCkge1xyXG4gICAgY29uc3QgcmF3ID0gb2JzZXJ2ZWQgJiYgb2JzZXJ2ZWRbXCJfX3ZfcmF3XCIgLyogUkFXICovXTtcclxuICAgIHJldHVybiByYXcgPyB0b1JhdyhyYXcpIDogb2JzZXJ2ZWQ7XHJcbn1cclxuZnVuY3Rpb24gbWFya1Jhdyh2YWx1ZSkge1xyXG4gICAgZGVmKHZhbHVlLCBcIl9fdl9za2lwXCIgLyogU0tJUCAqLywgdHJ1ZSk7XHJcbiAgICByZXR1cm4gdmFsdWU7XHJcbn1cclxuY29uc3QgdG9SZWFjdGl2ZSA9ICh2YWx1ZSkgPT4gaXNPYmplY3QodmFsdWUpID8gcmVhY3RpdmUodmFsdWUpIDogdmFsdWU7XHJcbmNvbnN0IHRvUmVhZG9ubHkgPSAodmFsdWUpID0+IGlzT2JqZWN0KHZhbHVlKSA/IHJlYWRvbmx5KHZhbHVlKSA6IHZhbHVlO1xuXG5mdW5jdGlvbiB0cmFja1JlZlZhbHVlKHJlZikge1xyXG4gICAgaWYgKHNob3VsZFRyYWNrICYmIGFjdGl2ZUVmZmVjdCkge1xyXG4gICAgICAgIHJlZiA9IHRvUmF3KHJlZik7XHJcbiAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xyXG4gICAgICAgICAgICB0cmFja0VmZmVjdHMocmVmLmRlcCB8fCAocmVmLmRlcCA9IGNyZWF0ZURlcCgpKSwge1xyXG4gICAgICAgICAgICAgICAgdGFyZ2V0OiByZWYsXHJcbiAgICAgICAgICAgICAgICB0eXBlOiBcImdldFwiIC8qIEdFVCAqLyxcclxuICAgICAgICAgICAgICAgIGtleTogJ3ZhbHVlJ1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRyYWNrRWZmZWN0cyhyZWYuZGVwIHx8IChyZWYuZGVwID0gY3JlYXRlRGVwKCkpKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gdHJpZ2dlclJlZlZhbHVlKHJlZiwgbmV3VmFsKSB7XHJcbiAgICByZWYgPSB0b1JhdyhyZWYpO1xyXG4gICAgaWYgKHJlZi5kZXApIHtcclxuICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XHJcbiAgICAgICAgICAgIHRyaWdnZXJFZmZlY3RzKHJlZi5kZXAsIHtcclxuICAgICAgICAgICAgICAgIHRhcmdldDogcmVmLFxyXG4gICAgICAgICAgICAgICAgdHlwZTogXCJzZXRcIiAvKiBTRVQgKi8sXHJcbiAgICAgICAgICAgICAgICBrZXk6ICd2YWx1ZScsXHJcbiAgICAgICAgICAgICAgICBuZXdWYWx1ZTogbmV3VmFsXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdHJpZ2dlckVmZmVjdHMocmVmLmRlcCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIGlzUmVmKHIpIHtcclxuICAgIHJldHVybiAhIShyICYmIHIuX192X2lzUmVmID09PSB0cnVlKTtcclxufVxyXG5mdW5jdGlvbiByZWYodmFsdWUpIHtcclxuICAgIHJldHVybiBjcmVhdGVSZWYodmFsdWUsIGZhbHNlKTtcclxufVxyXG5mdW5jdGlvbiBzaGFsbG93UmVmKHZhbHVlKSB7XHJcbiAgICByZXR1cm4gY3JlYXRlUmVmKHZhbHVlLCB0cnVlKTtcclxufVxyXG5mdW5jdGlvbiBjcmVhdGVSZWYocmF3VmFsdWUsIHNoYWxsb3cpIHtcclxuICAgIGlmIChpc1JlZihyYXdWYWx1ZSkpIHtcclxuICAgICAgICByZXR1cm4gcmF3VmFsdWU7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbmV3IFJlZkltcGwocmF3VmFsdWUsIHNoYWxsb3cpO1xyXG59XHJcbmNsYXNzIFJlZkltcGwge1xyXG4gICAgY29uc3RydWN0b3IodmFsdWUsIF9fdl9pc1NoYWxsb3cpIHtcclxuICAgICAgICB0aGlzLl9fdl9pc1NoYWxsb3cgPSBfX3ZfaXNTaGFsbG93O1xyXG4gICAgICAgIHRoaXMuZGVwID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIHRoaXMuX192X2lzUmVmID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLl9yYXdWYWx1ZSA9IF9fdl9pc1NoYWxsb3cgPyB2YWx1ZSA6IHRvUmF3KHZhbHVlKTtcclxuICAgICAgICB0aGlzLl92YWx1ZSA9IF9fdl9pc1NoYWxsb3cgPyB2YWx1ZSA6IHRvUmVhY3RpdmUodmFsdWUpO1xyXG4gICAgfVxyXG4gICAgZ2V0IHZhbHVlKCkge1xyXG4gICAgICAgIHRyYWNrUmVmVmFsdWUodGhpcyk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3ZhbHVlO1xyXG4gICAgfVxyXG4gICAgc2V0IHZhbHVlKG5ld1ZhbCkge1xyXG4gICAgICAgIG5ld1ZhbCA9IHRoaXMuX192X2lzU2hhbGxvdyA/IG5ld1ZhbCA6IHRvUmF3KG5ld1ZhbCk7XHJcbiAgICAgICAgaWYgKGhhc0NoYW5nZWQobmV3VmFsLCB0aGlzLl9yYXdWYWx1ZSkpIHtcclxuICAgICAgICAgICAgdGhpcy5fcmF3VmFsdWUgPSBuZXdWYWw7XHJcbiAgICAgICAgICAgIHRoaXMuX3ZhbHVlID0gdGhpcy5fX3ZfaXNTaGFsbG93ID8gbmV3VmFsIDogdG9SZWFjdGl2ZShuZXdWYWwpO1xyXG4gICAgICAgICAgICB0cmlnZ2VyUmVmVmFsdWUodGhpcywgbmV3VmFsKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gdHJpZ2dlclJlZihyZWYpIHtcclxuICAgIHRyaWdnZXJSZWZWYWx1ZShyZWYsIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSA/IHJlZi52YWx1ZSA6IHZvaWQgMCk7XHJcbn1cclxuZnVuY3Rpb24gdW5yZWYocmVmKSB7XHJcbiAgICByZXR1cm4gaXNSZWYocmVmKSA/IHJlZi52YWx1ZSA6IHJlZjtcclxufVxyXG5jb25zdCBzaGFsbG93VW53cmFwSGFuZGxlcnMgPSB7XHJcbiAgICBnZXQ6ICh0YXJnZXQsIGtleSwgcmVjZWl2ZXIpID0+IHVucmVmKFJlZmxlY3QuZ2V0KHRhcmdldCwga2V5LCByZWNlaXZlcikpLFxyXG4gICAgc2V0OiAodGFyZ2V0LCBrZXksIHZhbHVlLCByZWNlaXZlcikgPT4ge1xyXG4gICAgICAgIGNvbnN0IG9sZFZhbHVlID0gdGFyZ2V0W2tleV07XHJcbiAgICAgICAgaWYgKGlzUmVmKG9sZFZhbHVlKSAmJiAhaXNSZWYodmFsdWUpKSB7XHJcbiAgICAgICAgICAgIG9sZFZhbHVlLnZhbHVlID0gdmFsdWU7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIFJlZmxlY3Quc2V0KHRhcmdldCwga2V5LCB2YWx1ZSwgcmVjZWl2ZXIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufTtcclxuZnVuY3Rpb24gcHJveHlSZWZzKG9iamVjdFdpdGhSZWZzKSB7XHJcbiAgICByZXR1cm4gaXNSZWFjdGl2ZShvYmplY3RXaXRoUmVmcylcclxuICAgICAgICA/IG9iamVjdFdpdGhSZWZzXHJcbiAgICAgICAgOiBuZXcgUHJveHkob2JqZWN0V2l0aFJlZnMsIHNoYWxsb3dVbndyYXBIYW5kbGVycyk7XHJcbn1cclxuY2xhc3MgQ3VzdG9tUmVmSW1wbCB7XHJcbiAgICBjb25zdHJ1Y3RvcihmYWN0b3J5KSB7XHJcbiAgICAgICAgdGhpcy5kZXAgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgdGhpcy5fX3ZfaXNSZWYgPSB0cnVlO1xyXG4gICAgICAgIGNvbnN0IHsgZ2V0LCBzZXQgfSA9IGZhY3RvcnkoKCkgPT4gdHJhY2tSZWZWYWx1ZSh0aGlzKSwgKCkgPT4gdHJpZ2dlclJlZlZhbHVlKHRoaXMpKTtcclxuICAgICAgICB0aGlzLl9nZXQgPSBnZXQ7XHJcbiAgICAgICAgdGhpcy5fc2V0ID0gc2V0O1xyXG4gICAgfVxyXG4gICAgZ2V0IHZhbHVlKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9nZXQoKTtcclxuICAgIH1cclxuICAgIHNldCB2YWx1ZShuZXdWYWwpIHtcclxuICAgICAgICB0aGlzLl9zZXQobmV3VmFsKTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBjdXN0b21SZWYoZmFjdG9yeSkge1xyXG4gICAgcmV0dXJuIG5ldyBDdXN0b21SZWZJbXBsKGZhY3RvcnkpO1xyXG59XHJcbmZ1bmN0aW9uIHRvUmVmcyhvYmplY3QpIHtcclxuICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgIWlzUHJveHkob2JqZWN0KSkge1xyXG4gICAgICAgIGNvbnNvbGUud2FybihgdG9SZWZzKCkgZXhwZWN0cyBhIHJlYWN0aXZlIG9iamVjdCBidXQgcmVjZWl2ZWQgYSBwbGFpbiBvbmUuYCk7XHJcbiAgICB9XHJcbiAgICBjb25zdCByZXQgPSBpc0FycmF5KG9iamVjdCkgPyBuZXcgQXJyYXkob2JqZWN0Lmxlbmd0aCkgOiB7fTtcclxuICAgIGZvciAoY29uc3Qga2V5IGluIG9iamVjdCkge1xyXG4gICAgICAgIHJldFtrZXldID0gdG9SZWYob2JqZWN0LCBrZXkpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHJldDtcclxufVxyXG5jbGFzcyBPYmplY3RSZWZJbXBsIHtcclxuICAgIGNvbnN0cnVjdG9yKF9vYmplY3QsIF9rZXksIF9kZWZhdWx0VmFsdWUpIHtcclxuICAgICAgICB0aGlzLl9vYmplY3QgPSBfb2JqZWN0O1xyXG4gICAgICAgIHRoaXMuX2tleSA9IF9rZXk7XHJcbiAgICAgICAgdGhpcy5fZGVmYXVsdFZhbHVlID0gX2RlZmF1bHRWYWx1ZTtcclxuICAgICAgICB0aGlzLl9fdl9pc1JlZiA9IHRydWU7XHJcbiAgICB9XHJcbiAgICBnZXQgdmFsdWUoKSB7XHJcbiAgICAgICAgY29uc3QgdmFsID0gdGhpcy5fb2JqZWN0W3RoaXMuX2tleV07XHJcbiAgICAgICAgcmV0dXJuIHZhbCA9PT0gdW5kZWZpbmVkID8gdGhpcy5fZGVmYXVsdFZhbHVlIDogdmFsO1xyXG4gICAgfVxyXG4gICAgc2V0IHZhbHVlKG5ld1ZhbCkge1xyXG4gICAgICAgIHRoaXMuX29iamVjdFt0aGlzLl9rZXldID0gbmV3VmFsO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIHRvUmVmKG9iamVjdCwga2V5LCBkZWZhdWx0VmFsdWUpIHtcclxuICAgIGNvbnN0IHZhbCA9IG9iamVjdFtrZXldO1xyXG4gICAgcmV0dXJuIGlzUmVmKHZhbClcclxuICAgICAgICA/IHZhbFxyXG4gICAgICAgIDogbmV3IE9iamVjdFJlZkltcGwob2JqZWN0LCBrZXksIGRlZmF1bHRWYWx1ZSk7XHJcbn1cblxuY2xhc3MgQ29tcHV0ZWRSZWZJbXBsIHtcclxuICAgIGNvbnN0cnVjdG9yKGdldHRlciwgX3NldHRlciwgaXNSZWFkb25seSwgaXNTU1IpIHtcclxuICAgICAgICB0aGlzLl9zZXR0ZXIgPSBfc2V0dGVyO1xyXG4gICAgICAgIHRoaXMuZGVwID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIHRoaXMuX192X2lzUmVmID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLl9kaXJ0eSA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5lZmZlY3QgPSBuZXcgUmVhY3RpdmVFZmZlY3QoZ2V0dGVyLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5fZGlydHkpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2RpcnR5ID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIHRyaWdnZXJSZWZWYWx1ZSh0aGlzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuZWZmZWN0LmNvbXB1dGVkID0gdGhpcztcclxuICAgICAgICB0aGlzLmVmZmVjdC5hY3RpdmUgPSB0aGlzLl9jYWNoZWFibGUgPSAhaXNTU1I7XHJcbiAgICAgICAgdGhpc1tcIl9fdl9pc1JlYWRvbmx5XCIgLyogSVNfUkVBRE9OTFkgKi9dID0gaXNSZWFkb25seTtcclxuICAgIH1cclxuICAgIGdldCB2YWx1ZSgpIHtcclxuICAgICAgICAvLyB0aGUgY29tcHV0ZWQgcmVmIG1heSBnZXQgd3JhcHBlZCBieSBvdGhlciBwcm94aWVzIGUuZy4gcmVhZG9ubHkoKSAjMzM3NlxyXG4gICAgICAgIGNvbnN0IHNlbGYgPSB0b1Jhdyh0aGlzKTtcclxuICAgICAgICB0cmFja1JlZlZhbHVlKHNlbGYpO1xyXG4gICAgICAgIGlmIChzZWxmLl9kaXJ0eSB8fCAhc2VsZi5fY2FjaGVhYmxlKSB7XHJcbiAgICAgICAgICAgIHNlbGYuX2RpcnR5ID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHNlbGYuX3ZhbHVlID0gc2VsZi5lZmZlY3QucnVuKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBzZWxmLl92YWx1ZTtcclxuICAgIH1cclxuICAgIHNldCB2YWx1ZShuZXdWYWx1ZSkge1xyXG4gICAgICAgIHRoaXMuX3NldHRlcihuZXdWYWx1ZSk7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gY29tcHV0ZWQoZ2V0dGVyT3JPcHRpb25zLCBkZWJ1Z09wdGlvbnMsIGlzU1NSID0gZmFsc2UpIHtcclxuICAgIGxldCBnZXR0ZXI7XHJcbiAgICBsZXQgc2V0dGVyO1xyXG4gICAgY29uc3Qgb25seUdldHRlciA9IGlzRnVuY3Rpb24oZ2V0dGVyT3JPcHRpb25zKTtcclxuICAgIGlmIChvbmx5R2V0dGVyKSB7XHJcbiAgICAgICAgZ2V0dGVyID0gZ2V0dGVyT3JPcHRpb25zO1xyXG4gICAgICAgIHNldHRlciA9IChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKVxyXG4gICAgICAgICAgICA/ICgpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybignV3JpdGUgb3BlcmF0aW9uIGZhaWxlZDogY29tcHV0ZWQgdmFsdWUgaXMgcmVhZG9ubHknKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICA6IE5PT1A7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICBnZXR0ZXIgPSBnZXR0ZXJPck9wdGlvbnMuZ2V0O1xyXG4gICAgICAgIHNldHRlciA9IGdldHRlck9yT3B0aW9ucy5zZXQ7XHJcbiAgICB9XHJcbiAgICBjb25zdCBjUmVmID0gbmV3IENvbXB1dGVkUmVmSW1wbChnZXR0ZXIsIHNldHRlciwgb25seUdldHRlciB8fCAhc2V0dGVyLCBpc1NTUik7XHJcbiAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmIGRlYnVnT3B0aW9ucyAmJiAhaXNTU1IpIHtcclxuICAgICAgICBjUmVmLmVmZmVjdC5vblRyYWNrID0gZGVidWdPcHRpb25zLm9uVHJhY2s7XHJcbiAgICAgICAgY1JlZi5lZmZlY3Qub25UcmlnZ2VyID0gZGVidWdPcHRpb25zLm9uVHJpZ2dlcjtcclxuICAgIH1cclxuICAgIHJldHVybiBjUmVmO1xyXG59XG5cbnZhciBfYTtcclxuY29uc3QgdGljayA9IC8qI19fUFVSRV9fKi8gUHJvbWlzZS5yZXNvbHZlKCk7XHJcbmNvbnN0IHF1ZXVlID0gW107XHJcbmxldCBxdWV1ZWQgPSBmYWxzZTtcclxuY29uc3Qgc2NoZWR1bGVyID0gKGZuKSA9PiB7XHJcbiAgICBxdWV1ZS5wdXNoKGZuKTtcclxuICAgIGlmICghcXVldWVkKSB7XHJcbiAgICAgICAgcXVldWVkID0gdHJ1ZTtcclxuICAgICAgICB0aWNrLnRoZW4oZmx1c2gpO1xyXG4gICAgfVxyXG59O1xyXG5jb25zdCBmbHVzaCA9ICgpID0+IHtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcXVldWUubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBxdWV1ZVtpXSgpO1xyXG4gICAgfVxyXG4gICAgcXVldWUubGVuZ3RoID0gMDtcclxuICAgIHF1ZXVlZCA9IGZhbHNlO1xyXG59O1xyXG5jbGFzcyBEZWZlcnJlZENvbXB1dGVkUmVmSW1wbCB7XHJcbiAgICBjb25zdHJ1Y3RvcihnZXR0ZXIpIHtcclxuICAgICAgICB0aGlzLmRlcCA9IHVuZGVmaW5lZDtcclxuICAgICAgICB0aGlzLl9kaXJ0eSA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5fX3ZfaXNSZWYgPSB0cnVlO1xyXG4gICAgICAgIHRoaXNbX2FdID0gdHJ1ZTtcclxuICAgICAgICBsZXQgY29tcGFyZVRhcmdldDtcclxuICAgICAgICBsZXQgaGFzQ29tcGFyZVRhcmdldCA9IGZhbHNlO1xyXG4gICAgICAgIGxldCBzY2hlZHVsZWQgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmVmZmVjdCA9IG5ldyBSZWFjdGl2ZUVmZmVjdChnZXR0ZXIsIChjb21wdXRlZFRyaWdnZXIpID0+IHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuZGVwKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoY29tcHV0ZWRUcmlnZ2VyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29tcGFyZVRhcmdldCA9IHRoaXMuX3ZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGhhc0NvbXBhcmVUYXJnZXQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoIXNjaGVkdWxlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlVG9Db21wYXJlID0gaGFzQ29tcGFyZVRhcmdldCA/IGNvbXBhcmVUYXJnZXQgOiB0aGlzLl92YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICBzY2hlZHVsZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGhhc0NvbXBhcmVUYXJnZXQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICBzY2hlZHVsZXIoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5lZmZlY3QuYWN0aXZlICYmIHRoaXMuX2dldCgpICE9PSB2YWx1ZVRvQ29tcGFyZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJpZ2dlclJlZlZhbHVlKHRoaXMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjaGVkdWxlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gY2hhaW5lZCB1cHN0cmVhbSBjb21wdXRlZHMgYXJlIG5vdGlmaWVkIHN5bmNocm9ub3VzbHkgdG8gZW5zdXJlXHJcbiAgICAgICAgICAgICAgICAvLyB2YWx1ZSBpbnZhbGlkYXRpb24gaW4gY2FzZSBvZiBzeW5jIGFjY2Vzczsgbm9ybWFsIGVmZmVjdHMgYXJlXHJcbiAgICAgICAgICAgICAgICAvLyBkZWZlcnJlZCB0byBiZSB0cmlnZ2VyZWQgaW4gc2NoZWR1bGVyLlxyXG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBlIG9mIHRoaXMuZGVwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGUuY29tcHV0ZWQgaW5zdGFuY2VvZiBEZWZlcnJlZENvbXB1dGVkUmVmSW1wbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlLnNjaGVkdWxlcih0cnVlIC8qIGNvbXB1dGVkVHJpZ2dlciAqLyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuX2RpcnR5ID0gdHJ1ZTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLmVmZmVjdC5jb21wdXRlZCA9IHRoaXM7XHJcbiAgICB9XHJcbiAgICBfZ2V0KCkge1xyXG4gICAgICAgIGlmICh0aGlzLl9kaXJ0eSkge1xyXG4gICAgICAgICAgICB0aGlzLl9kaXJ0eSA9IGZhbHNlO1xyXG4gICAgICAgICAgICByZXR1cm4gKHRoaXMuX3ZhbHVlID0gdGhpcy5lZmZlY3QucnVuKCkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5fdmFsdWU7XHJcbiAgICB9XHJcbiAgICBnZXQgdmFsdWUoKSB7XHJcbiAgICAgICAgdHJhY2tSZWZWYWx1ZSh0aGlzKTtcclxuICAgICAgICAvLyB0aGUgY29tcHV0ZWQgcmVmIG1heSBnZXQgd3JhcHBlZCBieSBvdGhlciBwcm94aWVzIGUuZy4gcmVhZG9ubHkoKSAjMzM3NlxyXG4gICAgICAgIHJldHVybiB0b1Jhdyh0aGlzKS5fZ2V0KCk7XHJcbiAgICB9XHJcbn1cclxuX2EgPSBcIl9fdl9pc1JlYWRvbmx5XCIgLyogSVNfUkVBRE9OTFkgKi87XHJcbmZ1bmN0aW9uIGRlZmVycmVkQ29tcHV0ZWQoZ2V0dGVyKSB7XHJcbiAgICByZXR1cm4gbmV3IERlZmVycmVkQ29tcHV0ZWRSZWZJbXBsKGdldHRlcik7XHJcbn1cblxuZXhwb3J0IHsgRWZmZWN0U2NvcGUsIElURVJBVEVfS0VZLCBSZWFjdGl2ZUVmZmVjdCwgY29tcHV0ZWQsIGN1c3RvbVJlZiwgZGVmZXJyZWRDb21wdXRlZCwgZWZmZWN0LCBlZmZlY3RTY29wZSwgZW5hYmxlVHJhY2tpbmcsIGdldEN1cnJlbnRTY29wZSwgaXNQcm94eSwgaXNSZWFjdGl2ZSwgaXNSZWFkb25seSwgaXNSZWYsIGlzU2hhbGxvdywgbWFya1Jhdywgb25TY29wZURpc3Bvc2UsIHBhdXNlVHJhY2tpbmcsIHByb3h5UmVmcywgcmVhY3RpdmUsIHJlYWRvbmx5LCByZWYsIHJlc2V0VHJhY2tpbmcsIHNoYWxsb3dSZWFjdGl2ZSwgc2hhbGxvd1JlYWRvbmx5LCBzaGFsbG93UmVmLCBzdG9wLCB0b1JhdywgdG9SZWYsIHRvUmVmcywgdHJhY2ssIHRyaWdnZXIsIHRyaWdnZXJSZWYsIHVucmVmIH07XG4iLCJpbXBvcnQgeyBwYXVzZVRyYWNraW5nLCByZXNldFRyYWNraW5nLCBpc1JlZiwgdG9SYXcsIGlzU2hhbGxvdyBhcyBpc1NoYWxsb3ckMSwgaXNSZWFjdGl2ZSwgUmVhY3RpdmVFZmZlY3QsIHJlZiwgcmVhY3RpdmUsIHNoYWxsb3dSZWFjdGl2ZSwgdHJpZ2dlciwgaXNQcm94eSwgc2hhbGxvd1JlYWRvbmx5LCB0cmFjaywgRWZmZWN0U2NvcGUsIG1hcmtSYXcsIHByb3h5UmVmcywgY29tcHV0ZWQgYXMgY29tcHV0ZWQkMSwgaXNSZWFkb25seSB9IGZyb20gJ0B2dWUvcmVhY3Rpdml0eSc7XG5leHBvcnQgeyBFZmZlY3RTY29wZSwgUmVhY3RpdmVFZmZlY3QsIGN1c3RvbVJlZiwgZWZmZWN0LCBlZmZlY3RTY29wZSwgZ2V0Q3VycmVudFNjb3BlLCBpc1Byb3h5LCBpc1JlYWN0aXZlLCBpc1JlYWRvbmx5LCBpc1JlZiwgaXNTaGFsbG93LCBtYXJrUmF3LCBvblNjb3BlRGlzcG9zZSwgcHJveHlSZWZzLCByZWFjdGl2ZSwgcmVhZG9ubHksIHJlZiwgc2hhbGxvd1JlYWN0aXZlLCBzaGFsbG93UmVhZG9ubHksIHNoYWxsb3dSZWYsIHN0b3AsIHRvUmF3LCB0b1JlZiwgdG9SZWZzLCB0cmlnZ2VyUmVmLCB1bnJlZiB9IGZyb20gJ0B2dWUvcmVhY3Rpdml0eSc7XG5pbXBvcnQgeyBpc1N0cmluZywgaXNGdW5jdGlvbiwgaXNQcm9taXNlLCBpc0FycmF5LCBOT09QLCBnZXRHbG9iYWxUaGlzLCBleHRlbmQsIEVNUFRZX09CSiwgdG9IYW5kbGVyS2V5LCB0b051bWJlciwgaHlwaGVuYXRlLCBjYW1lbGl6ZSwgaXNPbiwgaGFzT3duLCBpc01vZGVsTGlzdGVuZXIsIGhhc0NoYW5nZWQsIHJlbW92ZSwgaXNPYmplY3QsIGlzU2V0LCBpc01hcCwgaXNQbGFpbk9iamVjdCwgaW52b2tlQXJyYXlGbnMsIGRlZiwgaXNSZXNlcnZlZFByb3AsIEVNUFRZX0FSUiwgY2FwaXRhbGl6ZSwgdG9SYXdUeXBlLCBtYWtlTWFwLCBpc0J1aWx0SW5EaXJlY3RpdmUsIE5PLCBub3JtYWxpemVDbGFzcywgbm9ybWFsaXplU3R5bGUsIGlzR2xvYmFsbHlXaGl0ZWxpc3RlZCB9IGZyb20gJ0B2dWUvc2hhcmVkJztcbmV4cG9ydCB7IGNhbWVsaXplLCBjYXBpdGFsaXplLCBub3JtYWxpemVDbGFzcywgbm9ybWFsaXplUHJvcHMsIG5vcm1hbGl6ZVN0eWxlLCB0b0Rpc3BsYXlTdHJpbmcsIHRvSGFuZGxlcktleSB9IGZyb20gJ0B2dWUvc2hhcmVkJztcblxuY29uc3Qgc3RhY2sgPSBbXTtcclxuZnVuY3Rpb24gcHVzaFdhcm5pbmdDb250ZXh0KHZub2RlKSB7XHJcbiAgICBzdGFjay5wdXNoKHZub2RlKTtcclxufVxyXG5mdW5jdGlvbiBwb3BXYXJuaW5nQ29udGV4dCgpIHtcclxuICAgIHN0YWNrLnBvcCgpO1xyXG59XHJcbmZ1bmN0aW9uIHdhcm4obXNnLCAuLi5hcmdzKSB7XHJcbiAgICAvLyBhdm9pZCBwcm9wcyBmb3JtYXR0aW5nIG9yIHdhcm4gaGFuZGxlciB0cmFja2luZyBkZXBzIHRoYXQgbWlnaHQgYmUgbXV0YXRlZFxyXG4gICAgLy8gZHVyaW5nIHBhdGNoLCBsZWFkaW5nIHRvIGluZmluaXRlIHJlY3Vyc2lvbi5cclxuICAgIHBhdXNlVHJhY2tpbmcoKTtcclxuICAgIGNvbnN0IGluc3RhbmNlID0gc3RhY2subGVuZ3RoID8gc3RhY2tbc3RhY2subGVuZ3RoIC0gMV0uY29tcG9uZW50IDogbnVsbDtcclxuICAgIGNvbnN0IGFwcFdhcm5IYW5kbGVyID0gaW5zdGFuY2UgJiYgaW5zdGFuY2UuYXBwQ29udGV4dC5jb25maWcud2FybkhhbmRsZXI7XHJcbiAgICBjb25zdCB0cmFjZSA9IGdldENvbXBvbmVudFRyYWNlKCk7XHJcbiAgICBpZiAoYXBwV2FybkhhbmRsZXIpIHtcclxuICAgICAgICBjYWxsV2l0aEVycm9ySGFuZGxpbmcoYXBwV2FybkhhbmRsZXIsIGluc3RhbmNlLCAxMSAvKiBBUFBfV0FSTl9IQU5ETEVSICovLCBbXHJcbiAgICAgICAgICAgIG1zZyArIGFyZ3Muam9pbignJyksXHJcbiAgICAgICAgICAgIGluc3RhbmNlICYmIGluc3RhbmNlLnByb3h5LFxyXG4gICAgICAgICAgICB0cmFjZVxyXG4gICAgICAgICAgICAgICAgLm1hcCgoeyB2bm9kZSB9KSA9PiBgYXQgPCR7Zm9ybWF0Q29tcG9uZW50TmFtZShpbnN0YW5jZSwgdm5vZGUudHlwZSl9PmApXHJcbiAgICAgICAgICAgICAgICAuam9pbignXFxuJyksXHJcbiAgICAgICAgICAgIHRyYWNlXHJcbiAgICAgICAgXSk7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICBjb25zdCB3YXJuQXJncyA9IFtgW1Z1ZSB3YXJuXTogJHttc2d9YCwgLi4uYXJnc107XHJcbiAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXHJcbiAgICAgICAgaWYgKHRyYWNlLmxlbmd0aCAmJlxyXG4gICAgICAgICAgICAvLyBhdm9pZCBzcGFtbWluZyBjb25zb2xlIGR1cmluZyB0ZXN0c1xyXG4gICAgICAgICAgICAhZmFsc2UpIHtcclxuICAgICAgICAgICAgd2FybkFyZ3MucHVzaChgXFxuYCwgLi4uZm9ybWF0VHJhY2UodHJhY2UpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc29sZS53YXJuKC4uLndhcm5BcmdzKTtcclxuICAgIH1cclxuICAgIHJlc2V0VHJhY2tpbmcoKTtcclxufVxyXG5mdW5jdGlvbiBnZXRDb21wb25lbnRUcmFjZSgpIHtcclxuICAgIGxldCBjdXJyZW50Vk5vZGUgPSBzdGFja1tzdGFjay5sZW5ndGggLSAxXTtcclxuICAgIGlmICghY3VycmVudFZOb2RlKSB7XHJcbiAgICAgICAgcmV0dXJuIFtdO1xyXG4gICAgfVxyXG4gICAgLy8gd2UgY2FuJ3QganVzdCB1c2UgdGhlIHN0YWNrIGJlY2F1c2UgaXQgd2lsbCBiZSBpbmNvbXBsZXRlIGR1cmluZyB1cGRhdGVzXHJcbiAgICAvLyB0aGF0IGRpZCBub3Qgc3RhcnQgZnJvbSB0aGUgcm9vdC4gUmUtY29uc3RydWN0IHRoZSBwYXJlbnQgY2hhaW4gdXNpbmdcclxuICAgIC8vIGluc3RhbmNlIHBhcmVudCBwb2ludGVycy5cclxuICAgIGNvbnN0IG5vcm1hbGl6ZWRTdGFjayA9IFtdO1xyXG4gICAgd2hpbGUgKGN1cnJlbnRWTm9kZSkge1xyXG4gICAgICAgIGNvbnN0IGxhc3QgPSBub3JtYWxpemVkU3RhY2tbMF07XHJcbiAgICAgICAgaWYgKGxhc3QgJiYgbGFzdC52bm9kZSA9PT0gY3VycmVudFZOb2RlKSB7XHJcbiAgICAgICAgICAgIGxhc3QucmVjdXJzZUNvdW50Kys7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBub3JtYWxpemVkU3RhY2sucHVzaCh7XHJcbiAgICAgICAgICAgICAgICB2bm9kZTogY3VycmVudFZOb2RlLFxyXG4gICAgICAgICAgICAgICAgcmVjdXJzZUNvdW50OiAwXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBwYXJlbnRJbnN0YW5jZSA9IGN1cnJlbnRWTm9kZS5jb21wb25lbnQgJiYgY3VycmVudFZOb2RlLmNvbXBvbmVudC5wYXJlbnQ7XHJcbiAgICAgICAgY3VycmVudFZOb2RlID0gcGFyZW50SW5zdGFuY2UgJiYgcGFyZW50SW5zdGFuY2Uudm5vZGU7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbm9ybWFsaXplZFN0YWNrO1xyXG59XHJcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXHJcbmZ1bmN0aW9uIGZvcm1hdFRyYWNlKHRyYWNlKSB7XHJcbiAgICBjb25zdCBsb2dzID0gW107XHJcbiAgICB0cmFjZS5mb3JFYWNoKChlbnRyeSwgaSkgPT4ge1xyXG4gICAgICAgIGxvZ3MucHVzaCguLi4oaSA9PT0gMCA/IFtdIDogW2BcXG5gXSksIC4uLmZvcm1hdFRyYWNlRW50cnkoZW50cnkpKTtcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIGxvZ3M7XHJcbn1cclxuZnVuY3Rpb24gZm9ybWF0VHJhY2VFbnRyeSh7IHZub2RlLCByZWN1cnNlQ291bnQgfSkge1xyXG4gICAgY29uc3QgcG9zdGZpeCA9IHJlY3Vyc2VDb3VudCA+IDAgPyBgLi4uICgke3JlY3Vyc2VDb3VudH0gcmVjdXJzaXZlIGNhbGxzKWAgOiBgYDtcclxuICAgIGNvbnN0IGlzUm9vdCA9IHZub2RlLmNvbXBvbmVudCA/IHZub2RlLmNvbXBvbmVudC5wYXJlbnQgPT0gbnVsbCA6IGZhbHNlO1xyXG4gICAgY29uc3Qgb3BlbiA9IGAgYXQgPCR7Zm9ybWF0Q29tcG9uZW50TmFtZSh2bm9kZS5jb21wb25lbnQsIHZub2RlLnR5cGUsIGlzUm9vdCl9YDtcclxuICAgIGNvbnN0IGNsb3NlID0gYD5gICsgcG9zdGZpeDtcclxuICAgIHJldHVybiB2bm9kZS5wcm9wc1xyXG4gICAgICAgID8gW29wZW4sIC4uLmZvcm1hdFByb3BzKHZub2RlLnByb3BzKSwgY2xvc2VdXHJcbiAgICAgICAgOiBbb3BlbiArIGNsb3NlXTtcclxufVxyXG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xyXG5mdW5jdGlvbiBmb3JtYXRQcm9wcyhwcm9wcykge1xyXG4gICAgY29uc3QgcmVzID0gW107XHJcbiAgICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXMocHJvcHMpO1xyXG4gICAga2V5cy5zbGljZSgwLCAzKS5mb3JFYWNoKGtleSA9PiB7XHJcbiAgICAgICAgcmVzLnB1c2goLi4uZm9ybWF0UHJvcChrZXksIHByb3BzW2tleV0pKTtcclxuICAgIH0pO1xyXG4gICAgaWYgKGtleXMubGVuZ3RoID4gMykge1xyXG4gICAgICAgIHJlcy5wdXNoKGAgLi4uYCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcmVzO1xyXG59XHJcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXHJcbmZ1bmN0aW9uIGZvcm1hdFByb3Aoa2V5LCB2YWx1ZSwgcmF3KSB7XHJcbiAgICBpZiAoaXNTdHJpbmcodmFsdWUpKSB7XHJcbiAgICAgICAgdmFsdWUgPSBKU09OLnN0cmluZ2lmeSh2YWx1ZSk7XHJcbiAgICAgICAgcmV0dXJuIHJhdyA/IHZhbHVlIDogW2Ake2tleX09JHt2YWx1ZX1gXTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicgfHxcclxuICAgICAgICB0eXBlb2YgdmFsdWUgPT09ICdib29sZWFuJyB8fFxyXG4gICAgICAgIHZhbHVlID09IG51bGwpIHtcclxuICAgICAgICByZXR1cm4gcmF3ID8gdmFsdWUgOiBbYCR7a2V5fT0ke3ZhbHVlfWBdO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoaXNSZWYodmFsdWUpKSB7XHJcbiAgICAgICAgdmFsdWUgPSBmb3JtYXRQcm9wKGtleSwgdG9SYXcodmFsdWUudmFsdWUpLCB0cnVlKTtcclxuICAgICAgICByZXR1cm4gcmF3ID8gdmFsdWUgOiBbYCR7a2V5fT1SZWY8YCwgdmFsdWUsIGA+YF07XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChpc0Z1bmN0aW9uKHZhbHVlKSkge1xyXG4gICAgICAgIHJldHVybiBbYCR7a2V5fT1mbiR7dmFsdWUubmFtZSA/IGA8JHt2YWx1ZS5uYW1lfT5gIDogYGB9YF07XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICB2YWx1ZSA9IHRvUmF3KHZhbHVlKTtcclxuICAgICAgICByZXR1cm4gcmF3ID8gdmFsdWUgOiBbYCR7a2V5fT1gLCB2YWx1ZV07XHJcbiAgICB9XHJcbn1cblxuY29uc3QgRXJyb3JUeXBlU3RyaW5ncyA9IHtcclxuICAgIFtcInNwXCIgLyogU0VSVkVSX1BSRUZFVENIICovXTogJ3NlcnZlclByZWZldGNoIGhvb2snLFxyXG4gICAgW1wiYmNcIiAvKiBCRUZPUkVfQ1JFQVRFICovXTogJ2JlZm9yZUNyZWF0ZSBob29rJyxcclxuICAgIFtcImNcIiAvKiBDUkVBVEVEICovXTogJ2NyZWF0ZWQgaG9vaycsXHJcbiAgICBbXCJibVwiIC8qIEJFRk9SRV9NT1VOVCAqL106ICdiZWZvcmVNb3VudCBob29rJyxcclxuICAgIFtcIm1cIiAvKiBNT1VOVEVEICovXTogJ21vdW50ZWQgaG9vaycsXHJcbiAgICBbXCJidVwiIC8qIEJFRk9SRV9VUERBVEUgKi9dOiAnYmVmb3JlVXBkYXRlIGhvb2snLFxyXG4gICAgW1widVwiIC8qIFVQREFURUQgKi9dOiAndXBkYXRlZCcsXHJcbiAgICBbXCJidW1cIiAvKiBCRUZPUkVfVU5NT1VOVCAqL106ICdiZWZvcmVVbm1vdW50IGhvb2snLFxyXG4gICAgW1widW1cIiAvKiBVTk1PVU5URUQgKi9dOiAndW5tb3VudGVkIGhvb2snLFxyXG4gICAgW1wiYVwiIC8qIEFDVElWQVRFRCAqL106ICdhY3RpdmF0ZWQgaG9vaycsXHJcbiAgICBbXCJkYVwiIC8qIERFQUNUSVZBVEVEICovXTogJ2RlYWN0aXZhdGVkIGhvb2snLFxyXG4gICAgW1wiZWNcIiAvKiBFUlJPUl9DQVBUVVJFRCAqL106ICdlcnJvckNhcHR1cmVkIGhvb2snLFxyXG4gICAgW1wicnRjXCIgLyogUkVOREVSX1RSQUNLRUQgKi9dOiAncmVuZGVyVHJhY2tlZCBob29rJyxcclxuICAgIFtcInJ0Z1wiIC8qIFJFTkRFUl9UUklHR0VSRUQgKi9dOiAncmVuZGVyVHJpZ2dlcmVkIGhvb2snLFxyXG4gICAgWzAgLyogU0VUVVBfRlVOQ1RJT04gKi9dOiAnc2V0dXAgZnVuY3Rpb24nLFxyXG4gICAgWzEgLyogUkVOREVSX0ZVTkNUSU9OICovXTogJ3JlbmRlciBmdW5jdGlvbicsXHJcbiAgICBbMiAvKiBXQVRDSF9HRVRURVIgKi9dOiAnd2F0Y2hlciBnZXR0ZXInLFxyXG4gICAgWzMgLyogV0FUQ0hfQ0FMTEJBQ0sgKi9dOiAnd2F0Y2hlciBjYWxsYmFjaycsXHJcbiAgICBbNCAvKiBXQVRDSF9DTEVBTlVQICovXTogJ3dhdGNoZXIgY2xlYW51cCBmdW5jdGlvbicsXHJcbiAgICBbNSAvKiBOQVRJVkVfRVZFTlRfSEFORExFUiAqL106ICduYXRpdmUgZXZlbnQgaGFuZGxlcicsXHJcbiAgICBbNiAvKiBDT01QT05FTlRfRVZFTlRfSEFORExFUiAqL106ICdjb21wb25lbnQgZXZlbnQgaGFuZGxlcicsXHJcbiAgICBbNyAvKiBWTk9ERV9IT09LICovXTogJ3Zub2RlIGhvb2snLFxyXG4gICAgWzggLyogRElSRUNUSVZFX0hPT0sgKi9dOiAnZGlyZWN0aXZlIGhvb2snLFxyXG4gICAgWzkgLyogVFJBTlNJVElPTl9IT09LICovXTogJ3RyYW5zaXRpb24gaG9vaycsXHJcbiAgICBbMTAgLyogQVBQX0VSUk9SX0hBTkRMRVIgKi9dOiAnYXBwIGVycm9ySGFuZGxlcicsXHJcbiAgICBbMTEgLyogQVBQX1dBUk5fSEFORExFUiAqL106ICdhcHAgd2FybkhhbmRsZXInLFxyXG4gICAgWzEyIC8qIEZVTkNUSU9OX1JFRiAqL106ICdyZWYgZnVuY3Rpb24nLFxyXG4gICAgWzEzIC8qIEFTWU5DX0NPTVBPTkVOVF9MT0FERVIgKi9dOiAnYXN5bmMgY29tcG9uZW50IGxvYWRlcicsXHJcbiAgICBbMTQgLyogU0NIRURVTEVSICovXTogJ3NjaGVkdWxlciBmbHVzaC4gVGhpcyBpcyBsaWtlbHkgYSBWdWUgaW50ZXJuYWxzIGJ1Zy4gJyArXHJcbiAgICAgICAgJ1BsZWFzZSBvcGVuIGFuIGlzc3VlIGF0IGh0dHBzOi8vbmV3LWlzc3VlLnZ1ZWpzLm9yZy8/cmVwbz12dWVqcy9jb3JlJ1xyXG59O1xyXG5mdW5jdGlvbiBjYWxsV2l0aEVycm9ySGFuZGxpbmcoZm4sIGluc3RhbmNlLCB0eXBlLCBhcmdzKSB7XHJcbiAgICBsZXQgcmVzO1xyXG4gICAgdHJ5IHtcclxuICAgICAgICByZXMgPSBhcmdzID8gZm4oLi4uYXJncykgOiBmbigpO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGVycikge1xyXG4gICAgICAgIGhhbmRsZUVycm9yKGVyciwgaW5zdGFuY2UsIHR5cGUpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHJlcztcclxufVxyXG5mdW5jdGlvbiBjYWxsV2l0aEFzeW5jRXJyb3JIYW5kbGluZyhmbiwgaW5zdGFuY2UsIHR5cGUsIGFyZ3MpIHtcclxuICAgIGlmIChpc0Z1bmN0aW9uKGZuKSkge1xyXG4gICAgICAgIGNvbnN0IHJlcyA9IGNhbGxXaXRoRXJyb3JIYW5kbGluZyhmbiwgaW5zdGFuY2UsIHR5cGUsIGFyZ3MpO1xyXG4gICAgICAgIGlmIChyZXMgJiYgaXNQcm9taXNlKHJlcykpIHtcclxuICAgICAgICAgICAgcmVzLmNhdGNoKGVyciA9PiB7XHJcbiAgICAgICAgICAgICAgICBoYW5kbGVFcnJvcihlcnIsIGluc3RhbmNlLCB0eXBlKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByZXM7XHJcbiAgICB9XHJcbiAgICBjb25zdCB2YWx1ZXMgPSBbXTtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZm4ubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICB2YWx1ZXMucHVzaChjYWxsV2l0aEFzeW5jRXJyb3JIYW5kbGluZyhmbltpXSwgaW5zdGFuY2UsIHR5cGUsIGFyZ3MpKTtcclxuICAgIH1cclxuICAgIHJldHVybiB2YWx1ZXM7XHJcbn1cclxuZnVuY3Rpb24gaGFuZGxlRXJyb3IoZXJyLCBpbnN0YW5jZSwgdHlwZSwgdGhyb3dJbkRldiA9IHRydWUpIHtcclxuICAgIGNvbnN0IGNvbnRleHRWTm9kZSA9IGluc3RhbmNlID8gaW5zdGFuY2Uudm5vZGUgOiBudWxsO1xyXG4gICAgaWYgKGluc3RhbmNlKSB7XHJcbiAgICAgICAgbGV0IGN1ciA9IGluc3RhbmNlLnBhcmVudDtcclxuICAgICAgICAvLyB0aGUgZXhwb3NlZCBpbnN0YW5jZSBpcyB0aGUgcmVuZGVyIHByb3h5IHRvIGtlZXAgaXQgY29uc2lzdGVudCB3aXRoIDIueFxyXG4gICAgICAgIGNvbnN0IGV4cG9zZWRJbnN0YW5jZSA9IGluc3RhbmNlLnByb3h5O1xyXG4gICAgICAgIC8vIGluIHByb2R1Y3Rpb24gdGhlIGhvb2sgcmVjZWl2ZXMgb25seSB0aGUgZXJyb3IgY29kZVxyXG4gICAgICAgIGNvbnN0IGVycm9ySW5mbyA9IChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSA/IEVycm9yVHlwZVN0cmluZ3NbdHlwZV0gOiB0eXBlO1xyXG4gICAgICAgIHdoaWxlIChjdXIpIHtcclxuICAgICAgICAgICAgY29uc3QgZXJyb3JDYXB0dXJlZEhvb2tzID0gY3VyLmVjO1xyXG4gICAgICAgICAgICBpZiAoZXJyb3JDYXB0dXJlZEhvb2tzKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGVycm9yQ2FwdHVyZWRIb29rcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChlcnJvckNhcHR1cmVkSG9va3NbaV0oZXJyLCBleHBvc2VkSW5zdGFuY2UsIGVycm9ySW5mbykgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY3VyID0gY3VyLnBhcmVudDtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gYXBwLWxldmVsIGhhbmRsaW5nXHJcbiAgICAgICAgY29uc3QgYXBwRXJyb3JIYW5kbGVyID0gaW5zdGFuY2UuYXBwQ29udGV4dC5jb25maWcuZXJyb3JIYW5kbGVyO1xyXG4gICAgICAgIGlmIChhcHBFcnJvckhhbmRsZXIpIHtcclxuICAgICAgICAgICAgY2FsbFdpdGhFcnJvckhhbmRsaW5nKGFwcEVycm9ySGFuZGxlciwgbnVsbCwgMTAgLyogQVBQX0VSUk9SX0hBTkRMRVIgKi8sIFtlcnIsIGV4cG9zZWRJbnN0YW5jZSwgZXJyb3JJbmZvXSk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBsb2dFcnJvcihlcnIsIHR5cGUsIGNvbnRleHRWTm9kZSwgdGhyb3dJbkRldik7XHJcbn1cclxuZnVuY3Rpb24gbG9nRXJyb3IoZXJyLCB0eXBlLCBjb250ZXh0Vk5vZGUsIHRocm93SW5EZXYgPSB0cnVlKSB7XHJcbiAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XHJcbiAgICAgICAgY29uc3QgaW5mbyA9IEVycm9yVHlwZVN0cmluZ3NbdHlwZV07XHJcbiAgICAgICAgaWYgKGNvbnRleHRWTm9kZSkge1xyXG4gICAgICAgICAgICBwdXNoV2FybmluZ0NvbnRleHQoY29udGV4dFZOb2RlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgd2FybihgVW5oYW5kbGVkIGVycm9yJHtpbmZvID8gYCBkdXJpbmcgZXhlY3V0aW9uIG9mICR7aW5mb31gIDogYGB9YCk7XHJcbiAgICAgICAgaWYgKGNvbnRleHRWTm9kZSkge1xyXG4gICAgICAgICAgICBwb3BXYXJuaW5nQ29udGV4dCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBjcmFzaCBpbiBkZXYgYnkgZGVmYXVsdCBzbyBpdCdzIG1vcmUgbm90aWNlYWJsZVxyXG4gICAgICAgIGlmICh0aHJvd0luRGV2KSB7XHJcbiAgICAgICAgICAgIHRocm93IGVycjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICAvLyByZWNvdmVyIGluIHByb2QgdG8gcmVkdWNlIHRoZSBpbXBhY3Qgb24gZW5kLXVzZXJcclxuICAgICAgICBjb25zb2xlLmVycm9yKGVycik7XHJcbiAgICB9XHJcbn1cblxubGV0IGlzRmx1c2hpbmcgPSBmYWxzZTtcclxubGV0IGlzRmx1c2hQZW5kaW5nID0gZmFsc2U7XHJcbmNvbnN0IHF1ZXVlID0gW107XHJcbmxldCBmbHVzaEluZGV4ID0gMDtcclxuY29uc3QgcGVuZGluZ1ByZUZsdXNoQ2JzID0gW107XHJcbmxldCBhY3RpdmVQcmVGbHVzaENicyA9IG51bGw7XHJcbmxldCBwcmVGbHVzaEluZGV4ID0gMDtcclxuY29uc3QgcGVuZGluZ1Bvc3RGbHVzaENicyA9IFtdO1xyXG5sZXQgYWN0aXZlUG9zdEZsdXNoQ2JzID0gbnVsbDtcclxubGV0IHBvc3RGbHVzaEluZGV4ID0gMDtcclxuY29uc3QgcmVzb2x2ZWRQcm9taXNlID0gLyojX19QVVJFX18qLyBQcm9taXNlLnJlc29sdmUoKTtcclxubGV0IGN1cnJlbnRGbHVzaFByb21pc2UgPSBudWxsO1xyXG5sZXQgY3VycmVudFByZUZsdXNoUGFyZW50Sm9iID0gbnVsbDtcclxuY29uc3QgUkVDVVJTSU9OX0xJTUlUID0gMTAwO1xyXG5mdW5jdGlvbiBuZXh0VGljayhmbikge1xyXG4gICAgY29uc3QgcCA9IGN1cnJlbnRGbHVzaFByb21pc2UgfHwgcmVzb2x2ZWRQcm9taXNlO1xyXG4gICAgcmV0dXJuIGZuID8gcC50aGVuKHRoaXMgPyBmbi5iaW5kKHRoaXMpIDogZm4pIDogcDtcclxufVxyXG4vLyAjMjc2OFxyXG4vLyBVc2UgYmluYXJ5LXNlYXJjaCB0byBmaW5kIGEgc3VpdGFibGUgcG9zaXRpb24gaW4gdGhlIHF1ZXVlLFxyXG4vLyBzbyB0aGF0IHRoZSBxdWV1ZSBtYWludGFpbnMgdGhlIGluY3JlYXNpbmcgb3JkZXIgb2Ygam9iJ3MgaWQsXHJcbi8vIHdoaWNoIGNhbiBwcmV2ZW50IHRoZSBqb2IgZnJvbSBiZWluZyBza2lwcGVkIGFuZCBhbHNvIGNhbiBhdm9pZCByZXBlYXRlZCBwYXRjaGluZy5cclxuZnVuY3Rpb24gZmluZEluc2VydGlvbkluZGV4KGlkKSB7XHJcbiAgICAvLyB0aGUgc3RhcnQgaW5kZXggc2hvdWxkIGJlIGBmbHVzaEluZGV4ICsgMWBcclxuICAgIGxldCBzdGFydCA9IGZsdXNoSW5kZXggKyAxO1xyXG4gICAgbGV0IGVuZCA9IHF1ZXVlLmxlbmd0aDtcclxuICAgIHdoaWxlIChzdGFydCA8IGVuZCkge1xyXG4gICAgICAgIGNvbnN0IG1pZGRsZSA9IChzdGFydCArIGVuZCkgPj4+IDE7XHJcbiAgICAgICAgY29uc3QgbWlkZGxlSm9iSWQgPSBnZXRJZChxdWV1ZVttaWRkbGVdKTtcclxuICAgICAgICBtaWRkbGVKb2JJZCA8IGlkID8gKHN0YXJ0ID0gbWlkZGxlICsgMSkgOiAoZW5kID0gbWlkZGxlKTtcclxuICAgIH1cclxuICAgIHJldHVybiBzdGFydDtcclxufVxyXG5mdW5jdGlvbiBxdWV1ZUpvYihqb2IpIHtcclxuICAgIC8vIHRoZSBkZWR1cGUgc2VhcmNoIHVzZXMgdGhlIHN0YXJ0SW5kZXggYXJndW1lbnQgb2YgQXJyYXkuaW5jbHVkZXMoKVxyXG4gICAgLy8gYnkgZGVmYXVsdCB0aGUgc2VhcmNoIGluZGV4IGluY2x1ZGVzIHRoZSBjdXJyZW50IGpvYiB0aGF0IGlzIGJlaW5nIHJ1blxyXG4gICAgLy8gc28gaXQgY2Fubm90IHJlY3Vyc2l2ZWx5IHRyaWdnZXIgaXRzZWxmIGFnYWluLlxyXG4gICAgLy8gaWYgdGhlIGpvYiBpcyBhIHdhdGNoKCkgY2FsbGJhY2ssIHRoZSBzZWFyY2ggd2lsbCBzdGFydCB3aXRoIGEgKzEgaW5kZXggdG9cclxuICAgIC8vIGFsbG93IGl0IHJlY3Vyc2l2ZWx5IHRyaWdnZXIgaXRzZWxmIC0gaXQgaXMgdGhlIHVzZXIncyByZXNwb25zaWJpbGl0eSB0b1xyXG4gICAgLy8gZW5zdXJlIGl0IGRvZXNuJ3QgZW5kIHVwIGluIGFuIGluZmluaXRlIGxvb3AuXHJcbiAgICBpZiAoKCFxdWV1ZS5sZW5ndGggfHxcclxuICAgICAgICAhcXVldWUuaW5jbHVkZXMoam9iLCBpc0ZsdXNoaW5nICYmIGpvYi5hbGxvd1JlY3Vyc2UgPyBmbHVzaEluZGV4ICsgMSA6IGZsdXNoSW5kZXgpKSAmJlxyXG4gICAgICAgIGpvYiAhPT0gY3VycmVudFByZUZsdXNoUGFyZW50Sm9iKSB7XHJcbiAgICAgICAgaWYgKGpvYi5pZCA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHF1ZXVlLnB1c2goam9iKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHF1ZXVlLnNwbGljZShmaW5kSW5zZXJ0aW9uSW5kZXgoam9iLmlkKSwgMCwgam9iKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcXVldWVGbHVzaCgpO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIHF1ZXVlRmx1c2goKSB7XHJcbiAgICBpZiAoIWlzRmx1c2hpbmcgJiYgIWlzRmx1c2hQZW5kaW5nKSB7XHJcbiAgICAgICAgaXNGbHVzaFBlbmRpbmcgPSB0cnVlO1xyXG4gICAgICAgIGN1cnJlbnRGbHVzaFByb21pc2UgPSByZXNvbHZlZFByb21pc2UudGhlbihmbHVzaEpvYnMpO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIGludmFsaWRhdGVKb2Ioam9iKSB7XHJcbiAgICBjb25zdCBpID0gcXVldWUuaW5kZXhPZihqb2IpO1xyXG4gICAgaWYgKGkgPiBmbHVzaEluZGV4KSB7XHJcbiAgICAgICAgcXVldWUuc3BsaWNlKGksIDEpO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIHF1ZXVlQ2IoY2IsIGFjdGl2ZVF1ZXVlLCBwZW5kaW5nUXVldWUsIGluZGV4KSB7XHJcbiAgICBpZiAoIWlzQXJyYXkoY2IpKSB7XHJcbiAgICAgICAgaWYgKCFhY3RpdmVRdWV1ZSB8fFxyXG4gICAgICAgICAgICAhYWN0aXZlUXVldWUuaW5jbHVkZXMoY2IsIGNiLmFsbG93UmVjdXJzZSA/IGluZGV4ICsgMSA6IGluZGV4KSkge1xyXG4gICAgICAgICAgICBwZW5kaW5nUXVldWUucHVzaChjYik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgLy8gaWYgY2IgaXMgYW4gYXJyYXksIGl0IGlzIGEgY29tcG9uZW50IGxpZmVjeWNsZSBob29rIHdoaWNoIGNhbiBvbmx5IGJlXHJcbiAgICAgICAgLy8gdHJpZ2dlcmVkIGJ5IGEgam9iLCB3aGljaCBpcyBhbHJlYWR5IGRlZHVwZWQgaW4gdGhlIG1haW4gcXVldWUsIHNvXHJcbiAgICAgICAgLy8gd2UgY2FuIHNraXAgZHVwbGljYXRlIGNoZWNrIGhlcmUgdG8gaW1wcm92ZSBwZXJmXHJcbiAgICAgICAgcGVuZGluZ1F1ZXVlLnB1c2goLi4uY2IpO1xyXG4gICAgfVxyXG4gICAgcXVldWVGbHVzaCgpO1xyXG59XHJcbmZ1bmN0aW9uIHF1ZXVlUHJlRmx1c2hDYihjYikge1xyXG4gICAgcXVldWVDYihjYiwgYWN0aXZlUHJlRmx1c2hDYnMsIHBlbmRpbmdQcmVGbHVzaENicywgcHJlRmx1c2hJbmRleCk7XHJcbn1cclxuZnVuY3Rpb24gcXVldWVQb3N0Rmx1c2hDYihjYikge1xyXG4gICAgcXVldWVDYihjYiwgYWN0aXZlUG9zdEZsdXNoQ2JzLCBwZW5kaW5nUG9zdEZsdXNoQ2JzLCBwb3N0Rmx1c2hJbmRleCk7XHJcbn1cclxuZnVuY3Rpb24gZmx1c2hQcmVGbHVzaENicyhzZWVuLCBwYXJlbnRKb2IgPSBudWxsKSB7XHJcbiAgICBpZiAocGVuZGluZ1ByZUZsdXNoQ2JzLmxlbmd0aCkge1xyXG4gICAgICAgIGN1cnJlbnRQcmVGbHVzaFBhcmVudEpvYiA9IHBhcmVudEpvYjtcclxuICAgICAgICBhY3RpdmVQcmVGbHVzaENicyA9IFsuLi5uZXcgU2V0KHBlbmRpbmdQcmVGbHVzaENicyldO1xyXG4gICAgICAgIHBlbmRpbmdQcmVGbHVzaENicy5sZW5ndGggPSAwO1xyXG4gICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcclxuICAgICAgICAgICAgc2VlbiA9IHNlZW4gfHwgbmV3IE1hcCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmb3IgKHByZUZsdXNoSW5kZXggPSAwOyBwcmVGbHVzaEluZGV4IDwgYWN0aXZlUHJlRmx1c2hDYnMubGVuZ3RoOyBwcmVGbHVzaEluZGV4KyspIHtcclxuICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJlxyXG4gICAgICAgICAgICAgICAgY2hlY2tSZWN1cnNpdmVVcGRhdGVzKHNlZW4sIGFjdGl2ZVByZUZsdXNoQ2JzW3ByZUZsdXNoSW5kZXhdKSkge1xyXG4gICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYWN0aXZlUHJlRmx1c2hDYnNbcHJlRmx1c2hJbmRleF0oKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgYWN0aXZlUHJlRmx1c2hDYnMgPSBudWxsO1xyXG4gICAgICAgIHByZUZsdXNoSW5kZXggPSAwO1xyXG4gICAgICAgIGN1cnJlbnRQcmVGbHVzaFBhcmVudEpvYiA9IG51bGw7XHJcbiAgICAgICAgLy8gcmVjdXJzaXZlbHkgZmx1c2ggdW50aWwgaXQgZHJhaW5zXHJcbiAgICAgICAgZmx1c2hQcmVGbHVzaENicyhzZWVuLCBwYXJlbnRKb2IpO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIGZsdXNoUG9zdEZsdXNoQ2JzKHNlZW4pIHtcclxuICAgIGlmIChwZW5kaW5nUG9zdEZsdXNoQ2JzLmxlbmd0aCkge1xyXG4gICAgICAgIGNvbnN0IGRlZHVwZWQgPSBbLi4ubmV3IFNldChwZW5kaW5nUG9zdEZsdXNoQ2JzKV07XHJcbiAgICAgICAgcGVuZGluZ1Bvc3RGbHVzaENicy5sZW5ndGggPSAwO1xyXG4gICAgICAgIC8vICMxOTQ3IGFscmVhZHkgaGFzIGFjdGl2ZSBxdWV1ZSwgbmVzdGVkIGZsdXNoUG9zdEZsdXNoQ2JzIGNhbGxcclxuICAgICAgICBpZiAoYWN0aXZlUG9zdEZsdXNoQ2JzKSB7XHJcbiAgICAgICAgICAgIGFjdGl2ZVBvc3RGbHVzaENicy5wdXNoKC4uLmRlZHVwZWQpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGFjdGl2ZVBvc3RGbHVzaENicyA9IGRlZHVwZWQ7XHJcbiAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xyXG4gICAgICAgICAgICBzZWVuID0gc2VlbiB8fCBuZXcgTWFwKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGFjdGl2ZVBvc3RGbHVzaENicy5zb3J0KChhLCBiKSA9PiBnZXRJZChhKSAtIGdldElkKGIpKTtcclxuICAgICAgICBmb3IgKHBvc3RGbHVzaEluZGV4ID0gMDsgcG9zdEZsdXNoSW5kZXggPCBhY3RpdmVQb3N0Rmx1c2hDYnMubGVuZ3RoOyBwb3N0Rmx1c2hJbmRleCsrKSB7XHJcbiAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiZcclxuICAgICAgICAgICAgICAgIGNoZWNrUmVjdXJzaXZlVXBkYXRlcyhzZWVuLCBhY3RpdmVQb3N0Rmx1c2hDYnNbcG9zdEZsdXNoSW5kZXhdKSkge1xyXG4gICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYWN0aXZlUG9zdEZsdXNoQ2JzW3Bvc3RGbHVzaEluZGV4XSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBhY3RpdmVQb3N0Rmx1c2hDYnMgPSBudWxsO1xyXG4gICAgICAgIHBvc3RGbHVzaEluZGV4ID0gMDtcclxuICAgIH1cclxufVxyXG5jb25zdCBnZXRJZCA9IChqb2IpID0+IGpvYi5pZCA9PSBudWxsID8gSW5maW5pdHkgOiBqb2IuaWQ7XHJcbmZ1bmN0aW9uIGZsdXNoSm9icyhzZWVuKSB7XHJcbiAgICBpc0ZsdXNoUGVuZGluZyA9IGZhbHNlO1xyXG4gICAgaXNGbHVzaGluZyA9IHRydWU7XHJcbiAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XHJcbiAgICAgICAgc2VlbiA9IHNlZW4gfHwgbmV3IE1hcCgpO1xyXG4gICAgfVxyXG4gICAgZmx1c2hQcmVGbHVzaENicyhzZWVuKTtcclxuICAgIC8vIFNvcnQgcXVldWUgYmVmb3JlIGZsdXNoLlxyXG4gICAgLy8gVGhpcyBlbnN1cmVzIHRoYXQ6XHJcbiAgICAvLyAxLiBDb21wb25lbnRzIGFyZSB1cGRhdGVkIGZyb20gcGFyZW50IHRvIGNoaWxkLiAoYmVjYXVzZSBwYXJlbnQgaXMgYWx3YXlzXHJcbiAgICAvLyAgICBjcmVhdGVkIGJlZm9yZSB0aGUgY2hpbGQgc28gaXRzIHJlbmRlciBlZmZlY3Qgd2lsbCBoYXZlIHNtYWxsZXJcclxuICAgIC8vICAgIHByaW9yaXR5IG51bWJlcilcclxuICAgIC8vIDIuIElmIGEgY29tcG9uZW50IGlzIHVubW91bnRlZCBkdXJpbmcgYSBwYXJlbnQgY29tcG9uZW50J3MgdXBkYXRlLFxyXG4gICAgLy8gICAgaXRzIHVwZGF0ZSBjYW4gYmUgc2tpcHBlZC5cclxuICAgIHF1ZXVlLnNvcnQoKGEsIGIpID0+IGdldElkKGEpIC0gZ2V0SWQoYikpO1xyXG4gICAgLy8gY29uZGl0aW9uYWwgdXNhZ2Ugb2YgY2hlY2tSZWN1cnNpdmVVcGRhdGUgbXVzdCBiZSBkZXRlcm1pbmVkIG91dCBvZlxyXG4gICAgLy8gdHJ5IC4uLiBjYXRjaCBibG9jayBzaW5jZSBSb2xsdXAgYnkgZGVmYXVsdCBkZS1vcHRpbWl6ZXMgdHJlZXNoYWtpbmdcclxuICAgIC8vIGluc2lkZSB0cnktY2F0Y2guIFRoaXMgY2FuIGxlYXZlIGFsbCB3YXJuaW5nIGNvZGUgdW5zaGFrZWQuIEFsdGhvdWdoXHJcbiAgICAvLyB0aGV5IHdvdWxkIGdldCBldmVudHVhbGx5IHNoYWtlbiBieSBhIG1pbmlmaWVyIGxpa2UgdGVyc2VyLCBzb21lIG1pbmlmaWVyc1xyXG4gICAgLy8gd291bGQgZmFpbCB0byBkbyB0aGF0IChlLmcuIGh0dHBzOi8vZ2l0aHViLmNvbS9ldmFudy9lc2J1aWxkL2lzc3Vlcy8xNjEwKVxyXG4gICAgY29uc3QgY2hlY2sgPSAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJylcclxuICAgICAgICA/IChqb2IpID0+IGNoZWNrUmVjdXJzaXZlVXBkYXRlcyhzZWVuLCBqb2IpXHJcbiAgICAgICAgOiBOT09QO1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBmb3IgKGZsdXNoSW5kZXggPSAwOyBmbHVzaEluZGV4IDwgcXVldWUubGVuZ3RoOyBmbHVzaEluZGV4KyspIHtcclxuICAgICAgICAgICAgY29uc3Qgam9iID0gcXVldWVbZmx1c2hJbmRleF07XHJcbiAgICAgICAgICAgIGlmIChqb2IgJiYgam9iLmFjdGl2ZSAhPT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgY2hlY2soam9iKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coYHJ1bm5pbmc6YCwgam9iLmlkKVxyXG4gICAgICAgICAgICAgICAgY2FsbFdpdGhFcnJvckhhbmRsaW5nKGpvYiwgbnVsbCwgMTQgLyogU0NIRURVTEVSICovKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGZpbmFsbHkge1xyXG4gICAgICAgIGZsdXNoSW5kZXggPSAwO1xyXG4gICAgICAgIHF1ZXVlLmxlbmd0aCA9IDA7XHJcbiAgICAgICAgZmx1c2hQb3N0Rmx1c2hDYnMoc2Vlbik7XHJcbiAgICAgICAgaXNGbHVzaGluZyA9IGZhbHNlO1xyXG4gICAgICAgIGN1cnJlbnRGbHVzaFByb21pc2UgPSBudWxsO1xyXG4gICAgICAgIC8vIHNvbWUgcG9zdEZsdXNoQ2IgcXVldWVkIGpvYnMhXHJcbiAgICAgICAgLy8ga2VlcCBmbHVzaGluZyB1bnRpbCBpdCBkcmFpbnMuXHJcbiAgICAgICAgaWYgKHF1ZXVlLmxlbmd0aCB8fFxyXG4gICAgICAgICAgICBwZW5kaW5nUHJlRmx1c2hDYnMubGVuZ3RoIHx8XHJcbiAgICAgICAgICAgIHBlbmRpbmdQb3N0Rmx1c2hDYnMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIGZsdXNoSm9icyhzZWVuKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gY2hlY2tSZWN1cnNpdmVVcGRhdGVzKHNlZW4sIGZuKSB7XHJcbiAgICBpZiAoIXNlZW4uaGFzKGZuKSkge1xyXG4gICAgICAgIHNlZW4uc2V0KGZuLCAxKTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIGNvbnN0IGNvdW50ID0gc2Vlbi5nZXQoZm4pO1xyXG4gICAgICAgIGlmIChjb3VudCA+IFJFQ1VSU0lPTl9MSU1JVCkge1xyXG4gICAgICAgICAgICBjb25zdCBpbnN0YW5jZSA9IGZuLm93bmVySW5zdGFuY2U7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbXBvbmVudE5hbWUgPSBpbnN0YW5jZSAmJiBnZXRDb21wb25lbnROYW1lKGluc3RhbmNlLnR5cGUpO1xyXG4gICAgICAgICAgICB3YXJuKGBNYXhpbXVtIHJlY3Vyc2l2ZSB1cGRhdGVzIGV4Y2VlZGVkJHtjb21wb25lbnROYW1lID8gYCBpbiBjb21wb25lbnQgPCR7Y29tcG9uZW50TmFtZX0+YCA6IGBgfS4gYCArXHJcbiAgICAgICAgICAgICAgICBgVGhpcyBtZWFucyB5b3UgaGF2ZSBhIHJlYWN0aXZlIGVmZmVjdCB0aGF0IGlzIG11dGF0aW5nIGl0cyBvd24gYCArXHJcbiAgICAgICAgICAgICAgICBgZGVwZW5kZW5jaWVzIGFuZCB0aHVzIHJlY3Vyc2l2ZWx5IHRyaWdnZXJpbmcgaXRzZWxmLiBQb3NzaWJsZSBzb3VyY2VzIGAgK1xyXG4gICAgICAgICAgICAgICAgYGluY2x1ZGUgY29tcG9uZW50IHRlbXBsYXRlLCByZW5kZXIgZnVuY3Rpb24sIHVwZGF0ZWQgaG9vayBvciBgICtcclxuICAgICAgICAgICAgICAgIGB3YXRjaGVyIHNvdXJjZSBmdW5jdGlvbi5gKTtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBzZWVuLnNldChmbiwgY291bnQgKyAxKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cblxuLyogZXNsaW50LWRpc2FibGUgbm8tcmVzdHJpY3RlZC1nbG9iYWxzICovXHJcbmxldCBpc0htclVwZGF0aW5nID0gZmFsc2U7XHJcbmNvbnN0IGhtckRpcnR5Q29tcG9uZW50cyA9IG5ldyBTZXQoKTtcclxuLy8gRXhwb3NlIHRoZSBITVIgcnVudGltZSBvbiB0aGUgZ2xvYmFsIG9iamVjdFxyXG4vLyBUaGlzIG1ha2VzIGl0IGVudGlyZWx5IHRyZWUtc2hha2FibGUgd2l0aG91dCBwb2xsdXRpbmcgdGhlIGV4cG9ydHMgYW5kIG1ha2VzXHJcbi8vIGl0IGVhc2llciB0byBiZSB1c2VkIGluIHRvb2xpbmdzIGxpa2UgdnVlLWxvYWRlclxyXG4vLyBOb3RlOiBmb3IgYSBjb21wb25lbnQgdG8gYmUgZWxpZ2libGUgZm9yIEhNUiBpdCBhbHNvIG5lZWRzIHRoZSBfX2htcklkIG9wdGlvblxyXG4vLyB0byBiZSBzZXQgc28gdGhhdCBpdHMgaW5zdGFuY2VzIGNhbiBiZSByZWdpc3RlcmVkIC8gcmVtb3ZlZC5cclxuaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xyXG4gICAgZ2V0R2xvYmFsVGhpcygpLl9fVlVFX0hNUl9SVU5USU1FX18gPSB7XHJcbiAgICAgICAgY3JlYXRlUmVjb3JkOiB0cnlXcmFwKGNyZWF0ZVJlY29yZCksXHJcbiAgICAgICAgcmVyZW5kZXI6IHRyeVdyYXAocmVyZW5kZXIpLFxyXG4gICAgICAgIHJlbG9hZDogdHJ5V3JhcChyZWxvYWQpXHJcbiAgICB9O1xyXG59XHJcbmNvbnN0IG1hcCA9IG5ldyBNYXAoKTtcclxuZnVuY3Rpb24gcmVnaXN0ZXJITVIoaW5zdGFuY2UpIHtcclxuICAgIGNvbnN0IGlkID0gaW5zdGFuY2UudHlwZS5fX2htcklkO1xyXG4gICAgbGV0IHJlY29yZCA9IG1hcC5nZXQoaWQpO1xyXG4gICAgaWYgKCFyZWNvcmQpIHtcclxuICAgICAgICBjcmVhdGVSZWNvcmQoaWQsIGluc3RhbmNlLnR5cGUpO1xyXG4gICAgICAgIHJlY29yZCA9IG1hcC5nZXQoaWQpO1xyXG4gICAgfVxyXG4gICAgcmVjb3JkLmluc3RhbmNlcy5hZGQoaW5zdGFuY2UpO1xyXG59XHJcbmZ1bmN0aW9uIHVucmVnaXN0ZXJITVIoaW5zdGFuY2UpIHtcclxuICAgIG1hcC5nZXQoaW5zdGFuY2UudHlwZS5fX2htcklkKS5pbnN0YW5jZXMuZGVsZXRlKGluc3RhbmNlKTtcclxufVxyXG5mdW5jdGlvbiBjcmVhdGVSZWNvcmQoaWQsIGluaXRpYWxEZWYpIHtcclxuICAgIGlmIChtYXAuaGFzKGlkKSkge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIG1hcC5zZXQoaWQsIHtcclxuICAgICAgICBpbml0aWFsRGVmOiBub3JtYWxpemVDbGFzc0NvbXBvbmVudChpbml0aWFsRGVmKSxcclxuICAgICAgICBpbnN0YW5jZXM6IG5ldyBTZXQoKVxyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gdHJ1ZTtcclxufVxyXG5mdW5jdGlvbiBub3JtYWxpemVDbGFzc0NvbXBvbmVudChjb21wb25lbnQpIHtcclxuICAgIHJldHVybiBpc0NsYXNzQ29tcG9uZW50KGNvbXBvbmVudCkgPyBjb21wb25lbnQuX192Y2NPcHRzIDogY29tcG9uZW50O1xyXG59XHJcbmZ1bmN0aW9uIHJlcmVuZGVyKGlkLCBuZXdSZW5kZXIpIHtcclxuICAgIGNvbnN0IHJlY29yZCA9IG1hcC5nZXQoaWQpO1xyXG4gICAgaWYgKCFyZWNvcmQpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICAvLyB1cGRhdGUgaW5pdGlhbCByZWNvcmQgKGZvciBub3QteWV0LXJlbmRlcmVkIGNvbXBvbmVudClcclxuICAgIHJlY29yZC5pbml0aWFsRGVmLnJlbmRlciA9IG5ld1JlbmRlcjtcclxuICAgIFsuLi5yZWNvcmQuaW5zdGFuY2VzXS5mb3JFYWNoKGluc3RhbmNlID0+IHtcclxuICAgICAgICBpZiAobmV3UmVuZGVyKSB7XHJcbiAgICAgICAgICAgIGluc3RhbmNlLnJlbmRlciA9IG5ld1JlbmRlcjtcclxuICAgICAgICAgICAgbm9ybWFsaXplQ2xhc3NDb21wb25lbnQoaW5zdGFuY2UudHlwZSkucmVuZGVyID0gbmV3UmVuZGVyO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnN0YW5jZS5yZW5kZXJDYWNoZSA9IFtdO1xyXG4gICAgICAgIC8vIHRoaXMgZmxhZyBmb3JjZXMgY2hpbGQgY29tcG9uZW50cyB3aXRoIHNsb3QgY29udGVudCB0byB1cGRhdGVcclxuICAgICAgICBpc0htclVwZGF0aW5nID0gdHJ1ZTtcclxuICAgICAgICBpbnN0YW5jZS51cGRhdGUoKTtcclxuICAgICAgICBpc0htclVwZGF0aW5nID0gZmFsc2U7XHJcbiAgICB9KTtcclxufVxyXG5mdW5jdGlvbiByZWxvYWQoaWQsIG5ld0NvbXApIHtcclxuICAgIGNvbnN0IHJlY29yZCA9IG1hcC5nZXQoaWQpO1xyXG4gICAgaWYgKCFyZWNvcmQpXHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgbmV3Q29tcCA9IG5vcm1hbGl6ZUNsYXNzQ29tcG9uZW50KG5ld0NvbXApO1xyXG4gICAgLy8gdXBkYXRlIGluaXRpYWwgZGVmIChmb3Igbm90LXlldC1yZW5kZXJlZCBjb21wb25lbnRzKVxyXG4gICAgdXBkYXRlQ29tcG9uZW50RGVmKHJlY29yZC5pbml0aWFsRGVmLCBuZXdDb21wKTtcclxuICAgIC8vIGNyZWF0ZSBhIHNuYXBzaG90IHdoaWNoIGF2b2lkcyB0aGUgc2V0IGJlaW5nIG11dGF0ZWQgZHVyaW5nIHVwZGF0ZXNcclxuICAgIGNvbnN0IGluc3RhbmNlcyA9IFsuLi5yZWNvcmQuaW5zdGFuY2VzXTtcclxuICAgIGZvciAoY29uc3QgaW5zdGFuY2Ugb2YgaW5zdGFuY2VzKSB7XHJcbiAgICAgICAgY29uc3Qgb2xkQ29tcCA9IG5vcm1hbGl6ZUNsYXNzQ29tcG9uZW50KGluc3RhbmNlLnR5cGUpO1xyXG4gICAgICAgIGlmICghaG1yRGlydHlDb21wb25lbnRzLmhhcyhvbGRDb21wKSkge1xyXG4gICAgICAgICAgICAvLyAxLiBVcGRhdGUgZXhpc3RpbmcgY29tcCBkZWZpbml0aW9uIHRvIG1hdGNoIG5ldyBvbmVcclxuICAgICAgICAgICAgaWYgKG9sZENvbXAgIT09IHJlY29yZC5pbml0aWFsRGVmKSB7XHJcbiAgICAgICAgICAgICAgICB1cGRhdGVDb21wb25lbnREZWYob2xkQ29tcCwgbmV3Q29tcCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gMi4gbWFyayBkZWZpbml0aW9uIGRpcnR5LiBUaGlzIGZvcmNlcyB0aGUgcmVuZGVyZXIgdG8gcmVwbGFjZSB0aGVcclxuICAgICAgICAgICAgLy8gY29tcG9uZW50IG9uIHBhdGNoLlxyXG4gICAgICAgICAgICBobXJEaXJ0eUNvbXBvbmVudHMuYWRkKG9sZENvbXApO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyAzLiBpbnZhbGlkYXRlIG9wdGlvbnMgcmVzb2x1dGlvbiBjYWNoZVxyXG4gICAgICAgIGluc3RhbmNlLmFwcENvbnRleHQub3B0aW9uc0NhY2hlLmRlbGV0ZShpbnN0YW5jZS50eXBlKTtcclxuICAgICAgICAvLyA0LiBhY3R1YWxseSB1cGRhdGVcclxuICAgICAgICBpZiAoaW5zdGFuY2UuY2VSZWxvYWQpIHtcclxuICAgICAgICAgICAgLy8gY3VzdG9tIGVsZW1lbnRcclxuICAgICAgICAgICAgaG1yRGlydHlDb21wb25lbnRzLmFkZChvbGRDb21wKTtcclxuICAgICAgICAgICAgaW5zdGFuY2UuY2VSZWxvYWQobmV3Q29tcC5zdHlsZXMpO1xyXG4gICAgICAgICAgICBobXJEaXJ0eUNvbXBvbmVudHMuZGVsZXRlKG9sZENvbXApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChpbnN0YW5jZS5wYXJlbnQpIHtcclxuICAgICAgICAgICAgLy8gNC4gRm9yY2UgdGhlIHBhcmVudCBpbnN0YW5jZSB0byByZS1yZW5kZXIuIFRoaXMgd2lsbCBjYXVzZSBhbGwgdXBkYXRlZFxyXG4gICAgICAgICAgICAvLyBjb21wb25lbnRzIHRvIGJlIHVubW91bnRlZCBhbmQgcmUtbW91bnRlZC4gUXVldWUgdGhlIHVwZGF0ZSBzbyB0aGF0IHdlXHJcbiAgICAgICAgICAgIC8vIGRvbid0IGVuZCB1cCBmb3JjaW5nIHRoZSBzYW1lIHBhcmVudCB0byByZS1yZW5kZXIgbXVsdGlwbGUgdGltZXMuXHJcbiAgICAgICAgICAgIHF1ZXVlSm9iKGluc3RhbmNlLnBhcmVudC51cGRhdGUpO1xyXG4gICAgICAgICAgICAvLyBpbnN0YW5jZSBpcyB0aGUgaW5uZXIgY29tcG9uZW50IG9mIGFuIGFzeW5jIGN1c3RvbSBlbGVtZW50XHJcbiAgICAgICAgICAgIC8vIGludm9rZSB0byByZXNldCBzdHlsZXNcclxuICAgICAgICAgICAgaWYgKGluc3RhbmNlLnBhcmVudC50eXBlLl9fYXN5bmNMb2FkZXIgJiZcclxuICAgICAgICAgICAgICAgIGluc3RhbmNlLnBhcmVudC5jZVJlbG9hZCkge1xyXG4gICAgICAgICAgICAgICAgaW5zdGFuY2UucGFyZW50LmNlUmVsb2FkKG5ld0NvbXAuc3R5bGVzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChpbnN0YW5jZS5hcHBDb250ZXh0LnJlbG9hZCkge1xyXG4gICAgICAgICAgICAvLyByb290IGluc3RhbmNlIG1vdW50ZWQgdmlhIGNyZWF0ZUFwcCgpIGhhcyBhIHJlbG9hZCBtZXRob2RcclxuICAgICAgICAgICAgaW5zdGFuY2UuYXBwQ29udGV4dC5yZWxvYWQoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICAgICAgLy8gcm9vdCBpbnN0YW5jZSBpbnNpZGUgdHJlZSBjcmVhdGVkIHZpYSByYXcgcmVuZGVyKCkuIEZvcmNlIHJlbG9hZC5cclxuICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgY29uc29sZS53YXJuKCdbSE1SXSBSb290IG9yIG1hbnVhbGx5IG1vdW50ZWQgaW5zdGFuY2UgbW9kaWZpZWQuIEZ1bGwgcmVsb2FkIHJlcXVpcmVkLicpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8vIDUuIG1ha2Ugc3VyZSB0byBjbGVhbnVwIGRpcnR5IGhtciBjb21wb25lbnRzIGFmdGVyIHVwZGF0ZVxyXG4gICAgcXVldWVQb3N0Rmx1c2hDYigoKSA9PiB7XHJcbiAgICAgICAgZm9yIChjb25zdCBpbnN0YW5jZSBvZiBpbnN0YW5jZXMpIHtcclxuICAgICAgICAgICAgaG1yRGlydHlDb21wb25lbnRzLmRlbGV0ZShub3JtYWxpemVDbGFzc0NvbXBvbmVudChpbnN0YW5jZS50eXBlKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn1cclxuZnVuY3Rpb24gdXBkYXRlQ29tcG9uZW50RGVmKG9sZENvbXAsIG5ld0NvbXApIHtcclxuICAgIGV4dGVuZChvbGRDb21wLCBuZXdDb21wKTtcclxuICAgIGZvciAoY29uc3Qga2V5IGluIG9sZENvbXApIHtcclxuICAgICAgICBpZiAoa2V5ICE9PSAnX19maWxlJyAmJiAhKGtleSBpbiBuZXdDb21wKSkge1xyXG4gICAgICAgICAgICBkZWxldGUgb2xkQ29tcFtrZXldO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiB0cnlXcmFwKGZuKSB7XHJcbiAgICByZXR1cm4gKGlkLCBhcmcpID0+IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICByZXR1cm4gZm4oaWQsIGFyZyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZSk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUud2FybihgW0hNUl0gU29tZXRoaW5nIHdlbnQgd3JvbmcgZHVyaW5nIFZ1ZSBjb21wb25lbnQgaG90LXJlbG9hZC4gYCArXHJcbiAgICAgICAgICAgICAgICBgRnVsbCByZWxvYWQgcmVxdWlyZWQuYCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxufVxuXG5sZXQgZGV2dG9vbHM7XHJcbmxldCBidWZmZXIgPSBbXTtcclxubGV0IGRldnRvb2xzTm90SW5zdGFsbGVkID0gZmFsc2U7XHJcbmZ1bmN0aW9uIGVtaXQoZXZlbnQsIC4uLmFyZ3MpIHtcclxuICAgIGlmIChkZXZ0b29scykge1xyXG4gICAgICAgIGRldnRvb2xzLmVtaXQoZXZlbnQsIC4uLmFyZ3MpO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoIWRldnRvb2xzTm90SW5zdGFsbGVkKSB7XHJcbiAgICAgICAgYnVmZmVyLnB1c2goeyBldmVudCwgYXJncyB9KTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBzZXREZXZ0b29sc0hvb2soaG9vaywgdGFyZ2V0KSB7XHJcbiAgICB2YXIgX2EsIF9iO1xyXG4gICAgZGV2dG9vbHMgPSBob29rO1xyXG4gICAgaWYgKGRldnRvb2xzKSB7XHJcbiAgICAgICAgZGV2dG9vbHMuZW5hYmxlZCA9IHRydWU7XHJcbiAgICAgICAgYnVmZmVyLmZvckVhY2goKHsgZXZlbnQsIGFyZ3MgfSkgPT4gZGV2dG9vbHMuZW1pdChldmVudCwgLi4uYXJncykpO1xyXG4gICAgICAgIGJ1ZmZlciA9IFtdO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoXHJcbiAgICAvLyBoYW5kbGUgbGF0ZSBkZXZ0b29scyBpbmplY3Rpb24gLSBvbmx5IGRvIHRoaXMgaWYgd2UgYXJlIGluIGFuIGFjdHVhbFxyXG4gICAgLy8gYnJvd3NlciBlbnZpcm9ubWVudCB0byBhdm9pZCB0aGUgdGltZXIgaGFuZGxlIHN0YWxsaW5nIHRlc3QgcnVubmVyIGV4aXRcclxuICAgIC8vICgjNDgxNSlcclxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZXN0cmljdGVkLWdsb2JhbHNcclxuICAgIHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmXHJcbiAgICAgICAgLy8gc29tZSBlbnZzIG1vY2sgd2luZG93IGJ1dCBub3QgZnVsbHlcclxuICAgICAgICB3aW5kb3cuSFRNTEVsZW1lbnQgJiZcclxuICAgICAgICAvLyBhbHNvIGV4Y2x1ZGUganNkb21cclxuICAgICAgICAhKChfYiA9IChfYSA9IHdpbmRvdy5uYXZpZ2F0b3IpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS51c2VyQWdlbnQpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi5pbmNsdWRlcygnanNkb20nKSkpIHtcclxuICAgICAgICBjb25zdCByZXBsYXkgPSAodGFyZ2V0Ll9fVlVFX0RFVlRPT0xTX0hPT0tfUkVQTEFZX18gPVxyXG4gICAgICAgICAgICB0YXJnZXQuX19WVUVfREVWVE9PTFNfSE9PS19SRVBMQVlfXyB8fCBbXSk7XHJcbiAgICAgICAgcmVwbGF5LnB1c2goKG5ld0hvb2spID0+IHtcclxuICAgICAgICAgICAgc2V0RGV2dG9vbHNIb29rKG5ld0hvb2ssIHRhcmdldCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy8gY2xlYXIgYnVmZmVyIGFmdGVyIDNzIC0gdGhlIHVzZXIgcHJvYmFibHkgZG9lc24ndCBoYXZlIGRldnRvb2xzIGluc3RhbGxlZFxyXG4gICAgICAgIC8vIGF0IGFsbCwgYW5kIGtlZXBpbmcgdGhlIGJ1ZmZlciB3aWxsIGNhdXNlIG1lbW9yeSBsZWFrcyAoIzQ3MzgpXHJcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgIGlmICghZGV2dG9vbHMpIHtcclxuICAgICAgICAgICAgICAgIHRhcmdldC5fX1ZVRV9ERVZUT09MU19IT09LX1JFUExBWV9fID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIGRldnRvb2xzTm90SW5zdGFsbGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIGJ1ZmZlciA9IFtdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSwgMzAwMCk7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICAvLyBub24tYnJvd3NlciBlbnYsIGFzc3VtZSBub3QgaW5zdGFsbGVkXHJcbiAgICAgICAgZGV2dG9vbHNOb3RJbnN0YWxsZWQgPSB0cnVlO1xyXG4gICAgICAgIGJ1ZmZlciA9IFtdO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIGRldnRvb2xzSW5pdEFwcChhcHAsIHZlcnNpb24pIHtcclxuICAgIGVtaXQoXCJhcHA6aW5pdFwiIC8qIEFQUF9JTklUICovLCBhcHAsIHZlcnNpb24sIHtcclxuICAgICAgICBGcmFnbWVudCxcclxuICAgICAgICBUZXh0LFxyXG4gICAgICAgIENvbW1lbnQsXHJcbiAgICAgICAgU3RhdGljXHJcbiAgICB9KTtcclxufVxyXG5mdW5jdGlvbiBkZXZ0b29sc1VubW91bnRBcHAoYXBwKSB7XHJcbiAgICBlbWl0KFwiYXBwOnVubW91bnRcIiAvKiBBUFBfVU5NT1VOVCAqLywgYXBwKTtcclxufVxyXG5jb25zdCBkZXZ0b29sc0NvbXBvbmVudEFkZGVkID0gLyojX19QVVJFX18qLyBjcmVhdGVEZXZ0b29sc0NvbXBvbmVudEhvb2soXCJjb21wb25lbnQ6YWRkZWRcIiAvKiBDT01QT05FTlRfQURERUQgKi8pO1xyXG5jb25zdCBkZXZ0b29sc0NvbXBvbmVudFVwZGF0ZWQgPSBcclxuLyojX19QVVJFX18qLyBjcmVhdGVEZXZ0b29sc0NvbXBvbmVudEhvb2soXCJjb21wb25lbnQ6dXBkYXRlZFwiIC8qIENPTVBPTkVOVF9VUERBVEVEICovKTtcclxuY29uc3QgZGV2dG9vbHNDb21wb25lbnRSZW1vdmVkID0gXHJcbi8qI19fUFVSRV9fKi8gY3JlYXRlRGV2dG9vbHNDb21wb25lbnRIb29rKFwiY29tcG9uZW50OnJlbW92ZWRcIiAvKiBDT01QT05FTlRfUkVNT1ZFRCAqLyk7XHJcbmZ1bmN0aW9uIGNyZWF0ZURldnRvb2xzQ29tcG9uZW50SG9vayhob29rKSB7XHJcbiAgICByZXR1cm4gKGNvbXBvbmVudCkgPT4ge1xyXG4gICAgICAgIGVtaXQoaG9vaywgY29tcG9uZW50LmFwcENvbnRleHQuYXBwLCBjb21wb25lbnQudWlkLCBjb21wb25lbnQucGFyZW50ID8gY29tcG9uZW50LnBhcmVudC51aWQgOiB1bmRlZmluZWQsIGNvbXBvbmVudCk7XHJcbiAgICB9O1xyXG59XHJcbmNvbnN0IGRldnRvb2xzUGVyZlN0YXJ0ID0gLyojX19QVVJFX18qLyBjcmVhdGVEZXZ0b29sc1BlcmZvcm1hbmNlSG9vayhcInBlcmY6c3RhcnRcIiAvKiBQRVJGT1JNQU5DRV9TVEFSVCAqLyk7XHJcbmNvbnN0IGRldnRvb2xzUGVyZkVuZCA9IC8qI19fUFVSRV9fKi8gY3JlYXRlRGV2dG9vbHNQZXJmb3JtYW5jZUhvb2soXCJwZXJmOmVuZFwiIC8qIFBFUkZPUk1BTkNFX0VORCAqLyk7XHJcbmZ1bmN0aW9uIGNyZWF0ZURldnRvb2xzUGVyZm9ybWFuY2VIb29rKGhvb2spIHtcclxuICAgIHJldHVybiAoY29tcG9uZW50LCB0eXBlLCB0aW1lKSA9PiB7XHJcbiAgICAgICAgZW1pdChob29rLCBjb21wb25lbnQuYXBwQ29udGV4dC5hcHAsIGNvbXBvbmVudC51aWQsIGNvbXBvbmVudCwgdHlwZSwgdGltZSk7XHJcbiAgICB9O1xyXG59XHJcbmZ1bmN0aW9uIGRldnRvb2xzQ29tcG9uZW50RW1pdChjb21wb25lbnQsIGV2ZW50LCBwYXJhbXMpIHtcclxuICAgIGVtaXQoXCJjb21wb25lbnQ6ZW1pdFwiIC8qIENPTVBPTkVOVF9FTUlUICovLCBjb21wb25lbnQuYXBwQ29udGV4dC5hcHAsIGNvbXBvbmVudCwgZXZlbnQsIHBhcmFtcyk7XHJcbn1cblxuZnVuY3Rpb24gZW1pdCQxKGluc3RhbmNlLCBldmVudCwgLi4ucmF3QXJncykge1xyXG4gICAgaWYgKGluc3RhbmNlLmlzVW5tb3VudGVkKVxyXG4gICAgICAgIHJldHVybjtcclxuICAgIGNvbnN0IHByb3BzID0gaW5zdGFuY2Uudm5vZGUucHJvcHMgfHwgRU1QVFlfT0JKO1xyXG4gICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xyXG4gICAgICAgIGNvbnN0IHsgZW1pdHNPcHRpb25zLCBwcm9wc09wdGlvbnM6IFtwcm9wc09wdGlvbnNdIH0gPSBpbnN0YW5jZTtcclxuICAgICAgICBpZiAoZW1pdHNPcHRpb25zKSB7XHJcbiAgICAgICAgICAgIGlmICghKGV2ZW50IGluIGVtaXRzT3B0aW9ucykgJiZcclxuICAgICAgICAgICAgICAgICEoZmFsc2UgKSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFwcm9wc09wdGlvbnMgfHwgISh0b0hhbmRsZXJLZXkoZXZlbnQpIGluIHByb3BzT3B0aW9ucykpIHtcclxuICAgICAgICAgICAgICAgICAgICB3YXJuKGBDb21wb25lbnQgZW1pdHRlZCBldmVudCBcIiR7ZXZlbnR9XCIgYnV0IGl0IGlzIG5laXRoZXIgZGVjbGFyZWQgaW4gYCArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGB0aGUgZW1pdHMgb3B0aW9uIG5vciBhcyBhbiBcIiR7dG9IYW5kbGVyS2V5KGV2ZW50KX1cIiBwcm9wLmApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdmFsaWRhdG9yID0gZW1pdHNPcHRpb25zW2V2ZW50XTtcclxuICAgICAgICAgICAgICAgIGlmIChpc0Z1bmN0aW9uKHZhbGlkYXRvcikpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBpc1ZhbGlkID0gdmFsaWRhdG9yKC4uLnJhd0FyZ3MpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghaXNWYWxpZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB3YXJuKGBJbnZhbGlkIGV2ZW50IGFyZ3VtZW50czogZXZlbnQgdmFsaWRhdGlvbiBmYWlsZWQgZm9yIGV2ZW50IFwiJHtldmVudH1cIi5gKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBsZXQgYXJncyA9IHJhd0FyZ3M7XHJcbiAgICBjb25zdCBpc01vZGVsTGlzdGVuZXIgPSBldmVudC5zdGFydHNXaXRoKCd1cGRhdGU6Jyk7XHJcbiAgICAvLyBmb3Igdi1tb2RlbCB1cGRhdGU6eHh4IGV2ZW50cywgYXBwbHkgbW9kaWZpZXJzIG9uIGFyZ3NcclxuICAgIGNvbnN0IG1vZGVsQXJnID0gaXNNb2RlbExpc3RlbmVyICYmIGV2ZW50LnNsaWNlKDcpO1xyXG4gICAgaWYgKG1vZGVsQXJnICYmIG1vZGVsQXJnIGluIHByb3BzKSB7XHJcbiAgICAgICAgY29uc3QgbW9kaWZpZXJzS2V5ID0gYCR7bW9kZWxBcmcgPT09ICdtb2RlbFZhbHVlJyA/ICdtb2RlbCcgOiBtb2RlbEFyZ31Nb2RpZmllcnNgO1xyXG4gICAgICAgIGNvbnN0IHsgbnVtYmVyLCB0cmltIH0gPSBwcm9wc1ttb2RpZmllcnNLZXldIHx8IEVNUFRZX09CSjtcclxuICAgICAgICBpZiAodHJpbSkge1xyXG4gICAgICAgICAgICBhcmdzID0gcmF3QXJncy5tYXAoYSA9PiBhLnRyaW0oKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKG51bWJlcikge1xyXG4gICAgICAgICAgICBhcmdzID0gcmF3QXJncy5tYXAodG9OdW1iZXIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgfHwgX19WVUVfUFJPRF9ERVZUT09MU19fKSB7XHJcbiAgICAgICAgZGV2dG9vbHNDb21wb25lbnRFbWl0KGluc3RhbmNlLCBldmVudCwgYXJncyk7XHJcbiAgICB9XHJcbiAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XHJcbiAgICAgICAgY29uc3QgbG93ZXJDYXNlRXZlbnQgPSBldmVudC50b0xvd2VyQ2FzZSgpO1xyXG4gICAgICAgIGlmIChsb3dlckNhc2VFdmVudCAhPT0gZXZlbnQgJiYgcHJvcHNbdG9IYW5kbGVyS2V5KGxvd2VyQ2FzZUV2ZW50KV0pIHtcclxuICAgICAgICAgICAgd2FybihgRXZlbnQgXCIke2xvd2VyQ2FzZUV2ZW50fVwiIGlzIGVtaXR0ZWQgaW4gY29tcG9uZW50IGAgK1xyXG4gICAgICAgICAgICAgICAgYCR7Zm9ybWF0Q29tcG9uZW50TmFtZShpbnN0YW5jZSwgaW5zdGFuY2UudHlwZSl9IGJ1dCB0aGUgaGFuZGxlciBpcyByZWdpc3RlcmVkIGZvciBcIiR7ZXZlbnR9XCIuIGAgK1xyXG4gICAgICAgICAgICAgICAgYE5vdGUgdGhhdCBIVE1MIGF0dHJpYnV0ZXMgYXJlIGNhc2UtaW5zZW5zaXRpdmUgYW5kIHlvdSBjYW5ub3QgdXNlIGAgK1xyXG4gICAgICAgICAgICAgICAgYHYtb24gdG8gbGlzdGVuIHRvIGNhbWVsQ2FzZSBldmVudHMgd2hlbiB1c2luZyBpbi1ET00gdGVtcGxhdGVzLiBgICtcclxuICAgICAgICAgICAgICAgIGBZb3Ugc2hvdWxkIHByb2JhYmx5IHVzZSBcIiR7aHlwaGVuYXRlKGV2ZW50KX1cIiBpbnN0ZWFkIG9mIFwiJHtldmVudH1cIi5gKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBsZXQgaGFuZGxlck5hbWU7XHJcbiAgICBsZXQgaGFuZGxlciA9IHByb3BzWyhoYW5kbGVyTmFtZSA9IHRvSGFuZGxlcktleShldmVudCkpXSB8fFxyXG4gICAgICAgIC8vIGFsc28gdHJ5IGNhbWVsQ2FzZSBldmVudCBoYW5kbGVyICgjMjI0OSlcclxuICAgICAgICBwcm9wc1soaGFuZGxlck5hbWUgPSB0b0hhbmRsZXJLZXkoY2FtZWxpemUoZXZlbnQpKSldO1xyXG4gICAgLy8gZm9yIHYtbW9kZWwgdXBkYXRlOnh4eCBldmVudHMsIGFsc28gdHJpZ2dlciBrZWJhYi1jYXNlIGVxdWl2YWxlbnRcclxuICAgIC8vIGZvciBwcm9wcyBwYXNzZWQgdmlhIGtlYmFiLWNhc2VcclxuICAgIGlmICghaGFuZGxlciAmJiBpc01vZGVsTGlzdGVuZXIpIHtcclxuICAgICAgICBoYW5kbGVyID0gcHJvcHNbKGhhbmRsZXJOYW1lID0gdG9IYW5kbGVyS2V5KGh5cGhlbmF0ZShldmVudCkpKV07XHJcbiAgICB9XHJcbiAgICBpZiAoaGFuZGxlcikge1xyXG4gICAgICAgIGNhbGxXaXRoQXN5bmNFcnJvckhhbmRsaW5nKGhhbmRsZXIsIGluc3RhbmNlLCA2IC8qIENPTVBPTkVOVF9FVkVOVF9IQU5ETEVSICovLCBhcmdzKTtcclxuICAgIH1cclxuICAgIGNvbnN0IG9uY2VIYW5kbGVyID0gcHJvcHNbaGFuZGxlck5hbWUgKyBgT25jZWBdO1xyXG4gICAgaWYgKG9uY2VIYW5kbGVyKSB7XHJcbiAgICAgICAgaWYgKCFpbnN0YW5jZS5lbWl0dGVkKSB7XHJcbiAgICAgICAgICAgIGluc3RhbmNlLmVtaXR0ZWQgPSB7fTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoaW5zdGFuY2UuZW1pdHRlZFtoYW5kbGVyTmFtZV0pIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpbnN0YW5jZS5lbWl0dGVkW2hhbmRsZXJOYW1lXSA9IHRydWU7XHJcbiAgICAgICAgY2FsbFdpdGhBc3luY0Vycm9ySGFuZGxpbmcob25jZUhhbmRsZXIsIGluc3RhbmNlLCA2IC8qIENPTVBPTkVOVF9FVkVOVF9IQU5ETEVSICovLCBhcmdzKTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBub3JtYWxpemVFbWl0c09wdGlvbnMoY29tcCwgYXBwQ29udGV4dCwgYXNNaXhpbiA9IGZhbHNlKSB7XHJcbiAgICBjb25zdCBjYWNoZSA9IGFwcENvbnRleHQuZW1pdHNDYWNoZTtcclxuICAgIGNvbnN0IGNhY2hlZCA9IGNhY2hlLmdldChjb21wKTtcclxuICAgIGlmIChjYWNoZWQgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIHJldHVybiBjYWNoZWQ7XHJcbiAgICB9XHJcbiAgICBjb25zdCByYXcgPSBjb21wLmVtaXRzO1xyXG4gICAgbGV0IG5vcm1hbGl6ZWQgPSB7fTtcclxuICAgIC8vIGFwcGx5IG1peGluL2V4dGVuZHMgcHJvcHNcclxuICAgIGxldCBoYXNFeHRlbmRzID0gZmFsc2U7XHJcbiAgICBpZiAoX19WVUVfT1BUSU9OU19BUElfXyAmJiAhaXNGdW5jdGlvbihjb21wKSkge1xyXG4gICAgICAgIGNvbnN0IGV4dGVuZEVtaXRzID0gKHJhdykgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBub3JtYWxpemVkRnJvbUV4dGVuZCA9IG5vcm1hbGl6ZUVtaXRzT3B0aW9ucyhyYXcsIGFwcENvbnRleHQsIHRydWUpO1xyXG4gICAgICAgICAgICBpZiAobm9ybWFsaXplZEZyb21FeHRlbmQpIHtcclxuICAgICAgICAgICAgICAgIGhhc0V4dGVuZHMgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgZXh0ZW5kKG5vcm1hbGl6ZWQsIG5vcm1hbGl6ZWRGcm9tRXh0ZW5kKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgaWYgKCFhc01peGluICYmIGFwcENvbnRleHQubWl4aW5zLmxlbmd0aCkge1xyXG4gICAgICAgICAgICBhcHBDb250ZXh0Lm1peGlucy5mb3JFYWNoKGV4dGVuZEVtaXRzKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGNvbXAuZXh0ZW5kcykge1xyXG4gICAgICAgICAgICBleHRlbmRFbWl0cyhjb21wLmV4dGVuZHMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoY29tcC5taXhpbnMpIHtcclxuICAgICAgICAgICAgY29tcC5taXhpbnMuZm9yRWFjaChleHRlbmRFbWl0cyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYgKCFyYXcgJiYgIWhhc0V4dGVuZHMpIHtcclxuICAgICAgICBjYWNoZS5zZXQoY29tcCwgbnVsbCk7XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgICBpZiAoaXNBcnJheShyYXcpKSB7XHJcbiAgICAgICAgcmF3LmZvckVhY2goa2V5ID0+IChub3JtYWxpemVkW2tleV0gPSBudWxsKSk7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICBleHRlbmQobm9ybWFsaXplZCwgcmF3KTtcclxuICAgIH1cclxuICAgIGNhY2hlLnNldChjb21wLCBub3JtYWxpemVkKTtcclxuICAgIHJldHVybiBub3JtYWxpemVkO1xyXG59XHJcbi8vIENoZWNrIGlmIGFuIGluY29taW5nIHByb3Aga2V5IGlzIGEgZGVjbGFyZWQgZW1pdCBldmVudCBsaXN0ZW5lci5cclxuLy8gZS5nLiBXaXRoIGBlbWl0czogeyBjbGljazogbnVsbCB9YCwgcHJvcHMgbmFtZWQgYG9uQ2xpY2tgIGFuZCBgb25jbGlja2AgYXJlXHJcbi8vIGJvdGggY29uc2lkZXJlZCBtYXRjaGVkIGxpc3RlbmVycy5cclxuZnVuY3Rpb24gaXNFbWl0TGlzdGVuZXIob3B0aW9ucywga2V5KSB7XHJcbiAgICBpZiAoIW9wdGlvbnMgfHwgIWlzT24oa2V5KSkge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIGtleSA9IGtleS5zbGljZSgyKS5yZXBsYWNlKC9PbmNlJC8sICcnKTtcclxuICAgIHJldHVybiAoaGFzT3duKG9wdGlvbnMsIGtleVswXS50b0xvd2VyQ2FzZSgpICsga2V5LnNsaWNlKDEpKSB8fFxyXG4gICAgICAgIGhhc093bihvcHRpb25zLCBoeXBoZW5hdGUoa2V5KSkgfHxcclxuICAgICAgICBoYXNPd24ob3B0aW9ucywga2V5KSk7XHJcbn1cblxuLyoqXHJcbiAqIG1hcmsgdGhlIGN1cnJlbnQgcmVuZGVyaW5nIGluc3RhbmNlIGZvciBhc3NldCByZXNvbHV0aW9uIChlLmcuXHJcbiAqIHJlc29sdmVDb21wb25lbnQsIHJlc29sdmVEaXJlY3RpdmUpIGR1cmluZyByZW5kZXJcclxuICovXHJcbmxldCBjdXJyZW50UmVuZGVyaW5nSW5zdGFuY2UgPSBudWxsO1xyXG5sZXQgY3VycmVudFNjb3BlSWQgPSBudWxsO1xyXG4vKipcclxuICogTm90ZTogcmVuZGVyaW5nIGNhbGxzIG1heWJlIG5lc3RlZC4gVGhlIGZ1bmN0aW9uIHJldHVybnMgdGhlIHBhcmVudCByZW5kZXJpbmdcclxuICogaW5zdGFuY2UgaWYgcHJlc2VudCwgd2hpY2ggc2hvdWxkIGJlIHJlc3RvcmVkIGFmdGVyIHRoZSByZW5kZXIgaXMgZG9uZTpcclxuICpcclxuICogYGBganNcclxuICogY29uc3QgcHJldiA9IHNldEN1cnJlbnRSZW5kZXJpbmdJbnN0YW5jZShpKVxyXG4gKiAvLyAuLi5yZW5kZXJcclxuICogc2V0Q3VycmVudFJlbmRlcmluZ0luc3RhbmNlKHByZXYpXHJcbiAqIGBgYFxyXG4gKi9cclxuZnVuY3Rpb24gc2V0Q3VycmVudFJlbmRlcmluZ0luc3RhbmNlKGluc3RhbmNlKSB7XHJcbiAgICBjb25zdCBwcmV2ID0gY3VycmVudFJlbmRlcmluZ0luc3RhbmNlO1xyXG4gICAgY3VycmVudFJlbmRlcmluZ0luc3RhbmNlID0gaW5zdGFuY2U7XHJcbiAgICBjdXJyZW50U2NvcGVJZCA9IChpbnN0YW5jZSAmJiBpbnN0YW5jZS50eXBlLl9fc2NvcGVJZCkgfHwgbnVsbDtcclxuICAgIHJldHVybiBwcmV2O1xyXG59XHJcbi8qKlxyXG4gKiBTZXQgc2NvcGUgaWQgd2hlbiBjcmVhdGluZyBob2lzdGVkIHZub2Rlcy5cclxuICogQHByaXZhdGUgY29tcGlsZXIgaGVscGVyXHJcbiAqL1xyXG5mdW5jdGlvbiBwdXNoU2NvcGVJZChpZCkge1xyXG4gICAgY3VycmVudFNjb3BlSWQgPSBpZDtcclxufVxyXG4vKipcclxuICogVGVjaG5pY2FsbHkgd2Ugbm8gbG9uZ2VyIG5lZWQgdGhpcyBhZnRlciAzLjAuOCBidXQgd2UgbmVlZCB0byBrZWVwIHRoZSBzYW1lXHJcbiAqIEFQSSBmb3IgYmFja3dhcmRzIGNvbXBhdCB3LyBjb2RlIGdlbmVyYXRlZCBieSBjb21waWxlcnMuXHJcbiAqIEBwcml2YXRlXHJcbiAqL1xyXG5mdW5jdGlvbiBwb3BTY29wZUlkKCkge1xyXG4gICAgY3VycmVudFNjb3BlSWQgPSBudWxsO1xyXG59XHJcbi8qKlxyXG4gKiBPbmx5IGZvciBiYWNrd2FyZHMgY29tcGF0XHJcbiAqIEBwcml2YXRlXHJcbiAqL1xyXG5jb25zdCB3aXRoU2NvcGVJZCA9IChfaWQpID0+IHdpdGhDdHg7XHJcbi8qKlxyXG4gKiBXcmFwIGEgc2xvdCBmdW5jdGlvbiB0byBtZW1vaXplIGN1cnJlbnQgcmVuZGVyaW5nIGluc3RhbmNlXHJcbiAqIEBwcml2YXRlIGNvbXBpbGVyIGhlbHBlclxyXG4gKi9cclxuZnVuY3Rpb24gd2l0aEN0eChmbiwgY3R4ID0gY3VycmVudFJlbmRlcmluZ0luc3RhbmNlLCBpc05vblNjb3BlZFNsb3QgLy8gZmFsc2Ugb25seVxyXG4pIHtcclxuICAgIGlmICghY3R4KVxyXG4gICAgICAgIHJldHVybiBmbjtcclxuICAgIC8vIGFscmVhZHkgbm9ybWFsaXplZFxyXG4gICAgaWYgKGZuLl9uKSB7XHJcbiAgICAgICAgcmV0dXJuIGZuO1xyXG4gICAgfVxyXG4gICAgY29uc3QgcmVuZGVyRm5XaXRoQ29udGV4dCA9ICguLi5hcmdzKSA9PiB7XHJcbiAgICAgICAgLy8gSWYgYSB1c2VyIGNhbGxzIGEgY29tcGlsZWQgc2xvdCBpbnNpZGUgYSB0ZW1wbGF0ZSBleHByZXNzaW9uICgjMTc0NSksIGl0XHJcbiAgICAgICAgLy8gY2FuIG1lc3MgdXAgYmxvY2sgdHJhY2tpbmcsIHNvIGJ5IGRlZmF1bHQgd2UgZGlzYWJsZSBibG9jayB0cmFja2luZyBhbmRcclxuICAgICAgICAvLyBmb3JjZSBiYWlsIG91dCB3aGVuIGludm9raW5nIGEgY29tcGlsZWQgc2xvdCAoaW5kaWNhdGVkIGJ5IHRoZSAuX2QgZmxhZykuXHJcbiAgICAgICAgLy8gVGhpcyBpc24ndCBuZWNlc3NhcnkgaWYgcmVuZGVyaW5nIGEgY29tcGlsZWQgYDxzbG90PmAsIHNvIHdlIGZsaXAgdGhlXHJcbiAgICAgICAgLy8gLl9kIGZsYWcgb2ZmIHdoZW4gaW52b2tpbmcgdGhlIHdyYXBwZWQgZm4gaW5zaWRlIGByZW5kZXJTbG90YC5cclxuICAgICAgICBpZiAocmVuZGVyRm5XaXRoQ29udGV4dC5fZCkge1xyXG4gICAgICAgICAgICBzZXRCbG9ja1RyYWNraW5nKC0xKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgcHJldkluc3RhbmNlID0gc2V0Q3VycmVudFJlbmRlcmluZ0luc3RhbmNlKGN0eCk7XHJcbiAgICAgICAgY29uc3QgcmVzID0gZm4oLi4uYXJncyk7XHJcbiAgICAgICAgc2V0Q3VycmVudFJlbmRlcmluZ0luc3RhbmNlKHByZXZJbnN0YW5jZSk7XHJcbiAgICAgICAgaWYgKHJlbmRlckZuV2l0aENvbnRleHQuX2QpIHtcclxuICAgICAgICAgICAgc2V0QmxvY2tUcmFja2luZygxKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB8fCBfX1ZVRV9QUk9EX0RFVlRPT0xTX18pIHtcclxuICAgICAgICAgICAgZGV2dG9vbHNDb21wb25lbnRVcGRhdGVkKGN0eCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByZXM7XHJcbiAgICB9O1xyXG4gICAgLy8gbWFyayBub3JtYWxpemVkIHRvIGF2b2lkIGR1cGxpY2F0ZWQgd3JhcHBpbmdcclxuICAgIHJlbmRlckZuV2l0aENvbnRleHQuX24gPSB0cnVlO1xyXG4gICAgLy8gbWFyayB0aGlzIGFzIGNvbXBpbGVkIGJ5IGRlZmF1bHRcclxuICAgIC8vIHRoaXMgaXMgdXNlZCBpbiB2bm9kZS50cyAtPiBub3JtYWxpemVDaGlsZHJlbigpIHRvIHNldCB0aGUgc2xvdFxyXG4gICAgLy8gcmVuZGVyaW5nIGZsYWcuXHJcbiAgICByZW5kZXJGbldpdGhDb250ZXh0Ll9jID0gdHJ1ZTtcclxuICAgIC8vIGRpc2FibGUgYmxvY2sgdHJhY2tpbmcgYnkgZGVmYXVsdFxyXG4gICAgcmVuZGVyRm5XaXRoQ29udGV4dC5fZCA9IHRydWU7XHJcbiAgICByZXR1cm4gcmVuZGVyRm5XaXRoQ29udGV4dDtcclxufVxuXG4vKipcclxuICogZGV2IG9ubHkgZmxhZyB0byB0cmFjayB3aGV0aGVyICRhdHRycyB3YXMgdXNlZCBkdXJpbmcgcmVuZGVyLlxyXG4gKiBJZiAkYXR0cnMgd2FzIHVzZWQgZHVyaW5nIHJlbmRlciB0aGVuIHRoZSB3YXJuaW5nIGZvciBmYWlsZWQgYXR0cnNcclxuICogZmFsbHRocm91Z2ggY2FuIGJlIHN1cHByZXNzZWQuXHJcbiAqL1xyXG5sZXQgYWNjZXNzZWRBdHRycyA9IGZhbHNlO1xyXG5mdW5jdGlvbiBtYXJrQXR0cnNBY2Nlc3NlZCgpIHtcclxuICAgIGFjY2Vzc2VkQXR0cnMgPSB0cnVlO1xyXG59XHJcbmZ1bmN0aW9uIHJlbmRlckNvbXBvbmVudFJvb3QoaW5zdGFuY2UpIHtcclxuICAgIGNvbnN0IHsgdHlwZTogQ29tcG9uZW50LCB2bm9kZSwgcHJveHksIHdpdGhQcm94eSwgcHJvcHMsIHByb3BzT3B0aW9uczogW3Byb3BzT3B0aW9uc10sIHNsb3RzLCBhdHRycywgZW1pdCwgcmVuZGVyLCByZW5kZXJDYWNoZSwgZGF0YSwgc2V0dXBTdGF0ZSwgY3R4LCBpbmhlcml0QXR0cnMgfSA9IGluc3RhbmNlO1xyXG4gICAgbGV0IHJlc3VsdDtcclxuICAgIGxldCBmYWxsdGhyb3VnaEF0dHJzO1xyXG4gICAgY29uc3QgcHJldiA9IHNldEN1cnJlbnRSZW5kZXJpbmdJbnN0YW5jZShpbnN0YW5jZSk7XHJcbiAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XHJcbiAgICAgICAgYWNjZXNzZWRBdHRycyA9IGZhbHNlO1xyXG4gICAgfVxyXG4gICAgdHJ5IHtcclxuICAgICAgICBpZiAodm5vZGUuc2hhcGVGbGFnICYgNCAvKiBTVEFURUZVTF9DT01QT05FTlQgKi8pIHtcclxuICAgICAgICAgICAgLy8gd2l0aFByb3h5IGlzIGEgcHJveHkgd2l0aCBhIGRpZmZlcmVudCBgaGFzYCB0cmFwIG9ubHkgZm9yXHJcbiAgICAgICAgICAgIC8vIHJ1bnRpbWUtY29tcGlsZWQgcmVuZGVyIGZ1bmN0aW9ucyB1c2luZyBgd2l0aGAgYmxvY2suXHJcbiAgICAgICAgICAgIGNvbnN0IHByb3h5VG9Vc2UgPSB3aXRoUHJveHkgfHwgcHJveHk7XHJcbiAgICAgICAgICAgIHJlc3VsdCA9IG5vcm1hbGl6ZVZOb2RlKHJlbmRlci5jYWxsKHByb3h5VG9Vc2UsIHByb3h5VG9Vc2UsIHJlbmRlckNhY2hlLCBwcm9wcywgc2V0dXBTdGF0ZSwgZGF0YSwgY3R4KSk7XHJcbiAgICAgICAgICAgIGZhbGx0aHJvdWdoQXR0cnMgPSBhdHRycztcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIGZ1bmN0aW9uYWxcclxuICAgICAgICAgICAgY29uc3QgcmVuZGVyID0gQ29tcG9uZW50O1xyXG4gICAgICAgICAgICAvLyBpbiBkZXYsIG1hcmsgYXR0cnMgYWNjZXNzZWQgaWYgb3B0aW9uYWwgcHJvcHMgKGF0dHJzID09PSBwcm9wcylcclxuICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiBhdHRycyA9PT0gcHJvcHMpIHtcclxuICAgICAgICAgICAgICAgIG1hcmtBdHRyc0FjY2Vzc2VkKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmVzdWx0ID0gbm9ybWFsaXplVk5vZGUocmVuZGVyLmxlbmd0aCA+IDFcclxuICAgICAgICAgICAgICAgID8gcmVuZGVyKHByb3BzLCAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJylcclxuICAgICAgICAgICAgICAgICAgICA/IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZ2V0IGF0dHJzKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFya0F0dHJzQWNjZXNzZWQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhdHRycztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2xvdHMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVtaXRcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgOiB7IGF0dHJzLCBzbG90cywgZW1pdCB9KVxyXG4gICAgICAgICAgICAgICAgOiByZW5kZXIocHJvcHMsIG51bGwgLyogd2Uga25vdyBpdCBkb2Vzbid0IG5lZWQgaXQgKi8pKTtcclxuICAgICAgICAgICAgZmFsbHRocm91Z2hBdHRycyA9IENvbXBvbmVudC5wcm9wc1xyXG4gICAgICAgICAgICAgICAgPyBhdHRyc1xyXG4gICAgICAgICAgICAgICAgOiBnZXRGdW5jdGlvbmFsRmFsbHRocm91Z2goYXR0cnMpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGNhdGNoIChlcnIpIHtcclxuICAgICAgICBibG9ja1N0YWNrLmxlbmd0aCA9IDA7XHJcbiAgICAgICAgaGFuZGxlRXJyb3IoZXJyLCBpbnN0YW5jZSwgMSAvKiBSRU5ERVJfRlVOQ1RJT04gKi8pO1xyXG4gICAgICAgIHJlc3VsdCA9IGNyZWF0ZVZOb2RlKENvbW1lbnQpO1xyXG4gICAgfVxyXG4gICAgLy8gYXR0ciBtZXJnaW5nXHJcbiAgICAvLyBpbiBkZXYgbW9kZSwgY29tbWVudHMgYXJlIHByZXNlcnZlZCwgYW5kIGl0J3MgcG9zc2libGUgZm9yIGEgdGVtcGxhdGVcclxuICAgIC8vIHRvIGhhdmUgY29tbWVudHMgYWxvbmcgc2lkZSB0aGUgcm9vdCBlbGVtZW50IHdoaWNoIG1ha2VzIGl0IGEgZnJhZ21lbnRcclxuICAgIGxldCByb290ID0gcmVzdWx0O1xyXG4gICAgbGV0IHNldFJvb3QgPSB1bmRlZmluZWQ7XHJcbiAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmXHJcbiAgICAgICAgcmVzdWx0LnBhdGNoRmxhZyA+IDAgJiZcclxuICAgICAgICByZXN1bHQucGF0Y2hGbGFnICYgMjA0OCAvKiBERVZfUk9PVF9GUkFHTUVOVCAqLykge1xyXG4gICAgICAgIFtyb290LCBzZXRSb290XSA9IGdldENoaWxkUm9vdChyZXN1bHQpO1xyXG4gICAgfVxyXG4gICAgaWYgKGZhbGx0aHJvdWdoQXR0cnMgJiYgaW5oZXJpdEF0dHJzICE9PSBmYWxzZSkge1xyXG4gICAgICAgIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyhmYWxsdGhyb3VnaEF0dHJzKTtcclxuICAgICAgICBjb25zdCB7IHNoYXBlRmxhZyB9ID0gcm9vdDtcclxuICAgICAgICBpZiAoa2V5cy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgaWYgKHNoYXBlRmxhZyAmICgxIC8qIEVMRU1FTlQgKi8gfCA2IC8qIENPTVBPTkVOVCAqLykpIHtcclxuICAgICAgICAgICAgICAgIGlmIChwcm9wc09wdGlvbnMgJiYga2V5cy5zb21lKGlzTW9kZWxMaXN0ZW5lcikpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBJZiBhIHYtbW9kZWwgbGlzdGVuZXIgKG9uVXBkYXRlOnh4eCkgaGFzIGEgY29ycmVzcG9uZGluZyBkZWNsYXJlZFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIHByb3AsIGl0IGluZGljYXRlcyB0aGlzIGNvbXBvbmVudCBleHBlY3RzIHRvIGhhbmRsZSB2LW1vZGVsIGFuZFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGl0IHNob3VsZCBub3QgZmFsbHRocm91Z2guXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gcmVsYXRlZDogIzE1NDMsICMxNjQzLCAjMTk4OVxyXG4gICAgICAgICAgICAgICAgICAgIGZhbGx0aHJvdWdoQXR0cnMgPSBmaWx0ZXJNb2RlbExpc3RlbmVycyhmYWxsdGhyb3VnaEF0dHJzLCBwcm9wc09wdGlvbnMpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcm9vdCA9IGNsb25lVk5vZGUocm9vdCwgZmFsbHRocm91Z2hBdHRycyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmICFhY2Nlc3NlZEF0dHJzICYmIHJvb3QudHlwZSAhPT0gQ29tbWVudCkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgYWxsQXR0cnMgPSBPYmplY3Qua2V5cyhhdHRycyk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBldmVudEF0dHJzID0gW107XHJcbiAgICAgICAgICAgICAgICBjb25zdCBleHRyYUF0dHJzID0gW107XHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMCwgbCA9IGFsbEF0dHJzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGtleSA9IGFsbEF0dHJzW2ldO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpc09uKGtleSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWdub3JlIHYtbW9kZWwgaGFuZGxlcnMgd2hlbiB0aGV5IGZhaWwgdG8gZmFsbHRocm91Z2hcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFpc01vZGVsTGlzdGVuZXIoa2V5KSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVtb3ZlIGBvbmAsIGxvd2VyY2FzZSBmaXJzdCBsZXR0ZXIgdG8gcmVmbGVjdCBldmVudCBjYXNpbmdcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFjY3VyYXRlbHlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50QXR0cnMucHVzaChrZXlbMl0udG9Mb3dlckNhc2UoKSArIGtleS5zbGljZSgzKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4dHJhQXR0cnMucHVzaChrZXkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChleHRyYUF0dHJzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHdhcm4oYEV4dHJhbmVvdXMgbm9uLXByb3BzIGF0dHJpYnV0ZXMgKGAgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBgJHtleHRyYUF0dHJzLmpvaW4oJywgJyl9KSBgICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYHdlcmUgcGFzc2VkIHRvIGNvbXBvbmVudCBidXQgY291bGQgbm90IGJlIGF1dG9tYXRpY2FsbHkgaW5oZXJpdGVkIGAgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBgYmVjYXVzZSBjb21wb25lbnQgcmVuZGVycyBmcmFnbWVudCBvciB0ZXh0IHJvb3Qgbm9kZXMuYCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoZXZlbnRBdHRycy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICB3YXJuKGBFeHRyYW5lb3VzIG5vbi1lbWl0cyBldmVudCBsaXN0ZW5lcnMgKGAgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBgJHtldmVudEF0dHJzLmpvaW4oJywgJyl9KSBgICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYHdlcmUgcGFzc2VkIHRvIGNvbXBvbmVudCBidXQgY291bGQgbm90IGJlIGF1dG9tYXRpY2FsbHkgaW5oZXJpdGVkIGAgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBgYmVjYXVzZSBjb21wb25lbnQgcmVuZGVycyBmcmFnbWVudCBvciB0ZXh0IHJvb3Qgbm9kZXMuIGAgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBgSWYgdGhlIGxpc3RlbmVyIGlzIGludGVuZGVkIHRvIGJlIGEgY29tcG9uZW50IGN1c3RvbSBldmVudCBsaXN0ZW5lciBvbmx5LCBgICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYGRlY2xhcmUgaXQgdXNpbmcgdGhlIFwiZW1pdHNcIiBvcHRpb24uYCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvLyBpbmhlcml0IGRpcmVjdGl2ZXNcclxuICAgIGlmICh2bm9kZS5kaXJzKSB7XHJcbiAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiAhaXNFbGVtZW50Um9vdChyb290KSkge1xyXG4gICAgICAgICAgICB3YXJuKGBSdW50aW1lIGRpcmVjdGl2ZSB1c2VkIG9uIGNvbXBvbmVudCB3aXRoIG5vbi1lbGVtZW50IHJvb3Qgbm9kZS4gYCArXHJcbiAgICAgICAgICAgICAgICBgVGhlIGRpcmVjdGl2ZXMgd2lsbCBub3QgZnVuY3Rpb24gYXMgaW50ZW5kZWQuYCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJvb3QuZGlycyA9IHJvb3QuZGlycyA/IHJvb3QuZGlycy5jb25jYXQodm5vZGUuZGlycykgOiB2bm9kZS5kaXJzO1xyXG4gICAgfVxyXG4gICAgLy8gaW5oZXJpdCB0cmFuc2l0aW9uIGRhdGFcclxuICAgIGlmICh2bm9kZS50cmFuc2l0aW9uKSB7XHJcbiAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiAhaXNFbGVtZW50Um9vdChyb290KSkge1xyXG4gICAgICAgICAgICB3YXJuKGBDb21wb25lbnQgaW5zaWRlIDxUcmFuc2l0aW9uPiByZW5kZXJzIG5vbi1lbGVtZW50IHJvb3Qgbm9kZSBgICtcclxuICAgICAgICAgICAgICAgIGB0aGF0IGNhbm5vdCBiZSBhbmltYXRlZC5gKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcm9vdC50cmFuc2l0aW9uID0gdm5vZGUudHJhbnNpdGlvbjtcclxuICAgIH1cclxuICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgc2V0Um9vdCkge1xyXG4gICAgICAgIHNldFJvb3Qocm9vdCk7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICByZXN1bHQgPSByb290O1xyXG4gICAgfVxyXG4gICAgc2V0Q3VycmVudFJlbmRlcmluZ0luc3RhbmNlKHByZXYpO1xyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxufVxyXG4vKipcclxuICogZGV2IG9ubHlcclxuICogSW4gZGV2IG1vZGUsIHRlbXBsYXRlIHJvb3QgbGV2ZWwgY29tbWVudHMgYXJlIHJlbmRlcmVkLCB3aGljaCB0dXJucyB0aGVcclxuICogdGVtcGxhdGUgaW50byBhIGZyYWdtZW50IHJvb3QsIGJ1dCB3ZSBuZWVkIHRvIGxvY2F0ZSB0aGUgc2luZ2xlIGVsZW1lbnRcclxuICogcm9vdCBmb3IgYXR0cnMgYW5kIHNjb3BlIGlkIHByb2Nlc3NpbmcuXHJcbiAqL1xyXG5jb25zdCBnZXRDaGlsZFJvb3QgPSAodm5vZGUpID0+IHtcclxuICAgIGNvbnN0IHJhd0NoaWxkcmVuID0gdm5vZGUuY2hpbGRyZW47XHJcbiAgICBjb25zdCBkeW5hbWljQ2hpbGRyZW4gPSB2bm9kZS5keW5hbWljQ2hpbGRyZW47XHJcbiAgICBjb25zdCBjaGlsZFJvb3QgPSBmaWx0ZXJTaW5nbGVSb290KHJhd0NoaWxkcmVuKTtcclxuICAgIGlmICghY2hpbGRSb290KSB7XHJcbiAgICAgICAgcmV0dXJuIFt2bm9kZSwgdW5kZWZpbmVkXTtcclxuICAgIH1cclxuICAgIGNvbnN0IGluZGV4ID0gcmF3Q2hpbGRyZW4uaW5kZXhPZihjaGlsZFJvb3QpO1xyXG4gICAgY29uc3QgZHluYW1pY0luZGV4ID0gZHluYW1pY0NoaWxkcmVuID8gZHluYW1pY0NoaWxkcmVuLmluZGV4T2YoY2hpbGRSb290KSA6IC0xO1xyXG4gICAgY29uc3Qgc2V0Um9vdCA9ICh1cGRhdGVkUm9vdCkgPT4ge1xyXG4gICAgICAgIHJhd0NoaWxkcmVuW2luZGV4XSA9IHVwZGF0ZWRSb290O1xyXG4gICAgICAgIGlmIChkeW5hbWljQ2hpbGRyZW4pIHtcclxuICAgICAgICAgICAgaWYgKGR5bmFtaWNJbmRleCA+IC0xKSB7XHJcbiAgICAgICAgICAgICAgICBkeW5hbWljQ2hpbGRyZW5bZHluYW1pY0luZGV4XSA9IHVwZGF0ZWRSb290O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKHVwZGF0ZWRSb290LnBhdGNoRmxhZyA+IDApIHtcclxuICAgICAgICAgICAgICAgIHZub2RlLmR5bmFtaWNDaGlsZHJlbiA9IFsuLi5keW5hbWljQ2hpbGRyZW4sIHVwZGF0ZWRSb290XTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICByZXR1cm4gW25vcm1hbGl6ZVZOb2RlKGNoaWxkUm9vdCksIHNldFJvb3RdO1xyXG59O1xyXG5mdW5jdGlvbiBmaWx0ZXJTaW5nbGVSb290KGNoaWxkcmVuKSB7XHJcbiAgICBsZXQgc2luZ2xlUm9vdDtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBjb25zdCBjaGlsZCA9IGNoaWxkcmVuW2ldO1xyXG4gICAgICAgIGlmIChpc1ZOb2RlKGNoaWxkKSkge1xyXG4gICAgICAgICAgICAvLyBpZ25vcmUgdXNlciBjb21tZW50XHJcbiAgICAgICAgICAgIGlmIChjaGlsZC50eXBlICE9PSBDb21tZW50IHx8IGNoaWxkLmNoaWxkcmVuID09PSAndi1pZicpIHtcclxuICAgICAgICAgICAgICAgIGlmIChzaW5nbGVSb290KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gaGFzIG1vcmUgdGhhbiAxIG5vbi1jb21tZW50IGNoaWxkLCByZXR1cm4gbm93XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2luZ2xlUm9vdCA9IGNoaWxkO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHNpbmdsZVJvb3Q7XHJcbn1cclxuY29uc3QgZ2V0RnVuY3Rpb25hbEZhbGx0aHJvdWdoID0gKGF0dHJzKSA9PiB7XHJcbiAgICBsZXQgcmVzO1xyXG4gICAgZm9yIChjb25zdCBrZXkgaW4gYXR0cnMpIHtcclxuICAgICAgICBpZiAoa2V5ID09PSAnY2xhc3MnIHx8IGtleSA9PT0gJ3N0eWxlJyB8fCBpc09uKGtleSkpIHtcclxuICAgICAgICAgICAgKHJlcyB8fCAocmVzID0ge30pKVtrZXldID0gYXR0cnNba2V5XTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcmVzO1xyXG59O1xyXG5jb25zdCBmaWx0ZXJNb2RlbExpc3RlbmVycyA9IChhdHRycywgcHJvcHMpID0+IHtcclxuICAgIGNvbnN0IHJlcyA9IHt9O1xyXG4gICAgZm9yIChjb25zdCBrZXkgaW4gYXR0cnMpIHtcclxuICAgICAgICBpZiAoIWlzTW9kZWxMaXN0ZW5lcihrZXkpIHx8ICEoa2V5LnNsaWNlKDkpIGluIHByb3BzKSkge1xyXG4gICAgICAgICAgICByZXNba2V5XSA9IGF0dHJzW2tleV07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHJlcztcclxufTtcclxuY29uc3QgaXNFbGVtZW50Um9vdCA9ICh2bm9kZSkgPT4ge1xyXG4gICAgcmV0dXJuICh2bm9kZS5zaGFwZUZsYWcgJiAoNiAvKiBDT01QT05FTlQgKi8gfCAxIC8qIEVMRU1FTlQgKi8pIHx8XHJcbiAgICAgICAgdm5vZGUudHlwZSA9PT0gQ29tbWVudCAvLyBwb3RlbnRpYWwgdi1pZiBicmFuY2ggc3dpdGNoXHJcbiAgICApO1xyXG59O1xyXG5mdW5jdGlvbiBzaG91bGRVcGRhdGVDb21wb25lbnQocHJldlZOb2RlLCBuZXh0Vk5vZGUsIG9wdGltaXplZCkge1xyXG4gICAgY29uc3QgeyBwcm9wczogcHJldlByb3BzLCBjaGlsZHJlbjogcHJldkNoaWxkcmVuLCBjb21wb25lbnQgfSA9IHByZXZWTm9kZTtcclxuICAgIGNvbnN0IHsgcHJvcHM6IG5leHRQcm9wcywgY2hpbGRyZW46IG5leHRDaGlsZHJlbiwgcGF0Y2hGbGFnIH0gPSBuZXh0Vk5vZGU7XHJcbiAgICBjb25zdCBlbWl0cyA9IGNvbXBvbmVudC5lbWl0c09wdGlvbnM7XHJcbiAgICAvLyBQYXJlbnQgY29tcG9uZW50J3MgcmVuZGVyIGZ1bmN0aW9uIHdhcyBob3QtdXBkYXRlZC4gU2luY2UgdGhpcyBtYXkgaGF2ZVxyXG4gICAgLy8gY2F1c2VkIHRoZSBjaGlsZCBjb21wb25lbnQncyBzbG90cyBjb250ZW50IHRvIGhhdmUgY2hhbmdlZCwgd2UgbmVlZCB0b1xyXG4gICAgLy8gZm9yY2UgdGhlIGNoaWxkIHRvIHVwZGF0ZSBhcyB3ZWxsLlxyXG4gICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiAocHJldkNoaWxkcmVuIHx8IG5leHRDaGlsZHJlbikgJiYgaXNIbXJVcGRhdGluZykge1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG4gICAgLy8gZm9yY2UgY2hpbGQgdXBkYXRlIGZvciBydW50aW1lIGRpcmVjdGl2ZSBvciB0cmFuc2l0aW9uIG9uIGNvbXBvbmVudCB2bm9kZS5cclxuICAgIGlmIChuZXh0Vk5vZGUuZGlycyB8fCBuZXh0Vk5vZGUudHJhbnNpdGlvbikge1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG4gICAgaWYgKG9wdGltaXplZCAmJiBwYXRjaEZsYWcgPj0gMCkge1xyXG4gICAgICAgIGlmIChwYXRjaEZsYWcgJiAxMDI0IC8qIERZTkFNSUNfU0xPVFMgKi8pIHtcclxuICAgICAgICAgICAgLy8gc2xvdCBjb250ZW50IHRoYXQgcmVmZXJlbmNlcyB2YWx1ZXMgdGhhdCBtaWdodCBoYXZlIGNoYW5nZWQsXHJcbiAgICAgICAgICAgIC8vIGUuZy4gaW4gYSB2LWZvclxyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHBhdGNoRmxhZyAmIDE2IC8qIEZVTExfUFJPUFMgKi8pIHtcclxuICAgICAgICAgICAgaWYgKCFwcmV2UHJvcHMpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAhIW5leHRQcm9wcztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBwcmVzZW5jZSBvZiB0aGlzIGZsYWcgaW5kaWNhdGVzIHByb3BzIGFyZSBhbHdheXMgbm9uLW51bGxcclxuICAgICAgICAgICAgcmV0dXJuIGhhc1Byb3BzQ2hhbmdlZChwcmV2UHJvcHMsIG5leHRQcm9wcywgZW1pdHMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChwYXRjaEZsYWcgJiA4IC8qIFBST1BTICovKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGR5bmFtaWNQcm9wcyA9IG5leHRWTm9kZS5keW5hbWljUHJvcHM7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZHluYW1pY1Byb3BzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBrZXkgPSBkeW5hbWljUHJvcHNbaV07XHJcbiAgICAgICAgICAgICAgICBpZiAobmV4dFByb3BzW2tleV0gIT09IHByZXZQcm9wc1trZXldICYmXHJcbiAgICAgICAgICAgICAgICAgICAgIWlzRW1pdExpc3RlbmVyKGVtaXRzLCBrZXkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICAvLyB0aGlzIHBhdGggaXMgb25seSB0YWtlbiBieSBtYW51YWxseSB3cml0dGVuIHJlbmRlciBmdW5jdGlvbnNcclxuICAgICAgICAvLyBzbyBwcmVzZW5jZSBvZiBhbnkgY2hpbGRyZW4gbGVhZHMgdG8gYSBmb3JjZWQgdXBkYXRlXHJcbiAgICAgICAgaWYgKHByZXZDaGlsZHJlbiB8fCBuZXh0Q2hpbGRyZW4pIHtcclxuICAgICAgICAgICAgaWYgKCFuZXh0Q2hpbGRyZW4gfHwgIW5leHRDaGlsZHJlbi4kc3RhYmxlKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAocHJldlByb3BzID09PSBuZXh0UHJvcHMpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIXByZXZQcm9wcykge1xyXG4gICAgICAgICAgICByZXR1cm4gISFuZXh0UHJvcHM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghbmV4dFByb3BzKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gaGFzUHJvcHNDaGFuZ2VkKHByZXZQcm9wcywgbmV4dFByb3BzLCBlbWl0cyk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbn1cclxuZnVuY3Rpb24gaGFzUHJvcHNDaGFuZ2VkKHByZXZQcm9wcywgbmV4dFByb3BzLCBlbWl0c09wdGlvbnMpIHtcclxuICAgIGNvbnN0IG5leHRLZXlzID0gT2JqZWN0LmtleXMobmV4dFByb3BzKTtcclxuICAgIGlmIChuZXh0S2V5cy5sZW5ndGggIT09IE9iamVjdC5rZXlzKHByZXZQcm9wcykubGVuZ3RoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG5leHRLZXlzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgY29uc3Qga2V5ID0gbmV4dEtleXNbaV07XHJcbiAgICAgICAgaWYgKG5leHRQcm9wc1trZXldICE9PSBwcmV2UHJvcHNba2V5XSAmJlxyXG4gICAgICAgICAgICAhaXNFbWl0TGlzdGVuZXIoZW1pdHNPcHRpb25zLCBrZXkpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBmYWxzZTtcclxufVxyXG5mdW5jdGlvbiB1cGRhdGVIT0NIb3N0RWwoeyB2bm9kZSwgcGFyZW50IH0sIGVsIC8vIEhvc3ROb2RlXHJcbikge1xyXG4gICAgd2hpbGUgKHBhcmVudCAmJiBwYXJlbnQuc3ViVHJlZSA9PT0gdm5vZGUpIHtcclxuICAgICAgICAodm5vZGUgPSBwYXJlbnQudm5vZGUpLmVsID0gZWw7XHJcbiAgICAgICAgcGFyZW50ID0gcGFyZW50LnBhcmVudDtcclxuICAgIH1cclxufVxuXG5jb25zdCBpc1N1c3BlbnNlID0gKHR5cGUpID0+IHR5cGUuX19pc1N1c3BlbnNlO1xyXG4vLyBTdXNwZW5zZSBleHBvc2VzIGEgY29tcG9uZW50LWxpa2UgQVBJLCBhbmQgaXMgdHJlYXRlZCBsaWtlIGEgY29tcG9uZW50XHJcbi8vIGluIHRoZSBjb21waWxlciwgYnV0IGludGVybmFsbHkgaXQncyBhIHNwZWNpYWwgYnVpbHQtaW4gdHlwZSB0aGF0IGhvb2tzXHJcbi8vIGRpcmVjdGx5IGludG8gdGhlIHJlbmRlcmVyLlxyXG5jb25zdCBTdXNwZW5zZUltcGwgPSB7XHJcbiAgICBuYW1lOiAnU3VzcGVuc2UnLFxyXG4gICAgLy8gSW4gb3JkZXIgdG8gbWFrZSBTdXNwZW5zZSB0cmVlLXNoYWthYmxlLCB3ZSBuZWVkIHRvIGF2b2lkIGltcG9ydGluZyBpdFxyXG4gICAgLy8gZGlyZWN0bHkgaW4gdGhlIHJlbmRlcmVyLiBUaGUgcmVuZGVyZXIgY2hlY2tzIGZvciB0aGUgX19pc1N1c3BlbnNlIGZsYWdcclxuICAgIC8vIG9uIGEgdm5vZGUncyB0eXBlIGFuZCBjYWxscyB0aGUgYHByb2Nlc3NgIG1ldGhvZCwgcGFzc2luZyBpbiByZW5kZXJlclxyXG4gICAgLy8gaW50ZXJuYWxzLlxyXG4gICAgX19pc1N1c3BlbnNlOiB0cnVlLFxyXG4gICAgcHJvY2VzcyhuMSwgbjIsIGNvbnRhaW5lciwgYW5jaG9yLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBpc1NWRywgc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQsIFxyXG4gICAgLy8gcGxhdGZvcm0tc3BlY2lmaWMgaW1wbCBwYXNzZWQgZnJvbSByZW5kZXJlclxyXG4gICAgcmVuZGVyZXJJbnRlcm5hbHMpIHtcclxuICAgICAgICBpZiAobjEgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBtb3VudFN1c3BlbnNlKG4yLCBjb250YWluZXIsIGFuY2hvciwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgaXNTVkcsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkLCByZW5kZXJlckludGVybmFscyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBwYXRjaFN1c3BlbnNlKG4xLCBuMiwgY29udGFpbmVyLCBhbmNob3IsIHBhcmVudENvbXBvbmVudCwgaXNTVkcsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkLCByZW5kZXJlckludGVybmFscyk7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIGh5ZHJhdGU6IGh5ZHJhdGVTdXNwZW5zZSxcclxuICAgIGNyZWF0ZTogY3JlYXRlU3VzcGVuc2VCb3VuZGFyeSxcclxuICAgIG5vcm1hbGl6ZTogbm9ybWFsaXplU3VzcGVuc2VDaGlsZHJlblxyXG59O1xyXG4vLyBGb3JjZS1jYXN0ZWQgcHVibGljIHR5cGluZyBmb3IgaCBhbmQgVFNYIHByb3BzIGluZmVyZW5jZVxyXG5jb25zdCBTdXNwZW5zZSA9IChTdXNwZW5zZUltcGwgKTtcclxuZnVuY3Rpb24gdHJpZ2dlckV2ZW50KHZub2RlLCBuYW1lKSB7XHJcbiAgICBjb25zdCBldmVudExpc3RlbmVyID0gdm5vZGUucHJvcHMgJiYgdm5vZGUucHJvcHNbbmFtZV07XHJcbiAgICBpZiAoaXNGdW5jdGlvbihldmVudExpc3RlbmVyKSkge1xyXG4gICAgICAgIGV2ZW50TGlzdGVuZXIoKTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBtb3VudFN1c3BlbnNlKHZub2RlLCBjb250YWluZXIsIGFuY2hvciwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgaXNTVkcsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkLCByZW5kZXJlckludGVybmFscykge1xyXG4gICAgY29uc3QgeyBwOiBwYXRjaCwgbzogeyBjcmVhdGVFbGVtZW50IH0gfSA9IHJlbmRlcmVySW50ZXJuYWxzO1xyXG4gICAgY29uc3QgaGlkZGVuQ29udGFpbmVyID0gY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICBjb25zdCBzdXNwZW5zZSA9ICh2bm9kZS5zdXNwZW5zZSA9IGNyZWF0ZVN1c3BlbnNlQm91bmRhcnkodm5vZGUsIHBhcmVudFN1c3BlbnNlLCBwYXJlbnRDb21wb25lbnQsIGNvbnRhaW5lciwgaGlkZGVuQ29udGFpbmVyLCBhbmNob3IsIGlzU1ZHLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCwgcmVuZGVyZXJJbnRlcm5hbHMpKTtcclxuICAgIC8vIHN0YXJ0IG1vdW50aW5nIHRoZSBjb250ZW50IHN1YnRyZWUgaW4gYW4gb2ZmLWRvbSBjb250YWluZXJcclxuICAgIHBhdGNoKG51bGwsIChzdXNwZW5zZS5wZW5kaW5nQnJhbmNoID0gdm5vZGUuc3NDb250ZW50KSwgaGlkZGVuQ29udGFpbmVyLCBudWxsLCBwYXJlbnRDb21wb25lbnQsIHN1c3BlbnNlLCBpc1NWRywgc2xvdFNjb3BlSWRzKTtcclxuICAgIC8vIG5vdyBjaGVjayBpZiB3ZSBoYXZlIGVuY291bnRlcmVkIGFueSBhc3luYyBkZXBzXHJcbiAgICBpZiAoc3VzcGVuc2UuZGVwcyA+IDApIHtcclxuICAgICAgICAvLyBoYXMgYXN5bmNcclxuICAgICAgICAvLyBpbnZva2UgQGZhbGxiYWNrIGV2ZW50XHJcbiAgICAgICAgdHJpZ2dlckV2ZW50KHZub2RlLCAnb25QZW5kaW5nJyk7XHJcbiAgICAgICAgdHJpZ2dlckV2ZW50KHZub2RlLCAnb25GYWxsYmFjaycpO1xyXG4gICAgICAgIC8vIG1vdW50IHRoZSBmYWxsYmFjayB0cmVlXHJcbiAgICAgICAgcGF0Y2gobnVsbCwgdm5vZGUuc3NGYWxsYmFjaywgY29udGFpbmVyLCBhbmNob3IsIHBhcmVudENvbXBvbmVudCwgbnVsbCwgLy8gZmFsbGJhY2sgdHJlZSB3aWxsIG5vdCBoYXZlIHN1c3BlbnNlIGNvbnRleHRcclxuICAgICAgICBpc1NWRywgc2xvdFNjb3BlSWRzKTtcclxuICAgICAgICBzZXRBY3RpdmVCcmFuY2goc3VzcGVuc2UsIHZub2RlLnNzRmFsbGJhY2spO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgLy8gU3VzcGVuc2UgaGFzIG5vIGFzeW5jIGRlcHMuIEp1c3QgcmVzb2x2ZS5cclxuICAgICAgICBzdXNwZW5zZS5yZXNvbHZlKCk7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gcGF0Y2hTdXNwZW5zZShuMSwgbjIsIGNvbnRhaW5lciwgYW5jaG9yLCBwYXJlbnRDb21wb25lbnQsIGlzU1ZHLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCwgeyBwOiBwYXRjaCwgdW06IHVubW91bnQsIG86IHsgY3JlYXRlRWxlbWVudCB9IH0pIHtcclxuICAgIGNvbnN0IHN1c3BlbnNlID0gKG4yLnN1c3BlbnNlID0gbjEuc3VzcGVuc2UpO1xyXG4gICAgc3VzcGVuc2Uudm5vZGUgPSBuMjtcclxuICAgIG4yLmVsID0gbjEuZWw7XHJcbiAgICBjb25zdCBuZXdCcmFuY2ggPSBuMi5zc0NvbnRlbnQ7XHJcbiAgICBjb25zdCBuZXdGYWxsYmFjayA9IG4yLnNzRmFsbGJhY2s7XHJcbiAgICBjb25zdCB7IGFjdGl2ZUJyYW5jaCwgcGVuZGluZ0JyYW5jaCwgaXNJbkZhbGxiYWNrLCBpc0h5ZHJhdGluZyB9ID0gc3VzcGVuc2U7XHJcbiAgICBpZiAocGVuZGluZ0JyYW5jaCkge1xyXG4gICAgICAgIHN1c3BlbnNlLnBlbmRpbmdCcmFuY2ggPSBuZXdCcmFuY2g7XHJcbiAgICAgICAgaWYgKGlzU2FtZVZOb2RlVHlwZShuZXdCcmFuY2gsIHBlbmRpbmdCcmFuY2gpKSB7XHJcbiAgICAgICAgICAgIC8vIHNhbWUgcm9vdCB0eXBlIGJ1dCBjb250ZW50IG1heSBoYXZlIGNoYW5nZWQuXHJcbiAgICAgICAgICAgIHBhdGNoKHBlbmRpbmdCcmFuY2gsIG5ld0JyYW5jaCwgc3VzcGVuc2UuaGlkZGVuQ29udGFpbmVyLCBudWxsLCBwYXJlbnRDb21wb25lbnQsIHN1c3BlbnNlLCBpc1NWRywgc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQpO1xyXG4gICAgICAgICAgICBpZiAoc3VzcGVuc2UuZGVwcyA8PSAwKSB7XHJcbiAgICAgICAgICAgICAgICBzdXNwZW5zZS5yZXNvbHZlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoaXNJbkZhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgICAgICBwYXRjaChhY3RpdmVCcmFuY2gsIG5ld0ZhbGxiYWNrLCBjb250YWluZXIsIGFuY2hvciwgcGFyZW50Q29tcG9uZW50LCBudWxsLCAvLyBmYWxsYmFjayB0cmVlIHdpbGwgbm90IGhhdmUgc3VzcGVuc2UgY29udGV4dFxyXG4gICAgICAgICAgICAgICAgaXNTVkcsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkKTtcclxuICAgICAgICAgICAgICAgIHNldEFjdGl2ZUJyYW5jaChzdXNwZW5zZSwgbmV3RmFsbGJhY2spO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAvLyB0b2dnbGVkIGJlZm9yZSBwZW5kaW5nIHRyZWUgaXMgcmVzb2x2ZWRcclxuICAgICAgICAgICAgc3VzcGVuc2UucGVuZGluZ0lkKys7XHJcbiAgICAgICAgICAgIGlmIChpc0h5ZHJhdGluZykge1xyXG4gICAgICAgICAgICAgICAgLy8gaWYgdG9nZ2xlZCBiZWZvcmUgaHlkcmF0aW9uIGlzIGZpbmlzaGVkLCB0aGUgY3VycmVudCBET00gdHJlZSBpc1xyXG4gICAgICAgICAgICAgICAgLy8gbm8gbG9uZ2VyIHZhbGlkLiBzZXQgaXQgYXMgdGhlIGFjdGl2ZSBicmFuY2ggc28gaXQgd2lsbCBiZSB1bm1vdW50ZWRcclxuICAgICAgICAgICAgICAgIC8vIHdoZW4gcmVzb2x2ZWRcclxuICAgICAgICAgICAgICAgIHN1c3BlbnNlLmlzSHlkcmF0aW5nID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBzdXNwZW5zZS5hY3RpdmVCcmFuY2ggPSBwZW5kaW5nQnJhbmNoO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdW5tb3VudChwZW5kaW5nQnJhbmNoLCBwYXJlbnRDb21wb25lbnQsIHN1c3BlbnNlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBpbmNyZW1lbnQgcGVuZGluZyBJRC4gdGhpcyBpcyB1c2VkIHRvIGludmFsaWRhdGUgYXN5bmMgY2FsbGJhY2tzXHJcbiAgICAgICAgICAgIC8vIHJlc2V0IHN1c3BlbnNlIHN0YXRlXHJcbiAgICAgICAgICAgIHN1c3BlbnNlLmRlcHMgPSAwO1xyXG4gICAgICAgICAgICAvLyBkaXNjYXJkIGVmZmVjdHMgZnJvbSBwZW5kaW5nIGJyYW5jaFxyXG4gICAgICAgICAgICBzdXNwZW5zZS5lZmZlY3RzLmxlbmd0aCA9IDA7XHJcbiAgICAgICAgICAgIC8vIGRpc2NhcmQgcHJldmlvdXMgY29udGFpbmVyXHJcbiAgICAgICAgICAgIHN1c3BlbnNlLmhpZGRlbkNvbnRhaW5lciA9IGNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICBpZiAoaXNJbkZhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBhbHJlYWR5IGluIGZhbGxiYWNrIHN0YXRlXHJcbiAgICAgICAgICAgICAgICBwYXRjaChudWxsLCBuZXdCcmFuY2gsIHN1c3BlbnNlLmhpZGRlbkNvbnRhaW5lciwgbnVsbCwgcGFyZW50Q29tcG9uZW50LCBzdXNwZW5zZSwgaXNTVkcsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkKTtcclxuICAgICAgICAgICAgICAgIGlmIChzdXNwZW5zZS5kZXBzIDw9IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBzdXNwZW5zZS5yZXNvbHZlKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBwYXRjaChhY3RpdmVCcmFuY2gsIG5ld0ZhbGxiYWNrLCBjb250YWluZXIsIGFuY2hvciwgcGFyZW50Q29tcG9uZW50LCBudWxsLCAvLyBmYWxsYmFjayB0cmVlIHdpbGwgbm90IGhhdmUgc3VzcGVuc2UgY29udGV4dFxyXG4gICAgICAgICAgICAgICAgICAgIGlzU1ZHLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgc2V0QWN0aXZlQnJhbmNoKHN1c3BlbnNlLCBuZXdGYWxsYmFjayk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoYWN0aXZlQnJhbmNoICYmIGlzU2FtZVZOb2RlVHlwZShuZXdCcmFuY2gsIGFjdGl2ZUJyYW5jaCkpIHtcclxuICAgICAgICAgICAgICAgIC8vIHRvZ2dsZWQgXCJiYWNrXCIgdG8gY3VycmVudCBhY3RpdmUgYnJhbmNoXHJcbiAgICAgICAgICAgICAgICBwYXRjaChhY3RpdmVCcmFuY2gsIG5ld0JyYW5jaCwgY29udGFpbmVyLCBhbmNob3IsIHBhcmVudENvbXBvbmVudCwgc3VzcGVuc2UsIGlzU1ZHLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCk7XHJcbiAgICAgICAgICAgICAgICAvLyBmb3JjZSByZXNvbHZlXHJcbiAgICAgICAgICAgICAgICBzdXNwZW5zZS5yZXNvbHZlKHRydWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8gc3dpdGNoZWQgdG8gYSAzcmQgYnJhbmNoXHJcbiAgICAgICAgICAgICAgICBwYXRjaChudWxsLCBuZXdCcmFuY2gsIHN1c3BlbnNlLmhpZGRlbkNvbnRhaW5lciwgbnVsbCwgcGFyZW50Q29tcG9uZW50LCBzdXNwZW5zZSwgaXNTVkcsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkKTtcclxuICAgICAgICAgICAgICAgIGlmIChzdXNwZW5zZS5kZXBzIDw9IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBzdXNwZW5zZS5yZXNvbHZlKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICBpZiAoYWN0aXZlQnJhbmNoICYmIGlzU2FtZVZOb2RlVHlwZShuZXdCcmFuY2gsIGFjdGl2ZUJyYW5jaCkpIHtcclxuICAgICAgICAgICAgLy8gcm9vdCBkaWQgbm90IGNoYW5nZSwganVzdCBub3JtYWwgcGF0Y2hcclxuICAgICAgICAgICAgcGF0Y2goYWN0aXZlQnJhbmNoLCBuZXdCcmFuY2gsIGNvbnRhaW5lciwgYW5jaG9yLCBwYXJlbnRDb21wb25lbnQsIHN1c3BlbnNlLCBpc1NWRywgc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQpO1xyXG4gICAgICAgICAgICBzZXRBY3RpdmVCcmFuY2goc3VzcGVuc2UsIG5ld0JyYW5jaCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAvLyByb290IG5vZGUgdG9nZ2xlZFxyXG4gICAgICAgICAgICAvLyBpbnZva2UgQHBlbmRpbmcgZXZlbnRcclxuICAgICAgICAgICAgdHJpZ2dlckV2ZW50KG4yLCAnb25QZW5kaW5nJyk7XHJcbiAgICAgICAgICAgIC8vIG1vdW50IHBlbmRpbmcgYnJhbmNoIGluIG9mZi1kb20gY29udGFpbmVyXHJcbiAgICAgICAgICAgIHN1c3BlbnNlLnBlbmRpbmdCcmFuY2ggPSBuZXdCcmFuY2g7XHJcbiAgICAgICAgICAgIHN1c3BlbnNlLnBlbmRpbmdJZCsrO1xyXG4gICAgICAgICAgICBwYXRjaChudWxsLCBuZXdCcmFuY2gsIHN1c3BlbnNlLmhpZGRlbkNvbnRhaW5lciwgbnVsbCwgcGFyZW50Q29tcG9uZW50LCBzdXNwZW5zZSwgaXNTVkcsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkKTtcclxuICAgICAgICAgICAgaWYgKHN1c3BlbnNlLmRlcHMgPD0gMCkge1xyXG4gICAgICAgICAgICAgICAgLy8gaW5jb21pbmcgYnJhbmNoIGhhcyBubyBhc3luYyBkZXBzLCByZXNvbHZlIG5vdy5cclxuICAgICAgICAgICAgICAgIHN1c3BlbnNlLnJlc29sdmUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHsgdGltZW91dCwgcGVuZGluZ0lkIH0gPSBzdXNwZW5zZTtcclxuICAgICAgICAgICAgICAgIGlmICh0aW1lb3V0ID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3VzcGVuc2UucGVuZGluZ0lkID09PSBwZW5kaW5nSWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1c3BlbnNlLmZhbGxiYWNrKG5ld0ZhbGxiYWNrKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0sIHRpbWVvdXQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAodGltZW91dCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHN1c3BlbnNlLmZhbGxiYWNrKG5ld0ZhbGxiYWNrKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5sZXQgaGFzV2FybmVkID0gZmFsc2U7XHJcbmZ1bmN0aW9uIGNyZWF0ZVN1c3BlbnNlQm91bmRhcnkodm5vZGUsIHBhcmVudCwgcGFyZW50Q29tcG9uZW50LCBjb250YWluZXIsIGhpZGRlbkNvbnRhaW5lciwgYW5jaG9yLCBpc1NWRywgc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQsIHJlbmRlcmVySW50ZXJuYWxzLCBpc0h5ZHJhdGluZyA9IGZhbHNlKSB7XHJcbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cclxuICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgIWZhbHNlICYmICFoYXNXYXJuZWQpIHtcclxuICAgICAgICBoYXNXYXJuZWQgPSB0cnVlO1xyXG4gICAgICAgIC8vIEB0cy1pZ25vcmUgYGNvbnNvbGUuaW5mb2AgY2Fubm90IGJlIG51bGwgZXJyb3JcclxuICAgICAgICBjb25zb2xlW2NvbnNvbGUuaW5mbyA/ICdpbmZvJyA6ICdsb2cnXShgPFN1c3BlbnNlPiBpcyBhbiBleHBlcmltZW50YWwgZmVhdHVyZSBhbmQgaXRzIEFQSSB3aWxsIGxpa2VseSBjaGFuZ2UuYCk7XHJcbiAgICB9XHJcbiAgICBjb25zdCB7IHA6IHBhdGNoLCBtOiBtb3ZlLCB1bTogdW5tb3VudCwgbjogbmV4dCwgbzogeyBwYXJlbnROb2RlLCByZW1vdmUgfSB9ID0gcmVuZGVyZXJJbnRlcm5hbHM7XHJcbiAgICBjb25zdCB0aW1lb3V0ID0gdG9OdW1iZXIodm5vZGUucHJvcHMgJiYgdm5vZGUucHJvcHMudGltZW91dCk7XHJcbiAgICBjb25zdCBzdXNwZW5zZSA9IHtcclxuICAgICAgICB2bm9kZSxcclxuICAgICAgICBwYXJlbnQsXHJcbiAgICAgICAgcGFyZW50Q29tcG9uZW50LFxyXG4gICAgICAgIGlzU1ZHLFxyXG4gICAgICAgIGNvbnRhaW5lcixcclxuICAgICAgICBoaWRkZW5Db250YWluZXIsXHJcbiAgICAgICAgYW5jaG9yLFxyXG4gICAgICAgIGRlcHM6IDAsXHJcbiAgICAgICAgcGVuZGluZ0lkOiAwLFxyXG4gICAgICAgIHRpbWVvdXQ6IHR5cGVvZiB0aW1lb3V0ID09PSAnbnVtYmVyJyA/IHRpbWVvdXQgOiAtMSxcclxuICAgICAgICBhY3RpdmVCcmFuY2g6IG51bGwsXHJcbiAgICAgICAgcGVuZGluZ0JyYW5jaDogbnVsbCxcclxuICAgICAgICBpc0luRmFsbGJhY2s6IHRydWUsXHJcbiAgICAgICAgaXNIeWRyYXRpbmcsXHJcbiAgICAgICAgaXNVbm1vdW50ZWQ6IGZhbHNlLFxyXG4gICAgICAgIGVmZmVjdHM6IFtdLFxyXG4gICAgICAgIHJlc29sdmUocmVzdW1lID0gZmFsc2UpIHtcclxuICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFyZXN1bWUgJiYgIXN1c3BlbnNlLnBlbmRpbmdCcmFuY2gpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYHN1c3BlbnNlLnJlc29sdmUoKSBpcyBjYWxsZWQgd2l0aG91dCBhIHBlbmRpbmcgYnJhbmNoLmApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKHN1c3BlbnNlLmlzVW5tb3VudGVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBzdXNwZW5zZS5yZXNvbHZlKCkgaXMgY2FsbGVkIG9uIGFuIGFscmVhZHkgdW5tb3VudGVkIHN1c3BlbnNlIGJvdW5kYXJ5LmApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbnN0IHsgdm5vZGUsIGFjdGl2ZUJyYW5jaCwgcGVuZGluZ0JyYW5jaCwgcGVuZGluZ0lkLCBlZmZlY3RzLCBwYXJlbnRDb21wb25lbnQsIGNvbnRhaW5lciB9ID0gc3VzcGVuc2U7XHJcbiAgICAgICAgICAgIGlmIChzdXNwZW5zZS5pc0h5ZHJhdGluZykge1xyXG4gICAgICAgICAgICAgICAgc3VzcGVuc2UuaXNIeWRyYXRpbmcgPSBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmICghcmVzdW1lKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBkZWxheUVudGVyID0gYWN0aXZlQnJhbmNoICYmXHJcbiAgICAgICAgICAgICAgICAgICAgcGVuZGluZ0JyYW5jaC50cmFuc2l0aW9uICYmXHJcbiAgICAgICAgICAgICAgICAgICAgcGVuZGluZ0JyYW5jaC50cmFuc2l0aW9uLm1vZGUgPT09ICdvdXQtaW4nO1xyXG4gICAgICAgICAgICAgICAgaWYgKGRlbGF5RW50ZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICBhY3RpdmVCcmFuY2gudHJhbnNpdGlvbi5hZnRlckxlYXZlID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocGVuZGluZ0lkID09PSBzdXNwZW5zZS5wZW5kaW5nSWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmUocGVuZGluZ0JyYW5jaCwgY29udGFpbmVyLCBhbmNob3IsIDAgLyogRU5URVIgKi8pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIHRoaXMgaXMgaW5pdGlhbCBhbmNob3Igb24gbW91bnRcclxuICAgICAgICAgICAgICAgIGxldCB7IGFuY2hvciB9ID0gc3VzcGVuc2U7XHJcbiAgICAgICAgICAgICAgICAvLyB1bm1vdW50IGN1cnJlbnQgYWN0aXZlIHRyZWVcclxuICAgICAgICAgICAgICAgIGlmIChhY3RpdmVCcmFuY2gpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBpZiB0aGUgZmFsbGJhY2sgdHJlZSB3YXMgbW91bnRlZCwgaXQgbWF5IGhhdmUgYmVlbiBtb3ZlZFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGFzIHBhcnQgb2YgYSBwYXJlbnQgc3VzcGVuc2UuIGdldCB0aGUgbGF0ZXN0IGFuY2hvciBmb3IgaW5zZXJ0aW9uXHJcbiAgICAgICAgICAgICAgICAgICAgYW5jaG9yID0gbmV4dChhY3RpdmVCcmFuY2gpO1xyXG4gICAgICAgICAgICAgICAgICAgIHVubW91bnQoYWN0aXZlQnJhbmNoLCBwYXJlbnRDb21wb25lbnQsIHN1c3BlbnNlLCB0cnVlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmICghZGVsYXlFbnRlcikge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIG1vdmUgY29udGVudCBmcm9tIG9mZi1kb20gY29udGFpbmVyIHRvIGFjdHVhbCBjb250YWluZXJcclxuICAgICAgICAgICAgICAgICAgICBtb3ZlKHBlbmRpbmdCcmFuY2gsIGNvbnRhaW5lciwgYW5jaG9yLCAwIC8qIEVOVEVSICovKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzZXRBY3RpdmVCcmFuY2goc3VzcGVuc2UsIHBlbmRpbmdCcmFuY2gpO1xyXG4gICAgICAgICAgICBzdXNwZW5zZS5wZW5kaW5nQnJhbmNoID0gbnVsbDtcclxuICAgICAgICAgICAgc3VzcGVuc2UuaXNJbkZhbGxiYWNrID0gZmFsc2U7XHJcbiAgICAgICAgICAgIC8vIGZsdXNoIGJ1ZmZlcmVkIGVmZmVjdHNcclxuICAgICAgICAgICAgLy8gY2hlY2sgaWYgdGhlcmUgaXMgYSBwZW5kaW5nIHBhcmVudCBzdXNwZW5zZVxyXG4gICAgICAgICAgICBsZXQgcGFyZW50ID0gc3VzcGVuc2UucGFyZW50O1xyXG4gICAgICAgICAgICBsZXQgaGFzVW5yZXNvbHZlZEFuY2VzdG9yID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHdoaWxlIChwYXJlbnQpIHtcclxuICAgICAgICAgICAgICAgIGlmIChwYXJlbnQucGVuZGluZ0JyYW5jaCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGZvdW5kIGEgcGVuZGluZyBwYXJlbnQgc3VzcGVuc2UsIG1lcmdlIGJ1ZmZlcmVkIHBvc3Qgam9ic1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGludG8gdGhhdCBwYXJlbnRcclxuICAgICAgICAgICAgICAgICAgICBwYXJlbnQuZWZmZWN0cy5wdXNoKC4uLmVmZmVjdHMpO1xyXG4gICAgICAgICAgICAgICAgICAgIGhhc1VucmVzb2x2ZWRBbmNlc3RvciA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBwYXJlbnQgPSBwYXJlbnQucGFyZW50O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIG5vIHBlbmRpbmcgcGFyZW50IHN1c3BlbnNlLCBmbHVzaCBhbGwgam9ic1xyXG4gICAgICAgICAgICBpZiAoIWhhc1VucmVzb2x2ZWRBbmNlc3Rvcikge1xyXG4gICAgICAgICAgICAgICAgcXVldWVQb3N0Rmx1c2hDYihlZmZlY3RzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzdXNwZW5zZS5lZmZlY3RzID0gW107XHJcbiAgICAgICAgICAgIC8vIGludm9rZSBAcmVzb2x2ZSBldmVudFxyXG4gICAgICAgICAgICB0cmlnZ2VyRXZlbnQodm5vZGUsICdvblJlc29sdmUnKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGZhbGxiYWNrKGZhbGxiYWNrVk5vZGUpIHtcclxuICAgICAgICAgICAgaWYgKCFzdXNwZW5zZS5wZW5kaW5nQnJhbmNoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29uc3QgeyB2bm9kZSwgYWN0aXZlQnJhbmNoLCBwYXJlbnRDb21wb25lbnQsIGNvbnRhaW5lciwgaXNTVkcgfSA9IHN1c3BlbnNlO1xyXG4gICAgICAgICAgICAvLyBpbnZva2UgQGZhbGxiYWNrIGV2ZW50XHJcbiAgICAgICAgICAgIHRyaWdnZXJFdmVudCh2bm9kZSwgJ29uRmFsbGJhY2snKTtcclxuICAgICAgICAgICAgY29uc3QgYW5jaG9yID0gbmV4dChhY3RpdmVCcmFuY2gpO1xyXG4gICAgICAgICAgICBjb25zdCBtb3VudEZhbGxiYWNrID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFzdXNwZW5zZS5pc0luRmFsbGJhY2spIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyBtb3VudCB0aGUgZmFsbGJhY2sgdHJlZVxyXG4gICAgICAgICAgICAgICAgcGF0Y2gobnVsbCwgZmFsbGJhY2tWTm9kZSwgY29udGFpbmVyLCBhbmNob3IsIHBhcmVudENvbXBvbmVudCwgbnVsbCwgLy8gZmFsbGJhY2sgdHJlZSB3aWxsIG5vdCBoYXZlIHN1c3BlbnNlIGNvbnRleHRcclxuICAgICAgICAgICAgICAgIGlzU1ZHLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCk7XHJcbiAgICAgICAgICAgICAgICBzZXRBY3RpdmVCcmFuY2goc3VzcGVuc2UsIGZhbGxiYWNrVk5vZGUpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBjb25zdCBkZWxheUVudGVyID0gZmFsbGJhY2tWTm9kZS50cmFuc2l0aW9uICYmIGZhbGxiYWNrVk5vZGUudHJhbnNpdGlvbi5tb2RlID09PSAnb3V0LWluJztcclxuICAgICAgICAgICAgaWYgKGRlbGF5RW50ZXIpIHtcclxuICAgICAgICAgICAgICAgIGFjdGl2ZUJyYW5jaC50cmFuc2l0aW9uLmFmdGVyTGVhdmUgPSBtb3VudEZhbGxiYWNrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHN1c3BlbnNlLmlzSW5GYWxsYmFjayA9IHRydWU7XHJcbiAgICAgICAgICAgIC8vIHVubW91bnQgY3VycmVudCBhY3RpdmUgYnJhbmNoXHJcbiAgICAgICAgICAgIHVubW91bnQoYWN0aXZlQnJhbmNoLCBwYXJlbnRDb21wb25lbnQsIG51bGwsIC8vIG5vIHN1c3BlbnNlIHNvIHVubW91bnQgaG9va3MgZmlyZSBub3dcclxuICAgICAgICAgICAgdHJ1ZSAvLyBzaG91bGRSZW1vdmVcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgaWYgKCFkZWxheUVudGVyKSB7XHJcbiAgICAgICAgICAgICAgICBtb3VudEZhbGxiYWNrKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIG1vdmUoY29udGFpbmVyLCBhbmNob3IsIHR5cGUpIHtcclxuICAgICAgICAgICAgc3VzcGVuc2UuYWN0aXZlQnJhbmNoICYmXHJcbiAgICAgICAgICAgICAgICBtb3ZlKHN1c3BlbnNlLmFjdGl2ZUJyYW5jaCwgY29udGFpbmVyLCBhbmNob3IsIHR5cGUpO1xyXG4gICAgICAgICAgICBzdXNwZW5zZS5jb250YWluZXIgPSBjb250YWluZXI7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBuZXh0KCkge1xyXG4gICAgICAgICAgICByZXR1cm4gc3VzcGVuc2UuYWN0aXZlQnJhbmNoICYmIG5leHQoc3VzcGVuc2UuYWN0aXZlQnJhbmNoKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHJlZ2lzdGVyRGVwKGluc3RhbmNlLCBzZXR1cFJlbmRlckVmZmVjdCkge1xyXG4gICAgICAgICAgICBjb25zdCBpc0luUGVuZGluZ1N1c3BlbnNlID0gISFzdXNwZW5zZS5wZW5kaW5nQnJhbmNoO1xyXG4gICAgICAgICAgICBpZiAoaXNJblBlbmRpbmdTdXNwZW5zZSkge1xyXG4gICAgICAgICAgICAgICAgc3VzcGVuc2UuZGVwcysrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbnN0IGh5ZHJhdGVkRWwgPSBpbnN0YW5jZS52bm9kZS5lbDtcclxuICAgICAgICAgICAgaW5zdGFuY2VcclxuICAgICAgICAgICAgICAgIC5hc3luY0RlcC5jYXRjaChlcnIgPT4ge1xyXG4gICAgICAgICAgICAgICAgaGFuZGxlRXJyb3IoZXJyLCBpbnN0YW5jZSwgMCAvKiBTRVRVUF9GVU5DVElPTiAqLyk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAudGhlbihhc3luY1NldHVwUmVzdWx0ID0+IHtcclxuICAgICAgICAgICAgICAgIC8vIHJldHJ5IHdoZW4gdGhlIHNldHVwKCkgcHJvbWlzZSByZXNvbHZlcy5cclxuICAgICAgICAgICAgICAgIC8vIGNvbXBvbmVudCBtYXkgaGF2ZSBiZWVuIHVubW91bnRlZCBiZWZvcmUgcmVzb2x2ZS5cclxuICAgICAgICAgICAgICAgIGlmIChpbnN0YW5jZS5pc1VubW91bnRlZCB8fFxyXG4gICAgICAgICAgICAgICAgICAgIHN1c3BlbnNlLmlzVW5tb3VudGVkIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgc3VzcGVuc2UucGVuZGluZ0lkICE9PSBpbnN0YW5jZS5zdXNwZW5zZUlkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gcmV0cnkgZnJvbSB0aGlzIGNvbXBvbmVudFxyXG4gICAgICAgICAgICAgICAgaW5zdGFuY2UuYXN5bmNSZXNvbHZlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB7IHZub2RlIH0gPSBpbnN0YW5jZTtcclxuICAgICAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcclxuICAgICAgICAgICAgICAgICAgICBwdXNoV2FybmluZ0NvbnRleHQodm5vZGUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaGFuZGxlU2V0dXBSZXN1bHQoaW5zdGFuY2UsIGFzeW5jU2V0dXBSZXN1bHQsIGZhbHNlKTtcclxuICAgICAgICAgICAgICAgIGlmIChoeWRyYXRlZEVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gdm5vZGUgbWF5IGhhdmUgYmVlbiByZXBsYWNlZCBpZiBhbiB1cGRhdGUgaGFwcGVuZWQgYmVmb3JlIHRoZVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGFzeW5jIGRlcCBpcyByZXNvbHZlZC5cclxuICAgICAgICAgICAgICAgICAgICB2bm9kZS5lbCA9IGh5ZHJhdGVkRWw7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjb25zdCBwbGFjZWhvbGRlciA9ICFoeWRyYXRlZEVsICYmIGluc3RhbmNlLnN1YlRyZWUuZWw7XHJcbiAgICAgICAgICAgICAgICBzZXR1cFJlbmRlckVmZmVjdChpbnN0YW5jZSwgdm5vZGUsIFxyXG4gICAgICAgICAgICAgICAgLy8gY29tcG9uZW50IG1heSBoYXZlIGJlZW4gbW92ZWQgYmVmb3JlIHJlc29sdmUuXHJcbiAgICAgICAgICAgICAgICAvLyBpZiB0aGlzIGlzIG5vdCBhIGh5ZHJhdGlvbiwgaW5zdGFuY2Uuc3ViVHJlZSB3aWxsIGJlIHRoZSBjb21tZW50XHJcbiAgICAgICAgICAgICAgICAvLyBwbGFjZWhvbGRlci5cclxuICAgICAgICAgICAgICAgIHBhcmVudE5vZGUoaHlkcmF0ZWRFbCB8fCBpbnN0YW5jZS5zdWJUcmVlLmVsKSwgXHJcbiAgICAgICAgICAgICAgICAvLyBhbmNob3Igd2lsbCBub3QgYmUgdXNlZCBpZiB0aGlzIGlzIGh5ZHJhdGlvbiwgc28gb25seSBuZWVkIHRvXHJcbiAgICAgICAgICAgICAgICAvLyBjb25zaWRlciB0aGUgY29tbWVudCBwbGFjZWhvbGRlciBjYXNlLlxyXG4gICAgICAgICAgICAgICAgaHlkcmF0ZWRFbCA/IG51bGwgOiBuZXh0KGluc3RhbmNlLnN1YlRyZWUpLCBzdXNwZW5zZSwgaXNTVkcsIG9wdGltaXplZCk7XHJcbiAgICAgICAgICAgICAgICBpZiAocGxhY2Vob2xkZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICByZW1vdmUocGxhY2Vob2xkZXIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdXBkYXRlSE9DSG9zdEVsKGluc3RhbmNlLCB2bm9kZS5lbCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcG9wV2FybmluZ0NvbnRleHQoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIG9ubHkgZGVjcmVhc2UgZGVwcyBjb3VudCBpZiBzdXNwZW5zZSBpcyBub3QgYWxyZWFkeSByZXNvbHZlZFxyXG4gICAgICAgICAgICAgICAgaWYgKGlzSW5QZW5kaW5nU3VzcGVuc2UgJiYgLS1zdXNwZW5zZS5kZXBzID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3VzcGVuc2UucmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHVubW91bnQocGFyZW50U3VzcGVuc2UsIGRvUmVtb3ZlKSB7XHJcbiAgICAgICAgICAgIHN1c3BlbnNlLmlzVW5tb3VudGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgaWYgKHN1c3BlbnNlLmFjdGl2ZUJyYW5jaCkge1xyXG4gICAgICAgICAgICAgICAgdW5tb3VudChzdXNwZW5zZS5hY3RpdmVCcmFuY2gsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIGRvUmVtb3ZlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoc3VzcGVuc2UucGVuZGluZ0JyYW5jaCkge1xyXG4gICAgICAgICAgICAgICAgdW5tb3VudChzdXNwZW5zZS5wZW5kaW5nQnJhbmNoLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBkb1JlbW92ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIHN1c3BlbnNlO1xyXG59XHJcbmZ1bmN0aW9uIGh5ZHJhdGVTdXNwZW5zZShub2RlLCB2bm9kZSwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgaXNTVkcsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkLCByZW5kZXJlckludGVybmFscywgaHlkcmF0ZU5vZGUpIHtcclxuICAgIC8qIGVzbGludC1kaXNhYmxlIG5vLXJlc3RyaWN0ZWQtZ2xvYmFscyAqL1xyXG4gICAgY29uc3Qgc3VzcGVuc2UgPSAodm5vZGUuc3VzcGVuc2UgPSBjcmVhdGVTdXNwZW5zZUJvdW5kYXJ5KHZub2RlLCBwYXJlbnRTdXNwZW5zZSwgcGFyZW50Q29tcG9uZW50LCBub2RlLnBhcmVudE5vZGUsIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpLCBudWxsLCBpc1NWRywgc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQsIHJlbmRlcmVySW50ZXJuYWxzLCB0cnVlIC8qIGh5ZHJhdGluZyAqLykpO1xyXG4gICAgLy8gdGhlcmUgYXJlIHR3byBwb3NzaWJsZSBzY2VuYXJpb3MgZm9yIHNlcnZlci1yZW5kZXJlZCBzdXNwZW5zZTpcclxuICAgIC8vIC0gc3VjY2Vzczogc3NyIGNvbnRlbnQgc2hvdWxkIGJlIGZ1bGx5IHJlc29sdmVkXHJcbiAgICAvLyAtIGZhaWx1cmU6IHNzciBjb250ZW50IHNob3VsZCBiZSB0aGUgZmFsbGJhY2sgYnJhbmNoLlxyXG4gICAgLy8gaG93ZXZlciwgb24gdGhlIGNsaWVudCB3ZSBkb24ndCByZWFsbHkga25vdyBpZiBpdCBoYXMgZmFpbGVkIG9yIG5vdFxyXG4gICAgLy8gYXR0ZW1wdCB0byBoeWRyYXRlIHRoZSBET00gYXNzdW1pbmcgaXQgaGFzIHN1Y2NlZWRlZCwgYnV0IHdlIHN0aWxsXHJcbiAgICAvLyBuZWVkIHRvIGNvbnN0cnVjdCBhIHN1c3BlbnNlIGJvdW5kYXJ5IGZpcnN0XHJcbiAgICBjb25zdCByZXN1bHQgPSBoeWRyYXRlTm9kZShub2RlLCAoc3VzcGVuc2UucGVuZGluZ0JyYW5jaCA9IHZub2RlLnNzQ29udGVudCksIHBhcmVudENvbXBvbmVudCwgc3VzcGVuc2UsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkKTtcclxuICAgIGlmIChzdXNwZW5zZS5kZXBzID09PSAwKSB7XHJcbiAgICAgICAgc3VzcGVuc2UucmVzb2x2ZSgpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIC8qIGVzbGludC1lbmFibGUgbm8tcmVzdHJpY3RlZC1nbG9iYWxzICovXHJcbn1cclxuZnVuY3Rpb24gbm9ybWFsaXplU3VzcGVuc2VDaGlsZHJlbih2bm9kZSkge1xyXG4gICAgY29uc3QgeyBzaGFwZUZsYWcsIGNoaWxkcmVuIH0gPSB2bm9kZTtcclxuICAgIGNvbnN0IGlzU2xvdENoaWxkcmVuID0gc2hhcGVGbGFnICYgMzIgLyogU0xPVFNfQ0hJTERSRU4gKi87XHJcbiAgICB2bm9kZS5zc0NvbnRlbnQgPSBub3JtYWxpemVTdXNwZW5zZVNsb3QoaXNTbG90Q2hpbGRyZW4gPyBjaGlsZHJlbi5kZWZhdWx0IDogY2hpbGRyZW4pO1xyXG4gICAgdm5vZGUuc3NGYWxsYmFjayA9IGlzU2xvdENoaWxkcmVuXHJcbiAgICAgICAgPyBub3JtYWxpemVTdXNwZW5zZVNsb3QoY2hpbGRyZW4uZmFsbGJhY2spXHJcbiAgICAgICAgOiBjcmVhdGVWTm9kZShDb21tZW50KTtcclxufVxyXG5mdW5jdGlvbiBub3JtYWxpemVTdXNwZW5zZVNsb3Qocykge1xyXG4gICAgbGV0IGJsb2NrO1xyXG4gICAgaWYgKGlzRnVuY3Rpb24ocykpIHtcclxuICAgICAgICBjb25zdCB0cmFja0Jsb2NrID0gaXNCbG9ja1RyZWVFbmFibGVkICYmIHMuX2M7XHJcbiAgICAgICAgaWYgKHRyYWNrQmxvY2spIHtcclxuICAgICAgICAgICAgLy8gZGlzYWJsZVRyYWNraW5nOiBmYWxzZVxyXG4gICAgICAgICAgICAvLyBhbGxvdyBibG9jayB0cmFja2luZyBmb3IgY29tcGlsZWQgc2xvdHNcclxuICAgICAgICAgICAgLy8gKHNlZSAuL2NvbXBvbmVudFJlbmRlckNvbnRleHQudHMpXHJcbiAgICAgICAgICAgIHMuX2QgPSBmYWxzZTtcclxuICAgICAgICAgICAgb3BlbkJsb2NrKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHMgPSBzKCk7XHJcbiAgICAgICAgaWYgKHRyYWNrQmxvY2spIHtcclxuICAgICAgICAgICAgcy5fZCA9IHRydWU7XHJcbiAgICAgICAgICAgIGJsb2NrID0gY3VycmVudEJsb2NrO1xyXG4gICAgICAgICAgICBjbG9zZUJsb2NrKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYgKGlzQXJyYXkocykpIHtcclxuICAgICAgICBjb25zdCBzaW5nbGVDaGlsZCA9IGZpbHRlclNpbmdsZVJvb3Qocyk7XHJcbiAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiAhc2luZ2xlQ2hpbGQpIHtcclxuICAgICAgICAgICAgd2FybihgPFN1c3BlbnNlPiBzbG90cyBleHBlY3QgYSBzaW5nbGUgcm9vdCBub2RlLmApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBzID0gc2luZ2xlQ2hpbGQ7XHJcbiAgICB9XHJcbiAgICBzID0gbm9ybWFsaXplVk5vZGUocyk7XHJcbiAgICBpZiAoYmxvY2sgJiYgIXMuZHluYW1pY0NoaWxkcmVuKSB7XHJcbiAgICAgICAgcy5keW5hbWljQ2hpbGRyZW4gPSBibG9jay5maWx0ZXIoYyA9PiBjICE9PSBzKTtcclxuICAgIH1cclxuICAgIHJldHVybiBzO1xyXG59XHJcbmZ1bmN0aW9uIHF1ZXVlRWZmZWN0V2l0aFN1c3BlbnNlKGZuLCBzdXNwZW5zZSkge1xyXG4gICAgaWYgKHN1c3BlbnNlICYmIHN1c3BlbnNlLnBlbmRpbmdCcmFuY2gpIHtcclxuICAgICAgICBpZiAoaXNBcnJheShmbikpIHtcclxuICAgICAgICAgICAgc3VzcGVuc2UuZWZmZWN0cy5wdXNoKC4uLmZuKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHN1c3BlbnNlLmVmZmVjdHMucHVzaChmbik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgcXVldWVQb3N0Rmx1c2hDYihmbik7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gc2V0QWN0aXZlQnJhbmNoKHN1c3BlbnNlLCBicmFuY2gpIHtcclxuICAgIHN1c3BlbnNlLmFjdGl2ZUJyYW5jaCA9IGJyYW5jaDtcclxuICAgIGNvbnN0IHsgdm5vZGUsIHBhcmVudENvbXBvbmVudCB9ID0gc3VzcGVuc2U7XHJcbiAgICBjb25zdCBlbCA9ICh2bm9kZS5lbCA9IGJyYW5jaC5lbCk7XHJcbiAgICAvLyBpbiBjYXNlIHN1c3BlbnNlIGlzIHRoZSByb290IG5vZGUgb2YgYSBjb21wb25lbnQsXHJcbiAgICAvLyByZWN1cnNpdmVseSB1cGRhdGUgdGhlIEhPQyBlbFxyXG4gICAgaWYgKHBhcmVudENvbXBvbmVudCAmJiBwYXJlbnRDb21wb25lbnQuc3ViVHJlZSA9PT0gdm5vZGUpIHtcclxuICAgICAgICBwYXJlbnRDb21wb25lbnQudm5vZGUuZWwgPSBlbDtcclxuICAgICAgICB1cGRhdGVIT0NIb3N0RWwocGFyZW50Q29tcG9uZW50LCBlbCk7XHJcbiAgICB9XHJcbn1cblxuZnVuY3Rpb24gcHJvdmlkZShrZXksIHZhbHVlKSB7XHJcbiAgICBpZiAoIWN1cnJlbnRJbnN0YW5jZSkge1xyXG4gICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcclxuICAgICAgICAgICAgd2FybihgcHJvdmlkZSgpIGNhbiBvbmx5IGJlIHVzZWQgaW5zaWRlIHNldHVwKCkuYCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgbGV0IHByb3ZpZGVzID0gY3VycmVudEluc3RhbmNlLnByb3ZpZGVzO1xyXG4gICAgICAgIC8vIGJ5IGRlZmF1bHQgYW4gaW5zdGFuY2UgaW5oZXJpdHMgaXRzIHBhcmVudCdzIHByb3ZpZGVzIG9iamVjdFxyXG4gICAgICAgIC8vIGJ1dCB3aGVuIGl0IG5lZWRzIHRvIHByb3ZpZGUgdmFsdWVzIG9mIGl0cyBvd24sIGl0IGNyZWF0ZXMgaXRzXHJcbiAgICAgICAgLy8gb3duIHByb3ZpZGVzIG9iamVjdCB1c2luZyBwYXJlbnQgcHJvdmlkZXMgb2JqZWN0IGFzIHByb3RvdHlwZS5cclxuICAgICAgICAvLyB0aGlzIHdheSBpbiBgaW5qZWN0YCB3ZSBjYW4gc2ltcGx5IGxvb2sgdXAgaW5qZWN0aW9ucyBmcm9tIGRpcmVjdFxyXG4gICAgICAgIC8vIHBhcmVudCBhbmQgbGV0IHRoZSBwcm90b3R5cGUgY2hhaW4gZG8gdGhlIHdvcmsuXHJcbiAgICAgICAgY29uc3QgcGFyZW50UHJvdmlkZXMgPSBjdXJyZW50SW5zdGFuY2UucGFyZW50ICYmIGN1cnJlbnRJbnN0YW5jZS5wYXJlbnQucHJvdmlkZXM7XHJcbiAgICAgICAgaWYgKHBhcmVudFByb3ZpZGVzID09PSBwcm92aWRlcykge1xyXG4gICAgICAgICAgICBwcm92aWRlcyA9IGN1cnJlbnRJbnN0YW5jZS5wcm92aWRlcyA9IE9iamVjdC5jcmVhdGUocGFyZW50UHJvdmlkZXMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBUUyBkb2Vzbid0IGFsbG93IHN5bWJvbCBhcyBpbmRleCB0eXBlXHJcbiAgICAgICAgcHJvdmlkZXNba2V5XSA9IHZhbHVlO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIGluamVjdChrZXksIGRlZmF1bHRWYWx1ZSwgdHJlYXREZWZhdWx0QXNGYWN0b3J5ID0gZmFsc2UpIHtcclxuICAgIC8vIGZhbGxiYWNrIHRvIGBjdXJyZW50UmVuZGVyaW5nSW5zdGFuY2VgIHNvIHRoYXQgdGhpcyBjYW4gYmUgY2FsbGVkIGluXHJcbiAgICAvLyBhIGZ1bmN0aW9uYWwgY29tcG9uZW50XHJcbiAgICBjb25zdCBpbnN0YW5jZSA9IGN1cnJlbnRJbnN0YW5jZSB8fCBjdXJyZW50UmVuZGVyaW5nSW5zdGFuY2U7XHJcbiAgICBpZiAoaW5zdGFuY2UpIHtcclxuICAgICAgICAvLyAjMjQwMFxyXG4gICAgICAgIC8vIHRvIHN1cHBvcnQgYGFwcC51c2VgIHBsdWdpbnMsXHJcbiAgICAgICAgLy8gZmFsbGJhY2sgdG8gYXBwQ29udGV4dCdzIGBwcm92aWRlc2AgaWYgdGhlIGluc3RhbmNlIGlzIGF0IHJvb3RcclxuICAgICAgICBjb25zdCBwcm92aWRlcyA9IGluc3RhbmNlLnBhcmVudCA9PSBudWxsXHJcbiAgICAgICAgICAgID8gaW5zdGFuY2Uudm5vZGUuYXBwQ29udGV4dCAmJiBpbnN0YW5jZS52bm9kZS5hcHBDb250ZXh0LnByb3ZpZGVzXHJcbiAgICAgICAgICAgIDogaW5zdGFuY2UucGFyZW50LnByb3ZpZGVzO1xyXG4gICAgICAgIGlmIChwcm92aWRlcyAmJiBrZXkgaW4gcHJvdmlkZXMpIHtcclxuICAgICAgICAgICAgLy8gVFMgZG9lc24ndCBhbGxvdyBzeW1ib2wgYXMgaW5kZXggdHlwZVxyXG4gICAgICAgICAgICByZXR1cm4gcHJvdmlkZXNba2V5XTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDEpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRyZWF0RGVmYXVsdEFzRmFjdG9yeSAmJiBpc0Z1bmN0aW9uKGRlZmF1bHRWYWx1ZSlcclxuICAgICAgICAgICAgICAgID8gZGVmYXVsdFZhbHVlLmNhbGwoaW5zdGFuY2UucHJveHkpXHJcbiAgICAgICAgICAgICAgICA6IGRlZmF1bHRWYWx1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XHJcbiAgICAgICAgICAgIHdhcm4oYGluamVjdGlvbiBcIiR7U3RyaW5nKGtleSl9XCIgbm90IGZvdW5kLmApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGVsc2UgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xyXG4gICAgICAgIHdhcm4oYGluamVjdCgpIGNhbiBvbmx5IGJlIHVzZWQgaW5zaWRlIHNldHVwKCkgb3IgZnVuY3Rpb25hbCBjb21wb25lbnRzLmApO1xyXG4gICAgfVxyXG59XG5cbi8vIFNpbXBsZSBlZmZlY3QuXHJcbmZ1bmN0aW9uIHdhdGNoRWZmZWN0KGVmZmVjdCwgb3B0aW9ucykge1xyXG4gICAgcmV0dXJuIGRvV2F0Y2goZWZmZWN0LCBudWxsLCBvcHRpb25zKTtcclxufVxyXG5mdW5jdGlvbiB3YXRjaFBvc3RFZmZlY3QoZWZmZWN0LCBvcHRpb25zKSB7XHJcbiAgICByZXR1cm4gZG9XYXRjaChlZmZlY3QsIG51bGwsICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJylcclxuICAgICAgICA/IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgb3B0aW9ucyksIHsgZmx1c2g6ICdwb3N0JyB9KSA6IHsgZmx1c2g6ICdwb3N0JyB9KSk7XHJcbn1cclxuZnVuY3Rpb24gd2F0Y2hTeW5jRWZmZWN0KGVmZmVjdCwgb3B0aW9ucykge1xyXG4gICAgcmV0dXJuIGRvV2F0Y2goZWZmZWN0LCBudWxsLCAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpXHJcbiAgICAgICAgPyBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIG9wdGlvbnMpLCB7IGZsdXNoOiAnc3luYycgfSkgOiB7IGZsdXNoOiAnc3luYycgfSkpO1xyXG59XHJcbi8vIGluaXRpYWwgdmFsdWUgZm9yIHdhdGNoZXJzIHRvIHRyaWdnZXIgb24gdW5kZWZpbmVkIGluaXRpYWwgdmFsdWVzXHJcbmNvbnN0IElOSVRJQUxfV0FUQ0hFUl9WQUxVRSA9IHt9O1xyXG4vLyBpbXBsZW1lbnRhdGlvblxyXG5mdW5jdGlvbiB3YXRjaChzb3VyY2UsIGNiLCBvcHRpb25zKSB7XHJcbiAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmICFpc0Z1bmN0aW9uKGNiKSkge1xyXG4gICAgICAgIHdhcm4oYFxcYHdhdGNoKGZuLCBvcHRpb25zPylcXGAgc2lnbmF0dXJlIGhhcyBiZWVuIG1vdmVkIHRvIGEgc2VwYXJhdGUgQVBJLiBgICtcclxuICAgICAgICAgICAgYFVzZSBcXGB3YXRjaEVmZmVjdChmbiwgb3B0aW9ucz8pXFxgIGluc3RlYWQuIFxcYHdhdGNoXFxgIG5vdyBvbmx5IGAgK1xyXG4gICAgICAgICAgICBgc3VwcG9ydHMgXFxgd2F0Y2goc291cmNlLCBjYiwgb3B0aW9ucz8pIHNpZ25hdHVyZS5gKTtcclxuICAgIH1cclxuICAgIHJldHVybiBkb1dhdGNoKHNvdXJjZSwgY2IsIG9wdGlvbnMpO1xyXG59XHJcbmZ1bmN0aW9uIGRvV2F0Y2goc291cmNlLCBjYiwgeyBpbW1lZGlhdGUsIGRlZXAsIGZsdXNoLCBvblRyYWNrLCBvblRyaWdnZXIgfSA9IEVNUFRZX09CSikge1xyXG4gICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiAhY2IpIHtcclxuICAgICAgICBpZiAoaW1tZWRpYXRlICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgd2Fybihgd2F0Y2goKSBcImltbWVkaWF0ZVwiIG9wdGlvbiBpcyBvbmx5IHJlc3BlY3RlZCB3aGVuIHVzaW5nIHRoZSBgICtcclxuICAgICAgICAgICAgICAgIGB3YXRjaChzb3VyY2UsIGNhbGxiYWNrLCBvcHRpb25zPykgc2lnbmF0dXJlLmApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoZGVlcCAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHdhcm4oYHdhdGNoKCkgXCJkZWVwXCIgb3B0aW9uIGlzIG9ubHkgcmVzcGVjdGVkIHdoZW4gdXNpbmcgdGhlIGAgK1xyXG4gICAgICAgICAgICAgICAgYHdhdGNoKHNvdXJjZSwgY2FsbGJhY2ssIG9wdGlvbnM/KSBzaWduYXR1cmUuYCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgY29uc3Qgd2FybkludmFsaWRTb3VyY2UgPSAocykgPT4ge1xyXG4gICAgICAgIHdhcm4oYEludmFsaWQgd2F0Y2ggc291cmNlOiBgLCBzLCBgQSB3YXRjaCBzb3VyY2UgY2FuIG9ubHkgYmUgYSBnZXR0ZXIvZWZmZWN0IGZ1bmN0aW9uLCBhIHJlZiwgYCArXHJcbiAgICAgICAgICAgIGBhIHJlYWN0aXZlIG9iamVjdCwgb3IgYW4gYXJyYXkgb2YgdGhlc2UgdHlwZXMuYCk7XHJcbiAgICB9O1xyXG4gICAgY29uc3QgaW5zdGFuY2UgPSBjdXJyZW50SW5zdGFuY2U7XHJcbiAgICBsZXQgZ2V0dGVyO1xyXG4gICAgbGV0IGZvcmNlVHJpZ2dlciA9IGZhbHNlO1xyXG4gICAgbGV0IGlzTXVsdGlTb3VyY2UgPSBmYWxzZTtcclxuICAgIGlmIChpc1JlZihzb3VyY2UpKSB7XHJcbiAgICAgICAgZ2V0dGVyID0gKCkgPT4gc291cmNlLnZhbHVlO1xyXG4gICAgICAgIGZvcmNlVHJpZ2dlciA9IGlzU2hhbGxvdyQxKHNvdXJjZSk7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChpc1JlYWN0aXZlKHNvdXJjZSkpIHtcclxuICAgICAgICBnZXR0ZXIgPSAoKSA9PiBzb3VyY2U7XHJcbiAgICAgICAgZGVlcCA9IHRydWU7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChpc0FycmF5KHNvdXJjZSkpIHtcclxuICAgICAgICBpc011bHRpU291cmNlID0gdHJ1ZTtcclxuICAgICAgICBmb3JjZVRyaWdnZXIgPSBzb3VyY2Uuc29tZShpc1JlYWN0aXZlKTtcclxuICAgICAgICBnZXR0ZXIgPSAoKSA9PiBzb3VyY2UubWFwKHMgPT4ge1xyXG4gICAgICAgICAgICBpZiAoaXNSZWYocykpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBzLnZhbHVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKGlzUmVhY3RpdmUocykpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cmF2ZXJzZShzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChpc0Z1bmN0aW9uKHMpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gY2FsbFdpdGhFcnJvckhhbmRsaW5nKHMsIGluc3RhbmNlLCAyIC8qIFdBVENIX0dFVFRFUiAqLyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgd2FybkludmFsaWRTb3VyY2Uocyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKGlzRnVuY3Rpb24oc291cmNlKSkge1xyXG4gICAgICAgIGlmIChjYikge1xyXG4gICAgICAgICAgICAvLyBnZXR0ZXIgd2l0aCBjYlxyXG4gICAgICAgICAgICBnZXR0ZXIgPSAoKSA9PiBjYWxsV2l0aEVycm9ySGFuZGxpbmcoc291cmNlLCBpbnN0YW5jZSwgMiAvKiBXQVRDSF9HRVRURVIgKi8pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgLy8gbm8gY2IgLT4gc2ltcGxlIGVmZmVjdFxyXG4gICAgICAgICAgICBnZXR0ZXIgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoaW5zdGFuY2UgJiYgaW5zdGFuY2UuaXNVbm1vdW50ZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoY2xlYW51cCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNsZWFudXAoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBjYWxsV2l0aEFzeW5jRXJyb3JIYW5kbGluZyhzb3VyY2UsIGluc3RhbmNlLCAzIC8qIFdBVENIX0NBTExCQUNLICovLCBbb25DbGVhbnVwXSk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgZ2V0dGVyID0gTk9PUDtcclxuICAgICAgICAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgd2FybkludmFsaWRTb3VyY2Uoc291cmNlKTtcclxuICAgIH1cclxuICAgIGlmIChjYiAmJiBkZWVwKSB7XHJcbiAgICAgICAgY29uc3QgYmFzZUdldHRlciA9IGdldHRlcjtcclxuICAgICAgICBnZXR0ZXIgPSAoKSA9PiB0cmF2ZXJzZShiYXNlR2V0dGVyKCkpO1xyXG4gICAgfVxyXG4gICAgbGV0IGNsZWFudXA7XHJcbiAgICBsZXQgb25DbGVhbnVwID0gKGZuKSA9PiB7XHJcbiAgICAgICAgY2xlYW51cCA9IGVmZmVjdC5vblN0b3AgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNhbGxXaXRoRXJyb3JIYW5kbGluZyhmbiwgaW5zdGFuY2UsIDQgLyogV0FUQ0hfQ0xFQU5VUCAqLyk7XHJcbiAgICAgICAgfTtcclxuICAgIH07XHJcbiAgICAvLyBpbiBTU1IgdGhlcmUgaXMgbm8gbmVlZCB0byBzZXR1cCBhbiBhY3R1YWwgZWZmZWN0LCBhbmQgaXQgc2hvdWxkIGJlIG5vb3BcclxuICAgIC8vIHVubGVzcyBpdCdzIGVhZ2VyXHJcbiAgICBpZiAoaXNJblNTUkNvbXBvbmVudFNldHVwKSB7XHJcbiAgICAgICAgLy8gd2Ugd2lsbCBhbHNvIG5vdCBjYWxsIHRoZSBpbnZhbGlkYXRlIGNhbGxiYWNrICgrIHJ1bm5lciBpcyBub3Qgc2V0IHVwKVxyXG4gICAgICAgIG9uQ2xlYW51cCA9IE5PT1A7XHJcbiAgICAgICAgaWYgKCFjYikge1xyXG4gICAgICAgICAgICBnZXR0ZXIoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoaW1tZWRpYXRlKSB7XHJcbiAgICAgICAgICAgIGNhbGxXaXRoQXN5bmNFcnJvckhhbmRsaW5nKGNiLCBpbnN0YW5jZSwgMyAvKiBXQVRDSF9DQUxMQkFDSyAqLywgW1xyXG4gICAgICAgICAgICAgICAgZ2V0dGVyKCksXHJcbiAgICAgICAgICAgICAgICBpc011bHRpU291cmNlID8gW10gOiB1bmRlZmluZWQsXHJcbiAgICAgICAgICAgICAgICBvbkNsZWFudXBcclxuICAgICAgICAgICAgXSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBOT09QO1xyXG4gICAgfVxyXG4gICAgbGV0IG9sZFZhbHVlID0gaXNNdWx0aVNvdXJjZSA/IFtdIDogSU5JVElBTF9XQVRDSEVSX1ZBTFVFO1xyXG4gICAgY29uc3Qgam9iID0gKCkgPT4ge1xyXG4gICAgICAgIGlmICghZWZmZWN0LmFjdGl2ZSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChjYikge1xyXG4gICAgICAgICAgICAvLyB3YXRjaChzb3VyY2UsIGNiKVxyXG4gICAgICAgICAgICBjb25zdCBuZXdWYWx1ZSA9IGVmZmVjdC5ydW4oKTtcclxuICAgICAgICAgICAgaWYgKGRlZXAgfHxcclxuICAgICAgICAgICAgICAgIGZvcmNlVHJpZ2dlciB8fFxyXG4gICAgICAgICAgICAgICAgKGlzTXVsdGlTb3VyY2VcclxuICAgICAgICAgICAgICAgICAgICA/IG5ld1ZhbHVlLnNvbWUoKHYsIGkpID0+IGhhc0NoYW5nZWQodiwgb2xkVmFsdWVbaV0pKVxyXG4gICAgICAgICAgICAgICAgICAgIDogaGFzQ2hhbmdlZChuZXdWYWx1ZSwgb2xkVmFsdWUpKSB8fFxyXG4gICAgICAgICAgICAgICAgKGZhbHNlICApKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBjbGVhbnVwIGJlZm9yZSBydW5uaW5nIGNiIGFnYWluXHJcbiAgICAgICAgICAgICAgICBpZiAoY2xlYW51cCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNsZWFudXAoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhbGxXaXRoQXN5bmNFcnJvckhhbmRsaW5nKGNiLCBpbnN0YW5jZSwgMyAvKiBXQVRDSF9DQUxMQkFDSyAqLywgW1xyXG4gICAgICAgICAgICAgICAgICAgIG5ld1ZhbHVlLFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIHBhc3MgdW5kZWZpbmVkIGFzIHRoZSBvbGQgdmFsdWUgd2hlbiBpdCdzIGNoYW5nZWQgZm9yIHRoZSBmaXJzdCB0aW1lXHJcbiAgICAgICAgICAgICAgICAgICAgb2xkVmFsdWUgPT09IElOSVRJQUxfV0FUQ0hFUl9WQUxVRSA/IHVuZGVmaW5lZCA6IG9sZFZhbHVlLFxyXG4gICAgICAgICAgICAgICAgICAgIG9uQ2xlYW51cFxyXG4gICAgICAgICAgICAgICAgXSk7XHJcbiAgICAgICAgICAgICAgICBvbGRWYWx1ZSA9IG5ld1ZhbHVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAvLyB3YXRjaEVmZmVjdFxyXG4gICAgICAgICAgICBlZmZlY3QucnVuKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8vIGltcG9ydGFudDogbWFyayB0aGUgam9iIGFzIGEgd2F0Y2hlciBjYWxsYmFjayBzbyB0aGF0IHNjaGVkdWxlciBrbm93c1xyXG4gICAgLy8gaXQgaXMgYWxsb3dlZCB0byBzZWxmLXRyaWdnZXIgKCMxNzI3KVxyXG4gICAgam9iLmFsbG93UmVjdXJzZSA9ICEhY2I7XHJcbiAgICBsZXQgc2NoZWR1bGVyO1xyXG4gICAgaWYgKGZsdXNoID09PSAnc3luYycpIHtcclxuICAgICAgICBzY2hlZHVsZXIgPSBqb2I7IC8vIHRoZSBzY2hlZHVsZXIgZnVuY3Rpb24gZ2V0cyBjYWxsZWQgZGlyZWN0bHlcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKGZsdXNoID09PSAncG9zdCcpIHtcclxuICAgICAgICBzY2hlZHVsZXIgPSAoKSA9PiBxdWV1ZVBvc3RSZW5kZXJFZmZlY3Qoam9iLCBpbnN0YW5jZSAmJiBpbnN0YW5jZS5zdXNwZW5zZSk7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICAvLyBkZWZhdWx0OiAncHJlJ1xyXG4gICAgICAgIHNjaGVkdWxlciA9ICgpID0+IHtcclxuICAgICAgICAgICAgaWYgKCFpbnN0YW5jZSB8fCBpbnN0YW5jZS5pc01vdW50ZWQpIHtcclxuICAgICAgICAgICAgICAgIHF1ZXVlUHJlRmx1c2hDYihqb2IpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8gd2l0aCAncHJlJyBvcHRpb24sIHRoZSBmaXJzdCBjYWxsIG11c3QgaGFwcGVuIGJlZm9yZVxyXG4gICAgICAgICAgICAgICAgLy8gdGhlIGNvbXBvbmVudCBpcyBtb3VudGVkIHNvIGl0IGlzIGNhbGxlZCBzeW5jaHJvbm91c2x5LlxyXG4gICAgICAgICAgICAgICAgam9iKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgfVxyXG4gICAgY29uc3QgZWZmZWN0ID0gbmV3IFJlYWN0aXZlRWZmZWN0KGdldHRlciwgc2NoZWR1bGVyKTtcclxuICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcclxuICAgICAgICBlZmZlY3Qub25UcmFjayA9IG9uVHJhY2s7XHJcbiAgICAgICAgZWZmZWN0Lm9uVHJpZ2dlciA9IG9uVHJpZ2dlcjtcclxuICAgIH1cclxuICAgIC8vIGluaXRpYWwgcnVuXHJcbiAgICBpZiAoY2IpIHtcclxuICAgICAgICBpZiAoaW1tZWRpYXRlKSB7XHJcbiAgICAgICAgICAgIGpvYigpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgb2xkVmFsdWUgPSBlZmZlY3QucnVuKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoZmx1c2ggPT09ICdwb3N0Jykge1xyXG4gICAgICAgIHF1ZXVlUG9zdFJlbmRlckVmZmVjdChlZmZlY3QucnVuLmJpbmQoZWZmZWN0KSwgaW5zdGFuY2UgJiYgaW5zdGFuY2Uuc3VzcGVuc2UpO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgZWZmZWN0LnJ1bigpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuICgpID0+IHtcclxuICAgICAgICBlZmZlY3Quc3RvcCgpO1xyXG4gICAgICAgIGlmIChpbnN0YW5jZSAmJiBpbnN0YW5jZS5zY29wZSkge1xyXG4gICAgICAgICAgICByZW1vdmUoaW5zdGFuY2Uuc2NvcGUuZWZmZWN0cywgZWZmZWN0KTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG59XHJcbi8vIHRoaXMuJHdhdGNoXHJcbmZ1bmN0aW9uIGluc3RhbmNlV2F0Y2goc291cmNlLCB2YWx1ZSwgb3B0aW9ucykge1xyXG4gICAgY29uc3QgcHVibGljVGhpcyA9IHRoaXMucHJveHk7XHJcbiAgICBjb25zdCBnZXR0ZXIgPSBpc1N0cmluZyhzb3VyY2UpXHJcbiAgICAgICAgPyBzb3VyY2UuaW5jbHVkZXMoJy4nKVxyXG4gICAgICAgICAgICA/IGNyZWF0ZVBhdGhHZXR0ZXIocHVibGljVGhpcywgc291cmNlKVxyXG4gICAgICAgICAgICA6ICgpID0+IHB1YmxpY1RoaXNbc291cmNlXVxyXG4gICAgICAgIDogc291cmNlLmJpbmQocHVibGljVGhpcywgcHVibGljVGhpcyk7XHJcbiAgICBsZXQgY2I7XHJcbiAgICBpZiAoaXNGdW5jdGlvbih2YWx1ZSkpIHtcclxuICAgICAgICBjYiA9IHZhbHVlO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgY2IgPSB2YWx1ZS5oYW5kbGVyO1xyXG4gICAgICAgIG9wdGlvbnMgPSB2YWx1ZTtcclxuICAgIH1cclxuICAgIGNvbnN0IGN1ciA9IGN1cnJlbnRJbnN0YW5jZTtcclxuICAgIHNldEN1cnJlbnRJbnN0YW5jZSh0aGlzKTtcclxuICAgIGNvbnN0IHJlcyA9IGRvV2F0Y2goZ2V0dGVyLCBjYi5iaW5kKHB1YmxpY1RoaXMpLCBvcHRpb25zKTtcclxuICAgIGlmIChjdXIpIHtcclxuICAgICAgICBzZXRDdXJyZW50SW5zdGFuY2UoY3VyKTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIHVuc2V0Q3VycmVudEluc3RhbmNlKCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcmVzO1xyXG59XHJcbmZ1bmN0aW9uIGNyZWF0ZVBhdGhHZXR0ZXIoY3R4LCBwYXRoKSB7XHJcbiAgICBjb25zdCBzZWdtZW50cyA9IHBhdGguc3BsaXQoJy4nKTtcclxuICAgIHJldHVybiAoKSA9PiB7XHJcbiAgICAgICAgbGV0IGN1ciA9IGN0eDtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNlZ21lbnRzLmxlbmd0aCAmJiBjdXI7IGkrKykge1xyXG4gICAgICAgICAgICBjdXIgPSBjdXJbc2VnbWVudHNbaV1dO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gY3VyO1xyXG4gICAgfTtcclxufVxyXG5mdW5jdGlvbiB0cmF2ZXJzZSh2YWx1ZSwgc2Vlbikge1xyXG4gICAgaWYgKCFpc09iamVjdCh2YWx1ZSkgfHwgdmFsdWVbXCJfX3Zfc2tpcFwiIC8qIFNLSVAgKi9dKSB7XHJcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xyXG4gICAgfVxyXG4gICAgc2VlbiA9IHNlZW4gfHwgbmV3IFNldCgpO1xyXG4gICAgaWYgKHNlZW4uaGFzKHZhbHVlKSkge1xyXG4gICAgICAgIHJldHVybiB2YWx1ZTtcclxuICAgIH1cclxuICAgIHNlZW4uYWRkKHZhbHVlKTtcclxuICAgIGlmIChpc1JlZih2YWx1ZSkpIHtcclxuICAgICAgICB0cmF2ZXJzZSh2YWx1ZS52YWx1ZSwgc2Vlbik7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChpc0FycmF5KHZhbHVlKSkge1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdmFsdWUubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgdHJhdmVyc2UodmFsdWVbaV0sIHNlZW4pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGVsc2UgaWYgKGlzU2V0KHZhbHVlKSB8fCBpc01hcCh2YWx1ZSkpIHtcclxuICAgICAgICB2YWx1ZS5mb3JFYWNoKCh2KSA9PiB7XHJcbiAgICAgICAgICAgIHRyYXZlcnNlKHYsIHNlZW4pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoaXNQbGFpbk9iamVjdCh2YWx1ZSkpIHtcclxuICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiB2YWx1ZSkge1xyXG4gICAgICAgICAgICB0cmF2ZXJzZSh2YWx1ZVtrZXldLCBzZWVuKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdmFsdWU7XHJcbn1cblxuZnVuY3Rpb24gdXNlVHJhbnNpdGlvblN0YXRlKCkge1xyXG4gICAgY29uc3Qgc3RhdGUgPSB7XHJcbiAgICAgICAgaXNNb3VudGVkOiBmYWxzZSxcclxuICAgICAgICBpc0xlYXZpbmc6IGZhbHNlLFxyXG4gICAgICAgIGlzVW5tb3VudGluZzogZmFsc2UsXHJcbiAgICAgICAgbGVhdmluZ1ZOb2RlczogbmV3IE1hcCgpXHJcbiAgICB9O1xyXG4gICAgb25Nb3VudGVkKCgpID0+IHtcclxuICAgICAgICBzdGF0ZS5pc01vdW50ZWQgPSB0cnVlO1xyXG4gICAgfSk7XHJcbiAgICBvbkJlZm9yZVVubW91bnQoKCkgPT4ge1xyXG4gICAgICAgIHN0YXRlLmlzVW5tb3VudGluZyA9IHRydWU7XHJcbiAgICB9KTtcclxuICAgIHJldHVybiBzdGF0ZTtcclxufVxyXG5jb25zdCBUcmFuc2l0aW9uSG9va1ZhbGlkYXRvciA9IFtGdW5jdGlvbiwgQXJyYXldO1xyXG5jb25zdCBCYXNlVHJhbnNpdGlvbkltcGwgPSB7XHJcbiAgICBuYW1lOiBgQmFzZVRyYW5zaXRpb25gLFxyXG4gICAgcHJvcHM6IHtcclxuICAgICAgICBtb2RlOiBTdHJpbmcsXHJcbiAgICAgICAgYXBwZWFyOiBCb29sZWFuLFxyXG4gICAgICAgIHBlcnNpc3RlZDogQm9vbGVhbixcclxuICAgICAgICAvLyBlbnRlclxyXG4gICAgICAgIG9uQmVmb3JlRW50ZXI6IFRyYW5zaXRpb25Ib29rVmFsaWRhdG9yLFxyXG4gICAgICAgIG9uRW50ZXI6IFRyYW5zaXRpb25Ib29rVmFsaWRhdG9yLFxyXG4gICAgICAgIG9uQWZ0ZXJFbnRlcjogVHJhbnNpdGlvbkhvb2tWYWxpZGF0b3IsXHJcbiAgICAgICAgb25FbnRlckNhbmNlbGxlZDogVHJhbnNpdGlvbkhvb2tWYWxpZGF0b3IsXHJcbiAgICAgICAgLy8gbGVhdmVcclxuICAgICAgICBvbkJlZm9yZUxlYXZlOiBUcmFuc2l0aW9uSG9va1ZhbGlkYXRvcixcclxuICAgICAgICBvbkxlYXZlOiBUcmFuc2l0aW9uSG9va1ZhbGlkYXRvcixcclxuICAgICAgICBvbkFmdGVyTGVhdmU6IFRyYW5zaXRpb25Ib29rVmFsaWRhdG9yLFxyXG4gICAgICAgIG9uTGVhdmVDYW5jZWxsZWQ6IFRyYW5zaXRpb25Ib29rVmFsaWRhdG9yLFxyXG4gICAgICAgIC8vIGFwcGVhclxyXG4gICAgICAgIG9uQmVmb3JlQXBwZWFyOiBUcmFuc2l0aW9uSG9va1ZhbGlkYXRvcixcclxuICAgICAgICBvbkFwcGVhcjogVHJhbnNpdGlvbkhvb2tWYWxpZGF0b3IsXHJcbiAgICAgICAgb25BZnRlckFwcGVhcjogVHJhbnNpdGlvbkhvb2tWYWxpZGF0b3IsXHJcbiAgICAgICAgb25BcHBlYXJDYW5jZWxsZWQ6IFRyYW5zaXRpb25Ib29rVmFsaWRhdG9yXHJcbiAgICB9LFxyXG4gICAgc2V0dXAocHJvcHMsIHsgc2xvdHMgfSkge1xyXG4gICAgICAgIGNvbnN0IGluc3RhbmNlID0gZ2V0Q3VycmVudEluc3RhbmNlKCk7XHJcbiAgICAgICAgY29uc3Qgc3RhdGUgPSB1c2VUcmFuc2l0aW9uU3RhdGUoKTtcclxuICAgICAgICBsZXQgcHJldlRyYW5zaXRpb25LZXk7XHJcbiAgICAgICAgcmV0dXJuICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgY2hpbGRyZW4gPSBzbG90cy5kZWZhdWx0ICYmIGdldFRyYW5zaXRpb25SYXdDaGlsZHJlbihzbG90cy5kZWZhdWx0KCksIHRydWUpO1xyXG4gICAgICAgICAgICBpZiAoIWNoaWxkcmVuIHx8ICFjaGlsZHJlbi5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBsZXQgY2hpbGQgPSBjaGlsZHJlblswXTtcclxuICAgICAgICAgICAgaWYgKGNoaWxkcmVuLmxlbmd0aCA+IDEpIHtcclxuICAgICAgICAgICAgICAgIGxldCBoYXNGb3VuZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgLy8gbG9jYXRlIGZpcnN0IG5vbi1jb21tZW50IGNoaWxkXHJcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGMgb2YgY2hpbGRyZW4pIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoYy50eXBlICE9PSBDb21tZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgaGFzRm91bmQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHdhcm4gbW9yZSB0aGFuIG9uZSBub24tY29tbWVudCBjaGlsZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FybignPHRyYW5zaXRpb24+IGNhbiBvbmx5IGJlIHVzZWQgb24gYSBzaW5nbGUgZWxlbWVudCBvciBjb21wb25lbnQuICcgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdVc2UgPHRyYW5zaXRpb24tZ3JvdXA+IGZvciBsaXN0cy4nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoaWxkID0gYztcclxuICAgICAgICAgICAgICAgICAgICAgICAgaGFzRm91bmQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyB0aGVyZSdzIG5vIG5lZWQgdG8gdHJhY2sgcmVhY3Rpdml0eSBmb3IgdGhlc2UgcHJvcHMgc28gdXNlIHRoZSByYXdcclxuICAgICAgICAgICAgLy8gcHJvcHMgZm9yIGEgYml0IGJldHRlciBwZXJmXHJcbiAgICAgICAgICAgIGNvbnN0IHJhd1Byb3BzID0gdG9SYXcocHJvcHMpO1xyXG4gICAgICAgICAgICBjb25zdCB7IG1vZGUgfSA9IHJhd1Byb3BzO1xyXG4gICAgICAgICAgICAvLyBjaGVjayBtb2RlXHJcbiAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiZcclxuICAgICAgICAgICAgICAgIG1vZGUgJiZcclxuICAgICAgICAgICAgICAgIG1vZGUgIT09ICdpbi1vdXQnICYmXHJcbiAgICAgICAgICAgICAgICBtb2RlICE9PSAnb3V0LWluJyAmJlxyXG4gICAgICAgICAgICAgICAgbW9kZSAhPT0gJ2RlZmF1bHQnKSB7XHJcbiAgICAgICAgICAgICAgICB3YXJuKGBpbnZhbGlkIDx0cmFuc2l0aW9uPiBtb2RlOiAke21vZGV9YCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHN0YXRlLmlzTGVhdmluZykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGVtcHR5UGxhY2Vob2xkZXIoY2hpbGQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIGluIHRoZSBjYXNlIG9mIDx0cmFuc2l0aW9uPjxrZWVwLWFsaXZlLz48L3RyYW5zaXRpb24+LCB3ZSBuZWVkIHRvXHJcbiAgICAgICAgICAgIC8vIGNvbXBhcmUgdGhlIHR5cGUgb2YgdGhlIGtlcHQtYWxpdmUgY2hpbGRyZW4uXHJcbiAgICAgICAgICAgIGNvbnN0IGlubmVyQ2hpbGQgPSBnZXRLZWVwQWxpdmVDaGlsZChjaGlsZCk7XHJcbiAgICAgICAgICAgIGlmICghaW5uZXJDaGlsZCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGVtcHR5UGxhY2Vob2xkZXIoY2hpbGQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbnN0IGVudGVySG9va3MgPSByZXNvbHZlVHJhbnNpdGlvbkhvb2tzKGlubmVyQ2hpbGQsIHJhd1Byb3BzLCBzdGF0ZSwgaW5zdGFuY2UpO1xyXG4gICAgICAgICAgICBzZXRUcmFuc2l0aW9uSG9va3MoaW5uZXJDaGlsZCwgZW50ZXJIb29rcyk7XHJcbiAgICAgICAgICAgIGNvbnN0IG9sZENoaWxkID0gaW5zdGFuY2Uuc3ViVHJlZTtcclxuICAgICAgICAgICAgY29uc3Qgb2xkSW5uZXJDaGlsZCA9IG9sZENoaWxkICYmIGdldEtlZXBBbGl2ZUNoaWxkKG9sZENoaWxkKTtcclxuICAgICAgICAgICAgbGV0IHRyYW5zaXRpb25LZXlDaGFuZ2VkID0gZmFsc2U7XHJcbiAgICAgICAgICAgIGNvbnN0IHsgZ2V0VHJhbnNpdGlvbktleSB9ID0gaW5uZXJDaGlsZC50eXBlO1xyXG4gICAgICAgICAgICBpZiAoZ2V0VHJhbnNpdGlvbktleSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qga2V5ID0gZ2V0VHJhbnNpdGlvbktleSgpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHByZXZUcmFuc2l0aW9uS2V5ID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBwcmV2VHJhbnNpdGlvbktleSA9IGtleTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGtleSAhPT0gcHJldlRyYW5zaXRpb25LZXkpIHtcclxuICAgICAgICAgICAgICAgICAgICBwcmV2VHJhbnNpdGlvbktleSA9IGtleTtcclxuICAgICAgICAgICAgICAgICAgICB0cmFuc2l0aW9uS2V5Q2hhbmdlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gaGFuZGxlIG1vZGVcclxuICAgICAgICAgICAgaWYgKG9sZElubmVyQ2hpbGQgJiZcclxuICAgICAgICAgICAgICAgIG9sZElubmVyQ2hpbGQudHlwZSAhPT0gQ29tbWVudCAmJlxyXG4gICAgICAgICAgICAgICAgKCFpc1NhbWVWTm9kZVR5cGUoaW5uZXJDaGlsZCwgb2xkSW5uZXJDaGlsZCkgfHwgdHJhbnNpdGlvbktleUNoYW5nZWQpKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBsZWF2aW5nSG9va3MgPSByZXNvbHZlVHJhbnNpdGlvbkhvb2tzKG9sZElubmVyQ2hpbGQsIHJhd1Byb3BzLCBzdGF0ZSwgaW5zdGFuY2UpO1xyXG4gICAgICAgICAgICAgICAgLy8gdXBkYXRlIG9sZCB0cmVlJ3MgaG9va3MgaW4gY2FzZSBvZiBkeW5hbWljIHRyYW5zaXRpb25cclxuICAgICAgICAgICAgICAgIHNldFRyYW5zaXRpb25Ib29rcyhvbGRJbm5lckNoaWxkLCBsZWF2aW5nSG9va3MpO1xyXG4gICAgICAgICAgICAgICAgLy8gc3dpdGNoaW5nIGJldHdlZW4gZGlmZmVyZW50IHZpZXdzXHJcbiAgICAgICAgICAgICAgICBpZiAobW9kZSA9PT0gJ291dC1pbicpIHtcclxuICAgICAgICAgICAgICAgICAgICBzdGF0ZS5pc0xlYXZpbmcgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIHJldHVybiBwbGFjZWhvbGRlciBub2RlIGFuZCBxdWV1ZSB1cGRhdGUgd2hlbiBsZWF2ZSBmaW5pc2hlc1xyXG4gICAgICAgICAgICAgICAgICAgIGxlYXZpbmdIb29rcy5hZnRlckxlYXZlID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5pc0xlYXZpbmcgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2UudXBkYXRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZW1wdHlQbGFjZWhvbGRlcihjaGlsZCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChtb2RlID09PSAnaW4tb3V0JyAmJiBpbm5lckNoaWxkLnR5cGUgIT09IENvbW1lbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICBsZWF2aW5nSG9va3MuZGVsYXlMZWF2ZSA9IChlbCwgZWFybHlSZW1vdmUsIGRlbGF5ZWRMZWF2ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBsZWF2aW5nVk5vZGVzQ2FjaGUgPSBnZXRMZWF2aW5nTm9kZXNGb3JUeXBlKHN0YXRlLCBvbGRJbm5lckNoaWxkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGVhdmluZ1ZOb2Rlc0NhY2hlW1N0cmluZyhvbGRJbm5lckNoaWxkLmtleSldID0gb2xkSW5uZXJDaGlsZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZWFybHkgcmVtb3ZhbCBjYWxsYmFja1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbC5fbGVhdmVDYiA9ICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVhcmx5UmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbC5fbGVhdmVDYiA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBlbnRlckhvb2tzLmRlbGF5ZWRMZWF2ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZW50ZXJIb29rcy5kZWxheWVkTGVhdmUgPSBkZWxheWVkTGVhdmU7XHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gY2hpbGQ7XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxufTtcclxuLy8gZXhwb3J0IHRoZSBwdWJsaWMgdHlwZSBmb3IgaC90c3ggaW5mZXJlbmNlXHJcbi8vIGFsc28gdG8gYXZvaWQgaW5saW5lIGltcG9ydCgpIGluIGdlbmVyYXRlZCBkLnRzIGZpbGVzXHJcbmNvbnN0IEJhc2VUcmFuc2l0aW9uID0gQmFzZVRyYW5zaXRpb25JbXBsO1xyXG5mdW5jdGlvbiBnZXRMZWF2aW5nTm9kZXNGb3JUeXBlKHN0YXRlLCB2bm9kZSkge1xyXG4gICAgY29uc3QgeyBsZWF2aW5nVk5vZGVzIH0gPSBzdGF0ZTtcclxuICAgIGxldCBsZWF2aW5nVk5vZGVzQ2FjaGUgPSBsZWF2aW5nVk5vZGVzLmdldCh2bm9kZS50eXBlKTtcclxuICAgIGlmICghbGVhdmluZ1ZOb2Rlc0NhY2hlKSB7XHJcbiAgICAgICAgbGVhdmluZ1ZOb2Rlc0NhY2hlID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcclxuICAgICAgICBsZWF2aW5nVk5vZGVzLnNldCh2bm9kZS50eXBlLCBsZWF2aW5nVk5vZGVzQ2FjaGUpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGxlYXZpbmdWTm9kZXNDYWNoZTtcclxufVxyXG4vLyBUaGUgdHJhbnNpdGlvbiBob29rcyBhcmUgYXR0YWNoZWQgdG8gdGhlIHZub2RlIGFzIHZub2RlLnRyYW5zaXRpb25cclxuLy8gYW5kIHdpbGwgYmUgY2FsbGVkIGF0IGFwcHJvcHJpYXRlIHRpbWluZyBpbiB0aGUgcmVuZGVyZXIuXHJcbmZ1bmN0aW9uIHJlc29sdmVUcmFuc2l0aW9uSG9va3Modm5vZGUsIHByb3BzLCBzdGF0ZSwgaW5zdGFuY2UpIHtcclxuICAgIGNvbnN0IHsgYXBwZWFyLCBtb2RlLCBwZXJzaXN0ZWQgPSBmYWxzZSwgb25CZWZvcmVFbnRlciwgb25FbnRlciwgb25BZnRlckVudGVyLCBvbkVudGVyQ2FuY2VsbGVkLCBvbkJlZm9yZUxlYXZlLCBvbkxlYXZlLCBvbkFmdGVyTGVhdmUsIG9uTGVhdmVDYW5jZWxsZWQsIG9uQmVmb3JlQXBwZWFyLCBvbkFwcGVhciwgb25BZnRlckFwcGVhciwgb25BcHBlYXJDYW5jZWxsZWQgfSA9IHByb3BzO1xyXG4gICAgY29uc3Qga2V5ID0gU3RyaW5nKHZub2RlLmtleSk7XHJcbiAgICBjb25zdCBsZWF2aW5nVk5vZGVzQ2FjaGUgPSBnZXRMZWF2aW5nTm9kZXNGb3JUeXBlKHN0YXRlLCB2bm9kZSk7XHJcbiAgICBjb25zdCBjYWxsSG9vayA9IChob29rLCBhcmdzKSA9PiB7XHJcbiAgICAgICAgaG9vayAmJlxyXG4gICAgICAgICAgICBjYWxsV2l0aEFzeW5jRXJyb3JIYW5kbGluZyhob29rLCBpbnN0YW5jZSwgOSAvKiBUUkFOU0lUSU9OX0hPT0sgKi8sIGFyZ3MpO1xyXG4gICAgfTtcclxuICAgIGNvbnN0IGhvb2tzID0ge1xyXG4gICAgICAgIG1vZGUsXHJcbiAgICAgICAgcGVyc2lzdGVkLFxyXG4gICAgICAgIGJlZm9yZUVudGVyKGVsKSB7XHJcbiAgICAgICAgICAgIGxldCBob29rID0gb25CZWZvcmVFbnRlcjtcclxuICAgICAgICAgICAgaWYgKCFzdGF0ZS5pc01vdW50ZWQpIHtcclxuICAgICAgICAgICAgICAgIGlmIChhcHBlYXIpIHtcclxuICAgICAgICAgICAgICAgICAgICBob29rID0gb25CZWZvcmVBcHBlYXIgfHwgb25CZWZvcmVFbnRlcjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBmb3Igc2FtZSBlbGVtZW50ICh2LXNob3cpXHJcbiAgICAgICAgICAgIGlmIChlbC5fbGVhdmVDYikge1xyXG4gICAgICAgICAgICAgICAgZWwuX2xlYXZlQ2IodHJ1ZSAvKiBjYW5jZWxsZWQgKi8pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIGZvciB0b2dnbGVkIGVsZW1lbnQgd2l0aCBzYW1lIGtleSAodi1pZilcclxuICAgICAgICAgICAgY29uc3QgbGVhdmluZ1ZOb2RlID0gbGVhdmluZ1ZOb2Rlc0NhY2hlW2tleV07XHJcbiAgICAgICAgICAgIGlmIChsZWF2aW5nVk5vZGUgJiZcclxuICAgICAgICAgICAgICAgIGlzU2FtZVZOb2RlVHlwZSh2bm9kZSwgbGVhdmluZ1ZOb2RlKSAmJlxyXG4gICAgICAgICAgICAgICAgbGVhdmluZ1ZOb2RlLmVsLl9sZWF2ZUNiKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBmb3JjZSBlYXJseSByZW1vdmFsIChub3QgY2FuY2VsbGVkKVxyXG4gICAgICAgICAgICAgICAgbGVhdmluZ1ZOb2RlLmVsLl9sZWF2ZUNiKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2FsbEhvb2soaG9vaywgW2VsXSk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnRlcihlbCkge1xyXG4gICAgICAgICAgICBsZXQgaG9vayA9IG9uRW50ZXI7XHJcbiAgICAgICAgICAgIGxldCBhZnRlckhvb2sgPSBvbkFmdGVyRW50ZXI7XHJcbiAgICAgICAgICAgIGxldCBjYW5jZWxIb29rID0gb25FbnRlckNhbmNlbGxlZDtcclxuICAgICAgICAgICAgaWYgKCFzdGF0ZS5pc01vdW50ZWQpIHtcclxuICAgICAgICAgICAgICAgIGlmIChhcHBlYXIpIHtcclxuICAgICAgICAgICAgICAgICAgICBob29rID0gb25BcHBlYXIgfHwgb25FbnRlcjtcclxuICAgICAgICAgICAgICAgICAgICBhZnRlckhvb2sgPSBvbkFmdGVyQXBwZWFyIHx8IG9uQWZ0ZXJFbnRlcjtcclxuICAgICAgICAgICAgICAgICAgICBjYW5jZWxIb29rID0gb25BcHBlYXJDYW5jZWxsZWQgfHwgb25FbnRlckNhbmNlbGxlZDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBsZXQgY2FsbGVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgIGNvbnN0IGRvbmUgPSAoZWwuX2VudGVyQ2IgPSAoY2FuY2VsbGVkKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoY2FsbGVkKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIGNhbGxlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBpZiAoY2FuY2VsbGVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FsbEhvb2soY2FuY2VsSG9vaywgW2VsXSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBjYWxsSG9vayhhZnRlckhvb2ssIFtlbF0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKGhvb2tzLmRlbGF5ZWRMZWF2ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGhvb2tzLmRlbGF5ZWRMZWF2ZSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWwuX2VudGVyQ2IgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBpZiAoaG9vaykge1xyXG4gICAgICAgICAgICAgICAgaG9vayhlbCwgZG9uZSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoaG9vay5sZW5ndGggPD0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGRvbmUoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGRvbmUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgbGVhdmUoZWwsIHJlbW92ZSkge1xyXG4gICAgICAgICAgICBjb25zdCBrZXkgPSBTdHJpbmcodm5vZGUua2V5KTtcclxuICAgICAgICAgICAgaWYgKGVsLl9lbnRlckNiKSB7XHJcbiAgICAgICAgICAgICAgICBlbC5fZW50ZXJDYih0cnVlIC8qIGNhbmNlbGxlZCAqLyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHN0YXRlLmlzVW5tb3VudGluZykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlbW92ZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhbGxIb29rKG9uQmVmb3JlTGVhdmUsIFtlbF0pO1xyXG4gICAgICAgICAgICBsZXQgY2FsbGVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgIGNvbnN0IGRvbmUgPSAoZWwuX2xlYXZlQ2IgPSAoY2FuY2VsbGVkKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoY2FsbGVkKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIGNhbGxlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICByZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgIGlmIChjYW5jZWxsZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYWxsSG9vayhvbkxlYXZlQ2FuY2VsbGVkLCBbZWxdKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhbGxIb29rKG9uQWZ0ZXJMZWF2ZSwgW2VsXSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbC5fbGVhdmVDYiA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgICAgIGlmIChsZWF2aW5nVk5vZGVzQ2FjaGVba2V5XSA9PT0gdm5vZGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBkZWxldGUgbGVhdmluZ1ZOb2Rlc0NhY2hlW2tleV07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBsZWF2aW5nVk5vZGVzQ2FjaGVba2V5XSA9IHZub2RlO1xyXG4gICAgICAgICAgICBpZiAob25MZWF2ZSkge1xyXG4gICAgICAgICAgICAgICAgb25MZWF2ZShlbCwgZG9uZSk7XHJcbiAgICAgICAgICAgICAgICBpZiAob25MZWF2ZS5sZW5ndGggPD0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGRvbmUoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGRvbmUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgY2xvbmUodm5vZGUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHJlc29sdmVUcmFuc2l0aW9uSG9va3Modm5vZGUsIHByb3BzLCBzdGF0ZSwgaW5zdGFuY2UpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICByZXR1cm4gaG9va3M7XHJcbn1cclxuLy8gdGhlIHBsYWNlaG9sZGVyIHJlYWxseSBvbmx5IGhhbmRsZXMgb25lIHNwZWNpYWwgY2FzZTogS2VlcEFsaXZlXHJcbi8vIGluIHRoZSBjYXNlIG9mIGEgS2VlcEFsaXZlIGluIGEgbGVhdmUgcGhhc2Ugd2UgbmVlZCB0byByZXR1cm4gYSBLZWVwQWxpdmVcclxuLy8gcGxhY2Vob2xkZXIgd2l0aCBlbXB0eSBjb250ZW50IHRvIGF2b2lkIHRoZSBLZWVwQWxpdmUgaW5zdGFuY2UgZnJvbSBiZWluZ1xyXG4vLyB1bm1vdW50ZWQuXHJcbmZ1bmN0aW9uIGVtcHR5UGxhY2Vob2xkZXIodm5vZGUpIHtcclxuICAgIGlmIChpc0tlZXBBbGl2ZSh2bm9kZSkpIHtcclxuICAgICAgICB2bm9kZSA9IGNsb25lVk5vZGUodm5vZGUpO1xyXG4gICAgICAgIHZub2RlLmNoaWxkcmVuID0gbnVsbDtcclxuICAgICAgICByZXR1cm4gdm5vZGU7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gZ2V0S2VlcEFsaXZlQ2hpbGQodm5vZGUpIHtcclxuICAgIHJldHVybiBpc0tlZXBBbGl2ZSh2bm9kZSlcclxuICAgICAgICA/IHZub2RlLmNoaWxkcmVuXHJcbiAgICAgICAgICAgID8gdm5vZGUuY2hpbGRyZW5bMF1cclxuICAgICAgICAgICAgOiB1bmRlZmluZWRcclxuICAgICAgICA6IHZub2RlO1xyXG59XHJcbmZ1bmN0aW9uIHNldFRyYW5zaXRpb25Ib29rcyh2bm9kZSwgaG9va3MpIHtcclxuICAgIGlmICh2bm9kZS5zaGFwZUZsYWcgJiA2IC8qIENPTVBPTkVOVCAqLyAmJiB2bm9kZS5jb21wb25lbnQpIHtcclxuICAgICAgICBzZXRUcmFuc2l0aW9uSG9va3Modm5vZGUuY29tcG9uZW50LnN1YlRyZWUsIGhvb2tzKTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKHZub2RlLnNoYXBlRmxhZyAmIDEyOCAvKiBTVVNQRU5TRSAqLykge1xyXG4gICAgICAgIHZub2RlLnNzQ29udGVudC50cmFuc2l0aW9uID0gaG9va3MuY2xvbmUodm5vZGUuc3NDb250ZW50KTtcclxuICAgICAgICB2bm9kZS5zc0ZhbGxiYWNrLnRyYW5zaXRpb24gPSBob29rcy5jbG9uZSh2bm9kZS5zc0ZhbGxiYWNrKTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIHZub2RlLnRyYW5zaXRpb24gPSBob29rcztcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBnZXRUcmFuc2l0aW9uUmF3Q2hpbGRyZW4oY2hpbGRyZW4sIGtlZXBDb21tZW50ID0gZmFsc2UsIHBhcmVudEtleSkge1xyXG4gICAgbGV0IHJldCA9IFtdO1xyXG4gICAgbGV0IGtleWVkRnJhZ21lbnRDb3VudCA9IDA7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgbGV0IGNoaWxkID0gY2hpbGRyZW5baV07XHJcbiAgICAgICAgLy8gIzUzNjAgaW5oZXJpdCBwYXJlbnQga2V5IGluIGNhc2Ugb2YgPHRlbXBsYXRlIHYtZm9yPlxyXG4gICAgICAgIGNvbnN0IGtleSA9IHBhcmVudEtleSA9PSBudWxsXHJcbiAgICAgICAgICAgID8gY2hpbGQua2V5XHJcbiAgICAgICAgICAgIDogU3RyaW5nKHBhcmVudEtleSkgKyBTdHJpbmcoY2hpbGQua2V5ICE9IG51bGwgPyBjaGlsZC5rZXkgOiBpKTtcclxuICAgICAgICAvLyBoYW5kbGUgZnJhZ21lbnQgY2hpbGRyZW4gY2FzZSwgZS5nLiB2LWZvclxyXG4gICAgICAgIGlmIChjaGlsZC50eXBlID09PSBGcmFnbWVudCkge1xyXG4gICAgICAgICAgICBpZiAoY2hpbGQucGF0Y2hGbGFnICYgMTI4IC8qIEtFWUVEX0ZSQUdNRU5UICovKVxyXG4gICAgICAgICAgICAgICAga2V5ZWRGcmFnbWVudENvdW50Kys7XHJcbiAgICAgICAgICAgIHJldCA9IHJldC5jb25jYXQoZ2V0VHJhbnNpdGlvblJhd0NoaWxkcmVuKGNoaWxkLmNoaWxkcmVuLCBrZWVwQ29tbWVudCwga2V5KSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGNvbW1lbnQgcGxhY2Vob2xkZXJzIHNob3VsZCBiZSBza2lwcGVkLCBlLmcuIHYtaWZcclxuICAgICAgICBlbHNlIGlmIChrZWVwQ29tbWVudCB8fCBjaGlsZC50eXBlICE9PSBDb21tZW50KSB7XHJcbiAgICAgICAgICAgIHJldC5wdXNoKGtleSAhPSBudWxsID8gY2xvbmVWTm9kZShjaGlsZCwgeyBrZXkgfSkgOiBjaGlsZCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy8gIzExMjYgaWYgYSB0cmFuc2l0aW9uIGNoaWxkcmVuIGxpc3QgY29udGFpbnMgbXVsdGlwbGUgc3ViIGZyYWdtZW50cywgdGhlc2VcclxuICAgIC8vIGZyYWdtZW50cyB3aWxsIGJlIG1lcmdlZCBpbnRvIGEgZmxhdCBjaGlsZHJlbiBhcnJheS4gU2luY2UgZWFjaCB2LWZvclxyXG4gICAgLy8gZnJhZ21lbnQgbWF5IGNvbnRhaW4gZGlmZmVyZW50IHN0YXRpYyBiaW5kaW5ncyBpbnNpZGUsIHdlIG5lZWQgdG8gZGUtb3BcclxuICAgIC8vIHRoZXNlIGNoaWxkcmVuIHRvIGZvcmNlIGZ1bGwgZGlmZnMgdG8gZW5zdXJlIGNvcnJlY3QgYmVoYXZpb3IuXHJcbiAgICBpZiAoa2V5ZWRGcmFnbWVudENvdW50ID4gMSkge1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcmV0Lmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHJldFtpXS5wYXRjaEZsYWcgPSAtMiAvKiBCQUlMICovO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiByZXQ7XHJcbn1cblxuLy8gaW1wbGVtZW50YXRpb24sIGNsb3NlIHRvIG5vLW9wXHJcbmZ1bmN0aW9uIGRlZmluZUNvbXBvbmVudChvcHRpb25zKSB7XHJcbiAgICByZXR1cm4gaXNGdW5jdGlvbihvcHRpb25zKSA/IHsgc2V0dXA6IG9wdGlvbnMsIG5hbWU6IG9wdGlvbnMubmFtZSB9IDogb3B0aW9ucztcclxufVxuXG5jb25zdCBpc0FzeW5jV3JhcHBlciA9IChpKSA9PiAhIWkudHlwZS5fX2FzeW5jTG9hZGVyO1xyXG5mdW5jdGlvbiBkZWZpbmVBc3luY0NvbXBvbmVudChzb3VyY2UpIHtcclxuICAgIGlmIChpc0Z1bmN0aW9uKHNvdXJjZSkpIHtcclxuICAgICAgICBzb3VyY2UgPSB7IGxvYWRlcjogc291cmNlIH07XHJcbiAgICB9XHJcbiAgICBjb25zdCB7IGxvYWRlciwgbG9hZGluZ0NvbXBvbmVudCwgZXJyb3JDb21wb25lbnQsIGRlbGF5ID0gMjAwLCB0aW1lb3V0LCAvLyB1bmRlZmluZWQgPSBuZXZlciB0aW1lcyBvdXRcclxuICAgIHN1c3BlbnNpYmxlID0gdHJ1ZSwgb25FcnJvcjogdXNlck9uRXJyb3IgfSA9IHNvdXJjZTtcclxuICAgIGxldCBwZW5kaW5nUmVxdWVzdCA9IG51bGw7XHJcbiAgICBsZXQgcmVzb2x2ZWRDb21wO1xyXG4gICAgbGV0IHJldHJpZXMgPSAwO1xyXG4gICAgY29uc3QgcmV0cnkgPSAoKSA9PiB7XHJcbiAgICAgICAgcmV0cmllcysrO1xyXG4gICAgICAgIHBlbmRpbmdSZXF1ZXN0ID0gbnVsbDtcclxuICAgICAgICByZXR1cm4gbG9hZCgpO1xyXG4gICAgfTtcclxuICAgIGNvbnN0IGxvYWQgPSAoKSA9PiB7XHJcbiAgICAgICAgbGV0IHRoaXNSZXF1ZXN0O1xyXG4gICAgICAgIHJldHVybiAocGVuZGluZ1JlcXVlc3QgfHxcclxuICAgICAgICAgICAgKHRoaXNSZXF1ZXN0ID0gcGVuZGluZ1JlcXVlc3QgPVxyXG4gICAgICAgICAgICAgICAgbG9hZGVyKClcclxuICAgICAgICAgICAgICAgICAgICAuY2F0Y2goZXJyID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBlcnIgPSBlcnIgaW5zdGFuY2VvZiBFcnJvciA/IGVyciA6IG5ldyBFcnJvcihTdHJpbmcoZXJyKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHVzZXJPbkVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB1c2VyUmV0cnkgPSAoKSA9PiByZXNvbHZlKHJldHJ5KCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdXNlckZhaWwgPSAoKSA9PiByZWplY3QoZXJyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJPbkVycm9yKGVyciwgdXNlclJldHJ5LCB1c2VyRmFpbCwgcmV0cmllcyArIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IGVycjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKChjb21wKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXNSZXF1ZXN0ICE9PSBwZW5kaW5nUmVxdWVzdCAmJiBwZW5kaW5nUmVxdWVzdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcGVuZGluZ1JlcXVlc3Q7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgIWNvbXApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgd2FybihgQXN5bmMgY29tcG9uZW50IGxvYWRlciByZXNvbHZlZCB0byB1bmRlZmluZWQuIGAgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYElmIHlvdSBhcmUgdXNpbmcgcmV0cnkoKSwgbWFrZSBzdXJlIHRvIHJldHVybiBpdHMgcmV0dXJuIHZhbHVlLmApO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAvLyBpbnRlcm9wIG1vZHVsZSBkZWZhdWx0XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbXAgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgKGNvbXAuX19lc01vZHVsZSB8fCBjb21wW1N5bWJvbC50b1N0cmluZ1RhZ10gPT09ICdNb2R1bGUnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb21wID0gY29tcC5kZWZhdWx0O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmIGNvbXAgJiYgIWlzT2JqZWN0KGNvbXApICYmICFpc0Z1bmN0aW9uKGNvbXApKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBhc3luYyBjb21wb25lbnQgbG9hZCByZXN1bHQ6ICR7Y29tcH1gKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZWRDb21wID0gY29tcDtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY29tcDtcclxuICAgICAgICAgICAgICAgIH0pKSk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIGRlZmluZUNvbXBvbmVudCh7XHJcbiAgICAgICAgbmFtZTogJ0FzeW5jQ29tcG9uZW50V3JhcHBlcicsXHJcbiAgICAgICAgX19hc3luY0xvYWRlcjogbG9hZCxcclxuICAgICAgICBnZXQgX19hc3luY1Jlc29sdmVkKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzb2x2ZWRDb21wO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc2V0dXAoKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGluc3RhbmNlID0gY3VycmVudEluc3RhbmNlO1xyXG4gICAgICAgICAgICAvLyBhbHJlYWR5IHJlc29sdmVkXHJcbiAgICAgICAgICAgIGlmIChyZXNvbHZlZENvbXApIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAoKSA9PiBjcmVhdGVJbm5lckNvbXAocmVzb2x2ZWRDb21wLCBpbnN0YW5jZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29uc3Qgb25FcnJvciA9IChlcnIpID0+IHtcclxuICAgICAgICAgICAgICAgIHBlbmRpbmdSZXF1ZXN0ID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIGhhbmRsZUVycm9yKGVyciwgaW5zdGFuY2UsIDEzIC8qIEFTWU5DX0NPTVBPTkVOVF9MT0FERVIgKi8sICFlcnJvckNvbXBvbmVudCAvKiBkbyBub3QgdGhyb3cgaW4gZGV2IGlmIHVzZXIgcHJvdmlkZWQgZXJyb3IgY29tcG9uZW50ICovKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgLy8gc3VzcGVuc2UtY29udHJvbGxlZCBvciBTU1IuXHJcbiAgICAgICAgICAgIGlmICgoc3VzcGVuc2libGUgJiYgaW5zdGFuY2Uuc3VzcGVuc2UpIHx8XHJcbiAgICAgICAgICAgICAgICAoaXNJblNTUkNvbXBvbmVudFNldHVwKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGxvYWQoKVxyXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKGNvbXAgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAoKSA9PiBjcmVhdGVJbm5lckNvbXAoY29tcCwgaW5zdGFuY2UpO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAuY2F0Y2goZXJyID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBvbkVycm9yKGVycik7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICgpID0+IGVycm9yQ29tcG9uZW50XHJcbiAgICAgICAgICAgICAgICAgICAgICAgID8gY3JlYXRlVk5vZGUoZXJyb3JDb21wb25lbnQsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yOiBlcnJcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgOiBudWxsO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29uc3QgbG9hZGVkID0gcmVmKGZhbHNlKTtcclxuICAgICAgICAgICAgY29uc3QgZXJyb3IgPSByZWYoKTtcclxuICAgICAgICAgICAgY29uc3QgZGVsYXllZCA9IHJlZighIWRlbGF5KTtcclxuICAgICAgICAgICAgaWYgKGRlbGF5KSB7XHJcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBkZWxheWVkLnZhbHVlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9LCBkZWxheSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHRpbWVvdXQgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFsb2FkZWQudmFsdWUgJiYgIWVycm9yLnZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGVyciA9IG5ldyBFcnJvcihgQXN5bmMgY29tcG9uZW50IHRpbWVkIG91dCBhZnRlciAke3RpbWVvdXR9bXMuYCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uRXJyb3IoZXJyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3IudmFsdWUgPSBlcnI7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSwgdGltZW91dCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgbG9hZCgpXHJcbiAgICAgICAgICAgICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBsb2FkZWQudmFsdWUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgaWYgKGluc3RhbmNlLnBhcmVudCAmJiBpc0tlZXBBbGl2ZShpbnN0YW5jZS5wYXJlbnQudm5vZGUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gcGFyZW50IGlzIGtlZXAtYWxpdmUsIGZvcmNlIHVwZGF0ZSBzbyB0aGUgbG9hZGVkIGNvbXBvbmVudCdzXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gbmFtZSBpcyB0YWtlbiBpbnRvIGFjY291bnRcclxuICAgICAgICAgICAgICAgICAgICBxdWV1ZUpvYihpbnN0YW5jZS5wYXJlbnQudXBkYXRlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC5jYXRjaChlcnIgPT4ge1xyXG4gICAgICAgICAgICAgICAgb25FcnJvcihlcnIpO1xyXG4gICAgICAgICAgICAgICAgZXJyb3IudmFsdWUgPSBlcnI7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICByZXR1cm4gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKGxvYWRlZC52YWx1ZSAmJiByZXNvbHZlZENvbXApIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY3JlYXRlSW5uZXJDb21wKHJlc29sdmVkQ29tcCwgaW5zdGFuY2UpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoZXJyb3IudmFsdWUgJiYgZXJyb3JDb21wb25lbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY3JlYXRlVk5vZGUoZXJyb3JDb21wb25lbnQsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3I6IGVycm9yLnZhbHVlXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChsb2FkaW5nQ29tcG9uZW50ICYmICFkZWxheWVkLnZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZVZOb2RlKGxvYWRpbmdDb21wb25lbnQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG59XHJcbmZ1bmN0aW9uIGNyZWF0ZUlubmVyQ29tcChjb21wLCB7IHZub2RlOiB7IHJlZiwgcHJvcHMsIGNoaWxkcmVuIH0gfSkge1xyXG4gICAgY29uc3Qgdm5vZGUgPSBjcmVhdGVWTm9kZShjb21wLCBwcm9wcywgY2hpbGRyZW4pO1xyXG4gICAgLy8gZW5zdXJlIGlubmVyIGNvbXBvbmVudCBpbmhlcml0cyB0aGUgYXN5bmMgd3JhcHBlcidzIHJlZiBvd25lclxyXG4gICAgdm5vZGUucmVmID0gcmVmO1xyXG4gICAgcmV0dXJuIHZub2RlO1xyXG59XG5cbmNvbnN0IGlzS2VlcEFsaXZlID0gKHZub2RlKSA9PiB2bm9kZS50eXBlLl9faXNLZWVwQWxpdmU7XHJcbmNvbnN0IEtlZXBBbGl2ZUltcGwgPSB7XHJcbiAgICBuYW1lOiBgS2VlcEFsaXZlYCxcclxuICAgIC8vIE1hcmtlciBmb3Igc3BlY2lhbCBoYW5kbGluZyBpbnNpZGUgdGhlIHJlbmRlcmVyLiBXZSBhcmUgbm90IHVzaW5nIGEgPT09XHJcbiAgICAvLyBjaGVjayBkaXJlY3RseSBvbiBLZWVwQWxpdmUgaW4gdGhlIHJlbmRlcmVyLCBiZWNhdXNlIGltcG9ydGluZyBpdCBkaXJlY3RseVxyXG4gICAgLy8gd291bGQgcHJldmVudCBpdCBmcm9tIGJlaW5nIHRyZWUtc2hha2VuLlxyXG4gICAgX19pc0tlZXBBbGl2ZTogdHJ1ZSxcclxuICAgIHByb3BzOiB7XHJcbiAgICAgICAgaW5jbHVkZTogW1N0cmluZywgUmVnRXhwLCBBcnJheV0sXHJcbiAgICAgICAgZXhjbHVkZTogW1N0cmluZywgUmVnRXhwLCBBcnJheV0sXHJcbiAgICAgICAgbWF4OiBbU3RyaW5nLCBOdW1iZXJdXHJcbiAgICB9LFxyXG4gICAgc2V0dXAocHJvcHMsIHsgc2xvdHMgfSkge1xyXG4gICAgICAgIGNvbnN0IGluc3RhbmNlID0gZ2V0Q3VycmVudEluc3RhbmNlKCk7XHJcbiAgICAgICAgLy8gS2VlcEFsaXZlIGNvbW11bmljYXRlcyB3aXRoIHRoZSBpbnN0YW50aWF0ZWQgcmVuZGVyZXIgdmlhIHRoZVxyXG4gICAgICAgIC8vIGN0eCB3aGVyZSB0aGUgcmVuZGVyZXIgcGFzc2VzIGluIGl0cyBpbnRlcm5hbHMsXHJcbiAgICAgICAgLy8gYW5kIHRoZSBLZWVwQWxpdmUgaW5zdGFuY2UgZXhwb3NlcyBhY3RpdmF0ZS9kZWFjdGl2YXRlIGltcGxlbWVudGF0aW9ucy5cclxuICAgICAgICAvLyBUaGUgd2hvbGUgcG9pbnQgb2YgdGhpcyBpcyB0byBhdm9pZCBpbXBvcnRpbmcgS2VlcEFsaXZlIGRpcmVjdGx5IGluIHRoZVxyXG4gICAgICAgIC8vIHJlbmRlcmVyIHRvIGZhY2lsaXRhdGUgdHJlZS1zaGFraW5nLlxyXG4gICAgICAgIGNvbnN0IHNoYXJlZENvbnRleHQgPSBpbnN0YW5jZS5jdHg7XHJcbiAgICAgICAgLy8gaWYgdGhlIGludGVybmFsIHJlbmRlcmVyIGlzIG5vdCByZWdpc3RlcmVkLCBpdCBpbmRpY2F0ZXMgdGhhdCB0aGlzIGlzIHNlcnZlci1zaWRlIHJlbmRlcmluZyxcclxuICAgICAgICAvLyBmb3IgS2VlcEFsaXZlLCB3ZSBqdXN0IG5lZWQgdG8gcmVuZGVyIGl0cyBjaGlsZHJlblxyXG4gICAgICAgIGlmICghc2hhcmVkQ29udGV4dC5yZW5kZXJlcikge1xyXG4gICAgICAgICAgICByZXR1cm4gc2xvdHMuZGVmYXVsdDtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgY2FjaGUgPSBuZXcgTWFwKCk7XHJcbiAgICAgICAgY29uc3Qga2V5cyA9IG5ldyBTZXQoKTtcclxuICAgICAgICBsZXQgY3VycmVudCA9IG51bGw7XHJcbiAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB8fCBfX1ZVRV9QUk9EX0RFVlRPT0xTX18pIHtcclxuICAgICAgICAgICAgaW5zdGFuY2UuX192X2NhY2hlID0gY2FjaGU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHBhcmVudFN1c3BlbnNlID0gaW5zdGFuY2Uuc3VzcGVuc2U7XHJcbiAgICAgICAgY29uc3QgeyByZW5kZXJlcjogeyBwOiBwYXRjaCwgbTogbW92ZSwgdW06IF91bm1vdW50LCBvOiB7IGNyZWF0ZUVsZW1lbnQgfSB9IH0gPSBzaGFyZWRDb250ZXh0O1xyXG4gICAgICAgIGNvbnN0IHN0b3JhZ2VDb250YWluZXIgPSBjcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICBzaGFyZWRDb250ZXh0LmFjdGl2YXRlID0gKHZub2RlLCBjb250YWluZXIsIGFuY2hvciwgaXNTVkcsIG9wdGltaXplZCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBpbnN0YW5jZSA9IHZub2RlLmNvbXBvbmVudDtcclxuICAgICAgICAgICAgbW92ZSh2bm9kZSwgY29udGFpbmVyLCBhbmNob3IsIDAgLyogRU5URVIgKi8sIHBhcmVudFN1c3BlbnNlKTtcclxuICAgICAgICAgICAgLy8gaW4gY2FzZSBwcm9wcyBoYXZlIGNoYW5nZWRcclxuICAgICAgICAgICAgcGF0Y2goaW5zdGFuY2Uudm5vZGUsIHZub2RlLCBjb250YWluZXIsIGFuY2hvciwgaW5zdGFuY2UsIHBhcmVudFN1c3BlbnNlLCBpc1NWRywgdm5vZGUuc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQpO1xyXG4gICAgICAgICAgICBxdWV1ZVBvc3RSZW5kZXJFZmZlY3QoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaW5zdGFuY2UuaXNEZWFjdGl2YXRlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgaWYgKGluc3RhbmNlLmEpIHtcclxuICAgICAgICAgICAgICAgICAgICBpbnZva2VBcnJheUZucyhpbnN0YW5jZS5hKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNvbnN0IHZub2RlSG9vayA9IHZub2RlLnByb3BzICYmIHZub2RlLnByb3BzLm9uVm5vZGVNb3VudGVkO1xyXG4gICAgICAgICAgICAgICAgaWYgKHZub2RlSG9vaykge1xyXG4gICAgICAgICAgICAgICAgICAgIGludm9rZVZOb2RlSG9vayh2bm9kZUhvb2ssIGluc3RhbmNlLnBhcmVudCwgdm5vZGUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LCBwYXJlbnRTdXNwZW5zZSk7XHJcbiAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgfHwgX19WVUVfUFJPRF9ERVZUT09MU19fKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBVcGRhdGUgY29tcG9uZW50cyB0cmVlXHJcbiAgICAgICAgICAgICAgICBkZXZ0b29sc0NvbXBvbmVudEFkZGVkKGluc3RhbmNlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgc2hhcmVkQ29udGV4dC5kZWFjdGl2YXRlID0gKHZub2RlKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGluc3RhbmNlID0gdm5vZGUuY29tcG9uZW50O1xyXG4gICAgICAgICAgICBtb3ZlKHZub2RlLCBzdG9yYWdlQ29udGFpbmVyLCBudWxsLCAxIC8qIExFQVZFICovLCBwYXJlbnRTdXNwZW5zZSk7XHJcbiAgICAgICAgICAgIHF1ZXVlUG9zdFJlbmRlckVmZmVjdCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoaW5zdGFuY2UuZGEpIHtcclxuICAgICAgICAgICAgICAgICAgICBpbnZva2VBcnJheUZucyhpbnN0YW5jZS5kYSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjb25zdCB2bm9kZUhvb2sgPSB2bm9kZS5wcm9wcyAmJiB2bm9kZS5wcm9wcy5vblZub2RlVW5tb3VudGVkO1xyXG4gICAgICAgICAgICAgICAgaWYgKHZub2RlSG9vaykge1xyXG4gICAgICAgICAgICAgICAgICAgIGludm9rZVZOb2RlSG9vayh2bm9kZUhvb2ssIGluc3RhbmNlLnBhcmVudCwgdm5vZGUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaW5zdGFuY2UuaXNEZWFjdGl2YXRlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIH0sIHBhcmVudFN1c3BlbnNlKTtcclxuICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB8fCBfX1ZVRV9QUk9EX0RFVlRPT0xTX18pIHtcclxuICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSBjb21wb25lbnRzIHRyZWVcclxuICAgICAgICAgICAgICAgIGRldnRvb2xzQ29tcG9uZW50QWRkZWQoaW5zdGFuY2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICBmdW5jdGlvbiB1bm1vdW50KHZub2RlKSB7XHJcbiAgICAgICAgICAgIC8vIHJlc2V0IHRoZSBzaGFwZUZsYWcgc28gaXQgY2FuIGJlIHByb3Blcmx5IHVubW91bnRlZFxyXG4gICAgICAgICAgICByZXNldFNoYXBlRmxhZyh2bm9kZSk7XHJcbiAgICAgICAgICAgIF91bm1vdW50KHZub2RlLCBpbnN0YW5jZSwgcGFyZW50U3VzcGVuc2UsIHRydWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmdW5jdGlvbiBwcnVuZUNhY2hlKGZpbHRlcikge1xyXG4gICAgICAgICAgICBjYWNoZS5mb3JFYWNoKCh2bm9kZSwga2V5KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBuYW1lID0gZ2V0Q29tcG9uZW50TmFtZSh2bm9kZS50eXBlKTtcclxuICAgICAgICAgICAgICAgIGlmIChuYW1lICYmICghZmlsdGVyIHx8ICFmaWx0ZXIobmFtZSkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcHJ1bmVDYWNoZUVudHJ5KGtleSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmdW5jdGlvbiBwcnVuZUNhY2hlRW50cnkoa2V5KSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNhY2hlZCA9IGNhY2hlLmdldChrZXkpO1xyXG4gICAgICAgICAgICBpZiAoIWN1cnJlbnQgfHwgY2FjaGVkLnR5cGUgIT09IGN1cnJlbnQudHlwZSkge1xyXG4gICAgICAgICAgICAgICAgdW5tb3VudChjYWNoZWQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKGN1cnJlbnQpIHtcclxuICAgICAgICAgICAgICAgIC8vIGN1cnJlbnQgYWN0aXZlIGluc3RhbmNlIHNob3VsZCBubyBsb25nZXIgYmUga2VwdC1hbGl2ZS5cclxuICAgICAgICAgICAgICAgIC8vIHdlIGNhbid0IHVubW91bnQgaXQgbm93IGJ1dCBpdCBtaWdodCBiZSBsYXRlciwgc28gcmVzZXQgaXRzIGZsYWcgbm93LlxyXG4gICAgICAgICAgICAgICAgcmVzZXRTaGFwZUZsYWcoY3VycmVudCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2FjaGUuZGVsZXRlKGtleSk7XHJcbiAgICAgICAgICAgIGtleXMuZGVsZXRlKGtleSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIHBydW5lIGNhY2hlIG9uIGluY2x1ZGUvZXhjbHVkZSBwcm9wIGNoYW5nZVxyXG4gICAgICAgIHdhdGNoKCgpID0+IFtwcm9wcy5pbmNsdWRlLCBwcm9wcy5leGNsdWRlXSwgKFtpbmNsdWRlLCBleGNsdWRlXSkgPT4ge1xyXG4gICAgICAgICAgICBpbmNsdWRlICYmIHBydW5lQ2FjaGUobmFtZSA9PiBtYXRjaGVzKGluY2x1ZGUsIG5hbWUpKTtcclxuICAgICAgICAgICAgZXhjbHVkZSAmJiBwcnVuZUNhY2hlKG5hbWUgPT4gIW1hdGNoZXMoZXhjbHVkZSwgbmFtZSkpO1xyXG4gICAgICAgIH0sIFxyXG4gICAgICAgIC8vIHBydW5lIHBvc3QtcmVuZGVyIGFmdGVyIGBjdXJyZW50YCBoYXMgYmVlbiB1cGRhdGVkXHJcbiAgICAgICAgeyBmbHVzaDogJ3Bvc3QnLCBkZWVwOiB0cnVlIH0pO1xyXG4gICAgICAgIC8vIGNhY2hlIHN1YiB0cmVlIGFmdGVyIHJlbmRlclxyXG4gICAgICAgIGxldCBwZW5kaW5nQ2FjaGVLZXkgPSBudWxsO1xyXG4gICAgICAgIGNvbnN0IGNhY2hlU3VidHJlZSA9ICgpID0+IHtcclxuICAgICAgICAgICAgLy8gZml4ICMxNjIxLCB0aGUgcGVuZGluZ0NhY2hlS2V5IGNvdWxkIGJlIDBcclxuICAgICAgICAgICAgaWYgKHBlbmRpbmdDYWNoZUtleSAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICBjYWNoZS5zZXQocGVuZGluZ0NhY2hlS2V5LCBnZXRJbm5lckNoaWxkKGluc3RhbmNlLnN1YlRyZWUpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgb25Nb3VudGVkKGNhY2hlU3VidHJlZSk7XHJcbiAgICAgICAgb25VcGRhdGVkKGNhY2hlU3VidHJlZSk7XHJcbiAgICAgICAgb25CZWZvcmVVbm1vdW50KCgpID0+IHtcclxuICAgICAgICAgICAgY2FjaGUuZm9yRWFjaChjYWNoZWQgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgeyBzdWJUcmVlLCBzdXNwZW5zZSB9ID0gaW5zdGFuY2U7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB2bm9kZSA9IGdldElubmVyQ2hpbGQoc3ViVHJlZSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoY2FjaGVkLnR5cGUgPT09IHZub2RlLnR5cGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBjdXJyZW50IGluc3RhbmNlIHdpbGwgYmUgdW5tb3VudGVkIGFzIHBhcnQgb2Yga2VlcC1hbGl2ZSdzIHVubW91bnRcclxuICAgICAgICAgICAgICAgICAgICByZXNldFNoYXBlRmxhZyh2bm9kZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gYnV0IGludm9rZSBpdHMgZGVhY3RpdmF0ZWQgaG9vayBoZXJlXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZGEgPSB2bm9kZS5jb21wb25lbnQuZGE7XHJcbiAgICAgICAgICAgICAgICAgICAgZGEgJiYgcXVldWVQb3N0UmVuZGVyRWZmZWN0KGRhLCBzdXNwZW5zZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdW5tb3VudChjYWNoZWQpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gKCkgPT4ge1xyXG4gICAgICAgICAgICBwZW5kaW5nQ2FjaGVLZXkgPSBudWxsO1xyXG4gICAgICAgICAgICBpZiAoIXNsb3RzLmRlZmF1bHQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbnN0IGNoaWxkcmVuID0gc2xvdHMuZGVmYXVsdCgpO1xyXG4gICAgICAgICAgICBjb25zdCByYXdWTm9kZSA9IGNoaWxkcmVuWzBdO1xyXG4gICAgICAgICAgICBpZiAoY2hpbGRyZW4ubGVuZ3RoID4gMSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHdhcm4oYEtlZXBBbGl2ZSBzaG91bGQgY29udGFpbiBleGFjdGx5IG9uZSBjb21wb25lbnQgY2hpbGQuYCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjdXJyZW50ID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIHJldHVybiBjaGlsZHJlbjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmICghaXNWTm9kZShyYXdWTm9kZSkgfHxcclxuICAgICAgICAgICAgICAgICghKHJhd1ZOb2RlLnNoYXBlRmxhZyAmIDQgLyogU1RBVEVGVUxfQ09NUE9ORU5UICovKSAmJlxyXG4gICAgICAgICAgICAgICAgICAgICEocmF3Vk5vZGUuc2hhcGVGbGFnICYgMTI4IC8qIFNVU1BFTlNFICovKSkpIHtcclxuICAgICAgICAgICAgICAgIGN1cnJlbnQgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJhd1ZOb2RlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGxldCB2bm9kZSA9IGdldElubmVyQ2hpbGQocmF3Vk5vZGUpO1xyXG4gICAgICAgICAgICBjb25zdCBjb21wID0gdm5vZGUudHlwZTtcclxuICAgICAgICAgICAgLy8gZm9yIGFzeW5jIGNvbXBvbmVudHMsIG5hbWUgY2hlY2sgc2hvdWxkIGJlIGJhc2VkIGluIGl0cyBsb2FkZWRcclxuICAgICAgICAgICAgLy8gaW5uZXIgY29tcG9uZW50IGlmIGF2YWlsYWJsZVxyXG4gICAgICAgICAgICBjb25zdCBuYW1lID0gZ2V0Q29tcG9uZW50TmFtZShpc0FzeW5jV3JhcHBlcih2bm9kZSlcclxuICAgICAgICAgICAgICAgID8gdm5vZGUudHlwZS5fX2FzeW5jUmVzb2x2ZWQgfHwge31cclxuICAgICAgICAgICAgICAgIDogY29tcCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHsgaW5jbHVkZSwgZXhjbHVkZSwgbWF4IH0gPSBwcm9wcztcclxuICAgICAgICAgICAgaWYgKChpbmNsdWRlICYmICghbmFtZSB8fCAhbWF0Y2hlcyhpbmNsdWRlLCBuYW1lKSkpIHx8XHJcbiAgICAgICAgICAgICAgICAoZXhjbHVkZSAmJiBuYW1lICYmIG1hdGNoZXMoZXhjbHVkZSwgbmFtZSkpKSB7XHJcbiAgICAgICAgICAgICAgICBjdXJyZW50ID0gdm5vZGU7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmF3Vk5vZGU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29uc3Qga2V5ID0gdm5vZGUua2V5ID09IG51bGwgPyBjb21wIDogdm5vZGUua2V5O1xyXG4gICAgICAgICAgICBjb25zdCBjYWNoZWRWTm9kZSA9IGNhY2hlLmdldChrZXkpO1xyXG4gICAgICAgICAgICAvLyBjbG9uZSB2bm9kZSBpZiBpdCdzIHJldXNlZCBiZWNhdXNlIHdlIGFyZSBnb2luZyB0byBtdXRhdGUgaXRcclxuICAgICAgICAgICAgaWYgKHZub2RlLmVsKSB7XHJcbiAgICAgICAgICAgICAgICB2bm9kZSA9IGNsb25lVk5vZGUodm5vZGUpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHJhd1ZOb2RlLnNoYXBlRmxhZyAmIDEyOCAvKiBTVVNQRU5TRSAqLykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJhd1ZOb2RlLnNzQ29udGVudCA9IHZub2RlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vICMxNTEzIGl0J3MgcG9zc2libGUgZm9yIHRoZSByZXR1cm5lZCB2bm9kZSB0byBiZSBjbG9uZWQgZHVlIHRvIGF0dHJcclxuICAgICAgICAgICAgLy8gZmFsbHRocm91Z2ggb3Igc2NvcGVJZCwgc28gdGhlIHZub2RlIGhlcmUgbWF5IG5vdCBiZSB0aGUgZmluYWwgdm5vZGVcclxuICAgICAgICAgICAgLy8gdGhhdCBpcyBtb3VudGVkLiBJbnN0ZWFkIG9mIGNhY2hpbmcgaXQgZGlyZWN0bHksIHdlIHN0b3JlIHRoZSBwZW5kaW5nXHJcbiAgICAgICAgICAgIC8vIGtleSBhbmQgY2FjaGUgYGluc3RhbmNlLnN1YlRyZWVgICh0aGUgbm9ybWFsaXplZCB2bm9kZSkgaW5cclxuICAgICAgICAgICAgLy8gYmVmb3JlTW91bnQvYmVmb3JlVXBkYXRlIGhvb2tzLlxyXG4gICAgICAgICAgICBwZW5kaW5nQ2FjaGVLZXkgPSBrZXk7XHJcbiAgICAgICAgICAgIGlmIChjYWNoZWRWTm9kZSkge1xyXG4gICAgICAgICAgICAgICAgLy8gY29weSBvdmVyIG1vdW50ZWQgc3RhdGVcclxuICAgICAgICAgICAgICAgIHZub2RlLmVsID0gY2FjaGVkVk5vZGUuZWw7XHJcbiAgICAgICAgICAgICAgICB2bm9kZS5jb21wb25lbnQgPSBjYWNoZWRWTm9kZS5jb21wb25lbnQ7XHJcbiAgICAgICAgICAgICAgICBpZiAodm5vZGUudHJhbnNpdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIHJlY3Vyc2l2ZWx5IHVwZGF0ZSB0cmFuc2l0aW9uIGhvb2tzIG9uIHN1YlRyZWVcclxuICAgICAgICAgICAgICAgICAgICBzZXRUcmFuc2l0aW9uSG9va3Modm5vZGUsIHZub2RlLnRyYW5zaXRpb24pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gYXZvaWQgdm5vZGUgYmVpbmcgbW91bnRlZCBhcyBmcmVzaFxyXG4gICAgICAgICAgICAgICAgdm5vZGUuc2hhcGVGbGFnIHw9IDUxMiAvKiBDT01QT05FTlRfS0VQVF9BTElWRSAqLztcclxuICAgICAgICAgICAgICAgIC8vIG1ha2UgdGhpcyBrZXkgdGhlIGZyZXNoZXN0XHJcbiAgICAgICAgICAgICAgICBrZXlzLmRlbGV0ZShrZXkpO1xyXG4gICAgICAgICAgICAgICAga2V5cy5hZGQoa2V5KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGtleXMuYWRkKGtleSk7XHJcbiAgICAgICAgICAgICAgICAvLyBwcnVuZSBvbGRlc3QgZW50cnlcclxuICAgICAgICAgICAgICAgIGlmIChtYXggJiYga2V5cy5zaXplID4gcGFyc2VJbnQobWF4LCAxMCkpIHtcclxuICAgICAgICAgICAgICAgICAgICBwcnVuZUNhY2hlRW50cnkoa2V5cy52YWx1ZXMoKS5uZXh0KCkudmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIGF2b2lkIHZub2RlIGJlaW5nIHVubW91bnRlZFxyXG4gICAgICAgICAgICB2bm9kZS5zaGFwZUZsYWcgfD0gMjU2IC8qIENPTVBPTkVOVF9TSE9VTERfS0VFUF9BTElWRSAqLztcclxuICAgICAgICAgICAgY3VycmVudCA9IHZub2RlO1xyXG4gICAgICAgICAgICByZXR1cm4gcmF3Vk5vZGU7XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxufTtcclxuLy8gZXhwb3J0IHRoZSBwdWJsaWMgdHlwZSBmb3IgaC90c3ggaW5mZXJlbmNlXHJcbi8vIGFsc28gdG8gYXZvaWQgaW5saW5lIGltcG9ydCgpIGluIGdlbmVyYXRlZCBkLnRzIGZpbGVzXHJcbmNvbnN0IEtlZXBBbGl2ZSA9IEtlZXBBbGl2ZUltcGw7XHJcbmZ1bmN0aW9uIG1hdGNoZXMocGF0dGVybiwgbmFtZSkge1xyXG4gICAgaWYgKGlzQXJyYXkocGF0dGVybikpIHtcclxuICAgICAgICByZXR1cm4gcGF0dGVybi5zb21lKChwKSA9PiBtYXRjaGVzKHAsIG5hbWUpKTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKGlzU3RyaW5nKHBhdHRlcm4pKSB7XHJcbiAgICAgICAgcmV0dXJuIHBhdHRlcm4uc3BsaXQoJywnKS5pbmNsdWRlcyhuYW1lKTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKHBhdHRlcm4udGVzdCkge1xyXG4gICAgICAgIHJldHVybiBwYXR0ZXJuLnRlc3QobmFtZSk7XHJcbiAgICB9XHJcbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG59XHJcbmZ1bmN0aW9uIG9uQWN0aXZhdGVkKGhvb2ssIHRhcmdldCkge1xyXG4gICAgcmVnaXN0ZXJLZWVwQWxpdmVIb29rKGhvb2ssIFwiYVwiIC8qIEFDVElWQVRFRCAqLywgdGFyZ2V0KTtcclxufVxyXG5mdW5jdGlvbiBvbkRlYWN0aXZhdGVkKGhvb2ssIHRhcmdldCkge1xyXG4gICAgcmVnaXN0ZXJLZWVwQWxpdmVIb29rKGhvb2ssIFwiZGFcIiAvKiBERUFDVElWQVRFRCAqLywgdGFyZ2V0KTtcclxufVxyXG5mdW5jdGlvbiByZWdpc3RlcktlZXBBbGl2ZUhvb2soaG9vaywgdHlwZSwgdGFyZ2V0ID0gY3VycmVudEluc3RhbmNlKSB7XHJcbiAgICAvLyBjYWNoZSB0aGUgZGVhY3RpdmF0ZSBicmFuY2ggY2hlY2sgd3JhcHBlciBmb3IgaW5qZWN0ZWQgaG9va3Mgc28gdGhlIHNhbWVcclxuICAgIC8vIGhvb2sgY2FuIGJlIHByb3Blcmx5IGRlZHVwZWQgYnkgdGhlIHNjaGVkdWxlci4gXCJfX3dkY1wiIHN0YW5kcyBmb3IgXCJ3aXRoXHJcbiAgICAvLyBkZWFjdGl2YXRpb24gY2hlY2tcIi5cclxuICAgIGNvbnN0IHdyYXBwZWRIb29rID0gaG9vay5fX3dkYyB8fFxyXG4gICAgICAgIChob29rLl9fd2RjID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAvLyBvbmx5IGZpcmUgdGhlIGhvb2sgaWYgdGhlIHRhcmdldCBpbnN0YW5jZSBpcyBOT1QgaW4gYSBkZWFjdGl2YXRlZCBicmFuY2guXHJcbiAgICAgICAgICAgIGxldCBjdXJyZW50ID0gdGFyZ2V0O1xyXG4gICAgICAgICAgICB3aGlsZSAoY3VycmVudCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGN1cnJlbnQuaXNEZWFjdGl2YXRlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGN1cnJlbnQgPSBjdXJyZW50LnBhcmVudDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gaG9vaygpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgaW5qZWN0SG9vayh0eXBlLCB3cmFwcGVkSG9vaywgdGFyZ2V0KTtcclxuICAgIC8vIEluIGFkZGl0aW9uIHRvIHJlZ2lzdGVyaW5nIGl0IG9uIHRoZSB0YXJnZXQgaW5zdGFuY2UsIHdlIHdhbGsgdXAgdGhlIHBhcmVudFxyXG4gICAgLy8gY2hhaW4gYW5kIHJlZ2lzdGVyIGl0IG9uIGFsbCBhbmNlc3RvciBpbnN0YW5jZXMgdGhhdCBhcmUga2VlcC1hbGl2ZSByb290cy5cclxuICAgIC8vIFRoaXMgYXZvaWRzIHRoZSBuZWVkIHRvIHdhbGsgdGhlIGVudGlyZSBjb21wb25lbnQgdHJlZSB3aGVuIGludm9raW5nIHRoZXNlXHJcbiAgICAvLyBob29rcywgYW5kIG1vcmUgaW1wb3J0YW50bHksIGF2b2lkcyB0aGUgbmVlZCB0byB0cmFjayBjaGlsZCBjb21wb25lbnRzIGluXHJcbiAgICAvLyBhcnJheXMuXHJcbiAgICBpZiAodGFyZ2V0KSB7XHJcbiAgICAgICAgbGV0IGN1cnJlbnQgPSB0YXJnZXQucGFyZW50O1xyXG4gICAgICAgIHdoaWxlIChjdXJyZW50ICYmIGN1cnJlbnQucGFyZW50KSB7XHJcbiAgICAgICAgICAgIGlmIChpc0tlZXBBbGl2ZShjdXJyZW50LnBhcmVudC52bm9kZSkpIHtcclxuICAgICAgICAgICAgICAgIGluamVjdFRvS2VlcEFsaXZlUm9vdCh3cmFwcGVkSG9vaywgdHlwZSwgdGFyZ2V0LCBjdXJyZW50KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjdXJyZW50ID0gY3VycmVudC5wYXJlbnQ7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIGluamVjdFRvS2VlcEFsaXZlUm9vdChob29rLCB0eXBlLCB0YXJnZXQsIGtlZXBBbGl2ZVJvb3QpIHtcclxuICAgIC8vIGluamVjdEhvb2sgd3JhcHMgdGhlIG9yaWdpbmFsIGZvciBlcnJvciBoYW5kbGluZywgc28gbWFrZSBzdXJlIHRvIHJlbW92ZVxyXG4gICAgLy8gdGhlIHdyYXBwZWQgdmVyc2lvbi5cclxuICAgIGNvbnN0IGluamVjdGVkID0gaW5qZWN0SG9vayh0eXBlLCBob29rLCBrZWVwQWxpdmVSb290LCB0cnVlIC8qIHByZXBlbmQgKi8pO1xyXG4gICAgb25Vbm1vdW50ZWQoKCkgPT4ge1xyXG4gICAgICAgIHJlbW92ZShrZWVwQWxpdmVSb290W3R5cGVdLCBpbmplY3RlZCk7XHJcbiAgICB9LCB0YXJnZXQpO1xyXG59XHJcbmZ1bmN0aW9uIHJlc2V0U2hhcGVGbGFnKHZub2RlKSB7XHJcbiAgICBsZXQgc2hhcGVGbGFnID0gdm5vZGUuc2hhcGVGbGFnO1xyXG4gICAgaWYgKHNoYXBlRmxhZyAmIDI1NiAvKiBDT01QT05FTlRfU0hPVUxEX0tFRVBfQUxJVkUgKi8pIHtcclxuICAgICAgICBzaGFwZUZsYWcgLT0gMjU2IC8qIENPTVBPTkVOVF9TSE9VTERfS0VFUF9BTElWRSAqLztcclxuICAgIH1cclxuICAgIGlmIChzaGFwZUZsYWcgJiA1MTIgLyogQ09NUE9ORU5UX0tFUFRfQUxJVkUgKi8pIHtcclxuICAgICAgICBzaGFwZUZsYWcgLT0gNTEyIC8qIENPTVBPTkVOVF9LRVBUX0FMSVZFICovO1xyXG4gICAgfVxyXG4gICAgdm5vZGUuc2hhcGVGbGFnID0gc2hhcGVGbGFnO1xyXG59XHJcbmZ1bmN0aW9uIGdldElubmVyQ2hpbGQodm5vZGUpIHtcclxuICAgIHJldHVybiB2bm9kZS5zaGFwZUZsYWcgJiAxMjggLyogU1VTUEVOU0UgKi8gPyB2bm9kZS5zc0NvbnRlbnQgOiB2bm9kZTtcclxufVxuXG5mdW5jdGlvbiBpbmplY3RIb29rKHR5cGUsIGhvb2ssIHRhcmdldCA9IGN1cnJlbnRJbnN0YW5jZSwgcHJlcGVuZCA9IGZhbHNlKSB7XHJcbiAgICBpZiAodGFyZ2V0KSB7XHJcbiAgICAgICAgY29uc3QgaG9va3MgPSB0YXJnZXRbdHlwZV0gfHwgKHRhcmdldFt0eXBlXSA9IFtdKTtcclxuICAgICAgICAvLyBjYWNoZSB0aGUgZXJyb3IgaGFuZGxpbmcgd3JhcHBlciBmb3IgaW5qZWN0ZWQgaG9va3Mgc28gdGhlIHNhbWUgaG9va1xyXG4gICAgICAgIC8vIGNhbiBiZSBwcm9wZXJseSBkZWR1cGVkIGJ5IHRoZSBzY2hlZHVsZXIuIFwiX193ZWhcIiBzdGFuZHMgZm9yIFwid2l0aCBlcnJvclxyXG4gICAgICAgIC8vIGhhbmRsaW5nXCIuXHJcbiAgICAgICAgY29uc3Qgd3JhcHBlZEhvb2sgPSBob29rLl9fd2VoIHx8XHJcbiAgICAgICAgICAgIChob29rLl9fd2VoID0gKC4uLmFyZ3MpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmICh0YXJnZXQuaXNVbm1vdW50ZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyBkaXNhYmxlIHRyYWNraW5nIGluc2lkZSBhbGwgbGlmZWN5Y2xlIGhvb2tzXHJcbiAgICAgICAgICAgICAgICAvLyBzaW5jZSB0aGV5IGNhbiBwb3RlbnRpYWxseSBiZSBjYWxsZWQgaW5zaWRlIGVmZmVjdHMuXHJcbiAgICAgICAgICAgICAgICBwYXVzZVRyYWNraW5nKCk7XHJcbiAgICAgICAgICAgICAgICAvLyBTZXQgY3VycmVudEluc3RhbmNlIGR1cmluZyBob29rIGludm9jYXRpb24uXHJcbiAgICAgICAgICAgICAgICAvLyBUaGlzIGFzc3VtZXMgdGhlIGhvb2sgZG9lcyBub3Qgc3luY2hyb25vdXNseSB0cmlnZ2VyIG90aGVyIGhvb2tzLCB3aGljaFxyXG4gICAgICAgICAgICAgICAgLy8gY2FuIG9ubHkgYmUgZmFsc2Ugd2hlbiB0aGUgdXNlciBkb2VzIHNvbWV0aGluZyByZWFsbHkgZnVua3kuXHJcbiAgICAgICAgICAgICAgICBzZXRDdXJyZW50SW5zdGFuY2UodGFyZ2V0KTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHJlcyA9IGNhbGxXaXRoQXN5bmNFcnJvckhhbmRsaW5nKGhvb2ssIHRhcmdldCwgdHlwZSwgYXJncyk7XHJcbiAgICAgICAgICAgICAgICB1bnNldEN1cnJlbnRJbnN0YW5jZSgpO1xyXG4gICAgICAgICAgICAgICAgcmVzZXRUcmFja2luZygpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlcztcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgaWYgKHByZXBlbmQpIHtcclxuICAgICAgICAgICAgaG9va3MudW5zaGlmdCh3cmFwcGVkSG9vayk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBob29rcy5wdXNoKHdyYXBwZWRIb29rKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHdyYXBwZWRIb29rO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XHJcbiAgICAgICAgY29uc3QgYXBpTmFtZSA9IHRvSGFuZGxlcktleShFcnJvclR5cGVTdHJpbmdzW3R5cGVdLnJlcGxhY2UoLyBob29rJC8sICcnKSk7XHJcbiAgICAgICAgd2FybihgJHthcGlOYW1lfSBpcyBjYWxsZWQgd2hlbiB0aGVyZSBpcyBubyBhY3RpdmUgY29tcG9uZW50IGluc3RhbmNlIHRvIGJlIGAgK1xyXG4gICAgICAgICAgICBgYXNzb2NpYXRlZCB3aXRoLiBgICtcclxuICAgICAgICAgICAgYExpZmVjeWNsZSBpbmplY3Rpb24gQVBJcyBjYW4gb25seSBiZSB1c2VkIGR1cmluZyBleGVjdXRpb24gb2Ygc2V0dXAoKS5gICtcclxuICAgICAgICAgICAgKGAgSWYgeW91IGFyZSB1c2luZyBhc3luYyBzZXR1cCgpLCBtYWtlIHN1cmUgdG8gcmVnaXN0ZXIgbGlmZWN5Y2xlIGAgK1xyXG4gICAgICAgICAgICAgICAgICAgIGBob29rcyBiZWZvcmUgdGhlIGZpcnN0IGF3YWl0IHN0YXRlbWVudC5gXHJcbiAgICAgICAgICAgICAgICApKTtcclxuICAgIH1cclxufVxyXG5jb25zdCBjcmVhdGVIb29rID0gKGxpZmVjeWNsZSkgPT4gKGhvb2ssIHRhcmdldCA9IGN1cnJlbnRJbnN0YW5jZSkgPT4gXHJcbi8vIHBvc3QtY3JlYXRlIGxpZmVjeWNsZSByZWdpc3RyYXRpb25zIGFyZSBub29wcyBkdXJpbmcgU1NSIChleGNlcHQgZm9yIHNlcnZlclByZWZldGNoKVxyXG4oIWlzSW5TU1JDb21wb25lbnRTZXR1cCB8fCBsaWZlY3ljbGUgPT09IFwic3BcIiAvKiBTRVJWRVJfUFJFRkVUQ0ggKi8pICYmXHJcbiAgICBpbmplY3RIb29rKGxpZmVjeWNsZSwgaG9vaywgdGFyZ2V0KTtcclxuY29uc3Qgb25CZWZvcmVNb3VudCA9IGNyZWF0ZUhvb2soXCJibVwiIC8qIEJFRk9SRV9NT1VOVCAqLyk7XHJcbmNvbnN0IG9uTW91bnRlZCA9IGNyZWF0ZUhvb2soXCJtXCIgLyogTU9VTlRFRCAqLyk7XHJcbmNvbnN0IG9uQmVmb3JlVXBkYXRlID0gY3JlYXRlSG9vayhcImJ1XCIgLyogQkVGT1JFX1VQREFURSAqLyk7XHJcbmNvbnN0IG9uVXBkYXRlZCA9IGNyZWF0ZUhvb2soXCJ1XCIgLyogVVBEQVRFRCAqLyk7XHJcbmNvbnN0IG9uQmVmb3JlVW5tb3VudCA9IGNyZWF0ZUhvb2soXCJidW1cIiAvKiBCRUZPUkVfVU5NT1VOVCAqLyk7XHJcbmNvbnN0IG9uVW5tb3VudGVkID0gY3JlYXRlSG9vayhcInVtXCIgLyogVU5NT1VOVEVEICovKTtcclxuY29uc3Qgb25TZXJ2ZXJQcmVmZXRjaCA9IGNyZWF0ZUhvb2soXCJzcFwiIC8qIFNFUlZFUl9QUkVGRVRDSCAqLyk7XHJcbmNvbnN0IG9uUmVuZGVyVHJpZ2dlcmVkID0gY3JlYXRlSG9vayhcInJ0Z1wiIC8qIFJFTkRFUl9UUklHR0VSRUQgKi8pO1xyXG5jb25zdCBvblJlbmRlclRyYWNrZWQgPSBjcmVhdGVIb29rKFwicnRjXCIgLyogUkVOREVSX1RSQUNLRUQgKi8pO1xyXG5mdW5jdGlvbiBvbkVycm9yQ2FwdHVyZWQoaG9vaywgdGFyZ2V0ID0gY3VycmVudEluc3RhbmNlKSB7XHJcbiAgICBpbmplY3RIb29rKFwiZWNcIiAvKiBFUlJPUl9DQVBUVVJFRCAqLywgaG9vaywgdGFyZ2V0KTtcclxufVxuXG5mdW5jdGlvbiBjcmVhdGVEdXBsaWNhdGVDaGVja2VyKCkge1xyXG4gICAgY29uc3QgY2FjaGUgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xyXG4gICAgcmV0dXJuICh0eXBlLCBrZXkpID0+IHtcclxuICAgICAgICBpZiAoY2FjaGVba2V5XSkge1xyXG4gICAgICAgICAgICB3YXJuKGAke3R5cGV9IHByb3BlcnR5IFwiJHtrZXl9XCIgaXMgYWxyZWFkeSBkZWZpbmVkIGluICR7Y2FjaGVba2V5XX0uYCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBjYWNoZVtrZXldID0gdHlwZTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG59XHJcbmxldCBzaG91bGRDYWNoZUFjY2VzcyA9IHRydWU7XHJcbmZ1bmN0aW9uIGFwcGx5T3B0aW9ucyhpbnN0YW5jZSkge1xyXG4gICAgY29uc3Qgb3B0aW9ucyA9IHJlc29sdmVNZXJnZWRPcHRpb25zKGluc3RhbmNlKTtcclxuICAgIGNvbnN0IHB1YmxpY1RoaXMgPSBpbnN0YW5jZS5wcm94eTtcclxuICAgIGNvbnN0IGN0eCA9IGluc3RhbmNlLmN0eDtcclxuICAgIC8vIGRvIG5vdCBjYWNoZSBwcm9wZXJ0eSBhY2Nlc3Mgb24gcHVibGljIHByb3h5IGR1cmluZyBzdGF0ZSBpbml0aWFsaXphdGlvblxyXG4gICAgc2hvdWxkQ2FjaGVBY2Nlc3MgPSBmYWxzZTtcclxuICAgIC8vIGNhbGwgYmVmb3JlQ3JlYXRlIGZpcnN0IGJlZm9yZSBhY2Nlc3Npbmcgb3RoZXIgb3B0aW9ucyBzaW5jZVxyXG4gICAgLy8gdGhlIGhvb2sgbWF5IG11dGF0ZSByZXNvbHZlZCBvcHRpb25zICgjMjc5MSlcclxuICAgIGlmIChvcHRpb25zLmJlZm9yZUNyZWF0ZSkge1xyXG4gICAgICAgIGNhbGxIb29rKG9wdGlvbnMuYmVmb3JlQ3JlYXRlLCBpbnN0YW5jZSwgXCJiY1wiIC8qIEJFRk9SRV9DUkVBVEUgKi8pO1xyXG4gICAgfVxyXG4gICAgY29uc3QgeyBcclxuICAgIC8vIHN0YXRlXHJcbiAgICBkYXRhOiBkYXRhT3B0aW9ucywgY29tcHV0ZWQ6IGNvbXB1dGVkT3B0aW9ucywgbWV0aG9kcywgd2F0Y2g6IHdhdGNoT3B0aW9ucywgcHJvdmlkZTogcHJvdmlkZU9wdGlvbnMsIGluamVjdDogaW5qZWN0T3B0aW9ucywgXHJcbiAgICAvLyBsaWZlY3ljbGVcclxuICAgIGNyZWF0ZWQsIGJlZm9yZU1vdW50LCBtb3VudGVkLCBiZWZvcmVVcGRhdGUsIHVwZGF0ZWQsIGFjdGl2YXRlZCwgZGVhY3RpdmF0ZWQsIGJlZm9yZURlc3Ryb3ksIGJlZm9yZVVubW91bnQsIGRlc3Ryb3llZCwgdW5tb3VudGVkLCByZW5kZXIsIHJlbmRlclRyYWNrZWQsIHJlbmRlclRyaWdnZXJlZCwgZXJyb3JDYXB0dXJlZCwgc2VydmVyUHJlZmV0Y2gsIFxyXG4gICAgLy8gcHVibGljIEFQSVxyXG4gICAgZXhwb3NlLCBpbmhlcml0QXR0cnMsIFxyXG4gICAgLy8gYXNzZXRzXHJcbiAgICBjb21wb25lbnRzLCBkaXJlY3RpdmVzLCBmaWx0ZXJzIH0gPSBvcHRpb25zO1xyXG4gICAgY29uc3QgY2hlY2tEdXBsaWNhdGVQcm9wZXJ0aWVzID0gKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpID8gY3JlYXRlRHVwbGljYXRlQ2hlY2tlcigpIDogbnVsbDtcclxuICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcclxuICAgICAgICBjb25zdCBbcHJvcHNPcHRpb25zXSA9IGluc3RhbmNlLnByb3BzT3B0aW9ucztcclxuICAgICAgICBpZiAocHJvcHNPcHRpb25zKSB7XHJcbiAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIHByb3BzT3B0aW9ucykge1xyXG4gICAgICAgICAgICAgICAgY2hlY2tEdXBsaWNhdGVQcm9wZXJ0aWVzKFwiUHJvcHNcIiAvKiBQUk9QUyAqLywga2V5KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8vIG9wdGlvbnMgaW5pdGlhbGl6YXRpb24gb3JkZXIgKHRvIGJlIGNvbnNpc3RlbnQgd2l0aCBWdWUgMik6XHJcbiAgICAvLyAtIHByb3BzIChhbHJlYWR5IGRvbmUgb3V0c2lkZSBvZiB0aGlzIGZ1bmN0aW9uKVxyXG4gICAgLy8gLSBpbmplY3RcclxuICAgIC8vIC0gbWV0aG9kc1xyXG4gICAgLy8gLSBkYXRhIChkZWZlcnJlZCBzaW5jZSBpdCByZWxpZXMgb24gYHRoaXNgIGFjY2VzcylcclxuICAgIC8vIC0gY29tcHV0ZWRcclxuICAgIC8vIC0gd2F0Y2ggKGRlZmVycmVkIHNpbmNlIGl0IHJlbGllcyBvbiBgdGhpc2AgYWNjZXNzKVxyXG4gICAgaWYgKGluamVjdE9wdGlvbnMpIHtcclxuICAgICAgICByZXNvbHZlSW5qZWN0aW9ucyhpbmplY3RPcHRpb25zLCBjdHgsIGNoZWNrRHVwbGljYXRlUHJvcGVydGllcywgaW5zdGFuY2UuYXBwQ29udGV4dC5jb25maWcudW53cmFwSW5qZWN0ZWRSZWYpO1xyXG4gICAgfVxyXG4gICAgaWYgKG1ldGhvZHMpIHtcclxuICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBtZXRob2RzKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG1ldGhvZEhhbmRsZXIgPSBtZXRob2RzW2tleV07XHJcbiAgICAgICAgICAgIGlmIChpc0Z1bmN0aW9uKG1ldGhvZEhhbmRsZXIpKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBJbiBkZXYgbW9kZSwgd2UgdXNlIHRoZSBgY3JlYXRlUmVuZGVyQ29udGV4dGAgZnVuY3Rpb24gdG8gZGVmaW5lXHJcbiAgICAgICAgICAgICAgICAvLyBtZXRob2RzIHRvIHRoZSBwcm94eSB0YXJnZXQsIGFuZCB0aG9zZSBhcmUgcmVhZC1vbmx5IGJ1dFxyXG4gICAgICAgICAgICAgICAgLy8gcmVjb25maWd1cmFibGUsIHNvIGl0IG5lZWRzIHRvIGJlIHJlZGVmaW5lZCBoZXJlXHJcbiAgICAgICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGN0eCwga2V5LCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBtZXRob2RIYW5kbGVyLmJpbmQocHVibGljVGhpcyksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgd3JpdGFibGU6IHRydWVcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGN0eFtrZXldID0gbWV0aG9kSGFuZGxlci5iaW5kKHB1YmxpY1RoaXMpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNoZWNrRHVwbGljYXRlUHJvcGVydGllcyhcIk1ldGhvZHNcIiAvKiBNRVRIT0RTICovLCBrZXkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xyXG4gICAgICAgICAgICAgICAgd2FybihgTWV0aG9kIFwiJHtrZXl9XCIgaGFzIHR5cGUgXCIke3R5cGVvZiBtZXRob2RIYW5kbGVyfVwiIGluIHRoZSBjb21wb25lbnQgZGVmaW5pdGlvbi4gYCArXHJcbiAgICAgICAgICAgICAgICAgICAgYERpZCB5b3UgcmVmZXJlbmNlIHRoZSBmdW5jdGlvbiBjb3JyZWN0bHk/YCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAoZGF0YU9wdGlvbnMpIHtcclxuICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmICFpc0Z1bmN0aW9uKGRhdGFPcHRpb25zKSkge1xyXG4gICAgICAgICAgICB3YXJuKGBUaGUgZGF0YSBvcHRpb24gbXVzdCBiZSBhIGZ1bmN0aW9uLiBgICtcclxuICAgICAgICAgICAgICAgIGBQbGFpbiBvYmplY3QgdXNhZ2UgaXMgbm8gbG9uZ2VyIHN1cHBvcnRlZC5gKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgZGF0YSA9IGRhdGFPcHRpb25zLmNhbGwocHVibGljVGhpcywgcHVibGljVGhpcyk7XHJcbiAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiBpc1Byb21pc2UoZGF0YSkpIHtcclxuICAgICAgICAgICAgd2FybihgZGF0YSgpIHJldHVybmVkIGEgUHJvbWlzZSAtIG5vdGUgZGF0YSgpIGNhbm5vdCBiZSBhc3luYzsgSWYgeW91IGAgK1xyXG4gICAgICAgICAgICAgICAgYGludGVuZCB0byBwZXJmb3JtIGRhdGEgZmV0Y2hpbmcgYmVmb3JlIGNvbXBvbmVudCByZW5kZXJzLCB1c2UgYCArXHJcbiAgICAgICAgICAgICAgICBgYXN5bmMgc2V0dXAoKSArIDxTdXNwZW5zZT4uYCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghaXNPYmplY3QoZGF0YSkpIHtcclxuICAgICAgICAgICAgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmIHdhcm4oYGRhdGEoKSBzaG91bGQgcmV0dXJuIGFuIG9iamVjdC5gKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGluc3RhbmNlLmRhdGEgPSByZWFjdGl2ZShkYXRhKTtcclxuICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xyXG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNoZWNrRHVwbGljYXRlUHJvcGVydGllcyhcIkRhdGFcIiAvKiBEQVRBICovLCBrZXkpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGV4cG9zZSBkYXRhIG9uIGN0eCBkdXJpbmcgZGV2XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGtleVswXSAhPT0gJyQnICYmIGtleVswXSAhPT0gJ18nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShjdHgsIGtleSwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdldDogKCkgPT4gZGF0YVtrZXldLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0OiBOT09QXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8vIHN0YXRlIGluaXRpYWxpemF0aW9uIGNvbXBsZXRlIGF0IHRoaXMgcG9pbnQgLSBzdGFydCBjYWNoaW5nIGFjY2Vzc1xyXG4gICAgc2hvdWxkQ2FjaGVBY2Nlc3MgPSB0cnVlO1xyXG4gICAgaWYgKGNvbXB1dGVkT3B0aW9ucykge1xyXG4gICAgICAgIGZvciAoY29uc3Qga2V5IGluIGNvbXB1dGVkT3B0aW9ucykge1xyXG4gICAgICAgICAgICBjb25zdCBvcHQgPSBjb21wdXRlZE9wdGlvbnNba2V5XTtcclxuICAgICAgICAgICAgY29uc3QgZ2V0ID0gaXNGdW5jdGlvbihvcHQpXHJcbiAgICAgICAgICAgICAgICA/IG9wdC5iaW5kKHB1YmxpY1RoaXMsIHB1YmxpY1RoaXMpXHJcbiAgICAgICAgICAgICAgICA6IGlzRnVuY3Rpb24ob3B0LmdldClcclxuICAgICAgICAgICAgICAgICAgICA/IG9wdC5nZXQuYmluZChwdWJsaWNUaGlzLCBwdWJsaWNUaGlzKVxyXG4gICAgICAgICAgICAgICAgICAgIDogTk9PUDtcclxuICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiBnZXQgPT09IE5PT1ApIHtcclxuICAgICAgICAgICAgICAgIHdhcm4oYENvbXB1dGVkIHByb3BlcnR5IFwiJHtrZXl9XCIgaGFzIG5vIGdldHRlci5gKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb25zdCBzZXQgPSAhaXNGdW5jdGlvbihvcHQpICYmIGlzRnVuY3Rpb24ob3B0LnNldClcclxuICAgICAgICAgICAgICAgID8gb3B0LnNldC5iaW5kKHB1YmxpY1RoaXMpXHJcbiAgICAgICAgICAgICAgICA6IChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKVxyXG4gICAgICAgICAgICAgICAgICAgID8gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB3YXJuKGBXcml0ZSBvcGVyYXRpb24gZmFpbGVkOiBjb21wdXRlZCBwcm9wZXJ0eSBcIiR7a2V5fVwiIGlzIHJlYWRvbmx5LmApO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICA6IE5PT1A7XHJcbiAgICAgICAgICAgIGNvbnN0IGMgPSBjb21wdXRlZCh7XHJcbiAgICAgICAgICAgICAgICBnZXQsXHJcbiAgICAgICAgICAgICAgICBzZXRcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShjdHgsIGtleSwge1xyXG4gICAgICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIGdldDogKCkgPT4gYy52YWx1ZSxcclxuICAgICAgICAgICAgICAgIHNldDogdiA9PiAoYy52YWx1ZSA9IHYpXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XHJcbiAgICAgICAgICAgICAgICBjaGVja0R1cGxpY2F0ZVByb3BlcnRpZXMoXCJDb21wdXRlZFwiIC8qIENPTVBVVEVEICovLCBrZXkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYgKHdhdGNoT3B0aW9ucykge1xyXG4gICAgICAgIGZvciAoY29uc3Qga2V5IGluIHdhdGNoT3B0aW9ucykge1xyXG4gICAgICAgICAgICBjcmVhdGVXYXRjaGVyKHdhdGNoT3B0aW9uc1trZXldLCBjdHgsIHB1YmxpY1RoaXMsIGtleSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYgKHByb3ZpZGVPcHRpb25zKSB7XHJcbiAgICAgICAgY29uc3QgcHJvdmlkZXMgPSBpc0Z1bmN0aW9uKHByb3ZpZGVPcHRpb25zKVxyXG4gICAgICAgICAgICA/IHByb3ZpZGVPcHRpb25zLmNhbGwocHVibGljVGhpcylcclxuICAgICAgICAgICAgOiBwcm92aWRlT3B0aW9ucztcclxuICAgICAgICBSZWZsZWN0Lm93bktleXMocHJvdmlkZXMpLmZvckVhY2goa2V5ID0+IHtcclxuICAgICAgICAgICAgcHJvdmlkZShrZXksIHByb3ZpZGVzW2tleV0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKGNyZWF0ZWQpIHtcclxuICAgICAgICBjYWxsSG9vayhjcmVhdGVkLCBpbnN0YW5jZSwgXCJjXCIgLyogQ1JFQVRFRCAqLyk7XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiByZWdpc3RlckxpZmVjeWNsZUhvb2socmVnaXN0ZXIsIGhvb2spIHtcclxuICAgICAgICBpZiAoaXNBcnJheShob29rKSkge1xyXG4gICAgICAgICAgICBob29rLmZvckVhY2goX2hvb2sgPT4gcmVnaXN0ZXIoX2hvb2suYmluZChwdWJsaWNUaGlzKSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChob29rKSB7XHJcbiAgICAgICAgICAgIHJlZ2lzdGVyKGhvb2suYmluZChwdWJsaWNUaGlzKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmVnaXN0ZXJMaWZlY3ljbGVIb29rKG9uQmVmb3JlTW91bnQsIGJlZm9yZU1vdW50KTtcclxuICAgIHJlZ2lzdGVyTGlmZWN5Y2xlSG9vayhvbk1vdW50ZWQsIG1vdW50ZWQpO1xyXG4gICAgcmVnaXN0ZXJMaWZlY3ljbGVIb29rKG9uQmVmb3JlVXBkYXRlLCBiZWZvcmVVcGRhdGUpO1xyXG4gICAgcmVnaXN0ZXJMaWZlY3ljbGVIb29rKG9uVXBkYXRlZCwgdXBkYXRlZCk7XHJcbiAgICByZWdpc3RlckxpZmVjeWNsZUhvb2sob25BY3RpdmF0ZWQsIGFjdGl2YXRlZCk7XHJcbiAgICByZWdpc3RlckxpZmVjeWNsZUhvb2sob25EZWFjdGl2YXRlZCwgZGVhY3RpdmF0ZWQpO1xyXG4gICAgcmVnaXN0ZXJMaWZlY3ljbGVIb29rKG9uRXJyb3JDYXB0dXJlZCwgZXJyb3JDYXB0dXJlZCk7XHJcbiAgICByZWdpc3RlckxpZmVjeWNsZUhvb2sob25SZW5kZXJUcmFja2VkLCByZW5kZXJUcmFja2VkKTtcclxuICAgIHJlZ2lzdGVyTGlmZWN5Y2xlSG9vayhvblJlbmRlclRyaWdnZXJlZCwgcmVuZGVyVHJpZ2dlcmVkKTtcclxuICAgIHJlZ2lzdGVyTGlmZWN5Y2xlSG9vayhvbkJlZm9yZVVubW91bnQsIGJlZm9yZVVubW91bnQpO1xyXG4gICAgcmVnaXN0ZXJMaWZlY3ljbGVIb29rKG9uVW5tb3VudGVkLCB1bm1vdW50ZWQpO1xyXG4gICAgcmVnaXN0ZXJMaWZlY3ljbGVIb29rKG9uU2VydmVyUHJlZmV0Y2gsIHNlcnZlclByZWZldGNoKTtcclxuICAgIGlmIChpc0FycmF5KGV4cG9zZSkpIHtcclxuICAgICAgICBpZiAoZXhwb3NlLmxlbmd0aCkge1xyXG4gICAgICAgICAgICBjb25zdCBleHBvc2VkID0gaW5zdGFuY2UuZXhwb3NlZCB8fCAoaW5zdGFuY2UuZXhwb3NlZCA9IHt9KTtcclxuICAgICAgICAgICAgZXhwb3NlLmZvckVhY2goa2V5ID0+IHtcclxuICAgICAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvc2VkLCBrZXksIHtcclxuICAgICAgICAgICAgICAgICAgICBnZXQ6ICgpID0+IHB1YmxpY1RoaXNba2V5XSxcclxuICAgICAgICAgICAgICAgICAgICBzZXQ6IHZhbCA9PiAocHVibGljVGhpc1trZXldID0gdmFsKVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICghaW5zdGFuY2UuZXhwb3NlZCkge1xyXG4gICAgICAgICAgICBpbnN0YW5jZS5leHBvc2VkID0ge307XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy8gb3B0aW9ucyB0aGF0IGFyZSBoYW5kbGVkIHdoZW4gY3JlYXRpbmcgdGhlIGluc3RhbmNlIGJ1dCBhbHNvIG5lZWQgdG8gYmVcclxuICAgIC8vIGFwcGxpZWQgZnJvbSBtaXhpbnNcclxuICAgIGlmIChyZW5kZXIgJiYgaW5zdGFuY2UucmVuZGVyID09PSBOT09QKSB7XHJcbiAgICAgICAgaW5zdGFuY2UucmVuZGVyID0gcmVuZGVyO1xyXG4gICAgfVxyXG4gICAgaWYgKGluaGVyaXRBdHRycyAhPSBudWxsKSB7XHJcbiAgICAgICAgaW5zdGFuY2UuaW5oZXJpdEF0dHJzID0gaW5oZXJpdEF0dHJzO1xyXG4gICAgfVxyXG4gICAgLy8gYXNzZXQgb3B0aW9ucy5cclxuICAgIGlmIChjb21wb25lbnRzKVxyXG4gICAgICAgIGluc3RhbmNlLmNvbXBvbmVudHMgPSBjb21wb25lbnRzO1xyXG4gICAgaWYgKGRpcmVjdGl2ZXMpXHJcbiAgICAgICAgaW5zdGFuY2UuZGlyZWN0aXZlcyA9IGRpcmVjdGl2ZXM7XHJcbn1cclxuZnVuY3Rpb24gcmVzb2x2ZUluamVjdGlvbnMoaW5qZWN0T3B0aW9ucywgY3R4LCBjaGVja0R1cGxpY2F0ZVByb3BlcnRpZXMgPSBOT09QLCB1bndyYXBSZWYgPSBmYWxzZSkge1xyXG4gICAgaWYgKGlzQXJyYXkoaW5qZWN0T3B0aW9ucykpIHtcclxuICAgICAgICBpbmplY3RPcHRpb25zID0gbm9ybWFsaXplSW5qZWN0KGluamVjdE9wdGlvbnMpO1xyXG4gICAgfVxyXG4gICAgZm9yIChjb25zdCBrZXkgaW4gaW5qZWN0T3B0aW9ucykge1xyXG4gICAgICAgIGNvbnN0IG9wdCA9IGluamVjdE9wdGlvbnNba2V5XTtcclxuICAgICAgICBsZXQgaW5qZWN0ZWQ7XHJcbiAgICAgICAgaWYgKGlzT2JqZWN0KG9wdCkpIHtcclxuICAgICAgICAgICAgaWYgKCdkZWZhdWx0JyBpbiBvcHQpIHtcclxuICAgICAgICAgICAgICAgIGluamVjdGVkID0gaW5qZWN0KG9wdC5mcm9tIHx8IGtleSwgb3B0LmRlZmF1bHQsIHRydWUgLyogdHJlYXQgZGVmYXVsdCBmdW5jdGlvbiBhcyBmYWN0b3J5ICovKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGluamVjdGVkID0gaW5qZWN0KG9wdC5mcm9tIHx8IGtleSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGluamVjdGVkID0gaW5qZWN0KG9wdCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChpc1JlZihpbmplY3RlZCkpIHtcclxuICAgICAgICAgICAgLy8gVE9ETyByZW1vdmUgdGhlIGNoZWNrIGluIDMuM1xyXG4gICAgICAgICAgICBpZiAodW53cmFwUmVmKSB7XHJcbiAgICAgICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoY3R4LCBrZXksIHtcclxuICAgICAgICAgICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICBnZXQ6ICgpID0+IGluamVjdGVkLnZhbHVlLFxyXG4gICAgICAgICAgICAgICAgICAgIHNldDogdiA9PiAoaW5qZWN0ZWQudmFsdWUgPSB2KVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgd2FybihgaW5qZWN0ZWQgcHJvcGVydHkgXCIke2tleX1cIiBpcyBhIHJlZiBhbmQgd2lsbCBiZSBhdXRvLXVud3JhcHBlZCBgICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYGFuZCBubyBsb25nZXIgbmVlZHMgXFxgLnZhbHVlXFxgIGluIHRoZSBuZXh0IG1pbm9yIHJlbGVhc2UuIGAgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBgVG8gb3B0LWluIHRvIHRoZSBuZXcgYmVoYXZpb3Igbm93LCBgICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYHNldCBcXGBhcHAuY29uZmlnLnVud3JhcEluamVjdGVkUmVmID0gdHJ1ZVxcYCAodGhpcyBjb25maWcgaXMgYCArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGB0ZW1wb3JhcnkgYW5kIHdpbGwgbm90IGJlIG5lZWRlZCBpbiB0aGUgZnV0dXJlLilgKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGN0eFtrZXldID0gaW5qZWN0ZWQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGN0eFtrZXldID0gaW5qZWN0ZWQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcclxuICAgICAgICAgICAgY2hlY2tEdXBsaWNhdGVQcm9wZXJ0aWVzKFwiSW5qZWN0XCIgLyogSU5KRUNUICovLCBrZXkpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBjYWxsSG9vayhob29rLCBpbnN0YW5jZSwgdHlwZSkge1xyXG4gICAgY2FsbFdpdGhBc3luY0Vycm9ySGFuZGxpbmcoaXNBcnJheShob29rKVxyXG4gICAgICAgID8gaG9vay5tYXAoaCA9PiBoLmJpbmQoaW5zdGFuY2UucHJveHkpKVxyXG4gICAgICAgIDogaG9vay5iaW5kKGluc3RhbmNlLnByb3h5KSwgaW5zdGFuY2UsIHR5cGUpO1xyXG59XHJcbmZ1bmN0aW9uIGNyZWF0ZVdhdGNoZXIocmF3LCBjdHgsIHB1YmxpY1RoaXMsIGtleSkge1xyXG4gICAgY29uc3QgZ2V0dGVyID0ga2V5LmluY2x1ZGVzKCcuJylcclxuICAgICAgICA/IGNyZWF0ZVBhdGhHZXR0ZXIocHVibGljVGhpcywga2V5KVxyXG4gICAgICAgIDogKCkgPT4gcHVibGljVGhpc1trZXldO1xyXG4gICAgaWYgKGlzU3RyaW5nKHJhdykpIHtcclxuICAgICAgICBjb25zdCBoYW5kbGVyID0gY3R4W3Jhd107XHJcbiAgICAgICAgaWYgKGlzRnVuY3Rpb24oaGFuZGxlcikpIHtcclxuICAgICAgICAgICAgd2F0Y2goZ2V0dGVyLCBoYW5kbGVyKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XHJcbiAgICAgICAgICAgIHdhcm4oYEludmFsaWQgd2F0Y2ggaGFuZGxlciBzcGVjaWZpZWQgYnkga2V5IFwiJHtyYXd9XCJgLCBoYW5kbGVyKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChpc0Z1bmN0aW9uKHJhdykpIHtcclxuICAgICAgICB3YXRjaChnZXR0ZXIsIHJhdy5iaW5kKHB1YmxpY1RoaXMpKTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKGlzT2JqZWN0KHJhdykpIHtcclxuICAgICAgICBpZiAoaXNBcnJheShyYXcpKSB7XHJcbiAgICAgICAgICAgIHJhdy5mb3JFYWNoKHIgPT4gY3JlYXRlV2F0Y2hlcihyLCBjdHgsIHB1YmxpY1RoaXMsIGtleSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgY29uc3QgaGFuZGxlciA9IGlzRnVuY3Rpb24ocmF3LmhhbmRsZXIpXHJcbiAgICAgICAgICAgICAgICA/IHJhdy5oYW5kbGVyLmJpbmQocHVibGljVGhpcylcclxuICAgICAgICAgICAgICAgIDogY3R4W3Jhdy5oYW5kbGVyXTtcclxuICAgICAgICAgICAgaWYgKGlzRnVuY3Rpb24oaGFuZGxlcikpIHtcclxuICAgICAgICAgICAgICAgIHdhdGNoKGdldHRlciwgaGFuZGxlciwgcmF3KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcclxuICAgICAgICAgICAgICAgIHdhcm4oYEludmFsaWQgd2F0Y2ggaGFuZGxlciBzcGVjaWZpZWQgYnkga2V5IFwiJHtyYXcuaGFuZGxlcn1cImAsIGhhbmRsZXIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XHJcbiAgICAgICAgd2FybihgSW52YWxpZCB3YXRjaCBvcHRpb246IFwiJHtrZXl9XCJgLCByYXcpO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBSZXNvbHZlIG1lcmdlZCBvcHRpb25zIGFuZCBjYWNoZSBpdCBvbiB0aGUgY29tcG9uZW50LlxyXG4gKiBUaGlzIGlzIGRvbmUgb25seSBvbmNlIHBlci1jb21wb25lbnQgc2luY2UgdGhlIG1lcmdpbmcgZG9lcyBub3QgaW52b2x2ZVxyXG4gKiBpbnN0YW5jZXMuXHJcbiAqL1xyXG5mdW5jdGlvbiByZXNvbHZlTWVyZ2VkT3B0aW9ucyhpbnN0YW5jZSkge1xyXG4gICAgY29uc3QgYmFzZSA9IGluc3RhbmNlLnR5cGU7XHJcbiAgICBjb25zdCB7IG1peGlucywgZXh0ZW5kczogZXh0ZW5kc09wdGlvbnMgfSA9IGJhc2U7XHJcbiAgICBjb25zdCB7IG1peGluczogZ2xvYmFsTWl4aW5zLCBvcHRpb25zQ2FjaGU6IGNhY2hlLCBjb25maWc6IHsgb3B0aW9uTWVyZ2VTdHJhdGVnaWVzIH0gfSA9IGluc3RhbmNlLmFwcENvbnRleHQ7XHJcbiAgICBjb25zdCBjYWNoZWQgPSBjYWNoZS5nZXQoYmFzZSk7XHJcbiAgICBsZXQgcmVzb2x2ZWQ7XHJcbiAgICBpZiAoY2FjaGVkKSB7XHJcbiAgICAgICAgcmVzb2x2ZWQgPSBjYWNoZWQ7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmICghZ2xvYmFsTWl4aW5zLmxlbmd0aCAmJiAhbWl4aW5zICYmICFleHRlbmRzT3B0aW9ucykge1xyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmVzb2x2ZWQgPSBiYXNlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIHJlc29sdmVkID0ge307XHJcbiAgICAgICAgaWYgKGdsb2JhbE1peGlucy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgZ2xvYmFsTWl4aW5zLmZvckVhY2gobSA9PiBtZXJnZU9wdGlvbnMocmVzb2x2ZWQsIG0sIG9wdGlvbk1lcmdlU3RyYXRlZ2llcywgdHJ1ZSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBtZXJnZU9wdGlvbnMocmVzb2x2ZWQsIGJhc2UsIG9wdGlvbk1lcmdlU3RyYXRlZ2llcyk7XHJcbiAgICB9XHJcbiAgICBjYWNoZS5zZXQoYmFzZSwgcmVzb2x2ZWQpO1xyXG4gICAgcmV0dXJuIHJlc29sdmVkO1xyXG59XHJcbmZ1bmN0aW9uIG1lcmdlT3B0aW9ucyh0bywgZnJvbSwgc3RyYXRzLCBhc01peGluID0gZmFsc2UpIHtcclxuICAgIGNvbnN0IHsgbWl4aW5zLCBleHRlbmRzOiBleHRlbmRzT3B0aW9ucyB9ID0gZnJvbTtcclxuICAgIGlmIChleHRlbmRzT3B0aW9ucykge1xyXG4gICAgICAgIG1lcmdlT3B0aW9ucyh0bywgZXh0ZW5kc09wdGlvbnMsIHN0cmF0cywgdHJ1ZSk7XHJcbiAgICB9XHJcbiAgICBpZiAobWl4aW5zKSB7XHJcbiAgICAgICAgbWl4aW5zLmZvckVhY2goKG0pID0+IG1lcmdlT3B0aW9ucyh0bywgbSwgc3RyYXRzLCB0cnVlKSk7XHJcbiAgICB9XHJcbiAgICBmb3IgKGNvbnN0IGtleSBpbiBmcm9tKSB7XHJcbiAgICAgICAgaWYgKGFzTWl4aW4gJiYga2V5ID09PSAnZXhwb3NlJykge1xyXG4gICAgICAgICAgICAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiZcclxuICAgICAgICAgICAgICAgIHdhcm4oYFwiZXhwb3NlXCIgb3B0aW9uIGlzIGlnbm9yZWQgd2hlbiBkZWNsYXJlZCBpbiBtaXhpbnMgb3IgZXh0ZW5kcy4gYCArXHJcbiAgICAgICAgICAgICAgICAgICAgYEl0IHNob3VsZCBvbmx5IGJlIGRlY2xhcmVkIGluIHRoZSBiYXNlIGNvbXBvbmVudCBpdHNlbGYuYCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zdCBzdHJhdCA9IGludGVybmFsT3B0aW9uTWVyZ2VTdHJhdHNba2V5XSB8fCAoc3RyYXRzICYmIHN0cmF0c1trZXldKTtcclxuICAgICAgICAgICAgdG9ba2V5XSA9IHN0cmF0ID8gc3RyYXQodG9ba2V5XSwgZnJvbVtrZXldKSA6IGZyb21ba2V5XTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdG87XHJcbn1cclxuY29uc3QgaW50ZXJuYWxPcHRpb25NZXJnZVN0cmF0cyA9IHtcclxuICAgIGRhdGE6IG1lcmdlRGF0YUZuLFxyXG4gICAgcHJvcHM6IG1lcmdlT2JqZWN0T3B0aW9ucyxcclxuICAgIGVtaXRzOiBtZXJnZU9iamVjdE9wdGlvbnMsXHJcbiAgICAvLyBvYmplY3RzXHJcbiAgICBtZXRob2RzOiBtZXJnZU9iamVjdE9wdGlvbnMsXHJcbiAgICBjb21wdXRlZDogbWVyZ2VPYmplY3RPcHRpb25zLFxyXG4gICAgLy8gbGlmZWN5Y2xlXHJcbiAgICBiZWZvcmVDcmVhdGU6IG1lcmdlQXNBcnJheSxcclxuICAgIGNyZWF0ZWQ6IG1lcmdlQXNBcnJheSxcclxuICAgIGJlZm9yZU1vdW50OiBtZXJnZUFzQXJyYXksXHJcbiAgICBtb3VudGVkOiBtZXJnZUFzQXJyYXksXHJcbiAgICBiZWZvcmVVcGRhdGU6IG1lcmdlQXNBcnJheSxcclxuICAgIHVwZGF0ZWQ6IG1lcmdlQXNBcnJheSxcclxuICAgIGJlZm9yZURlc3Ryb3k6IG1lcmdlQXNBcnJheSxcclxuICAgIGJlZm9yZVVubW91bnQ6IG1lcmdlQXNBcnJheSxcclxuICAgIGRlc3Ryb3llZDogbWVyZ2VBc0FycmF5LFxyXG4gICAgdW5tb3VudGVkOiBtZXJnZUFzQXJyYXksXHJcbiAgICBhY3RpdmF0ZWQ6IG1lcmdlQXNBcnJheSxcclxuICAgIGRlYWN0aXZhdGVkOiBtZXJnZUFzQXJyYXksXHJcbiAgICBlcnJvckNhcHR1cmVkOiBtZXJnZUFzQXJyYXksXHJcbiAgICBzZXJ2ZXJQcmVmZXRjaDogbWVyZ2VBc0FycmF5LFxyXG4gICAgLy8gYXNzZXRzXHJcbiAgICBjb21wb25lbnRzOiBtZXJnZU9iamVjdE9wdGlvbnMsXHJcbiAgICBkaXJlY3RpdmVzOiBtZXJnZU9iamVjdE9wdGlvbnMsXHJcbiAgICAvLyB3YXRjaFxyXG4gICAgd2F0Y2g6IG1lcmdlV2F0Y2hPcHRpb25zLFxyXG4gICAgLy8gcHJvdmlkZSAvIGluamVjdFxyXG4gICAgcHJvdmlkZTogbWVyZ2VEYXRhRm4sXHJcbiAgICBpbmplY3Q6IG1lcmdlSW5qZWN0XHJcbn07XHJcbmZ1bmN0aW9uIG1lcmdlRGF0YUZuKHRvLCBmcm9tKSB7XHJcbiAgICBpZiAoIWZyb20pIHtcclxuICAgICAgICByZXR1cm4gdG87XHJcbiAgICB9XHJcbiAgICBpZiAoIXRvKSB7XHJcbiAgICAgICAgcmV0dXJuIGZyb207XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gbWVyZ2VkRGF0YUZuKCkge1xyXG4gICAgICAgIHJldHVybiAoZXh0ZW5kKShpc0Z1bmN0aW9uKHRvKSA/IHRvLmNhbGwodGhpcywgdGhpcykgOiB0bywgaXNGdW5jdGlvbihmcm9tKSA/IGZyb20uY2FsbCh0aGlzLCB0aGlzKSA6IGZyb20pO1xyXG4gICAgfTtcclxufVxyXG5mdW5jdGlvbiBtZXJnZUluamVjdCh0bywgZnJvbSkge1xyXG4gICAgcmV0dXJuIG1lcmdlT2JqZWN0T3B0aW9ucyhub3JtYWxpemVJbmplY3QodG8pLCBub3JtYWxpemVJbmplY3QoZnJvbSkpO1xyXG59XHJcbmZ1bmN0aW9uIG5vcm1hbGl6ZUluamVjdChyYXcpIHtcclxuICAgIGlmIChpc0FycmF5KHJhdykpIHtcclxuICAgICAgICBjb25zdCByZXMgPSB7fTtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJhdy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICByZXNbcmF3W2ldXSA9IHJhd1tpXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJlcztcclxuICAgIH1cclxuICAgIHJldHVybiByYXc7XHJcbn1cclxuZnVuY3Rpb24gbWVyZ2VBc0FycmF5KHRvLCBmcm9tKSB7XHJcbiAgICByZXR1cm4gdG8gPyBbLi4ubmV3IFNldChbXS5jb25jYXQodG8sIGZyb20pKV0gOiBmcm9tO1xyXG59XHJcbmZ1bmN0aW9uIG1lcmdlT2JqZWN0T3B0aW9ucyh0bywgZnJvbSkge1xyXG4gICAgcmV0dXJuIHRvID8gZXh0ZW5kKGV4dGVuZChPYmplY3QuY3JlYXRlKG51bGwpLCB0byksIGZyb20pIDogZnJvbTtcclxufVxyXG5mdW5jdGlvbiBtZXJnZVdhdGNoT3B0aW9ucyh0bywgZnJvbSkge1xyXG4gICAgaWYgKCF0bylcclxuICAgICAgICByZXR1cm4gZnJvbTtcclxuICAgIGlmICghZnJvbSlcclxuICAgICAgICByZXR1cm4gdG87XHJcbiAgICBjb25zdCBtZXJnZWQgPSBleHRlbmQoT2JqZWN0LmNyZWF0ZShudWxsKSwgdG8pO1xyXG4gICAgZm9yIChjb25zdCBrZXkgaW4gZnJvbSkge1xyXG4gICAgICAgIG1lcmdlZFtrZXldID0gbWVyZ2VBc0FycmF5KHRvW2tleV0sIGZyb21ba2V5XSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbWVyZ2VkO1xyXG59XG5cbmZ1bmN0aW9uIGluaXRQcm9wcyhpbnN0YW5jZSwgcmF3UHJvcHMsIGlzU3RhdGVmdWwsIC8vIHJlc3VsdCBvZiBiaXR3aXNlIGZsYWcgY29tcGFyaXNvblxyXG5pc1NTUiA9IGZhbHNlKSB7XHJcbiAgICBjb25zdCBwcm9wcyA9IHt9O1xyXG4gICAgY29uc3QgYXR0cnMgPSB7fTtcclxuICAgIGRlZihhdHRycywgSW50ZXJuYWxPYmplY3RLZXksIDEpO1xyXG4gICAgaW5zdGFuY2UucHJvcHNEZWZhdWx0cyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XHJcbiAgICBzZXRGdWxsUHJvcHMoaW5zdGFuY2UsIHJhd1Byb3BzLCBwcm9wcywgYXR0cnMpO1xyXG4gICAgLy8gZW5zdXJlIGFsbCBkZWNsYXJlZCBwcm9wIGtleXMgYXJlIHByZXNlbnRcclxuICAgIGZvciAoY29uc3Qga2V5IGluIGluc3RhbmNlLnByb3BzT3B0aW9uc1swXSkge1xyXG4gICAgICAgIGlmICghKGtleSBpbiBwcm9wcykpIHtcclxuICAgICAgICAgICAgcHJvcHNba2V5XSA9IHVuZGVmaW5lZDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvLyB2YWxpZGF0aW9uXHJcbiAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XHJcbiAgICAgICAgdmFsaWRhdGVQcm9wcyhyYXdQcm9wcyB8fCB7fSwgcHJvcHMsIGluc3RhbmNlKTtcclxuICAgIH1cclxuICAgIGlmIChpc1N0YXRlZnVsKSB7XHJcbiAgICAgICAgLy8gc3RhdGVmdWxcclxuICAgICAgICBpbnN0YW5jZS5wcm9wcyA9IGlzU1NSID8gcHJvcHMgOiBzaGFsbG93UmVhY3RpdmUocHJvcHMpO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgaWYgKCFpbnN0YW5jZS50eXBlLnByb3BzKSB7XHJcbiAgICAgICAgICAgIC8vIGZ1bmN0aW9uYWwgdy8gb3B0aW9uYWwgcHJvcHMsIHByb3BzID09PSBhdHRyc1xyXG4gICAgICAgICAgICBpbnN0YW5jZS5wcm9wcyA9IGF0dHJzO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgLy8gZnVuY3Rpb25hbCB3LyBkZWNsYXJlZCBwcm9wc1xyXG4gICAgICAgICAgICBpbnN0YW5jZS5wcm9wcyA9IHByb3BzO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGluc3RhbmNlLmF0dHJzID0gYXR0cnM7XHJcbn1cclxuZnVuY3Rpb24gdXBkYXRlUHJvcHMoaW5zdGFuY2UsIHJhd1Byb3BzLCByYXdQcmV2UHJvcHMsIG9wdGltaXplZCkge1xyXG4gICAgY29uc3QgeyBwcm9wcywgYXR0cnMsIHZub2RlOiB7IHBhdGNoRmxhZyB9IH0gPSBpbnN0YW5jZTtcclxuICAgIGNvbnN0IHJhd0N1cnJlbnRQcm9wcyA9IHRvUmF3KHByb3BzKTtcclxuICAgIGNvbnN0IFtvcHRpb25zXSA9IGluc3RhbmNlLnByb3BzT3B0aW9ucztcclxuICAgIGxldCBoYXNBdHRyc0NoYW5nZWQgPSBmYWxzZTtcclxuICAgIGlmIChcclxuICAgIC8vIGFsd2F5cyBmb3JjZSBmdWxsIGRpZmYgaW4gZGV2XHJcbiAgICAvLyAtICMxOTQyIGlmIGhtciBpcyBlbmFibGVkIHdpdGggc2ZjIGNvbXBvbmVudFxyXG4gICAgLy8gLSB2aXRlIzg3MiBub24tc2ZjIGNvbXBvbmVudCB1c2VkIGJ5IHNmYyBjb21wb25lbnRcclxuICAgICEoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmXHJcbiAgICAgICAgKGluc3RhbmNlLnR5cGUuX19obXJJZCB8fFxyXG4gICAgICAgICAgICAoaW5zdGFuY2UucGFyZW50ICYmIGluc3RhbmNlLnBhcmVudC50eXBlLl9faG1ySWQpKSkgJiZcclxuICAgICAgICAob3B0aW1pemVkIHx8IHBhdGNoRmxhZyA+IDApICYmXHJcbiAgICAgICAgIShwYXRjaEZsYWcgJiAxNiAvKiBGVUxMX1BST1BTICovKSkge1xyXG4gICAgICAgIGlmIChwYXRjaEZsYWcgJiA4IC8qIFBST1BTICovKSB7XHJcbiAgICAgICAgICAgIC8vIENvbXBpbGVyLWdlbmVyYXRlZCBwcm9wcyAmIG5vIGtleXMgY2hhbmdlLCBqdXN0IHNldCB0aGUgdXBkYXRlZFxyXG4gICAgICAgICAgICAvLyB0aGUgcHJvcHMuXHJcbiAgICAgICAgICAgIGNvbnN0IHByb3BzVG9VcGRhdGUgPSBpbnN0YW5jZS52bm9kZS5keW5hbWljUHJvcHM7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcHJvcHNUb1VwZGF0ZS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgbGV0IGtleSA9IHByb3BzVG9VcGRhdGVbaV07XHJcbiAgICAgICAgICAgICAgICAvLyBza2lwIGlmIHRoZSBwcm9wIGtleSBpcyBhIGRlY2xhcmVkIGVtaXQgZXZlbnQgbGlzdGVuZXJcclxuICAgICAgICAgICAgICAgIGlmIChpc0VtaXRMaXN0ZW5lcihpbnN0YW5jZS5lbWl0c09wdGlvbnMsIGtleSkpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIFBST1BTIGZsYWcgZ3VhcmFudGVlcyByYXdQcm9wcyB0byBiZSBub24tbnVsbFxyXG4gICAgICAgICAgICAgICAgY29uc3QgdmFsdWUgPSByYXdQcm9wc1trZXldO1xyXG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBhdHRyIC8gcHJvcHMgc2VwYXJhdGlvbiB3YXMgZG9uZSBvbiBpbml0IGFuZCB3aWxsIGJlIGNvbnNpc3RlbnRcclxuICAgICAgICAgICAgICAgICAgICAvLyBpbiB0aGlzIGNvZGUgcGF0aCwgc28ganVzdCBjaGVjayBpZiBhdHRycyBoYXZlIGl0LlxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChoYXNPd24oYXR0cnMsIGtleSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlICE9PSBhdHRyc1trZXldKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHRyc1trZXldID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYXNBdHRyc0NoYW5nZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjYW1lbGl6ZWRLZXkgPSBjYW1lbGl6ZShrZXkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9wc1tjYW1lbGl6ZWRLZXldID0gcmVzb2x2ZVByb3BWYWx1ZShvcHRpb25zLCByYXdDdXJyZW50UHJvcHMsIGNhbWVsaXplZEtleSwgdmFsdWUsIGluc3RhbmNlLCBmYWxzZSAvKiBpc0Fic2VudCAqLyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlICE9PSBhdHRyc1trZXldKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJzW2tleV0gPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaGFzQXR0cnNDaGFuZ2VkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICAvLyBmdWxsIHByb3BzIHVwZGF0ZS5cclxuICAgICAgICBpZiAoc2V0RnVsbFByb3BzKGluc3RhbmNlLCByYXdQcm9wcywgcHJvcHMsIGF0dHJzKSkge1xyXG4gICAgICAgICAgICBoYXNBdHRyc0NoYW5nZWQgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBpbiBjYXNlIG9mIGR5bmFtaWMgcHJvcHMsIGNoZWNrIGlmIHdlIG5lZWQgdG8gZGVsZXRlIGtleXMgZnJvbVxyXG4gICAgICAgIC8vIHRoZSBwcm9wcyBvYmplY3RcclxuICAgICAgICBsZXQga2ViYWJLZXk7XHJcbiAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gcmF3Q3VycmVudFByb3BzKSB7XHJcbiAgICAgICAgICAgIGlmICghcmF3UHJvcHMgfHxcclxuICAgICAgICAgICAgICAgIC8vIGZvciBjYW1lbENhc2VcclxuICAgICAgICAgICAgICAgICghaGFzT3duKHJhd1Byb3BzLCBrZXkpICYmXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gaXQncyBwb3NzaWJsZSB0aGUgb3JpZ2luYWwgcHJvcHMgd2FzIHBhc3NlZCBpbiBhcyBrZWJhYi1jYXNlXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gYW5kIGNvbnZlcnRlZCB0byBjYW1lbENhc2UgKCM5NTUpXHJcbiAgICAgICAgICAgICAgICAgICAgKChrZWJhYktleSA9IGh5cGhlbmF0ZShrZXkpKSA9PT0ga2V5IHx8ICFoYXNPd24ocmF3UHJvcHMsIGtlYmFiS2V5KSkpKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChyYXdQcmV2UHJvcHMgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZm9yIGNhbWVsQ2FzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAocmF3UHJldlByb3BzW2tleV0gIT09IHVuZGVmaW5lZCB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZm9yIGtlYmFiLWNhc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJhd1ByZXZQcm9wc1trZWJhYktleV0gIT09IHVuZGVmaW5lZCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvcHNba2V5XSA9IHJlc29sdmVQcm9wVmFsdWUob3B0aW9ucywgcmF3Q3VycmVudFByb3BzLCBrZXksIHVuZGVmaW5lZCwgaW5zdGFuY2UsIHRydWUgLyogaXNBYnNlbnQgKi8pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBwcm9wc1trZXldO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGluIHRoZSBjYXNlIG9mIGZ1bmN0aW9uYWwgY29tcG9uZW50IHcvbyBwcm9wcyBkZWNsYXJhdGlvbiwgcHJvcHMgYW5kXHJcbiAgICAgICAgLy8gYXR0cnMgcG9pbnQgdG8gdGhlIHNhbWUgb2JqZWN0IHNvIGl0IHNob3VsZCBhbHJlYWR5IGhhdmUgYmVlbiB1cGRhdGVkLlxyXG4gICAgICAgIGlmIChhdHRycyAhPT0gcmF3Q3VycmVudFByb3BzKSB7XHJcbiAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIGF0dHJzKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXJhd1Byb3BzIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgKCFoYXNPd24ocmF3UHJvcHMsIGtleSkgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgKCFmYWxzZSApKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBhdHRyc1trZXldO1xyXG4gICAgICAgICAgICAgICAgICAgIGhhc0F0dHJzQ2hhbmdlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvLyB0cmlnZ2VyIHVwZGF0ZXMgZm9yICRhdHRycyBpbiBjYXNlIGl0J3MgdXNlZCBpbiBjb21wb25lbnQgc2xvdHNcclxuICAgIGlmIChoYXNBdHRyc0NoYW5nZWQpIHtcclxuICAgICAgICB0cmlnZ2VyKGluc3RhbmNlLCBcInNldFwiIC8qIFNFVCAqLywgJyRhdHRycycpO1xyXG4gICAgfVxyXG4gICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xyXG4gICAgICAgIHZhbGlkYXRlUHJvcHMocmF3UHJvcHMgfHwge30sIHByb3BzLCBpbnN0YW5jZSk7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gc2V0RnVsbFByb3BzKGluc3RhbmNlLCByYXdQcm9wcywgcHJvcHMsIGF0dHJzKSB7XHJcbiAgICBjb25zdCBbb3B0aW9ucywgbmVlZENhc3RLZXlzXSA9IGluc3RhbmNlLnByb3BzT3B0aW9ucztcclxuICAgIGxldCBoYXNBdHRyc0NoYW5nZWQgPSBmYWxzZTtcclxuICAgIGxldCByYXdDYXN0VmFsdWVzO1xyXG4gICAgaWYgKHJhd1Byb3BzKSB7XHJcbiAgICAgICAgZm9yIChsZXQga2V5IGluIHJhd1Byb3BzKSB7XHJcbiAgICAgICAgICAgIC8vIGtleSwgcmVmIGFyZSByZXNlcnZlZCBhbmQgbmV2ZXIgcGFzc2VkIGRvd25cclxuICAgICAgICAgICAgaWYgKGlzUmVzZXJ2ZWRQcm9wKGtleSkpIHtcclxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gcmF3UHJvcHNba2V5XTtcclxuICAgICAgICAgICAgLy8gcHJvcCBvcHRpb24gbmFtZXMgYXJlIGNhbWVsaXplZCBkdXJpbmcgbm9ybWFsaXphdGlvbiwgc28gdG8gc3VwcG9ydFxyXG4gICAgICAgICAgICAvLyBrZWJhYiAtPiBjYW1lbCBjb252ZXJzaW9uIGhlcmUgd2UgbmVlZCB0byBjYW1lbGl6ZSB0aGUga2V5LlxyXG4gICAgICAgICAgICBsZXQgY2FtZWxLZXk7XHJcbiAgICAgICAgICAgIGlmIChvcHRpb25zICYmIGhhc093bihvcHRpb25zLCAoY2FtZWxLZXkgPSBjYW1lbGl6ZShrZXkpKSkpIHtcclxuICAgICAgICAgICAgICAgIGlmICghbmVlZENhc3RLZXlzIHx8ICFuZWVkQ2FzdEtleXMuaW5jbHVkZXMoY2FtZWxLZXkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcHJvcHNbY2FtZWxLZXldID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAocmF3Q2FzdFZhbHVlcyB8fCAocmF3Q2FzdFZhbHVlcyA9IHt9KSlbY2FtZWxLZXldID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoIWlzRW1pdExpc3RlbmVyKGluc3RhbmNlLmVtaXRzT3B0aW9ucywga2V5KSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCEoa2V5IGluIGF0dHJzKSB8fCB2YWx1ZSAhPT0gYXR0cnNba2V5XSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGF0dHJzW2tleV0gPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICBoYXNBdHRyc0NoYW5nZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYgKG5lZWRDYXN0S2V5cykge1xyXG4gICAgICAgIGNvbnN0IHJhd0N1cnJlbnRQcm9wcyA9IHRvUmF3KHByb3BzKTtcclxuICAgICAgICBjb25zdCBjYXN0VmFsdWVzID0gcmF3Q2FzdFZhbHVlcyB8fCBFTVBUWV9PQko7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBuZWVkQ2FzdEtleXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgY29uc3Qga2V5ID0gbmVlZENhc3RLZXlzW2ldO1xyXG4gICAgICAgICAgICBwcm9wc1trZXldID0gcmVzb2x2ZVByb3BWYWx1ZShvcHRpb25zLCByYXdDdXJyZW50UHJvcHMsIGtleSwgY2FzdFZhbHVlc1trZXldLCBpbnN0YW5jZSwgIWhhc093bihjYXN0VmFsdWVzLCBrZXkpKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gaGFzQXR0cnNDaGFuZ2VkO1xyXG59XHJcbmZ1bmN0aW9uIHJlc29sdmVQcm9wVmFsdWUob3B0aW9ucywgcHJvcHMsIGtleSwgdmFsdWUsIGluc3RhbmNlLCBpc0Fic2VudCkge1xyXG4gICAgY29uc3Qgb3B0ID0gb3B0aW9uc1trZXldO1xyXG4gICAgaWYgKG9wdCAhPSBudWxsKSB7XHJcbiAgICAgICAgY29uc3QgaGFzRGVmYXVsdCA9IGhhc093bihvcHQsICdkZWZhdWx0Jyk7XHJcbiAgICAgICAgLy8gZGVmYXVsdCB2YWx1ZXNcclxuICAgICAgICBpZiAoaGFzRGVmYXVsdCAmJiB2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGRlZmF1bHRWYWx1ZSA9IG9wdC5kZWZhdWx0O1xyXG4gICAgICAgICAgICBpZiAob3B0LnR5cGUgIT09IEZ1bmN0aW9uICYmIGlzRnVuY3Rpb24oZGVmYXVsdFZhbHVlKSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgeyBwcm9wc0RlZmF1bHRzIH0gPSBpbnN0YW5jZTtcclxuICAgICAgICAgICAgICAgIGlmIChrZXkgaW4gcHJvcHNEZWZhdWx0cykge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlID0gcHJvcHNEZWZhdWx0c1trZXldO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2V0Q3VycmVudEluc3RhbmNlKGluc3RhbmNlKTtcclxuICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IHByb3BzRGVmYXVsdHNba2V5XSA9IGRlZmF1bHRWYWx1ZS5jYWxsKG51bGwsIHByb3BzKTtcclxuICAgICAgICAgICAgICAgICAgICB1bnNldEN1cnJlbnRJbnN0YW5jZSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdmFsdWUgPSBkZWZhdWx0VmFsdWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gYm9vbGVhbiBjYXN0aW5nXHJcbiAgICAgICAgaWYgKG9wdFswIC8qIHNob3VsZENhc3QgKi9dKSB7XHJcbiAgICAgICAgICAgIGlmIChpc0Fic2VudCAmJiAhaGFzRGVmYXVsdCkge1xyXG4gICAgICAgICAgICAgICAgdmFsdWUgPSBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChvcHRbMSAvKiBzaG91bGRDYXN0VHJ1ZSAqL10gJiZcclxuICAgICAgICAgICAgICAgICh2YWx1ZSA9PT0gJycgfHwgdmFsdWUgPT09IGh5cGhlbmF0ZShrZXkpKSkge1xyXG4gICAgICAgICAgICAgICAgdmFsdWUgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHZhbHVlO1xyXG59XHJcbmZ1bmN0aW9uIG5vcm1hbGl6ZVByb3BzT3B0aW9ucyhjb21wLCBhcHBDb250ZXh0LCBhc01peGluID0gZmFsc2UpIHtcclxuICAgIGNvbnN0IGNhY2hlID0gYXBwQ29udGV4dC5wcm9wc0NhY2hlO1xyXG4gICAgY29uc3QgY2FjaGVkID0gY2FjaGUuZ2V0KGNvbXApO1xyXG4gICAgaWYgKGNhY2hlZCkge1xyXG4gICAgICAgIHJldHVybiBjYWNoZWQ7XHJcbiAgICB9XHJcbiAgICBjb25zdCByYXcgPSBjb21wLnByb3BzO1xyXG4gICAgY29uc3Qgbm9ybWFsaXplZCA9IHt9O1xyXG4gICAgY29uc3QgbmVlZENhc3RLZXlzID0gW107XHJcbiAgICAvLyBhcHBseSBtaXhpbi9leHRlbmRzIHByb3BzXHJcbiAgICBsZXQgaGFzRXh0ZW5kcyA9IGZhbHNlO1xyXG4gICAgaWYgKF9fVlVFX09QVElPTlNfQVBJX18gJiYgIWlzRnVuY3Rpb24oY29tcCkpIHtcclxuICAgICAgICBjb25zdCBleHRlbmRQcm9wcyA9IChyYXcpID0+IHtcclxuICAgICAgICAgICAgaGFzRXh0ZW5kcyA9IHRydWU7XHJcbiAgICAgICAgICAgIGNvbnN0IFtwcm9wcywga2V5c10gPSBub3JtYWxpemVQcm9wc09wdGlvbnMocmF3LCBhcHBDb250ZXh0LCB0cnVlKTtcclxuICAgICAgICAgICAgZXh0ZW5kKG5vcm1hbGl6ZWQsIHByb3BzKTtcclxuICAgICAgICAgICAgaWYgKGtleXMpXHJcbiAgICAgICAgICAgICAgICBuZWVkQ2FzdEtleXMucHVzaCguLi5rZXlzKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIGlmICghYXNNaXhpbiAmJiBhcHBDb250ZXh0Lm1peGlucy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgYXBwQ29udGV4dC5taXhpbnMuZm9yRWFjaChleHRlbmRQcm9wcyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChjb21wLmV4dGVuZHMpIHtcclxuICAgICAgICAgICAgZXh0ZW5kUHJvcHMoY29tcC5leHRlbmRzKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGNvbXAubWl4aW5zKSB7XHJcbiAgICAgICAgICAgIGNvbXAubWl4aW5zLmZvckVhY2goZXh0ZW5kUHJvcHMpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGlmICghcmF3ICYmICFoYXNFeHRlbmRzKSB7XHJcbiAgICAgICAgY2FjaGUuc2V0KGNvbXAsIEVNUFRZX0FSUik7XHJcbiAgICAgICAgcmV0dXJuIEVNUFRZX0FSUjtcclxuICAgIH1cclxuICAgIGlmIChpc0FycmF5KHJhdykpIHtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJhdy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmICFpc1N0cmluZyhyYXdbaV0pKSB7XHJcbiAgICAgICAgICAgICAgICB3YXJuKGBwcm9wcyBtdXN0IGJlIHN0cmluZ3Mgd2hlbiB1c2luZyBhcnJheSBzeW50YXguYCwgcmF3W2ldKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb25zdCBub3JtYWxpemVkS2V5ID0gY2FtZWxpemUocmF3W2ldKTtcclxuICAgICAgICAgICAgaWYgKHZhbGlkYXRlUHJvcE5hbWUobm9ybWFsaXplZEtleSkpIHtcclxuICAgICAgICAgICAgICAgIG5vcm1hbGl6ZWRbbm9ybWFsaXplZEtleV0gPSBFTVBUWV9PQko7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChyYXcpIHtcclxuICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmICFpc09iamVjdChyYXcpKSB7XHJcbiAgICAgICAgICAgIHdhcm4oYGludmFsaWQgcHJvcHMgb3B0aW9uc2AsIHJhdyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZvciAoY29uc3Qga2V5IGluIHJhdykge1xyXG4gICAgICAgICAgICBjb25zdCBub3JtYWxpemVkS2V5ID0gY2FtZWxpemUoa2V5KTtcclxuICAgICAgICAgICAgaWYgKHZhbGlkYXRlUHJvcE5hbWUobm9ybWFsaXplZEtleSkpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG9wdCA9IHJhd1trZXldO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcHJvcCA9IChub3JtYWxpemVkW25vcm1hbGl6ZWRLZXldID1cclxuICAgICAgICAgICAgICAgICAgICBpc0FycmF5KG9wdCkgfHwgaXNGdW5jdGlvbihvcHQpID8geyB0eXBlOiBvcHQgfSA6IG9wdCk7XHJcbiAgICAgICAgICAgICAgICBpZiAocHJvcCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGJvb2xlYW5JbmRleCA9IGdldFR5cGVJbmRleChCb29sZWFuLCBwcm9wLnR5cGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHN0cmluZ0luZGV4ID0gZ2V0VHlwZUluZGV4KFN0cmluZywgcHJvcC50eXBlKTtcclxuICAgICAgICAgICAgICAgICAgICBwcm9wWzAgLyogc2hvdWxkQ2FzdCAqL10gPSBib29sZWFuSW5kZXggPiAtMTtcclxuICAgICAgICAgICAgICAgICAgICBwcm9wWzEgLyogc2hvdWxkQ2FzdFRydWUgKi9dID1cclxuICAgICAgICAgICAgICAgICAgICAgICAgc3RyaW5nSW5kZXggPCAwIHx8IGJvb2xlYW5JbmRleCA8IHN0cmluZ0luZGV4O1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGlmIHRoZSBwcm9wIG5lZWRzIGJvb2xlYW4gY2FzdGluZyBvciBkZWZhdWx0IHZhbHVlXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGJvb2xlYW5JbmRleCA+IC0xIHx8IGhhc093bihwcm9wLCAnZGVmYXVsdCcpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5lZWRDYXN0S2V5cy5wdXNoKG5vcm1hbGl6ZWRLZXkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGNvbnN0IHJlcyA9IFtub3JtYWxpemVkLCBuZWVkQ2FzdEtleXNdO1xyXG4gICAgY2FjaGUuc2V0KGNvbXAsIHJlcyk7XHJcbiAgICByZXR1cm4gcmVzO1xyXG59XHJcbmZ1bmN0aW9uIHZhbGlkYXRlUHJvcE5hbWUoa2V5KSB7XHJcbiAgICBpZiAoa2V5WzBdICE9PSAnJCcpIHtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xyXG4gICAgICAgIHdhcm4oYEludmFsaWQgcHJvcCBuYW1lOiBcIiR7a2V5fVwiIGlzIGEgcmVzZXJ2ZWQgcHJvcGVydHkuYCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbn1cclxuLy8gdXNlIGZ1bmN0aW9uIHN0cmluZyBuYW1lIHRvIGNoZWNrIHR5cGUgY29uc3RydWN0b3JzXHJcbi8vIHNvIHRoYXQgaXQgd29ya3MgYWNyb3NzIHZtcyAvIGlmcmFtZXMuXHJcbmZ1bmN0aW9uIGdldFR5cGUoY3Rvcikge1xyXG4gICAgY29uc3QgbWF0Y2ggPSBjdG9yICYmIGN0b3IudG9TdHJpbmcoKS5tYXRjaCgvXlxccypmdW5jdGlvbiAoXFx3KykvKTtcclxuICAgIHJldHVybiBtYXRjaCA/IG1hdGNoWzFdIDogY3RvciA9PT0gbnVsbCA/ICdudWxsJyA6ICcnO1xyXG59XHJcbmZ1bmN0aW9uIGlzU2FtZVR5cGUoYSwgYikge1xyXG4gICAgcmV0dXJuIGdldFR5cGUoYSkgPT09IGdldFR5cGUoYik7XHJcbn1cclxuZnVuY3Rpb24gZ2V0VHlwZUluZGV4KHR5cGUsIGV4cGVjdGVkVHlwZXMpIHtcclxuICAgIGlmIChpc0FycmF5KGV4cGVjdGVkVHlwZXMpKSB7XHJcbiAgICAgICAgcmV0dXJuIGV4cGVjdGVkVHlwZXMuZmluZEluZGV4KHQgPT4gaXNTYW1lVHlwZSh0LCB0eXBlKSk7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChpc0Z1bmN0aW9uKGV4cGVjdGVkVHlwZXMpKSB7XHJcbiAgICAgICAgcmV0dXJuIGlzU2FtZVR5cGUoZXhwZWN0ZWRUeXBlcywgdHlwZSkgPyAwIDogLTE7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gLTE7XHJcbn1cclxuLyoqXHJcbiAqIGRldiBvbmx5XHJcbiAqL1xyXG5mdW5jdGlvbiB2YWxpZGF0ZVByb3BzKHJhd1Byb3BzLCBwcm9wcywgaW5zdGFuY2UpIHtcclxuICAgIGNvbnN0IHJlc29sdmVkVmFsdWVzID0gdG9SYXcocHJvcHMpO1xyXG4gICAgY29uc3Qgb3B0aW9ucyA9IGluc3RhbmNlLnByb3BzT3B0aW9uc1swXTtcclxuICAgIGZvciAoY29uc3Qga2V5IGluIG9wdGlvbnMpIHtcclxuICAgICAgICBsZXQgb3B0ID0gb3B0aW9uc1trZXldO1xyXG4gICAgICAgIGlmIChvcHQgPT0gbnVsbClcclxuICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgdmFsaWRhdGVQcm9wKGtleSwgcmVzb2x2ZWRWYWx1ZXNba2V5XSwgb3B0LCAhaGFzT3duKHJhd1Byb3BzLCBrZXkpICYmICFoYXNPd24ocmF3UHJvcHMsIGh5cGhlbmF0ZShrZXkpKSk7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIGRldiBvbmx5XHJcbiAqL1xyXG5mdW5jdGlvbiB2YWxpZGF0ZVByb3AobmFtZSwgdmFsdWUsIHByb3AsIGlzQWJzZW50KSB7XHJcbiAgICBjb25zdCB7IHR5cGUsIHJlcXVpcmVkLCB2YWxpZGF0b3IgfSA9IHByb3A7XHJcbiAgICAvLyByZXF1aXJlZCFcclxuICAgIGlmIChyZXF1aXJlZCAmJiBpc0Fic2VudCkge1xyXG4gICAgICAgIHdhcm4oJ01pc3NpbmcgcmVxdWlyZWQgcHJvcDogXCInICsgbmFtZSArICdcIicpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIC8vIG1pc3NpbmcgYnV0IG9wdGlvbmFsXHJcbiAgICBpZiAodmFsdWUgPT0gbnVsbCAmJiAhcHJvcC5yZXF1aXJlZCkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIC8vIHR5cGUgY2hlY2tcclxuICAgIGlmICh0eXBlICE9IG51bGwgJiYgdHlwZSAhPT0gdHJ1ZSkge1xyXG4gICAgICAgIGxldCBpc1ZhbGlkID0gZmFsc2U7XHJcbiAgICAgICAgY29uc3QgdHlwZXMgPSBpc0FycmF5KHR5cGUpID8gdHlwZSA6IFt0eXBlXTtcclxuICAgICAgICBjb25zdCBleHBlY3RlZFR5cGVzID0gW107XHJcbiAgICAgICAgLy8gdmFsdWUgaXMgdmFsaWQgYXMgbG9uZyBhcyBvbmUgb2YgdGhlIHNwZWNpZmllZCB0eXBlcyBtYXRjaFxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdHlwZXMubGVuZ3RoICYmICFpc1ZhbGlkOyBpKyspIHtcclxuICAgICAgICAgICAgY29uc3QgeyB2YWxpZCwgZXhwZWN0ZWRUeXBlIH0gPSBhc3NlcnRUeXBlKHZhbHVlLCB0eXBlc1tpXSk7XHJcbiAgICAgICAgICAgIGV4cGVjdGVkVHlwZXMucHVzaChleHBlY3RlZFR5cGUgfHwgJycpO1xyXG4gICAgICAgICAgICBpc1ZhbGlkID0gdmFsaWQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghaXNWYWxpZCkge1xyXG4gICAgICAgICAgICB3YXJuKGdldEludmFsaWRUeXBlTWVzc2FnZShuYW1lLCB2YWx1ZSwgZXhwZWN0ZWRUeXBlcykpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy8gY3VzdG9tIHZhbGlkYXRvclxyXG4gICAgaWYgKHZhbGlkYXRvciAmJiAhdmFsaWRhdG9yKHZhbHVlKSkge1xyXG4gICAgICAgIHdhcm4oJ0ludmFsaWQgcHJvcDogY3VzdG9tIHZhbGlkYXRvciBjaGVjayBmYWlsZWQgZm9yIHByb3AgXCInICsgbmFtZSArICdcIi4nKTtcclxuICAgIH1cclxufVxyXG5jb25zdCBpc1NpbXBsZVR5cGUgPSAvKiNfX1BVUkVfXyovIG1ha2VNYXAoJ1N0cmluZyxOdW1iZXIsQm9vbGVhbixGdW5jdGlvbixTeW1ib2wsQmlnSW50Jyk7XHJcbi8qKlxyXG4gKiBkZXYgb25seVxyXG4gKi9cclxuZnVuY3Rpb24gYXNzZXJ0VHlwZSh2YWx1ZSwgdHlwZSkge1xyXG4gICAgbGV0IHZhbGlkO1xyXG4gICAgY29uc3QgZXhwZWN0ZWRUeXBlID0gZ2V0VHlwZSh0eXBlKTtcclxuICAgIGlmIChpc1NpbXBsZVR5cGUoZXhwZWN0ZWRUeXBlKSkge1xyXG4gICAgICAgIGNvbnN0IHQgPSB0eXBlb2YgdmFsdWU7XHJcbiAgICAgICAgdmFsaWQgPSB0ID09PSBleHBlY3RlZFR5cGUudG9Mb3dlckNhc2UoKTtcclxuICAgICAgICAvLyBmb3IgcHJpbWl0aXZlIHdyYXBwZXIgb2JqZWN0c1xyXG4gICAgICAgIGlmICghdmFsaWQgJiYgdCA9PT0gJ29iamVjdCcpIHtcclxuICAgICAgICAgICAgdmFsaWQgPSB2YWx1ZSBpbnN0YW5jZW9mIHR5cGU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoZXhwZWN0ZWRUeXBlID09PSAnT2JqZWN0Jykge1xyXG4gICAgICAgIHZhbGlkID0gaXNPYmplY3QodmFsdWUpO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoZXhwZWN0ZWRUeXBlID09PSAnQXJyYXknKSB7XHJcbiAgICAgICAgdmFsaWQgPSBpc0FycmF5KHZhbHVlKTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKGV4cGVjdGVkVHlwZSA9PT0gJ251bGwnKSB7XHJcbiAgICAgICAgdmFsaWQgPSB2YWx1ZSA9PT0gbnVsbDtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIHZhbGlkID0gdmFsdWUgaW5zdGFuY2VvZiB0eXBlO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICB2YWxpZCxcclxuICAgICAgICBleHBlY3RlZFR5cGVcclxuICAgIH07XHJcbn1cclxuLyoqXHJcbiAqIGRldiBvbmx5XHJcbiAqL1xyXG5mdW5jdGlvbiBnZXRJbnZhbGlkVHlwZU1lc3NhZ2UobmFtZSwgdmFsdWUsIGV4cGVjdGVkVHlwZXMpIHtcclxuICAgIGxldCBtZXNzYWdlID0gYEludmFsaWQgcHJvcDogdHlwZSBjaGVjayBmYWlsZWQgZm9yIHByb3AgXCIke25hbWV9XCIuYCArXHJcbiAgICAgICAgYCBFeHBlY3RlZCAke2V4cGVjdGVkVHlwZXMubWFwKGNhcGl0YWxpemUpLmpvaW4oJyB8ICcpfWA7XHJcbiAgICBjb25zdCBleHBlY3RlZFR5cGUgPSBleHBlY3RlZFR5cGVzWzBdO1xyXG4gICAgY29uc3QgcmVjZWl2ZWRUeXBlID0gdG9SYXdUeXBlKHZhbHVlKTtcclxuICAgIGNvbnN0IGV4cGVjdGVkVmFsdWUgPSBzdHlsZVZhbHVlKHZhbHVlLCBleHBlY3RlZFR5cGUpO1xyXG4gICAgY29uc3QgcmVjZWl2ZWRWYWx1ZSA9IHN0eWxlVmFsdWUodmFsdWUsIHJlY2VpdmVkVHlwZSk7XHJcbiAgICAvLyBjaGVjayBpZiB3ZSBuZWVkIHRvIHNwZWNpZnkgZXhwZWN0ZWQgdmFsdWVcclxuICAgIGlmIChleHBlY3RlZFR5cGVzLmxlbmd0aCA9PT0gMSAmJlxyXG4gICAgICAgIGlzRXhwbGljYWJsZShleHBlY3RlZFR5cGUpICYmXHJcbiAgICAgICAgIWlzQm9vbGVhbihleHBlY3RlZFR5cGUsIHJlY2VpdmVkVHlwZSkpIHtcclxuICAgICAgICBtZXNzYWdlICs9IGAgd2l0aCB2YWx1ZSAke2V4cGVjdGVkVmFsdWV9YDtcclxuICAgIH1cclxuICAgIG1lc3NhZ2UgKz0gYCwgZ290ICR7cmVjZWl2ZWRUeXBlfSBgO1xyXG4gICAgLy8gY2hlY2sgaWYgd2UgbmVlZCB0byBzcGVjaWZ5IHJlY2VpdmVkIHZhbHVlXHJcbiAgICBpZiAoaXNFeHBsaWNhYmxlKHJlY2VpdmVkVHlwZSkpIHtcclxuICAgICAgICBtZXNzYWdlICs9IGB3aXRoIHZhbHVlICR7cmVjZWl2ZWRWYWx1ZX0uYDtcclxuICAgIH1cclxuICAgIHJldHVybiBtZXNzYWdlO1xyXG59XHJcbi8qKlxyXG4gKiBkZXYgb25seVxyXG4gKi9cclxuZnVuY3Rpb24gc3R5bGVWYWx1ZSh2YWx1ZSwgdHlwZSkge1xyXG4gICAgaWYgKHR5cGUgPT09ICdTdHJpbmcnKSB7XHJcbiAgICAgICAgcmV0dXJuIGBcIiR7dmFsdWV9XCJgO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAodHlwZSA9PT0gJ051bWJlcicpIHtcclxuICAgICAgICByZXR1cm4gYCR7TnVtYmVyKHZhbHVlKX1gO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIGAke3ZhbHVlfWA7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIGRldiBvbmx5XHJcbiAqL1xyXG5mdW5jdGlvbiBpc0V4cGxpY2FibGUodHlwZSkge1xyXG4gICAgY29uc3QgZXhwbGljaXRUeXBlcyA9IFsnc3RyaW5nJywgJ251bWJlcicsICdib29sZWFuJ107XHJcbiAgICByZXR1cm4gZXhwbGljaXRUeXBlcy5zb21lKGVsZW0gPT4gdHlwZS50b0xvd2VyQ2FzZSgpID09PSBlbGVtKTtcclxufVxyXG4vKipcclxuICogZGV2IG9ubHlcclxuICovXHJcbmZ1bmN0aW9uIGlzQm9vbGVhbiguLi5hcmdzKSB7XHJcbiAgICByZXR1cm4gYXJncy5zb21lKGVsZW0gPT4gZWxlbS50b0xvd2VyQ2FzZSgpID09PSAnYm9vbGVhbicpO1xyXG59XG5cbmNvbnN0IGlzSW50ZXJuYWxLZXkgPSAoa2V5KSA9PiBrZXlbMF0gPT09ICdfJyB8fCBrZXkgPT09ICckc3RhYmxlJztcclxuY29uc3Qgbm9ybWFsaXplU2xvdFZhbHVlID0gKHZhbHVlKSA9PiBpc0FycmF5KHZhbHVlKVxyXG4gICAgPyB2YWx1ZS5tYXAobm9ybWFsaXplVk5vZGUpXHJcbiAgICA6IFtub3JtYWxpemVWTm9kZSh2YWx1ZSldO1xyXG5jb25zdCBub3JtYWxpemVTbG90ID0gKGtleSwgcmF3U2xvdCwgY3R4KSA9PiB7XHJcbiAgICBjb25zdCBub3JtYWxpemVkID0gd2l0aEN0eCgoLi4uYXJncykgPT4ge1xyXG4gICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgY3VycmVudEluc3RhbmNlKSB7XHJcbiAgICAgICAgICAgIHdhcm4oYFNsb3QgXCIke2tleX1cIiBpbnZva2VkIG91dHNpZGUgb2YgdGhlIHJlbmRlciBmdW5jdGlvbjogYCArXHJcbiAgICAgICAgICAgICAgICBgdGhpcyB3aWxsIG5vdCB0cmFjayBkZXBlbmRlbmNpZXMgdXNlZCBpbiB0aGUgc2xvdC4gYCArXHJcbiAgICAgICAgICAgICAgICBgSW52b2tlIHRoZSBzbG90IGZ1bmN0aW9uIGluc2lkZSB0aGUgcmVuZGVyIGZ1bmN0aW9uIGluc3RlYWQuYCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBub3JtYWxpemVTbG90VmFsdWUocmF3U2xvdCguLi5hcmdzKSk7XHJcbiAgICB9LCBjdHgpO1xyXG4gICAgbm9ybWFsaXplZC5fYyA9IGZhbHNlO1xyXG4gICAgcmV0dXJuIG5vcm1hbGl6ZWQ7XHJcbn07XHJcbmNvbnN0IG5vcm1hbGl6ZU9iamVjdFNsb3RzID0gKHJhd1Nsb3RzLCBzbG90cywgaW5zdGFuY2UpID0+IHtcclxuICAgIGNvbnN0IGN0eCA9IHJhd1Nsb3RzLl9jdHg7XHJcbiAgICBmb3IgKGNvbnN0IGtleSBpbiByYXdTbG90cykge1xyXG4gICAgICAgIGlmIChpc0ludGVybmFsS2V5KGtleSkpXHJcbiAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgIGNvbnN0IHZhbHVlID0gcmF3U2xvdHNba2V5XTtcclxuICAgICAgICBpZiAoaXNGdW5jdGlvbih2YWx1ZSkpIHtcclxuICAgICAgICAgICAgc2xvdHNba2V5XSA9IG5vcm1hbGl6ZVNsb3Qoa2V5LCB2YWx1ZSwgY3R4KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAodmFsdWUgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmXHJcbiAgICAgICAgICAgICAgICAhKGZhbHNlICkpIHtcclxuICAgICAgICAgICAgICAgIHdhcm4oYE5vbi1mdW5jdGlvbiB2YWx1ZSBlbmNvdW50ZXJlZCBmb3Igc2xvdCBcIiR7a2V5fVwiLiBgICtcclxuICAgICAgICAgICAgICAgICAgICBgUHJlZmVyIGZ1bmN0aW9uIHNsb3RzIGZvciBiZXR0ZXIgcGVyZm9ybWFuY2UuYCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29uc3Qgbm9ybWFsaXplZCA9IG5vcm1hbGl6ZVNsb3RWYWx1ZSh2YWx1ZSk7XHJcbiAgICAgICAgICAgIHNsb3RzW2tleV0gPSAoKSA9PiBub3JtYWxpemVkO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufTtcclxuY29uc3Qgbm9ybWFsaXplVk5vZGVTbG90cyA9IChpbnN0YW5jZSwgY2hpbGRyZW4pID0+IHtcclxuICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiZcclxuICAgICAgICAhaXNLZWVwQWxpdmUoaW5zdGFuY2Uudm5vZGUpICYmXHJcbiAgICAgICAgIShmYWxzZSApKSB7XHJcbiAgICAgICAgd2FybihgTm9uLWZ1bmN0aW9uIHZhbHVlIGVuY291bnRlcmVkIGZvciBkZWZhdWx0IHNsb3QuIGAgK1xyXG4gICAgICAgICAgICBgUHJlZmVyIGZ1bmN0aW9uIHNsb3RzIGZvciBiZXR0ZXIgcGVyZm9ybWFuY2UuYCk7XHJcbiAgICB9XHJcbiAgICBjb25zdCBub3JtYWxpemVkID0gbm9ybWFsaXplU2xvdFZhbHVlKGNoaWxkcmVuKTtcclxuICAgIGluc3RhbmNlLnNsb3RzLmRlZmF1bHQgPSAoKSA9PiBub3JtYWxpemVkO1xyXG59O1xyXG5jb25zdCBpbml0U2xvdHMgPSAoaW5zdGFuY2UsIGNoaWxkcmVuKSA9PiB7XHJcbiAgICBpZiAoaW5zdGFuY2Uudm5vZGUuc2hhcGVGbGFnICYgMzIgLyogU0xPVFNfQ0hJTERSRU4gKi8pIHtcclxuICAgICAgICBjb25zdCB0eXBlID0gY2hpbGRyZW4uXztcclxuICAgICAgICBpZiAodHlwZSkge1xyXG4gICAgICAgICAgICAvLyB1c2VycyBjYW4gZ2V0IHRoZSBzaGFsbG93IHJlYWRvbmx5IHZlcnNpb24gb2YgdGhlIHNsb3RzIG9iamVjdCB0aHJvdWdoIGB0aGlzLiRzbG90c2AsXHJcbiAgICAgICAgICAgIC8vIHdlIHNob3VsZCBhdm9pZCB0aGUgcHJveHkgb2JqZWN0IHBvbGx1dGluZyB0aGUgc2xvdHMgb2YgdGhlIGludGVybmFsIGluc3RhbmNlXHJcbiAgICAgICAgICAgIGluc3RhbmNlLnNsb3RzID0gdG9SYXcoY2hpbGRyZW4pO1xyXG4gICAgICAgICAgICAvLyBtYWtlIGNvbXBpbGVyIG1hcmtlciBub24tZW51bWVyYWJsZVxyXG4gICAgICAgICAgICBkZWYoY2hpbGRyZW4sICdfJywgdHlwZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBub3JtYWxpemVPYmplY3RTbG90cyhjaGlsZHJlbiwgKGluc3RhbmNlLnNsb3RzID0ge30pKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICBpbnN0YW5jZS5zbG90cyA9IHt9O1xyXG4gICAgICAgIGlmIChjaGlsZHJlbikge1xyXG4gICAgICAgICAgICBub3JtYWxpemVWTm9kZVNsb3RzKGluc3RhbmNlLCBjaGlsZHJlbik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZGVmKGluc3RhbmNlLnNsb3RzLCBJbnRlcm5hbE9iamVjdEtleSwgMSk7XHJcbn07XHJcbmNvbnN0IHVwZGF0ZVNsb3RzID0gKGluc3RhbmNlLCBjaGlsZHJlbiwgb3B0aW1pemVkKSA9PiB7XHJcbiAgICBjb25zdCB7IHZub2RlLCBzbG90cyB9ID0gaW5zdGFuY2U7XHJcbiAgICBsZXQgbmVlZERlbGV0aW9uQ2hlY2sgPSB0cnVlO1xyXG4gICAgbGV0IGRlbGV0aW9uQ29tcGFyaXNvblRhcmdldCA9IEVNUFRZX09CSjtcclxuICAgIGlmICh2bm9kZS5zaGFwZUZsYWcgJiAzMiAvKiBTTE9UU19DSElMRFJFTiAqLykge1xyXG4gICAgICAgIGNvbnN0IHR5cGUgPSBjaGlsZHJlbi5fO1xyXG4gICAgICAgIGlmICh0eXBlKSB7XHJcbiAgICAgICAgICAgIC8vIGNvbXBpbGVkIHNsb3RzLlxyXG4gICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmIGlzSG1yVXBkYXRpbmcpIHtcclxuICAgICAgICAgICAgICAgIC8vIFBhcmVudCB3YXMgSE1SIHVwZGF0ZWQgc28gc2xvdCBjb250ZW50IG1heSBoYXZlIGNoYW5nZWQuXHJcbiAgICAgICAgICAgICAgICAvLyBmb3JjZSB1cGRhdGUgc2xvdHMgYW5kIG1hcmsgaW5zdGFuY2UgZm9yIGhtciBhcyB3ZWxsXHJcbiAgICAgICAgICAgICAgICBleHRlbmQoc2xvdHMsIGNoaWxkcmVuKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChvcHRpbWl6ZWQgJiYgdHlwZSA9PT0gMSAvKiBTVEFCTEUgKi8pIHtcclxuICAgICAgICAgICAgICAgIC8vIGNvbXBpbGVkIEFORCBzdGFibGUuXHJcbiAgICAgICAgICAgICAgICAvLyBubyBuZWVkIHRvIHVwZGF0ZSwgYW5kIHNraXAgc3RhbGUgc2xvdHMgcmVtb3ZhbC5cclxuICAgICAgICAgICAgICAgIG5lZWREZWxldGlvbkNoZWNrID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyBjb21waWxlZCBidXQgZHluYW1pYyAodi1pZi92LWZvciBvbiBzbG90cykgLSB1cGRhdGUgc2xvdHMsIGJ1dCBza2lwXHJcbiAgICAgICAgICAgICAgICAvLyBub3JtYWxpemF0aW9uLlxyXG4gICAgICAgICAgICAgICAgZXh0ZW5kKHNsb3RzLCBjaGlsZHJlbik7XHJcbiAgICAgICAgICAgICAgICAvLyAjMjg5M1xyXG4gICAgICAgICAgICAgICAgLy8gd2hlbiByZW5kZXJpbmcgdGhlIG9wdGltaXplZCBzbG90cyBieSBtYW51YWxseSB3cml0dGVuIHJlbmRlciBmdW5jdGlvbixcclxuICAgICAgICAgICAgICAgIC8vIHdlIG5lZWQgdG8gZGVsZXRlIHRoZSBgc2xvdHMuX2AgZmxhZyBpZiBuZWNlc3NhcnkgdG8gbWFrZSBzdWJzZXF1ZW50IHVwZGF0ZXMgcmVsaWFibGUsXHJcbiAgICAgICAgICAgICAgICAvLyBpLmUuIGxldCB0aGUgYHJlbmRlclNsb3RgIGNyZWF0ZSB0aGUgYmFpbGVkIEZyYWdtZW50XHJcbiAgICAgICAgICAgICAgICBpZiAoIW9wdGltaXplZCAmJiB0eXBlID09PSAxIC8qIFNUQUJMRSAqLykge1xyXG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBzbG90cy5fO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBuZWVkRGVsZXRpb25DaGVjayA9ICFjaGlsZHJlbi4kc3RhYmxlO1xyXG4gICAgICAgICAgICBub3JtYWxpemVPYmplY3RTbG90cyhjaGlsZHJlbiwgc2xvdHMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBkZWxldGlvbkNvbXBhcmlzb25UYXJnZXQgPSBjaGlsZHJlbjtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKGNoaWxkcmVuKSB7XHJcbiAgICAgICAgLy8gbm9uIHNsb3Qgb2JqZWN0IGNoaWxkcmVuIChkaXJlY3QgdmFsdWUpIHBhc3NlZCB0byBhIGNvbXBvbmVudFxyXG4gICAgICAgIG5vcm1hbGl6ZVZOb2RlU2xvdHMoaW5zdGFuY2UsIGNoaWxkcmVuKTtcclxuICAgICAgICBkZWxldGlvbkNvbXBhcmlzb25UYXJnZXQgPSB7IGRlZmF1bHQ6IDEgfTtcclxuICAgIH1cclxuICAgIC8vIGRlbGV0ZSBzdGFsZSBzbG90c1xyXG4gICAgaWYgKG5lZWREZWxldGlvbkNoZWNrKSB7XHJcbiAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gc2xvdHMpIHtcclxuICAgICAgICAgICAgaWYgKCFpc0ludGVybmFsS2V5KGtleSkgJiYgIShrZXkgaW4gZGVsZXRpb25Db21wYXJpc29uVGFyZ2V0KSkge1xyXG4gICAgICAgICAgICAgICAgZGVsZXRlIHNsb3RzW2tleV07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn07XG5cbi8qKlxyXG5SdW50aW1lIGhlbHBlciBmb3IgYXBwbHlpbmcgZGlyZWN0aXZlcyB0byBhIHZub2RlLiBFeGFtcGxlIHVzYWdlOlxyXG5cbmNvbnN0IGNvbXAgPSByZXNvbHZlQ29tcG9uZW50KCdjb21wJylcclxuY29uc3QgZm9vID0gcmVzb2x2ZURpcmVjdGl2ZSgnZm9vJylcclxuY29uc3QgYmFyID0gcmVzb2x2ZURpcmVjdGl2ZSgnYmFyJylcclxuXG5yZXR1cm4gd2l0aERpcmVjdGl2ZXMoaChjb21wKSwgW1xyXG4gIFtmb28sIHRoaXMueF0sXHJcbiAgW2JhciwgdGhpcy55XVxyXG5dKVxyXG4qL1xyXG5mdW5jdGlvbiB2YWxpZGF0ZURpcmVjdGl2ZU5hbWUobmFtZSkge1xyXG4gICAgaWYgKGlzQnVpbHRJbkRpcmVjdGl2ZShuYW1lKSkge1xyXG4gICAgICAgIHdhcm4oJ0RvIG5vdCB1c2UgYnVpbHQtaW4gZGlyZWN0aXZlIGlkcyBhcyBjdXN0b20gZGlyZWN0aXZlIGlkOiAnICsgbmFtZSk7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIEFkZHMgZGlyZWN0aXZlcyB0byBhIFZOb2RlLlxyXG4gKi9cclxuZnVuY3Rpb24gd2l0aERpcmVjdGl2ZXModm5vZGUsIGRpcmVjdGl2ZXMpIHtcclxuICAgIGNvbnN0IGludGVybmFsSW5zdGFuY2UgPSBjdXJyZW50UmVuZGVyaW5nSW5zdGFuY2U7XHJcbiAgICBpZiAoaW50ZXJuYWxJbnN0YW5jZSA9PT0gbnVsbCkge1xyXG4gICAgICAgIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiB3YXJuKGB3aXRoRGlyZWN0aXZlcyBjYW4gb25seSBiZSB1c2VkIGluc2lkZSByZW5kZXIgZnVuY3Rpb25zLmApO1xyXG4gICAgICAgIHJldHVybiB2bm9kZTtcclxuICAgIH1cclxuICAgIGNvbnN0IGluc3RhbmNlID0gZ2V0RXhwb3NlUHJveHkoaW50ZXJuYWxJbnN0YW5jZSkgfHxcclxuICAgICAgICBpbnRlcm5hbEluc3RhbmNlLnByb3h5O1xyXG4gICAgY29uc3QgYmluZGluZ3MgPSB2bm9kZS5kaXJzIHx8ICh2bm9kZS5kaXJzID0gW10pO1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkaXJlY3RpdmVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgbGV0IFtkaXIsIHZhbHVlLCBhcmcsIG1vZGlmaWVycyA9IEVNUFRZX09CSl0gPSBkaXJlY3RpdmVzW2ldO1xyXG4gICAgICAgIGlmIChpc0Z1bmN0aW9uKGRpcikpIHtcclxuICAgICAgICAgICAgZGlyID0ge1xyXG4gICAgICAgICAgICAgICAgbW91bnRlZDogZGlyLFxyXG4gICAgICAgICAgICAgICAgdXBkYXRlZDogZGlyXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChkaXIuZGVlcCkge1xyXG4gICAgICAgICAgICB0cmF2ZXJzZSh2YWx1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGJpbmRpbmdzLnB1c2goe1xyXG4gICAgICAgICAgICBkaXIsXHJcbiAgICAgICAgICAgIGluc3RhbmNlLFxyXG4gICAgICAgICAgICB2YWx1ZSxcclxuICAgICAgICAgICAgb2xkVmFsdWU6IHZvaWQgMCxcclxuICAgICAgICAgICAgYXJnLFxyXG4gICAgICAgICAgICBtb2RpZmllcnNcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIHJldHVybiB2bm9kZTtcclxufVxyXG5mdW5jdGlvbiBpbnZva2VEaXJlY3RpdmVIb29rKHZub2RlLCBwcmV2Vk5vZGUsIGluc3RhbmNlLCBuYW1lKSB7XHJcbiAgICBjb25zdCBiaW5kaW5ncyA9IHZub2RlLmRpcnM7XHJcbiAgICBjb25zdCBvbGRCaW5kaW5ncyA9IHByZXZWTm9kZSAmJiBwcmV2Vk5vZGUuZGlycztcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYmluZGluZ3MubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBjb25zdCBiaW5kaW5nID0gYmluZGluZ3NbaV07XHJcbiAgICAgICAgaWYgKG9sZEJpbmRpbmdzKSB7XHJcbiAgICAgICAgICAgIGJpbmRpbmcub2xkVmFsdWUgPSBvbGRCaW5kaW5nc1tpXS52YWx1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IGhvb2sgPSBiaW5kaW5nLmRpcltuYW1lXTtcclxuICAgICAgICBpZiAoaG9vaykge1xyXG4gICAgICAgICAgICAvLyBkaXNhYmxlIHRyYWNraW5nIGluc2lkZSBhbGwgbGlmZWN5Y2xlIGhvb2tzXHJcbiAgICAgICAgICAgIC8vIHNpbmNlIHRoZXkgY2FuIHBvdGVudGlhbGx5IGJlIGNhbGxlZCBpbnNpZGUgZWZmZWN0cy5cclxuICAgICAgICAgICAgcGF1c2VUcmFja2luZygpO1xyXG4gICAgICAgICAgICBjYWxsV2l0aEFzeW5jRXJyb3JIYW5kbGluZyhob29rLCBpbnN0YW5jZSwgOCAvKiBESVJFQ1RJVkVfSE9PSyAqLywgW1xyXG4gICAgICAgICAgICAgICAgdm5vZGUuZWwsXHJcbiAgICAgICAgICAgICAgICBiaW5kaW5nLFxyXG4gICAgICAgICAgICAgICAgdm5vZGUsXHJcbiAgICAgICAgICAgICAgICBwcmV2Vk5vZGVcclxuICAgICAgICAgICAgXSk7XHJcbiAgICAgICAgICAgIHJlc2V0VHJhY2tpbmcoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cblxuZnVuY3Rpb24gY3JlYXRlQXBwQ29udGV4dCgpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgYXBwOiBudWxsLFxyXG4gICAgICAgIGNvbmZpZzoge1xyXG4gICAgICAgICAgICBpc05hdGl2ZVRhZzogTk8sXHJcbiAgICAgICAgICAgIHBlcmZvcm1hbmNlOiBmYWxzZSxcclxuICAgICAgICAgICAgZ2xvYmFsUHJvcGVydGllczoge30sXHJcbiAgICAgICAgICAgIG9wdGlvbk1lcmdlU3RyYXRlZ2llczoge30sXHJcbiAgICAgICAgICAgIGVycm9ySGFuZGxlcjogdW5kZWZpbmVkLFxyXG4gICAgICAgICAgICB3YXJuSGFuZGxlcjogdW5kZWZpbmVkLFxyXG4gICAgICAgICAgICBjb21waWxlck9wdGlvbnM6IHt9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBtaXhpbnM6IFtdLFxyXG4gICAgICAgIGNvbXBvbmVudHM6IHt9LFxyXG4gICAgICAgIGRpcmVjdGl2ZXM6IHt9LFxyXG4gICAgICAgIHByb3ZpZGVzOiBPYmplY3QuY3JlYXRlKG51bGwpLFxyXG4gICAgICAgIG9wdGlvbnNDYWNoZTogbmV3IFdlYWtNYXAoKSxcclxuICAgICAgICBwcm9wc0NhY2hlOiBuZXcgV2Vha01hcCgpLFxyXG4gICAgICAgIGVtaXRzQ2FjaGU6IG5ldyBXZWFrTWFwKClcclxuICAgIH07XHJcbn1cclxubGV0IHVpZCA9IDA7XHJcbmZ1bmN0aW9uIGNyZWF0ZUFwcEFQSShyZW5kZXIsIGh5ZHJhdGUpIHtcclxuICAgIHJldHVybiBmdW5jdGlvbiBjcmVhdGVBcHAocm9vdENvbXBvbmVudCwgcm9vdFByb3BzID0gbnVsbCkge1xyXG4gICAgICAgIGlmICghaXNGdW5jdGlvbihyb290Q29tcG9uZW50KSkge1xyXG4gICAgICAgICAgICByb290Q29tcG9uZW50ID0gT2JqZWN0LmFzc2lnbih7fSwgcm9vdENvbXBvbmVudCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChyb290UHJvcHMgIT0gbnVsbCAmJiAhaXNPYmplY3Qocm9vdFByb3BzKSkge1xyXG4gICAgICAgICAgICAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgd2Fybihgcm9vdCBwcm9wcyBwYXNzZWQgdG8gYXBwLm1vdW50KCkgbXVzdCBiZSBhbiBvYmplY3QuYCk7XHJcbiAgICAgICAgICAgIHJvb3RQcm9wcyA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGNvbnRleHQgPSBjcmVhdGVBcHBDb250ZXh0KCk7XHJcbiAgICAgICAgY29uc3QgaW5zdGFsbGVkUGx1Z2lucyA9IG5ldyBTZXQoKTtcclxuICAgICAgICBsZXQgaXNNb3VudGVkID0gZmFsc2U7XHJcbiAgICAgICAgY29uc3QgYXBwID0gKGNvbnRleHQuYXBwID0ge1xyXG4gICAgICAgICAgICBfdWlkOiB1aWQrKyxcclxuICAgICAgICAgICAgX2NvbXBvbmVudDogcm9vdENvbXBvbmVudCxcclxuICAgICAgICAgICAgX3Byb3BzOiByb290UHJvcHMsXHJcbiAgICAgICAgICAgIF9jb250YWluZXI6IG51bGwsXHJcbiAgICAgICAgICAgIF9jb250ZXh0OiBjb250ZXh0LFxyXG4gICAgICAgICAgICBfaW5zdGFuY2U6IG51bGwsXHJcbiAgICAgICAgICAgIHZlcnNpb24sXHJcbiAgICAgICAgICAgIGdldCBjb25maWcoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gY29udGV4dC5jb25maWc7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHNldCBjb25maWcodikge1xyXG4gICAgICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHdhcm4oYGFwcC5jb25maWcgY2Fubm90IGJlIHJlcGxhY2VkLiBNb2RpZnkgaW5kaXZpZHVhbCBvcHRpb25zIGluc3RlYWQuYCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHVzZShwbHVnaW4sIC4uLm9wdGlvbnMpIHtcclxuICAgICAgICAgICAgICAgIGlmIChpbnN0YWxsZWRQbHVnaW5zLmhhcyhwbHVnaW4pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmIHdhcm4oYFBsdWdpbiBoYXMgYWxyZWFkeSBiZWVuIGFwcGxpZWQgdG8gdGFyZ2V0IGFwcC5gKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHBsdWdpbiAmJiBpc0Z1bmN0aW9uKHBsdWdpbi5pbnN0YWxsKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGluc3RhbGxlZFBsdWdpbnMuYWRkKHBsdWdpbik7XHJcbiAgICAgICAgICAgICAgICAgICAgcGx1Z2luLmluc3RhbGwoYXBwLCAuLi5vcHRpb25zKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGlzRnVuY3Rpb24ocGx1Z2luKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGluc3RhbGxlZFBsdWdpbnMuYWRkKHBsdWdpbik7XHJcbiAgICAgICAgICAgICAgICAgICAgcGx1Z2luKGFwcCwgLi4ub3B0aW9ucyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcclxuICAgICAgICAgICAgICAgICAgICB3YXJuKGBBIHBsdWdpbiBtdXN0IGVpdGhlciBiZSBhIGZ1bmN0aW9uIG9yIGFuIG9iamVjdCB3aXRoIGFuIFwiaW5zdGFsbFwiIGAgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBgZnVuY3Rpb24uYCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gYXBwO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBtaXhpbihtaXhpbikge1xyXG4gICAgICAgICAgICAgICAgaWYgKF9fVlVFX09QVElPTlNfQVBJX18pIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIWNvbnRleHQubWl4aW5zLmluY2x1ZGVzKG1peGluKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0Lm1peGlucy5wdXNoKG1peGluKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdhcm4oJ01peGluIGhhcyBhbHJlYWR5IGJlZW4gYXBwbGllZCB0byB0YXJnZXQgYXBwJyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAobWl4aW4ubmFtZSA/IGA6ICR7bWl4aW4ubmFtZX1gIDogJycpKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcclxuICAgICAgICAgICAgICAgICAgICB3YXJuKCdNaXhpbnMgYXJlIG9ubHkgYXZhaWxhYmxlIGluIGJ1aWxkcyBzdXBwb3J0aW5nIE9wdGlvbnMgQVBJJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gYXBwO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBjb21wb25lbnQobmFtZSwgY29tcG9uZW50KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGVDb21wb25lbnROYW1lKG5hbWUsIGNvbnRleHQuY29uZmlnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmICghY29tcG9uZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbnRleHQuY29tcG9uZW50c1tuYW1lXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgY29udGV4dC5jb21wb25lbnRzW25hbWVdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgd2FybihgQ29tcG9uZW50IFwiJHtuYW1lfVwiIGhhcyBhbHJlYWR5IGJlZW4gcmVnaXN0ZXJlZCBpbiB0YXJnZXQgYXBwLmApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY29udGV4dC5jb21wb25lbnRzW25hbWVdID0gY29tcG9uZW50O1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGFwcDtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZGlyZWN0aXZlKG5hbWUsIGRpcmVjdGl2ZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhbGlkYXRlRGlyZWN0aXZlTmFtZShuYW1lKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmICghZGlyZWN0aXZlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbnRleHQuZGlyZWN0aXZlc1tuYW1lXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgY29udGV4dC5kaXJlY3RpdmVzW25hbWVdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgd2FybihgRGlyZWN0aXZlIFwiJHtuYW1lfVwiIGhhcyBhbHJlYWR5IGJlZW4gcmVnaXN0ZXJlZCBpbiB0YXJnZXQgYXBwLmApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY29udGV4dC5kaXJlY3RpdmVzW25hbWVdID0gZGlyZWN0aXZlO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGFwcDtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgbW91bnQocm9vdENvbnRhaW5lciwgaXNIeWRyYXRlLCBpc1NWRykge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFpc01vdW50ZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB2bm9kZSA9IGNyZWF0ZVZOb2RlKHJvb3RDb21wb25lbnQsIHJvb3RQcm9wcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gc3RvcmUgYXBwIGNvbnRleHQgb24gdGhlIHJvb3QgVk5vZGUuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gdGhpcyB3aWxsIGJlIHNldCBvbiB0aGUgcm9vdCBpbnN0YW5jZSBvbiBpbml0aWFsIG1vdW50LlxyXG4gICAgICAgICAgICAgICAgICAgIHZub2RlLmFwcENvbnRleHQgPSBjb250ZXh0O1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIEhNUiByb290IHJlbG9hZFxyXG4gICAgICAgICAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dC5yZWxvYWQgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZW5kZXIoY2xvbmVWTm9kZSh2bm9kZSksIHJvb3RDb250YWluZXIsIGlzU1ZHKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzSHlkcmF0ZSAmJiBoeWRyYXRlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGh5ZHJhdGUodm5vZGUsIHJvb3RDb250YWluZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVuZGVyKHZub2RlLCByb290Q29udGFpbmVyLCBpc1NWRyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlzTW91bnRlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgYXBwLl9jb250YWluZXIgPSByb290Q29udGFpbmVyO1xyXG4gICAgICAgICAgICAgICAgICAgIHJvb3RDb250YWluZXIuX192dWVfYXBwX18gPSBhcHA7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB8fCBfX1ZVRV9QUk9EX0RFVlRPT0xTX18pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXBwLl9pbnN0YW5jZSA9IHZub2RlLmNvbXBvbmVudDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGV2dG9vbHNJbml0QXBwKGFwcCwgdmVyc2lvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBnZXRFeHBvc2VQcm94eSh2bm9kZS5jb21wb25lbnQpIHx8IHZub2RlLmNvbXBvbmVudC5wcm94eTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHdhcm4oYEFwcCBoYXMgYWxyZWFkeSBiZWVuIG1vdW50ZWQuXFxuYCArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGBJZiB5b3Ugd2FudCB0byByZW1vdW50IHRoZSBzYW1lIGFwcCwgbW92ZSB5b3VyIGFwcCBjcmVhdGlvbiBsb2dpYyBgICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYGludG8gYSBmYWN0b3J5IGZ1bmN0aW9uIGFuZCBjcmVhdGUgZnJlc2ggYXBwIGluc3RhbmNlcyBmb3IgZWFjaCBgICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYG1vdW50IC0gZS5nLiBcXGBjb25zdCBjcmVhdGVNeUFwcCA9ICgpID0+IGNyZWF0ZUFwcChBcHApXFxgYCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHVubW91bnQoKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoaXNNb3VudGVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVuZGVyKG51bGwsIGFwcC5fY29udGFpbmVyKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHx8IF9fVlVFX1BST0RfREVWVE9PTFNfXykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhcHAuX2luc3RhbmNlID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGV2dG9vbHNVbm1vdW50QXBwKGFwcCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBhcHAuX2NvbnRhaW5lci5fX3Z1ZV9hcHBfXztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHdhcm4oYENhbm5vdCB1bm1vdW50IGFuIGFwcCB0aGF0IGlzIG5vdCBtb3VudGVkLmApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBwcm92aWRlKGtleSwgdmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYga2V5IGluIGNvbnRleHQucHJvdmlkZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICB3YXJuKGBBcHAgYWxyZWFkeSBwcm92aWRlcyBwcm9wZXJ0eSB3aXRoIGtleSBcIiR7U3RyaW5nKGtleSl9XCIuIGAgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBgSXQgd2lsbCBiZSBvdmVyd3JpdHRlbiB3aXRoIHRoZSBuZXcgdmFsdWUuYCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyBUeXBlU2NyaXB0IGRvZXNuJ3QgYWxsb3cgc3ltYm9scyBhcyBpbmRleCB0eXBlXHJcbiAgICAgICAgICAgICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vTWljcm9zb2Z0L1R5cGVTY3JpcHQvaXNzdWVzLzI0NTg3XHJcbiAgICAgICAgICAgICAgICBjb250ZXh0LnByb3ZpZGVzW2tleV0gPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBhcHA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gYXBwO1xyXG4gICAgfTtcclxufVxuXG4vKipcclxuICogRnVuY3Rpb24gZm9yIGhhbmRsaW5nIGEgdGVtcGxhdGUgcmVmXHJcbiAqL1xyXG5mdW5jdGlvbiBzZXRSZWYocmF3UmVmLCBvbGRSYXdSZWYsIHBhcmVudFN1c3BlbnNlLCB2bm9kZSwgaXNVbm1vdW50ID0gZmFsc2UpIHtcclxuICAgIGlmIChpc0FycmF5KHJhd1JlZikpIHtcclxuICAgICAgICByYXdSZWYuZm9yRWFjaCgociwgaSkgPT4gc2V0UmVmKHIsIG9sZFJhd1JlZiAmJiAoaXNBcnJheShvbGRSYXdSZWYpID8gb2xkUmF3UmVmW2ldIDogb2xkUmF3UmVmKSwgcGFyZW50U3VzcGVuc2UsIHZub2RlLCBpc1VubW91bnQpKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBpZiAoaXNBc3luY1dyYXBwZXIodm5vZGUpICYmICFpc1VubW91bnQpIHtcclxuICAgICAgICAvLyB3aGVuIG1vdW50aW5nIGFzeW5jIGNvbXBvbmVudHMsIG5vdGhpbmcgbmVlZHMgdG8gYmUgZG9uZSxcclxuICAgICAgICAvLyBiZWNhdXNlIHRoZSB0ZW1wbGF0ZSByZWYgaXMgZm9yd2FyZGVkIHRvIGlubmVyIGNvbXBvbmVudFxyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGNvbnN0IHJlZlZhbHVlID0gdm5vZGUuc2hhcGVGbGFnICYgNCAvKiBTVEFURUZVTF9DT01QT05FTlQgKi9cclxuICAgICAgICA/IGdldEV4cG9zZVByb3h5KHZub2RlLmNvbXBvbmVudCkgfHwgdm5vZGUuY29tcG9uZW50LnByb3h5XHJcbiAgICAgICAgOiB2bm9kZS5lbDtcclxuICAgIGNvbnN0IHZhbHVlID0gaXNVbm1vdW50ID8gbnVsbCA6IHJlZlZhbHVlO1xyXG4gICAgY29uc3QgeyBpOiBvd25lciwgcjogcmVmIH0gPSByYXdSZWY7XHJcbiAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmICFvd25lcikge1xyXG4gICAgICAgIHdhcm4oYE1pc3NpbmcgcmVmIG93bmVyIGNvbnRleHQuIHJlZiBjYW5ub3QgYmUgdXNlZCBvbiBob2lzdGVkIHZub2Rlcy4gYCArXHJcbiAgICAgICAgICAgIGBBIHZub2RlIHdpdGggcmVmIG11c3QgYmUgY3JlYXRlZCBpbnNpZGUgdGhlIHJlbmRlciBmdW5jdGlvbi5gKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBjb25zdCBvbGRSZWYgPSBvbGRSYXdSZWYgJiYgb2xkUmF3UmVmLnI7XHJcbiAgICBjb25zdCByZWZzID0gb3duZXIucmVmcyA9PT0gRU1QVFlfT0JKID8gKG93bmVyLnJlZnMgPSB7fSkgOiBvd25lci5yZWZzO1xyXG4gICAgY29uc3Qgc2V0dXBTdGF0ZSA9IG93bmVyLnNldHVwU3RhdGU7XHJcbiAgICAvLyBkeW5hbWljIHJlZiBjaGFuZ2VkLiB1bnNldCBvbGQgcmVmXHJcbiAgICBpZiAob2xkUmVmICE9IG51bGwgJiYgb2xkUmVmICE9PSByZWYpIHtcclxuICAgICAgICBpZiAoaXNTdHJpbmcob2xkUmVmKSkge1xyXG4gICAgICAgICAgICByZWZzW29sZFJlZl0gPSBudWxsO1xyXG4gICAgICAgICAgICBpZiAoaGFzT3duKHNldHVwU3RhdGUsIG9sZFJlZikpIHtcclxuICAgICAgICAgICAgICAgIHNldHVwU3RhdGVbb2xkUmVmXSA9IG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoaXNSZWYob2xkUmVmKSkge1xyXG4gICAgICAgICAgICBvbGRSZWYudmFsdWUgPSBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGlmIChpc0Z1bmN0aW9uKHJlZikpIHtcclxuICAgICAgICBjYWxsV2l0aEVycm9ySGFuZGxpbmcocmVmLCBvd25lciwgMTIgLyogRlVOQ1RJT05fUkVGICovLCBbdmFsdWUsIHJlZnNdKTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIGNvbnN0IF9pc1N0cmluZyA9IGlzU3RyaW5nKHJlZik7XHJcbiAgICAgICAgY29uc3QgX2lzUmVmID0gaXNSZWYocmVmKTtcclxuICAgICAgICBpZiAoX2lzU3RyaW5nIHx8IF9pc1JlZikge1xyXG4gICAgICAgICAgICBjb25zdCBkb1NldCA9ICgpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChyYXdSZWYuZikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nID0gX2lzU3RyaW5nID8gcmVmc1tyZWZdIDogcmVmLnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpc1VubW91bnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaXNBcnJheShleGlzdGluZykgJiYgcmVtb3ZlKGV4aXN0aW5nLCByZWZWYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWlzQXJyYXkoZXhpc3RpbmcpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoX2lzU3RyaW5nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmc1tyZWZdID0gW3JlZlZhbHVlXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaGFzT3duKHNldHVwU3RhdGUsIHJlZikpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0dXBTdGF0ZVtyZWZdID0gcmVmc1tyZWZdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZi52YWx1ZSA9IFtyZWZWYWx1ZV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJhd1JlZi5rKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWZzW3Jhd1JlZi5rXSA9IHJlZi52YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICghZXhpc3RpbmcuaW5jbHVkZXMocmVmVmFsdWUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleGlzdGluZy5wdXNoKHJlZlZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKF9pc1N0cmluZykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlZnNbcmVmXSA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChoYXNPd24oc2V0dXBTdGF0ZSwgcmVmKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXR1cFN0YXRlW3JlZl0gPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChpc1JlZihyZWYpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVmLnZhbHVlID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJhd1JlZi5rKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWZzW3Jhd1JlZi5rXSA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgd2FybignSW52YWxpZCB0ZW1wbGF0ZSByZWYgdHlwZTonLCByZWYsIGAoJHt0eXBlb2YgcmVmfSlgKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgaWYgKHZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICBkb1NldC5pZCA9IC0xO1xyXG4gICAgICAgICAgICAgICAgcXVldWVQb3N0UmVuZGVyRWZmZWN0KGRvU2V0LCBwYXJlbnRTdXNwZW5zZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBkb1NldCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xyXG4gICAgICAgICAgICB3YXJuKCdJbnZhbGlkIHRlbXBsYXRlIHJlZiB0eXBlOicsIHJlZiwgYCgke3R5cGVvZiByZWZ9KWApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxuXG5sZXQgaGFzTWlzbWF0Y2ggPSBmYWxzZTtcclxuY29uc3QgaXNTVkdDb250YWluZXIgPSAoY29udGFpbmVyKSA9PiAvc3ZnLy50ZXN0KGNvbnRhaW5lci5uYW1lc3BhY2VVUkkpICYmIGNvbnRhaW5lci50YWdOYW1lICE9PSAnZm9yZWlnbk9iamVjdCc7XHJcbmNvbnN0IGlzQ29tbWVudCA9IChub2RlKSA9PiBub2RlLm5vZGVUeXBlID09PSA4IC8qIENPTU1FTlQgKi87XHJcbi8vIE5vdGU6IGh5ZHJhdGlvbiBpcyBET00tc3BlY2lmaWNcclxuLy8gQnV0IHdlIGhhdmUgdG8gcGxhY2UgaXQgaW4gY29yZSBkdWUgdG8gdGlnaHQgY291cGxpbmcgd2l0aCBjb3JlIC0gc3BsaXR0aW5nXHJcbi8vIGl0IG91dCBjcmVhdGVzIGEgdG9uIG9mIHVubmVjZXNzYXJ5IGNvbXBsZXhpdHkuXHJcbi8vIEh5ZHJhdGlvbiBhbHNvIGRlcGVuZHMgb24gc29tZSByZW5kZXJlciBpbnRlcm5hbCBsb2dpYyB3aGljaCBuZWVkcyB0byBiZVxyXG4vLyBwYXNzZWQgaW4gdmlhIGFyZ3VtZW50cy5cclxuZnVuY3Rpb24gY3JlYXRlSHlkcmF0aW9uRnVuY3Rpb25zKHJlbmRlcmVySW50ZXJuYWxzKSB7XHJcbiAgICBjb25zdCB7IG10OiBtb3VudENvbXBvbmVudCwgcDogcGF0Y2gsIG86IHsgcGF0Y2hQcm9wLCBuZXh0U2libGluZywgcGFyZW50Tm9kZSwgcmVtb3ZlLCBpbnNlcnQsIGNyZWF0ZUNvbW1lbnQgfSB9ID0gcmVuZGVyZXJJbnRlcm5hbHM7XHJcbiAgICBjb25zdCBoeWRyYXRlID0gKHZub2RlLCBjb250YWluZXIpID0+IHtcclxuICAgICAgICBpZiAoIWNvbnRhaW5lci5oYXNDaGlsZE5vZGVzKCkpIHtcclxuICAgICAgICAgICAgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmXHJcbiAgICAgICAgICAgICAgICB3YXJuKGBBdHRlbXB0aW5nIHRvIGh5ZHJhdGUgZXhpc3RpbmcgbWFya3VwIGJ1dCBjb250YWluZXIgaXMgZW1wdHkuIGAgK1xyXG4gICAgICAgICAgICAgICAgICAgIGBQZXJmb3JtaW5nIGZ1bGwgbW91bnQgaW5zdGVhZC5gKTtcclxuICAgICAgICAgICAgcGF0Y2gobnVsbCwgdm5vZGUsIGNvbnRhaW5lcik7XHJcbiAgICAgICAgICAgIGZsdXNoUG9zdEZsdXNoQ2JzKCk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaGFzTWlzbWF0Y2ggPSBmYWxzZTtcclxuICAgICAgICBoeWRyYXRlTm9kZShjb250YWluZXIuZmlyc3RDaGlsZCwgdm5vZGUsIG51bGwsIG51bGwsIG51bGwpO1xyXG4gICAgICAgIGZsdXNoUG9zdEZsdXNoQ2JzKCk7XHJcbiAgICAgICAgaWYgKGhhc01pc21hdGNoICYmICFmYWxzZSkge1xyXG4gICAgICAgICAgICAvLyB0aGlzIGVycm9yIHNob3VsZCBzaG93IHVwIGluIHByb2R1Y3Rpb25cclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihgSHlkcmF0aW9uIGNvbXBsZXRlZCBidXQgY29udGFpbnMgbWlzbWF0Y2hlcy5gKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgY29uc3QgaHlkcmF0ZU5vZGUgPSAobm9kZSwgdm5vZGUsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkID0gZmFsc2UpID0+IHtcclxuICAgICAgICBjb25zdCBpc0ZyYWdtZW50U3RhcnQgPSBpc0NvbW1lbnQobm9kZSkgJiYgbm9kZS5kYXRhID09PSAnWyc7XHJcbiAgICAgICAgY29uc3Qgb25NaXNtYXRjaCA9ICgpID0+IGhhbmRsZU1pc21hdGNoKG5vZGUsIHZub2RlLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBzbG90U2NvcGVJZHMsIGlzRnJhZ21lbnRTdGFydCk7XHJcbiAgICAgICAgY29uc3QgeyB0eXBlLCByZWYsIHNoYXBlRmxhZyB9ID0gdm5vZGU7XHJcbiAgICAgICAgY29uc3QgZG9tVHlwZSA9IG5vZGUubm9kZVR5cGU7XHJcbiAgICAgICAgdm5vZGUuZWwgPSBub2RlO1xyXG4gICAgICAgIGxldCBuZXh0Tm9kZSA9IG51bGw7XHJcbiAgICAgICAgc3dpdGNoICh0eXBlKSB7XHJcbiAgICAgICAgICAgIGNhc2UgVGV4dDpcclxuICAgICAgICAgICAgICAgIGlmIChkb21UeXBlICE9PSAzIC8qIFRFWFQgKi8pIHtcclxuICAgICAgICAgICAgICAgICAgICBuZXh0Tm9kZSA9IG9uTWlzbWF0Y2goKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChub2RlLmRhdGEgIT09IHZub2RlLmNoaWxkcmVuKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhhc01pc21hdGNoID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YXJuKGBIeWRyYXRpb24gdGV4dCBtaXNtYXRjaDpgICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgXFxuLSBDbGllbnQ6ICR7SlNPTi5zdHJpbmdpZnkobm9kZS5kYXRhKX1gICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgXFxuLSBTZXJ2ZXI6ICR7SlNPTi5zdHJpbmdpZnkodm5vZGUuY2hpbGRyZW4pfWApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBub2RlLmRhdGEgPSB2bm9kZS5jaGlsZHJlbjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgbmV4dE5vZGUgPSBuZXh0U2libGluZyhub2RlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIENvbW1lbnQ6XHJcbiAgICAgICAgICAgICAgICBpZiAoZG9tVHlwZSAhPT0gOCAvKiBDT01NRU5UICovIHx8IGlzRnJhZ21lbnRTdGFydCkge1xyXG4gICAgICAgICAgICAgICAgICAgIG5leHROb2RlID0gb25NaXNtYXRjaCgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbmV4dE5vZGUgPSBuZXh0U2libGluZyhub2RlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFN0YXRpYzpcclxuICAgICAgICAgICAgICAgIGlmIChkb21UeXBlICE9PSAxIC8qIEVMRU1FTlQgKi8pIHtcclxuICAgICAgICAgICAgICAgICAgICBuZXh0Tm9kZSA9IG9uTWlzbWF0Y2goKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGRldGVybWluZSBhbmNob3IsIGFkb3B0IGNvbnRlbnRcclxuICAgICAgICAgICAgICAgICAgICBuZXh0Tm9kZSA9IG5vZGU7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gaWYgdGhlIHN0YXRpYyB2bm9kZSBoYXMgaXRzIGNvbnRlbnQgc3RyaXBwZWQgZHVyaW5nIGJ1aWxkLFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGFkb3B0IGl0IGZyb20gdGhlIHNlcnZlci1yZW5kZXJlZCBIVE1MLlxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5lZWRUb0Fkb3B0Q29udGVudCA9ICF2bm9kZS5jaGlsZHJlbi5sZW5ndGg7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB2bm9kZS5zdGF0aWNDb3VudDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuZWVkVG9BZG9wdENvbnRlbnQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2bm9kZS5jaGlsZHJlbiArPSBuZXh0Tm9kZS5vdXRlckhUTUw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpID09PSB2bm9kZS5zdGF0aWNDb3VudCAtIDEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZub2RlLmFuY2hvciA9IG5leHROb2RlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5leHROb2RlID0gbmV4dFNpYmxpbmcobmV4dE5vZGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV4dE5vZGU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBGcmFnbWVudDpcclxuICAgICAgICAgICAgICAgIGlmICghaXNGcmFnbWVudFN0YXJ0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbmV4dE5vZGUgPSBvbk1pc21hdGNoKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBuZXh0Tm9kZSA9IGh5ZHJhdGVGcmFnbWVudChub2RlLCB2bm9kZSwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICBpZiAoc2hhcGVGbGFnICYgMSAvKiBFTEVNRU5UICovKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRvbVR5cGUgIT09IDEgLyogRUxFTUVOVCAqLyB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2bm9kZS50eXBlLnRvTG93ZXJDYXNlKCkgIT09XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub2RlLnRhZ05hbWUudG9Mb3dlckNhc2UoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXh0Tm9kZSA9IG9uTWlzbWF0Y2goKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5leHROb2RlID0gaHlkcmF0ZUVsZW1lbnQobm9kZSwgdm5vZGUsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChzaGFwZUZsYWcgJiA2IC8qIENPTVBPTkVOVCAqLykge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIHdoZW4gc2V0dGluZyB1cCB0aGUgcmVuZGVyIGVmZmVjdCwgaWYgdGhlIGluaXRpYWwgdm5vZGUgYWxyZWFkeVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGhhcyAuZWwgc2V0LCB0aGUgY29tcG9uZW50IHdpbGwgcGVyZm9ybSBoeWRyYXRpb24gaW5zdGVhZCBvZiBtb3VudFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIG9uIGl0cyBzdWItdHJlZS5cclxuICAgICAgICAgICAgICAgICAgICB2bm9kZS5zbG90U2NvcGVJZHMgPSBzbG90U2NvcGVJZHM7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY29udGFpbmVyID0gcGFyZW50Tm9kZShub2RlKTtcclxuICAgICAgICAgICAgICAgICAgICBtb3VudENvbXBvbmVudCh2bm9kZSwgY29udGFpbmVyLCBudWxsLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBpc1NWR0NvbnRhaW5lcihjb250YWluZXIpLCBvcHRpbWl6ZWQpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGNvbXBvbmVudCBtYXkgYmUgYXN5bmMsIHNvIGluIHRoZSBjYXNlIG9mIGZyYWdtZW50cyB3ZSBjYW5ub3QgcmVseVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIG9uIGNvbXBvbmVudCdzIHJlbmRlcmVkIG91dHB1dCB0byBkZXRlcm1pbmUgdGhlIGVuZCBvZiB0aGUgZnJhZ21lbnRcclxuICAgICAgICAgICAgICAgICAgICAvLyBpbnN0ZWFkLCB3ZSBkbyBhIGxvb2thaGVhZCB0byBmaW5kIHRoZSBlbmQgYW5jaG9yIG5vZGUuXHJcbiAgICAgICAgICAgICAgICAgICAgbmV4dE5vZGUgPSBpc0ZyYWdtZW50U3RhcnRcclxuICAgICAgICAgICAgICAgICAgICAgICAgPyBsb2NhdGVDbG9zaW5nQXN5bmNBbmNob3Iobm9kZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgOiBuZXh0U2libGluZyhub2RlKTtcclxuICAgICAgICAgICAgICAgICAgICAvLyAjMzc4N1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGlmIGNvbXBvbmVudCBpcyBhc3luYywgaXQgbWF5IGdldCBtb3ZlZCAvIHVubW91bnRlZCBiZWZvcmUgaXRzXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gaW5uZXIgY29tcG9uZW50IGlzIGxvYWRlZCwgc28gd2UgbmVlZCB0byBnaXZlIGl0IGEgcGxhY2Vob2xkZXJcclxuICAgICAgICAgICAgICAgICAgICAvLyB2bm9kZSB0aGF0IG1hdGNoZXMgaXRzIGFkb3B0ZWQgRE9NLlxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpc0FzeW5jV3JhcHBlcih2bm9kZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHN1YlRyZWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc0ZyYWdtZW50U3RhcnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1YlRyZWUgPSBjcmVhdGVWTm9kZShGcmFnbWVudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJUcmVlLmFuY2hvciA9IG5leHROb2RlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBuZXh0Tm9kZS5wcmV2aW91c1NpYmxpbmdcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IGNvbnRhaW5lci5sYXN0Q2hpbGQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJUcmVlID1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub2RlLm5vZGVUeXBlID09PSAzID8gY3JlYXRlVGV4dFZOb2RlKCcnKSA6IGNyZWF0ZVZOb2RlKCdkaXYnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdWJUcmVlLmVsID0gbm9kZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdm5vZGUuY29tcG9uZW50LnN1YlRyZWUgPSBzdWJUcmVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHNoYXBlRmxhZyAmIDY0IC8qIFRFTEVQT1JUICovKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRvbVR5cGUgIT09IDggLyogQ09NTUVOVCAqLykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXh0Tm9kZSA9IG9uTWlzbWF0Y2goKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5leHROb2RlID0gdm5vZGUudHlwZS5oeWRyYXRlKG5vZGUsIHZub2RlLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCwgcmVuZGVyZXJJbnRlcm5hbHMsIGh5ZHJhdGVDaGlsZHJlbik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoc2hhcGVGbGFnICYgMTI4IC8qIFNVU1BFTlNFICovKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbmV4dE5vZGUgPSB2bm9kZS50eXBlLmh5ZHJhdGUobm9kZSwgdm5vZGUsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIGlzU1ZHQ29udGFpbmVyKHBhcmVudE5vZGUobm9kZSkpLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCwgcmVuZGVyZXJJbnRlcm5hbHMsIGh5ZHJhdGVOb2RlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHdhcm4oJ0ludmFsaWQgSG9zdFZOb2RlIHR5cGU6JywgdHlwZSwgYCgke3R5cGVvZiB0eXBlfSlgKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHJlZiAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgIHNldFJlZihyZWYsIG51bGwsIHBhcmVudFN1c3BlbnNlLCB2bm9kZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBuZXh0Tm9kZTtcclxuICAgIH07XHJcbiAgICBjb25zdCBoeWRyYXRlRWxlbWVudCA9IChlbCwgdm5vZGUsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkKSA9PiB7XHJcbiAgICAgICAgb3B0aW1pemVkID0gb3B0aW1pemVkIHx8ICEhdm5vZGUuZHluYW1pY0NoaWxkcmVuO1xyXG4gICAgICAgIGNvbnN0IHsgdHlwZSwgcHJvcHMsIHBhdGNoRmxhZywgc2hhcGVGbGFnLCBkaXJzIH0gPSB2bm9kZTtcclxuICAgICAgICAvLyAjNDAwNiBmb3IgZm9ybSBlbGVtZW50cyB3aXRoIG5vbi1zdHJpbmcgdi1tb2RlbCB2YWx1ZSBiaW5kaW5nc1xyXG4gICAgICAgIC8vIGUuZy4gPG9wdGlvbiA6dmFsdWU9XCJvYmpcIj4sIDxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiA6dHJ1ZS12YWx1ZT1cIjFcIj5cclxuICAgICAgICBjb25zdCBmb3JjZVBhdGNoVmFsdWUgPSAodHlwZSA9PT0gJ2lucHV0JyAmJiBkaXJzKSB8fCB0eXBlID09PSAnb3B0aW9uJztcclxuICAgICAgICAvLyBza2lwIHByb3BzICYgY2hpbGRyZW4gaWYgdGhpcyBpcyBob2lzdGVkIHN0YXRpYyBub2Rlc1xyXG4gICAgICAgIC8vICM1NDA1IGluIGRldiwgYWx3YXlzIGh5ZHJhdGUgY2hpbGRyZW4gZm9yIEhNUlxyXG4gICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgfHwgZm9yY2VQYXRjaFZhbHVlIHx8IHBhdGNoRmxhZyAhPT0gLTEgLyogSE9JU1RFRCAqLykge1xyXG4gICAgICAgICAgICBpZiAoZGlycykge1xyXG4gICAgICAgICAgICAgICAgaW52b2tlRGlyZWN0aXZlSG9vayh2bm9kZSwgbnVsbCwgcGFyZW50Q29tcG9uZW50LCAnY3JlYXRlZCcpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIHByb3BzXHJcbiAgICAgICAgICAgIGlmIChwcm9wcykge1xyXG4gICAgICAgICAgICAgICAgaWYgKGZvcmNlUGF0Y2hWYWx1ZSB8fFxyXG4gICAgICAgICAgICAgICAgICAgICFvcHRpbWl6ZWQgfHxcclxuICAgICAgICAgICAgICAgICAgICBwYXRjaEZsYWcgJiAoMTYgLyogRlVMTF9QUk9QUyAqLyB8IDMyIC8qIEhZRFJBVEVfRVZFTlRTICovKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIHByb3BzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgoZm9yY2VQYXRjaFZhbHVlICYmIGtleS5lbmRzV2l0aCgndmFsdWUnKSkgfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIChpc09uKGtleSkgJiYgIWlzUmVzZXJ2ZWRQcm9wKGtleSkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXRjaFByb3AoZWwsIGtleSwgbnVsbCwgcHJvcHNba2V5XSwgZmFsc2UsIHVuZGVmaW5lZCwgcGFyZW50Q29tcG9uZW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHByb3BzLm9uQ2xpY2spIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBGYXN0IHBhdGggZm9yIGNsaWNrIGxpc3RlbmVycyAod2hpY2ggaXMgbW9zdCBvZnRlbikgdG8gYXZvaWRcclxuICAgICAgICAgICAgICAgICAgICAvLyBpdGVyYXRpbmcgdGhyb3VnaCBwcm9wcy5cclxuICAgICAgICAgICAgICAgICAgICBwYXRjaFByb3AoZWwsICdvbkNsaWNrJywgbnVsbCwgcHJvcHMub25DbGljaywgZmFsc2UsIHVuZGVmaW5lZCwgcGFyZW50Q29tcG9uZW50KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyB2bm9kZSAvIGRpcmVjdGl2ZSBob29rc1xyXG4gICAgICAgICAgICBsZXQgdm5vZGVIb29rcztcclxuICAgICAgICAgICAgaWYgKCh2bm9kZUhvb2tzID0gcHJvcHMgJiYgcHJvcHMub25Wbm9kZUJlZm9yZU1vdW50KSkge1xyXG4gICAgICAgICAgICAgICAgaW52b2tlVk5vZGVIb29rKHZub2RlSG9va3MsIHBhcmVudENvbXBvbmVudCwgdm5vZGUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChkaXJzKSB7XHJcbiAgICAgICAgICAgICAgICBpbnZva2VEaXJlY3RpdmVIb29rKHZub2RlLCBudWxsLCBwYXJlbnRDb21wb25lbnQsICdiZWZvcmVNb3VudCcpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICgodm5vZGVIb29rcyA9IHByb3BzICYmIHByb3BzLm9uVm5vZGVNb3VudGVkKSB8fCBkaXJzKSB7XHJcbiAgICAgICAgICAgICAgICBxdWV1ZUVmZmVjdFdpdGhTdXNwZW5zZSgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdm5vZGVIb29rcyAmJiBpbnZva2VWTm9kZUhvb2sodm5vZGVIb29rcywgcGFyZW50Q29tcG9uZW50LCB2bm9kZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgZGlycyAmJiBpbnZva2VEaXJlY3RpdmVIb29rKHZub2RlLCBudWxsLCBwYXJlbnRDb21wb25lbnQsICdtb3VudGVkJyk7XHJcbiAgICAgICAgICAgICAgICB9LCBwYXJlbnRTdXNwZW5zZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gY2hpbGRyZW5cclxuICAgICAgICAgICAgaWYgKHNoYXBlRmxhZyAmIDE2IC8qIEFSUkFZX0NISUxEUkVOICovICYmXHJcbiAgICAgICAgICAgICAgICAvLyBza2lwIGlmIGVsZW1lbnQgaGFzIGlubmVySFRNTCAvIHRleHRDb250ZW50XHJcbiAgICAgICAgICAgICAgICAhKHByb3BzICYmIChwcm9wcy5pbm5lckhUTUwgfHwgcHJvcHMudGV4dENvbnRlbnQpKSkge1xyXG4gICAgICAgICAgICAgICAgbGV0IG5leHQgPSBoeWRyYXRlQ2hpbGRyZW4oZWwuZmlyc3RDaGlsZCwgdm5vZGUsIGVsLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCk7XHJcbiAgICAgICAgICAgICAgICBsZXQgaGFzV2FybmVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB3aGlsZSAobmV4dCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGhhc01pc21hdGNoID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmICFoYXNXYXJuZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgd2FybihgSHlkcmF0aW9uIGNoaWxkcmVuIG1pc21hdGNoIGluIDwke3Zub2RlLnR5cGV9PjogYCArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBgc2VydmVyIHJlbmRlcmVkIGVsZW1lbnQgY29udGFpbnMgbW9yZSBjaGlsZCBub2RlcyB0aGFuIGNsaWVudCB2ZG9tLmApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBoYXNXYXJuZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAvLyBUaGUgU1NSZWQgRE9NIGNvbnRhaW5zIG1vcmUgbm9kZXMgdGhhbiBpdCBzaG91bGQuIFJlbW92ZSB0aGVtLlxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGN1ciA9IG5leHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgbmV4dCA9IG5leHQubmV4dFNpYmxpbmc7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVtb3ZlKGN1cik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoc2hhcGVGbGFnICYgOCAvKiBURVhUX0NISUxEUkVOICovKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZWwudGV4dENvbnRlbnQgIT09IHZub2RlLmNoaWxkcmVuKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaGFzTWlzbWF0Y2ggPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB3YXJuKGBIeWRyYXRpb24gdGV4dCBjb250ZW50IG1pc21hdGNoIGluIDwke3Zub2RlLnR5cGV9PjpcXG5gICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGAtIENsaWVudDogJHtlbC50ZXh0Q29udGVudH1cXG5gICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGAtIFNlcnZlcjogJHt2bm9kZS5jaGlsZHJlbn1gKTtcclxuICAgICAgICAgICAgICAgICAgICBlbC50ZXh0Q29udGVudCA9IHZub2RlLmNoaWxkcmVuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBlbC5uZXh0U2libGluZztcclxuICAgIH07XHJcbiAgICBjb25zdCBoeWRyYXRlQ2hpbGRyZW4gPSAobm9kZSwgcGFyZW50Vk5vZGUsIGNvbnRhaW5lciwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQpID0+IHtcclxuICAgICAgICBvcHRpbWl6ZWQgPSBvcHRpbWl6ZWQgfHwgISFwYXJlbnRWTm9kZS5keW5hbWljQ2hpbGRyZW47XHJcbiAgICAgICAgY29uc3QgY2hpbGRyZW4gPSBwYXJlbnRWTm9kZS5jaGlsZHJlbjtcclxuICAgICAgICBjb25zdCBsID0gY2hpbGRyZW4ubGVuZ3RoO1xyXG4gICAgICAgIGxldCBoYXNXYXJuZWQgPSBmYWxzZTtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGw7IGkrKykge1xyXG4gICAgICAgICAgICBjb25zdCB2bm9kZSA9IG9wdGltaXplZFxyXG4gICAgICAgICAgICAgICAgPyBjaGlsZHJlbltpXVxyXG4gICAgICAgICAgICAgICAgOiAoY2hpbGRyZW5baV0gPSBub3JtYWxpemVWTm9kZShjaGlsZHJlbltpXSkpO1xyXG4gICAgICAgICAgICBpZiAobm9kZSkge1xyXG4gICAgICAgICAgICAgICAgbm9kZSA9IGh5ZHJhdGVOb2RlKG5vZGUsIHZub2RlLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAodm5vZGUudHlwZSA9PT0gVGV4dCAmJiAhdm5vZGUuY2hpbGRyZW4pIHtcclxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaGFzTWlzbWF0Y2ggPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiAhaGFzV2FybmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgd2FybihgSHlkcmF0aW9uIGNoaWxkcmVuIG1pc21hdGNoIGluIDwke2NvbnRhaW5lci50YWdOYW1lLnRvTG93ZXJDYXNlKCl9PjogYCArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGBzZXJ2ZXIgcmVuZGVyZWQgZWxlbWVudCBjb250YWlucyBmZXdlciBjaGlsZCBub2RlcyB0aGFuIGNsaWVudCB2ZG9tLmApO1xyXG4gICAgICAgICAgICAgICAgICAgIGhhc1dhcm5lZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyB0aGUgU1NSZWQgRE9NIGRpZG4ndCBjb250YWluIGVub3VnaCBub2Rlcy4gTW91bnQgdGhlIG1pc3Npbmcgb25lcy5cclxuICAgICAgICAgICAgICAgIHBhdGNoKG51bGwsIHZub2RlLCBjb250YWluZXIsIG51bGwsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIGlzU1ZHQ29udGFpbmVyKGNvbnRhaW5lciksIHNsb3RTY29wZUlkcyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG5vZGU7XHJcbiAgICB9O1xyXG4gICAgY29uc3QgaHlkcmF0ZUZyYWdtZW50ID0gKG5vZGUsIHZub2RlLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IHsgc2xvdFNjb3BlSWRzOiBmcmFnbWVudFNsb3RTY29wZUlkcyB9ID0gdm5vZGU7XHJcbiAgICAgICAgaWYgKGZyYWdtZW50U2xvdFNjb3BlSWRzKSB7XHJcbiAgICAgICAgICAgIHNsb3RTY29wZUlkcyA9IHNsb3RTY29wZUlkc1xyXG4gICAgICAgICAgICAgICAgPyBzbG90U2NvcGVJZHMuY29uY2F0KGZyYWdtZW50U2xvdFNjb3BlSWRzKVxyXG4gICAgICAgICAgICAgICAgOiBmcmFnbWVudFNsb3RTY29wZUlkcztcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgY29udGFpbmVyID0gcGFyZW50Tm9kZShub2RlKTtcclxuICAgICAgICBjb25zdCBuZXh0ID0gaHlkcmF0ZUNoaWxkcmVuKG5leHRTaWJsaW5nKG5vZGUpLCB2bm9kZSwgY29udGFpbmVyLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCk7XHJcbiAgICAgICAgaWYgKG5leHQgJiYgaXNDb21tZW50KG5leHQpICYmIG5leHQuZGF0YSA9PT0gJ10nKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXh0U2libGluZygodm5vZGUuYW5jaG9yID0gbmV4dCkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgLy8gZnJhZ21lbnQgZGlkbid0IGh5ZHJhdGUgc3VjY2Vzc2Z1bGx5LCBzaW5jZSB3ZSBkaWRuJ3QgZ2V0IGEgZW5kIGFuY2hvclxyXG4gICAgICAgICAgICAvLyBiYWNrLiBUaGlzIHNob3VsZCBoYXZlIGxlZCB0byBub2RlL2NoaWxkcmVuIG1pc21hdGNoIHdhcm5pbmdzLlxyXG4gICAgICAgICAgICBoYXNNaXNtYXRjaCA9IHRydWU7XHJcbiAgICAgICAgICAgIC8vIHNpbmNlIHRoZSBhbmNob3IgaXMgbWlzc2luZywgd2UgbmVlZCB0byBjcmVhdGUgb25lIGFuZCBpbnNlcnQgaXRcclxuICAgICAgICAgICAgaW5zZXJ0KCh2bm9kZS5hbmNob3IgPSBjcmVhdGVDb21tZW50KGBdYCkpLCBjb250YWluZXIsIG5leHQpO1xyXG4gICAgICAgICAgICByZXR1cm4gbmV4dDtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgY29uc3QgaGFuZGxlTWlzbWF0Y2ggPSAobm9kZSwgdm5vZGUsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIHNsb3RTY29wZUlkcywgaXNGcmFnbWVudCkgPT4ge1xyXG4gICAgICAgIGhhc01pc21hdGNoID0gdHJ1ZTtcclxuICAgICAgICAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiZcclxuICAgICAgICAgICAgd2FybihgSHlkcmF0aW9uIG5vZGUgbWlzbWF0Y2g6XFxuLSBDbGllbnQgdm5vZGU6YCwgdm5vZGUudHlwZSwgYFxcbi0gU2VydmVyIHJlbmRlcmVkIERPTTpgLCBub2RlLCBub2RlLm5vZGVUeXBlID09PSAzIC8qIFRFWFQgKi9cclxuICAgICAgICAgICAgICAgID8gYCh0ZXh0KWBcclxuICAgICAgICAgICAgICAgIDogaXNDb21tZW50KG5vZGUpICYmIG5vZGUuZGF0YSA9PT0gJ1snXHJcbiAgICAgICAgICAgICAgICAgICAgPyBgKHN0YXJ0IG9mIGZyYWdtZW50KWBcclxuICAgICAgICAgICAgICAgICAgICA6IGBgKTtcclxuICAgICAgICB2bm9kZS5lbCA9IG51bGw7XHJcbiAgICAgICAgaWYgKGlzRnJhZ21lbnQpIHtcclxuICAgICAgICAgICAgLy8gcmVtb3ZlIGV4Y2Vzc2l2ZSBmcmFnbWVudCBub2Rlc1xyXG4gICAgICAgICAgICBjb25zdCBlbmQgPSBsb2NhdGVDbG9zaW5nQXN5bmNBbmNob3Iobm9kZSk7XHJcbiAgICAgICAgICAgIHdoaWxlICh0cnVlKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBuZXh0ID0gbmV4dFNpYmxpbmcobm9kZSk7XHJcbiAgICAgICAgICAgICAgICBpZiAobmV4dCAmJiBuZXh0ICE9PSBlbmQpIHtcclxuICAgICAgICAgICAgICAgICAgICByZW1vdmUobmV4dCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBuZXh0ID0gbmV4dFNpYmxpbmcobm9kZSk7XHJcbiAgICAgICAgY29uc3QgY29udGFpbmVyID0gcGFyZW50Tm9kZShub2RlKTtcclxuICAgICAgICByZW1vdmUobm9kZSk7XHJcbiAgICAgICAgcGF0Y2gobnVsbCwgdm5vZGUsIGNvbnRhaW5lciwgbmV4dCwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgaXNTVkdDb250YWluZXIoY29udGFpbmVyKSwgc2xvdFNjb3BlSWRzKTtcclxuICAgICAgICByZXR1cm4gbmV4dDtcclxuICAgIH07XHJcbiAgICBjb25zdCBsb2NhdGVDbG9zaW5nQXN5bmNBbmNob3IgPSAobm9kZSkgPT4ge1xyXG4gICAgICAgIGxldCBtYXRjaCA9IDA7XHJcbiAgICAgICAgd2hpbGUgKG5vZGUpIHtcclxuICAgICAgICAgICAgbm9kZSA9IG5leHRTaWJsaW5nKG5vZGUpO1xyXG4gICAgICAgICAgICBpZiAobm9kZSAmJiBpc0NvbW1lbnQobm9kZSkpIHtcclxuICAgICAgICAgICAgICAgIGlmIChub2RlLmRhdGEgPT09ICdbJylcclxuICAgICAgICAgICAgICAgICAgICBtYXRjaCsrO1xyXG4gICAgICAgICAgICAgICAgaWYgKG5vZGUuZGF0YSA9PT0gJ10nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1hdGNoID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXh0U2libGluZyhub2RlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hdGNoLS07XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBub2RlO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBbaHlkcmF0ZSwgaHlkcmF0ZU5vZGVdO1xyXG59XG5cbi8qIGVzbGludC1kaXNhYmxlIG5vLXJlc3RyaWN0ZWQtZ2xvYmFscyAqL1xyXG5sZXQgc3VwcG9ydGVkO1xyXG5sZXQgcGVyZjtcclxuZnVuY3Rpb24gc3RhcnRNZWFzdXJlKGluc3RhbmNlLCB0eXBlKSB7XHJcbiAgICBpZiAoaW5zdGFuY2UuYXBwQ29udGV4dC5jb25maWcucGVyZm9ybWFuY2UgJiYgaXNTdXBwb3J0ZWQoKSkge1xyXG4gICAgICAgIHBlcmYubWFyayhgdnVlLSR7dHlwZX0tJHtpbnN0YW5jZS51aWR9YCk7XHJcbiAgICB9XHJcbiAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHx8IF9fVlVFX1BST0RfREVWVE9PTFNfXykge1xyXG4gICAgICAgIGRldnRvb2xzUGVyZlN0YXJ0KGluc3RhbmNlLCB0eXBlLCBpc1N1cHBvcnRlZCgpID8gcGVyZi5ub3coKSA6IERhdGUubm93KCkpO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIGVuZE1lYXN1cmUoaW5zdGFuY2UsIHR5cGUpIHtcclxuICAgIGlmIChpbnN0YW5jZS5hcHBDb250ZXh0LmNvbmZpZy5wZXJmb3JtYW5jZSAmJiBpc1N1cHBvcnRlZCgpKSB7XHJcbiAgICAgICAgY29uc3Qgc3RhcnRUYWcgPSBgdnVlLSR7dHlwZX0tJHtpbnN0YW5jZS51aWR9YDtcclxuICAgICAgICBjb25zdCBlbmRUYWcgPSBzdGFydFRhZyArIGA6ZW5kYDtcclxuICAgICAgICBwZXJmLm1hcmsoZW5kVGFnKTtcclxuICAgICAgICBwZXJmLm1lYXN1cmUoYDwke2Zvcm1hdENvbXBvbmVudE5hbWUoaW5zdGFuY2UsIGluc3RhbmNlLnR5cGUpfT4gJHt0eXBlfWAsIHN0YXJ0VGFnLCBlbmRUYWcpO1xyXG4gICAgICAgIHBlcmYuY2xlYXJNYXJrcyhzdGFydFRhZyk7XHJcbiAgICAgICAgcGVyZi5jbGVhck1hcmtzKGVuZFRhZyk7XHJcbiAgICB9XHJcbiAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHx8IF9fVlVFX1BST0RfREVWVE9PTFNfXykge1xyXG4gICAgICAgIGRldnRvb2xzUGVyZkVuZChpbnN0YW5jZSwgdHlwZSwgaXNTdXBwb3J0ZWQoKSA/IHBlcmYubm93KCkgOiBEYXRlLm5vdygpKTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBpc1N1cHBvcnRlZCgpIHtcclxuICAgIGlmIChzdXBwb3J0ZWQgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIHJldHVybiBzdXBwb3J0ZWQ7XHJcbiAgICB9XHJcbiAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgd2luZG93LnBlcmZvcm1hbmNlKSB7XHJcbiAgICAgICAgc3VwcG9ydGVkID0gdHJ1ZTtcclxuICAgICAgICBwZXJmID0gd2luZG93LnBlcmZvcm1hbmNlO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgc3VwcG9ydGVkID0gZmFsc2U7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gc3VwcG9ydGVkO1xyXG59XG5cbi8qKlxyXG4gKiBUaGlzIGlzIG9ubHkgY2FsbGVkIGluIGVzbS1idW5kbGVyIGJ1aWxkcy5cclxuICogSXQgaXMgY2FsbGVkIHdoZW4gYSByZW5kZXJlciBpcyBjcmVhdGVkLCBpbiBgYmFzZUNyZWF0ZVJlbmRlcmVyYCBzbyB0aGF0XHJcbiAqIGltcG9ydGluZyBydW50aW1lLWNvcmUgaXMgc2lkZS1lZmZlY3RzIGZyZWUuXHJcbiAqXHJcbiAqIGlzdGFuYnVsLWlnbm9yZS1uZXh0XHJcbiAqL1xyXG5mdW5jdGlvbiBpbml0RmVhdHVyZUZsYWdzKCkge1xyXG4gICAgY29uc3QgbmVlZFdhcm4gPSBbXTtcclxuICAgIGlmICh0eXBlb2YgX19WVUVfT1BUSU9OU19BUElfXyAhPT0gJ2Jvb2xlYW4nKSB7XHJcbiAgICAgICAgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmIG5lZWRXYXJuLnB1c2goYF9fVlVFX09QVElPTlNfQVBJX19gKTtcclxuICAgICAgICBnZXRHbG9iYWxUaGlzKCkuX19WVUVfT1BUSU9OU19BUElfXyA9IHRydWU7XHJcbiAgICB9XHJcbiAgICBpZiAodHlwZW9mIF9fVlVFX1BST0RfREVWVE9PTFNfXyAhPT0gJ2Jvb2xlYW4nKSB7XHJcbiAgICAgICAgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmIG5lZWRXYXJuLnB1c2goYF9fVlVFX1BST0RfREVWVE9PTFNfX2ApO1xyXG4gICAgICAgIGdldEdsb2JhbFRoaXMoKS5fX1ZVRV9QUk9EX0RFVlRPT0xTX18gPSBmYWxzZTtcclxuICAgIH1cclxuICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgbmVlZFdhcm4ubGVuZ3RoKSB7XHJcbiAgICAgICAgY29uc3QgbXVsdGkgPSBuZWVkV2Fybi5sZW5ndGggPiAxO1xyXG4gICAgICAgIGNvbnNvbGUud2FybihgRmVhdHVyZSBmbGFnJHttdWx0aSA/IGBzYCA6IGBgfSAke25lZWRXYXJuLmpvaW4oJywgJyl9ICR7bXVsdGkgPyBgYXJlYCA6IGBpc2B9IG5vdCBleHBsaWNpdGx5IGRlZmluZWQuIFlvdSBhcmUgcnVubmluZyB0aGUgZXNtLWJ1bmRsZXIgYnVpbGQgb2YgVnVlLCBgICtcclxuICAgICAgICAgICAgYHdoaWNoIGV4cGVjdHMgdGhlc2UgY29tcGlsZS10aW1lIGZlYXR1cmUgZmxhZ3MgdG8gYmUgZ2xvYmFsbHkgaW5qZWN0ZWQgYCArXHJcbiAgICAgICAgICAgIGB2aWEgdGhlIGJ1bmRsZXIgY29uZmlnIGluIG9yZGVyIHRvIGdldCBiZXR0ZXIgdHJlZS1zaGFraW5nIGluIHRoZSBgICtcclxuICAgICAgICAgICAgYHByb2R1Y3Rpb24gYnVuZGxlLlxcblxcbmAgK1xyXG4gICAgICAgICAgICBgRm9yIG1vcmUgZGV0YWlscywgc2VlIGh0dHBzOi8vbGluay52dWVqcy5vcmcvZmVhdHVyZS1mbGFncy5gKTtcclxuICAgIH1cclxufVxuXG5jb25zdCBxdWV1ZVBvc3RSZW5kZXJFZmZlY3QgPSBxdWV1ZUVmZmVjdFdpdGhTdXNwZW5zZVxyXG4gICAgO1xyXG4vKipcclxuICogVGhlIGNyZWF0ZVJlbmRlcmVyIGZ1bmN0aW9uIGFjY2VwdHMgdHdvIGdlbmVyaWMgYXJndW1lbnRzOlxyXG4gKiBIb3N0Tm9kZSBhbmQgSG9zdEVsZW1lbnQsIGNvcnJlc3BvbmRpbmcgdG8gTm9kZSBhbmQgRWxlbWVudCB0eXBlcyBpbiB0aGVcclxuICogaG9zdCBlbnZpcm9ubWVudC4gRm9yIGV4YW1wbGUsIGZvciBydW50aW1lLWRvbSwgSG9zdE5vZGUgd291bGQgYmUgdGhlIERPTVxyXG4gKiBgTm9kZWAgaW50ZXJmYWNlIGFuZCBIb3N0RWxlbWVudCB3b3VsZCBiZSB0aGUgRE9NIGBFbGVtZW50YCBpbnRlcmZhY2UuXHJcbiAqXHJcbiAqIEN1c3RvbSByZW5kZXJlcnMgY2FuIHBhc3MgaW4gdGhlIHBsYXRmb3JtIHNwZWNpZmljIHR5cGVzIGxpa2UgdGhpczpcclxuICpcclxuICogYGBgIGpzXHJcbiAqIGNvbnN0IHsgcmVuZGVyLCBjcmVhdGVBcHAgfSA9IGNyZWF0ZVJlbmRlcmVyPE5vZGUsIEVsZW1lbnQ+KHtcclxuICogICBwYXRjaFByb3AsXHJcbiAqICAgLi4ubm9kZU9wc1xyXG4gKiB9KVxyXG4gKiBgYGBcclxuICovXHJcbmZ1bmN0aW9uIGNyZWF0ZVJlbmRlcmVyKG9wdGlvbnMpIHtcclxuICAgIHJldHVybiBiYXNlQ3JlYXRlUmVuZGVyZXIob3B0aW9ucyk7XHJcbn1cclxuLy8gU2VwYXJhdGUgQVBJIGZvciBjcmVhdGluZyBoeWRyYXRpb24tZW5hYmxlZCByZW5kZXJlci5cclxuLy8gSHlkcmF0aW9uIGxvZ2ljIGlzIG9ubHkgdXNlZCB3aGVuIGNhbGxpbmcgdGhpcyBmdW5jdGlvbiwgbWFraW5nIGl0XHJcbi8vIHRyZWUtc2hha2FibGUuXHJcbmZ1bmN0aW9uIGNyZWF0ZUh5ZHJhdGlvblJlbmRlcmVyKG9wdGlvbnMpIHtcclxuICAgIHJldHVybiBiYXNlQ3JlYXRlUmVuZGVyZXIob3B0aW9ucywgY3JlYXRlSHlkcmF0aW9uRnVuY3Rpb25zKTtcclxufVxyXG4vLyBpbXBsZW1lbnRhdGlvblxyXG5mdW5jdGlvbiBiYXNlQ3JlYXRlUmVuZGVyZXIob3B0aW9ucywgY3JlYXRlSHlkcmF0aW9uRm5zKSB7XHJcbiAgICAvLyBjb21waWxlLXRpbWUgZmVhdHVyZSBmbGFncyBjaGVja1xyXG4gICAge1xyXG4gICAgICAgIGluaXRGZWF0dXJlRmxhZ3MoKTtcclxuICAgIH1cclxuICAgIGNvbnN0IHRhcmdldCA9IGdldEdsb2JhbFRoaXMoKTtcclxuICAgIHRhcmdldC5fX1ZVRV9fID0gdHJ1ZTtcclxuICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgfHwgX19WVUVfUFJPRF9ERVZUT09MU19fKSB7XHJcbiAgICAgICAgc2V0RGV2dG9vbHNIb29rKHRhcmdldC5fX1ZVRV9ERVZUT09MU19HTE9CQUxfSE9PS19fLCB0YXJnZXQpO1xyXG4gICAgfVxyXG4gICAgY29uc3QgeyBpbnNlcnQ6IGhvc3RJbnNlcnQsIHJlbW92ZTogaG9zdFJlbW92ZSwgcGF0Y2hQcm9wOiBob3N0UGF0Y2hQcm9wLCBjcmVhdGVFbGVtZW50OiBob3N0Q3JlYXRlRWxlbWVudCwgY3JlYXRlVGV4dDogaG9zdENyZWF0ZVRleHQsIGNyZWF0ZUNvbW1lbnQ6IGhvc3RDcmVhdGVDb21tZW50LCBzZXRUZXh0OiBob3N0U2V0VGV4dCwgc2V0RWxlbWVudFRleHQ6IGhvc3RTZXRFbGVtZW50VGV4dCwgcGFyZW50Tm9kZTogaG9zdFBhcmVudE5vZGUsIG5leHRTaWJsaW5nOiBob3N0TmV4dFNpYmxpbmcsIHNldFNjb3BlSWQ6IGhvc3RTZXRTY29wZUlkID0gTk9PUCwgY2xvbmVOb2RlOiBob3N0Q2xvbmVOb2RlLCBpbnNlcnRTdGF0aWNDb250ZW50OiBob3N0SW5zZXJ0U3RhdGljQ29udGVudCB9ID0gb3B0aW9ucztcclxuICAgIC8vIE5vdGU6IGZ1bmN0aW9ucyBpbnNpZGUgdGhpcyBjbG9zdXJlIHNob3VsZCB1c2UgYGNvbnN0IHh4eCA9ICgpID0+IHt9YFxyXG4gICAgLy8gc3R5bGUgaW4gb3JkZXIgdG8gcHJldmVudCBiZWluZyBpbmxpbmVkIGJ5IG1pbmlmaWVycy5cclxuICAgIGNvbnN0IHBhdGNoID0gKG4xLCBuMiwgY29udGFpbmVyLCBhbmNob3IgPSBudWxsLCBwYXJlbnRDb21wb25lbnQgPSBudWxsLCBwYXJlbnRTdXNwZW5zZSA9IG51bGwsIGlzU1ZHID0gZmFsc2UsIHNsb3RTY29wZUlkcyA9IG51bGwsIG9wdGltaXplZCA9IChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiBpc0htclVwZGF0aW5nID8gZmFsc2UgOiAhIW4yLmR5bmFtaWNDaGlsZHJlbikgPT4ge1xyXG4gICAgICAgIGlmIChuMSA9PT0gbjIpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBwYXRjaGluZyAmIG5vdCBzYW1lIHR5cGUsIHVubW91bnQgb2xkIHRyZWVcclxuICAgICAgICBpZiAobjEgJiYgIWlzU2FtZVZOb2RlVHlwZShuMSwgbjIpKSB7XHJcbiAgICAgICAgICAgIGFuY2hvciA9IGdldE5leHRIb3N0Tm9kZShuMSk7XHJcbiAgICAgICAgICAgIHVubW91bnQobjEsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIHRydWUpO1xyXG4gICAgICAgICAgICBuMSA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChuMi5wYXRjaEZsYWcgPT09IC0yIC8qIEJBSUwgKi8pIHtcclxuICAgICAgICAgICAgb3B0aW1pemVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgIG4yLmR5bmFtaWNDaGlsZHJlbiA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHsgdHlwZSwgcmVmLCBzaGFwZUZsYWcgfSA9IG4yO1xyXG4gICAgICAgIHN3aXRjaCAodHlwZSkge1xyXG4gICAgICAgICAgICBjYXNlIFRleHQ6XHJcbiAgICAgICAgICAgICAgICBwcm9jZXNzVGV4dChuMSwgbjIsIGNvbnRhaW5lciwgYW5jaG9yKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIENvbW1lbnQ6XHJcbiAgICAgICAgICAgICAgICBwcm9jZXNzQ29tbWVudE5vZGUobjEsIG4yLCBjb250YWluZXIsIGFuY2hvcik7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBTdGF0aWM6XHJcbiAgICAgICAgICAgICAgICBpZiAobjEgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIG1vdW50U3RhdGljTm9kZShuMiwgY29udGFpbmVyLCBhbmNob3IsIGlzU1ZHKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHBhdGNoU3RhdGljTm9kZShuMSwgbjIsIGNvbnRhaW5lciwgaXNTVkcpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgRnJhZ21lbnQ6XHJcbiAgICAgICAgICAgICAgICBwcm9jZXNzRnJhZ21lbnQobjEsIG4yLCBjb250YWluZXIsIGFuY2hvciwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgaXNTVkcsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgaWYgKHNoYXBlRmxhZyAmIDEgLyogRUxFTUVOVCAqLykge1xyXG4gICAgICAgICAgICAgICAgICAgIHByb2Nlc3NFbGVtZW50KG4xLCBuMiwgY29udGFpbmVyLCBhbmNob3IsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIGlzU1ZHLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChzaGFwZUZsYWcgJiA2IC8qIENPTVBPTkVOVCAqLykge1xyXG4gICAgICAgICAgICAgICAgICAgIHByb2Nlc3NDb21wb25lbnQobjEsIG4yLCBjb250YWluZXIsIGFuY2hvciwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgaXNTVkcsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHNoYXBlRmxhZyAmIDY0IC8qIFRFTEVQT1JUICovKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZS5wcm9jZXNzKG4xLCBuMiwgY29udGFpbmVyLCBhbmNob3IsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIGlzU1ZHLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCwgaW50ZXJuYWxzKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHNoYXBlRmxhZyAmIDEyOCAvKiBTVVNQRU5TRSAqLykge1xyXG4gICAgICAgICAgICAgICAgICAgIHR5cGUucHJvY2VzcyhuMSwgbjIsIGNvbnRhaW5lciwgYW5jaG9yLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBpc1NWRywgc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQsIGludGVybmFscyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcclxuICAgICAgICAgICAgICAgICAgICB3YXJuKCdJbnZhbGlkIFZOb2RlIHR5cGU6JywgdHlwZSwgYCgke3R5cGVvZiB0eXBlfSlgKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gc2V0IHJlZlxyXG4gICAgICAgIGlmIChyZWYgIT0gbnVsbCAmJiBwYXJlbnRDb21wb25lbnQpIHtcclxuICAgICAgICAgICAgc2V0UmVmKHJlZiwgbjEgJiYgbjEucmVmLCBwYXJlbnRTdXNwZW5zZSwgbjIgfHwgbjEsICFuMik7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIGNvbnN0IHByb2Nlc3NUZXh0ID0gKG4xLCBuMiwgY29udGFpbmVyLCBhbmNob3IpID0+IHtcclxuICAgICAgICBpZiAobjEgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBob3N0SW5zZXJ0KChuMi5lbCA9IGhvc3RDcmVhdGVUZXh0KG4yLmNoaWxkcmVuKSksIGNvbnRhaW5lciwgYW5jaG9yKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGVsID0gKG4yLmVsID0gbjEuZWwpO1xyXG4gICAgICAgICAgICBpZiAobjIuY2hpbGRyZW4gIT09IG4xLmNoaWxkcmVuKSB7XHJcbiAgICAgICAgICAgICAgICBob3N0U2V0VGV4dChlbCwgbjIuY2hpbGRyZW4pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIGNvbnN0IHByb2Nlc3NDb21tZW50Tm9kZSA9IChuMSwgbjIsIGNvbnRhaW5lciwgYW5jaG9yKSA9PiB7XHJcbiAgICAgICAgaWYgKG4xID09IG51bGwpIHtcclxuICAgICAgICAgICAgaG9zdEluc2VydCgobjIuZWwgPSBob3N0Q3JlYXRlQ29tbWVudChuMi5jaGlsZHJlbiB8fCAnJykpLCBjb250YWluZXIsIGFuY2hvcik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAvLyB0aGVyZSdzIG5vIHN1cHBvcnQgZm9yIGR5bmFtaWMgY29tbWVudHNcclxuICAgICAgICAgICAgbjIuZWwgPSBuMS5lbDtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgY29uc3QgbW91bnRTdGF0aWNOb2RlID0gKG4yLCBjb250YWluZXIsIGFuY2hvciwgaXNTVkcpID0+IHtcclxuICAgICAgICBbbjIuZWwsIG4yLmFuY2hvcl0gPSBob3N0SW5zZXJ0U3RhdGljQ29udGVudChuMi5jaGlsZHJlbiwgY29udGFpbmVyLCBhbmNob3IsIGlzU1ZHLCBuMi5lbCwgbjIuYW5jaG9yKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIERldiAvIEhNUiBvbmx5XHJcbiAgICAgKi9cclxuICAgIGNvbnN0IHBhdGNoU3RhdGljTm9kZSA9IChuMSwgbjIsIGNvbnRhaW5lciwgaXNTVkcpID0+IHtcclxuICAgICAgICAvLyBzdGF0aWMgbm9kZXMgYXJlIG9ubHkgcGF0Y2hlZCBkdXJpbmcgZGV2IGZvciBITVJcclxuICAgICAgICBpZiAobjIuY2hpbGRyZW4gIT09IG4xLmNoaWxkcmVuKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGFuY2hvciA9IGhvc3ROZXh0U2libGluZyhuMS5hbmNob3IpO1xyXG4gICAgICAgICAgICAvLyByZW1vdmUgZXhpc3RpbmdcclxuICAgICAgICAgICAgcmVtb3ZlU3RhdGljTm9kZShuMSk7XHJcbiAgICAgICAgICAgIFtuMi5lbCwgbjIuYW5jaG9yXSA9IGhvc3RJbnNlcnRTdGF0aWNDb250ZW50KG4yLmNoaWxkcmVuLCBjb250YWluZXIsIGFuY2hvciwgaXNTVkcpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgbjIuZWwgPSBuMS5lbDtcclxuICAgICAgICAgICAgbjIuYW5jaG9yID0gbjEuYW5jaG9yO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBjb25zdCBtb3ZlU3RhdGljTm9kZSA9ICh7IGVsLCBhbmNob3IgfSwgY29udGFpbmVyLCBuZXh0U2libGluZykgPT4ge1xyXG4gICAgICAgIGxldCBuZXh0O1xyXG4gICAgICAgIHdoaWxlIChlbCAmJiBlbCAhPT0gYW5jaG9yKSB7XHJcbiAgICAgICAgICAgIG5leHQgPSBob3N0TmV4dFNpYmxpbmcoZWwpO1xyXG4gICAgICAgICAgICBob3N0SW5zZXJ0KGVsLCBjb250YWluZXIsIG5leHRTaWJsaW5nKTtcclxuICAgICAgICAgICAgZWwgPSBuZXh0O1xyXG4gICAgICAgIH1cclxuICAgICAgICBob3N0SW5zZXJ0KGFuY2hvciwgY29udGFpbmVyLCBuZXh0U2libGluZyk7XHJcbiAgICB9O1xyXG4gICAgY29uc3QgcmVtb3ZlU3RhdGljTm9kZSA9ICh7IGVsLCBhbmNob3IgfSkgPT4ge1xyXG4gICAgICAgIGxldCBuZXh0O1xyXG4gICAgICAgIHdoaWxlIChlbCAmJiBlbCAhPT0gYW5jaG9yKSB7XHJcbiAgICAgICAgICAgIG5leHQgPSBob3N0TmV4dFNpYmxpbmcoZWwpO1xyXG4gICAgICAgICAgICBob3N0UmVtb3ZlKGVsKTtcclxuICAgICAgICAgICAgZWwgPSBuZXh0O1xyXG4gICAgICAgIH1cclxuICAgICAgICBob3N0UmVtb3ZlKGFuY2hvcik7XHJcbiAgICB9O1xyXG4gICAgY29uc3QgcHJvY2Vzc0VsZW1lbnQgPSAobjEsIG4yLCBjb250YWluZXIsIGFuY2hvciwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgaXNTVkcsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkKSA9PiB7XHJcbiAgICAgICAgaXNTVkcgPSBpc1NWRyB8fCBuMi50eXBlID09PSAnc3ZnJztcclxuICAgICAgICBpZiAobjEgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBtb3VudEVsZW1lbnQobjIsIGNvbnRhaW5lciwgYW5jaG9yLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBpc1NWRywgc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcGF0Y2hFbGVtZW50KG4xLCBuMiwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgaXNTVkcsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgY29uc3QgbW91bnRFbGVtZW50ID0gKHZub2RlLCBjb250YWluZXIsIGFuY2hvciwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgaXNTVkcsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkKSA9PiB7XHJcbiAgICAgICAgbGV0IGVsO1xyXG4gICAgICAgIGxldCB2bm9kZUhvb2s7XHJcbiAgICAgICAgY29uc3QgeyB0eXBlLCBwcm9wcywgc2hhcGVGbGFnLCB0cmFuc2l0aW9uLCBwYXRjaEZsYWcsIGRpcnMgfSA9IHZub2RlO1xyXG4gICAgICAgIGlmICghKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmXHJcbiAgICAgICAgICAgIHZub2RlLmVsICYmXHJcbiAgICAgICAgICAgIGhvc3RDbG9uZU5vZGUgIT09IHVuZGVmaW5lZCAmJlxyXG4gICAgICAgICAgICBwYXRjaEZsYWcgPT09IC0xIC8qIEhPSVNURUQgKi8pIHtcclxuICAgICAgICAgICAgLy8gSWYgYSB2bm9kZSBoYXMgbm9uLW51bGwgZWwsIGl0IG1lYW5zIGl0J3MgYmVpbmcgcmV1c2VkLlxyXG4gICAgICAgICAgICAvLyBPbmx5IHN0YXRpYyB2bm9kZXMgY2FuIGJlIHJldXNlZCwgc28gaXRzIG1vdW50ZWQgRE9NIG5vZGVzIHNob3VsZCBiZVxyXG4gICAgICAgICAgICAvLyBleGFjdGx5IHRoZSBzYW1lLCBhbmQgd2UgY2FuIHNpbXBseSBkbyBhIGNsb25lIGhlcmUuXHJcbiAgICAgICAgICAgIC8vIG9ubHkgZG8gdGhpcyBpbiBwcm9kdWN0aW9uIHNpbmNlIGNsb25lZCB0cmVlcyBjYW5ub3QgYmUgSE1SIHVwZGF0ZWQuXHJcbiAgICAgICAgICAgIGVsID0gdm5vZGUuZWwgPSBob3N0Q2xvbmVOb2RlKHZub2RlLmVsKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGVsID0gdm5vZGUuZWwgPSBob3N0Q3JlYXRlRWxlbWVudCh2bm9kZS50eXBlLCBpc1NWRywgcHJvcHMgJiYgcHJvcHMuaXMsIHByb3BzKTtcclxuICAgICAgICAgICAgLy8gbW91bnQgY2hpbGRyZW4gZmlyc3QsIHNpbmNlIHNvbWUgcHJvcHMgbWF5IHJlbHkgb24gY2hpbGQgY29udGVudFxyXG4gICAgICAgICAgICAvLyBiZWluZyBhbHJlYWR5IHJlbmRlcmVkLCBlLmcuIGA8c2VsZWN0IHZhbHVlPmBcclxuICAgICAgICAgICAgaWYgKHNoYXBlRmxhZyAmIDggLyogVEVYVF9DSElMRFJFTiAqLykge1xyXG4gICAgICAgICAgICAgICAgaG9zdFNldEVsZW1lbnRUZXh0KGVsLCB2bm9kZS5jaGlsZHJlbik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoc2hhcGVGbGFnICYgMTYgLyogQVJSQVlfQ0hJTERSRU4gKi8pIHtcclxuICAgICAgICAgICAgICAgIG1vdW50Q2hpbGRyZW4odm5vZGUuY2hpbGRyZW4sIGVsLCBudWxsLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBpc1NWRyAmJiB0eXBlICE9PSAnZm9yZWlnbk9iamVjdCcsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoZGlycykge1xyXG4gICAgICAgICAgICAgICAgaW52b2tlRGlyZWN0aXZlSG9vayh2bm9kZSwgbnVsbCwgcGFyZW50Q29tcG9uZW50LCAnY3JlYXRlZCcpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIHByb3BzXHJcbiAgICAgICAgICAgIGlmIChwcm9wcykge1xyXG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gcHJvcHMpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoa2V5ICE9PSAndmFsdWUnICYmICFpc1Jlc2VydmVkUHJvcChrZXkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhvc3RQYXRjaFByb3AoZWwsIGtleSwgbnVsbCwgcHJvcHNba2V5XSwgaXNTVkcsIHZub2RlLmNoaWxkcmVuLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCB1bm1vdW50Q2hpbGRyZW4pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgICAgICogU3BlY2lhbCBjYXNlIGZvciBzZXR0aW5nIHZhbHVlIG9uIERPTSBlbGVtZW50czpcclxuICAgICAgICAgICAgICAgICAqIC0gaXQgY2FuIGJlIG9yZGVyLXNlbnNpdGl2ZSAoZS5nLiBzaG91bGQgYmUgc2V0ICphZnRlciogbWluL21heCwgIzIzMjUsICM0MDI0KVxyXG4gICAgICAgICAgICAgICAgICogLSBpdCBuZWVkcyB0byBiZSBmb3JjZWQgKCMxNDcxKVxyXG4gICAgICAgICAgICAgICAgICogIzIzNTMgcHJvcG9zZXMgYWRkaW5nIGFub3RoZXIgcmVuZGVyZXIgb3B0aW9uIHRvIGNvbmZpZ3VyZSB0aGlzLCBidXRcclxuICAgICAgICAgICAgICAgICAqIHRoZSBwcm9wZXJ0aWVzIGFmZmVjdHMgYXJlIHNvIGZpbml0ZSBpdCBpcyB3b3J0aCBzcGVjaWFsIGNhc2luZyBpdFxyXG4gICAgICAgICAgICAgICAgICogaGVyZSB0byByZWR1Y2UgdGhlIGNvbXBsZXhpdHkuIChTcGVjaWFsIGNhc2luZyBpdCBhbHNvIHNob3VsZCBub3RcclxuICAgICAgICAgICAgICAgICAqIGFmZmVjdCBub24tRE9NIHJlbmRlcmVycylcclxuICAgICAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICAgICAgaWYgKCd2YWx1ZScgaW4gcHJvcHMpIHtcclxuICAgICAgICAgICAgICAgICAgICBob3N0UGF0Y2hQcm9wKGVsLCAndmFsdWUnLCBudWxsLCBwcm9wcy52YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoKHZub2RlSG9vayA9IHByb3BzLm9uVm5vZGVCZWZvcmVNb3VudCkpIHtcclxuICAgICAgICAgICAgICAgICAgICBpbnZva2VWTm9kZUhvb2sodm5vZGVIb29rLCBwYXJlbnRDb21wb25lbnQsIHZub2RlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBzY29wZUlkXHJcbiAgICAgICAgICAgIHNldFNjb3BlSWQoZWwsIHZub2RlLCB2bm9kZS5zY29wZUlkLCBzbG90U2NvcGVJZHMsIHBhcmVudENvbXBvbmVudCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgfHwgX19WVUVfUFJPRF9ERVZUT09MU19fKSB7XHJcbiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlbCwgJ19fdm5vZGUnLCB7XHJcbiAgICAgICAgICAgICAgICB2YWx1ZTogdm5vZGUsXHJcbiAgICAgICAgICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGVsLCAnX192dWVQYXJlbnRDb21wb25lbnQnLCB7XHJcbiAgICAgICAgICAgICAgICB2YWx1ZTogcGFyZW50Q29tcG9uZW50LFxyXG4gICAgICAgICAgICAgICAgZW51bWVyYWJsZTogZmFsc2VcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChkaXJzKSB7XHJcbiAgICAgICAgICAgIGludm9rZURpcmVjdGl2ZUhvb2sodm5vZGUsIG51bGwsIHBhcmVudENvbXBvbmVudCwgJ2JlZm9yZU1vdW50Jyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vICMxNTgzIEZvciBpbnNpZGUgc3VzcGVuc2UgKyBzdXNwZW5zZSBub3QgcmVzb2x2ZWQgY2FzZSwgZW50ZXIgaG9vayBzaG91bGQgY2FsbCB3aGVuIHN1c3BlbnNlIHJlc29sdmVkXHJcbiAgICAgICAgLy8gIzE2ODkgRm9yIGluc2lkZSBzdXNwZW5zZSArIHN1c3BlbnNlIHJlc29sdmVkIGNhc2UsIGp1c3QgY2FsbCBpdFxyXG4gICAgICAgIGNvbnN0IG5lZWRDYWxsVHJhbnNpdGlvbkhvb2tzID0gKCFwYXJlbnRTdXNwZW5zZSB8fCAocGFyZW50U3VzcGVuc2UgJiYgIXBhcmVudFN1c3BlbnNlLnBlbmRpbmdCcmFuY2gpKSAmJlxyXG4gICAgICAgICAgICB0cmFuc2l0aW9uICYmXHJcbiAgICAgICAgICAgICF0cmFuc2l0aW9uLnBlcnNpc3RlZDtcclxuICAgICAgICBpZiAobmVlZENhbGxUcmFuc2l0aW9uSG9va3MpIHtcclxuICAgICAgICAgICAgdHJhbnNpdGlvbi5iZWZvcmVFbnRlcihlbCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGhvc3RJbnNlcnQoZWwsIGNvbnRhaW5lciwgYW5jaG9yKTtcclxuICAgICAgICBpZiAoKHZub2RlSG9vayA9IHByb3BzICYmIHByb3BzLm9uVm5vZGVNb3VudGVkKSB8fFxyXG4gICAgICAgICAgICBuZWVkQ2FsbFRyYW5zaXRpb25Ib29rcyB8fFxyXG4gICAgICAgICAgICBkaXJzKSB7XHJcbiAgICAgICAgICAgIHF1ZXVlUG9zdFJlbmRlckVmZmVjdCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB2bm9kZUhvb2sgJiYgaW52b2tlVk5vZGVIb29rKHZub2RlSG9vaywgcGFyZW50Q29tcG9uZW50LCB2bm9kZSk7XHJcbiAgICAgICAgICAgICAgICBuZWVkQ2FsbFRyYW5zaXRpb25Ib29rcyAmJiB0cmFuc2l0aW9uLmVudGVyKGVsKTtcclxuICAgICAgICAgICAgICAgIGRpcnMgJiYgaW52b2tlRGlyZWN0aXZlSG9vayh2bm9kZSwgbnVsbCwgcGFyZW50Q29tcG9uZW50LCAnbW91bnRlZCcpO1xyXG4gICAgICAgICAgICB9LCBwYXJlbnRTdXNwZW5zZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIGNvbnN0IHNldFNjb3BlSWQgPSAoZWwsIHZub2RlLCBzY29wZUlkLCBzbG90U2NvcGVJZHMsIHBhcmVudENvbXBvbmVudCkgPT4ge1xyXG4gICAgICAgIGlmIChzY29wZUlkKSB7XHJcbiAgICAgICAgICAgIGhvc3RTZXRTY29wZUlkKGVsLCBzY29wZUlkKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHNsb3RTY29wZUlkcykge1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNsb3RTY29wZUlkcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgaG9zdFNldFNjb3BlSWQoZWwsIHNsb3RTY29wZUlkc1tpXSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHBhcmVudENvbXBvbmVudCkge1xyXG4gICAgICAgICAgICBsZXQgc3ViVHJlZSA9IHBhcmVudENvbXBvbmVudC5zdWJUcmVlO1xyXG4gICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmXHJcbiAgICAgICAgICAgICAgICBzdWJUcmVlLnBhdGNoRmxhZyA+IDAgJiZcclxuICAgICAgICAgICAgICAgIHN1YlRyZWUucGF0Y2hGbGFnICYgMjA0OCAvKiBERVZfUk9PVF9GUkFHTUVOVCAqLykge1xyXG4gICAgICAgICAgICAgICAgc3ViVHJlZSA9XHJcbiAgICAgICAgICAgICAgICAgICAgZmlsdGVyU2luZ2xlUm9vdChzdWJUcmVlLmNoaWxkcmVuKSB8fCBzdWJUcmVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh2bm9kZSA9PT0gc3ViVHJlZSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcGFyZW50Vk5vZGUgPSBwYXJlbnRDb21wb25lbnQudm5vZGU7XHJcbiAgICAgICAgICAgICAgICBzZXRTY29wZUlkKGVsLCBwYXJlbnRWTm9kZSwgcGFyZW50Vk5vZGUuc2NvcGVJZCwgcGFyZW50Vk5vZGUuc2xvdFNjb3BlSWRzLCBwYXJlbnRDb21wb25lbnQucGFyZW50KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBjb25zdCBtb3VudENoaWxkcmVuID0gKGNoaWxkcmVuLCBjb250YWluZXIsIGFuY2hvciwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgaXNTVkcsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkLCBzdGFydCA9IDApID0+IHtcclxuICAgICAgICBmb3IgKGxldCBpID0gc3RhcnQ7IGkgPCBjaGlsZHJlbi5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBjb25zdCBjaGlsZCA9IChjaGlsZHJlbltpXSA9IG9wdGltaXplZFxyXG4gICAgICAgICAgICAgICAgPyBjbG9uZUlmTW91bnRlZChjaGlsZHJlbltpXSlcclxuICAgICAgICAgICAgICAgIDogbm9ybWFsaXplVk5vZGUoY2hpbGRyZW5baV0pKTtcclxuICAgICAgICAgICAgcGF0Y2gobnVsbCwgY2hpbGQsIGNvbnRhaW5lciwgYW5jaG9yLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBpc1NWRywgc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBjb25zdCBwYXRjaEVsZW1lbnQgPSAobjEsIG4yLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBpc1NWRywgc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQpID0+IHtcclxuICAgICAgICBjb25zdCBlbCA9IChuMi5lbCA9IG4xLmVsKTtcclxuICAgICAgICBsZXQgeyBwYXRjaEZsYWcsIGR5bmFtaWNDaGlsZHJlbiwgZGlycyB9ID0gbjI7XHJcbiAgICAgICAgLy8gIzE0MjYgdGFrZSB0aGUgb2xkIHZub2RlJ3MgcGF0Y2ggZmxhZyBpbnRvIGFjY291bnQgc2luY2UgdXNlciBtYXkgY2xvbmUgYVxyXG4gICAgICAgIC8vIGNvbXBpbGVyLWdlbmVyYXRlZCB2bm9kZSwgd2hpY2ggZGUtb3B0cyB0byBGVUxMX1BST1BTXHJcbiAgICAgICAgcGF0Y2hGbGFnIHw9IG4xLnBhdGNoRmxhZyAmIDE2IC8qIEZVTExfUFJPUFMgKi87XHJcbiAgICAgICAgY29uc3Qgb2xkUHJvcHMgPSBuMS5wcm9wcyB8fCBFTVBUWV9PQko7XHJcbiAgICAgICAgY29uc3QgbmV3UHJvcHMgPSBuMi5wcm9wcyB8fCBFTVBUWV9PQko7XHJcbiAgICAgICAgbGV0IHZub2RlSG9vaztcclxuICAgICAgICAvLyBkaXNhYmxlIHJlY3Vyc2UgaW4gYmVmb3JlVXBkYXRlIGhvb2tzXHJcbiAgICAgICAgcGFyZW50Q29tcG9uZW50ICYmIHRvZ2dsZVJlY3Vyc2UocGFyZW50Q29tcG9uZW50LCBmYWxzZSk7XHJcbiAgICAgICAgaWYgKCh2bm9kZUhvb2sgPSBuZXdQcm9wcy5vblZub2RlQmVmb3JlVXBkYXRlKSkge1xyXG4gICAgICAgICAgICBpbnZva2VWTm9kZUhvb2sodm5vZGVIb29rLCBwYXJlbnRDb21wb25lbnQsIG4yLCBuMSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChkaXJzKSB7XHJcbiAgICAgICAgICAgIGludm9rZURpcmVjdGl2ZUhvb2sobjIsIG4xLCBwYXJlbnRDb21wb25lbnQsICdiZWZvcmVVcGRhdGUnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcGFyZW50Q29tcG9uZW50ICYmIHRvZ2dsZVJlY3Vyc2UocGFyZW50Q29tcG9uZW50LCB0cnVlKTtcclxuICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmIGlzSG1yVXBkYXRpbmcpIHtcclxuICAgICAgICAgICAgLy8gSE1SIHVwZGF0ZWQsIGZvcmNlIGZ1bGwgZGlmZlxyXG4gICAgICAgICAgICBwYXRjaEZsYWcgPSAwO1xyXG4gICAgICAgICAgICBvcHRpbWl6ZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgZHluYW1pY0NoaWxkcmVuID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgYXJlQ2hpbGRyZW5TVkcgPSBpc1NWRyAmJiBuMi50eXBlICE9PSAnZm9yZWlnbk9iamVjdCc7XHJcbiAgICAgICAgaWYgKGR5bmFtaWNDaGlsZHJlbikge1xyXG4gICAgICAgICAgICBwYXRjaEJsb2NrQ2hpbGRyZW4objEuZHluYW1pY0NoaWxkcmVuLCBkeW5hbWljQ2hpbGRyZW4sIGVsLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBhcmVDaGlsZHJlblNWRywgc2xvdFNjb3BlSWRzKTtcclxuICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiBwYXJlbnRDb21wb25lbnQgJiYgcGFyZW50Q29tcG9uZW50LnR5cGUuX19obXJJZCkge1xyXG4gICAgICAgICAgICAgICAgdHJhdmVyc2VTdGF0aWNDaGlsZHJlbihuMSwgbjIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKCFvcHRpbWl6ZWQpIHtcclxuICAgICAgICAgICAgLy8gZnVsbCBkaWZmXHJcbiAgICAgICAgICAgIHBhdGNoQ2hpbGRyZW4objEsIG4yLCBlbCwgbnVsbCwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgYXJlQ2hpbGRyZW5TVkcsIHNsb3RTY29wZUlkcywgZmFsc2UpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAocGF0Y2hGbGFnID4gMCkge1xyXG4gICAgICAgICAgICAvLyB0aGUgcHJlc2VuY2Ugb2YgYSBwYXRjaEZsYWcgbWVhbnMgdGhpcyBlbGVtZW50J3MgcmVuZGVyIGNvZGUgd2FzXHJcbiAgICAgICAgICAgIC8vIGdlbmVyYXRlZCBieSB0aGUgY29tcGlsZXIgYW5kIGNhbiB0YWtlIHRoZSBmYXN0IHBhdGguXHJcbiAgICAgICAgICAgIC8vIGluIHRoaXMgcGF0aCBvbGQgbm9kZSBhbmQgbmV3IG5vZGUgYXJlIGd1YXJhbnRlZWQgdG8gaGF2ZSB0aGUgc2FtZSBzaGFwZVxyXG4gICAgICAgICAgICAvLyAoaS5lLiBhdCB0aGUgZXhhY3Qgc2FtZSBwb3NpdGlvbiBpbiB0aGUgc291cmNlIHRlbXBsYXRlKVxyXG4gICAgICAgICAgICBpZiAocGF0Y2hGbGFnICYgMTYgLyogRlVMTF9QUk9QUyAqLykge1xyXG4gICAgICAgICAgICAgICAgLy8gZWxlbWVudCBwcm9wcyBjb250YWluIGR5bmFtaWMga2V5cywgZnVsbCBkaWZmIG5lZWRlZFxyXG4gICAgICAgICAgICAgICAgcGF0Y2hQcm9wcyhlbCwgbjIsIG9sZFByb3BzLCBuZXdQcm9wcywgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgaXNTVkcpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8gY2xhc3NcclxuICAgICAgICAgICAgICAgIC8vIHRoaXMgZmxhZyBpcyBtYXRjaGVkIHdoZW4gdGhlIGVsZW1lbnQgaGFzIGR5bmFtaWMgY2xhc3MgYmluZGluZ3MuXHJcbiAgICAgICAgICAgICAgICBpZiAocGF0Y2hGbGFnICYgMiAvKiBDTEFTUyAqLykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvbGRQcm9wcy5jbGFzcyAhPT0gbmV3UHJvcHMuY2xhc3MpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaG9zdFBhdGNoUHJvcChlbCwgJ2NsYXNzJywgbnVsbCwgbmV3UHJvcHMuY2xhc3MsIGlzU1ZHKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyBzdHlsZVxyXG4gICAgICAgICAgICAgICAgLy8gdGhpcyBmbGFnIGlzIG1hdGNoZWQgd2hlbiB0aGUgZWxlbWVudCBoYXMgZHluYW1pYyBzdHlsZSBiaW5kaW5nc1xyXG4gICAgICAgICAgICAgICAgaWYgKHBhdGNoRmxhZyAmIDQgLyogU1RZTEUgKi8pIHtcclxuICAgICAgICAgICAgICAgICAgICBob3N0UGF0Y2hQcm9wKGVsLCAnc3R5bGUnLCBvbGRQcm9wcy5zdHlsZSwgbmV3UHJvcHMuc3R5bGUsIGlzU1ZHKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIHByb3BzXHJcbiAgICAgICAgICAgICAgICAvLyBUaGlzIGZsYWcgaXMgbWF0Y2hlZCB3aGVuIHRoZSBlbGVtZW50IGhhcyBkeW5hbWljIHByb3AvYXR0ciBiaW5kaW5nc1xyXG4gICAgICAgICAgICAgICAgLy8gb3RoZXIgdGhhbiBjbGFzcyBhbmQgc3R5bGUuIFRoZSBrZXlzIG9mIGR5bmFtaWMgcHJvcC9hdHRycyBhcmUgc2F2ZWQgZm9yXHJcbiAgICAgICAgICAgICAgICAvLyBmYXN0ZXIgaXRlcmF0aW9uLlxyXG4gICAgICAgICAgICAgICAgLy8gTm90ZSBkeW5hbWljIGtleXMgbGlrZSA6W2Zvb109XCJiYXJcIiB3aWxsIGNhdXNlIHRoaXMgb3B0aW1pemF0aW9uIHRvXHJcbiAgICAgICAgICAgICAgICAvLyBiYWlsIG91dCBhbmQgZ28gdGhyb3VnaCBhIGZ1bGwgZGlmZiBiZWNhdXNlIHdlIG5lZWQgdG8gdW5zZXQgdGhlIG9sZCBrZXlcclxuICAgICAgICAgICAgICAgIGlmIChwYXRjaEZsYWcgJiA4IC8qIFBST1BTICovKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gaWYgdGhlIGZsYWcgaXMgcHJlc2VudCB0aGVuIGR5bmFtaWNQcm9wcyBtdXN0IGJlIG5vbi1udWxsXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJvcHNUb1VwZGF0ZSA9IG4yLmR5bmFtaWNQcm9wcztcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHByb3BzVG9VcGRhdGUubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qga2V5ID0gcHJvcHNUb1VwZGF0ZVtpXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJldiA9IG9sZFByb3BzW2tleV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5leHQgPSBuZXdQcm9wc1trZXldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAjMTQ3MSBmb3JjZSBwYXRjaCB2YWx1ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobmV4dCAhPT0gcHJldiB8fCBrZXkgPT09ICd2YWx1ZScpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhvc3RQYXRjaFByb3AoZWwsIGtleSwgcHJldiwgbmV4dCwgaXNTVkcsIG4xLmNoaWxkcmVuLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCB1bm1vdW50Q2hpbGRyZW4pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIHRleHRcclxuICAgICAgICAgICAgLy8gVGhpcyBmbGFnIGlzIG1hdGNoZWQgd2hlbiB0aGUgZWxlbWVudCBoYXMgb25seSBkeW5hbWljIHRleHQgY2hpbGRyZW4uXHJcbiAgICAgICAgICAgIGlmIChwYXRjaEZsYWcgJiAxIC8qIFRFWFQgKi8pIHtcclxuICAgICAgICAgICAgICAgIGlmIChuMS5jaGlsZHJlbiAhPT0gbjIuY2hpbGRyZW4pIHtcclxuICAgICAgICAgICAgICAgICAgICBob3N0U2V0RWxlbWVudFRleHQoZWwsIG4yLmNoaWxkcmVuKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICghb3B0aW1pemVkICYmIGR5bmFtaWNDaGlsZHJlbiA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIC8vIHVub3B0aW1pemVkLCBmdWxsIGRpZmZcclxuICAgICAgICAgICAgcGF0Y2hQcm9wcyhlbCwgbjIsIG9sZFByb3BzLCBuZXdQcm9wcywgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgaXNTVkcpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoKHZub2RlSG9vayA9IG5ld1Byb3BzLm9uVm5vZGVVcGRhdGVkKSB8fCBkaXJzKSB7XHJcbiAgICAgICAgICAgIHF1ZXVlUG9zdFJlbmRlckVmZmVjdCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB2bm9kZUhvb2sgJiYgaW52b2tlVk5vZGVIb29rKHZub2RlSG9vaywgcGFyZW50Q29tcG9uZW50LCBuMiwgbjEpO1xyXG4gICAgICAgICAgICAgICAgZGlycyAmJiBpbnZva2VEaXJlY3RpdmVIb29rKG4yLCBuMSwgcGFyZW50Q29tcG9uZW50LCAndXBkYXRlZCcpO1xyXG4gICAgICAgICAgICB9LCBwYXJlbnRTdXNwZW5zZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8vIFRoZSBmYXN0IHBhdGggZm9yIGJsb2Nrcy5cclxuICAgIGNvbnN0IHBhdGNoQmxvY2tDaGlsZHJlbiA9IChvbGRDaGlsZHJlbiwgbmV3Q2hpbGRyZW4sIGZhbGxiYWNrQ29udGFpbmVyLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBpc1NWRywgc2xvdFNjb3BlSWRzKSA9PiB7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBuZXdDaGlsZHJlbi5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBjb25zdCBvbGRWTm9kZSA9IG9sZENoaWxkcmVuW2ldO1xyXG4gICAgICAgICAgICBjb25zdCBuZXdWTm9kZSA9IG5ld0NoaWxkcmVuW2ldO1xyXG4gICAgICAgICAgICAvLyBEZXRlcm1pbmUgdGhlIGNvbnRhaW5lciAocGFyZW50IGVsZW1lbnQpIGZvciB0aGUgcGF0Y2guXHJcbiAgICAgICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IFxyXG4gICAgICAgICAgICAvLyBvbGRWTm9kZSBtYXkgYmUgYW4gZXJyb3JlZCBhc3luYyBzZXR1cCgpIGNvbXBvbmVudCBpbnNpZGUgU3VzcGVuc2VcclxuICAgICAgICAgICAgLy8gd2hpY2ggd2lsbCBub3QgaGF2ZSBhIG1vdW50ZWQgZWxlbWVudFxyXG4gICAgICAgICAgICBvbGRWTm9kZS5lbCAmJlxyXG4gICAgICAgICAgICAgICAgLy8gLSBJbiB0aGUgY2FzZSBvZiBhIEZyYWdtZW50LCB3ZSBuZWVkIHRvIHByb3ZpZGUgdGhlIGFjdHVhbCBwYXJlbnRcclxuICAgICAgICAgICAgICAgIC8vIG9mIHRoZSBGcmFnbWVudCBpdHNlbGYgc28gaXQgY2FuIG1vdmUgaXRzIGNoaWxkcmVuLlxyXG4gICAgICAgICAgICAgICAgKG9sZFZOb2RlLnR5cGUgPT09IEZyYWdtZW50IHx8XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gLSBJbiB0aGUgY2FzZSBvZiBkaWZmZXJlbnQgbm9kZXMsIHRoZXJlIGlzIGdvaW5nIHRvIGJlIGEgcmVwbGFjZW1lbnRcclxuICAgICAgICAgICAgICAgICAgICAvLyB3aGljaCBhbHNvIHJlcXVpcmVzIHRoZSBjb3JyZWN0IHBhcmVudCBjb250YWluZXJcclxuICAgICAgICAgICAgICAgICAgICAhaXNTYW1lVk5vZGVUeXBlKG9sZFZOb2RlLCBuZXdWTm9kZSkgfHxcclxuICAgICAgICAgICAgICAgICAgICAvLyAtIEluIHRoZSBjYXNlIG9mIGEgY29tcG9uZW50LCBpdCBjb3VsZCBjb250YWluIGFueXRoaW5nLlxyXG4gICAgICAgICAgICAgICAgICAgIG9sZFZOb2RlLnNoYXBlRmxhZyAmICg2IC8qIENPTVBPTkVOVCAqLyB8IDY0IC8qIFRFTEVQT1JUICovKSlcclxuICAgICAgICAgICAgICAgID8gaG9zdFBhcmVudE5vZGUob2xkVk5vZGUuZWwpXHJcbiAgICAgICAgICAgICAgICA6IC8vIEluIG90aGVyIGNhc2VzLCB0aGUgcGFyZW50IGNvbnRhaW5lciBpcyBub3QgYWN0dWFsbHkgdXNlZCBzbyB3ZVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGp1c3QgcGFzcyB0aGUgYmxvY2sgZWxlbWVudCBoZXJlIHRvIGF2b2lkIGEgRE9NIHBhcmVudE5vZGUgY2FsbC5cclxuICAgICAgICAgICAgICAgICAgICBmYWxsYmFja0NvbnRhaW5lcjtcclxuICAgICAgICAgICAgcGF0Y2gob2xkVk5vZGUsIG5ld1ZOb2RlLCBjb250YWluZXIsIG51bGwsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIGlzU1ZHLCBzbG90U2NvcGVJZHMsIHRydWUpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBjb25zdCBwYXRjaFByb3BzID0gKGVsLCB2bm9kZSwgb2xkUHJvcHMsIG5ld1Byb3BzLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBpc1NWRykgPT4ge1xyXG4gICAgICAgIGlmIChvbGRQcm9wcyAhPT0gbmV3UHJvcHMpIHtcclxuICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gbmV3UHJvcHMpIHtcclxuICAgICAgICAgICAgICAgIC8vIGVtcHR5IHN0cmluZyBpcyBub3QgdmFsaWQgcHJvcFxyXG4gICAgICAgICAgICAgICAgaWYgKGlzUmVzZXJ2ZWRQcm9wKGtleSkpXHJcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBuZXh0ID0gbmV3UHJvcHNba2V5XTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHByZXYgPSBvbGRQcm9wc1trZXldO1xyXG4gICAgICAgICAgICAgICAgLy8gZGVmZXIgcGF0Y2hpbmcgdmFsdWVcclxuICAgICAgICAgICAgICAgIGlmIChuZXh0ICE9PSBwcmV2ICYmIGtleSAhPT0gJ3ZhbHVlJykge1xyXG4gICAgICAgICAgICAgICAgICAgIGhvc3RQYXRjaFByb3AoZWwsIGtleSwgcHJldiwgbmV4dCwgaXNTVkcsIHZub2RlLmNoaWxkcmVuLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCB1bm1vdW50Q2hpbGRyZW4pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChvbGRQcm9wcyAhPT0gRU1QVFlfT0JKKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBvbGRQcm9wcykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghaXNSZXNlcnZlZFByb3Aoa2V5KSAmJiAhKGtleSBpbiBuZXdQcm9wcykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaG9zdFBhdGNoUHJvcChlbCwga2V5LCBvbGRQcm9wc1trZXldLCBudWxsLCBpc1NWRywgdm5vZGUuY2hpbGRyZW4sIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIHVubW91bnRDaGlsZHJlbik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICgndmFsdWUnIGluIG5ld1Byb3BzKSB7XHJcbiAgICAgICAgICAgICAgICBob3N0UGF0Y2hQcm9wKGVsLCAndmFsdWUnLCBvbGRQcm9wcy52YWx1ZSwgbmV3UHJvcHMudmFsdWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIGNvbnN0IHByb2Nlc3NGcmFnbWVudCA9IChuMSwgbjIsIGNvbnRhaW5lciwgYW5jaG9yLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBpc1NWRywgc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQpID0+IHtcclxuICAgICAgICBjb25zdCBmcmFnbWVudFN0YXJ0QW5jaG9yID0gKG4yLmVsID0gbjEgPyBuMS5lbCA6IGhvc3RDcmVhdGVUZXh0KCcnKSk7XHJcbiAgICAgICAgY29uc3QgZnJhZ21lbnRFbmRBbmNob3IgPSAobjIuYW5jaG9yID0gbjEgPyBuMS5hbmNob3IgOiBob3N0Q3JlYXRlVGV4dCgnJykpO1xyXG4gICAgICAgIGxldCB7IHBhdGNoRmxhZywgZHluYW1pY0NoaWxkcmVuLCBzbG90U2NvcGVJZHM6IGZyYWdtZW50U2xvdFNjb3BlSWRzIH0gPSBuMjtcclxuICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmIGlzSG1yVXBkYXRpbmcpIHtcclxuICAgICAgICAgICAgLy8gSE1SIHVwZGF0ZWQsIGZvcmNlIGZ1bGwgZGlmZlxyXG4gICAgICAgICAgICBwYXRjaEZsYWcgPSAwO1xyXG4gICAgICAgICAgICBvcHRpbWl6ZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgZHluYW1pY0NoaWxkcmVuID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gY2hlY2sgaWYgdGhpcyBpcyBhIHNsb3QgZnJhZ21lbnQgd2l0aCA6c2xvdHRlZCBzY29wZSBpZHNcclxuICAgICAgICBpZiAoZnJhZ21lbnRTbG90U2NvcGVJZHMpIHtcclxuICAgICAgICAgICAgc2xvdFNjb3BlSWRzID0gc2xvdFNjb3BlSWRzXHJcbiAgICAgICAgICAgICAgICA/IHNsb3RTY29wZUlkcy5jb25jYXQoZnJhZ21lbnRTbG90U2NvcGVJZHMpXHJcbiAgICAgICAgICAgICAgICA6IGZyYWdtZW50U2xvdFNjb3BlSWRzO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAobjEgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBob3N0SW5zZXJ0KGZyYWdtZW50U3RhcnRBbmNob3IsIGNvbnRhaW5lciwgYW5jaG9yKTtcclxuICAgICAgICAgICAgaG9zdEluc2VydChmcmFnbWVudEVuZEFuY2hvciwgY29udGFpbmVyLCBhbmNob3IpO1xyXG4gICAgICAgICAgICAvLyBhIGZyYWdtZW50IGNhbiBvbmx5IGhhdmUgYXJyYXkgY2hpbGRyZW5cclxuICAgICAgICAgICAgLy8gc2luY2UgdGhleSBhcmUgZWl0aGVyIGdlbmVyYXRlZCBieSB0aGUgY29tcGlsZXIsIG9yIGltcGxpY2l0bHkgY3JlYXRlZFxyXG4gICAgICAgICAgICAvLyBmcm9tIGFycmF5cy5cclxuICAgICAgICAgICAgbW91bnRDaGlsZHJlbihuMi5jaGlsZHJlbiwgY29udGFpbmVyLCBmcmFnbWVudEVuZEFuY2hvciwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgaXNTVkcsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGlmIChwYXRjaEZsYWcgPiAwICYmXHJcbiAgICAgICAgICAgICAgICBwYXRjaEZsYWcgJiA2NCAvKiBTVEFCTEVfRlJBR01FTlQgKi8gJiZcclxuICAgICAgICAgICAgICAgIGR5bmFtaWNDaGlsZHJlbiAmJlxyXG4gICAgICAgICAgICAgICAgLy8gIzI3MTUgdGhlIHByZXZpb3VzIGZyYWdtZW50IGNvdWxkJ3ZlIGJlZW4gYSBCQUlMZWQgb25lIGFzIGEgcmVzdWx0XHJcbiAgICAgICAgICAgICAgICAvLyBvZiByZW5kZXJTbG90KCkgd2l0aCBubyB2YWxpZCBjaGlsZHJlblxyXG4gICAgICAgICAgICAgICAgbjEuZHluYW1pY0NoaWxkcmVuKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBhIHN0YWJsZSBmcmFnbWVudCAodGVtcGxhdGUgcm9vdCBvciA8dGVtcGxhdGUgdi1mb3I+KSBkb2Vzbid0IG5lZWQgdG9cclxuICAgICAgICAgICAgICAgIC8vIHBhdGNoIGNoaWxkcmVuIG9yZGVyLCBidXQgaXQgbWF5IGNvbnRhaW4gZHluYW1pY0NoaWxkcmVuLlxyXG4gICAgICAgICAgICAgICAgcGF0Y2hCbG9ja0NoaWxkcmVuKG4xLmR5bmFtaWNDaGlsZHJlbiwgZHluYW1pY0NoaWxkcmVuLCBjb250YWluZXIsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIGlzU1ZHLCBzbG90U2NvcGVJZHMpO1xyXG4gICAgICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiBwYXJlbnRDb21wb25lbnQgJiYgcGFyZW50Q29tcG9uZW50LnR5cGUuX19obXJJZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRyYXZlcnNlU3RhdGljQ2hpbGRyZW4objEsIG4yKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKFxyXG4gICAgICAgICAgICAgICAgLy8gIzIwODAgaWYgdGhlIHN0YWJsZSBmcmFnbWVudCBoYXMgYSBrZXksIGl0J3MgYSA8dGVtcGxhdGUgdi1mb3I+IHRoYXQgbWF5XHJcbiAgICAgICAgICAgICAgICAvLyAgZ2V0IG1vdmVkIGFyb3VuZC4gTWFrZSBzdXJlIGFsbCByb290IGxldmVsIHZub2RlcyBpbmhlcml0IGVsLlxyXG4gICAgICAgICAgICAgICAgLy8gIzIxMzQgb3IgaWYgaXQncyBhIGNvbXBvbmVudCByb290LCBpdCBtYXkgYWxzbyBnZXQgbW92ZWQgYXJvdW5kXHJcbiAgICAgICAgICAgICAgICAvLyBhcyB0aGUgY29tcG9uZW50IGlzIGJlaW5nIG1vdmVkLlxyXG4gICAgICAgICAgICAgICAgbjIua2V5ICE9IG51bGwgfHxcclxuICAgICAgICAgICAgICAgICAgICAocGFyZW50Q29tcG9uZW50ICYmIG4yID09PSBwYXJlbnRDb21wb25lbnQuc3ViVHJlZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICB0cmF2ZXJzZVN0YXRpY0NoaWxkcmVuKG4xLCBuMiwgdHJ1ZSAvKiBzaGFsbG93ICovKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vIGtleWVkIC8gdW5rZXllZCwgb3IgbWFudWFsIGZyYWdtZW50cy5cclxuICAgICAgICAgICAgICAgIC8vIGZvciBrZXllZCAmIHVua2V5ZWQsIHNpbmNlIHRoZXkgYXJlIGNvbXBpbGVyIGdlbmVyYXRlZCBmcm9tIHYtZm9yLFxyXG4gICAgICAgICAgICAgICAgLy8gZWFjaCBjaGlsZCBpcyBndWFyYW50ZWVkIHRvIGJlIGEgYmxvY2sgc28gdGhlIGZyYWdtZW50IHdpbGwgbmV2ZXJcclxuICAgICAgICAgICAgICAgIC8vIGhhdmUgZHluYW1pY0NoaWxkcmVuLlxyXG4gICAgICAgICAgICAgICAgcGF0Y2hDaGlsZHJlbihuMSwgbjIsIGNvbnRhaW5lciwgZnJhZ21lbnRFbmRBbmNob3IsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIGlzU1ZHLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgY29uc3QgcHJvY2Vzc0NvbXBvbmVudCA9IChuMSwgbjIsIGNvbnRhaW5lciwgYW5jaG9yLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBpc1NWRywgc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQpID0+IHtcclxuICAgICAgICBuMi5zbG90U2NvcGVJZHMgPSBzbG90U2NvcGVJZHM7XHJcbiAgICAgICAgaWYgKG4xID09IG51bGwpIHtcclxuICAgICAgICAgICAgaWYgKG4yLnNoYXBlRmxhZyAmIDUxMiAvKiBDT01QT05FTlRfS0VQVF9BTElWRSAqLykge1xyXG4gICAgICAgICAgICAgICAgcGFyZW50Q29tcG9uZW50LmN0eC5hY3RpdmF0ZShuMiwgY29udGFpbmVyLCBhbmNob3IsIGlzU1ZHLCBvcHRpbWl6ZWQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgbW91bnRDb21wb25lbnQobjIsIGNvbnRhaW5lciwgYW5jaG9yLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBpc1NWRywgb3B0aW1pemVkKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdXBkYXRlQ29tcG9uZW50KG4xLCBuMiwgb3B0aW1pemVkKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgY29uc3QgbW91bnRDb21wb25lbnQgPSAoaW5pdGlhbFZOb2RlLCBjb250YWluZXIsIGFuY2hvciwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgaXNTVkcsIG9wdGltaXplZCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGluc3RhbmNlID0gKGluaXRpYWxWTm9kZS5jb21wb25lbnQgPSBjcmVhdGVDb21wb25lbnRJbnN0YW5jZShpbml0aWFsVk5vZGUsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UpKTtcclxuICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmIGluc3RhbmNlLnR5cGUuX19obXJJZCkge1xyXG4gICAgICAgICAgICByZWdpc3RlckhNUihpbnN0YW5jZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcclxuICAgICAgICAgICAgcHVzaFdhcm5pbmdDb250ZXh0KGluaXRpYWxWTm9kZSk7XHJcbiAgICAgICAgICAgIHN0YXJ0TWVhc3VyZShpbnN0YW5jZSwgYG1vdW50YCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGluamVjdCByZW5kZXJlciBpbnRlcm5hbHMgZm9yIGtlZXBBbGl2ZVxyXG4gICAgICAgIGlmIChpc0tlZXBBbGl2ZShpbml0aWFsVk5vZGUpKSB7XHJcbiAgICAgICAgICAgIGluc3RhbmNlLmN0eC5yZW5kZXJlciA9IGludGVybmFscztcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gcmVzb2x2ZSBwcm9wcyBhbmQgc2xvdHMgZm9yIHNldHVwIGNvbnRleHRcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcclxuICAgICAgICAgICAgICAgIHN0YXJ0TWVhc3VyZShpbnN0YW5jZSwgYGluaXRgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzZXR1cENvbXBvbmVudChpbnN0YW5jZSk7XHJcbiAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcclxuICAgICAgICAgICAgICAgIGVuZE1lYXN1cmUoaW5zdGFuY2UsIGBpbml0YCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gc2V0dXAoKSBpcyBhc3luYy4gVGhpcyBjb21wb25lbnQgcmVsaWVzIG9uIGFzeW5jIGxvZ2ljIHRvIGJlIHJlc29sdmVkXHJcbiAgICAgICAgLy8gYmVmb3JlIHByb2NlZWRpbmdcclxuICAgICAgICBpZiAoaW5zdGFuY2UuYXN5bmNEZXApIHtcclxuICAgICAgICAgICAgcGFyZW50U3VzcGVuc2UgJiYgcGFyZW50U3VzcGVuc2UucmVnaXN0ZXJEZXAoaW5zdGFuY2UsIHNldHVwUmVuZGVyRWZmZWN0KTtcclxuICAgICAgICAgICAgLy8gR2l2ZSBpdCBhIHBsYWNlaG9sZGVyIGlmIHRoaXMgaXMgbm90IGh5ZHJhdGlvblxyXG4gICAgICAgICAgICAvLyBUT0RPIGhhbmRsZSBzZWxmLWRlZmluZWQgZmFsbGJhY2tcclxuICAgICAgICAgICAgaWYgKCFpbml0aWFsVk5vZGUuZWwpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHBsYWNlaG9sZGVyID0gKGluc3RhbmNlLnN1YlRyZWUgPSBjcmVhdGVWTm9kZShDb21tZW50KSk7XHJcbiAgICAgICAgICAgICAgICBwcm9jZXNzQ29tbWVudE5vZGUobnVsbCwgcGxhY2Vob2xkZXIsIGNvbnRhaW5lciwgYW5jaG9yKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHNldHVwUmVuZGVyRWZmZWN0KGluc3RhbmNlLCBpbml0aWFsVk5vZGUsIGNvbnRhaW5lciwgYW5jaG9yLCBwYXJlbnRTdXNwZW5zZSwgaXNTVkcsIG9wdGltaXplZCk7XHJcbiAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xyXG4gICAgICAgICAgICBwb3BXYXJuaW5nQ29udGV4dCgpO1xyXG4gICAgICAgICAgICBlbmRNZWFzdXJlKGluc3RhbmNlLCBgbW91bnRgKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgY29uc3QgdXBkYXRlQ29tcG9uZW50ID0gKG4xLCBuMiwgb3B0aW1pemVkKSA9PiB7XHJcbiAgICAgICAgY29uc3QgaW5zdGFuY2UgPSAobjIuY29tcG9uZW50ID0gbjEuY29tcG9uZW50KTtcclxuICAgICAgICBpZiAoc2hvdWxkVXBkYXRlQ29tcG9uZW50KG4xLCBuMiwgb3B0aW1pemVkKSkge1xyXG4gICAgICAgICAgICBpZiAoaW5zdGFuY2UuYXN5bmNEZXAgJiZcclxuICAgICAgICAgICAgICAgICFpbnN0YW5jZS5hc3luY1Jlc29sdmVkKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBhc3luYyAmIHN0aWxsIHBlbmRpbmcgLSBqdXN0IHVwZGF0ZSBwcm9wcyBhbmQgc2xvdHNcclxuICAgICAgICAgICAgICAgIC8vIHNpbmNlIHRoZSBjb21wb25lbnQncyByZWFjdGl2ZSBlZmZlY3QgZm9yIHJlbmRlciBpc24ndCBzZXQtdXAgeWV0XHJcbiAgICAgICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcHVzaFdhcm5pbmdDb250ZXh0KG4yKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHVwZGF0ZUNvbXBvbmVudFByZVJlbmRlcihpbnN0YW5jZSwgbjIsIG9wdGltaXplZCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcG9wV2FybmluZ0NvbnRleHQoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vIG5vcm1hbCB1cGRhdGVcclxuICAgICAgICAgICAgICAgIGluc3RhbmNlLm5leHQgPSBuMjtcclxuICAgICAgICAgICAgICAgIC8vIGluIGNhc2UgdGhlIGNoaWxkIGNvbXBvbmVudCBpcyBhbHNvIHF1ZXVlZCwgcmVtb3ZlIGl0IHRvIGF2b2lkXHJcbiAgICAgICAgICAgICAgICAvLyBkb3VibGUgdXBkYXRpbmcgdGhlIHNhbWUgY2hpbGQgY29tcG9uZW50IGluIHRoZSBzYW1lIGZsdXNoLlxyXG4gICAgICAgICAgICAgICAgaW52YWxpZGF0ZUpvYihpbnN0YW5jZS51cGRhdGUpO1xyXG4gICAgICAgICAgICAgICAgLy8gaW5zdGFuY2UudXBkYXRlIGlzIHRoZSByZWFjdGl2ZSBlZmZlY3QuXHJcbiAgICAgICAgICAgICAgICBpbnN0YW5jZS51cGRhdGUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgLy8gbm8gdXBkYXRlIG5lZWRlZC4ganVzdCBjb3B5IG92ZXIgcHJvcGVydGllc1xyXG4gICAgICAgICAgICBuMi5jb21wb25lbnQgPSBuMS5jb21wb25lbnQ7XHJcbiAgICAgICAgICAgIG4yLmVsID0gbjEuZWw7XHJcbiAgICAgICAgICAgIGluc3RhbmNlLnZub2RlID0gbjI7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIGNvbnN0IHNldHVwUmVuZGVyRWZmZWN0ID0gKGluc3RhbmNlLCBpbml0aWFsVk5vZGUsIGNvbnRhaW5lciwgYW5jaG9yLCBwYXJlbnRTdXNwZW5zZSwgaXNTVkcsIG9wdGltaXplZCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGNvbXBvbmVudFVwZGF0ZUZuID0gKCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoIWluc3RhbmNlLmlzTW91bnRlZCkge1xyXG4gICAgICAgICAgICAgICAgbGV0IHZub2RlSG9vaztcclxuICAgICAgICAgICAgICAgIGNvbnN0IHsgZWwsIHByb3BzIH0gPSBpbml0aWFsVk5vZGU7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB7IGJtLCBtLCBwYXJlbnQgfSA9IGluc3RhbmNlO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaXNBc3luY1dyYXBwZXJWTm9kZSA9IGlzQXN5bmNXcmFwcGVyKGluaXRpYWxWTm9kZSk7XHJcbiAgICAgICAgICAgICAgICB0b2dnbGVSZWN1cnNlKGluc3RhbmNlLCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICAvLyBiZWZvcmVNb3VudCBob29rXHJcbiAgICAgICAgICAgICAgICBpZiAoYm0pIHtcclxuICAgICAgICAgICAgICAgICAgICBpbnZva2VBcnJheUZucyhibSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyBvblZub2RlQmVmb3JlTW91bnRcclxuICAgICAgICAgICAgICAgIGlmICghaXNBc3luY1dyYXBwZXJWTm9kZSAmJlxyXG4gICAgICAgICAgICAgICAgICAgICh2bm9kZUhvb2sgPSBwcm9wcyAmJiBwcm9wcy5vblZub2RlQmVmb3JlTW91bnQpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaW52b2tlVk5vZGVIb29rKHZub2RlSG9vaywgcGFyZW50LCBpbml0aWFsVk5vZGUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdG9nZ2xlUmVjdXJzZShpbnN0YW5jZSwgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoZWwgJiYgaHlkcmF0ZU5vZGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyB2bm9kZSBoYXMgYWRvcHRlZCBob3N0IG5vZGUgLSBwZXJmb3JtIGh5ZHJhdGlvbiBpbnN0ZWFkIG9mIG1vdW50LlxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGh5ZHJhdGVTdWJUcmVlID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGFydE1lYXN1cmUoaW5zdGFuY2UsIGByZW5kZXJgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZS5zdWJUcmVlID0gcmVuZGVyQ29tcG9uZW50Um9vdChpbnN0YW5jZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZE1lYXN1cmUoaW5zdGFuY2UsIGByZW5kZXJgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGFydE1lYXN1cmUoaW5zdGFuY2UsIGBoeWRyYXRlYCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgaHlkcmF0ZU5vZGUoZWwsIGluc3RhbmNlLnN1YlRyZWUsIGluc3RhbmNlLCBwYXJlbnRTdXNwZW5zZSwgbnVsbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZE1lYXN1cmUoaW5zdGFuY2UsIGBoeWRyYXRlYCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpc0FzeW5jV3JhcHBlclZOb2RlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGluaXRpYWxWTm9kZS50eXBlLl9fYXN5bmNMb2FkZXIoKS50aGVuKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBub3RlOiB3ZSBhcmUgbW92aW5nIHRoZSByZW5kZXIgY2FsbCBpbnRvIGFuIGFzeW5jIGNhbGxiYWNrLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB3aGljaCBtZWFucyBpdCB3b24ndCB0cmFjayBkZXBlbmRlbmNpZXMgLSBidXQgaXQncyBvayBiZWNhdXNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGEgc2VydmVyLXJlbmRlcmVkIGFzeW5jIHdyYXBwZXIgaXMgYWxyZWFkeSBpbiByZXNvbHZlZCBzdGF0ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBhbmQgaXQgd2lsbCBuZXZlciBuZWVkIHRvIGNoYW5nZS5cclxuICAgICAgICAgICAgICAgICAgICAgICAgKCkgPT4gIWluc3RhbmNlLmlzVW5tb3VudGVkICYmIGh5ZHJhdGVTdWJUcmVlKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaHlkcmF0ZVN1YlRyZWUoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0TWVhc3VyZShpbnN0YW5jZSwgYHJlbmRlcmApO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBzdWJUcmVlID0gKGluc3RhbmNlLnN1YlRyZWUgPSByZW5kZXJDb21wb25lbnRSb290KGluc3RhbmNlKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbmRNZWFzdXJlKGluc3RhbmNlLCBgcmVuZGVyYCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnRNZWFzdXJlKGluc3RhbmNlLCBgcGF0Y2hgKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgcGF0Y2gobnVsbCwgc3ViVHJlZSwgY29udGFpbmVyLCBhbmNob3IsIGluc3RhbmNlLCBwYXJlbnRTdXNwZW5zZSwgaXNTVkcpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZW5kTWVhc3VyZShpbnN0YW5jZSwgYHBhdGNoYCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGluaXRpYWxWTm9kZS5lbCA9IHN1YlRyZWUuZWw7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyBtb3VudGVkIGhvb2tcclxuICAgICAgICAgICAgICAgIGlmIChtKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcXVldWVQb3N0UmVuZGVyRWZmZWN0KG0sIHBhcmVudFN1c3BlbnNlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIG9uVm5vZGVNb3VudGVkXHJcbiAgICAgICAgICAgICAgICBpZiAoIWlzQXN5bmNXcmFwcGVyVk5vZGUgJiZcclxuICAgICAgICAgICAgICAgICAgICAodm5vZGVIb29rID0gcHJvcHMgJiYgcHJvcHMub25Wbm9kZU1vdW50ZWQpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2NvcGVkSW5pdGlhbFZOb2RlID0gaW5pdGlhbFZOb2RlO1xyXG4gICAgICAgICAgICAgICAgICAgIHF1ZXVlUG9zdFJlbmRlckVmZmVjdCgoKSA9PiBpbnZva2VWTm9kZUhvb2sodm5vZGVIb29rLCBwYXJlbnQsIHNjb3BlZEluaXRpYWxWTm9kZSksIHBhcmVudFN1c3BlbnNlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIGFjdGl2YXRlZCBob29rIGZvciBrZWVwLWFsaXZlIHJvb3RzLlxyXG4gICAgICAgICAgICAgICAgLy8gIzE3NDIgYWN0aXZhdGVkIGhvb2sgbXVzdCBiZSBhY2Nlc3NlZCBhZnRlciBmaXJzdCByZW5kZXJcclxuICAgICAgICAgICAgICAgIC8vIHNpbmNlIHRoZSBob29rIG1heSBiZSBpbmplY3RlZCBieSBhIGNoaWxkIGtlZXAtYWxpdmVcclxuICAgICAgICAgICAgICAgIGlmIChpbml0aWFsVk5vZGUuc2hhcGVGbGFnICYgMjU2IC8qIENPTVBPTkVOVF9TSE9VTERfS0VFUF9BTElWRSAqLykge1xyXG4gICAgICAgICAgICAgICAgICAgIGluc3RhbmNlLmEgJiYgcXVldWVQb3N0UmVuZGVyRWZmZWN0KGluc3RhbmNlLmEsIHBhcmVudFN1c3BlbnNlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGluc3RhbmNlLmlzTW91bnRlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHx8IF9fVlVFX1BST0RfREVWVE9PTFNfXykge1xyXG4gICAgICAgICAgICAgICAgICAgIGRldnRvb2xzQ29tcG9uZW50QWRkZWQoaW5zdGFuY2UpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gIzI0NTg6IGRlZmVyZW5jZSBtb3VudC1vbmx5IG9iamVjdCBwYXJhbWV0ZXJzIHRvIHByZXZlbnQgbWVtbGVha3NcclxuICAgICAgICAgICAgICAgIGluaXRpYWxWTm9kZSA9IGNvbnRhaW5lciA9IGFuY2hvciA9IG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyB1cGRhdGVDb21wb25lbnRcclxuICAgICAgICAgICAgICAgIC8vIFRoaXMgaXMgdHJpZ2dlcmVkIGJ5IG11dGF0aW9uIG9mIGNvbXBvbmVudCdzIG93biBzdGF0ZSAobmV4dDogbnVsbClcclxuICAgICAgICAgICAgICAgIC8vIE9SIHBhcmVudCBjYWxsaW5nIHByb2Nlc3NDb21wb25lbnQgKG5leHQ6IFZOb2RlKVxyXG4gICAgICAgICAgICAgICAgbGV0IHsgbmV4dCwgYnUsIHUsIHBhcmVudCwgdm5vZGUgfSA9IGluc3RhbmNlO1xyXG4gICAgICAgICAgICAgICAgbGV0IG9yaWdpbk5leHQgPSBuZXh0O1xyXG4gICAgICAgICAgICAgICAgbGV0IHZub2RlSG9vaztcclxuICAgICAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcclxuICAgICAgICAgICAgICAgICAgICBwdXNoV2FybmluZ0NvbnRleHQobmV4dCB8fCBpbnN0YW5jZS52bm9kZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyBEaXNhbGxvdyBjb21wb25lbnQgZWZmZWN0IHJlY3Vyc2lvbiBkdXJpbmcgcHJlLWxpZmVjeWNsZSBob29rcy5cclxuICAgICAgICAgICAgICAgIHRvZ2dsZVJlY3Vyc2UoaW5zdGFuY2UsIGZhbHNlKTtcclxuICAgICAgICAgICAgICAgIGlmIChuZXh0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbmV4dC5lbCA9IHZub2RlLmVsO1xyXG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZUNvbXBvbmVudFByZVJlbmRlcihpbnN0YW5jZSwgbmV4dCwgb3B0aW1pemVkKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIG5leHQgPSB2bm9kZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIGJlZm9yZVVwZGF0ZSBob29rXHJcbiAgICAgICAgICAgICAgICBpZiAoYnUpIHtcclxuICAgICAgICAgICAgICAgICAgICBpbnZva2VBcnJheUZucyhidSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyBvblZub2RlQmVmb3JlVXBkYXRlXHJcbiAgICAgICAgICAgICAgICBpZiAoKHZub2RlSG9vayA9IG5leHQucHJvcHMgJiYgbmV4dC5wcm9wcy5vblZub2RlQmVmb3JlVXBkYXRlKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGludm9rZVZOb2RlSG9vayh2bm9kZUhvb2ssIHBhcmVudCwgbmV4dCwgdm5vZGUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdG9nZ2xlUmVjdXJzZShpbnN0YW5jZSwgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAvLyByZW5kZXJcclxuICAgICAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcclxuICAgICAgICAgICAgICAgICAgICBzdGFydE1lYXN1cmUoaW5zdGFuY2UsIGByZW5kZXJgKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNvbnN0IG5leHRUcmVlID0gcmVuZGVyQ29tcG9uZW50Um9vdChpbnN0YW5jZSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZW5kTWVhc3VyZShpbnN0YW5jZSwgYHJlbmRlcmApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY29uc3QgcHJldlRyZWUgPSBpbnN0YW5jZS5zdWJUcmVlO1xyXG4gICAgICAgICAgICAgICAgaW5zdGFuY2Uuc3ViVHJlZSA9IG5leHRUcmVlO1xyXG4gICAgICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHN0YXJ0TWVhc3VyZShpbnN0YW5jZSwgYHBhdGNoYCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBwYXRjaChwcmV2VHJlZSwgbmV4dFRyZWUsIFxyXG4gICAgICAgICAgICAgICAgLy8gcGFyZW50IG1heSBoYXZlIGNoYW5nZWQgaWYgaXQncyBpbiBhIHRlbGVwb3J0XHJcbiAgICAgICAgICAgICAgICBob3N0UGFyZW50Tm9kZShwcmV2VHJlZS5lbCksIFxyXG4gICAgICAgICAgICAgICAgLy8gYW5jaG9yIG1heSBoYXZlIGNoYW5nZWQgaWYgaXQncyBpbiBhIGZyYWdtZW50XHJcbiAgICAgICAgICAgICAgICBnZXROZXh0SG9zdE5vZGUocHJldlRyZWUpLCBpbnN0YW5jZSwgcGFyZW50U3VzcGVuc2UsIGlzU1ZHKTtcclxuICAgICAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcclxuICAgICAgICAgICAgICAgICAgICBlbmRNZWFzdXJlKGluc3RhbmNlLCBgcGF0Y2hgKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIG5leHQuZWwgPSBuZXh0VHJlZS5lbDtcclxuICAgICAgICAgICAgICAgIGlmIChvcmlnaW5OZXh0ID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gc2VsZi10cmlnZ2VyZWQgdXBkYXRlLiBJbiBjYXNlIG9mIEhPQywgdXBkYXRlIHBhcmVudCBjb21wb25lbnRcclxuICAgICAgICAgICAgICAgICAgICAvLyB2bm9kZSBlbC4gSE9DIGlzIGluZGljYXRlZCBieSBwYXJlbnQgaW5zdGFuY2UncyBzdWJUcmVlIHBvaW50aW5nXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gdG8gY2hpbGQgY29tcG9uZW50J3Mgdm5vZGVcclxuICAgICAgICAgICAgICAgICAgICB1cGRhdGVIT0NIb3N0RWwoaW5zdGFuY2UsIG5leHRUcmVlLmVsKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIHVwZGF0ZWQgaG9va1xyXG4gICAgICAgICAgICAgICAgaWYgKHUpIHtcclxuICAgICAgICAgICAgICAgICAgICBxdWV1ZVBvc3RSZW5kZXJFZmZlY3QodSwgcGFyZW50U3VzcGVuc2UpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gb25Wbm9kZVVwZGF0ZWRcclxuICAgICAgICAgICAgICAgIGlmICgodm5vZGVIb29rID0gbmV4dC5wcm9wcyAmJiBuZXh0LnByb3BzLm9uVm5vZGVVcGRhdGVkKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHF1ZXVlUG9zdFJlbmRlckVmZmVjdCgoKSA9PiBpbnZva2VWTm9kZUhvb2sodm5vZGVIb29rLCBwYXJlbnQsIG5leHQsIHZub2RlKSwgcGFyZW50U3VzcGVuc2UpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB8fCBfX1ZVRV9QUk9EX0RFVlRPT0xTX18pIHtcclxuICAgICAgICAgICAgICAgICAgICBkZXZ0b29sc0NvbXBvbmVudFVwZGF0ZWQoaW5zdGFuY2UpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHBvcFdhcm5pbmdDb250ZXh0KCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIC8vIGNyZWF0ZSByZWFjdGl2ZSBlZmZlY3QgZm9yIHJlbmRlcmluZ1xyXG4gICAgICAgIGNvbnN0IGVmZmVjdCA9IChpbnN0YW5jZS5lZmZlY3QgPSBuZXcgUmVhY3RpdmVFZmZlY3QoY29tcG9uZW50VXBkYXRlRm4sICgpID0+IHF1ZXVlSm9iKGluc3RhbmNlLnVwZGF0ZSksIGluc3RhbmNlLnNjb3BlIC8vIHRyYWNrIGl0IGluIGNvbXBvbmVudCdzIGVmZmVjdCBzY29wZVxyXG4gICAgICAgICkpO1xyXG4gICAgICAgIGNvbnN0IHVwZGF0ZSA9IChpbnN0YW5jZS51cGRhdGUgPSBlZmZlY3QucnVuLmJpbmQoZWZmZWN0KSk7XHJcbiAgICAgICAgdXBkYXRlLmlkID0gaW5zdGFuY2UudWlkO1xyXG4gICAgICAgIC8vIGFsbG93UmVjdXJzZVxyXG4gICAgICAgIC8vICMxODAxLCAjMjA0MyBjb21wb25lbnQgcmVuZGVyIGVmZmVjdHMgc2hvdWxkIGFsbG93IHJlY3Vyc2l2ZSB1cGRhdGVzXHJcbiAgICAgICAgdG9nZ2xlUmVjdXJzZShpbnN0YW5jZSwgdHJ1ZSk7XHJcbiAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xyXG4gICAgICAgICAgICBlZmZlY3Qub25UcmFjayA9IGluc3RhbmNlLnJ0Y1xyXG4gICAgICAgICAgICAgICAgPyBlID0+IGludm9rZUFycmF5Rm5zKGluc3RhbmNlLnJ0YywgZSlcclxuICAgICAgICAgICAgICAgIDogdm9pZCAwO1xyXG4gICAgICAgICAgICBlZmZlY3Qub25UcmlnZ2VyID0gaW5zdGFuY2UucnRnXHJcbiAgICAgICAgICAgICAgICA/IGUgPT4gaW52b2tlQXJyYXlGbnMoaW5zdGFuY2UucnRnLCBlKVxyXG4gICAgICAgICAgICAgICAgOiB2b2lkIDA7XHJcbiAgICAgICAgICAgIC8vIEB0cy1pZ25vcmUgKGZvciBzY2hlZHVsZXIpXHJcbiAgICAgICAgICAgIHVwZGF0ZS5vd25lckluc3RhbmNlID0gaW5zdGFuY2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHVwZGF0ZSgpO1xyXG4gICAgfTtcclxuICAgIGNvbnN0IHVwZGF0ZUNvbXBvbmVudFByZVJlbmRlciA9IChpbnN0YW5jZSwgbmV4dFZOb2RlLCBvcHRpbWl6ZWQpID0+IHtcclxuICAgICAgICBuZXh0Vk5vZGUuY29tcG9uZW50ID0gaW5zdGFuY2U7XHJcbiAgICAgICAgY29uc3QgcHJldlByb3BzID0gaW5zdGFuY2Uudm5vZGUucHJvcHM7XHJcbiAgICAgICAgaW5zdGFuY2Uudm5vZGUgPSBuZXh0Vk5vZGU7XHJcbiAgICAgICAgaW5zdGFuY2UubmV4dCA9IG51bGw7XHJcbiAgICAgICAgdXBkYXRlUHJvcHMoaW5zdGFuY2UsIG5leHRWTm9kZS5wcm9wcywgcHJldlByb3BzLCBvcHRpbWl6ZWQpO1xyXG4gICAgICAgIHVwZGF0ZVNsb3RzKGluc3RhbmNlLCBuZXh0Vk5vZGUuY2hpbGRyZW4sIG9wdGltaXplZCk7XHJcbiAgICAgICAgcGF1c2VUcmFja2luZygpO1xyXG4gICAgICAgIC8vIHByb3BzIHVwZGF0ZSBtYXkgaGF2ZSB0cmlnZ2VyZWQgcHJlLWZsdXNoIHdhdGNoZXJzLlxyXG4gICAgICAgIC8vIGZsdXNoIHRoZW0gYmVmb3JlIHRoZSByZW5kZXIgdXBkYXRlLlxyXG4gICAgICAgIGZsdXNoUHJlRmx1c2hDYnModW5kZWZpbmVkLCBpbnN0YW5jZS51cGRhdGUpO1xyXG4gICAgICAgIHJlc2V0VHJhY2tpbmcoKTtcclxuICAgIH07XHJcbiAgICBjb25zdCBwYXRjaENoaWxkcmVuID0gKG4xLCBuMiwgY29udGFpbmVyLCBhbmNob3IsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIGlzU1ZHLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCA9IGZhbHNlKSA9PiB7XHJcbiAgICAgICAgY29uc3QgYzEgPSBuMSAmJiBuMS5jaGlsZHJlbjtcclxuICAgICAgICBjb25zdCBwcmV2U2hhcGVGbGFnID0gbjEgPyBuMS5zaGFwZUZsYWcgOiAwO1xyXG4gICAgICAgIGNvbnN0IGMyID0gbjIuY2hpbGRyZW47XHJcbiAgICAgICAgY29uc3QgeyBwYXRjaEZsYWcsIHNoYXBlRmxhZyB9ID0gbjI7XHJcbiAgICAgICAgLy8gZmFzdCBwYXRoXHJcbiAgICAgICAgaWYgKHBhdGNoRmxhZyA+IDApIHtcclxuICAgICAgICAgICAgaWYgKHBhdGNoRmxhZyAmIDEyOCAvKiBLRVlFRF9GUkFHTUVOVCAqLykge1xyXG4gICAgICAgICAgICAgICAgLy8gdGhpcyBjb3VsZCBiZSBlaXRoZXIgZnVsbHkta2V5ZWQgb3IgbWl4ZWQgKHNvbWUga2V5ZWQgc29tZSBub3QpXHJcbiAgICAgICAgICAgICAgICAvLyBwcmVzZW5jZSBvZiBwYXRjaEZsYWcgbWVhbnMgY2hpbGRyZW4gYXJlIGd1YXJhbnRlZWQgdG8gYmUgYXJyYXlzXHJcbiAgICAgICAgICAgICAgICBwYXRjaEtleWVkQ2hpbGRyZW4oYzEsIGMyLCBjb250YWluZXIsIGFuY2hvciwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgaXNTVkcsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChwYXRjaEZsYWcgJiAyNTYgLyogVU5LRVlFRF9GUkFHTUVOVCAqLykge1xyXG4gICAgICAgICAgICAgICAgLy8gdW5rZXllZFxyXG4gICAgICAgICAgICAgICAgcGF0Y2hVbmtleWVkQ2hpbGRyZW4oYzEsIGMyLCBjb250YWluZXIsIGFuY2hvciwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgaXNTVkcsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBjaGlsZHJlbiBoYXMgMyBwb3NzaWJpbGl0aWVzOiB0ZXh0LCBhcnJheSBvciBubyBjaGlsZHJlbi5cclxuICAgICAgICBpZiAoc2hhcGVGbGFnICYgOCAvKiBURVhUX0NISUxEUkVOICovKSB7XHJcbiAgICAgICAgICAgIC8vIHRleHQgY2hpbGRyZW4gZmFzdCBwYXRoXHJcbiAgICAgICAgICAgIGlmIChwcmV2U2hhcGVGbGFnICYgMTYgLyogQVJSQVlfQ0hJTERSRU4gKi8pIHtcclxuICAgICAgICAgICAgICAgIHVubW91bnRDaGlsZHJlbihjMSwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGMyICE9PSBjMSkge1xyXG4gICAgICAgICAgICAgICAgaG9zdFNldEVsZW1lbnRUZXh0KGNvbnRhaW5lciwgYzIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAocHJldlNoYXBlRmxhZyAmIDE2IC8qIEFSUkFZX0NISUxEUkVOICovKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBwcmV2IGNoaWxkcmVuIHdhcyBhcnJheVxyXG4gICAgICAgICAgICAgICAgaWYgKHNoYXBlRmxhZyAmIDE2IC8qIEFSUkFZX0NISUxEUkVOICovKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gdHdvIGFycmF5cywgY2Fubm90IGFzc3VtZSBhbnl0aGluZywgZG8gZnVsbCBkaWZmXHJcbiAgICAgICAgICAgICAgICAgICAgcGF0Y2hLZXllZENoaWxkcmVuKGMxLCBjMiwgY29udGFpbmVyLCBhbmNob3IsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIGlzU1ZHLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBubyBuZXcgY2hpbGRyZW4sIGp1c3QgdW5tb3VudCBvbGRcclxuICAgICAgICAgICAgICAgICAgICB1bm1vdW50Q2hpbGRyZW4oYzEsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8gcHJldiBjaGlsZHJlbiB3YXMgdGV4dCBPUiBudWxsXHJcbiAgICAgICAgICAgICAgICAvLyBuZXcgY2hpbGRyZW4gaXMgYXJyYXkgT1IgbnVsbFxyXG4gICAgICAgICAgICAgICAgaWYgKHByZXZTaGFwZUZsYWcgJiA4IC8qIFRFWFRfQ0hJTERSRU4gKi8pIHtcclxuICAgICAgICAgICAgICAgICAgICBob3N0U2V0RWxlbWVudFRleHQoY29udGFpbmVyLCAnJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyBtb3VudCBuZXcgaWYgYXJyYXlcclxuICAgICAgICAgICAgICAgIGlmIChzaGFwZUZsYWcgJiAxNiAvKiBBUlJBWV9DSElMRFJFTiAqLykge1xyXG4gICAgICAgICAgICAgICAgICAgIG1vdW50Q2hpbGRyZW4oYzIsIGNvbnRhaW5lciwgYW5jaG9yLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBpc1NWRywgc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIGNvbnN0IHBhdGNoVW5rZXllZENoaWxkcmVuID0gKGMxLCBjMiwgY29udGFpbmVyLCBhbmNob3IsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIGlzU1ZHLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCkgPT4ge1xyXG4gICAgICAgIGMxID0gYzEgfHwgRU1QVFlfQVJSO1xyXG4gICAgICAgIGMyID0gYzIgfHwgRU1QVFlfQVJSO1xyXG4gICAgICAgIGNvbnN0IG9sZExlbmd0aCA9IGMxLmxlbmd0aDtcclxuICAgICAgICBjb25zdCBuZXdMZW5ndGggPSBjMi5sZW5ndGg7XHJcbiAgICAgICAgY29uc3QgY29tbW9uTGVuZ3RoID0gTWF0aC5taW4ob2xkTGVuZ3RoLCBuZXdMZW5ndGgpO1xyXG4gICAgICAgIGxldCBpO1xyXG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCBjb21tb25MZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBjb25zdCBuZXh0Q2hpbGQgPSAoYzJbaV0gPSBvcHRpbWl6ZWRcclxuICAgICAgICAgICAgICAgID8gY2xvbmVJZk1vdW50ZWQoYzJbaV0pXHJcbiAgICAgICAgICAgICAgICA6IG5vcm1hbGl6ZVZOb2RlKGMyW2ldKSk7XHJcbiAgICAgICAgICAgIHBhdGNoKGMxW2ldLCBuZXh0Q2hpbGQsIGNvbnRhaW5lciwgbnVsbCwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgaXNTVkcsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKG9sZExlbmd0aCA+IG5ld0xlbmd0aCkge1xyXG4gICAgICAgICAgICAvLyByZW1vdmUgb2xkXHJcbiAgICAgICAgICAgIHVubW91bnRDaGlsZHJlbihjMSwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgdHJ1ZSwgZmFsc2UsIGNvbW1vbkxlbmd0aCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBtb3VudCBuZXdcclxuICAgICAgICAgICAgbW91bnRDaGlsZHJlbihjMiwgY29udGFpbmVyLCBhbmNob3IsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIGlzU1ZHLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCwgY29tbW9uTGVuZ3RoKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgLy8gY2FuIGJlIGFsbC1rZXllZCBvciBtaXhlZFxyXG4gICAgY29uc3QgcGF0Y2hLZXllZENoaWxkcmVuID0gKGMxLCBjMiwgY29udGFpbmVyLCBwYXJlbnRBbmNob3IsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIGlzU1ZHLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCkgPT4ge1xyXG4gICAgICAgIGxldCBpID0gMDtcclxuICAgICAgICBjb25zdCBsMiA9IGMyLmxlbmd0aDtcclxuICAgICAgICBsZXQgZTEgPSBjMS5sZW5ndGggLSAxOyAvLyBwcmV2IGVuZGluZyBpbmRleFxyXG4gICAgICAgIGxldCBlMiA9IGwyIC0gMTsgLy8gbmV4dCBlbmRpbmcgaW5kZXhcclxuICAgICAgICAvLyAxLiBzeW5jIGZyb20gc3RhcnRcclxuICAgICAgICAvLyAoYSBiKSBjXHJcbiAgICAgICAgLy8gKGEgYikgZCBlXHJcbiAgICAgICAgd2hpbGUgKGkgPD0gZTEgJiYgaSA8PSBlMikge1xyXG4gICAgICAgICAgICBjb25zdCBuMSA9IGMxW2ldO1xyXG4gICAgICAgICAgICBjb25zdCBuMiA9IChjMltpXSA9IG9wdGltaXplZFxyXG4gICAgICAgICAgICAgICAgPyBjbG9uZUlmTW91bnRlZChjMltpXSlcclxuICAgICAgICAgICAgICAgIDogbm9ybWFsaXplVk5vZGUoYzJbaV0pKTtcclxuICAgICAgICAgICAgaWYgKGlzU2FtZVZOb2RlVHlwZShuMSwgbjIpKSB7XHJcbiAgICAgICAgICAgICAgICBwYXRjaChuMSwgbjIsIGNvbnRhaW5lciwgbnVsbCwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgaXNTVkcsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGkrKztcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gMi4gc3luYyBmcm9tIGVuZFxyXG4gICAgICAgIC8vIGEgKGIgYylcclxuICAgICAgICAvLyBkIGUgKGIgYylcclxuICAgICAgICB3aGlsZSAoaSA8PSBlMSAmJiBpIDw9IGUyKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG4xID0gYzFbZTFdO1xyXG4gICAgICAgICAgICBjb25zdCBuMiA9IChjMltlMl0gPSBvcHRpbWl6ZWRcclxuICAgICAgICAgICAgICAgID8gY2xvbmVJZk1vdW50ZWQoYzJbZTJdKVxyXG4gICAgICAgICAgICAgICAgOiBub3JtYWxpemVWTm9kZShjMltlMl0pKTtcclxuICAgICAgICAgICAgaWYgKGlzU2FtZVZOb2RlVHlwZShuMSwgbjIpKSB7XHJcbiAgICAgICAgICAgICAgICBwYXRjaChuMSwgbjIsIGNvbnRhaW5lciwgbnVsbCwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgaXNTVkcsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGUxLS07XHJcbiAgICAgICAgICAgIGUyLS07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIDMuIGNvbW1vbiBzZXF1ZW5jZSArIG1vdW50XHJcbiAgICAgICAgLy8gKGEgYilcclxuICAgICAgICAvLyAoYSBiKSBjXHJcbiAgICAgICAgLy8gaSA9IDIsIGUxID0gMSwgZTIgPSAyXHJcbiAgICAgICAgLy8gKGEgYilcclxuICAgICAgICAvLyBjIChhIGIpXHJcbiAgICAgICAgLy8gaSA9IDAsIGUxID0gLTEsIGUyID0gMFxyXG4gICAgICAgIGlmIChpID4gZTEpIHtcclxuICAgICAgICAgICAgaWYgKGkgPD0gZTIpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG5leHRQb3MgPSBlMiArIDE7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBhbmNob3IgPSBuZXh0UG9zIDwgbDIgPyBjMltuZXh0UG9zXS5lbCA6IHBhcmVudEFuY2hvcjtcclxuICAgICAgICAgICAgICAgIHdoaWxlIChpIDw9IGUyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcGF0Y2gobnVsbCwgKGMyW2ldID0gb3B0aW1pemVkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgID8gY2xvbmVJZk1vdW50ZWQoYzJbaV0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDogbm9ybWFsaXplVk5vZGUoYzJbaV0pKSwgY29udGFpbmVyLCBhbmNob3IsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIGlzU1ZHLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaSsrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIDQuIGNvbW1vbiBzZXF1ZW5jZSArIHVubW91bnRcclxuICAgICAgICAvLyAoYSBiKSBjXHJcbiAgICAgICAgLy8gKGEgYilcclxuICAgICAgICAvLyBpID0gMiwgZTEgPSAyLCBlMiA9IDFcclxuICAgICAgICAvLyBhIChiIGMpXHJcbiAgICAgICAgLy8gKGIgYylcclxuICAgICAgICAvLyBpID0gMCwgZTEgPSAwLCBlMiA9IC0xXHJcbiAgICAgICAgZWxzZSBpZiAoaSA+IGUyKSB7XHJcbiAgICAgICAgICAgIHdoaWxlIChpIDw9IGUxKSB7XHJcbiAgICAgICAgICAgICAgICB1bm1vdW50KGMxW2ldLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCB0cnVlKTtcclxuICAgICAgICAgICAgICAgIGkrKztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAvLyA1LiB1bmtub3duIHNlcXVlbmNlXHJcbiAgICAgICAgLy8gW2kgLi4uIGUxICsgMV06IGEgYiBbYyBkIGVdIGYgZ1xyXG4gICAgICAgIC8vIFtpIC4uLiBlMiArIDFdOiBhIGIgW2UgZCBjIGhdIGYgZ1xyXG4gICAgICAgIC8vIGkgPSAyLCBlMSA9IDQsIGUyID0gNVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zdCBzMSA9IGk7IC8vIHByZXYgc3RhcnRpbmcgaW5kZXhcclxuICAgICAgICAgICAgY29uc3QgczIgPSBpOyAvLyBuZXh0IHN0YXJ0aW5nIGluZGV4XHJcbiAgICAgICAgICAgIC8vIDUuMSBidWlsZCBrZXk6aW5kZXggbWFwIGZvciBuZXdDaGlsZHJlblxyXG4gICAgICAgICAgICBjb25zdCBrZXlUb05ld0luZGV4TWFwID0gbmV3IE1hcCgpO1xyXG4gICAgICAgICAgICBmb3IgKGkgPSBzMjsgaSA8PSBlMjsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBuZXh0Q2hpbGQgPSAoYzJbaV0gPSBvcHRpbWl6ZWRcclxuICAgICAgICAgICAgICAgICAgICA/IGNsb25lSWZNb3VudGVkKGMyW2ldKVxyXG4gICAgICAgICAgICAgICAgICAgIDogbm9ybWFsaXplVk5vZGUoYzJbaV0pKTtcclxuICAgICAgICAgICAgICAgIGlmIChuZXh0Q2hpbGQua2V5ICE9IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmIGtleVRvTmV3SW5kZXhNYXAuaGFzKG5leHRDaGlsZC5rZXkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdhcm4oYER1cGxpY2F0ZSBrZXlzIGZvdW5kIGR1cmluZyB1cGRhdGU6YCwgSlNPTi5zdHJpbmdpZnkobmV4dENoaWxkLmtleSksIGBNYWtlIHN1cmUga2V5cyBhcmUgdW5pcXVlLmApO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBrZXlUb05ld0luZGV4TWFwLnNldChuZXh0Q2hpbGQua2V5LCBpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyA1LjIgbG9vcCB0aHJvdWdoIG9sZCBjaGlsZHJlbiBsZWZ0IHRvIGJlIHBhdGNoZWQgYW5kIHRyeSB0byBwYXRjaFxyXG4gICAgICAgICAgICAvLyBtYXRjaGluZyBub2RlcyAmIHJlbW92ZSBub2RlcyB0aGF0IGFyZSBubyBsb25nZXIgcHJlc2VudFxyXG4gICAgICAgICAgICBsZXQgajtcclxuICAgICAgICAgICAgbGV0IHBhdGNoZWQgPSAwO1xyXG4gICAgICAgICAgICBjb25zdCB0b0JlUGF0Y2hlZCA9IGUyIC0gczIgKyAxO1xyXG4gICAgICAgICAgICBsZXQgbW92ZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgLy8gdXNlZCB0byB0cmFjayB3aGV0aGVyIGFueSBub2RlIGhhcyBtb3ZlZFxyXG4gICAgICAgICAgICBsZXQgbWF4TmV3SW5kZXhTb0ZhciA9IDA7XHJcbiAgICAgICAgICAgIC8vIHdvcmtzIGFzIE1hcDxuZXdJbmRleCwgb2xkSW5kZXg+XHJcbiAgICAgICAgICAgIC8vIE5vdGUgdGhhdCBvbGRJbmRleCBpcyBvZmZzZXQgYnkgKzFcclxuICAgICAgICAgICAgLy8gYW5kIG9sZEluZGV4ID0gMCBpcyBhIHNwZWNpYWwgdmFsdWUgaW5kaWNhdGluZyB0aGUgbmV3IG5vZGUgaGFzXHJcbiAgICAgICAgICAgIC8vIG5vIGNvcnJlc3BvbmRpbmcgb2xkIG5vZGUuXHJcbiAgICAgICAgICAgIC8vIHVzZWQgZm9yIGRldGVybWluaW5nIGxvbmdlc3Qgc3RhYmxlIHN1YnNlcXVlbmNlXHJcbiAgICAgICAgICAgIGNvbnN0IG5ld0luZGV4VG9PbGRJbmRleE1hcCA9IG5ldyBBcnJheSh0b0JlUGF0Y2hlZCk7XHJcbiAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCB0b0JlUGF0Y2hlZDsgaSsrKVxyXG4gICAgICAgICAgICAgICAgbmV3SW5kZXhUb09sZEluZGV4TWFwW2ldID0gMDtcclxuICAgICAgICAgICAgZm9yIChpID0gczE7IGkgPD0gZTE7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcHJldkNoaWxkID0gYzFbaV07XHJcbiAgICAgICAgICAgICAgICBpZiAocGF0Y2hlZCA+PSB0b0JlUGF0Y2hlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGFsbCBuZXcgY2hpbGRyZW4gaGF2ZSBiZWVuIHBhdGNoZWQgc28gdGhpcyBjYW4gb25seSBiZSBhIHJlbW92YWxcclxuICAgICAgICAgICAgICAgICAgICB1bm1vdW50KHByZXZDaGlsZCwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBsZXQgbmV3SW5kZXg7XHJcbiAgICAgICAgICAgICAgICBpZiAocHJldkNoaWxkLmtleSAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbmV3SW5kZXggPSBrZXlUb05ld0luZGV4TWFwLmdldChwcmV2Q2hpbGQua2V5KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGtleS1sZXNzIG5vZGUsIHRyeSB0byBsb2NhdGUgYSBrZXktbGVzcyBub2RlIG9mIHRoZSBzYW1lIHR5cGVcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGogPSBzMjsgaiA8PSBlMjsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuZXdJbmRleFRvT2xkSW5kZXhNYXBbaiAtIHMyXSA9PT0gMCAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNTYW1lVk5vZGVUeXBlKHByZXZDaGlsZCwgYzJbal0pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdJbmRleCA9IGo7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChuZXdJbmRleCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdW5tb3VudChwcmV2Q2hpbGQsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbmV3SW5kZXhUb09sZEluZGV4TWFwW25ld0luZGV4IC0gczJdID0gaSArIDE7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5ld0luZGV4ID49IG1heE5ld0luZGV4U29GYXIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWF4TmV3SW5kZXhTb0ZhciA9IG5ld0luZGV4O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbW92ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBwYXRjaChwcmV2Q2hpbGQsIGMyW25ld0luZGV4XSwgY29udGFpbmVyLCBudWxsLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBpc1NWRywgc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQpO1xyXG4gICAgICAgICAgICAgICAgICAgIHBhdGNoZWQrKztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyA1LjMgbW92ZSBhbmQgbW91bnRcclxuICAgICAgICAgICAgLy8gZ2VuZXJhdGUgbG9uZ2VzdCBzdGFibGUgc3Vic2VxdWVuY2Ugb25seSB3aGVuIG5vZGVzIGhhdmUgbW92ZWRcclxuICAgICAgICAgICAgY29uc3QgaW5jcmVhc2luZ05ld0luZGV4U2VxdWVuY2UgPSBtb3ZlZFxyXG4gICAgICAgICAgICAgICAgPyBnZXRTZXF1ZW5jZShuZXdJbmRleFRvT2xkSW5kZXhNYXApXHJcbiAgICAgICAgICAgICAgICA6IEVNUFRZX0FSUjtcclxuICAgICAgICAgICAgaiA9IGluY3JlYXNpbmdOZXdJbmRleFNlcXVlbmNlLmxlbmd0aCAtIDE7XHJcbiAgICAgICAgICAgIC8vIGxvb3BpbmcgYmFja3dhcmRzIHNvIHRoYXQgd2UgY2FuIHVzZSBsYXN0IHBhdGNoZWQgbm9kZSBhcyBhbmNob3JcclxuICAgICAgICAgICAgZm9yIChpID0gdG9CZVBhdGNoZWQgLSAxOyBpID49IDA7IGktLSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbmV4dEluZGV4ID0gczIgKyBpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbmV4dENoaWxkID0gYzJbbmV4dEluZGV4XTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGFuY2hvciA9IG5leHRJbmRleCArIDEgPCBsMiA/IGMyW25leHRJbmRleCArIDFdLmVsIDogcGFyZW50QW5jaG9yO1xyXG4gICAgICAgICAgICAgICAgaWYgKG5ld0luZGV4VG9PbGRJbmRleE1hcFtpXSA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIG1vdW50IG5ld1xyXG4gICAgICAgICAgICAgICAgICAgIHBhdGNoKG51bGwsIG5leHRDaGlsZCwgY29udGFpbmVyLCBhbmNob3IsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIGlzU1ZHLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChtb3ZlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIG1vdmUgaWY6XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gVGhlcmUgaXMgbm8gc3RhYmxlIHN1YnNlcXVlbmNlIChlLmcuIGEgcmV2ZXJzZSlcclxuICAgICAgICAgICAgICAgICAgICAvLyBPUiBjdXJyZW50IG5vZGUgaXMgbm90IGFtb25nIHRoZSBzdGFibGUgc2VxdWVuY2VcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaiA8IDAgfHwgaSAhPT0gaW5jcmVhc2luZ05ld0luZGV4U2VxdWVuY2Vbal0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbW92ZShuZXh0Q2hpbGQsIGNvbnRhaW5lciwgYW5jaG9yLCAyIC8qIFJFT1JERVIgKi8pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgai0tO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBjb25zdCBtb3ZlID0gKHZub2RlLCBjb250YWluZXIsIGFuY2hvciwgbW92ZVR5cGUsIHBhcmVudFN1c3BlbnNlID0gbnVsbCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IHsgZWwsIHR5cGUsIHRyYW5zaXRpb24sIGNoaWxkcmVuLCBzaGFwZUZsYWcgfSA9IHZub2RlO1xyXG4gICAgICAgIGlmIChzaGFwZUZsYWcgJiA2IC8qIENPTVBPTkVOVCAqLykge1xyXG4gICAgICAgICAgICBtb3ZlKHZub2RlLmNvbXBvbmVudC5zdWJUcmVlLCBjb250YWluZXIsIGFuY2hvciwgbW92ZVR5cGUpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChzaGFwZUZsYWcgJiAxMjggLyogU1VTUEVOU0UgKi8pIHtcclxuICAgICAgICAgICAgdm5vZGUuc3VzcGVuc2UubW92ZShjb250YWluZXIsIGFuY2hvciwgbW92ZVR5cGUpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChzaGFwZUZsYWcgJiA2NCAvKiBURUxFUE9SVCAqLykge1xyXG4gICAgICAgICAgICB0eXBlLm1vdmUodm5vZGUsIGNvbnRhaW5lciwgYW5jaG9yLCBpbnRlcm5hbHMpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0eXBlID09PSBGcmFnbWVudCkge1xyXG4gICAgICAgICAgICBob3N0SW5zZXJ0KGVsLCBjb250YWluZXIsIGFuY2hvcik7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIG1vdmUoY2hpbGRyZW5baV0sIGNvbnRhaW5lciwgYW5jaG9yLCBtb3ZlVHlwZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaG9zdEluc2VydCh2bm9kZS5hbmNob3IsIGNvbnRhaW5lciwgYW5jaG9yKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodHlwZSA9PT0gU3RhdGljKSB7XHJcbiAgICAgICAgICAgIG1vdmVTdGF0aWNOb2RlKHZub2RlLCBjb250YWluZXIsIGFuY2hvcik7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gc2luZ2xlIG5vZGVzXHJcbiAgICAgICAgY29uc3QgbmVlZFRyYW5zaXRpb24gPSBtb3ZlVHlwZSAhPT0gMiAvKiBSRU9SREVSICovICYmXHJcbiAgICAgICAgICAgIHNoYXBlRmxhZyAmIDEgLyogRUxFTUVOVCAqLyAmJlxyXG4gICAgICAgICAgICB0cmFuc2l0aW9uO1xyXG4gICAgICAgIGlmIChuZWVkVHJhbnNpdGlvbikge1xyXG4gICAgICAgICAgICBpZiAobW92ZVR5cGUgPT09IDAgLyogRU5URVIgKi8pIHtcclxuICAgICAgICAgICAgICAgIHRyYW5zaXRpb24uYmVmb3JlRW50ZXIoZWwpO1xyXG4gICAgICAgICAgICAgICAgaG9zdEluc2VydChlbCwgY29udGFpbmVyLCBhbmNob3IpO1xyXG4gICAgICAgICAgICAgICAgcXVldWVQb3N0UmVuZGVyRWZmZWN0KCgpID0+IHRyYW5zaXRpb24uZW50ZXIoZWwpLCBwYXJlbnRTdXNwZW5zZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB7IGxlYXZlLCBkZWxheUxlYXZlLCBhZnRlckxlYXZlIH0gPSB0cmFuc2l0aW9uO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcmVtb3ZlID0gKCkgPT4gaG9zdEluc2VydChlbCwgY29udGFpbmVyLCBhbmNob3IpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcGVyZm9ybUxlYXZlID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGxlYXZlKGVsLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhZnRlckxlYXZlICYmIGFmdGVyTGVhdmUoKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICBpZiAoZGVsYXlMZWF2ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGRlbGF5TGVhdmUoZWwsIHJlbW92ZSwgcGVyZm9ybUxlYXZlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHBlcmZvcm1MZWF2ZSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBob3N0SW5zZXJ0KGVsLCBjb250YWluZXIsIGFuY2hvcik7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIGNvbnN0IHVubW91bnQgPSAodm5vZGUsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIGRvUmVtb3ZlID0gZmFsc2UsIG9wdGltaXplZCA9IGZhbHNlKSA9PiB7XHJcbiAgICAgICAgY29uc3QgeyB0eXBlLCBwcm9wcywgcmVmLCBjaGlsZHJlbiwgZHluYW1pY0NoaWxkcmVuLCBzaGFwZUZsYWcsIHBhdGNoRmxhZywgZGlycyB9ID0gdm5vZGU7XHJcbiAgICAgICAgLy8gdW5zZXQgcmVmXHJcbiAgICAgICAgaWYgKHJlZiAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgIHNldFJlZihyZWYsIG51bGwsIHBhcmVudFN1c3BlbnNlLCB2bm9kZSwgdHJ1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChzaGFwZUZsYWcgJiAyNTYgLyogQ09NUE9ORU5UX1NIT1VMRF9LRUVQX0FMSVZFICovKSB7XHJcbiAgICAgICAgICAgIHBhcmVudENvbXBvbmVudC5jdHguZGVhY3RpdmF0ZSh2bm9kZSk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3Qgc2hvdWxkSW52b2tlRGlycyA9IHNoYXBlRmxhZyAmIDEgLyogRUxFTUVOVCAqLyAmJiBkaXJzO1xyXG4gICAgICAgIGNvbnN0IHNob3VsZEludm9rZVZub2RlSG9vayA9ICFpc0FzeW5jV3JhcHBlcih2bm9kZSk7XHJcbiAgICAgICAgbGV0IHZub2RlSG9vaztcclxuICAgICAgICBpZiAoc2hvdWxkSW52b2tlVm5vZGVIb29rICYmXHJcbiAgICAgICAgICAgICh2bm9kZUhvb2sgPSBwcm9wcyAmJiBwcm9wcy5vblZub2RlQmVmb3JlVW5tb3VudCkpIHtcclxuICAgICAgICAgICAgaW52b2tlVk5vZGVIb29rKHZub2RlSG9vaywgcGFyZW50Q29tcG9uZW50LCB2bm9kZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChzaGFwZUZsYWcgJiA2IC8qIENPTVBPTkVOVCAqLykge1xyXG4gICAgICAgICAgICB1bm1vdW50Q29tcG9uZW50KHZub2RlLmNvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIGRvUmVtb3ZlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGlmIChzaGFwZUZsYWcgJiAxMjggLyogU1VTUEVOU0UgKi8pIHtcclxuICAgICAgICAgICAgICAgIHZub2RlLnN1c3BlbnNlLnVubW91bnQocGFyZW50U3VzcGVuc2UsIGRvUmVtb3ZlKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoc2hvdWxkSW52b2tlRGlycykge1xyXG4gICAgICAgICAgICAgICAgaW52b2tlRGlyZWN0aXZlSG9vayh2bm9kZSwgbnVsbCwgcGFyZW50Q29tcG9uZW50LCAnYmVmb3JlVW5tb3VudCcpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChzaGFwZUZsYWcgJiA2NCAvKiBURUxFUE9SVCAqLykge1xyXG4gICAgICAgICAgICAgICAgdm5vZGUudHlwZS5yZW1vdmUodm5vZGUsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIG9wdGltaXplZCwgaW50ZXJuYWxzLCBkb1JlbW92ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoZHluYW1pY0NoaWxkcmVuICYmXHJcbiAgICAgICAgICAgICAgICAvLyAjMTE1MzogZmFzdCBwYXRoIHNob3VsZCBub3QgYmUgdGFrZW4gZm9yIG5vbi1zdGFibGUgKHYtZm9yKSBmcmFnbWVudHNcclxuICAgICAgICAgICAgICAgICh0eXBlICE9PSBGcmFnbWVudCB8fFxyXG4gICAgICAgICAgICAgICAgICAgIChwYXRjaEZsYWcgPiAwICYmIHBhdGNoRmxhZyAmIDY0IC8qIFNUQUJMRV9GUkFHTUVOVCAqLykpKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBmYXN0IHBhdGggZm9yIGJsb2NrIG5vZGVzOiBvbmx5IG5lZWQgdG8gdW5tb3VudCBkeW5hbWljIGNoaWxkcmVuLlxyXG4gICAgICAgICAgICAgICAgdW5tb3VudENoaWxkcmVuKGR5bmFtaWNDaGlsZHJlbiwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgZmFsc2UsIHRydWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKCh0eXBlID09PSBGcmFnbWVudCAmJlxyXG4gICAgICAgICAgICAgICAgcGF0Y2hGbGFnICZcclxuICAgICAgICAgICAgICAgICAgICAoMTI4IC8qIEtFWUVEX0ZSQUdNRU5UICovIHwgMjU2IC8qIFVOS0VZRURfRlJBR01FTlQgKi8pKSB8fFxyXG4gICAgICAgICAgICAgICAgKCFvcHRpbWl6ZWQgJiYgc2hhcGVGbGFnICYgMTYgLyogQVJSQVlfQ0hJTERSRU4gKi8pKSB7XHJcbiAgICAgICAgICAgICAgICB1bm1vdW50Q2hpbGRyZW4oY2hpbGRyZW4sIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChkb1JlbW92ZSkge1xyXG4gICAgICAgICAgICAgICAgcmVtb3ZlKHZub2RlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoKHNob3VsZEludm9rZVZub2RlSG9vayAmJlxyXG4gICAgICAgICAgICAodm5vZGVIb29rID0gcHJvcHMgJiYgcHJvcHMub25Wbm9kZVVubW91bnRlZCkpIHx8XHJcbiAgICAgICAgICAgIHNob3VsZEludm9rZURpcnMpIHtcclxuICAgICAgICAgICAgcXVldWVQb3N0UmVuZGVyRWZmZWN0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHZub2RlSG9vayAmJiBpbnZva2VWTm9kZUhvb2sodm5vZGVIb29rLCBwYXJlbnRDb21wb25lbnQsIHZub2RlKTtcclxuICAgICAgICAgICAgICAgIHNob3VsZEludm9rZURpcnMgJiZcclxuICAgICAgICAgICAgICAgICAgICBpbnZva2VEaXJlY3RpdmVIb29rKHZub2RlLCBudWxsLCBwYXJlbnRDb21wb25lbnQsICd1bm1vdW50ZWQnKTtcclxuICAgICAgICAgICAgfSwgcGFyZW50U3VzcGVuc2UpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBjb25zdCByZW1vdmUgPSB2bm9kZSA9PiB7XHJcbiAgICAgICAgY29uc3QgeyB0eXBlLCBlbCwgYW5jaG9yLCB0cmFuc2l0aW9uIH0gPSB2bm9kZTtcclxuICAgICAgICBpZiAodHlwZSA9PT0gRnJhZ21lbnQpIHtcclxuICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJlxyXG4gICAgICAgICAgICAgICAgdm5vZGUucGF0Y2hGbGFnID4gMCAmJlxyXG4gICAgICAgICAgICAgICAgdm5vZGUucGF0Y2hGbGFnICYgMjA0OCAvKiBERVZfUk9PVF9GUkFHTUVOVCAqLyAmJlxyXG4gICAgICAgICAgICAgICAgdHJhbnNpdGlvbiAmJlxyXG4gICAgICAgICAgICAgICAgIXRyYW5zaXRpb24ucGVyc2lzdGVkKSB7XHJcbiAgICAgICAgICAgICAgICB2bm9kZS5jaGlsZHJlbi5mb3JFYWNoKGNoaWxkID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY2hpbGQudHlwZSA9PT0gQ29tbWVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBob3N0UmVtb3ZlKGNoaWxkLmVsKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlbW92ZShjaGlsZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZW1vdmVGcmFnbWVudChlbCwgYW5jaG9yKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0eXBlID09PSBTdGF0aWMpIHtcclxuICAgICAgICAgICAgcmVtb3ZlU3RhdGljTm9kZSh2bm9kZSk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgcGVyZm9ybVJlbW92ZSA9ICgpID0+IHtcclxuICAgICAgICAgICAgaG9zdFJlbW92ZShlbCk7XHJcbiAgICAgICAgICAgIGlmICh0cmFuc2l0aW9uICYmICF0cmFuc2l0aW9uLnBlcnNpc3RlZCAmJiB0cmFuc2l0aW9uLmFmdGVyTGVhdmUpIHtcclxuICAgICAgICAgICAgICAgIHRyYW5zaXRpb24uYWZ0ZXJMZWF2ZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICBpZiAodm5vZGUuc2hhcGVGbGFnICYgMSAvKiBFTEVNRU5UICovICYmXHJcbiAgICAgICAgICAgIHRyYW5zaXRpb24gJiZcclxuICAgICAgICAgICAgIXRyYW5zaXRpb24ucGVyc2lzdGVkKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHsgbGVhdmUsIGRlbGF5TGVhdmUgfSA9IHRyYW5zaXRpb247XHJcbiAgICAgICAgICAgIGNvbnN0IHBlcmZvcm1MZWF2ZSA9ICgpID0+IGxlYXZlKGVsLCBwZXJmb3JtUmVtb3ZlKTtcclxuICAgICAgICAgICAgaWYgKGRlbGF5TGVhdmUpIHtcclxuICAgICAgICAgICAgICAgIGRlbGF5TGVhdmUodm5vZGUuZWwsIHBlcmZvcm1SZW1vdmUsIHBlcmZvcm1MZWF2ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBwZXJmb3JtTGVhdmUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcGVyZm9ybVJlbW92ZSgpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBjb25zdCByZW1vdmVGcmFnbWVudCA9IChjdXIsIGVuZCkgPT4ge1xyXG4gICAgICAgIC8vIEZvciBmcmFnbWVudHMsIGRpcmVjdGx5IHJlbW92ZSBhbGwgY29udGFpbmVkIERPTSBub2Rlcy5cclxuICAgICAgICAvLyAoZnJhZ21lbnQgY2hpbGQgbm9kZXMgY2Fubm90IGhhdmUgdHJhbnNpdGlvbilcclxuICAgICAgICBsZXQgbmV4dDtcclxuICAgICAgICB3aGlsZSAoY3VyICE9PSBlbmQpIHtcclxuICAgICAgICAgICAgbmV4dCA9IGhvc3ROZXh0U2libGluZyhjdXIpO1xyXG4gICAgICAgICAgICBob3N0UmVtb3ZlKGN1cik7XHJcbiAgICAgICAgICAgIGN1ciA9IG5leHQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGhvc3RSZW1vdmUoZW5kKTtcclxuICAgIH07XHJcbiAgICBjb25zdCB1bm1vdW50Q29tcG9uZW50ID0gKGluc3RhbmNlLCBwYXJlbnRTdXNwZW5zZSwgZG9SZW1vdmUpID0+IHtcclxuICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmIGluc3RhbmNlLnR5cGUuX19obXJJZCkge1xyXG4gICAgICAgICAgICB1bnJlZ2lzdGVySE1SKGluc3RhbmNlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgeyBidW0sIHNjb3BlLCB1cGRhdGUsIHN1YlRyZWUsIHVtIH0gPSBpbnN0YW5jZTtcclxuICAgICAgICAvLyBiZWZvcmVVbm1vdW50IGhvb2tcclxuICAgICAgICBpZiAoYnVtKSB7XHJcbiAgICAgICAgICAgIGludm9rZUFycmF5Rm5zKGJ1bSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIHN0b3AgZWZmZWN0cyBpbiBjb21wb25lbnQgc2NvcGVcclxuICAgICAgICBzY29wZS5zdG9wKCk7XHJcbiAgICAgICAgLy8gdXBkYXRlIG1heSBiZSBudWxsIGlmIGEgY29tcG9uZW50IGlzIHVubW91bnRlZCBiZWZvcmUgaXRzIGFzeW5jXHJcbiAgICAgICAgLy8gc2V0dXAgaGFzIHJlc29sdmVkLlxyXG4gICAgICAgIGlmICh1cGRhdGUpIHtcclxuICAgICAgICAgICAgLy8gc28gdGhhdCBzY2hlZHVsZXIgd2lsbCBubyBsb25nZXIgaW52b2tlIGl0XHJcbiAgICAgICAgICAgIHVwZGF0ZS5hY3RpdmUgPSBmYWxzZTtcclxuICAgICAgICAgICAgdW5tb3VudChzdWJUcmVlLCBpbnN0YW5jZSwgcGFyZW50U3VzcGVuc2UsIGRvUmVtb3ZlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gdW5tb3VudGVkIGhvb2tcclxuICAgICAgICBpZiAodW0pIHtcclxuICAgICAgICAgICAgcXVldWVQb3N0UmVuZGVyRWZmZWN0KHVtLCBwYXJlbnRTdXNwZW5zZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHF1ZXVlUG9zdFJlbmRlckVmZmVjdCgoKSA9PiB7XHJcbiAgICAgICAgICAgIGluc3RhbmNlLmlzVW5tb3VudGVkID0gdHJ1ZTtcclxuICAgICAgICB9LCBwYXJlbnRTdXNwZW5zZSk7XHJcbiAgICAgICAgLy8gQSBjb21wb25lbnQgd2l0aCBhc3luYyBkZXAgaW5zaWRlIGEgcGVuZGluZyBzdXNwZW5zZSBpcyB1bm1vdW50ZWQgYmVmb3JlXHJcbiAgICAgICAgLy8gaXRzIGFzeW5jIGRlcCByZXNvbHZlcy4gVGhpcyBzaG91bGQgcmVtb3ZlIHRoZSBkZXAgZnJvbSB0aGUgc3VzcGVuc2UsIGFuZFxyXG4gICAgICAgIC8vIGNhdXNlIHRoZSBzdXNwZW5zZSB0byByZXNvbHZlIGltbWVkaWF0ZWx5IGlmIHRoYXQgd2FzIHRoZSBsYXN0IGRlcC5cclxuICAgICAgICBpZiAocGFyZW50U3VzcGVuc2UgJiZcclxuICAgICAgICAgICAgcGFyZW50U3VzcGVuc2UucGVuZGluZ0JyYW5jaCAmJlxyXG4gICAgICAgICAgICAhcGFyZW50U3VzcGVuc2UuaXNVbm1vdW50ZWQgJiZcclxuICAgICAgICAgICAgaW5zdGFuY2UuYXN5bmNEZXAgJiZcclxuICAgICAgICAgICAgIWluc3RhbmNlLmFzeW5jUmVzb2x2ZWQgJiZcclxuICAgICAgICAgICAgaW5zdGFuY2Uuc3VzcGVuc2VJZCA9PT0gcGFyZW50U3VzcGVuc2UucGVuZGluZ0lkKSB7XHJcbiAgICAgICAgICAgIHBhcmVudFN1c3BlbnNlLmRlcHMtLTtcclxuICAgICAgICAgICAgaWYgKHBhcmVudFN1c3BlbnNlLmRlcHMgPT09IDApIHtcclxuICAgICAgICAgICAgICAgIHBhcmVudFN1c3BlbnNlLnJlc29sdmUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHx8IF9fVlVFX1BST0RfREVWVE9PTFNfXykge1xyXG4gICAgICAgICAgICBkZXZ0b29sc0NvbXBvbmVudFJlbW92ZWQoaW5zdGFuY2UpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBjb25zdCB1bm1vdW50Q2hpbGRyZW4gPSAoY2hpbGRyZW4sIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIGRvUmVtb3ZlID0gZmFsc2UsIG9wdGltaXplZCA9IGZhbHNlLCBzdGFydCA9IDApID0+IHtcclxuICAgICAgICBmb3IgKGxldCBpID0gc3RhcnQ7IGkgPCBjaGlsZHJlbi5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICB1bm1vdW50KGNoaWxkcmVuW2ldLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBkb1JlbW92ZSwgb3B0aW1pemVkKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgY29uc3QgZ2V0TmV4dEhvc3ROb2RlID0gdm5vZGUgPT4ge1xyXG4gICAgICAgIGlmICh2bm9kZS5zaGFwZUZsYWcgJiA2IC8qIENPTVBPTkVOVCAqLykge1xyXG4gICAgICAgICAgICByZXR1cm4gZ2V0TmV4dEhvc3ROb2RlKHZub2RlLmNvbXBvbmVudC5zdWJUcmVlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHZub2RlLnNoYXBlRmxhZyAmIDEyOCAvKiBTVVNQRU5TRSAqLykge1xyXG4gICAgICAgICAgICByZXR1cm4gdm5vZGUuc3VzcGVuc2UubmV4dCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gaG9zdE5leHRTaWJsaW5nKCh2bm9kZS5hbmNob3IgfHwgdm5vZGUuZWwpKTtcclxuICAgIH07XHJcbiAgICBjb25zdCByZW5kZXIgPSAodm5vZGUsIGNvbnRhaW5lciwgaXNTVkcpID0+IHtcclxuICAgICAgICBpZiAodm5vZGUgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBpZiAoY29udGFpbmVyLl92bm9kZSkge1xyXG4gICAgICAgICAgICAgICAgdW5tb3VudChjb250YWluZXIuX3Zub2RlLCBudWxsLCBudWxsLCB0cnVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcGF0Y2goY29udGFpbmVyLl92bm9kZSB8fCBudWxsLCB2bm9kZSwgY29udGFpbmVyLCBudWxsLCBudWxsLCBudWxsLCBpc1NWRyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZsdXNoUG9zdEZsdXNoQ2JzKCk7XHJcbiAgICAgICAgY29udGFpbmVyLl92bm9kZSA9IHZub2RlO1xyXG4gICAgfTtcclxuICAgIGNvbnN0IGludGVybmFscyA9IHtcclxuICAgICAgICBwOiBwYXRjaCxcclxuICAgICAgICB1bTogdW5tb3VudCxcclxuICAgICAgICBtOiBtb3ZlLFxyXG4gICAgICAgIHI6IHJlbW92ZSxcclxuICAgICAgICBtdDogbW91bnRDb21wb25lbnQsXHJcbiAgICAgICAgbWM6IG1vdW50Q2hpbGRyZW4sXHJcbiAgICAgICAgcGM6IHBhdGNoQ2hpbGRyZW4sXHJcbiAgICAgICAgcGJjOiBwYXRjaEJsb2NrQ2hpbGRyZW4sXHJcbiAgICAgICAgbjogZ2V0TmV4dEhvc3ROb2RlLFxyXG4gICAgICAgIG86IG9wdGlvbnNcclxuICAgIH07XHJcbiAgICBsZXQgaHlkcmF0ZTtcclxuICAgIGxldCBoeWRyYXRlTm9kZTtcclxuICAgIGlmIChjcmVhdGVIeWRyYXRpb25GbnMpIHtcclxuICAgICAgICBbaHlkcmF0ZSwgaHlkcmF0ZU5vZGVdID0gY3JlYXRlSHlkcmF0aW9uRm5zKGludGVybmFscyk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIHJlbmRlcixcclxuICAgICAgICBoeWRyYXRlLFxyXG4gICAgICAgIGNyZWF0ZUFwcDogY3JlYXRlQXBwQVBJKHJlbmRlciwgaHlkcmF0ZSlcclxuICAgIH07XHJcbn1cclxuZnVuY3Rpb24gdG9nZ2xlUmVjdXJzZSh7IGVmZmVjdCwgdXBkYXRlIH0sIGFsbG93ZWQpIHtcclxuICAgIGVmZmVjdC5hbGxvd1JlY3Vyc2UgPSB1cGRhdGUuYWxsb3dSZWN1cnNlID0gYWxsb3dlZDtcclxufVxyXG4vKipcclxuICogIzExNTZcclxuICogV2hlbiBhIGNvbXBvbmVudCBpcyBITVItZW5hYmxlZCwgd2UgbmVlZCB0byBtYWtlIHN1cmUgdGhhdCBhbGwgc3RhdGljIG5vZGVzXHJcbiAqIGluc2lkZSBhIGJsb2NrIGFsc28gaW5oZXJpdCB0aGUgRE9NIGVsZW1lbnQgZnJvbSB0aGUgcHJldmlvdXMgdHJlZSBzbyB0aGF0XHJcbiAqIEhNUiB1cGRhdGVzICh3aGljaCBhcmUgZnVsbCB1cGRhdGVzKSBjYW4gcmV0cmlldmUgdGhlIGVsZW1lbnQgZm9yIHBhdGNoaW5nLlxyXG4gKlxyXG4gKiAjMjA4MFxyXG4gKiBJbnNpZGUga2V5ZWQgYHRlbXBsYXRlYCBmcmFnbWVudCBzdGF0aWMgY2hpbGRyZW4sIGlmIGEgZnJhZ21lbnQgaXMgbW92ZWQsXHJcbiAqIHRoZSBjaGlsZHJlbiB3aWxsIGFsd2F5cyBiZSBtb3ZlZC4gVGhlcmVmb3JlLCBpbiBvcmRlciB0byBlbnN1cmUgY29ycmVjdCBtb3ZlXHJcbiAqIHBvc2l0aW9uLCBlbCBzaG91bGQgYmUgaW5oZXJpdGVkIGZyb20gcHJldmlvdXMgbm9kZXMuXHJcbiAqL1xyXG5mdW5jdGlvbiB0cmF2ZXJzZVN0YXRpY0NoaWxkcmVuKG4xLCBuMiwgc2hhbGxvdyA9IGZhbHNlKSB7XHJcbiAgICBjb25zdCBjaDEgPSBuMS5jaGlsZHJlbjtcclxuICAgIGNvbnN0IGNoMiA9IG4yLmNoaWxkcmVuO1xyXG4gICAgaWYgKGlzQXJyYXkoY2gxKSAmJiBpc0FycmF5KGNoMikpIHtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNoMS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAvLyB0aGlzIGlzIG9ubHkgY2FsbGVkIGluIHRoZSBvcHRpbWl6ZWQgcGF0aCBzbyBhcnJheSBjaGlsZHJlbiBhcmVcclxuICAgICAgICAgICAgLy8gZ3VhcmFudGVlZCB0byBiZSB2bm9kZXNcclxuICAgICAgICAgICAgY29uc3QgYzEgPSBjaDFbaV07XHJcbiAgICAgICAgICAgIGxldCBjMiA9IGNoMltpXTtcclxuICAgICAgICAgICAgaWYgKGMyLnNoYXBlRmxhZyAmIDEgLyogRUxFTUVOVCAqLyAmJiAhYzIuZHluYW1pY0NoaWxkcmVuKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoYzIucGF0Y2hGbGFnIDw9IDAgfHwgYzIucGF0Y2hGbGFnID09PSAzMiAvKiBIWURSQVRFX0VWRU5UUyAqLykge1xyXG4gICAgICAgICAgICAgICAgICAgIGMyID0gY2gyW2ldID0gY2xvbmVJZk1vdW50ZWQoY2gyW2ldKTtcclxuICAgICAgICAgICAgICAgICAgICBjMi5lbCA9IGMxLmVsO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKCFzaGFsbG93KVxyXG4gICAgICAgICAgICAgICAgICAgIHRyYXZlcnNlU3RhdGljQ2hpbGRyZW4oYzEsIGMyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBhbHNvIGluaGVyaXQgZm9yIGNvbW1lbnQgbm9kZXMsIGJ1dCBub3QgcGxhY2Vob2xkZXJzIChlLmcuIHYtaWYgd2hpY2hcclxuICAgICAgICAgICAgLy8gd291bGQgaGF2ZSByZWNlaXZlZCAuZWwgZHVyaW5nIGJsb2NrIHBhdGNoKVxyXG4gICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmIGMyLnR5cGUgPT09IENvbW1lbnQgJiYgIWMyLmVsKSB7XHJcbiAgICAgICAgICAgICAgICBjMi5lbCA9IGMxLmVsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbi8vIGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0xvbmdlc3RfaW5jcmVhc2luZ19zdWJzZXF1ZW5jZVxyXG5mdW5jdGlvbiBnZXRTZXF1ZW5jZShhcnIpIHtcclxuICAgIGNvbnN0IHAgPSBhcnIuc2xpY2UoKTtcclxuICAgIGNvbnN0IHJlc3VsdCA9IFswXTtcclxuICAgIGxldCBpLCBqLCB1LCB2LCBjO1xyXG4gICAgY29uc3QgbGVuID0gYXJyLmxlbmd0aDtcclxuICAgIGZvciAoaSA9IDA7IGkgPCBsZW47IGkrKykge1xyXG4gICAgICAgIGNvbnN0IGFyckkgPSBhcnJbaV07XHJcbiAgICAgICAgaWYgKGFyckkgIT09IDApIHtcclxuICAgICAgICAgICAgaiA9IHJlc3VsdFtyZXN1bHQubGVuZ3RoIC0gMV07XHJcbiAgICAgICAgICAgIGlmIChhcnJbal0gPCBhcnJJKSB7XHJcbiAgICAgICAgICAgICAgICBwW2ldID0gajtcclxuICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKGkpO1xyXG4gICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdSA9IDA7XHJcbiAgICAgICAgICAgIHYgPSByZXN1bHQubGVuZ3RoIC0gMTtcclxuICAgICAgICAgICAgd2hpbGUgKHUgPCB2KSB7XHJcbiAgICAgICAgICAgICAgICBjID0gKHUgKyB2KSA+PiAxO1xyXG4gICAgICAgICAgICAgICAgaWYgKGFycltyZXN1bHRbY11dIDwgYXJySSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHUgPSBjICsgMTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHYgPSBjO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChhcnJJIDwgYXJyW3Jlc3VsdFt1XV0pIHtcclxuICAgICAgICAgICAgICAgIGlmICh1ID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHBbaV0gPSByZXN1bHRbdSAtIDFdO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmVzdWx0W3VdID0gaTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHUgPSByZXN1bHQubGVuZ3RoO1xyXG4gICAgdiA9IHJlc3VsdFt1IC0gMV07XHJcbiAgICB3aGlsZSAodS0tID4gMCkge1xyXG4gICAgICAgIHJlc3VsdFt1XSA9IHY7XHJcbiAgICAgICAgdiA9IHBbdl07XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG59XG5cbmNvbnN0IGlzVGVsZXBvcnQgPSAodHlwZSkgPT4gdHlwZS5fX2lzVGVsZXBvcnQ7XHJcbmNvbnN0IGlzVGVsZXBvcnREaXNhYmxlZCA9IChwcm9wcykgPT4gcHJvcHMgJiYgKHByb3BzLmRpc2FibGVkIHx8IHByb3BzLmRpc2FibGVkID09PSAnJyk7XHJcbmNvbnN0IGlzVGFyZ2V0U1ZHID0gKHRhcmdldCkgPT4gdHlwZW9mIFNWR0VsZW1lbnQgIT09ICd1bmRlZmluZWQnICYmIHRhcmdldCBpbnN0YW5jZW9mIFNWR0VsZW1lbnQ7XHJcbmNvbnN0IHJlc29sdmVUYXJnZXQgPSAocHJvcHMsIHNlbGVjdCkgPT4ge1xyXG4gICAgY29uc3QgdGFyZ2V0U2VsZWN0b3IgPSBwcm9wcyAmJiBwcm9wcy50bztcclxuICAgIGlmIChpc1N0cmluZyh0YXJnZXRTZWxlY3RvcikpIHtcclxuICAgICAgICBpZiAoIXNlbGVjdCkge1xyXG4gICAgICAgICAgICAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiZcclxuICAgICAgICAgICAgICAgIHdhcm4oYEN1cnJlbnQgcmVuZGVyZXIgZG9lcyBub3Qgc3VwcG9ydCBzdHJpbmcgdGFyZ2V0IGZvciBUZWxlcG9ydHMuIGAgK1xyXG4gICAgICAgICAgICAgICAgICAgIGAobWlzc2luZyBxdWVyeVNlbGVjdG9yIHJlbmRlcmVyIG9wdGlvbilgKTtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zdCB0YXJnZXQgPSBzZWxlY3QodGFyZ2V0U2VsZWN0b3IpO1xyXG4gICAgICAgICAgICBpZiAoIXRhcmdldCkge1xyXG4gICAgICAgICAgICAgICAgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmXHJcbiAgICAgICAgICAgICAgICAgICAgd2FybihgRmFpbGVkIHRvIGxvY2F0ZSBUZWxlcG9ydCB0YXJnZXQgd2l0aCBzZWxlY3RvciBcIiR7dGFyZ2V0U2VsZWN0b3J9XCIuIGAgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBgTm90ZSB0aGUgdGFyZ2V0IGVsZW1lbnQgbXVzdCBleGlzdCBiZWZvcmUgdGhlIGNvbXBvbmVudCBpcyBtb3VudGVkIC0gYCArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGBpLmUuIHRoZSB0YXJnZXQgY2Fubm90IGJlIHJlbmRlcmVkIGJ5IHRoZSBjb21wb25lbnQgaXRzZWxmLCBhbmQgYCArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGBpZGVhbGx5IHNob3VsZCBiZSBvdXRzaWRlIG9mIHRoZSBlbnRpcmUgVnVlIGNvbXBvbmVudCB0cmVlLmApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiB0YXJnZXQ7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiAhdGFyZ2V0U2VsZWN0b3IgJiYgIWlzVGVsZXBvcnREaXNhYmxlZChwcm9wcykpIHtcclxuICAgICAgICAgICAgd2FybihgSW52YWxpZCBUZWxlcG9ydCB0YXJnZXQ6ICR7dGFyZ2V0U2VsZWN0b3J9YCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0YXJnZXRTZWxlY3RvcjtcclxuICAgIH1cclxufTtcclxuY29uc3QgVGVsZXBvcnRJbXBsID0ge1xyXG4gICAgX19pc1RlbGVwb3J0OiB0cnVlLFxyXG4gICAgcHJvY2VzcyhuMSwgbjIsIGNvbnRhaW5lciwgYW5jaG9yLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBpc1NWRywgc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQsIGludGVybmFscykge1xyXG4gICAgICAgIGNvbnN0IHsgbWM6IG1vdW50Q2hpbGRyZW4sIHBjOiBwYXRjaENoaWxkcmVuLCBwYmM6IHBhdGNoQmxvY2tDaGlsZHJlbiwgbzogeyBpbnNlcnQsIHF1ZXJ5U2VsZWN0b3IsIGNyZWF0ZVRleHQsIGNyZWF0ZUNvbW1lbnQgfSB9ID0gaW50ZXJuYWxzO1xyXG4gICAgICAgIGNvbnN0IGRpc2FibGVkID0gaXNUZWxlcG9ydERpc2FibGVkKG4yLnByb3BzKTtcclxuICAgICAgICBsZXQgeyBzaGFwZUZsYWcsIGNoaWxkcmVuLCBkeW5hbWljQ2hpbGRyZW4gfSA9IG4yO1xyXG4gICAgICAgIC8vICMzMzAyXHJcbiAgICAgICAgLy8gSE1SIHVwZGF0ZWQsIGZvcmNlIGZ1bGwgZGlmZlxyXG4gICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgaXNIbXJVcGRhdGluZykge1xyXG4gICAgICAgICAgICBvcHRpbWl6ZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgZHluYW1pY0NoaWxkcmVuID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKG4xID09IG51bGwpIHtcclxuICAgICAgICAgICAgLy8gaW5zZXJ0IGFuY2hvcnMgaW4gdGhlIG1haW4gdmlld1xyXG4gICAgICAgICAgICBjb25zdCBwbGFjZWhvbGRlciA9IChuMi5lbCA9IChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKVxyXG4gICAgICAgICAgICAgICAgPyBjcmVhdGVDb21tZW50KCd0ZWxlcG9ydCBzdGFydCcpXHJcbiAgICAgICAgICAgICAgICA6IGNyZWF0ZVRleHQoJycpKTtcclxuICAgICAgICAgICAgY29uc3QgbWFpbkFuY2hvciA9IChuMi5hbmNob3IgPSAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJylcclxuICAgICAgICAgICAgICAgID8gY3JlYXRlQ29tbWVudCgndGVsZXBvcnQgZW5kJylcclxuICAgICAgICAgICAgICAgIDogY3JlYXRlVGV4dCgnJykpO1xyXG4gICAgICAgICAgICBpbnNlcnQocGxhY2Vob2xkZXIsIGNvbnRhaW5lciwgYW5jaG9yKTtcclxuICAgICAgICAgICAgaW5zZXJ0KG1haW5BbmNob3IsIGNvbnRhaW5lciwgYW5jaG9yKTtcclxuICAgICAgICAgICAgY29uc3QgdGFyZ2V0ID0gKG4yLnRhcmdldCA9IHJlc29sdmVUYXJnZXQobjIucHJvcHMsIHF1ZXJ5U2VsZWN0b3IpKTtcclxuICAgICAgICAgICAgY29uc3QgdGFyZ2V0QW5jaG9yID0gKG4yLnRhcmdldEFuY2hvciA9IGNyZWF0ZVRleHQoJycpKTtcclxuICAgICAgICAgICAgaWYgKHRhcmdldCkge1xyXG4gICAgICAgICAgICAgICAgaW5zZXJ0KHRhcmdldEFuY2hvciwgdGFyZ2V0KTtcclxuICAgICAgICAgICAgICAgIC8vICMyNjUyIHdlIGNvdWxkIGJlIHRlbGVwb3J0aW5nIGZyb20gYSBub24tU1ZHIHRyZWUgaW50byBhbiBTVkcgdHJlZVxyXG4gICAgICAgICAgICAgICAgaXNTVkcgPSBpc1NWRyB8fCBpc1RhcmdldFNWRyh0YXJnZXQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiAhZGlzYWJsZWQpIHtcclxuICAgICAgICAgICAgICAgIHdhcm4oJ0ludmFsaWQgVGVsZXBvcnQgdGFyZ2V0IG9uIG1vdW50OicsIHRhcmdldCwgYCgke3R5cGVvZiB0YXJnZXR9KWApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbnN0IG1vdW50ID0gKGNvbnRhaW5lciwgYW5jaG9yKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAvLyBUZWxlcG9ydCAqYWx3YXlzKiBoYXMgQXJyYXkgY2hpbGRyZW4uIFRoaXMgaXMgZW5mb3JjZWQgaW4gYm90aCB0aGVcclxuICAgICAgICAgICAgICAgIC8vIGNvbXBpbGVyIGFuZCB2bm9kZSBjaGlsZHJlbiBub3JtYWxpemF0aW9uLlxyXG4gICAgICAgICAgICAgICAgaWYgKHNoYXBlRmxhZyAmIDE2IC8qIEFSUkFZX0NISUxEUkVOICovKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbW91bnRDaGlsZHJlbihjaGlsZHJlbiwgY29udGFpbmVyLCBhbmNob3IsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIGlzU1ZHLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIGlmIChkaXNhYmxlZCkge1xyXG4gICAgICAgICAgICAgICAgbW91bnQoY29udGFpbmVyLCBtYWluQW5jaG9yKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmICh0YXJnZXQpIHtcclxuICAgICAgICAgICAgICAgIG1vdW50KHRhcmdldCwgdGFyZ2V0QW5jaG9yKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgLy8gdXBkYXRlIGNvbnRlbnRcclxuICAgICAgICAgICAgbjIuZWwgPSBuMS5lbDtcclxuICAgICAgICAgICAgY29uc3QgbWFpbkFuY2hvciA9IChuMi5hbmNob3IgPSBuMS5hbmNob3IpO1xyXG4gICAgICAgICAgICBjb25zdCB0YXJnZXQgPSAobjIudGFyZ2V0ID0gbjEudGFyZ2V0KTtcclxuICAgICAgICAgICAgY29uc3QgdGFyZ2V0QW5jaG9yID0gKG4yLnRhcmdldEFuY2hvciA9IG4xLnRhcmdldEFuY2hvcik7XHJcbiAgICAgICAgICAgIGNvbnN0IHdhc0Rpc2FibGVkID0gaXNUZWxlcG9ydERpc2FibGVkKG4xLnByb3BzKTtcclxuICAgICAgICAgICAgY29uc3QgY3VycmVudENvbnRhaW5lciA9IHdhc0Rpc2FibGVkID8gY29udGFpbmVyIDogdGFyZ2V0O1xyXG4gICAgICAgICAgICBjb25zdCBjdXJyZW50QW5jaG9yID0gd2FzRGlzYWJsZWQgPyBtYWluQW5jaG9yIDogdGFyZ2V0QW5jaG9yO1xyXG4gICAgICAgICAgICBpc1NWRyA9IGlzU1ZHIHx8IGlzVGFyZ2V0U1ZHKHRhcmdldCk7XHJcbiAgICAgICAgICAgIGlmIChkeW5hbWljQ2hpbGRyZW4pIHtcclxuICAgICAgICAgICAgICAgIC8vIGZhc3QgcGF0aCB3aGVuIHRoZSB0ZWxlcG9ydCBoYXBwZW5zIHRvIGJlIGEgYmxvY2sgcm9vdFxyXG4gICAgICAgICAgICAgICAgcGF0Y2hCbG9ja0NoaWxkcmVuKG4xLmR5bmFtaWNDaGlsZHJlbiwgZHluYW1pY0NoaWxkcmVuLCBjdXJyZW50Q29udGFpbmVyLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBpc1NWRywgc2xvdFNjb3BlSWRzKTtcclxuICAgICAgICAgICAgICAgIC8vIGV2ZW4gaW4gYmxvY2sgdHJlZSBtb2RlIHdlIG5lZWQgdG8gbWFrZSBzdXJlIGFsbCByb290LWxldmVsIG5vZGVzXHJcbiAgICAgICAgICAgICAgICAvLyBpbiB0aGUgdGVsZXBvcnQgaW5oZXJpdCBwcmV2aW91cyBET00gcmVmZXJlbmNlcyBzbyB0aGF0IHRoZXkgY2FuXHJcbiAgICAgICAgICAgICAgICAvLyBiZSBtb3ZlZCBpbiBmdXR1cmUgcGF0Y2hlcy5cclxuICAgICAgICAgICAgICAgIHRyYXZlcnNlU3RhdGljQ2hpbGRyZW4objEsIG4yLCB0cnVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmICghb3B0aW1pemVkKSB7XHJcbiAgICAgICAgICAgICAgICBwYXRjaENoaWxkcmVuKG4xLCBuMiwgY3VycmVudENvbnRhaW5lciwgY3VycmVudEFuY2hvciwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgaXNTVkcsIHNsb3RTY29wZUlkcywgZmFsc2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChkaXNhYmxlZCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCF3YXNEaXNhYmxlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGVuYWJsZWQgLT4gZGlzYWJsZWRcclxuICAgICAgICAgICAgICAgICAgICAvLyBtb3ZlIGludG8gbWFpbiBjb250YWluZXJcclxuICAgICAgICAgICAgICAgICAgICBtb3ZlVGVsZXBvcnQobjIsIGNvbnRhaW5lciwgbWFpbkFuY2hvciwgaW50ZXJuYWxzLCAxIC8qIFRPR0dMRSAqLyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyB0YXJnZXQgY2hhbmdlZFxyXG4gICAgICAgICAgICAgICAgaWYgKChuMi5wcm9wcyAmJiBuMi5wcm9wcy50bykgIT09IChuMS5wcm9wcyAmJiBuMS5wcm9wcy50bykpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXh0VGFyZ2V0ID0gKG4yLnRhcmdldCA9IHJlc29sdmVUYXJnZXQobjIucHJvcHMsIHF1ZXJ5U2VsZWN0b3IpKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAobmV4dFRhcmdldCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtb3ZlVGVsZXBvcnQobjIsIG5leHRUYXJnZXQsIG51bGwsIGludGVybmFscywgMCAvKiBUQVJHRVRfQ0hBTkdFICovKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdhcm4oJ0ludmFsaWQgVGVsZXBvcnQgdGFyZ2V0IG9uIHVwZGF0ZTonLCB0YXJnZXQsIGAoJHt0eXBlb2YgdGFyZ2V0fSlgKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmICh3YXNEaXNhYmxlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGRpc2FibGVkIC0+IGVuYWJsZWRcclxuICAgICAgICAgICAgICAgICAgICAvLyBtb3ZlIGludG8gdGVsZXBvcnQgdGFyZ2V0XHJcbiAgICAgICAgICAgICAgICAgICAgbW92ZVRlbGVwb3J0KG4yLCB0YXJnZXQsIHRhcmdldEFuY2hvciwgaW50ZXJuYWxzLCAxIC8qIFRPR0dMRSAqLyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgcmVtb3ZlKHZub2RlLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBvcHRpbWl6ZWQsIHsgdW06IHVubW91bnQsIG86IHsgcmVtb3ZlOiBob3N0UmVtb3ZlIH0gfSwgZG9SZW1vdmUpIHtcclxuICAgICAgICBjb25zdCB7IHNoYXBlRmxhZywgY2hpbGRyZW4sIGFuY2hvciwgdGFyZ2V0QW5jaG9yLCB0YXJnZXQsIHByb3BzIH0gPSB2bm9kZTtcclxuICAgICAgICBpZiAodGFyZ2V0KSB7XHJcbiAgICAgICAgICAgIGhvc3RSZW1vdmUodGFyZ2V0QW5jaG9yKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gYW4gdW5tb3VudGVkIHRlbGVwb3J0IHNob3VsZCBhbHdheXMgcmVtb3ZlIGl0cyBjaGlsZHJlbiBpZiBub3QgZGlzYWJsZWRcclxuICAgICAgICBpZiAoZG9SZW1vdmUgfHwgIWlzVGVsZXBvcnREaXNhYmxlZChwcm9wcykpIHtcclxuICAgICAgICAgICAgaG9zdFJlbW92ZShhbmNob3IpO1xyXG4gICAgICAgICAgICBpZiAoc2hhcGVGbGFnICYgMTYgLyogQVJSQVlfQ0hJTERSRU4gKi8pIHtcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBjaGlsZCA9IGNoaWxkcmVuW2ldO1xyXG4gICAgICAgICAgICAgICAgICAgIHVubW91bnQoY2hpbGQsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIHRydWUsICEhY2hpbGQuZHluYW1pY0NoaWxkcmVuKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICBtb3ZlOiBtb3ZlVGVsZXBvcnQsXHJcbiAgICBoeWRyYXRlOiBoeWRyYXRlVGVsZXBvcnRcclxufTtcclxuZnVuY3Rpb24gbW92ZVRlbGVwb3J0KHZub2RlLCBjb250YWluZXIsIHBhcmVudEFuY2hvciwgeyBvOiB7IGluc2VydCB9LCBtOiBtb3ZlIH0sIG1vdmVUeXBlID0gMiAvKiBSRU9SREVSICovKSB7XHJcbiAgICAvLyBtb3ZlIHRhcmdldCBhbmNob3IgaWYgdGhpcyBpcyBhIHRhcmdldCBjaGFuZ2UuXHJcbiAgICBpZiAobW92ZVR5cGUgPT09IDAgLyogVEFSR0VUX0NIQU5HRSAqLykge1xyXG4gICAgICAgIGluc2VydCh2bm9kZS50YXJnZXRBbmNob3IsIGNvbnRhaW5lciwgcGFyZW50QW5jaG9yKTtcclxuICAgIH1cclxuICAgIGNvbnN0IHsgZWwsIGFuY2hvciwgc2hhcGVGbGFnLCBjaGlsZHJlbiwgcHJvcHMgfSA9IHZub2RlO1xyXG4gICAgY29uc3QgaXNSZW9yZGVyID0gbW92ZVR5cGUgPT09IDIgLyogUkVPUkRFUiAqLztcclxuICAgIC8vIG1vdmUgbWFpbiB2aWV3IGFuY2hvciBpZiB0aGlzIGlzIGEgcmUtb3JkZXIuXHJcbiAgICBpZiAoaXNSZW9yZGVyKSB7XHJcbiAgICAgICAgaW5zZXJ0KGVsLCBjb250YWluZXIsIHBhcmVudEFuY2hvcik7XHJcbiAgICB9XHJcbiAgICAvLyBpZiB0aGlzIGlzIGEgcmUtb3JkZXIgYW5kIHRlbGVwb3J0IGlzIGVuYWJsZWQgKGNvbnRlbnQgaXMgaW4gdGFyZ2V0KVxyXG4gICAgLy8gZG8gbm90IG1vdmUgY2hpbGRyZW4uIFNvIHRoZSBvcHBvc2l0ZSBpczogb25seSBtb3ZlIGNoaWxkcmVuIGlmIHRoaXNcclxuICAgIC8vIGlzIG5vdCBhIHJlb3JkZXIsIG9yIHRoZSB0ZWxlcG9ydCBpcyBkaXNhYmxlZFxyXG4gICAgaWYgKCFpc1Jlb3JkZXIgfHwgaXNUZWxlcG9ydERpc2FibGVkKHByb3BzKSkge1xyXG4gICAgICAgIC8vIFRlbGVwb3J0IGhhcyBlaXRoZXIgQXJyYXkgY2hpbGRyZW4gb3Igbm8gY2hpbGRyZW4uXHJcbiAgICAgICAgaWYgKHNoYXBlRmxhZyAmIDE2IC8qIEFSUkFZX0NISUxEUkVOICovKSB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIG1vdmUoY2hpbGRyZW5baV0sIGNvbnRhaW5lciwgcGFyZW50QW5jaG9yLCAyIC8qIFJFT1JERVIgKi8pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy8gbW92ZSBtYWluIHZpZXcgYW5jaG9yIGlmIHRoaXMgaXMgYSByZS1vcmRlci5cclxuICAgIGlmIChpc1Jlb3JkZXIpIHtcclxuICAgICAgICBpbnNlcnQoYW5jaG9yLCBjb250YWluZXIsIHBhcmVudEFuY2hvcik7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gaHlkcmF0ZVRlbGVwb3J0KG5vZGUsIHZub2RlLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlLCBzbG90U2NvcGVJZHMsIG9wdGltaXplZCwgeyBvOiB7IG5leHRTaWJsaW5nLCBwYXJlbnROb2RlLCBxdWVyeVNlbGVjdG9yIH0gfSwgaHlkcmF0ZUNoaWxkcmVuKSB7XHJcbiAgICBjb25zdCB0YXJnZXQgPSAodm5vZGUudGFyZ2V0ID0gcmVzb2x2ZVRhcmdldCh2bm9kZS5wcm9wcywgcXVlcnlTZWxlY3RvcikpO1xyXG4gICAgaWYgKHRhcmdldCkge1xyXG4gICAgICAgIC8vIGlmIG11bHRpcGxlIHRlbGVwb3J0cyByZW5kZXJlZCB0byB0aGUgc2FtZSB0YXJnZXQgZWxlbWVudCwgd2UgbmVlZCB0b1xyXG4gICAgICAgIC8vIHBpY2sgdXAgZnJvbSB3aGVyZSB0aGUgbGFzdCB0ZWxlcG9ydCBmaW5pc2hlZCBpbnN0ZWFkIG9mIHRoZSBmaXJzdCBub2RlXHJcbiAgICAgICAgY29uc3QgdGFyZ2V0Tm9kZSA9IHRhcmdldC5fbHBhIHx8IHRhcmdldC5maXJzdENoaWxkO1xyXG4gICAgICAgIGlmICh2bm9kZS5zaGFwZUZsYWcgJiAxNiAvKiBBUlJBWV9DSElMRFJFTiAqLykge1xyXG4gICAgICAgICAgICBpZiAoaXNUZWxlcG9ydERpc2FibGVkKHZub2RlLnByb3BzKSkge1xyXG4gICAgICAgICAgICAgICAgdm5vZGUuYW5jaG9yID0gaHlkcmF0ZUNoaWxkcmVuKG5leHRTaWJsaW5nKG5vZGUpLCB2bm9kZSwgcGFyZW50Tm9kZShub2RlKSwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgc2xvdFNjb3BlSWRzLCBvcHRpbWl6ZWQpO1xyXG4gICAgICAgICAgICAgICAgdm5vZGUudGFyZ2V0QW5jaG9yID0gdGFyZ2V0Tm9kZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHZub2RlLmFuY2hvciA9IG5leHRTaWJsaW5nKG5vZGUpO1xyXG4gICAgICAgICAgICAgICAgdm5vZGUudGFyZ2V0QW5jaG9yID0gaHlkcmF0ZUNoaWxkcmVuKHRhcmdldE5vZGUsIHZub2RlLCB0YXJnZXQsIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIHNsb3RTY29wZUlkcywgb3B0aW1pemVkKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0YXJnZXQuX2xwYSA9XHJcbiAgICAgICAgICAgICAgICB2bm9kZS50YXJnZXRBbmNob3IgJiYgbmV4dFNpYmxpbmcodm5vZGUudGFyZ2V0QW5jaG9yKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdm5vZGUuYW5jaG9yICYmIG5leHRTaWJsaW5nKHZub2RlLmFuY2hvcik7XHJcbn1cclxuLy8gRm9yY2UtY2FzdGVkIHB1YmxpYyB0eXBpbmcgZm9yIGggYW5kIFRTWCBwcm9wcyBpbmZlcmVuY2VcclxuY29uc3QgVGVsZXBvcnQgPSBUZWxlcG9ydEltcGw7XG5cbmNvbnN0IENPTVBPTkVOVFMgPSAnY29tcG9uZW50cyc7XHJcbmNvbnN0IERJUkVDVElWRVMgPSAnZGlyZWN0aXZlcyc7XHJcbi8qKlxyXG4gKiBAcHJpdmF0ZVxyXG4gKi9cclxuZnVuY3Rpb24gcmVzb2x2ZUNvbXBvbmVudChuYW1lLCBtYXliZVNlbGZSZWZlcmVuY2UpIHtcclxuICAgIHJldHVybiByZXNvbHZlQXNzZXQoQ09NUE9ORU5UUywgbmFtZSwgdHJ1ZSwgbWF5YmVTZWxmUmVmZXJlbmNlKSB8fCBuYW1lO1xyXG59XHJcbmNvbnN0IE5VTExfRFlOQU1JQ19DT01QT05FTlQgPSBTeW1ib2woKTtcclxuLyoqXHJcbiAqIEBwcml2YXRlXHJcbiAqL1xyXG5mdW5jdGlvbiByZXNvbHZlRHluYW1pY0NvbXBvbmVudChjb21wb25lbnQpIHtcclxuICAgIGlmIChpc1N0cmluZyhjb21wb25lbnQpKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlc29sdmVBc3NldChDT01QT05FTlRTLCBjb21wb25lbnQsIGZhbHNlKSB8fCBjb21wb25lbnQ7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICAvLyBpbnZhbGlkIHR5cGVzIHdpbGwgZmFsbHRocm91Z2ggdG8gY3JlYXRlVk5vZGUgYW5kIHJhaXNlIHdhcm5pbmdcclxuICAgICAgICByZXR1cm4gKGNvbXBvbmVudCB8fCBOVUxMX0RZTkFNSUNfQ09NUE9ORU5UKTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogQHByaXZhdGVcclxuICovXHJcbmZ1bmN0aW9uIHJlc29sdmVEaXJlY3RpdmUobmFtZSkge1xyXG4gICAgcmV0dXJuIHJlc29sdmVBc3NldChESVJFQ1RJVkVTLCBuYW1lKTtcclxufVxyXG4vLyBpbXBsZW1lbnRhdGlvblxyXG5mdW5jdGlvbiByZXNvbHZlQXNzZXQodHlwZSwgbmFtZSwgd2Fybk1pc3NpbmcgPSB0cnVlLCBtYXliZVNlbGZSZWZlcmVuY2UgPSBmYWxzZSkge1xyXG4gICAgY29uc3QgaW5zdGFuY2UgPSBjdXJyZW50UmVuZGVyaW5nSW5zdGFuY2UgfHwgY3VycmVudEluc3RhbmNlO1xyXG4gICAgaWYgKGluc3RhbmNlKSB7XHJcbiAgICAgICAgY29uc3QgQ29tcG9uZW50ID0gaW5zdGFuY2UudHlwZTtcclxuICAgICAgICAvLyBleHBsaWNpdCBzZWxmIG5hbWUgaGFzIGhpZ2hlc3QgcHJpb3JpdHlcclxuICAgICAgICBpZiAodHlwZSA9PT0gQ09NUE9ORU5UUykge1xyXG4gICAgICAgICAgICBjb25zdCBzZWxmTmFtZSA9IGdldENvbXBvbmVudE5hbWUoQ29tcG9uZW50KTtcclxuICAgICAgICAgICAgaWYgKHNlbGZOYW1lICYmXHJcbiAgICAgICAgICAgICAgICAoc2VsZk5hbWUgPT09IG5hbWUgfHxcclxuICAgICAgICAgICAgICAgICAgICBzZWxmTmFtZSA9PT0gY2FtZWxpemUobmFtZSkgfHxcclxuICAgICAgICAgICAgICAgICAgICBzZWxmTmFtZSA9PT0gY2FwaXRhbGl6ZShjYW1lbGl6ZShuYW1lKSkpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gQ29tcG9uZW50O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHJlcyA9IFxyXG4gICAgICAgIC8vIGxvY2FsIHJlZ2lzdHJhdGlvblxyXG4gICAgICAgIC8vIGNoZWNrIGluc3RhbmNlW3R5cGVdIGZpcnN0IHdoaWNoIGlzIHJlc29sdmVkIGZvciBvcHRpb25zIEFQSVxyXG4gICAgICAgIHJlc29sdmUoaW5zdGFuY2VbdHlwZV0gfHwgQ29tcG9uZW50W3R5cGVdLCBuYW1lKSB8fFxyXG4gICAgICAgICAgICAvLyBnbG9iYWwgcmVnaXN0cmF0aW9uXHJcbiAgICAgICAgICAgIHJlc29sdmUoaW5zdGFuY2UuYXBwQ29udGV4dFt0eXBlXSwgbmFtZSk7XHJcbiAgICAgICAgaWYgKCFyZXMgJiYgbWF5YmVTZWxmUmVmZXJlbmNlKSB7XHJcbiAgICAgICAgICAgIC8vIGZhbGxiYWNrIHRvIGltcGxpY2l0IHNlbGYtcmVmZXJlbmNlXHJcbiAgICAgICAgICAgIHJldHVybiBDb21wb25lbnQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgd2Fybk1pc3NpbmcgJiYgIXJlcykge1xyXG4gICAgICAgICAgICBjb25zdCBleHRyYSA9IHR5cGUgPT09IENPTVBPTkVOVFNcclxuICAgICAgICAgICAgICAgID8gYFxcbklmIHRoaXMgaXMgYSBuYXRpdmUgY3VzdG9tIGVsZW1lbnQsIG1ha2Ugc3VyZSB0byBleGNsdWRlIGl0IGZyb20gYCArXHJcbiAgICAgICAgICAgICAgICAgICAgYGNvbXBvbmVudCByZXNvbHV0aW9uIHZpYSBjb21waWxlck9wdGlvbnMuaXNDdXN0b21FbGVtZW50LmBcclxuICAgICAgICAgICAgICAgIDogYGA7XHJcbiAgICAgICAgICAgIHdhcm4oYEZhaWxlZCB0byByZXNvbHZlICR7dHlwZS5zbGljZSgwLCAtMSl9OiAke25hbWV9JHtleHRyYX1gKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJlcztcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xyXG4gICAgICAgIHdhcm4oYHJlc29sdmUke2NhcGl0YWxpemUodHlwZS5zbGljZSgwLCAtMSkpfSBgICtcclxuICAgICAgICAgICAgYGNhbiBvbmx5IGJlIHVzZWQgaW4gcmVuZGVyKCkgb3Igc2V0dXAoKS5gKTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiByZXNvbHZlKHJlZ2lzdHJ5LCBuYW1lKSB7XHJcbiAgICByZXR1cm4gKHJlZ2lzdHJ5ICYmXHJcbiAgICAgICAgKHJlZ2lzdHJ5W25hbWVdIHx8XHJcbiAgICAgICAgICAgIHJlZ2lzdHJ5W2NhbWVsaXplKG5hbWUpXSB8fFxyXG4gICAgICAgICAgICByZWdpc3RyeVtjYXBpdGFsaXplKGNhbWVsaXplKG5hbWUpKV0pKTtcclxufVxuXG5jb25zdCBGcmFnbWVudCA9IFN5bWJvbCgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgPyAnRnJhZ21lbnQnIDogdW5kZWZpbmVkKTtcclxuY29uc3QgVGV4dCA9IFN5bWJvbCgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgPyAnVGV4dCcgOiB1bmRlZmluZWQpO1xyXG5jb25zdCBDb21tZW50ID0gU3ltYm9sKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSA/ICdDb21tZW50JyA6IHVuZGVmaW5lZCk7XHJcbmNvbnN0IFN0YXRpYyA9IFN5bWJvbCgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgPyAnU3RhdGljJyA6IHVuZGVmaW5lZCk7XHJcbi8vIFNpbmNlIHYtaWYgYW5kIHYtZm9yIGFyZSB0aGUgdHdvIHBvc3NpYmxlIHdheXMgbm9kZSBzdHJ1Y3R1cmUgY2FuIGR5bmFtaWNhbGx5XHJcbi8vIGNoYW5nZSwgb25jZSB3ZSBjb25zaWRlciB2LWlmIGJyYW5jaGVzIGFuZCBlYWNoIHYtZm9yIGZyYWdtZW50IGEgYmxvY2ssIHdlXHJcbi8vIGNhbiBkaXZpZGUgYSB0ZW1wbGF0ZSBpbnRvIG5lc3RlZCBibG9ja3MsIGFuZCB3aXRoaW4gZWFjaCBibG9jayB0aGUgbm9kZVxyXG4vLyBzdHJ1Y3R1cmUgd291bGQgYmUgc3RhYmxlLiBUaGlzIGFsbG93cyB1cyB0byBza2lwIG1vc3QgY2hpbGRyZW4gZGlmZmluZ1xyXG4vLyBhbmQgb25seSB3b3JyeSBhYm91dCB0aGUgZHluYW1pYyBub2RlcyAoaW5kaWNhdGVkIGJ5IHBhdGNoIGZsYWdzKS5cclxuY29uc3QgYmxvY2tTdGFjayA9IFtdO1xyXG5sZXQgY3VycmVudEJsb2NrID0gbnVsbDtcclxuLyoqXHJcbiAqIE9wZW4gYSBibG9jay5cclxuICogVGhpcyBtdXN0IGJlIGNhbGxlZCBiZWZvcmUgYGNyZWF0ZUJsb2NrYC4gSXQgY2Fubm90IGJlIHBhcnQgb2YgYGNyZWF0ZUJsb2NrYFxyXG4gKiBiZWNhdXNlIHRoZSBjaGlsZHJlbiBvZiB0aGUgYmxvY2sgYXJlIGV2YWx1YXRlZCBiZWZvcmUgYGNyZWF0ZUJsb2NrYCBpdHNlbGZcclxuICogaXMgY2FsbGVkLiBUaGUgZ2VuZXJhdGVkIGNvZGUgdHlwaWNhbGx5IGxvb2tzIGxpa2UgdGhpczpcclxuICpcclxuICogYGBganNcclxuICogZnVuY3Rpb24gcmVuZGVyKCkge1xyXG4gKiAgIHJldHVybiAob3BlbkJsb2NrKCksY3JlYXRlQmxvY2soJ2RpdicsIG51bGwsIFsuLi5dKSlcclxuICogfVxyXG4gKiBgYGBcclxuICogZGlzYWJsZVRyYWNraW5nIGlzIHRydWUgd2hlbiBjcmVhdGluZyBhIHYtZm9yIGZyYWdtZW50IGJsb2NrLCBzaW5jZSBhIHYtZm9yXHJcbiAqIGZyYWdtZW50IGFsd2F5cyBkaWZmcyBpdHMgY2hpbGRyZW4uXHJcbiAqXHJcbiAqIEBwcml2YXRlXHJcbiAqL1xyXG5mdW5jdGlvbiBvcGVuQmxvY2soZGlzYWJsZVRyYWNraW5nID0gZmFsc2UpIHtcclxuICAgIGJsb2NrU3RhY2sucHVzaCgoY3VycmVudEJsb2NrID0gZGlzYWJsZVRyYWNraW5nID8gbnVsbCA6IFtdKSk7XHJcbn1cclxuZnVuY3Rpb24gY2xvc2VCbG9jaygpIHtcclxuICAgIGJsb2NrU3RhY2sucG9wKCk7XHJcbiAgICBjdXJyZW50QmxvY2sgPSBibG9ja1N0YWNrW2Jsb2NrU3RhY2subGVuZ3RoIC0gMV0gfHwgbnVsbDtcclxufVxyXG4vLyBXaGV0aGVyIHdlIHNob3VsZCBiZSB0cmFja2luZyBkeW5hbWljIGNoaWxkIG5vZGVzIGluc2lkZSBhIGJsb2NrLlxyXG4vLyBPbmx5IHRyYWNrcyB3aGVuIHRoaXMgdmFsdWUgaXMgPiAwXHJcbi8vIFdlIGFyZSBub3QgdXNpbmcgYSBzaW1wbGUgYm9vbGVhbiBiZWNhdXNlIHRoaXMgdmFsdWUgbWF5IG5lZWQgdG8gYmVcclxuLy8gaW5jcmVtZW50ZWQvZGVjcmVtZW50ZWQgYnkgbmVzdGVkIHVzYWdlIG9mIHYtb25jZSAoc2VlIGJlbG93KVxyXG5sZXQgaXNCbG9ja1RyZWVFbmFibGVkID0gMTtcclxuLyoqXHJcbiAqIEJsb2NrIHRyYWNraW5nIHNvbWV0aW1lcyBuZWVkcyB0byBiZSBkaXNhYmxlZCwgZm9yIGV4YW1wbGUgZHVyaW5nIHRoZVxyXG4gKiBjcmVhdGlvbiBvZiBhIHRyZWUgdGhhdCBuZWVkcyB0byBiZSBjYWNoZWQgYnkgdi1vbmNlLiBUaGUgY29tcGlsZXIgZ2VuZXJhdGVzXHJcbiAqIGNvZGUgbGlrZSB0aGlzOlxyXG4gKlxyXG4gKiBgYGAganNcclxuICogX2NhY2hlWzFdIHx8IChcclxuICogICBzZXRCbG9ja1RyYWNraW5nKC0xKSxcclxuICogICBfY2FjaGVbMV0gPSBjcmVhdGVWTm9kZSguLi4pLFxyXG4gKiAgIHNldEJsb2NrVHJhY2tpbmcoMSksXHJcbiAqICAgX2NhY2hlWzFdXHJcbiAqIClcclxuICogYGBgXHJcbiAqXHJcbiAqIEBwcml2YXRlXHJcbiAqL1xyXG5mdW5jdGlvbiBzZXRCbG9ja1RyYWNraW5nKHZhbHVlKSB7XHJcbiAgICBpc0Jsb2NrVHJlZUVuYWJsZWQgKz0gdmFsdWU7XHJcbn1cclxuZnVuY3Rpb24gc2V0dXBCbG9jayh2bm9kZSkge1xyXG4gICAgLy8gc2F2ZSBjdXJyZW50IGJsb2NrIGNoaWxkcmVuIG9uIHRoZSBibG9jayB2bm9kZVxyXG4gICAgdm5vZGUuZHluYW1pY0NoaWxkcmVuID1cclxuICAgICAgICBpc0Jsb2NrVHJlZUVuYWJsZWQgPiAwID8gY3VycmVudEJsb2NrIHx8IEVNUFRZX0FSUiA6IG51bGw7XHJcbiAgICAvLyBjbG9zZSBibG9ja1xyXG4gICAgY2xvc2VCbG9jaygpO1xyXG4gICAgLy8gYSBibG9jayBpcyBhbHdheXMgZ29pbmcgdG8gYmUgcGF0Y2hlZCwgc28gdHJhY2sgaXQgYXMgYSBjaGlsZCBvZiBpdHNcclxuICAgIC8vIHBhcmVudCBibG9ja1xyXG4gICAgaWYgKGlzQmxvY2tUcmVlRW5hYmxlZCA+IDAgJiYgY3VycmVudEJsb2NrKSB7XHJcbiAgICAgICAgY3VycmVudEJsb2NrLnB1c2godm5vZGUpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHZub2RlO1xyXG59XHJcbi8qKlxyXG4gKiBAcHJpdmF0ZVxyXG4gKi9cclxuZnVuY3Rpb24gY3JlYXRlRWxlbWVudEJsb2NrKHR5cGUsIHByb3BzLCBjaGlsZHJlbiwgcGF0Y2hGbGFnLCBkeW5hbWljUHJvcHMsIHNoYXBlRmxhZykge1xyXG4gICAgcmV0dXJuIHNldHVwQmxvY2soY3JlYXRlQmFzZVZOb2RlKHR5cGUsIHByb3BzLCBjaGlsZHJlbiwgcGF0Y2hGbGFnLCBkeW5hbWljUHJvcHMsIHNoYXBlRmxhZywgdHJ1ZSAvKiBpc0Jsb2NrICovKSk7XHJcbn1cclxuLyoqXHJcbiAqIENyZWF0ZSBhIGJsb2NrIHJvb3Qgdm5vZGUuIFRha2VzIHRoZSBzYW1lIGV4YWN0IGFyZ3VtZW50cyBhcyBgY3JlYXRlVk5vZGVgLlxyXG4gKiBBIGJsb2NrIHJvb3Qga2VlcHMgdHJhY2sgb2YgZHluYW1pYyBub2RlcyB3aXRoaW4gdGhlIGJsb2NrIGluIHRoZVxyXG4gKiBgZHluYW1pY0NoaWxkcmVuYCBhcnJheS5cclxuICpcclxuICogQHByaXZhdGVcclxuICovXHJcbmZ1bmN0aW9uIGNyZWF0ZUJsb2NrKHR5cGUsIHByb3BzLCBjaGlsZHJlbiwgcGF0Y2hGbGFnLCBkeW5hbWljUHJvcHMpIHtcclxuICAgIHJldHVybiBzZXR1cEJsb2NrKGNyZWF0ZVZOb2RlKHR5cGUsIHByb3BzLCBjaGlsZHJlbiwgcGF0Y2hGbGFnLCBkeW5hbWljUHJvcHMsIHRydWUgLyogaXNCbG9jazogcHJldmVudCBhIGJsb2NrIGZyb20gdHJhY2tpbmcgaXRzZWxmICovKSk7XHJcbn1cclxuZnVuY3Rpb24gaXNWTm9kZSh2YWx1ZSkge1xyXG4gICAgcmV0dXJuIHZhbHVlID8gdmFsdWUuX192X2lzVk5vZGUgPT09IHRydWUgOiBmYWxzZTtcclxufVxyXG5mdW5jdGlvbiBpc1NhbWVWTm9kZVR5cGUobjEsIG4yKSB7XHJcbiAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmXHJcbiAgICAgICAgbjIuc2hhcGVGbGFnICYgNiAvKiBDT01QT05FTlQgKi8gJiZcclxuICAgICAgICBobXJEaXJ0eUNvbXBvbmVudHMuaGFzKG4yLnR5cGUpKSB7XHJcbiAgICAgICAgLy8gSE1SIG9ubHk6IGlmIHRoZSBjb21wb25lbnQgaGFzIGJlZW4gaG90LXVwZGF0ZWQsIGZvcmNlIGEgcmVsb2FkLlxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIHJldHVybiBuMS50eXBlID09PSBuMi50eXBlICYmIG4xLmtleSA9PT0gbjIua2V5O1xyXG59XHJcbmxldCB2bm9kZUFyZ3NUcmFuc2Zvcm1lcjtcclxuLyoqXHJcbiAqIEludGVybmFsIEFQSSBmb3IgcmVnaXN0ZXJpbmcgYW4gYXJndW1lbnRzIHRyYW5zZm9ybSBmb3IgY3JlYXRlVk5vZGVcclxuICogdXNlZCBmb3IgY3JlYXRpbmcgc3R1YnMgaW4gdGhlIHRlc3QtdXRpbHNcclxuICogSXQgaXMgKmludGVybmFsKiBidXQgbmVlZHMgdG8gYmUgZXhwb3NlZCBmb3IgdGVzdC11dGlscyB0byBwaWNrIHVwIHByb3BlclxyXG4gKiB0eXBpbmdzXHJcbiAqL1xyXG5mdW5jdGlvbiB0cmFuc2Zvcm1WTm9kZUFyZ3ModHJhbnNmb3JtZXIpIHtcclxuICAgIHZub2RlQXJnc1RyYW5zZm9ybWVyID0gdHJhbnNmb3JtZXI7XHJcbn1cclxuY29uc3QgY3JlYXRlVk5vZGVXaXRoQXJnc1RyYW5zZm9ybSA9ICguLi5hcmdzKSA9PiB7XHJcbiAgICByZXR1cm4gX2NyZWF0ZVZOb2RlKC4uLih2bm9kZUFyZ3NUcmFuc2Zvcm1lclxyXG4gICAgICAgID8gdm5vZGVBcmdzVHJhbnNmb3JtZXIoYXJncywgY3VycmVudFJlbmRlcmluZ0luc3RhbmNlKVxyXG4gICAgICAgIDogYXJncykpO1xyXG59O1xyXG5jb25zdCBJbnRlcm5hbE9iamVjdEtleSA9IGBfX3ZJbnRlcm5hbGA7XHJcbmNvbnN0IG5vcm1hbGl6ZUtleSA9ICh7IGtleSB9KSA9PiBrZXkgIT0gbnVsbCA/IGtleSA6IG51bGw7XHJcbmNvbnN0IG5vcm1hbGl6ZVJlZiA9ICh7IHJlZiwgcmVmX2tleSwgcmVmX2ZvciB9KSA9PiB7XHJcbiAgICByZXR1cm4gKHJlZiAhPSBudWxsXHJcbiAgICAgICAgPyBpc1N0cmluZyhyZWYpIHx8IGlzUmVmKHJlZikgfHwgaXNGdW5jdGlvbihyZWYpXHJcbiAgICAgICAgICAgID8geyBpOiBjdXJyZW50UmVuZGVyaW5nSW5zdGFuY2UsIHI6IHJlZiwgazogcmVmX2tleSwgZjogISFyZWZfZm9yIH1cclxuICAgICAgICAgICAgOiByZWZcclxuICAgICAgICA6IG51bGwpO1xyXG59O1xyXG5mdW5jdGlvbiBjcmVhdGVCYXNlVk5vZGUodHlwZSwgcHJvcHMgPSBudWxsLCBjaGlsZHJlbiA9IG51bGwsIHBhdGNoRmxhZyA9IDAsIGR5bmFtaWNQcm9wcyA9IG51bGwsIHNoYXBlRmxhZyA9IHR5cGUgPT09IEZyYWdtZW50ID8gMCA6IDEgLyogRUxFTUVOVCAqLywgaXNCbG9ja05vZGUgPSBmYWxzZSwgbmVlZEZ1bGxDaGlsZHJlbk5vcm1hbGl6YXRpb24gPSBmYWxzZSkge1xyXG4gICAgY29uc3Qgdm5vZGUgPSB7XHJcbiAgICAgICAgX192X2lzVk5vZGU6IHRydWUsXHJcbiAgICAgICAgX192X3NraXA6IHRydWUsXHJcbiAgICAgICAgdHlwZSxcclxuICAgICAgICBwcm9wcyxcclxuICAgICAgICBrZXk6IHByb3BzICYmIG5vcm1hbGl6ZUtleShwcm9wcyksXHJcbiAgICAgICAgcmVmOiBwcm9wcyAmJiBub3JtYWxpemVSZWYocHJvcHMpLFxyXG4gICAgICAgIHNjb3BlSWQ6IGN1cnJlbnRTY29wZUlkLFxyXG4gICAgICAgIHNsb3RTY29wZUlkczogbnVsbCxcclxuICAgICAgICBjaGlsZHJlbixcclxuICAgICAgICBjb21wb25lbnQ6IG51bGwsXHJcbiAgICAgICAgc3VzcGVuc2U6IG51bGwsXHJcbiAgICAgICAgc3NDb250ZW50OiBudWxsLFxyXG4gICAgICAgIHNzRmFsbGJhY2s6IG51bGwsXHJcbiAgICAgICAgZGlyczogbnVsbCxcclxuICAgICAgICB0cmFuc2l0aW9uOiBudWxsLFxyXG4gICAgICAgIGVsOiBudWxsLFxyXG4gICAgICAgIGFuY2hvcjogbnVsbCxcclxuICAgICAgICB0YXJnZXQ6IG51bGwsXHJcbiAgICAgICAgdGFyZ2V0QW5jaG9yOiBudWxsLFxyXG4gICAgICAgIHN0YXRpY0NvdW50OiAwLFxyXG4gICAgICAgIHNoYXBlRmxhZyxcclxuICAgICAgICBwYXRjaEZsYWcsXHJcbiAgICAgICAgZHluYW1pY1Byb3BzLFxyXG4gICAgICAgIGR5bmFtaWNDaGlsZHJlbjogbnVsbCxcclxuICAgICAgICBhcHBDb250ZXh0OiBudWxsXHJcbiAgICB9O1xyXG4gICAgaWYgKG5lZWRGdWxsQ2hpbGRyZW5Ob3JtYWxpemF0aW9uKSB7XHJcbiAgICAgICAgbm9ybWFsaXplQ2hpbGRyZW4odm5vZGUsIGNoaWxkcmVuKTtcclxuICAgICAgICAvLyBub3JtYWxpemUgc3VzcGVuc2UgY2hpbGRyZW5cclxuICAgICAgICBpZiAoc2hhcGVGbGFnICYgMTI4IC8qIFNVU1BFTlNFICovKSB7XHJcbiAgICAgICAgICAgIHR5cGUubm9ybWFsaXplKHZub2RlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChjaGlsZHJlbikge1xyXG4gICAgICAgIC8vIGNvbXBpbGVkIGVsZW1lbnQgdm5vZGUgLSBpZiBjaGlsZHJlbiBpcyBwYXNzZWQsIG9ubHkgcG9zc2libGUgdHlwZXMgYXJlXHJcbiAgICAgICAgLy8gc3RyaW5nIG9yIEFycmF5LlxyXG4gICAgICAgIHZub2RlLnNoYXBlRmxhZyB8PSBpc1N0cmluZyhjaGlsZHJlbilcclxuICAgICAgICAgICAgPyA4IC8qIFRFWFRfQ0hJTERSRU4gKi9cclxuICAgICAgICAgICAgOiAxNiAvKiBBUlJBWV9DSElMRFJFTiAqLztcclxuICAgIH1cclxuICAgIC8vIHZhbGlkYXRlIGtleVxyXG4gICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiB2bm9kZS5rZXkgIT09IHZub2RlLmtleSkge1xyXG4gICAgICAgIHdhcm4oYFZOb2RlIGNyZWF0ZWQgd2l0aCBpbnZhbGlkIGtleSAoTmFOKS4gVk5vZGUgdHlwZTpgLCB2bm9kZS50eXBlKTtcclxuICAgIH1cclxuICAgIC8vIHRyYWNrIHZub2RlIGZvciBibG9jayB0cmVlXHJcbiAgICBpZiAoaXNCbG9ja1RyZWVFbmFibGVkID4gMCAmJlxyXG4gICAgICAgIC8vIGF2b2lkIGEgYmxvY2sgbm9kZSBmcm9tIHRyYWNraW5nIGl0c2VsZlxyXG4gICAgICAgICFpc0Jsb2NrTm9kZSAmJlxyXG4gICAgICAgIC8vIGhhcyBjdXJyZW50IHBhcmVudCBibG9ja1xyXG4gICAgICAgIGN1cnJlbnRCbG9jayAmJlxyXG4gICAgICAgIC8vIHByZXNlbmNlIG9mIGEgcGF0Y2ggZmxhZyBpbmRpY2F0ZXMgdGhpcyBub2RlIG5lZWRzIHBhdGNoaW5nIG9uIHVwZGF0ZXMuXHJcbiAgICAgICAgLy8gY29tcG9uZW50IG5vZGVzIGFsc28gc2hvdWxkIGFsd2F5cyBiZSBwYXRjaGVkLCBiZWNhdXNlIGV2ZW4gaWYgdGhlXHJcbiAgICAgICAgLy8gY29tcG9uZW50IGRvZXNuJ3QgbmVlZCB0byB1cGRhdGUsIGl0IG5lZWRzIHRvIHBlcnNpc3QgdGhlIGluc3RhbmNlIG9uIHRvXHJcbiAgICAgICAgLy8gdGhlIG5leHQgdm5vZGUgc28gdGhhdCBpdCBjYW4gYmUgcHJvcGVybHkgdW5tb3VudGVkIGxhdGVyLlxyXG4gICAgICAgICh2bm9kZS5wYXRjaEZsYWcgPiAwIHx8IHNoYXBlRmxhZyAmIDYgLyogQ09NUE9ORU5UICovKSAmJlxyXG4gICAgICAgIC8vIHRoZSBFVkVOVFMgZmxhZyBpcyBvbmx5IGZvciBoeWRyYXRpb24gYW5kIGlmIGl0IGlzIHRoZSBvbmx5IGZsYWcsIHRoZVxyXG4gICAgICAgIC8vIHZub2RlIHNob3VsZCBub3QgYmUgY29uc2lkZXJlZCBkeW5hbWljIGR1ZSB0byBoYW5kbGVyIGNhY2hpbmcuXHJcbiAgICAgICAgdm5vZGUucGF0Y2hGbGFnICE9PSAzMiAvKiBIWURSQVRFX0VWRU5UUyAqLykge1xyXG4gICAgICAgIGN1cnJlbnRCbG9jay5wdXNoKHZub2RlKTtcclxuICAgIH1cclxuICAgIHJldHVybiB2bm9kZTtcclxufVxyXG5jb25zdCBjcmVhdGVWTm9kZSA9ICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgPyBjcmVhdGVWTm9kZVdpdGhBcmdzVHJhbnNmb3JtIDogX2NyZWF0ZVZOb2RlKTtcclxuZnVuY3Rpb24gX2NyZWF0ZVZOb2RlKHR5cGUsIHByb3BzID0gbnVsbCwgY2hpbGRyZW4gPSBudWxsLCBwYXRjaEZsYWcgPSAwLCBkeW5hbWljUHJvcHMgPSBudWxsLCBpc0Jsb2NrTm9kZSA9IGZhbHNlKSB7XHJcbiAgICBpZiAoIXR5cGUgfHwgdHlwZSA9PT0gTlVMTF9EWU5BTUlDX0NPTVBPTkVOVCkge1xyXG4gICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgIXR5cGUpIHtcclxuICAgICAgICAgICAgd2FybihgSW52YWxpZCB2bm9kZSB0eXBlIHdoZW4gY3JlYXRpbmcgdm5vZGU6ICR7dHlwZX0uYCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHR5cGUgPSBDb21tZW50O1xyXG4gICAgfVxyXG4gICAgaWYgKGlzVk5vZGUodHlwZSkpIHtcclxuICAgICAgICAvLyBjcmVhdGVWTm9kZSByZWNlaXZpbmcgYW4gZXhpc3Rpbmcgdm5vZGUuIFRoaXMgaGFwcGVucyBpbiBjYXNlcyBsaWtlXHJcbiAgICAgICAgLy8gPGNvbXBvbmVudCA6aXM9XCJ2bm9kZVwiLz5cclxuICAgICAgICAvLyAjMjA3OCBtYWtlIHN1cmUgdG8gbWVyZ2UgcmVmcyBkdXJpbmcgdGhlIGNsb25lIGluc3RlYWQgb2Ygb3ZlcndyaXRpbmcgaXRcclxuICAgICAgICBjb25zdCBjbG9uZWQgPSBjbG9uZVZOb2RlKHR5cGUsIHByb3BzLCB0cnVlIC8qIG1lcmdlUmVmOiB0cnVlICovKTtcclxuICAgICAgICBpZiAoY2hpbGRyZW4pIHtcclxuICAgICAgICAgICAgbm9ybWFsaXplQ2hpbGRyZW4oY2xvbmVkLCBjaGlsZHJlbik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBjbG9uZWQ7XHJcbiAgICB9XHJcbiAgICAvLyBjbGFzcyBjb21wb25lbnQgbm9ybWFsaXphdGlvbi5cclxuICAgIGlmIChpc0NsYXNzQ29tcG9uZW50KHR5cGUpKSB7XHJcbiAgICAgICAgdHlwZSA9IHR5cGUuX192Y2NPcHRzO1xyXG4gICAgfVxyXG4gICAgLy8gY2xhc3MgJiBzdHlsZSBub3JtYWxpemF0aW9uLlxyXG4gICAgaWYgKHByb3BzKSB7XHJcbiAgICAgICAgLy8gZm9yIHJlYWN0aXZlIG9yIHByb3h5IG9iamVjdHMsIHdlIG5lZWQgdG8gY2xvbmUgaXQgdG8gZW5hYmxlIG11dGF0aW9uLlxyXG4gICAgICAgIHByb3BzID0gZ3VhcmRSZWFjdGl2ZVByb3BzKHByb3BzKTtcclxuICAgICAgICBsZXQgeyBjbGFzczoga2xhc3MsIHN0eWxlIH0gPSBwcm9wcztcclxuICAgICAgICBpZiAoa2xhc3MgJiYgIWlzU3RyaW5nKGtsYXNzKSkge1xyXG4gICAgICAgICAgICBwcm9wcy5jbGFzcyA9IG5vcm1hbGl6ZUNsYXNzKGtsYXNzKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGlzT2JqZWN0KHN0eWxlKSkge1xyXG4gICAgICAgICAgICAvLyByZWFjdGl2ZSBzdGF0ZSBvYmplY3RzIG5lZWQgdG8gYmUgY2xvbmVkIHNpbmNlIHRoZXkgYXJlIGxpa2VseSB0byBiZVxyXG4gICAgICAgICAgICAvLyBtdXRhdGVkXHJcbiAgICAgICAgICAgIGlmIChpc1Byb3h5KHN0eWxlKSAmJiAhaXNBcnJheShzdHlsZSkpIHtcclxuICAgICAgICAgICAgICAgIHN0eWxlID0gZXh0ZW5kKHt9LCBzdHlsZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcHJvcHMuc3R5bGUgPSBub3JtYWxpemVTdHlsZShzdHlsZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy8gZW5jb2RlIHRoZSB2bm9kZSB0eXBlIGluZm9ybWF0aW9uIGludG8gYSBiaXRtYXBcclxuICAgIGNvbnN0IHNoYXBlRmxhZyA9IGlzU3RyaW5nKHR5cGUpXHJcbiAgICAgICAgPyAxIC8qIEVMRU1FTlQgKi9cclxuICAgICAgICA6IGlzU3VzcGVuc2UodHlwZSlcclxuICAgICAgICAgICAgPyAxMjggLyogU1VTUEVOU0UgKi9cclxuICAgICAgICAgICAgOiBpc1RlbGVwb3J0KHR5cGUpXHJcbiAgICAgICAgICAgICAgICA/IDY0IC8qIFRFTEVQT1JUICovXHJcbiAgICAgICAgICAgICAgICA6IGlzT2JqZWN0KHR5cGUpXHJcbiAgICAgICAgICAgICAgICAgICAgPyA0IC8qIFNUQVRFRlVMX0NPTVBPTkVOVCAqL1xyXG4gICAgICAgICAgICAgICAgICAgIDogaXNGdW5jdGlvbih0eXBlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA/IDIgLyogRlVOQ1RJT05BTF9DT01QT05FTlQgKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgOiAwO1xyXG4gICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiBzaGFwZUZsYWcgJiA0IC8qIFNUQVRFRlVMX0NPTVBPTkVOVCAqLyAmJiBpc1Byb3h5KHR5cGUpKSB7XHJcbiAgICAgICAgdHlwZSA9IHRvUmF3KHR5cGUpO1xyXG4gICAgICAgIHdhcm4oYFZ1ZSByZWNlaXZlZCBhIENvbXBvbmVudCB3aGljaCB3YXMgbWFkZSBhIHJlYWN0aXZlIG9iamVjdC4gVGhpcyBjYW4gYCArXHJcbiAgICAgICAgICAgIGBsZWFkIHRvIHVubmVjZXNzYXJ5IHBlcmZvcm1hbmNlIG92ZXJoZWFkLCBhbmQgc2hvdWxkIGJlIGF2b2lkZWQgYnkgYCArXHJcbiAgICAgICAgICAgIGBtYXJraW5nIHRoZSBjb21wb25lbnQgd2l0aCBcXGBtYXJrUmF3XFxgIG9yIHVzaW5nIFxcYHNoYWxsb3dSZWZcXGAgYCArXHJcbiAgICAgICAgICAgIGBpbnN0ZWFkIG9mIFxcYHJlZlxcYC5gLCBgXFxuQ29tcG9uZW50IHRoYXQgd2FzIG1hZGUgcmVhY3RpdmU6IGAsIHR5cGUpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGNyZWF0ZUJhc2VWTm9kZSh0eXBlLCBwcm9wcywgY2hpbGRyZW4sIHBhdGNoRmxhZywgZHluYW1pY1Byb3BzLCBzaGFwZUZsYWcsIGlzQmxvY2tOb2RlLCB0cnVlKTtcclxufVxyXG5mdW5jdGlvbiBndWFyZFJlYWN0aXZlUHJvcHMocHJvcHMpIHtcclxuICAgIGlmICghcHJvcHMpXHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICByZXR1cm4gaXNQcm94eShwcm9wcykgfHwgSW50ZXJuYWxPYmplY3RLZXkgaW4gcHJvcHNcclxuICAgICAgICA/IGV4dGVuZCh7fSwgcHJvcHMpXHJcbiAgICAgICAgOiBwcm9wcztcclxufVxyXG5mdW5jdGlvbiBjbG9uZVZOb2RlKHZub2RlLCBleHRyYVByb3BzLCBtZXJnZVJlZiA9IGZhbHNlKSB7XHJcbiAgICAvLyBUaGlzIGlzIGludGVudGlvbmFsbHkgTk9UIHVzaW5nIHNwcmVhZCBvciBleHRlbmQgdG8gYXZvaWQgdGhlIHJ1bnRpbWVcclxuICAgIC8vIGtleSBlbnVtZXJhdGlvbiBjb3N0LlxyXG4gICAgY29uc3QgeyBwcm9wcywgcmVmLCBwYXRjaEZsYWcsIGNoaWxkcmVuIH0gPSB2bm9kZTtcclxuICAgIGNvbnN0IG1lcmdlZFByb3BzID0gZXh0cmFQcm9wcyA/IG1lcmdlUHJvcHMocHJvcHMgfHwge30sIGV4dHJhUHJvcHMpIDogcHJvcHM7XHJcbiAgICBjb25zdCBjbG9uZWQgPSB7XHJcbiAgICAgICAgX192X2lzVk5vZGU6IHRydWUsXHJcbiAgICAgICAgX192X3NraXA6IHRydWUsXHJcbiAgICAgICAgdHlwZTogdm5vZGUudHlwZSxcclxuICAgICAgICBwcm9wczogbWVyZ2VkUHJvcHMsXHJcbiAgICAgICAga2V5OiBtZXJnZWRQcm9wcyAmJiBub3JtYWxpemVLZXkobWVyZ2VkUHJvcHMpLFxyXG4gICAgICAgIHJlZjogZXh0cmFQcm9wcyAmJiBleHRyYVByb3BzLnJlZlxyXG4gICAgICAgICAgICA/IC8vICMyMDc4IGluIHRoZSBjYXNlIG9mIDxjb21wb25lbnQgOmlzPVwidm5vZGVcIiByZWY9XCJleHRyYVwiLz5cclxuICAgICAgICAgICAgICAgIC8vIGlmIHRoZSB2bm9kZSBpdHNlbGYgYWxyZWFkeSBoYXMgYSByZWYsIGNsb25lVk5vZGUgd2lsbCBuZWVkIHRvIG1lcmdlXHJcbiAgICAgICAgICAgICAgICAvLyB0aGUgcmVmcyBzbyB0aGUgc2luZ2xlIHZub2RlIGNhbiBiZSBzZXQgb24gbXVsdGlwbGUgcmVmc1xyXG4gICAgICAgICAgICAgICAgbWVyZ2VSZWYgJiYgcmVmXHJcbiAgICAgICAgICAgICAgICAgICAgPyBpc0FycmF5KHJlZilcclxuICAgICAgICAgICAgICAgICAgICAgICAgPyByZWYuY29uY2F0KG5vcm1hbGl6ZVJlZihleHRyYVByb3BzKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgOiBbcmVmLCBub3JtYWxpemVSZWYoZXh0cmFQcm9wcyldXHJcbiAgICAgICAgICAgICAgICAgICAgOiBub3JtYWxpemVSZWYoZXh0cmFQcm9wcylcclxuICAgICAgICAgICAgOiByZWYsXHJcbiAgICAgICAgc2NvcGVJZDogdm5vZGUuc2NvcGVJZCxcclxuICAgICAgICBzbG90U2NvcGVJZHM6IHZub2RlLnNsb3RTY29wZUlkcyxcclxuICAgICAgICBjaGlsZHJlbjogKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmIHBhdGNoRmxhZyA9PT0gLTEgLyogSE9JU1RFRCAqLyAmJiBpc0FycmF5KGNoaWxkcmVuKVxyXG4gICAgICAgICAgICA/IGNoaWxkcmVuLm1hcChkZWVwQ2xvbmVWTm9kZSlcclxuICAgICAgICAgICAgOiBjaGlsZHJlbixcclxuICAgICAgICB0YXJnZXQ6IHZub2RlLnRhcmdldCxcclxuICAgICAgICB0YXJnZXRBbmNob3I6IHZub2RlLnRhcmdldEFuY2hvcixcclxuICAgICAgICBzdGF0aWNDb3VudDogdm5vZGUuc3RhdGljQ291bnQsXHJcbiAgICAgICAgc2hhcGVGbGFnOiB2bm9kZS5zaGFwZUZsYWcsXHJcbiAgICAgICAgLy8gaWYgdGhlIHZub2RlIGlzIGNsb25lZCB3aXRoIGV4dHJhIHByb3BzLCB3ZSBjYW4gbm8gbG9uZ2VyIGFzc3VtZSBpdHNcclxuICAgICAgICAvLyBleGlzdGluZyBwYXRjaCBmbGFnIHRvIGJlIHJlbGlhYmxlIGFuZCBuZWVkIHRvIGFkZCB0aGUgRlVMTF9QUk9QUyBmbGFnLlxyXG4gICAgICAgIC8vIG5vdGU6IHByZXNlcnZlIGZsYWcgZm9yIGZyYWdtZW50cyBzaW5jZSB0aGV5IHVzZSB0aGUgZmxhZyBmb3IgY2hpbGRyZW5cclxuICAgICAgICAvLyBmYXN0IHBhdGhzIG9ubHkuXHJcbiAgICAgICAgcGF0Y2hGbGFnOiBleHRyYVByb3BzICYmIHZub2RlLnR5cGUgIT09IEZyYWdtZW50XHJcbiAgICAgICAgICAgID8gcGF0Y2hGbGFnID09PSAtMSAvLyBob2lzdGVkIG5vZGVcclxuICAgICAgICAgICAgICAgID8gMTYgLyogRlVMTF9QUk9QUyAqL1xyXG4gICAgICAgICAgICAgICAgOiBwYXRjaEZsYWcgfCAxNiAvKiBGVUxMX1BST1BTICovXHJcbiAgICAgICAgICAgIDogcGF0Y2hGbGFnLFxyXG4gICAgICAgIGR5bmFtaWNQcm9wczogdm5vZGUuZHluYW1pY1Byb3BzLFxyXG4gICAgICAgIGR5bmFtaWNDaGlsZHJlbjogdm5vZGUuZHluYW1pY0NoaWxkcmVuLFxyXG4gICAgICAgIGFwcENvbnRleHQ6IHZub2RlLmFwcENvbnRleHQsXHJcbiAgICAgICAgZGlyczogdm5vZGUuZGlycyxcclxuICAgICAgICB0cmFuc2l0aW9uOiB2bm9kZS50cmFuc2l0aW9uLFxyXG4gICAgICAgIC8vIFRoZXNlIHNob3VsZCB0ZWNobmljYWxseSBvbmx5IGJlIG5vbi1udWxsIG9uIG1vdW50ZWQgVk5vZGVzLiBIb3dldmVyLFxyXG4gICAgICAgIC8vIHRoZXkgKnNob3VsZCogYmUgY29waWVkIGZvciBrZXB0LWFsaXZlIHZub2Rlcy4gU28gd2UganVzdCBhbHdheXMgY29weVxyXG4gICAgICAgIC8vIHRoZW0gc2luY2UgdGhlbSBiZWluZyBub24tbnVsbCBkdXJpbmcgYSBtb3VudCBkb2Vzbid0IGFmZmVjdCB0aGUgbG9naWMgYXNcclxuICAgICAgICAvLyB0aGV5IHdpbGwgc2ltcGx5IGJlIG92ZXJ3cml0dGVuLlxyXG4gICAgICAgIGNvbXBvbmVudDogdm5vZGUuY29tcG9uZW50LFxyXG4gICAgICAgIHN1c3BlbnNlOiB2bm9kZS5zdXNwZW5zZSxcclxuICAgICAgICBzc0NvbnRlbnQ6IHZub2RlLnNzQ29udGVudCAmJiBjbG9uZVZOb2RlKHZub2RlLnNzQ29udGVudCksXHJcbiAgICAgICAgc3NGYWxsYmFjazogdm5vZGUuc3NGYWxsYmFjayAmJiBjbG9uZVZOb2RlKHZub2RlLnNzRmFsbGJhY2spLFxyXG4gICAgICAgIGVsOiB2bm9kZS5lbCxcclxuICAgICAgICBhbmNob3I6IHZub2RlLmFuY2hvclxyXG4gICAgfTtcclxuICAgIHJldHVybiBjbG9uZWQ7XHJcbn1cclxuLyoqXHJcbiAqIERldiBvbmx5LCBmb3IgSE1SIG9mIGhvaXN0ZWQgdm5vZGVzIHJldXNlZCBpbiB2LWZvclxyXG4gKiBodHRwczovL2dpdGh1Yi5jb20vdml0ZWpzL3ZpdGUvaXNzdWVzLzIwMjJcclxuICovXHJcbmZ1bmN0aW9uIGRlZXBDbG9uZVZOb2RlKHZub2RlKSB7XHJcbiAgICBjb25zdCBjbG9uZWQgPSBjbG9uZVZOb2RlKHZub2RlKTtcclxuICAgIGlmIChpc0FycmF5KHZub2RlLmNoaWxkcmVuKSkge1xyXG4gICAgICAgIGNsb25lZC5jaGlsZHJlbiA9IHZub2RlLmNoaWxkcmVuLm1hcChkZWVwQ2xvbmVWTm9kZSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gY2xvbmVkO1xyXG59XHJcbi8qKlxyXG4gKiBAcHJpdmF0ZVxyXG4gKi9cclxuZnVuY3Rpb24gY3JlYXRlVGV4dFZOb2RlKHRleHQgPSAnICcsIGZsYWcgPSAwKSB7XHJcbiAgICByZXR1cm4gY3JlYXRlVk5vZGUoVGV4dCwgbnVsbCwgdGV4dCwgZmxhZyk7XHJcbn1cclxuLyoqXHJcbiAqIEBwcml2YXRlXHJcbiAqL1xyXG5mdW5jdGlvbiBjcmVhdGVTdGF0aWNWTm9kZShjb250ZW50LCBudW1iZXJPZk5vZGVzKSB7XHJcbiAgICAvLyBBIHN0YXRpYyB2bm9kZSBjYW4gY29udGFpbiBtdWx0aXBsZSBzdHJpbmdpZmllZCBlbGVtZW50cywgYW5kIHRoZSBudW1iZXJcclxuICAgIC8vIG9mIGVsZW1lbnRzIGlzIG5lY2Vzc2FyeSBmb3IgaHlkcmF0aW9uLlxyXG4gICAgY29uc3Qgdm5vZGUgPSBjcmVhdGVWTm9kZShTdGF0aWMsIG51bGwsIGNvbnRlbnQpO1xyXG4gICAgdm5vZGUuc3RhdGljQ291bnQgPSBudW1iZXJPZk5vZGVzO1xyXG4gICAgcmV0dXJuIHZub2RlO1xyXG59XHJcbi8qKlxyXG4gKiBAcHJpdmF0ZVxyXG4gKi9cclxuZnVuY3Rpb24gY3JlYXRlQ29tbWVudFZOb2RlKHRleHQgPSAnJywgXHJcbi8vIHdoZW4gdXNlZCBhcyB0aGUgdi1lbHNlIGJyYW5jaCwgdGhlIGNvbW1lbnQgbm9kZSBtdXN0IGJlIGNyZWF0ZWQgYXMgYVxyXG4vLyBibG9jayB0byBlbnN1cmUgY29ycmVjdCB1cGRhdGVzLlxyXG5hc0Jsb2NrID0gZmFsc2UpIHtcclxuICAgIHJldHVybiBhc0Jsb2NrXHJcbiAgICAgICAgPyAob3BlbkJsb2NrKCksIGNyZWF0ZUJsb2NrKENvbW1lbnQsIG51bGwsIHRleHQpKVxyXG4gICAgICAgIDogY3JlYXRlVk5vZGUoQ29tbWVudCwgbnVsbCwgdGV4dCk7XHJcbn1cclxuZnVuY3Rpb24gbm9ybWFsaXplVk5vZGUoY2hpbGQpIHtcclxuICAgIGlmIChjaGlsZCA9PSBudWxsIHx8IHR5cGVvZiBjaGlsZCA9PT0gJ2Jvb2xlYW4nKSB7XHJcbiAgICAgICAgLy8gZW1wdHkgcGxhY2Vob2xkZXJcclxuICAgICAgICByZXR1cm4gY3JlYXRlVk5vZGUoQ29tbWVudCk7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChpc0FycmF5KGNoaWxkKSkge1xyXG4gICAgICAgIC8vIGZyYWdtZW50XHJcbiAgICAgICAgcmV0dXJuIGNyZWF0ZVZOb2RlKEZyYWdtZW50LCBudWxsLCBcclxuICAgICAgICAvLyAjMzY2NiwgYXZvaWQgcmVmZXJlbmNlIHBvbGx1dGlvbiB3aGVuIHJldXNpbmcgdm5vZGVcclxuICAgICAgICBjaGlsZC5zbGljZSgpKTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKHR5cGVvZiBjaGlsZCA9PT0gJ29iamVjdCcpIHtcclxuICAgICAgICAvLyBhbHJlYWR5IHZub2RlLCB0aGlzIHNob3VsZCBiZSB0aGUgbW9zdCBjb21tb24gc2luY2UgY29tcGlsZWQgdGVtcGxhdGVzXHJcbiAgICAgICAgLy8gYWx3YXlzIHByb2R1Y2UgYWxsLXZub2RlIGNoaWxkcmVuIGFycmF5c1xyXG4gICAgICAgIHJldHVybiBjbG9uZUlmTW91bnRlZChjaGlsZCk7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICAvLyBzdHJpbmdzIGFuZCBudW1iZXJzXHJcbiAgICAgICAgcmV0dXJuIGNyZWF0ZVZOb2RlKFRleHQsIG51bGwsIFN0cmluZyhjaGlsZCkpO1xyXG4gICAgfVxyXG59XHJcbi8vIG9wdGltaXplZCBub3JtYWxpemF0aW9uIGZvciB0ZW1wbGF0ZS1jb21waWxlZCByZW5kZXIgZm5zXHJcbmZ1bmN0aW9uIGNsb25lSWZNb3VudGVkKGNoaWxkKSB7XHJcbiAgICByZXR1cm4gY2hpbGQuZWwgPT09IG51bGwgfHwgY2hpbGQubWVtbyA/IGNoaWxkIDogY2xvbmVWTm9kZShjaGlsZCk7XHJcbn1cclxuZnVuY3Rpb24gbm9ybWFsaXplQ2hpbGRyZW4odm5vZGUsIGNoaWxkcmVuKSB7XHJcbiAgICBsZXQgdHlwZSA9IDA7XHJcbiAgICBjb25zdCB7IHNoYXBlRmxhZyB9ID0gdm5vZGU7XHJcbiAgICBpZiAoY2hpbGRyZW4gPT0gbnVsbCkge1xyXG4gICAgICAgIGNoaWxkcmVuID0gbnVsbDtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKGlzQXJyYXkoY2hpbGRyZW4pKSB7XHJcbiAgICAgICAgdHlwZSA9IDE2IC8qIEFSUkFZX0NISUxEUkVOICovO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAodHlwZW9mIGNoaWxkcmVuID09PSAnb2JqZWN0Jykge1xyXG4gICAgICAgIGlmIChzaGFwZUZsYWcgJiAoMSAvKiBFTEVNRU5UICovIHwgNjQgLyogVEVMRVBPUlQgKi8pKSB7XHJcbiAgICAgICAgICAgIC8vIE5vcm1hbGl6ZSBzbG90IHRvIHBsYWluIGNoaWxkcmVuIGZvciBwbGFpbiBlbGVtZW50IGFuZCBUZWxlcG9ydFxyXG4gICAgICAgICAgICBjb25zdCBzbG90ID0gY2hpbGRyZW4uZGVmYXVsdDtcclxuICAgICAgICAgICAgaWYgKHNsb3QpIHtcclxuICAgICAgICAgICAgICAgIC8vIF9jIG1hcmtlciBpcyBhZGRlZCBieSB3aXRoQ3R4KCkgaW5kaWNhdGluZyB0aGlzIGlzIGEgY29tcGlsZWQgc2xvdFxyXG4gICAgICAgICAgICAgICAgc2xvdC5fYyAmJiAoc2xvdC5fZCA9IGZhbHNlKTtcclxuICAgICAgICAgICAgICAgIG5vcm1hbGl6ZUNoaWxkcmVuKHZub2RlLCBzbG90KCkpO1xyXG4gICAgICAgICAgICAgICAgc2xvdC5fYyAmJiAoc2xvdC5fZCA9IHRydWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHR5cGUgPSAzMiAvKiBTTE9UU19DSElMRFJFTiAqLztcclxuICAgICAgICAgICAgY29uc3Qgc2xvdEZsYWcgPSBjaGlsZHJlbi5fO1xyXG4gICAgICAgICAgICBpZiAoIXNsb3RGbGFnICYmICEoSW50ZXJuYWxPYmplY3RLZXkgaW4gY2hpbGRyZW4pKSB7XHJcbiAgICAgICAgICAgICAgICBjaGlsZHJlbi5fY3R4ID0gY3VycmVudFJlbmRlcmluZ0luc3RhbmNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKHNsb3RGbGFnID09PSAzIC8qIEZPUldBUkRFRCAqLyAmJiBjdXJyZW50UmVuZGVyaW5nSW5zdGFuY2UpIHtcclxuICAgICAgICAgICAgICAgIC8vIGEgY2hpbGQgY29tcG9uZW50IHJlY2VpdmVzIGZvcndhcmRlZCBzbG90cyBmcm9tIHRoZSBwYXJlbnQuXHJcbiAgICAgICAgICAgICAgICAvLyBpdHMgc2xvdCB0eXBlIGlzIGRldGVybWluZWQgYnkgaXRzIHBhcmVudCdzIHNsb3QgdHlwZS5cclxuICAgICAgICAgICAgICAgIGlmIChjdXJyZW50UmVuZGVyaW5nSW5zdGFuY2Uuc2xvdHMuXyA9PT0gMSAvKiBTVEFCTEUgKi8pIHtcclxuICAgICAgICAgICAgICAgICAgICBjaGlsZHJlbi5fID0gMSAvKiBTVEFCTEUgKi87XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBjaGlsZHJlbi5fID0gMiAvKiBEWU5BTUlDICovO1xyXG4gICAgICAgICAgICAgICAgICAgIHZub2RlLnBhdGNoRmxhZyB8PSAxMDI0IC8qIERZTkFNSUNfU0xPVFMgKi87XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChpc0Z1bmN0aW9uKGNoaWxkcmVuKSkge1xyXG4gICAgICAgIGNoaWxkcmVuID0geyBkZWZhdWx0OiBjaGlsZHJlbiwgX2N0eDogY3VycmVudFJlbmRlcmluZ0luc3RhbmNlIH07XHJcbiAgICAgICAgdHlwZSA9IDMyIC8qIFNMT1RTX0NISUxEUkVOICovO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgY2hpbGRyZW4gPSBTdHJpbmcoY2hpbGRyZW4pO1xyXG4gICAgICAgIC8vIGZvcmNlIHRlbGVwb3J0IGNoaWxkcmVuIHRvIGFycmF5IHNvIGl0IGNhbiBiZSBtb3ZlZCBhcm91bmRcclxuICAgICAgICBpZiAoc2hhcGVGbGFnICYgNjQgLyogVEVMRVBPUlQgKi8pIHtcclxuICAgICAgICAgICAgdHlwZSA9IDE2IC8qIEFSUkFZX0NISUxEUkVOICovO1xyXG4gICAgICAgICAgICBjaGlsZHJlbiA9IFtjcmVhdGVUZXh0Vk5vZGUoY2hpbGRyZW4pXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHR5cGUgPSA4IC8qIFRFWFRfQ0hJTERSRU4gKi87XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgdm5vZGUuY2hpbGRyZW4gPSBjaGlsZHJlbjtcclxuICAgIHZub2RlLnNoYXBlRmxhZyB8PSB0eXBlO1xyXG59XHJcbmZ1bmN0aW9uIG1lcmdlUHJvcHMoLi4uYXJncykge1xyXG4gICAgY29uc3QgcmV0ID0ge307XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFyZ3MubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBjb25zdCB0b01lcmdlID0gYXJnc1tpXTtcclxuICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiB0b01lcmdlKSB7XHJcbiAgICAgICAgICAgIGlmIChrZXkgPT09ICdjbGFzcycpIHtcclxuICAgICAgICAgICAgICAgIGlmIChyZXQuY2xhc3MgIT09IHRvTWVyZ2UuY2xhc3MpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXQuY2xhc3MgPSBub3JtYWxpemVDbGFzcyhbcmV0LmNsYXNzLCB0b01lcmdlLmNsYXNzXSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoa2V5ID09PSAnc3R5bGUnKSB7XHJcbiAgICAgICAgICAgICAgICByZXQuc3R5bGUgPSBub3JtYWxpemVTdHlsZShbcmV0LnN0eWxlLCB0b01lcmdlLnN0eWxlXSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoaXNPbihrZXkpKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBleGlzdGluZyA9IHJldFtrZXldO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaW5jb21pbmcgPSB0b01lcmdlW2tleV07XHJcbiAgICAgICAgICAgICAgICBpZiAoaW5jb21pbmcgJiZcclxuICAgICAgICAgICAgICAgICAgICBleGlzdGluZyAhPT0gaW5jb21pbmcgJiZcclxuICAgICAgICAgICAgICAgICAgICAhKGlzQXJyYXkoZXhpc3RpbmcpICYmIGV4aXN0aW5nLmluY2x1ZGVzKGluY29taW5nKSkpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXRba2V5XSA9IGV4aXN0aW5nXHJcbiAgICAgICAgICAgICAgICAgICAgICAgID8gW10uY29uY2F0KGV4aXN0aW5nLCBpbmNvbWluZylcclxuICAgICAgICAgICAgICAgICAgICAgICAgOiBpbmNvbWluZztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChrZXkgIT09ICcnKSB7XHJcbiAgICAgICAgICAgICAgICByZXRba2V5XSA9IHRvTWVyZ2Vba2V5XTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiByZXQ7XHJcbn1cclxuZnVuY3Rpb24gaW52b2tlVk5vZGVIb29rKGhvb2ssIGluc3RhbmNlLCB2bm9kZSwgcHJldlZOb2RlID0gbnVsbCkge1xyXG4gICAgY2FsbFdpdGhBc3luY0Vycm9ySGFuZGxpbmcoaG9vaywgaW5zdGFuY2UsIDcgLyogVk5PREVfSE9PSyAqLywgW1xyXG4gICAgICAgIHZub2RlLFxyXG4gICAgICAgIHByZXZWTm9kZVxyXG4gICAgXSk7XHJcbn1cblxuLyoqXHJcbiAqIEFjdHVhbCBpbXBsZW1lbnRhdGlvblxyXG4gKi9cclxuZnVuY3Rpb24gcmVuZGVyTGlzdChzb3VyY2UsIHJlbmRlckl0ZW0sIGNhY2hlLCBpbmRleCkge1xyXG4gICAgbGV0IHJldDtcclxuICAgIGNvbnN0IGNhY2hlZCA9IChjYWNoZSAmJiBjYWNoZVtpbmRleF0pO1xyXG4gICAgaWYgKGlzQXJyYXkoc291cmNlKSB8fCBpc1N0cmluZyhzb3VyY2UpKSB7XHJcbiAgICAgICAgcmV0ID0gbmV3IEFycmF5KHNvdXJjZS5sZW5ndGgpO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwLCBsID0gc291cmNlLmxlbmd0aDsgaSA8IGw7IGkrKykge1xyXG4gICAgICAgICAgICByZXRbaV0gPSByZW5kZXJJdGVtKHNvdXJjZVtpXSwgaSwgdW5kZWZpbmVkLCBjYWNoZWQgJiYgY2FjaGVkW2ldKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmICh0eXBlb2Ygc291cmNlID09PSAnbnVtYmVyJykge1xyXG4gICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgIU51bWJlci5pc0ludGVnZXIoc291cmNlKSkge1xyXG4gICAgICAgICAgICB3YXJuKGBUaGUgdi1mb3IgcmFuZ2UgZXhwZWN0IGFuIGludGVnZXIgdmFsdWUgYnV0IGdvdCAke3NvdXJjZX0uYCk7XHJcbiAgICAgICAgICAgIHJldHVybiBbXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0ID0gbmV3IEFycmF5KHNvdXJjZSk7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzb3VyY2U7IGkrKykge1xyXG4gICAgICAgICAgICByZXRbaV0gPSByZW5kZXJJdGVtKGkgKyAxLCBpLCB1bmRlZmluZWQsIGNhY2hlZCAmJiBjYWNoZWRbaV0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGVsc2UgaWYgKGlzT2JqZWN0KHNvdXJjZSkpIHtcclxuICAgICAgICBpZiAoc291cmNlW1N5bWJvbC5pdGVyYXRvcl0pIHtcclxuICAgICAgICAgICAgcmV0ID0gQXJyYXkuZnJvbShzb3VyY2UsIChpdGVtLCBpKSA9PiByZW5kZXJJdGVtKGl0ZW0sIGksIHVuZGVmaW5lZCwgY2FjaGVkICYmIGNhY2hlZFtpXSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgY29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKHNvdXJjZSk7XHJcbiAgICAgICAgICAgIHJldCA9IG5ldyBBcnJheShrZXlzLmxlbmd0aCk7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwLCBsID0ga2V5cy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGtleSA9IGtleXNbaV07XHJcbiAgICAgICAgICAgICAgICByZXRbaV0gPSByZW5kZXJJdGVtKHNvdXJjZVtrZXldLCBrZXksIGksIGNhY2hlZCAmJiBjYWNoZWRbaV0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgcmV0ID0gW107XHJcbiAgICB9XHJcbiAgICBpZiAoY2FjaGUpIHtcclxuICAgICAgICBjYWNoZVtpbmRleF0gPSByZXQ7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcmV0O1xyXG59XG5cbi8qKlxyXG4gKiBDb21waWxlciBydW50aW1lIGhlbHBlciBmb3IgY3JlYXRpbmcgZHluYW1pYyBzbG90cyBvYmplY3RcclxuICogQHByaXZhdGVcclxuICovXHJcbmZ1bmN0aW9uIGNyZWF0ZVNsb3RzKHNsb3RzLCBkeW5hbWljU2xvdHMpIHtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZHluYW1pY1Nsb3RzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgY29uc3Qgc2xvdCA9IGR5bmFtaWNTbG90c1tpXTtcclxuICAgICAgICAvLyBhcnJheSBvZiBkeW5hbWljIHNsb3QgZ2VuZXJhdGVkIGJ5IDx0ZW1wbGF0ZSB2LWZvcj1cIi4uLlwiICNbLi4uXT5cclxuICAgICAgICBpZiAoaXNBcnJheShzbG90KSkge1xyXG4gICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHNsb3QubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgICAgICAgIHNsb3RzW3Nsb3Rbal0ubmFtZV0gPSBzbG90W2pdLmZuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHNsb3QpIHtcclxuICAgICAgICAgICAgLy8gY29uZGl0aW9uYWwgc2luZ2xlIHNsb3QgZ2VuZXJhdGVkIGJ5IDx0ZW1wbGF0ZSB2LWlmPVwiLi4uXCIgI2Zvbz5cclxuICAgICAgICAgICAgc2xvdHNbc2xvdC5uYW1lXSA9IHNsb3QuZm47XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHNsb3RzO1xyXG59XG5cbi8qKlxyXG4gKiBDb21waWxlciBydW50aW1lIGhlbHBlciBmb3IgcmVuZGVyaW5nIGA8c2xvdC8+YFxyXG4gKiBAcHJpdmF0ZVxyXG4gKi9cclxuZnVuY3Rpb24gcmVuZGVyU2xvdChzbG90cywgbmFtZSwgcHJvcHMgPSB7fSwgXHJcbi8vIHRoaXMgaXMgbm90IGEgdXNlci1mYWNpbmcgZnVuY3Rpb24sIHNvIHRoZSBmYWxsYmFjayBpcyBhbHdheXMgZ2VuZXJhdGVkIGJ5XHJcbi8vIHRoZSBjb21waWxlciBhbmQgZ3VhcmFudGVlZCB0byBiZSBhIGZ1bmN0aW9uIHJldHVybmluZyBhbiBhcnJheVxyXG5mYWxsYmFjaywgbm9TbG90dGVkKSB7XHJcbiAgICBpZiAoY3VycmVudFJlbmRlcmluZ0luc3RhbmNlLmlzQ0UgfHxcclxuICAgICAgICAoY3VycmVudFJlbmRlcmluZ0luc3RhbmNlLnBhcmVudCAmJlxyXG4gICAgICAgICAgICBpc0FzeW5jV3JhcHBlcihjdXJyZW50UmVuZGVyaW5nSW5zdGFuY2UucGFyZW50KSAmJlxyXG4gICAgICAgICAgICBjdXJyZW50UmVuZGVyaW5nSW5zdGFuY2UucGFyZW50LmlzQ0UpKSB7XHJcbiAgICAgICAgcmV0dXJuIGNyZWF0ZVZOb2RlKCdzbG90JywgbmFtZSA9PT0gJ2RlZmF1bHQnID8gbnVsbCA6IHsgbmFtZSB9LCBmYWxsYmFjayAmJiBmYWxsYmFjaygpKTtcclxuICAgIH1cclxuICAgIGxldCBzbG90ID0gc2xvdHNbbmFtZV07XHJcbiAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmIHNsb3QgJiYgc2xvdC5sZW5ndGggPiAxKSB7XHJcbiAgICAgICAgd2FybihgU1NSLW9wdGltaXplZCBzbG90IGZ1bmN0aW9uIGRldGVjdGVkIGluIGEgbm9uLVNTUi1vcHRpbWl6ZWQgcmVuZGVyIGAgK1xyXG4gICAgICAgICAgICBgZnVuY3Rpb24uIFlvdSBuZWVkIHRvIG1hcmsgdGhpcyBjb21wb25lbnQgd2l0aCAkZHluYW1pYy1zbG90cyBpbiB0aGUgYCArXHJcbiAgICAgICAgICAgIGBwYXJlbnQgdGVtcGxhdGUuYCk7XHJcbiAgICAgICAgc2xvdCA9ICgpID0+IFtdO1xyXG4gICAgfVxyXG4gICAgLy8gYSBjb21waWxlZCBzbG90IGRpc2FibGVzIGJsb2NrIHRyYWNraW5nIGJ5IGRlZmF1bHQgdG8gYXZvaWQgbWFudWFsXHJcbiAgICAvLyBpbnZvY2F0aW9uIGludGVyZmVyaW5nIHdpdGggdGVtcGxhdGUtYmFzZWQgYmxvY2sgdHJhY2tpbmcsIGJ1dCBpblxyXG4gICAgLy8gYHJlbmRlclNsb3RgIHdlIGNhbiBiZSBzdXJlIHRoYXQgaXQncyB0ZW1wbGF0ZS1iYXNlZCBzbyB3ZSBjYW4gZm9yY2VcclxuICAgIC8vIGVuYWJsZSBpdC5cclxuICAgIGlmIChzbG90ICYmIHNsb3QuX2MpIHtcclxuICAgICAgICBzbG90Ll9kID0gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBvcGVuQmxvY2soKTtcclxuICAgIGNvbnN0IHZhbGlkU2xvdENvbnRlbnQgPSBzbG90ICYmIGVuc3VyZVZhbGlkVk5vZGUoc2xvdChwcm9wcykpO1xyXG4gICAgY29uc3QgcmVuZGVyZWQgPSBjcmVhdGVCbG9jayhGcmFnbWVudCwgeyBrZXk6IHByb3BzLmtleSB8fCBgXyR7bmFtZX1gIH0sIHZhbGlkU2xvdENvbnRlbnQgfHwgKGZhbGxiYWNrID8gZmFsbGJhY2soKSA6IFtdKSwgdmFsaWRTbG90Q29udGVudCAmJiBzbG90cy5fID09PSAxIC8qIFNUQUJMRSAqL1xyXG4gICAgICAgID8gNjQgLyogU1RBQkxFX0ZSQUdNRU5UICovXHJcbiAgICAgICAgOiAtMiAvKiBCQUlMICovKTtcclxuICAgIGlmICghbm9TbG90dGVkICYmIHJlbmRlcmVkLnNjb3BlSWQpIHtcclxuICAgICAgICByZW5kZXJlZC5zbG90U2NvcGVJZHMgPSBbcmVuZGVyZWQuc2NvcGVJZCArICctcyddO1xyXG4gICAgfVxyXG4gICAgaWYgKHNsb3QgJiYgc2xvdC5fYykge1xyXG4gICAgICAgIHNsb3QuX2QgPSB0cnVlO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHJlbmRlcmVkO1xyXG59XHJcbmZ1bmN0aW9uIGVuc3VyZVZhbGlkVk5vZGUodm5vZGVzKSB7XHJcbiAgICByZXR1cm4gdm5vZGVzLnNvbWUoY2hpbGQgPT4ge1xyXG4gICAgICAgIGlmICghaXNWTm9kZShjaGlsZCkpXHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIGlmIChjaGlsZC50eXBlID09PSBDb21tZW50KVxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgaWYgKGNoaWxkLnR5cGUgPT09IEZyYWdtZW50ICYmXHJcbiAgICAgICAgICAgICFlbnN1cmVWYWxpZFZOb2RlKGNoaWxkLmNoaWxkcmVuKSlcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfSlcclxuICAgICAgICA/IHZub2Rlc1xyXG4gICAgICAgIDogbnVsbDtcclxufVxuXG4vKipcclxuICogRm9yIHByZWZpeGluZyBrZXlzIGluIHYtb249XCJvYmpcIiB3aXRoIFwib25cIlxyXG4gKiBAcHJpdmF0ZVxyXG4gKi9cclxuZnVuY3Rpb24gdG9IYW5kbGVycyhvYmopIHtcclxuICAgIGNvbnN0IHJldCA9IHt9O1xyXG4gICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiAhaXNPYmplY3Qob2JqKSkge1xyXG4gICAgICAgIHdhcm4oYHYtb24gd2l0aCBubyBhcmd1bWVudCBleHBlY3RzIGFuIG9iamVjdCB2YWx1ZS5gKTtcclxuICAgICAgICByZXR1cm4gcmV0O1xyXG4gICAgfVxyXG4gICAgZm9yIChjb25zdCBrZXkgaW4gb2JqKSB7XHJcbiAgICAgICAgcmV0W3RvSGFuZGxlcktleShrZXkpXSA9IG9ialtrZXldO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHJldDtcclxufVxuXG4vKipcclxuICogIzI0MzcgSW4gVnVlIDMsIGZ1bmN0aW9uYWwgY29tcG9uZW50cyBkbyBub3QgaGF2ZSBhIHB1YmxpYyBpbnN0YW5jZSBwcm94eSBidXRcclxuICogdGhleSBleGlzdCBpbiB0aGUgaW50ZXJuYWwgcGFyZW50IGNoYWluLiBGb3IgY29kZSB0aGF0IHJlbGllcyBvbiB0cmF2ZXJzaW5nXHJcbiAqIHB1YmxpYyAkcGFyZW50IGNoYWlucywgc2tpcCBmdW5jdGlvbmFsIG9uZXMgYW5kIGdvIHRvIHRoZSBwYXJlbnQgaW5zdGVhZC5cclxuICovXHJcbmNvbnN0IGdldFB1YmxpY0luc3RhbmNlID0gKGkpID0+IHtcclxuICAgIGlmICghaSlcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIGlmIChpc1N0YXRlZnVsQ29tcG9uZW50KGkpKVxyXG4gICAgICAgIHJldHVybiBnZXRFeHBvc2VQcm94eShpKSB8fCBpLnByb3h5O1xyXG4gICAgcmV0dXJuIGdldFB1YmxpY0luc3RhbmNlKGkucGFyZW50KTtcclxufTtcclxuY29uc3QgcHVibGljUHJvcGVydGllc01hcCA9IFxyXG4vLyBNb3ZlIFBVUkUgbWFya2VyIHRvIG5ldyBsaW5lIHRvIHdvcmthcm91bmQgY29tcGlsZXIgZGlzY2FyZGluZyBpdFxyXG4vLyBkdWUgdG8gdHlwZSBhbm5vdGF0aW9uXHJcbi8qI19fUFVSRV9fKi8gZXh0ZW5kKE9iamVjdC5jcmVhdGUobnVsbCksIHtcclxuICAgICQ6IGkgPT4gaSxcclxuICAgICRlbDogaSA9PiBpLnZub2RlLmVsLFxyXG4gICAgJGRhdGE6IGkgPT4gaS5kYXRhLFxyXG4gICAgJHByb3BzOiBpID0+ICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgPyBzaGFsbG93UmVhZG9ubHkoaS5wcm9wcykgOiBpLnByb3BzKSxcclxuICAgICRhdHRyczogaSA9PiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpID8gc2hhbGxvd1JlYWRvbmx5KGkuYXR0cnMpIDogaS5hdHRycyksXHJcbiAgICAkc2xvdHM6IGkgPT4gKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSA/IHNoYWxsb3dSZWFkb25seShpLnNsb3RzKSA6IGkuc2xvdHMpLFxyXG4gICAgJHJlZnM6IGkgPT4gKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSA/IHNoYWxsb3dSZWFkb25seShpLnJlZnMpIDogaS5yZWZzKSxcclxuICAgICRwYXJlbnQ6IGkgPT4gZ2V0UHVibGljSW5zdGFuY2UoaS5wYXJlbnQpLFxyXG4gICAgJHJvb3Q6IGkgPT4gZ2V0UHVibGljSW5zdGFuY2UoaS5yb290KSxcclxuICAgICRlbWl0OiBpID0+IGkuZW1pdCxcclxuICAgICRvcHRpb25zOiBpID0+IChfX1ZVRV9PUFRJT05TX0FQSV9fID8gcmVzb2x2ZU1lcmdlZE9wdGlvbnMoaSkgOiBpLnR5cGUpLFxyXG4gICAgJGZvcmNlVXBkYXRlOiBpID0+ICgpID0+IHF1ZXVlSm9iKGkudXBkYXRlKSxcclxuICAgICRuZXh0VGljazogaSA9PiBuZXh0VGljay5iaW5kKGkucHJveHkpLFxyXG4gICAgJHdhdGNoOiBpID0+IChfX1ZVRV9PUFRJT05TX0FQSV9fID8gaW5zdGFuY2VXYXRjaC5iaW5kKGkpIDogTk9PUClcclxufSk7XHJcbmNvbnN0IFB1YmxpY0luc3RhbmNlUHJveHlIYW5kbGVycyA9IHtcclxuICAgIGdldCh7IF86IGluc3RhbmNlIH0sIGtleSkge1xyXG4gICAgICAgIGNvbnN0IHsgY3R4LCBzZXR1cFN0YXRlLCBkYXRhLCBwcm9wcywgYWNjZXNzQ2FjaGUsIHR5cGUsIGFwcENvbnRleHQgfSA9IGluc3RhbmNlO1xyXG4gICAgICAgIC8vIGZvciBpbnRlcm5hbCBmb3JtYXR0ZXJzIHRvIGtub3cgdGhhdCB0aGlzIGlzIGEgVnVlIGluc3RhbmNlXHJcbiAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiBrZXkgPT09ICdfX2lzVnVlJykge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gcHJpb3JpdGl6ZSA8c2NyaXB0IHNldHVwPiBiaW5kaW5ncyBkdXJpbmcgZGV2LlxyXG4gICAgICAgIC8vIHRoaXMgYWxsb3dzIGV2ZW4gcHJvcGVydGllcyB0aGF0IHN0YXJ0IHdpdGggXyBvciAkIHRvIGJlIHVzZWQgLSBzbyB0aGF0XHJcbiAgICAgICAgLy8gaXQgYWxpZ25zIHdpdGggdGhlIHByb2R1Y3Rpb24gYmVoYXZpb3Igd2hlcmUgdGhlIHJlbmRlciBmbiBpcyBpbmxpbmVkIGFuZFxyXG4gICAgICAgIC8vIGluZGVlZCBoYXMgYWNjZXNzIHRvIGFsbCBkZWNsYXJlZCB2YXJpYWJsZXMuXHJcbiAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJlxyXG4gICAgICAgICAgICBzZXR1cFN0YXRlICE9PSBFTVBUWV9PQkogJiZcclxuICAgICAgICAgICAgc2V0dXBTdGF0ZS5fX2lzU2NyaXB0U2V0dXAgJiZcclxuICAgICAgICAgICAgaGFzT3duKHNldHVwU3RhdGUsIGtleSkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHNldHVwU3RhdGVba2V5XTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gZGF0YSAvIHByb3BzIC8gY3R4XHJcbiAgICAgICAgLy8gVGhpcyBnZXR0ZXIgZ2V0cyBjYWxsZWQgZm9yIGV2ZXJ5IHByb3BlcnR5IGFjY2VzcyBvbiB0aGUgcmVuZGVyIGNvbnRleHRcclxuICAgICAgICAvLyBkdXJpbmcgcmVuZGVyIGFuZCBpcyBhIG1ham9yIGhvdHNwb3QuIFRoZSBtb3N0IGV4cGVuc2l2ZSBwYXJ0IG9mIHRoaXNcclxuICAgICAgICAvLyBpcyB0aGUgbXVsdGlwbGUgaGFzT3duKCkgY2FsbHMuIEl0J3MgbXVjaCBmYXN0ZXIgdG8gZG8gYSBzaW1wbGUgcHJvcGVydHlcclxuICAgICAgICAvLyBhY2Nlc3Mgb24gYSBwbGFpbiBvYmplY3QsIHNvIHdlIHVzZSBhbiBhY2Nlc3NDYWNoZSBvYmplY3QgKHdpdGggbnVsbFxyXG4gICAgICAgIC8vIHByb3RvdHlwZSkgdG8gbWVtb2l6ZSB3aGF0IGFjY2VzcyB0eXBlIGEga2V5IGNvcnJlc3BvbmRzIHRvLlxyXG4gICAgICAgIGxldCBub3JtYWxpemVkUHJvcHM7XHJcbiAgICAgICAgaWYgKGtleVswXSAhPT0gJyQnKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG4gPSBhY2Nlc3NDYWNoZVtrZXldO1xyXG4gICAgICAgICAgICBpZiAobiAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKG4pIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDEgLyogU0VUVVAgKi86XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzZXR1cFN0YXRlW2tleV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyIC8qIERBVEEgKi86XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkYXRhW2tleV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0IC8qIENPTlRFWFQgKi86XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjdHhba2V5XTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDMgLyogUFJPUFMgKi86XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBwcm9wc1trZXldO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGRlZmF1bHQ6IGp1c3QgZmFsbHRocm91Z2hcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChzZXR1cFN0YXRlICE9PSBFTVBUWV9PQkogJiYgaGFzT3duKHNldHVwU3RhdGUsIGtleSkpIHtcclxuICAgICAgICAgICAgICAgIGFjY2Vzc0NhY2hlW2tleV0gPSAxIC8qIFNFVFVQICovO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHNldHVwU3RhdGVba2V5XTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChkYXRhICE9PSBFTVBUWV9PQkogJiYgaGFzT3duKGRhdGEsIGtleSkpIHtcclxuICAgICAgICAgICAgICAgIGFjY2Vzc0NhY2hlW2tleV0gPSAyIC8qIERBVEEgKi87XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZGF0YVtrZXldO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKFxyXG4gICAgICAgICAgICAvLyBvbmx5IGNhY2hlIG90aGVyIHByb3BlcnRpZXMgd2hlbiBpbnN0YW5jZSBoYXMgZGVjbGFyZWQgKHRodXMgc3RhYmxlKVxyXG4gICAgICAgICAgICAvLyBwcm9wc1xyXG4gICAgICAgICAgICAobm9ybWFsaXplZFByb3BzID0gaW5zdGFuY2UucHJvcHNPcHRpb25zWzBdKSAmJlxyXG4gICAgICAgICAgICAgICAgaGFzT3duKG5vcm1hbGl6ZWRQcm9wcywga2V5KSkge1xyXG4gICAgICAgICAgICAgICAgYWNjZXNzQ2FjaGVba2V5XSA9IDMgLyogUFJPUFMgKi87XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcHJvcHNba2V5XTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChjdHggIT09IEVNUFRZX09CSiAmJiBoYXNPd24oY3R4LCBrZXkpKSB7XHJcbiAgICAgICAgICAgICAgICBhY2Nlc3NDYWNoZVtrZXldID0gNCAvKiBDT05URVhUICovO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGN0eFtrZXldO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKCFfX1ZVRV9PUFRJT05TX0FQSV9fIHx8IHNob3VsZENhY2hlQWNjZXNzKSB7XHJcbiAgICAgICAgICAgICAgICBhY2Nlc3NDYWNoZVtrZXldID0gMCAvKiBPVEhFUiAqLztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBwdWJsaWNHZXR0ZXIgPSBwdWJsaWNQcm9wZXJ0aWVzTWFwW2tleV07XHJcbiAgICAgICAgbGV0IGNzc01vZHVsZSwgZ2xvYmFsUHJvcGVydGllcztcclxuICAgICAgICAvLyBwdWJsaWMgJHh4eCBwcm9wZXJ0aWVzXHJcbiAgICAgICAgaWYgKHB1YmxpY0dldHRlcikge1xyXG4gICAgICAgICAgICBpZiAoa2V5ID09PSAnJGF0dHJzJykge1xyXG4gICAgICAgICAgICAgICAgdHJhY2soaW5zdGFuY2UsIFwiZ2V0XCIgLyogR0VUICovLCBrZXkpO1xyXG4gICAgICAgICAgICAgICAgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmIG1hcmtBdHRyc0FjY2Vzc2VkKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHB1YmxpY0dldHRlcihpbnN0YW5jZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKFxyXG4gICAgICAgIC8vIGNzcyBtb2R1bGUgKGluamVjdGVkIGJ5IHZ1ZS1sb2FkZXIpXHJcbiAgICAgICAgKGNzc01vZHVsZSA9IHR5cGUuX19jc3NNb2R1bGVzKSAmJlxyXG4gICAgICAgICAgICAoY3NzTW9kdWxlID0gY3NzTW9kdWxlW2tleV0pKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBjc3NNb2R1bGU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGN0eCAhPT0gRU1QVFlfT0JKICYmIGhhc093bihjdHgsIGtleSkpIHtcclxuICAgICAgICAgICAgLy8gdXNlciBtYXkgc2V0IGN1c3RvbSBwcm9wZXJ0aWVzIHRvIGB0aGlzYCB0aGF0IHN0YXJ0IHdpdGggYCRgXHJcbiAgICAgICAgICAgIGFjY2Vzc0NhY2hlW2tleV0gPSA0IC8qIENPTlRFWFQgKi87XHJcbiAgICAgICAgICAgIHJldHVybiBjdHhba2V5XTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoXHJcbiAgICAgICAgLy8gZ2xvYmFsIHByb3BlcnRpZXNcclxuICAgICAgICAoKGdsb2JhbFByb3BlcnRpZXMgPSBhcHBDb250ZXh0LmNvbmZpZy5nbG9iYWxQcm9wZXJ0aWVzKSxcclxuICAgICAgICAgICAgaGFzT3duKGdsb2JhbFByb3BlcnRpZXMsIGtleSkpKSB7XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBnbG9iYWxQcm9wZXJ0aWVzW2tleV07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmXHJcbiAgICAgICAgICAgIGN1cnJlbnRSZW5kZXJpbmdJbnN0YW5jZSAmJlxyXG4gICAgICAgICAgICAoIWlzU3RyaW5nKGtleSkgfHxcclxuICAgICAgICAgICAgICAgIC8vICMxMDkxIGF2b2lkIGludGVybmFsIGlzUmVmL2lzVk5vZGUgY2hlY2tzIG9uIGNvbXBvbmVudCBpbnN0YW5jZSBsZWFkaW5nXHJcbiAgICAgICAgICAgICAgICAvLyB0byBpbmZpbml0ZSB3YXJuaW5nIGxvb3BcclxuICAgICAgICAgICAgICAgIGtleS5pbmRleE9mKCdfX3YnKSAhPT0gMCkpIHtcclxuICAgICAgICAgICAgaWYgKGRhdGEgIT09IEVNUFRZX09CSiAmJlxyXG4gICAgICAgICAgICAgICAgKGtleVswXSA9PT0gJyQnIHx8IGtleVswXSA9PT0gJ18nKSAmJlxyXG4gICAgICAgICAgICAgICAgaGFzT3duKGRhdGEsIGtleSkpIHtcclxuICAgICAgICAgICAgICAgIHdhcm4oYFByb3BlcnR5ICR7SlNPTi5zdHJpbmdpZnkoa2V5KX0gbXVzdCBiZSBhY2Nlc3NlZCB2aWEgJGRhdGEgYmVjYXVzZSBpdCBzdGFydHMgd2l0aCBhIHJlc2VydmVkIGAgK1xyXG4gICAgICAgICAgICAgICAgICAgIGBjaGFyYWN0ZXIgKFwiJFwiIG9yIFwiX1wiKSBhbmQgaXMgbm90IHByb3hpZWQgb24gdGhlIHJlbmRlciBjb250ZXh0LmApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKGluc3RhbmNlID09PSBjdXJyZW50UmVuZGVyaW5nSW5zdGFuY2UpIHtcclxuICAgICAgICAgICAgICAgIHdhcm4oYFByb3BlcnR5ICR7SlNPTi5zdHJpbmdpZnkoa2V5KX0gd2FzIGFjY2Vzc2VkIGR1cmluZyByZW5kZXIgYCArXHJcbiAgICAgICAgICAgICAgICAgICAgYGJ1dCBpcyBub3QgZGVmaW5lZCBvbiBpbnN0YW5jZS5gKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICBzZXQoeyBfOiBpbnN0YW5jZSB9LCBrZXksIHZhbHVlKSB7XHJcbiAgICAgICAgY29uc3QgeyBkYXRhLCBzZXR1cFN0YXRlLCBjdHggfSA9IGluc3RhbmNlO1xyXG4gICAgICAgIGlmIChzZXR1cFN0YXRlICE9PSBFTVBUWV9PQkogJiYgaGFzT3duKHNldHVwU3RhdGUsIGtleSkpIHtcclxuICAgICAgICAgICAgc2V0dXBTdGF0ZVtrZXldID0gdmFsdWU7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChkYXRhICE9PSBFTVBUWV9PQkogJiYgaGFzT3duKGRhdGEsIGtleSkpIHtcclxuICAgICAgICAgICAgZGF0YVtrZXldID0gdmFsdWU7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChoYXNPd24oaW5zdGFuY2UucHJvcHMsIGtleSkpIHtcclxuICAgICAgICAgICAgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmXHJcbiAgICAgICAgICAgICAgICB3YXJuKGBBdHRlbXB0aW5nIHRvIG11dGF0ZSBwcm9wIFwiJHtrZXl9XCIuIFByb3BzIGFyZSByZWFkb25seS5gLCBpbnN0YW5jZSk7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGtleVswXSA9PT0gJyQnICYmIGtleS5zbGljZSgxKSBpbiBpbnN0YW5jZSkge1xyXG4gICAgICAgICAgICAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiZcclxuICAgICAgICAgICAgICAgIHdhcm4oYEF0dGVtcHRpbmcgdG8gbXV0YXRlIHB1YmxpYyBwcm9wZXJ0eSBcIiR7a2V5fVwiLiBgICtcclxuICAgICAgICAgICAgICAgICAgICBgUHJvcGVydGllcyBzdGFydGluZyB3aXRoICQgYXJlIHJlc2VydmVkIGFuZCByZWFkb25seS5gLCBpbnN0YW5jZSk7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYga2V5IGluIGluc3RhbmNlLmFwcENvbnRleHQuY29uZmlnLmdsb2JhbFByb3BlcnRpZXMpIHtcclxuICAgICAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShjdHgsIGtleSwge1xyXG4gICAgICAgICAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGN0eFtrZXldID0gdmFsdWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9LFxyXG4gICAgaGFzKHsgXzogeyBkYXRhLCBzZXR1cFN0YXRlLCBhY2Nlc3NDYWNoZSwgY3R4LCBhcHBDb250ZXh0LCBwcm9wc09wdGlvbnMgfSB9LCBrZXkpIHtcclxuICAgICAgICBsZXQgbm9ybWFsaXplZFByb3BzO1xyXG4gICAgICAgIHJldHVybiAoISFhY2Nlc3NDYWNoZVtrZXldIHx8XHJcbiAgICAgICAgICAgIChkYXRhICE9PSBFTVBUWV9PQkogJiYgaGFzT3duKGRhdGEsIGtleSkpIHx8XHJcbiAgICAgICAgICAgIChzZXR1cFN0YXRlICE9PSBFTVBUWV9PQkogJiYgaGFzT3duKHNldHVwU3RhdGUsIGtleSkpIHx8XHJcbiAgICAgICAgICAgICgobm9ybWFsaXplZFByb3BzID0gcHJvcHNPcHRpb25zWzBdKSAmJiBoYXNPd24obm9ybWFsaXplZFByb3BzLCBrZXkpKSB8fFxyXG4gICAgICAgICAgICBoYXNPd24oY3R4LCBrZXkpIHx8XHJcbiAgICAgICAgICAgIGhhc093bihwdWJsaWNQcm9wZXJ0aWVzTWFwLCBrZXkpIHx8XHJcbiAgICAgICAgICAgIGhhc093bihhcHBDb250ZXh0LmNvbmZpZy5nbG9iYWxQcm9wZXJ0aWVzLCBrZXkpKTtcclxuICAgIH0sXHJcbiAgICBkZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgZGVzY3JpcHRvcikge1xyXG4gICAgICAgIGlmIChkZXNjcmlwdG9yLmdldCAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgIC8vIGludmFsaWRhdGUga2V5IGNhY2hlIG9mIGEgZ2V0dGVyIGJhc2VkIHByb3BlcnR5ICM1NDE3XHJcbiAgICAgICAgICAgIHRhcmdldC5fLmFjY2Vzc0NhY2hlW2tleV0gPSAwO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChoYXNPd24oZGVzY3JpcHRvciwgJ3ZhbHVlJykpIHtcclxuICAgICAgICAgICAgdGhpcy5zZXQodGFyZ2V0LCBrZXksIGRlc2NyaXB0b3IudmFsdWUsIG51bGwpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gUmVmbGVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgZGVzY3JpcHRvcik7XHJcbiAgICB9XHJcbn07XHJcbmlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgIWZhbHNlKSB7XHJcbiAgICBQdWJsaWNJbnN0YW5jZVByb3h5SGFuZGxlcnMub3duS2V5cyA9ICh0YXJnZXQpID0+IHtcclxuICAgICAgICB3YXJuKGBBdm9pZCBhcHAgbG9naWMgdGhhdCByZWxpZXMgb24gZW51bWVyYXRpbmcga2V5cyBvbiBhIGNvbXBvbmVudCBpbnN0YW5jZS4gYCArXHJcbiAgICAgICAgICAgIGBUaGUga2V5cyB3aWxsIGJlIGVtcHR5IGluIHByb2R1Y3Rpb24gbW9kZSB0byBhdm9pZCBwZXJmb3JtYW5jZSBvdmVyaGVhZC5gKTtcclxuICAgICAgICByZXR1cm4gUmVmbGVjdC5vd25LZXlzKHRhcmdldCk7XHJcbiAgICB9O1xyXG59XHJcbmNvbnN0IFJ1bnRpbWVDb21waWxlZFB1YmxpY0luc3RhbmNlUHJveHlIYW5kbGVycyA9IC8qI19fUFVSRV9fKi8gZXh0ZW5kKHt9LCBQdWJsaWNJbnN0YW5jZVByb3h5SGFuZGxlcnMsIHtcclxuICAgIGdldCh0YXJnZXQsIGtleSkge1xyXG4gICAgICAgIC8vIGZhc3QgcGF0aCBmb3IgdW5zY29wYWJsZXMgd2hlbiB1c2luZyBgd2l0aGAgYmxvY2tcclxuICAgICAgICBpZiAoa2V5ID09PSBTeW1ib2wudW5zY29wYWJsZXMpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gUHVibGljSW5zdGFuY2VQcm94eUhhbmRsZXJzLmdldCh0YXJnZXQsIGtleSwgdGFyZ2V0KTtcclxuICAgIH0sXHJcbiAgICBoYXMoXywga2V5KSB7XHJcbiAgICAgICAgY29uc3QgaGFzID0ga2V5WzBdICE9PSAnXycgJiYgIWlzR2xvYmFsbHlXaGl0ZWxpc3RlZChrZXkpO1xyXG4gICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgIWhhcyAmJiBQdWJsaWNJbnN0YW5jZVByb3h5SGFuZGxlcnMuaGFzKF8sIGtleSkpIHtcclxuICAgICAgICAgICAgd2FybihgUHJvcGVydHkgJHtKU09OLnN0cmluZ2lmeShrZXkpfSBzaG91bGQgbm90IHN0YXJ0IHdpdGggXyB3aGljaCBpcyBhIHJlc2VydmVkIHByZWZpeCBmb3IgVnVlIGludGVybmFscy5gKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGhhcztcclxuICAgIH1cclxufSk7XHJcbi8vIGRldiBvbmx5XHJcbi8vIEluIGRldiBtb2RlLCB0aGUgcHJveHkgdGFyZ2V0IGV4cG9zZXMgdGhlIHNhbWUgcHJvcGVydGllcyBhcyBzZWVuIG9uIGB0aGlzYFxyXG4vLyBmb3IgZWFzaWVyIGNvbnNvbGUgaW5zcGVjdGlvbi4gSW4gcHJvZCBtb2RlIGl0IHdpbGwgYmUgYW4gZW1wdHkgb2JqZWN0IHNvXHJcbi8vIHRoZXNlIHByb3BlcnRpZXMgZGVmaW5pdGlvbnMgY2FuIGJlIHNraXBwZWQuXHJcbmZ1bmN0aW9uIGNyZWF0ZURldlJlbmRlckNvbnRleHQoaW5zdGFuY2UpIHtcclxuICAgIGNvbnN0IHRhcmdldCA9IHt9O1xyXG4gICAgLy8gZXhwb3NlIGludGVybmFsIGluc3RhbmNlIGZvciBwcm94eSBoYW5kbGVyc1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgYF9gLCB7XHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxyXG4gICAgICAgIGdldDogKCkgPT4gaW5zdGFuY2VcclxuICAgIH0pO1xyXG4gICAgLy8gZXhwb3NlIHB1YmxpYyBwcm9wZXJ0aWVzXHJcbiAgICBPYmplY3Qua2V5cyhwdWJsaWNQcm9wZXJ0aWVzTWFwKS5mb3JFYWNoKGtleSA9PiB7XHJcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCB7XHJcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcclxuICAgICAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXHJcbiAgICAgICAgICAgIGdldDogKCkgPT4gcHVibGljUHJvcGVydGllc01hcFtrZXldKGluc3RhbmNlKSxcclxuICAgICAgICAgICAgLy8gaW50ZXJjZXB0ZWQgYnkgdGhlIHByb3h5IHNvIG5vIG5lZWQgZm9yIGltcGxlbWVudGF0aW9uLFxyXG4gICAgICAgICAgICAvLyBidXQgbmVlZGVkIHRvIHByZXZlbnQgc2V0IGVycm9yc1xyXG4gICAgICAgICAgICBzZXQ6IE5PT1BcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIHRhcmdldDtcclxufVxyXG4vLyBkZXYgb25seVxyXG5mdW5jdGlvbiBleHBvc2VQcm9wc09uUmVuZGVyQ29udGV4dChpbnN0YW5jZSkge1xyXG4gICAgY29uc3QgeyBjdHgsIHByb3BzT3B0aW9uczogW3Byb3BzT3B0aW9uc10gfSA9IGluc3RhbmNlO1xyXG4gICAgaWYgKHByb3BzT3B0aW9ucykge1xyXG4gICAgICAgIE9iamVjdC5rZXlzKHByb3BzT3B0aW9ucykuZm9yRWFjaChrZXkgPT4ge1xyXG4gICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoY3R4LCBrZXksIHtcclxuICAgICAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBnZXQ6ICgpID0+IGluc3RhbmNlLnByb3BzW2tleV0sXHJcbiAgICAgICAgICAgICAgICBzZXQ6IE5PT1BcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuLy8gZGV2IG9ubHlcclxuZnVuY3Rpb24gZXhwb3NlU2V0dXBTdGF0ZU9uUmVuZGVyQ29udGV4dChpbnN0YW5jZSkge1xyXG4gICAgY29uc3QgeyBjdHgsIHNldHVwU3RhdGUgfSA9IGluc3RhbmNlO1xyXG4gICAgT2JqZWN0LmtleXModG9SYXcoc2V0dXBTdGF0ZSkpLmZvckVhY2goa2V5ID0+IHtcclxuICAgICAgICBpZiAoIXNldHVwU3RhdGUuX19pc1NjcmlwdFNldHVwKSB7XHJcbiAgICAgICAgICAgIGlmIChrZXlbMF0gPT09ICckJyB8fCBrZXlbMF0gPT09ICdfJykge1xyXG4gICAgICAgICAgICAgICAgd2Fybihgc2V0dXAoKSByZXR1cm4gcHJvcGVydHkgJHtKU09OLnN0cmluZ2lmeShrZXkpfSBzaG91bGQgbm90IHN0YXJ0IHdpdGggXCIkXCIgb3IgXCJfXCIgYCArXHJcbiAgICAgICAgICAgICAgICAgICAgYHdoaWNoIGFyZSByZXNlcnZlZCBwcmVmaXhlcyBmb3IgVnVlIGludGVybmFscy5gKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoY3R4LCBrZXksIHtcclxuICAgICAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBnZXQ6ICgpID0+IHNldHVwU3RhdGVba2V5XSxcclxuICAgICAgICAgICAgICAgIHNldDogTk9PUFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufVxuXG5jb25zdCBlbXB0eUFwcENvbnRleHQgPSBjcmVhdGVBcHBDb250ZXh0KCk7XHJcbmxldCB1aWQkMSA9IDA7XHJcbmZ1bmN0aW9uIGNyZWF0ZUNvbXBvbmVudEluc3RhbmNlKHZub2RlLCBwYXJlbnQsIHN1c3BlbnNlKSB7XHJcbiAgICBjb25zdCB0eXBlID0gdm5vZGUudHlwZTtcclxuICAgIC8vIGluaGVyaXQgcGFyZW50IGFwcCBjb250ZXh0IC0gb3IgLSBpZiByb290LCBhZG9wdCBmcm9tIHJvb3Qgdm5vZGVcclxuICAgIGNvbnN0IGFwcENvbnRleHQgPSAocGFyZW50ID8gcGFyZW50LmFwcENvbnRleHQgOiB2bm9kZS5hcHBDb250ZXh0KSB8fCBlbXB0eUFwcENvbnRleHQ7XHJcbiAgICBjb25zdCBpbnN0YW5jZSA9IHtcclxuICAgICAgICB1aWQ6IHVpZCQxKyssXHJcbiAgICAgICAgdm5vZGUsXHJcbiAgICAgICAgdHlwZSxcclxuICAgICAgICBwYXJlbnQsXHJcbiAgICAgICAgYXBwQ29udGV4dCxcclxuICAgICAgICByb290OiBudWxsLFxyXG4gICAgICAgIG5leHQ6IG51bGwsXHJcbiAgICAgICAgc3ViVHJlZTogbnVsbCxcclxuICAgICAgICBlZmZlY3Q6IG51bGwsXHJcbiAgICAgICAgdXBkYXRlOiBudWxsLFxyXG4gICAgICAgIHNjb3BlOiBuZXcgRWZmZWN0U2NvcGUodHJ1ZSAvKiBkZXRhY2hlZCAqLyksXHJcbiAgICAgICAgcmVuZGVyOiBudWxsLFxyXG4gICAgICAgIHByb3h5OiBudWxsLFxyXG4gICAgICAgIGV4cG9zZWQ6IG51bGwsXHJcbiAgICAgICAgZXhwb3NlUHJveHk6IG51bGwsXHJcbiAgICAgICAgd2l0aFByb3h5OiBudWxsLFxyXG4gICAgICAgIHByb3ZpZGVzOiBwYXJlbnQgPyBwYXJlbnQucHJvdmlkZXMgOiBPYmplY3QuY3JlYXRlKGFwcENvbnRleHQucHJvdmlkZXMpLFxyXG4gICAgICAgIGFjY2Vzc0NhY2hlOiBudWxsLFxyXG4gICAgICAgIHJlbmRlckNhY2hlOiBbXSxcclxuICAgICAgICAvLyBsb2NhbCByZXNvdmxlZCBhc3NldHNcclxuICAgICAgICBjb21wb25lbnRzOiBudWxsLFxyXG4gICAgICAgIGRpcmVjdGl2ZXM6IG51bGwsXHJcbiAgICAgICAgLy8gcmVzb2x2ZWQgcHJvcHMgYW5kIGVtaXRzIG9wdGlvbnNcclxuICAgICAgICBwcm9wc09wdGlvbnM6IG5vcm1hbGl6ZVByb3BzT3B0aW9ucyh0eXBlLCBhcHBDb250ZXh0KSxcclxuICAgICAgICBlbWl0c09wdGlvbnM6IG5vcm1hbGl6ZUVtaXRzT3B0aW9ucyh0eXBlLCBhcHBDb250ZXh0KSxcclxuICAgICAgICAvLyBlbWl0XHJcbiAgICAgICAgZW1pdDogbnVsbCxcclxuICAgICAgICBlbWl0dGVkOiBudWxsLFxyXG4gICAgICAgIC8vIHByb3BzIGRlZmF1bHQgdmFsdWVcclxuICAgICAgICBwcm9wc0RlZmF1bHRzOiBFTVBUWV9PQkosXHJcbiAgICAgICAgLy8gaW5oZXJpdEF0dHJzXHJcbiAgICAgICAgaW5oZXJpdEF0dHJzOiB0eXBlLmluaGVyaXRBdHRycyxcclxuICAgICAgICAvLyBzdGF0ZVxyXG4gICAgICAgIGN0eDogRU1QVFlfT0JKLFxyXG4gICAgICAgIGRhdGE6IEVNUFRZX09CSixcclxuICAgICAgICBwcm9wczogRU1QVFlfT0JKLFxyXG4gICAgICAgIGF0dHJzOiBFTVBUWV9PQkosXHJcbiAgICAgICAgc2xvdHM6IEVNUFRZX09CSixcclxuICAgICAgICByZWZzOiBFTVBUWV9PQkosXHJcbiAgICAgICAgc2V0dXBTdGF0ZTogRU1QVFlfT0JKLFxyXG4gICAgICAgIHNldHVwQ29udGV4dDogbnVsbCxcclxuICAgICAgICAvLyBzdXNwZW5zZSByZWxhdGVkXHJcbiAgICAgICAgc3VzcGVuc2UsXHJcbiAgICAgICAgc3VzcGVuc2VJZDogc3VzcGVuc2UgPyBzdXNwZW5zZS5wZW5kaW5nSWQgOiAwLFxyXG4gICAgICAgIGFzeW5jRGVwOiBudWxsLFxyXG4gICAgICAgIGFzeW5jUmVzb2x2ZWQ6IGZhbHNlLFxyXG4gICAgICAgIC8vIGxpZmVjeWNsZSBob29rc1xyXG4gICAgICAgIC8vIG5vdCB1c2luZyBlbnVtcyBoZXJlIGJlY2F1c2UgaXQgcmVzdWx0cyBpbiBjb21wdXRlZCBwcm9wZXJ0aWVzXHJcbiAgICAgICAgaXNNb3VudGVkOiBmYWxzZSxcclxuICAgICAgICBpc1VubW91bnRlZDogZmFsc2UsXHJcbiAgICAgICAgaXNEZWFjdGl2YXRlZDogZmFsc2UsXHJcbiAgICAgICAgYmM6IG51bGwsXHJcbiAgICAgICAgYzogbnVsbCxcclxuICAgICAgICBibTogbnVsbCxcclxuICAgICAgICBtOiBudWxsLFxyXG4gICAgICAgIGJ1OiBudWxsLFxyXG4gICAgICAgIHU6IG51bGwsXHJcbiAgICAgICAgdW06IG51bGwsXHJcbiAgICAgICAgYnVtOiBudWxsLFxyXG4gICAgICAgIGRhOiBudWxsLFxyXG4gICAgICAgIGE6IG51bGwsXHJcbiAgICAgICAgcnRnOiBudWxsLFxyXG4gICAgICAgIHJ0YzogbnVsbCxcclxuICAgICAgICBlYzogbnVsbCxcclxuICAgICAgICBzcDogbnVsbFxyXG4gICAgfTtcclxuICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcclxuICAgICAgICBpbnN0YW5jZS5jdHggPSBjcmVhdGVEZXZSZW5kZXJDb250ZXh0KGluc3RhbmNlKTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIGluc3RhbmNlLmN0eCA9IHsgXzogaW5zdGFuY2UgfTtcclxuICAgIH1cclxuICAgIGluc3RhbmNlLnJvb3QgPSBwYXJlbnQgPyBwYXJlbnQucm9vdCA6IGluc3RhbmNlO1xyXG4gICAgaW5zdGFuY2UuZW1pdCA9IGVtaXQkMS5iaW5kKG51bGwsIGluc3RhbmNlKTtcclxuICAgIC8vIGFwcGx5IGN1c3RvbSBlbGVtZW50IHNwZWNpYWwgaGFuZGxpbmdcclxuICAgIGlmICh2bm9kZS5jZSkge1xyXG4gICAgICAgIHZub2RlLmNlKGluc3RhbmNlKTtcclxuICAgIH1cclxuICAgIHJldHVybiBpbnN0YW5jZTtcclxufVxyXG5sZXQgY3VycmVudEluc3RhbmNlID0gbnVsbDtcclxuY29uc3QgZ2V0Q3VycmVudEluc3RhbmNlID0gKCkgPT4gY3VycmVudEluc3RhbmNlIHx8IGN1cnJlbnRSZW5kZXJpbmdJbnN0YW5jZTtcclxuY29uc3Qgc2V0Q3VycmVudEluc3RhbmNlID0gKGluc3RhbmNlKSA9PiB7XHJcbiAgICBjdXJyZW50SW5zdGFuY2UgPSBpbnN0YW5jZTtcclxuICAgIGluc3RhbmNlLnNjb3BlLm9uKCk7XHJcbn07XHJcbmNvbnN0IHVuc2V0Q3VycmVudEluc3RhbmNlID0gKCkgPT4ge1xyXG4gICAgY3VycmVudEluc3RhbmNlICYmIGN1cnJlbnRJbnN0YW5jZS5zY29wZS5vZmYoKTtcclxuICAgIGN1cnJlbnRJbnN0YW5jZSA9IG51bGw7XHJcbn07XHJcbmNvbnN0IGlzQnVpbHRJblRhZyA9IC8qI19fUFVSRV9fKi8gbWFrZU1hcCgnc2xvdCxjb21wb25lbnQnKTtcclxuZnVuY3Rpb24gdmFsaWRhdGVDb21wb25lbnROYW1lKG5hbWUsIGNvbmZpZykge1xyXG4gICAgY29uc3QgYXBwSXNOYXRpdmVUYWcgPSBjb25maWcuaXNOYXRpdmVUYWcgfHwgTk87XHJcbiAgICBpZiAoaXNCdWlsdEluVGFnKG5hbWUpIHx8IGFwcElzTmF0aXZlVGFnKG5hbWUpKSB7XHJcbiAgICAgICAgd2FybignRG8gbm90IHVzZSBidWlsdC1pbiBvciByZXNlcnZlZCBIVE1MIGVsZW1lbnRzIGFzIGNvbXBvbmVudCBpZDogJyArIG5hbWUpO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIGlzU3RhdGVmdWxDb21wb25lbnQoaW5zdGFuY2UpIHtcclxuICAgIHJldHVybiBpbnN0YW5jZS52bm9kZS5zaGFwZUZsYWcgJiA0IC8qIFNUQVRFRlVMX0NPTVBPTkVOVCAqLztcclxufVxyXG5sZXQgaXNJblNTUkNvbXBvbmVudFNldHVwID0gZmFsc2U7XHJcbmZ1bmN0aW9uIHNldHVwQ29tcG9uZW50KGluc3RhbmNlLCBpc1NTUiA9IGZhbHNlKSB7XHJcbiAgICBpc0luU1NSQ29tcG9uZW50U2V0dXAgPSBpc1NTUjtcclxuICAgIGNvbnN0IHsgcHJvcHMsIGNoaWxkcmVuIH0gPSBpbnN0YW5jZS52bm9kZTtcclxuICAgIGNvbnN0IGlzU3RhdGVmdWwgPSBpc1N0YXRlZnVsQ29tcG9uZW50KGluc3RhbmNlKTtcclxuICAgIGluaXRQcm9wcyhpbnN0YW5jZSwgcHJvcHMsIGlzU3RhdGVmdWwsIGlzU1NSKTtcclxuICAgIGluaXRTbG90cyhpbnN0YW5jZSwgY2hpbGRyZW4pO1xyXG4gICAgY29uc3Qgc2V0dXBSZXN1bHQgPSBpc1N0YXRlZnVsXHJcbiAgICAgICAgPyBzZXR1cFN0YXRlZnVsQ29tcG9uZW50KGluc3RhbmNlLCBpc1NTUilcclxuICAgICAgICA6IHVuZGVmaW5lZDtcclxuICAgIGlzSW5TU1JDb21wb25lbnRTZXR1cCA9IGZhbHNlO1xyXG4gICAgcmV0dXJuIHNldHVwUmVzdWx0O1xyXG59XHJcbmZ1bmN0aW9uIHNldHVwU3RhdGVmdWxDb21wb25lbnQoaW5zdGFuY2UsIGlzU1NSKSB7XHJcbiAgICB2YXIgX2E7XHJcbiAgICBjb25zdCBDb21wb25lbnQgPSBpbnN0YW5jZS50eXBlO1xyXG4gICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xyXG4gICAgICAgIGlmIChDb21wb25lbnQubmFtZSkge1xyXG4gICAgICAgICAgICB2YWxpZGF0ZUNvbXBvbmVudE5hbWUoQ29tcG9uZW50Lm5hbWUsIGluc3RhbmNlLmFwcENvbnRleHQuY29uZmlnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKENvbXBvbmVudC5jb21wb25lbnRzKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG5hbWVzID0gT2JqZWN0LmtleXMoQ29tcG9uZW50LmNvbXBvbmVudHMpO1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG5hbWVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICB2YWxpZGF0ZUNvbXBvbmVudE5hbWUobmFtZXNbaV0sIGluc3RhbmNlLmFwcENvbnRleHQuY29uZmlnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoQ29tcG9uZW50LmRpcmVjdGl2ZXMpIHtcclxuICAgICAgICAgICAgY29uc3QgbmFtZXMgPSBPYmplY3Qua2V5cyhDb21wb25lbnQuZGlyZWN0aXZlcyk7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbmFtZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIHZhbGlkYXRlRGlyZWN0aXZlTmFtZShuYW1lc1tpXSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKENvbXBvbmVudC5jb21waWxlck9wdGlvbnMgJiYgaXNSdW50aW1lT25seSgpKSB7XHJcbiAgICAgICAgICAgIHdhcm4oYFwiY29tcGlsZXJPcHRpb25zXCIgaXMgb25seSBzdXBwb3J0ZWQgd2hlbiB1c2luZyBhIGJ1aWxkIG9mIFZ1ZSB0aGF0IGAgK1xyXG4gICAgICAgICAgICAgICAgYGluY2x1ZGVzIHRoZSBydW50aW1lIGNvbXBpbGVyLiBTaW5jZSB5b3UgYXJlIHVzaW5nIGEgcnVudGltZS1vbmx5IGAgK1xyXG4gICAgICAgICAgICAgICAgYGJ1aWxkLCB0aGUgb3B0aW9ucyBzaG91bGQgYmUgcGFzc2VkIHZpYSB5b3VyIGJ1aWxkIHRvb2wgY29uZmlnIGluc3RlYWQuYCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy8gMC4gY3JlYXRlIHJlbmRlciBwcm94eSBwcm9wZXJ0eSBhY2Nlc3MgY2FjaGVcclxuICAgIGluc3RhbmNlLmFjY2Vzc0NhY2hlID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcclxuICAgIC8vIDEuIGNyZWF0ZSBwdWJsaWMgaW5zdGFuY2UgLyByZW5kZXIgcHJveHlcclxuICAgIC8vIGFsc28gbWFyayBpdCByYXcgc28gaXQncyBuZXZlciBvYnNlcnZlZFxyXG4gICAgaW5zdGFuY2UucHJveHkgPSBtYXJrUmF3KG5ldyBQcm94eShpbnN0YW5jZS5jdHgsIFB1YmxpY0luc3RhbmNlUHJveHlIYW5kbGVycykpO1xyXG4gICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xyXG4gICAgICAgIGV4cG9zZVByb3BzT25SZW5kZXJDb250ZXh0KGluc3RhbmNlKTtcclxuICAgIH1cclxuICAgIC8vIDIuIGNhbGwgc2V0dXAoKVxyXG4gICAgY29uc3QgeyBzZXR1cCB9ID0gQ29tcG9uZW50O1xyXG4gICAgaWYgKHNldHVwKSB7XHJcbiAgICAgICAgY29uc3Qgc2V0dXBDb250ZXh0ID0gKGluc3RhbmNlLnNldHVwQ29udGV4dCA9XHJcbiAgICAgICAgICAgIHNldHVwLmxlbmd0aCA+IDEgPyBjcmVhdGVTZXR1cENvbnRleHQoaW5zdGFuY2UpIDogbnVsbCk7XHJcbiAgICAgICAgc2V0Q3VycmVudEluc3RhbmNlKGluc3RhbmNlKTtcclxuICAgICAgICBwYXVzZVRyYWNraW5nKCk7XHJcbiAgICAgICAgY29uc3Qgc2V0dXBSZXN1bHQgPSBjYWxsV2l0aEVycm9ySGFuZGxpbmcoc2V0dXAsIGluc3RhbmNlLCAwIC8qIFNFVFVQX0ZVTkNUSU9OICovLCBbKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpID8gc2hhbGxvd1JlYWRvbmx5KGluc3RhbmNlLnByb3BzKSA6IGluc3RhbmNlLnByb3BzLCBzZXR1cENvbnRleHRdKTtcclxuICAgICAgICByZXNldFRyYWNraW5nKCk7XHJcbiAgICAgICAgdW5zZXRDdXJyZW50SW5zdGFuY2UoKTtcclxuICAgICAgICBpZiAoaXNQcm9taXNlKHNldHVwUmVzdWx0KSkge1xyXG4gICAgICAgICAgICBzZXR1cFJlc3VsdC50aGVuKHVuc2V0Q3VycmVudEluc3RhbmNlLCB1bnNldEN1cnJlbnRJbnN0YW5jZSk7XHJcbiAgICAgICAgICAgIGlmIChpc1NTUikge1xyXG4gICAgICAgICAgICAgICAgLy8gcmV0dXJuIHRoZSBwcm9taXNlIHNvIHNlcnZlci1yZW5kZXJlciBjYW4gd2FpdCBvbiBpdFxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHNldHVwUmVzdWx0XHJcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oKHJlc29sdmVkUmVzdWx0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaGFuZGxlU2V0dXBSZXN1bHQoaW5zdGFuY2UsIHJlc29sdmVkUmVzdWx0LCBpc1NTUik7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgIC5jYXRjaChlID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBoYW5kbGVFcnJvcihlLCBpbnN0YW5jZSwgMCAvKiBTRVRVUF9GVU5DVElPTiAqLyk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vIGFzeW5jIHNldHVwIHJldHVybmVkIFByb21pc2UuXHJcbiAgICAgICAgICAgICAgICAvLyBiYWlsIGhlcmUgYW5kIHdhaXQgZm9yIHJlLWVudHJ5LlxyXG4gICAgICAgICAgICAgICAgaW5zdGFuY2UuYXN5bmNEZXAgPSBzZXR1cFJlc3VsdDtcclxuICAgICAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgIWluc3RhbmNlLnN1c3BlbnNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmFtZSA9IChfYSA9IENvbXBvbmVudC5uYW1lKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiAnQW5vbnltb3VzJztcclxuICAgICAgICAgICAgICAgICAgICB3YXJuKGBDb21wb25lbnQgPCR7bmFtZX0+OiBzZXR1cCBmdW5jdGlvbiByZXR1cm5lZCBhIHByb21pc2UsIGJ1dCBubyBgICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYDxTdXNwZW5zZT4gYm91bmRhcnkgd2FzIGZvdW5kIGluIHRoZSBwYXJlbnQgY29tcG9uZW50IHRyZWUuIGAgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBgQSBjb21wb25lbnQgd2l0aCBhc3luYyBzZXR1cCgpIG11c3QgYmUgbmVzdGVkIGluIGEgPFN1c3BlbnNlPiBgICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYGluIG9yZGVyIHRvIGJlIHJlbmRlcmVkLmApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBoYW5kbGVTZXR1cFJlc3VsdChpbnN0YW5jZSwgc2V0dXBSZXN1bHQsIGlzU1NSKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICBmaW5pc2hDb21wb25lbnRTZXR1cChpbnN0YW5jZSwgaXNTU1IpO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIGhhbmRsZVNldHVwUmVzdWx0KGluc3RhbmNlLCBzZXR1cFJlc3VsdCwgaXNTU1IpIHtcclxuICAgIGlmIChpc0Z1bmN0aW9uKHNldHVwUmVzdWx0KSkge1xyXG4gICAgICAgIC8vIHNldHVwIHJldHVybmVkIGFuIGlubGluZSByZW5kZXIgZnVuY3Rpb25cclxuICAgICAgICBpZiAoaW5zdGFuY2UudHlwZS5fX3NzcklubGluZVJlbmRlcikge1xyXG4gICAgICAgICAgICAvLyB3aGVuIHRoZSBmdW5jdGlvbidzIG5hbWUgaXMgYHNzclJlbmRlcmAgKGNvbXBpbGVkIGJ5IFNGQyBpbmxpbmUgbW9kZSksXHJcbiAgICAgICAgICAgIC8vIHNldCBpdCBhcyBzc3JSZW5kZXIgaW5zdGVhZC5cclxuICAgICAgICAgICAgaW5zdGFuY2Uuc3NyUmVuZGVyID0gc2V0dXBSZXN1bHQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBpbnN0YW5jZS5yZW5kZXIgPSBzZXR1cFJlc3VsdDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChpc09iamVjdChzZXR1cFJlc3VsdCkpIHtcclxuICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmIGlzVk5vZGUoc2V0dXBSZXN1bHQpKSB7XHJcbiAgICAgICAgICAgIHdhcm4oYHNldHVwKCkgc2hvdWxkIG5vdCByZXR1cm4gVk5vZGVzIGRpcmVjdGx5IC0gYCArXHJcbiAgICAgICAgICAgICAgICBgcmV0dXJuIGEgcmVuZGVyIGZ1bmN0aW9uIGluc3RlYWQuYCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIHNldHVwIHJldHVybmVkIGJpbmRpbmdzLlxyXG4gICAgICAgIC8vIGFzc3VtaW5nIGEgcmVuZGVyIGZ1bmN0aW9uIGNvbXBpbGVkIGZyb20gdGVtcGxhdGUgaXMgcHJlc2VudC5cclxuICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHx8IF9fVlVFX1BST0RfREVWVE9PTFNfXykge1xyXG4gICAgICAgICAgICBpbnN0YW5jZS5kZXZ0b29sc1Jhd1NldHVwU3RhdGUgPSBzZXR1cFJlc3VsdDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaW5zdGFuY2Uuc2V0dXBTdGF0ZSA9IHByb3h5UmVmcyhzZXR1cFJlc3VsdCk7XHJcbiAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xyXG4gICAgICAgICAgICBleHBvc2VTZXR1cFN0YXRlT25SZW5kZXJDb250ZXh0KGluc3RhbmNlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgc2V0dXBSZXN1bHQgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIHdhcm4oYHNldHVwKCkgc2hvdWxkIHJldHVybiBhbiBvYmplY3QuIFJlY2VpdmVkOiAke3NldHVwUmVzdWx0ID09PSBudWxsID8gJ251bGwnIDogdHlwZW9mIHNldHVwUmVzdWx0fWApO1xyXG4gICAgfVxyXG4gICAgZmluaXNoQ29tcG9uZW50U2V0dXAoaW5zdGFuY2UsIGlzU1NSKTtcclxufVxyXG5sZXQgY29tcGlsZTtcclxubGV0IGluc3RhbGxXaXRoUHJveHk7XHJcbi8qKlxyXG4gKiBGb3IgcnVudGltZS1kb20gdG8gcmVnaXN0ZXIgdGhlIGNvbXBpbGVyLlxyXG4gKiBOb3RlIHRoZSBleHBvcnRlZCBtZXRob2QgdXNlcyBhbnkgdG8gYXZvaWQgZC50cyByZWx5aW5nIG9uIHRoZSBjb21waWxlciB0eXBlcy5cclxuICovXHJcbmZ1bmN0aW9uIHJlZ2lzdGVyUnVudGltZUNvbXBpbGVyKF9jb21waWxlKSB7XHJcbiAgICBjb21waWxlID0gX2NvbXBpbGU7XHJcbiAgICBpbnN0YWxsV2l0aFByb3h5ID0gaSA9PiB7XHJcbiAgICAgICAgaWYgKGkucmVuZGVyLl9yYykge1xyXG4gICAgICAgICAgICBpLndpdGhQcm94eSA9IG5ldyBQcm94eShpLmN0eCwgUnVudGltZUNvbXBpbGVkUHVibGljSW5zdGFuY2VQcm94eUhhbmRsZXJzKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG59XHJcbi8vIGRldiBvbmx5XHJcbmNvbnN0IGlzUnVudGltZU9ubHkgPSAoKSA9PiAhY29tcGlsZTtcclxuZnVuY3Rpb24gZmluaXNoQ29tcG9uZW50U2V0dXAoaW5zdGFuY2UsIGlzU1NSLCBza2lwT3B0aW9ucykge1xyXG4gICAgY29uc3QgQ29tcG9uZW50ID0gaW5zdGFuY2UudHlwZTtcclxuICAgIC8vIHRlbXBsYXRlIC8gcmVuZGVyIGZ1bmN0aW9uIG5vcm1hbGl6YXRpb25cclxuICAgIC8vIGNvdWxkIGJlIGFscmVhZHkgc2V0IHdoZW4gcmV0dXJuZWQgZnJvbSBzZXR1cCgpXHJcbiAgICBpZiAoIWluc3RhbmNlLnJlbmRlcikge1xyXG4gICAgICAgIC8vIG9ubHkgZG8gb24tdGhlLWZseSBjb21waWxlIGlmIG5vdCBpbiBTU1IgLSBTU1Igb24tdGhlLWZseSBjb21waWxhdGlvblxyXG4gICAgICAgIC8vIGlzIGRvbmUgYnkgc2VydmVyLXJlbmRlcmVyXHJcbiAgICAgICAgaWYgKCFpc1NTUiAmJiBjb21waWxlICYmICFDb21wb25lbnQucmVuZGVyKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHRlbXBsYXRlID0gQ29tcG9uZW50LnRlbXBsYXRlO1xyXG4gICAgICAgICAgICBpZiAodGVtcGxhdGUpIHtcclxuICAgICAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcclxuICAgICAgICAgICAgICAgICAgICBzdGFydE1lYXN1cmUoaW5zdGFuY2UsIGBjb21waWxlYCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjb25zdCB7IGlzQ3VzdG9tRWxlbWVudCwgY29tcGlsZXJPcHRpb25zIH0gPSBpbnN0YW5jZS5hcHBDb250ZXh0LmNvbmZpZztcclxuICAgICAgICAgICAgICAgIGNvbnN0IHsgZGVsaW1pdGVycywgY29tcGlsZXJPcHRpb25zOiBjb21wb25lbnRDb21waWxlck9wdGlvbnMgfSA9IENvbXBvbmVudDtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGZpbmFsQ29tcGlsZXJPcHRpb25zID0gZXh0ZW5kKGV4dGVuZCh7XHJcbiAgICAgICAgICAgICAgICAgICAgaXNDdXN0b21FbGVtZW50LFxyXG4gICAgICAgICAgICAgICAgICAgIGRlbGltaXRlcnNcclxuICAgICAgICAgICAgICAgIH0sIGNvbXBpbGVyT3B0aW9ucyksIGNvbXBvbmVudENvbXBpbGVyT3B0aW9ucyk7XHJcbiAgICAgICAgICAgICAgICBDb21wb25lbnQucmVuZGVyID0gY29tcGlsZSh0ZW1wbGF0ZSwgZmluYWxDb21waWxlck9wdGlvbnMpO1xyXG4gICAgICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGVuZE1lYXN1cmUoaW5zdGFuY2UsIGBjb21waWxlYCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaW5zdGFuY2UucmVuZGVyID0gKENvbXBvbmVudC5yZW5kZXIgfHwgTk9PUCk7XHJcbiAgICAgICAgLy8gZm9yIHJ1bnRpbWUtY29tcGlsZWQgcmVuZGVyIGZ1bmN0aW9ucyB1c2luZyBgd2l0aGAgYmxvY2tzLCB0aGUgcmVuZGVyXHJcbiAgICAgICAgLy8gcHJveHkgdXNlZCBuZWVkcyBhIGRpZmZlcmVudCBgaGFzYCBoYW5kbGVyIHdoaWNoIGlzIG1vcmUgcGVyZm9ybWFudCBhbmRcclxuICAgICAgICAvLyBhbHNvIG9ubHkgYWxsb3dzIGEgd2hpdGVsaXN0IG9mIGdsb2JhbHMgdG8gZmFsbHRocm91Z2guXHJcbiAgICAgICAgaWYgKGluc3RhbGxXaXRoUHJveHkpIHtcclxuICAgICAgICAgICAgaW5zdGFsbFdpdGhQcm94eShpbnN0YW5jZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy8gc3VwcG9ydCBmb3IgMi54IG9wdGlvbnNcclxuICAgIGlmIChfX1ZVRV9PUFRJT05TX0FQSV9fICYmICEoZmFsc2UgKSkge1xyXG4gICAgICAgIHNldEN1cnJlbnRJbnN0YW5jZShpbnN0YW5jZSk7XHJcbiAgICAgICAgcGF1c2VUcmFja2luZygpO1xyXG4gICAgICAgIGFwcGx5T3B0aW9ucyhpbnN0YW5jZSk7XHJcbiAgICAgICAgcmVzZXRUcmFja2luZygpO1xyXG4gICAgICAgIHVuc2V0Q3VycmVudEluc3RhbmNlKCk7XHJcbiAgICB9XHJcbiAgICAvLyB3YXJuIG1pc3NpbmcgdGVtcGxhdGUvcmVuZGVyXHJcbiAgICAvLyB0aGUgcnVudGltZSBjb21waWxhdGlvbiBvZiB0ZW1wbGF0ZSBpbiBTU1IgaXMgZG9uZSBieSBzZXJ2ZXItcmVuZGVyXHJcbiAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmICFDb21wb25lbnQucmVuZGVyICYmIGluc3RhbmNlLnJlbmRlciA9PT0gTk9PUCAmJiAhaXNTU1IpIHtcclxuICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cclxuICAgICAgICBpZiAoIWNvbXBpbGUgJiYgQ29tcG9uZW50LnRlbXBsYXRlKSB7XHJcbiAgICAgICAgICAgIHdhcm4oYENvbXBvbmVudCBwcm92aWRlZCB0ZW1wbGF0ZSBvcHRpb24gYnV0IGAgK1xyXG4gICAgICAgICAgICAgICAgYHJ1bnRpbWUgY29tcGlsYXRpb24gaXMgbm90IHN1cHBvcnRlZCBpbiB0aGlzIGJ1aWxkIG9mIFZ1ZS5gICtcclxuICAgICAgICAgICAgICAgIChgIENvbmZpZ3VyZSB5b3VyIGJ1bmRsZXIgdG8gYWxpYXMgXCJ2dWVcIiB0byBcInZ1ZS9kaXN0L3Z1ZS5lc20tYnVuZGxlci5qc1wiLmBcclxuICAgICAgICAgICAgICAgICAgICApIC8qIHNob3VsZCBub3QgaGFwcGVuICovKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHdhcm4oYENvbXBvbmVudCBpcyBtaXNzaW5nIHRlbXBsYXRlIG9yIHJlbmRlciBmdW5jdGlvbi5gKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gY3JlYXRlQXR0cnNQcm94eShpbnN0YW5jZSkge1xyXG4gICAgcmV0dXJuIG5ldyBQcm94eShpbnN0YW5jZS5hdHRycywgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpXHJcbiAgICAgICAgPyB7XHJcbiAgICAgICAgICAgIGdldCh0YXJnZXQsIGtleSkge1xyXG4gICAgICAgICAgICAgICAgbWFya0F0dHJzQWNjZXNzZWQoKTtcclxuICAgICAgICAgICAgICAgIHRyYWNrKGluc3RhbmNlLCBcImdldFwiIC8qIEdFVCAqLywgJyRhdHRycycpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRhcmdldFtrZXldO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBzZXQoKSB7XHJcbiAgICAgICAgICAgICAgICB3YXJuKGBzZXR1cENvbnRleHQuYXR0cnMgaXMgcmVhZG9ubHkuYCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGRlbGV0ZVByb3BlcnR5KCkge1xyXG4gICAgICAgICAgICAgICAgd2Fybihgc2V0dXBDb250ZXh0LmF0dHJzIGlzIHJlYWRvbmx5LmApO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIDoge1xyXG4gICAgICAgICAgICBnZXQodGFyZ2V0LCBrZXkpIHtcclxuICAgICAgICAgICAgICAgIHRyYWNrKGluc3RhbmNlLCBcImdldFwiIC8qIEdFVCAqLywgJyRhdHRycycpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRhcmdldFtrZXldO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbn1cclxuZnVuY3Rpb24gY3JlYXRlU2V0dXBDb250ZXh0KGluc3RhbmNlKSB7XHJcbiAgICBjb25zdCBleHBvc2UgPSBleHBvc2VkID0+IHtcclxuICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmIGluc3RhbmNlLmV4cG9zZWQpIHtcclxuICAgICAgICAgICAgd2FybihgZXhwb3NlKCkgc2hvdWxkIGJlIGNhbGxlZCBvbmx5IG9uY2UgcGVyIHNldHVwKCkuYCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGluc3RhbmNlLmV4cG9zZWQgPSBleHBvc2VkIHx8IHt9O1xyXG4gICAgfTtcclxuICAgIGxldCBhdHRycztcclxuICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcclxuICAgICAgICAvLyBXZSB1c2UgZ2V0dGVycyBpbiBkZXYgaW4gY2FzZSBsaWJzIGxpa2UgdGVzdC11dGlscyBvdmVyd3JpdGUgaW5zdGFuY2VcclxuICAgICAgICAvLyBwcm9wZXJ0aWVzIChvdmVyd3JpdGVzIHNob3VsZCBub3QgYmUgZG9uZSBpbiBwcm9kKVxyXG4gICAgICAgIHJldHVybiBPYmplY3QuZnJlZXplKHtcclxuICAgICAgICAgICAgZ2V0IGF0dHJzKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGF0dHJzIHx8IChhdHRycyA9IGNyZWF0ZUF0dHJzUHJveHkoaW5zdGFuY2UpKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZ2V0IHNsb3RzKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHNoYWxsb3dSZWFkb25seShpbnN0YW5jZS5zbG90cyk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGdldCBlbWl0KCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIChldmVudCwgLi4uYXJncykgPT4gaW5zdGFuY2UuZW1pdChldmVudCwgLi4uYXJncyk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGV4cG9zZVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgZ2V0IGF0dHJzKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGF0dHJzIHx8IChhdHRycyA9IGNyZWF0ZUF0dHJzUHJveHkoaW5zdGFuY2UpKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgc2xvdHM6IGluc3RhbmNlLnNsb3RzLFxyXG4gICAgICAgICAgICBlbWl0OiBpbnN0YW5jZS5lbWl0LFxyXG4gICAgICAgICAgICBleHBvc2VcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIGdldEV4cG9zZVByb3h5KGluc3RhbmNlKSB7XHJcbiAgICBpZiAoaW5zdGFuY2UuZXhwb3NlZCkge1xyXG4gICAgICAgIHJldHVybiAoaW5zdGFuY2UuZXhwb3NlUHJveHkgfHxcclxuICAgICAgICAgICAgKGluc3RhbmNlLmV4cG9zZVByb3h5ID0gbmV3IFByb3h5KHByb3h5UmVmcyhtYXJrUmF3KGluc3RhbmNlLmV4cG9zZWQpKSwge1xyXG4gICAgICAgICAgICAgICAgZ2V0KHRhcmdldCwga2V5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGtleSBpbiB0YXJnZXQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRhcmdldFtrZXldO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChrZXkgaW4gcHVibGljUHJvcGVydGllc01hcCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcHVibGljUHJvcGVydGllc01hcFtrZXldKGluc3RhbmNlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pKSk7XHJcbiAgICB9XHJcbn1cclxuY29uc3QgY2xhc3NpZnlSRSA9IC8oPzpefFstX10pKFxcdykvZztcclxuY29uc3QgY2xhc3NpZnkgPSAoc3RyKSA9PiBzdHIucmVwbGFjZShjbGFzc2lmeVJFLCBjID0+IGMudG9VcHBlckNhc2UoKSkucmVwbGFjZSgvWy1fXS9nLCAnJyk7XHJcbmZ1bmN0aW9uIGdldENvbXBvbmVudE5hbWUoQ29tcG9uZW50KSB7XHJcbiAgICByZXR1cm4gaXNGdW5jdGlvbihDb21wb25lbnQpXHJcbiAgICAgICAgPyBDb21wb25lbnQuZGlzcGxheU5hbWUgfHwgQ29tcG9uZW50Lm5hbWVcclxuICAgICAgICA6IENvbXBvbmVudC5uYW1lO1xyXG59XHJcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXHJcbmZ1bmN0aW9uIGZvcm1hdENvbXBvbmVudE5hbWUoaW5zdGFuY2UsIENvbXBvbmVudCwgaXNSb290ID0gZmFsc2UpIHtcclxuICAgIGxldCBuYW1lID0gZ2V0Q29tcG9uZW50TmFtZShDb21wb25lbnQpO1xyXG4gICAgaWYgKCFuYW1lICYmIENvbXBvbmVudC5fX2ZpbGUpIHtcclxuICAgICAgICBjb25zdCBtYXRjaCA9IENvbXBvbmVudC5fX2ZpbGUubWF0Y2goLyhbXi9cXFxcXSspXFwuXFx3KyQvKTtcclxuICAgICAgICBpZiAobWF0Y2gpIHtcclxuICAgICAgICAgICAgbmFtZSA9IG1hdGNoWzFdO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGlmICghbmFtZSAmJiBpbnN0YW5jZSAmJiBpbnN0YW5jZS5wYXJlbnQpIHtcclxuICAgICAgICAvLyB0cnkgdG8gaW5mZXIgdGhlIG5hbWUgYmFzZWQgb24gcmV2ZXJzZSByZXNvbHV0aW9uXHJcbiAgICAgICAgY29uc3QgaW5mZXJGcm9tUmVnaXN0cnkgPSAocmVnaXN0cnkpID0+IHtcclxuICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gcmVnaXN0cnkpIHtcclxuICAgICAgICAgICAgICAgIGlmIChyZWdpc3RyeVtrZXldID09PSBDb21wb25lbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4ga2V5O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICBuYW1lID1cclxuICAgICAgICAgICAgaW5mZXJGcm9tUmVnaXN0cnkoaW5zdGFuY2UuY29tcG9uZW50cyB8fFxyXG4gICAgICAgICAgICAgICAgaW5zdGFuY2UucGFyZW50LnR5cGUuY29tcG9uZW50cykgfHwgaW5mZXJGcm9tUmVnaXN0cnkoaW5zdGFuY2UuYXBwQ29udGV4dC5jb21wb25lbnRzKTtcclxuICAgIH1cclxuICAgIHJldHVybiBuYW1lID8gY2xhc3NpZnkobmFtZSkgOiBpc1Jvb3QgPyBgQXBwYCA6IGBBbm9ueW1vdXNgO1xyXG59XHJcbmZ1bmN0aW9uIGlzQ2xhc3NDb21wb25lbnQodmFsdWUpIHtcclxuICAgIHJldHVybiBpc0Z1bmN0aW9uKHZhbHVlKSAmJiAnX192Y2NPcHRzJyBpbiB2YWx1ZTtcclxufVxuXG5jb25zdCBjb21wdXRlZCA9ICgoZ2V0dGVyT3JPcHRpb25zLCBkZWJ1Z09wdGlvbnMpID0+IHtcclxuICAgIC8vIEB0cy1pZ25vcmVcclxuICAgIHJldHVybiBjb21wdXRlZCQxKGdldHRlck9yT3B0aW9ucywgZGVidWdPcHRpb25zLCBpc0luU1NSQ29tcG9uZW50U2V0dXApO1xyXG59KTtcblxuLy8gZGV2IG9ubHlcclxuY29uc3Qgd2FyblJ1bnRpbWVVc2FnZSA9IChtZXRob2QpID0+IHdhcm4oYCR7bWV0aG9kfSgpIGlzIGEgY29tcGlsZXItaGludCBoZWxwZXIgdGhhdCBpcyBvbmx5IHVzYWJsZSBpbnNpZGUgYCArXHJcbiAgICBgPHNjcmlwdCBzZXR1cD4gb2YgYSBzaW5nbGUgZmlsZSBjb21wb25lbnQuIEl0cyBhcmd1bWVudHMgc2hvdWxkIGJlIGAgK1xyXG4gICAgYGNvbXBpbGVkIGF3YXkgYW5kIHBhc3NpbmcgaXQgYXQgcnVudGltZSBoYXMgbm8gZWZmZWN0LmApO1xyXG4vLyBpbXBsZW1lbnRhdGlvblxyXG5mdW5jdGlvbiBkZWZpbmVQcm9wcygpIHtcclxuICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcclxuICAgICAgICB3YXJuUnVudGltZVVzYWdlKGBkZWZpbmVQcm9wc2ApO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG51bGw7XHJcbn1cclxuLy8gaW1wbGVtZW50YXRpb25cclxuZnVuY3Rpb24gZGVmaW5lRW1pdHMoKSB7XHJcbiAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XHJcbiAgICAgICAgd2FyblJ1bnRpbWVVc2FnZShgZGVmaW5lRW1pdHNgKTtcclxuICAgIH1cclxuICAgIHJldHVybiBudWxsO1xyXG59XHJcbi8qKlxyXG4gKiBWdWUgYDxzY3JpcHQgc2V0dXA+YCBjb21waWxlciBtYWNybyBmb3IgZGVjbGFyaW5nIGEgY29tcG9uZW50J3MgZXhwb3NlZFxyXG4gKiBpbnN0YW5jZSBwcm9wZXJ0aWVzIHdoZW4gaXQgaXMgYWNjZXNzZWQgYnkgYSBwYXJlbnQgY29tcG9uZW50IHZpYSB0ZW1wbGF0ZVxyXG4gKiByZWZzLlxyXG4gKlxyXG4gKiBgPHNjcmlwdCBzZXR1cD5gIGNvbXBvbmVudHMgYXJlIGNsb3NlZCBieSBkZWZhdWx0IC0gaS5lLiB2YXJpYWJsZXMgaW5zaWRlXHJcbiAqIHRoZSBgPHNjcmlwdCBzZXR1cD5gIHNjb3BlIGlzIG5vdCBleHBvc2VkIHRvIHBhcmVudCB1bmxlc3MgZXhwbGljaXRseSBleHBvc2VkXHJcbiAqIHZpYSBgZGVmaW5lRXhwb3NlYC5cclxuICpcclxuICogVGhpcyBpcyBvbmx5IHVzYWJsZSBpbnNpZGUgYDxzY3JpcHQgc2V0dXA+YCwgaXMgY29tcGlsZWQgYXdheSBpbiB0aGVcclxuICogb3V0cHV0IGFuZCBzaG91bGQgKipub3QqKiBiZSBhY3R1YWxseSBjYWxsZWQgYXQgcnVudGltZS5cclxuICovXHJcbmZ1bmN0aW9uIGRlZmluZUV4cG9zZShleHBvc2VkKSB7XHJcbiAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XHJcbiAgICAgICAgd2FyblJ1bnRpbWVVc2FnZShgZGVmaW5lRXhwb3NlYCk7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIFZ1ZSBgPHNjcmlwdCBzZXR1cD5gIGNvbXBpbGVyIG1hY3JvIGZvciBwcm92aWRpbmcgcHJvcHMgZGVmYXVsdCB2YWx1ZXMgd2hlblxyXG4gKiB1c2luZyB0eXBlLWJhc2VkIGBkZWZpbmVQcm9wc2AgZGVjbGFyYXRpb24uXHJcbiAqXHJcbiAqIEV4YW1wbGUgdXNhZ2U6XHJcbiAqIGBgYHRzXHJcbiAqIHdpdGhEZWZhdWx0cyhkZWZpbmVQcm9wczx7XHJcbiAqICAgc2l6ZT86IG51bWJlclxyXG4gKiAgIGxhYmVscz86IHN0cmluZ1tdXHJcbiAqIH0+KCksIHtcclxuICogICBzaXplOiAzLFxyXG4gKiAgIGxhYmVsczogKCkgPT4gWydkZWZhdWx0IGxhYmVsJ11cclxuICogfSlcclxuICogYGBgXHJcbiAqXHJcbiAqIFRoaXMgaXMgb25seSB1c2FibGUgaW5zaWRlIGA8c2NyaXB0IHNldHVwPmAsIGlzIGNvbXBpbGVkIGF3YXkgaW4gdGhlIG91dHB1dFxyXG4gKiBhbmQgc2hvdWxkICoqbm90KiogYmUgYWN0dWFsbHkgY2FsbGVkIGF0IHJ1bnRpbWUuXHJcbiAqL1xyXG5mdW5jdGlvbiB3aXRoRGVmYXVsdHMocHJvcHMsIGRlZmF1bHRzKSB7XHJcbiAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XHJcbiAgICAgICAgd2FyblJ1bnRpbWVVc2FnZShgd2l0aERlZmF1bHRzYCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbnVsbDtcclxufVxyXG5mdW5jdGlvbiB1c2VTbG90cygpIHtcclxuICAgIHJldHVybiBnZXRDb250ZXh0KCkuc2xvdHM7XHJcbn1cclxuZnVuY3Rpb24gdXNlQXR0cnMoKSB7XHJcbiAgICByZXR1cm4gZ2V0Q29udGV4dCgpLmF0dHJzO1xyXG59XHJcbmZ1bmN0aW9uIGdldENvbnRleHQoKSB7XHJcbiAgICBjb25zdCBpID0gZ2V0Q3VycmVudEluc3RhbmNlKCk7XHJcbiAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmICFpKSB7XHJcbiAgICAgICAgd2FybihgdXNlQ29udGV4dCgpIGNhbGxlZCB3aXRob3V0IGFjdGl2ZSBpbnN0YW5jZS5gKTtcclxuICAgIH1cclxuICAgIHJldHVybiBpLnNldHVwQ29udGV4dCB8fCAoaS5zZXR1cENvbnRleHQgPSBjcmVhdGVTZXR1cENvbnRleHQoaSkpO1xyXG59XHJcbi8qKlxyXG4gKiBSdW50aW1lIGhlbHBlciBmb3IgbWVyZ2luZyBkZWZhdWx0IGRlY2xhcmF0aW9ucy4gSW1wb3J0ZWQgYnkgY29tcGlsZWQgY29kZVxyXG4gKiBvbmx5LlxyXG4gKiBAaW50ZXJuYWxcclxuICovXHJcbmZ1bmN0aW9uIG1lcmdlRGVmYXVsdHMocmF3LCBkZWZhdWx0cykge1xyXG4gICAgY29uc3QgcHJvcHMgPSBpc0FycmF5KHJhdylcclxuICAgICAgICA/IHJhdy5yZWR1Y2UoKG5vcm1hbGl6ZWQsIHApID0+ICgobm9ybWFsaXplZFtwXSA9IHt9KSwgbm9ybWFsaXplZCksIHt9KVxyXG4gICAgICAgIDogcmF3O1xyXG4gICAgZm9yIChjb25zdCBrZXkgaW4gZGVmYXVsdHMpIHtcclxuICAgICAgICBjb25zdCBvcHQgPSBwcm9wc1trZXldO1xyXG4gICAgICAgIGlmIChvcHQpIHtcclxuICAgICAgICAgICAgaWYgKGlzQXJyYXkob3B0KSB8fCBpc0Z1bmN0aW9uKG9wdCkpIHtcclxuICAgICAgICAgICAgICAgIHByb3BzW2tleV0gPSB7IHR5cGU6IG9wdCwgZGVmYXVsdDogZGVmYXVsdHNba2V5XSB9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgb3B0LmRlZmF1bHQgPSBkZWZhdWx0c1trZXldO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKG9wdCA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICBwcm9wc1trZXldID0geyBkZWZhdWx0OiBkZWZhdWx0c1trZXldIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xyXG4gICAgICAgICAgICB3YXJuKGBwcm9wcyBkZWZhdWx0IGtleSBcIiR7a2V5fVwiIGhhcyBubyBjb3JyZXNwb25kaW5nIGRlY2xhcmF0aW9uLmApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBwcm9wcztcclxufVxyXG4vKipcclxuICogVXNlZCB0byBjcmVhdGUgYSBwcm94eSBmb3IgdGhlIHJlc3QgZWxlbWVudCB3aGVuIGRlc3RydWN0dXJpbmcgcHJvcHMgd2l0aFxyXG4gKiBkZWZpbmVQcm9wcygpLlxyXG4gKiBAaW50ZXJuYWxcclxuICovXHJcbmZ1bmN0aW9uIGNyZWF0ZVByb3BzUmVzdFByb3h5KHByb3BzLCBleGNsdWRlZEtleXMpIHtcclxuICAgIGNvbnN0IHJldCA9IHt9O1xyXG4gICAgZm9yIChjb25zdCBrZXkgaW4gcHJvcHMpIHtcclxuICAgICAgICBpZiAoIWV4Y2x1ZGVkS2V5cy5pbmNsdWRlcyhrZXkpKSB7XHJcbiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShyZXQsIGtleSwge1xyXG4gICAgICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIGdldDogKCkgPT4gcHJvcHNba2V5XVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcmV0O1xyXG59XHJcbi8qKlxyXG4gKiBgPHNjcmlwdCBzZXR1cD5gIGhlbHBlciBmb3IgcGVyc2lzdGluZyB0aGUgY3VycmVudCBpbnN0YW5jZSBjb250ZXh0IG92ZXJcclxuICogYXN5bmMvYXdhaXQgZmxvd3MuXHJcbiAqXHJcbiAqIGBAdnVlL2NvbXBpbGVyLXNmY2AgY29udmVydHMgdGhlIGZvbGxvd2luZzpcclxuICpcclxuICogYGBgdHNcclxuICogY29uc3QgeCA9IGF3YWl0IGZvbygpXHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBpbnRvOlxyXG4gKlxyXG4gKiBgYGB0c1xyXG4gKiBsZXQgX190ZW1wLCBfX3Jlc3RvcmVcclxuICogY29uc3QgeCA9ICgoW19fdGVtcCwgX19yZXN0b3JlXSA9IHdpdGhBc3luY0NvbnRleHQoKCkgPT4gZm9vKCkpKSxfX3RlbXA9YXdhaXQgX190ZW1wLF9fcmVzdG9yZSgpLF9fdGVtcClcclxuICogYGBgXHJcbiAqIEBpbnRlcm5hbFxyXG4gKi9cclxuZnVuY3Rpb24gd2l0aEFzeW5jQ29udGV4dChnZXRBd2FpdGFibGUpIHtcclxuICAgIGNvbnN0IGN0eCA9IGdldEN1cnJlbnRJbnN0YW5jZSgpO1xyXG4gICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiAhY3R4KSB7XHJcbiAgICAgICAgd2Fybihgd2l0aEFzeW5jQ29udGV4dCBjYWxsZWQgd2l0aG91dCBhY3RpdmUgY3VycmVudCBpbnN0YW5jZS4gYCArXHJcbiAgICAgICAgICAgIGBUaGlzIGlzIGxpa2VseSBhIGJ1Zy5gKTtcclxuICAgIH1cclxuICAgIGxldCBhd2FpdGFibGUgPSBnZXRBd2FpdGFibGUoKTtcclxuICAgIHVuc2V0Q3VycmVudEluc3RhbmNlKCk7XHJcbiAgICBpZiAoaXNQcm9taXNlKGF3YWl0YWJsZSkpIHtcclxuICAgICAgICBhd2FpdGFibGUgPSBhd2FpdGFibGUuY2F0Y2goZSA9PiB7XHJcbiAgICAgICAgICAgIHNldEN1cnJlbnRJbnN0YW5jZShjdHgpO1xyXG4gICAgICAgICAgICB0aHJvdyBlO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIFthd2FpdGFibGUsICgpID0+IHNldEN1cnJlbnRJbnN0YW5jZShjdHgpXTtcclxufVxuXG4vLyBBY3R1YWwgaW1wbGVtZW50YXRpb25cclxuZnVuY3Rpb24gaCh0eXBlLCBwcm9wc09yQ2hpbGRyZW4sIGNoaWxkcmVuKSB7XHJcbiAgICBjb25zdCBsID0gYXJndW1lbnRzLmxlbmd0aDtcclxuICAgIGlmIChsID09PSAyKSB7XHJcbiAgICAgICAgaWYgKGlzT2JqZWN0KHByb3BzT3JDaGlsZHJlbikgJiYgIWlzQXJyYXkocHJvcHNPckNoaWxkcmVuKSkge1xyXG4gICAgICAgICAgICAvLyBzaW5nbGUgdm5vZGUgd2l0aG91dCBwcm9wc1xyXG4gICAgICAgICAgICBpZiAoaXNWTm9kZShwcm9wc09yQ2hpbGRyZW4pKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gY3JlYXRlVk5vZGUodHlwZSwgbnVsbCwgW3Byb3BzT3JDaGlsZHJlbl0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIHByb3BzIHdpdGhvdXQgY2hpbGRyZW5cclxuICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZVZOb2RlKHR5cGUsIHByb3BzT3JDaGlsZHJlbik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBvbWl0IHByb3BzXHJcbiAgICAgICAgICAgIHJldHVybiBjcmVhdGVWTm9kZSh0eXBlLCBudWxsLCBwcm9wc09yQ2hpbGRyZW4pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIGlmIChsID4gMykge1xyXG4gICAgICAgICAgICBjaGlsZHJlbiA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGwgPT09IDMgJiYgaXNWTm9kZShjaGlsZHJlbikpIHtcclxuICAgICAgICAgICAgY2hpbGRyZW4gPSBbY2hpbGRyZW5dO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gY3JlYXRlVk5vZGUodHlwZSwgcHJvcHNPckNoaWxkcmVuLCBjaGlsZHJlbik7XHJcbiAgICB9XHJcbn1cblxuY29uc3Qgc3NyQ29udGV4dEtleSA9IFN5bWJvbCgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgPyBgc3NyQ29udGV4dGAgOiBgYCk7XHJcbmNvbnN0IHVzZVNTUkNvbnRleHQgPSAoKSA9PiB7XHJcbiAgICB7XHJcbiAgICAgICAgY29uc3QgY3R4ID0gaW5qZWN0KHNzckNvbnRleHRLZXkpO1xyXG4gICAgICAgIGlmICghY3R4KSB7XHJcbiAgICAgICAgICAgIHdhcm4oYFNlcnZlciByZW5kZXJpbmcgY29udGV4dCBub3QgcHJvdmlkZWQuIE1ha2Ugc3VyZSB0byBvbmx5IGNhbGwgYCArXHJcbiAgICAgICAgICAgICAgICBgdXNlU1NSQ29udGV4dCgpIGNvbmRpdGlvbmFsbHkgaW4gdGhlIHNlcnZlciBidWlsZC5gKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGN0eDtcclxuICAgIH1cclxufTtcblxuZnVuY3Rpb24gaXNTaGFsbG93KHZhbHVlKSB7XHJcbiAgICByZXR1cm4gISEodmFsdWUgJiYgdmFsdWVbXCJfX3ZfaXNTaGFsbG93XCIgLyogSVNfU0hBTExPVyAqL10pO1xyXG59XG5cbmZ1bmN0aW9uIGluaXRDdXN0b21Gb3JtYXR0ZXIoKSB7XHJcbiAgICAvKiBlc2xpbnQtZGlzYWJsZSBuby1yZXN0cmljdGVkLWdsb2JhbHMgKi9cclxuICAgIGlmICghKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHx8IHR5cGVvZiB3aW5kb3cgPT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgY29uc3QgdnVlU3R5bGUgPSB7IHN0eWxlOiAnY29sb3I6IzNiYTc3NicgfTtcclxuICAgIGNvbnN0IG51bWJlclN0eWxlID0geyBzdHlsZTogJ2NvbG9yOiMwYjFiYzknIH07XHJcbiAgICBjb25zdCBzdHJpbmdTdHlsZSA9IHsgc3R5bGU6ICdjb2xvcjojYjYyZTI0JyB9O1xyXG4gICAgY29uc3Qga2V5d29yZFN0eWxlID0geyBzdHlsZTogJ2NvbG9yOiM5ZDI4OGMnIH07XHJcbiAgICAvLyBjdXN0b20gZm9ybWF0dGVyIGZvciBDaHJvbWVcclxuICAgIC8vIGh0dHBzOi8vd3d3Lm1hdHR6ZXVuZXJ0LmNvbS8yMDE2LzAyLzE5L2N1c3RvbS1jaHJvbWUtZGV2dG9vbHMtb2JqZWN0LWZvcm1hdHRlcnMuaHRtbFxyXG4gICAgY29uc3QgZm9ybWF0dGVyID0ge1xyXG4gICAgICAgIGhlYWRlcihvYmopIHtcclxuICAgICAgICAgICAgLy8gVE9ETyBhbHNvIGZvcm1hdCBDb21wb25lbnRQdWJsaWNJbnN0YW5jZSAmIGN0eC5zbG90cy9hdHRycyBpbiBzZXR1cFxyXG4gICAgICAgICAgICBpZiAoIWlzT2JqZWN0KG9iaikpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChvYmouX19pc1Z1ZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFsnZGl2JywgdnVlU3R5bGUsIGBWdWVJbnN0YW5jZWBdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKGlzUmVmKG9iaikpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBbXHJcbiAgICAgICAgICAgICAgICAgICAgJ2RpdicsXHJcbiAgICAgICAgICAgICAgICAgICAge30sXHJcbiAgICAgICAgICAgICAgICAgICAgWydzcGFuJywgdnVlU3R5bGUsIGdlblJlZkZsYWcob2JqKV0sXHJcbiAgICAgICAgICAgICAgICAgICAgJzwnLFxyXG4gICAgICAgICAgICAgICAgICAgIGZvcm1hdFZhbHVlKG9iai52YWx1ZSksXHJcbiAgICAgICAgICAgICAgICAgICAgYD5gXHJcbiAgICAgICAgICAgICAgICBdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKGlzUmVhY3RpdmUob2JqKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFtcclxuICAgICAgICAgICAgICAgICAgICAnZGl2JyxcclxuICAgICAgICAgICAgICAgICAgICB7fSxcclxuICAgICAgICAgICAgICAgICAgICBbJ3NwYW4nLCB2dWVTdHlsZSwgaXNTaGFsbG93KG9iaikgPyAnU2hhbGxvd1JlYWN0aXZlJyA6ICdSZWFjdGl2ZSddLFxyXG4gICAgICAgICAgICAgICAgICAgICc8JyxcclxuICAgICAgICAgICAgICAgICAgICBmb3JtYXRWYWx1ZShvYmopLFxyXG4gICAgICAgICAgICAgICAgICAgIGA+JHtpc1JlYWRvbmx5KG9iaikgPyBgIChyZWFkb25seSlgIDogYGB9YFxyXG4gICAgICAgICAgICAgICAgXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChpc1JlYWRvbmx5KG9iaikpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBbXHJcbiAgICAgICAgICAgICAgICAgICAgJ2RpdicsXHJcbiAgICAgICAgICAgICAgICAgICAge30sXHJcbiAgICAgICAgICAgICAgICAgICAgWydzcGFuJywgdnVlU3R5bGUsIGlzU2hhbGxvdyhvYmopID8gJ1NoYWxsb3dSZWFkb25seScgOiAnUmVhZG9ubHknXSxcclxuICAgICAgICAgICAgICAgICAgICAnPCcsXHJcbiAgICAgICAgICAgICAgICAgICAgZm9ybWF0VmFsdWUob2JqKSxcclxuICAgICAgICAgICAgICAgICAgICAnPidcclxuICAgICAgICAgICAgICAgIF07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBoYXNCb2R5KG9iaikge1xyXG4gICAgICAgICAgICByZXR1cm4gb2JqICYmIG9iai5fX2lzVnVlO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgYm9keShvYmopIHtcclxuICAgICAgICAgICAgaWYgKG9iaiAmJiBvYmouX19pc1Z1ZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFtcclxuICAgICAgICAgICAgICAgICAgICAnZGl2JyxcclxuICAgICAgICAgICAgICAgICAgICB7fSxcclxuICAgICAgICAgICAgICAgICAgICAuLi5mb3JtYXRJbnN0YW5jZShvYmouJClcclxuICAgICAgICAgICAgICAgIF07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgZnVuY3Rpb24gZm9ybWF0SW5zdGFuY2UoaW5zdGFuY2UpIHtcclxuICAgICAgICBjb25zdCBibG9ja3MgPSBbXTtcclxuICAgICAgICBpZiAoaW5zdGFuY2UudHlwZS5wcm9wcyAmJiBpbnN0YW5jZS5wcm9wcykge1xyXG4gICAgICAgICAgICBibG9ja3MucHVzaChjcmVhdGVJbnN0YW5jZUJsb2NrKCdwcm9wcycsIHRvUmF3KGluc3RhbmNlLnByb3BzKSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoaW5zdGFuY2Uuc2V0dXBTdGF0ZSAhPT0gRU1QVFlfT0JKKSB7XHJcbiAgICAgICAgICAgIGJsb2Nrcy5wdXNoKGNyZWF0ZUluc3RhbmNlQmxvY2soJ3NldHVwJywgaW5zdGFuY2Uuc2V0dXBTdGF0ZSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoaW5zdGFuY2UuZGF0YSAhPT0gRU1QVFlfT0JKKSB7XHJcbiAgICAgICAgICAgIGJsb2Nrcy5wdXNoKGNyZWF0ZUluc3RhbmNlQmxvY2soJ2RhdGEnLCB0b1JhdyhpbnN0YW5jZS5kYXRhKSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBjb21wdXRlZCA9IGV4dHJhY3RLZXlzKGluc3RhbmNlLCAnY29tcHV0ZWQnKTtcclxuICAgICAgICBpZiAoY29tcHV0ZWQpIHtcclxuICAgICAgICAgICAgYmxvY2tzLnB1c2goY3JlYXRlSW5zdGFuY2VCbG9jaygnY29tcHV0ZWQnLCBjb21wdXRlZCkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBpbmplY3RlZCA9IGV4dHJhY3RLZXlzKGluc3RhbmNlLCAnaW5qZWN0Jyk7XHJcbiAgICAgICAgaWYgKGluamVjdGVkKSB7XHJcbiAgICAgICAgICAgIGJsb2Nrcy5wdXNoKGNyZWF0ZUluc3RhbmNlQmxvY2soJ2luamVjdGVkJywgaW5qZWN0ZWQpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgYmxvY2tzLnB1c2goW1xyXG4gICAgICAgICAgICAnZGl2JyxcclxuICAgICAgICAgICAge30sXHJcbiAgICAgICAgICAgIFtcclxuICAgICAgICAgICAgICAgICdzcGFuJyxcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBzdHlsZToga2V5d29yZFN0eWxlLnN0eWxlICsgJztvcGFjaXR5OjAuNjYnXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgJyQgKGludGVybmFsKTogJ1xyXG4gICAgICAgICAgICBdLFxyXG4gICAgICAgICAgICBbJ29iamVjdCcsIHsgb2JqZWN0OiBpbnN0YW5jZSB9XVxyXG4gICAgICAgIF0pO1xyXG4gICAgICAgIHJldHVybiBibG9ja3M7XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiBjcmVhdGVJbnN0YW5jZUJsb2NrKHR5cGUsIHRhcmdldCkge1xyXG4gICAgICAgIHRhcmdldCA9IGV4dGVuZCh7fSwgdGFyZ2V0KTtcclxuICAgICAgICBpZiAoIU9iamVjdC5rZXlzKHRhcmdldCkubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBbJ3NwYW4nLCB7fV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBbXHJcbiAgICAgICAgICAgICdkaXYnLFxyXG4gICAgICAgICAgICB7IHN0eWxlOiAnbGluZS1oZWlnaHQ6MS4yNWVtO21hcmdpbi1ib3R0b206MC42ZW0nIH0sXHJcbiAgICAgICAgICAgIFtcclxuICAgICAgICAgICAgICAgICdkaXYnLFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHN0eWxlOiAnY29sb3I6IzQ3NjU4MidcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB0eXBlXHJcbiAgICAgICAgICAgIF0sXHJcbiAgICAgICAgICAgIFtcclxuICAgICAgICAgICAgICAgICdkaXYnLFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHN0eWxlOiAncGFkZGluZy1sZWZ0OjEuMjVlbSdcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAuLi5PYmplY3Qua2V5cyh0YXJnZXQpLm1hcChrZXkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICdkaXYnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7fSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgWydzcGFuJywga2V5d29yZFN0eWxlLCBrZXkgKyAnOiAnXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9ybWF0VmFsdWUodGFyZ2V0W2tleV0sIGZhbHNlKVxyXG4gICAgICAgICAgICAgICAgICAgIF07XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICBdXHJcbiAgICAgICAgXTtcclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIGZvcm1hdFZhbHVlKHYsIGFzUmF3ID0gdHJ1ZSkge1xyXG4gICAgICAgIGlmICh0eXBlb2YgdiA9PT0gJ251bWJlcicpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFsnc3BhbicsIG51bWJlclN0eWxlLCB2XTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAodHlwZW9mIHYgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBbJ3NwYW4nLCBzdHJpbmdTdHlsZSwgSlNPTi5zdHJpbmdpZnkodildO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICh0eXBlb2YgdiA9PT0gJ2Jvb2xlYW4nKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBbJ3NwYW4nLCBrZXl3b3JkU3R5bGUsIHZdO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChpc09iamVjdCh2KSkge1xyXG4gICAgICAgICAgICByZXR1cm4gWydvYmplY3QnLCB7IG9iamVjdDogYXNSYXcgPyB0b1Jhdyh2KSA6IHYgfV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gWydzcGFuJywgc3RyaW5nU3R5bGUsIFN0cmluZyh2KV07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gZXh0cmFjdEtleXMoaW5zdGFuY2UsIHR5cGUpIHtcclxuICAgICAgICBjb25zdCBDb21wID0gaW5zdGFuY2UudHlwZTtcclxuICAgICAgICBpZiAoaXNGdW5jdGlvbihDb21wKSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGV4dHJhY3RlZCA9IHt9O1xyXG4gICAgICAgIGZvciAoY29uc3Qga2V5IGluIGluc3RhbmNlLmN0eCkge1xyXG4gICAgICAgICAgICBpZiAoaXNLZXlPZlR5cGUoQ29tcCwga2V5LCB0eXBlKSkge1xyXG4gICAgICAgICAgICAgICAgZXh0cmFjdGVkW2tleV0gPSBpbnN0YW5jZS5jdHhba2V5XTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZXh0cmFjdGVkO1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gaXNLZXlPZlR5cGUoQ29tcCwga2V5LCB0eXBlKSB7XHJcbiAgICAgICAgY29uc3Qgb3B0cyA9IENvbXBbdHlwZV07XHJcbiAgICAgICAgaWYgKChpc0FycmF5KG9wdHMpICYmIG9wdHMuaW5jbHVkZXMoa2V5KSkgfHxcclxuICAgICAgICAgICAgKGlzT2JqZWN0KG9wdHMpICYmIGtleSBpbiBvcHRzKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKENvbXAuZXh0ZW5kcyAmJiBpc0tleU9mVHlwZShDb21wLmV4dGVuZHMsIGtleSwgdHlwZSkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChDb21wLm1peGlucyAmJiBDb21wLm1peGlucy5zb21lKG0gPT4gaXNLZXlPZlR5cGUobSwga2V5LCB0eXBlKSkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gZ2VuUmVmRmxhZyh2KSB7XHJcbiAgICAgICAgaWYgKGlzU2hhbGxvdyh2KSkge1xyXG4gICAgICAgICAgICByZXR1cm4gYFNoYWxsb3dSZWZgO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodi5lZmZlY3QpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGBDb21wdXRlZFJlZmA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBgUmVmYDtcclxuICAgIH1cclxuICAgIGlmICh3aW5kb3cuZGV2dG9vbHNGb3JtYXR0ZXJzKSB7XHJcbiAgICAgICAgd2luZG93LmRldnRvb2xzRm9ybWF0dGVycy5wdXNoKGZvcm1hdHRlcik7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICB3aW5kb3cuZGV2dG9vbHNGb3JtYXR0ZXJzID0gW2Zvcm1hdHRlcl07XHJcbiAgICB9XHJcbn1cblxuZnVuY3Rpb24gd2l0aE1lbW8obWVtbywgcmVuZGVyLCBjYWNoZSwgaW5kZXgpIHtcclxuICAgIGNvbnN0IGNhY2hlZCA9IGNhY2hlW2luZGV4XTtcclxuICAgIGlmIChjYWNoZWQgJiYgaXNNZW1vU2FtZShjYWNoZWQsIG1lbW8pKSB7XHJcbiAgICAgICAgcmV0dXJuIGNhY2hlZDtcclxuICAgIH1cclxuICAgIGNvbnN0IHJldCA9IHJlbmRlcigpO1xyXG4gICAgLy8gc2hhbGxvdyBjbG9uZVxyXG4gICAgcmV0Lm1lbW8gPSBtZW1vLnNsaWNlKCk7XHJcbiAgICByZXR1cm4gKGNhY2hlW2luZGV4XSA9IHJldCk7XHJcbn1cclxuZnVuY3Rpb24gaXNNZW1vU2FtZShjYWNoZWQsIG1lbW8pIHtcclxuICAgIGNvbnN0IHByZXYgPSBjYWNoZWQubWVtbztcclxuICAgIGlmIChwcmV2Lmxlbmd0aCAhPSBtZW1vLmxlbmd0aCkge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcHJldi5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGlmIChwcmV2W2ldICE9PSBtZW1vW2ldKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvLyBtYWtlIHN1cmUgdG8gbGV0IHBhcmVudCBibG9jayB0cmFjayBpdCB3aGVuIHJldHVybmluZyBjYWNoZWRcclxuICAgIGlmIChpc0Jsb2NrVHJlZUVuYWJsZWQgPiAwICYmIGN1cnJlbnRCbG9jaykge1xyXG4gICAgICAgIGN1cnJlbnRCbG9jay5wdXNoKGNhY2hlZCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdHJ1ZTtcclxufVxuXG4vLyBDb3JlIEFQSSAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuY29uc3QgdmVyc2lvbiA9IFwiMy4yLjMzXCI7XHJcbmNvbnN0IF9zc3JVdGlscyA9IHtcclxuICAgIGNyZWF0ZUNvbXBvbmVudEluc3RhbmNlLFxyXG4gICAgc2V0dXBDb21wb25lbnQsXHJcbiAgICByZW5kZXJDb21wb25lbnRSb290LFxyXG4gICAgc2V0Q3VycmVudFJlbmRlcmluZ0luc3RhbmNlLFxyXG4gICAgaXNWTm9kZSxcclxuICAgIG5vcm1hbGl6ZVZOb2RlXHJcbn07XHJcbi8qKlxyXG4gKiBTU1IgdXRpbHMgZm9yIFxcQHZ1ZS9zZXJ2ZXItcmVuZGVyZXIuIE9ubHkgZXhwb3NlZCBpbiBjanMgYnVpbGRzLlxyXG4gKiBAaW50ZXJuYWxcclxuICovXHJcbmNvbnN0IHNzclV0aWxzID0gKF9zc3JVdGlscyApO1xyXG4vKipcclxuICogQGludGVybmFsIG9ubHkgZXhwb3NlZCBpbiBjb21wYXQgYnVpbGRzXHJcbiAqL1xyXG5jb25zdCByZXNvbHZlRmlsdGVyID0gbnVsbDtcclxuLyoqXHJcbiAqIEBpbnRlcm5hbCBvbmx5IGV4cG9zZWQgaW4gY29tcGF0IGJ1aWxkcy5cclxuICovXHJcbmNvbnN0IGNvbXBhdFV0aWxzID0gKG51bGwpO1xuXG5leHBvcnQgeyBCYXNlVHJhbnNpdGlvbiwgQ29tbWVudCwgRnJhZ21lbnQsIEtlZXBBbGl2ZSwgU3RhdGljLCBTdXNwZW5zZSwgVGVsZXBvcnQsIFRleHQsIGNhbGxXaXRoQXN5bmNFcnJvckhhbmRsaW5nLCBjYWxsV2l0aEVycm9ySGFuZGxpbmcsIGNsb25lVk5vZGUsIGNvbXBhdFV0aWxzLCBjb21wdXRlZCwgY3JlYXRlQmxvY2ssIGNyZWF0ZUNvbW1lbnRWTm9kZSwgY3JlYXRlRWxlbWVudEJsb2NrLCBjcmVhdGVCYXNlVk5vZGUgYXMgY3JlYXRlRWxlbWVudFZOb2RlLCBjcmVhdGVIeWRyYXRpb25SZW5kZXJlciwgY3JlYXRlUHJvcHNSZXN0UHJveHksIGNyZWF0ZVJlbmRlcmVyLCBjcmVhdGVTbG90cywgY3JlYXRlU3RhdGljVk5vZGUsIGNyZWF0ZVRleHRWTm9kZSwgY3JlYXRlVk5vZGUsIGRlZmluZUFzeW5jQ29tcG9uZW50LCBkZWZpbmVDb21wb25lbnQsIGRlZmluZUVtaXRzLCBkZWZpbmVFeHBvc2UsIGRlZmluZVByb3BzLCBkZXZ0b29scywgZ2V0Q3VycmVudEluc3RhbmNlLCBnZXRUcmFuc2l0aW9uUmF3Q2hpbGRyZW4sIGd1YXJkUmVhY3RpdmVQcm9wcywgaCwgaGFuZGxlRXJyb3IsIGluaXRDdXN0b21Gb3JtYXR0ZXIsIGluamVjdCwgaXNNZW1vU2FtZSwgaXNSdW50aW1lT25seSwgaXNWTm9kZSwgbWVyZ2VEZWZhdWx0cywgbWVyZ2VQcm9wcywgbmV4dFRpY2ssIG9uQWN0aXZhdGVkLCBvbkJlZm9yZU1vdW50LCBvbkJlZm9yZVVubW91bnQsIG9uQmVmb3JlVXBkYXRlLCBvbkRlYWN0aXZhdGVkLCBvbkVycm9yQ2FwdHVyZWQsIG9uTW91bnRlZCwgb25SZW5kZXJUcmFja2VkLCBvblJlbmRlclRyaWdnZXJlZCwgb25TZXJ2ZXJQcmVmZXRjaCwgb25Vbm1vdW50ZWQsIG9uVXBkYXRlZCwgb3BlbkJsb2NrLCBwb3BTY29wZUlkLCBwcm92aWRlLCBwdXNoU2NvcGVJZCwgcXVldWVQb3N0Rmx1c2hDYiwgcmVnaXN0ZXJSdW50aW1lQ29tcGlsZXIsIHJlbmRlckxpc3QsIHJlbmRlclNsb3QsIHJlc29sdmVDb21wb25lbnQsIHJlc29sdmVEaXJlY3RpdmUsIHJlc29sdmVEeW5hbWljQ29tcG9uZW50LCByZXNvbHZlRmlsdGVyLCByZXNvbHZlVHJhbnNpdGlvbkhvb2tzLCBzZXRCbG9ja1RyYWNraW5nLCBzZXREZXZ0b29sc0hvb2ssIHNldFRyYW5zaXRpb25Ib29rcywgc3NyQ29udGV4dEtleSwgc3NyVXRpbHMsIHRvSGFuZGxlcnMsIHRyYW5zZm9ybVZOb2RlQXJncywgdXNlQXR0cnMsIHVzZVNTUkNvbnRleHQsIHVzZVNsb3RzLCB1c2VUcmFuc2l0aW9uU3RhdGUsIHZlcnNpb24sIHdhcm4sIHdhdGNoLCB3YXRjaEVmZmVjdCwgd2F0Y2hQb3N0RWZmZWN0LCB3YXRjaFN5bmNFZmZlY3QsIHdpdGhBc3luY0NvbnRleHQsIHdpdGhDdHgsIHdpdGhEZWZhdWx0cywgd2l0aERpcmVjdGl2ZXMsIHdpdGhNZW1vLCB3aXRoU2NvcGVJZCB9O1xuIiwiaW1wb3J0IHsgY2FtZWxpemUsIHdhcm4sIGNhbGxXaXRoQXN5bmNFcnJvckhhbmRsaW5nLCBkZWZpbmVDb21wb25lbnQsIG5leHRUaWNrLCBjcmVhdGVWTm9kZSwgZ2V0Q3VycmVudEluc3RhbmNlLCB3YXRjaFBvc3RFZmZlY3QsIG9uTW91bnRlZCwgb25Vbm1vdW50ZWQsIEZyYWdtZW50LCBTdGF0aWMsIGgsIEJhc2VUcmFuc2l0aW9uLCB1c2VUcmFuc2l0aW9uU3RhdGUsIG9uVXBkYXRlZCwgdG9SYXcsIGdldFRyYW5zaXRpb25SYXdDaGlsZHJlbiwgc2V0VHJhbnNpdGlvbkhvb2tzLCByZXNvbHZlVHJhbnNpdGlvbkhvb2tzLCBjcmVhdGVSZW5kZXJlciwgaXNSdW50aW1lT25seSwgY3JlYXRlSHlkcmF0aW9uUmVuZGVyZXIgfSBmcm9tICdAdnVlL3J1bnRpbWUtY29yZSc7XG5leHBvcnQgKiBmcm9tICdAdnVlL3J1bnRpbWUtY29yZSc7XG5pbXBvcnQgeyBpc1N0cmluZywgaXNBcnJheSwgaHlwaGVuYXRlLCBjYXBpdGFsaXplLCBpc1NwZWNpYWxCb29sZWFuQXR0ciwgaW5jbHVkZUJvb2xlYW5BdHRyLCBpc09uLCBpc01vZGVsTGlzdGVuZXIsIGlzRnVuY3Rpb24sIHRvTnVtYmVyLCBjYW1lbGl6ZSBhcyBjYW1lbGl6ZSQxLCBleHRlbmQsIEVNUFRZX09CSiwgaXNPYmplY3QsIGludm9rZUFycmF5Rm5zLCBsb29zZUluZGV4T2YsIGlzU2V0LCBsb29zZUVxdWFsLCBpc0hUTUxUYWcsIGlzU1ZHVGFnIH0gZnJvbSAnQHZ1ZS9zaGFyZWQnO1xuXG5jb25zdCBzdmdOUyA9ICdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Zyc7XHJcbmNvbnN0IGRvYyA9ICh0eXBlb2YgZG9jdW1lbnQgIT09ICd1bmRlZmluZWQnID8gZG9jdW1lbnQgOiBudWxsKTtcclxuY29uc3QgdGVtcGxhdGVDb250YWluZXIgPSBkb2MgJiYgLyojX19QVVJFX18qLyBkb2MuY3JlYXRlRWxlbWVudCgndGVtcGxhdGUnKTtcclxuY29uc3Qgbm9kZU9wcyA9IHtcclxuICAgIGluc2VydDogKGNoaWxkLCBwYXJlbnQsIGFuY2hvcikgPT4ge1xyXG4gICAgICAgIHBhcmVudC5pbnNlcnRCZWZvcmUoY2hpbGQsIGFuY2hvciB8fCBudWxsKTtcclxuICAgIH0sXHJcbiAgICByZW1vdmU6IGNoaWxkID0+IHtcclxuICAgICAgICBjb25zdCBwYXJlbnQgPSBjaGlsZC5wYXJlbnROb2RlO1xyXG4gICAgICAgIGlmIChwYXJlbnQpIHtcclxuICAgICAgICAgICAgcGFyZW50LnJlbW92ZUNoaWxkKGNoaWxkKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgY3JlYXRlRWxlbWVudDogKHRhZywgaXNTVkcsIGlzLCBwcm9wcykgPT4ge1xyXG4gICAgICAgIGNvbnN0IGVsID0gaXNTVkdcclxuICAgICAgICAgICAgPyBkb2MuY3JlYXRlRWxlbWVudE5TKHN2Z05TLCB0YWcpXHJcbiAgICAgICAgICAgIDogZG9jLmNyZWF0ZUVsZW1lbnQodGFnLCBpcyA/IHsgaXMgfSA6IHVuZGVmaW5lZCk7XHJcbiAgICAgICAgaWYgKHRhZyA9PT0gJ3NlbGVjdCcgJiYgcHJvcHMgJiYgcHJvcHMubXVsdGlwbGUgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICBlbC5zZXRBdHRyaWJ1dGUoJ211bHRpcGxlJywgcHJvcHMubXVsdGlwbGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZWw7XHJcbiAgICB9LFxyXG4gICAgY3JlYXRlVGV4dDogdGV4dCA9PiBkb2MuY3JlYXRlVGV4dE5vZGUodGV4dCksXHJcbiAgICBjcmVhdGVDb21tZW50OiB0ZXh0ID0+IGRvYy5jcmVhdGVDb21tZW50KHRleHQpLFxyXG4gICAgc2V0VGV4dDogKG5vZGUsIHRleHQpID0+IHtcclxuICAgICAgICBub2RlLm5vZGVWYWx1ZSA9IHRleHQ7XHJcbiAgICB9LFxyXG4gICAgc2V0RWxlbWVudFRleHQ6IChlbCwgdGV4dCkgPT4ge1xyXG4gICAgICAgIGVsLnRleHRDb250ZW50ID0gdGV4dDtcclxuICAgIH0sXHJcbiAgICBwYXJlbnROb2RlOiBub2RlID0+IG5vZGUucGFyZW50Tm9kZSxcclxuICAgIG5leHRTaWJsaW5nOiBub2RlID0+IG5vZGUubmV4dFNpYmxpbmcsXHJcbiAgICBxdWVyeVNlbGVjdG9yOiBzZWxlY3RvciA9PiBkb2MucXVlcnlTZWxlY3RvcihzZWxlY3RvciksXHJcbiAgICBzZXRTY29wZUlkKGVsLCBpZCkge1xyXG4gICAgICAgIGVsLnNldEF0dHJpYnV0ZShpZCwgJycpO1xyXG4gICAgfSxcclxuICAgIGNsb25lTm9kZShlbCkge1xyXG4gICAgICAgIGNvbnN0IGNsb25lZCA9IGVsLmNsb25lTm9kZSh0cnVlKTtcclxuICAgICAgICAvLyAjMzA3MlxyXG4gICAgICAgIC8vIC0gaW4gYHBhdGNoRE9NUHJvcGAsIHdlIHN0b3JlIHRoZSBhY3R1YWwgdmFsdWUgaW4gdGhlIGBlbC5fdmFsdWVgIHByb3BlcnR5LlxyXG4gICAgICAgIC8vIC0gbm9ybWFsbHksIGVsZW1lbnRzIHVzaW5nIGA6dmFsdWVgIGJpbmRpbmdzIHdpbGwgbm90IGJlIGhvaXN0ZWQsIGJ1dCBpZlxyXG4gICAgICAgIC8vICAgdGhlIGJvdW5kIHZhbHVlIGlzIGEgY29uc3RhbnQsIGUuZy4gYDp2YWx1ZT1cInRydWVcImAgLSB0aGV5IGRvIGdldFxyXG4gICAgICAgIC8vICAgaG9pc3RlZC5cclxuICAgICAgICAvLyAtIGluIHByb2R1Y3Rpb24sIGhvaXN0ZWQgbm9kZXMgYXJlIGNsb25lZCB3aGVuIHN1YnNlcXVlbnQgaW5zZXJ0cywgYnV0XHJcbiAgICAgICAgLy8gICBjbG9uZU5vZGUoKSBkb2VzIG5vdCBjb3B5IHRoZSBjdXN0b20gcHJvcGVydHkgd2UgYXR0YWNoZWQuXHJcbiAgICAgICAgLy8gLSBUaGlzIG1heSBuZWVkIHRvIGFjY291bnQgZm9yIG90aGVyIGN1c3RvbSBET00gcHJvcGVydGllcyB3ZSBhdHRhY2ggdG9cclxuICAgICAgICAvLyAgIGVsZW1lbnRzIGluIGFkZGl0aW9uIHRvIGBfdmFsdWVgIGluIHRoZSBmdXR1cmUuXHJcbiAgICAgICAgaWYgKGBfdmFsdWVgIGluIGVsKSB7XHJcbiAgICAgICAgICAgIGNsb25lZC5fdmFsdWUgPSBlbC5fdmFsdWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBjbG9uZWQ7XHJcbiAgICB9LFxyXG4gICAgLy8gX19VTlNBRkVfX1xyXG4gICAgLy8gUmVhc29uOiBpbm5lckhUTUwuXHJcbiAgICAvLyBTdGF0aWMgY29udGVudCBoZXJlIGNhbiBvbmx5IGNvbWUgZnJvbSBjb21waWxlZCB0ZW1wbGF0ZXMuXHJcbiAgICAvLyBBcyBsb25nIGFzIHRoZSB1c2VyIG9ubHkgdXNlcyB0cnVzdGVkIHRlbXBsYXRlcywgdGhpcyBpcyBzYWZlLlxyXG4gICAgaW5zZXJ0U3RhdGljQ29udGVudChjb250ZW50LCBwYXJlbnQsIGFuY2hvciwgaXNTVkcsIHN0YXJ0LCBlbmQpIHtcclxuICAgICAgICAvLyA8cGFyZW50PiBiZWZvcmUgfCBmaXJzdCAuLi4gbGFzdCB8IGFuY2hvciA8L3BhcmVudD5cclxuICAgICAgICBjb25zdCBiZWZvcmUgPSBhbmNob3IgPyBhbmNob3IucHJldmlvdXNTaWJsaW5nIDogcGFyZW50Lmxhc3RDaGlsZDtcclxuICAgICAgICAvLyAjNTMwOCBjYW4gb25seSB0YWtlIGNhY2hlZCBwYXRoIGlmOlxyXG4gICAgICAgIC8vIC0gaGFzIGEgc2luZ2xlIHJvb3Qgbm9kZVxyXG4gICAgICAgIC8vIC0gbmV4dFNpYmxpbmcgaW5mbyBpcyBzdGlsbCBhdmFpbGFibGVcclxuICAgICAgICBpZiAoc3RhcnQgJiYgKHN0YXJ0ID09PSBlbmQgfHwgc3RhcnQubmV4dFNpYmxpbmcpKSB7XHJcbiAgICAgICAgICAgIC8vIGNhY2hlZFxyXG4gICAgICAgICAgICB3aGlsZSAodHJ1ZSkge1xyXG4gICAgICAgICAgICAgICAgcGFyZW50Lmluc2VydEJlZm9yZShzdGFydC5jbG9uZU5vZGUodHJ1ZSksIGFuY2hvcik7XHJcbiAgICAgICAgICAgICAgICBpZiAoc3RhcnQgPT09IGVuZCB8fCAhKHN0YXJ0ID0gc3RhcnQubmV4dFNpYmxpbmcpKVxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBmcmVzaCBpbnNlcnRcclxuICAgICAgICAgICAgdGVtcGxhdGVDb250YWluZXIuaW5uZXJIVE1MID0gaXNTVkcgPyBgPHN2Zz4ke2NvbnRlbnR9PC9zdmc+YCA6IGNvbnRlbnQ7XHJcbiAgICAgICAgICAgIGNvbnN0IHRlbXBsYXRlID0gdGVtcGxhdGVDb250YWluZXIuY29udGVudDtcclxuICAgICAgICAgICAgaWYgKGlzU1ZHKSB7XHJcbiAgICAgICAgICAgICAgICAvLyByZW1vdmUgb3V0ZXIgc3ZnIHdyYXBwZXJcclxuICAgICAgICAgICAgICAgIGNvbnN0IHdyYXBwZXIgPSB0ZW1wbGF0ZS5maXJzdENoaWxkO1xyXG4gICAgICAgICAgICAgICAgd2hpbGUgKHdyYXBwZXIuZmlyc3RDaGlsZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlLmFwcGVuZENoaWxkKHdyYXBwZXIuZmlyc3RDaGlsZCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZS5yZW1vdmVDaGlsZCh3cmFwcGVyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBwYXJlbnQuaW5zZXJ0QmVmb3JlKHRlbXBsYXRlLCBhbmNob3IpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gW1xyXG4gICAgICAgICAgICAvLyBmaXJzdFxyXG4gICAgICAgICAgICBiZWZvcmUgPyBiZWZvcmUubmV4dFNpYmxpbmcgOiBwYXJlbnQuZmlyc3RDaGlsZCxcclxuICAgICAgICAgICAgLy8gbGFzdFxyXG4gICAgICAgICAgICBhbmNob3IgPyBhbmNob3IucHJldmlvdXNTaWJsaW5nIDogcGFyZW50Lmxhc3RDaGlsZFxyXG4gICAgICAgIF07XHJcbiAgICB9XHJcbn07XG5cbi8vIGNvbXBpbGVyIHNob3VsZCBub3JtYWxpemUgY2xhc3MgKyA6Y2xhc3MgYmluZGluZ3Mgb24gdGhlIHNhbWUgZWxlbWVudFxyXG4vLyBpbnRvIGEgc2luZ2xlIGJpbmRpbmcgWydzdGF0aWNDbGFzcycsIGR5bmFtaWNdXHJcbmZ1bmN0aW9uIHBhdGNoQ2xhc3MoZWwsIHZhbHVlLCBpc1NWRykge1xyXG4gICAgLy8gZGlyZWN0bHkgc2V0dGluZyBjbGFzc05hbWUgc2hvdWxkIGJlIGZhc3RlciB0aGFuIHNldEF0dHJpYnV0ZSBpbiB0aGVvcnlcclxuICAgIC8vIGlmIHRoaXMgaXMgYW4gZWxlbWVudCBkdXJpbmcgYSB0cmFuc2l0aW9uLCB0YWtlIHRoZSB0ZW1wb3JhcnkgdHJhbnNpdGlvblxyXG4gICAgLy8gY2xhc3NlcyBpbnRvIGFjY291bnQuXHJcbiAgICBjb25zdCB0cmFuc2l0aW9uQ2xhc3NlcyA9IGVsLl92dGM7XHJcbiAgICBpZiAodHJhbnNpdGlvbkNsYXNzZXMpIHtcclxuICAgICAgICB2YWx1ZSA9ICh2YWx1ZSA/IFt2YWx1ZSwgLi4udHJhbnNpdGlvbkNsYXNzZXNdIDogWy4uLnRyYW5zaXRpb25DbGFzc2VzXSkuam9pbignICcpO1xyXG4gICAgfVxyXG4gICAgaWYgKHZhbHVlID09IG51bGwpIHtcclxuICAgICAgICBlbC5yZW1vdmVBdHRyaWJ1dGUoJ2NsYXNzJyk7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChpc1NWRykge1xyXG4gICAgICAgIGVsLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCB2YWx1ZSk7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICBlbC5jbGFzc05hbWUgPSB2YWx1ZTtcclxuICAgIH1cclxufVxuXG5mdW5jdGlvbiBwYXRjaFN0eWxlKGVsLCBwcmV2LCBuZXh0KSB7XHJcbiAgICBjb25zdCBzdHlsZSA9IGVsLnN0eWxlO1xyXG4gICAgY29uc3QgaXNDc3NTdHJpbmcgPSBpc1N0cmluZyhuZXh0KTtcclxuICAgIGlmIChuZXh0ICYmICFpc0Nzc1N0cmluZykge1xyXG4gICAgICAgIGZvciAoY29uc3Qga2V5IGluIG5leHQpIHtcclxuICAgICAgICAgICAgc2V0U3R5bGUoc3R5bGUsIGtleSwgbmV4dFtrZXldKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHByZXYgJiYgIWlzU3RyaW5nKHByZXYpKSB7XHJcbiAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIHByZXYpIHtcclxuICAgICAgICAgICAgICAgIGlmIChuZXh0W2tleV0gPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHNldFN0eWxlKHN0eWxlLCBrZXksICcnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIGNvbnN0IGN1cnJlbnREaXNwbGF5ID0gc3R5bGUuZGlzcGxheTtcclxuICAgICAgICBpZiAoaXNDc3NTdHJpbmcpIHtcclxuICAgICAgICAgICAgaWYgKHByZXYgIT09IG5leHQpIHtcclxuICAgICAgICAgICAgICAgIHN0eWxlLmNzc1RleHQgPSBuZXh0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHByZXYpIHtcclxuICAgICAgICAgICAgZWwucmVtb3ZlQXR0cmlidXRlKCdzdHlsZScpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBpbmRpY2F0ZXMgdGhhdCB0aGUgYGRpc3BsYXlgIG9mIHRoZSBlbGVtZW50IGlzIGNvbnRyb2xsZWQgYnkgYHYtc2hvd2AsXHJcbiAgICAgICAgLy8gc28gd2UgYWx3YXlzIGtlZXAgdGhlIGN1cnJlbnQgYGRpc3BsYXlgIHZhbHVlIHJlZ2FyZGxlc3Mgb2YgdGhlIGBzdHlsZWBcclxuICAgICAgICAvLyB2YWx1ZSwgdGh1cyBoYW5kaW5nIG92ZXIgY29udHJvbCB0byBgdi1zaG93YC5cclxuICAgICAgICBpZiAoJ192b2QnIGluIGVsKSB7XHJcbiAgICAgICAgICAgIHN0eWxlLmRpc3BsYXkgPSBjdXJyZW50RGlzcGxheTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuY29uc3QgaW1wb3J0YW50UkUgPSAvXFxzKiFpbXBvcnRhbnQkLztcclxuZnVuY3Rpb24gc2V0U3R5bGUoc3R5bGUsIG5hbWUsIHZhbCkge1xyXG4gICAgaWYgKGlzQXJyYXkodmFsKSkge1xyXG4gICAgICAgIHZhbC5mb3JFYWNoKHYgPT4gc2V0U3R5bGUoc3R5bGUsIG5hbWUsIHYpKTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIGlmICh2YWwgPT0gbnVsbClcclxuICAgICAgICAgICAgdmFsID0gJyc7XHJcbiAgICAgICAgaWYgKG5hbWUuc3RhcnRzV2l0aCgnLS0nKSkge1xyXG4gICAgICAgICAgICAvLyBjdXN0b20gcHJvcGVydHkgZGVmaW5pdGlvblxyXG4gICAgICAgICAgICBzdHlsZS5zZXRQcm9wZXJ0eShuYW1lLCB2YWwpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgY29uc3QgcHJlZml4ZWQgPSBhdXRvUHJlZml4KHN0eWxlLCBuYW1lKTtcclxuICAgICAgICAgICAgaWYgKGltcG9ydGFudFJFLnRlc3QodmFsKSkge1xyXG4gICAgICAgICAgICAgICAgLy8gIWltcG9ydGFudFxyXG4gICAgICAgICAgICAgICAgc3R5bGUuc2V0UHJvcGVydHkoaHlwaGVuYXRlKHByZWZpeGVkKSwgdmFsLnJlcGxhY2UoaW1wb3J0YW50UkUsICcnKSwgJ2ltcG9ydGFudCcpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgc3R5bGVbcHJlZml4ZWRdID0gdmFsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbmNvbnN0IHByZWZpeGVzID0gWydXZWJraXQnLCAnTW96JywgJ21zJ107XHJcbmNvbnN0IHByZWZpeENhY2hlID0ge307XHJcbmZ1bmN0aW9uIGF1dG9QcmVmaXgoc3R5bGUsIHJhd05hbWUpIHtcclxuICAgIGNvbnN0IGNhY2hlZCA9IHByZWZpeENhY2hlW3Jhd05hbWVdO1xyXG4gICAgaWYgKGNhY2hlZCkge1xyXG4gICAgICAgIHJldHVybiBjYWNoZWQ7XHJcbiAgICB9XHJcbiAgICBsZXQgbmFtZSA9IGNhbWVsaXplKHJhd05hbWUpO1xyXG4gICAgaWYgKG5hbWUgIT09ICdmaWx0ZXInICYmIG5hbWUgaW4gc3R5bGUpIHtcclxuICAgICAgICByZXR1cm4gKHByZWZpeENhY2hlW3Jhd05hbWVdID0gbmFtZSk7XHJcbiAgICB9XHJcbiAgICBuYW1lID0gY2FwaXRhbGl6ZShuYW1lKTtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcHJlZml4ZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBjb25zdCBwcmVmaXhlZCA9IHByZWZpeGVzW2ldICsgbmFtZTtcclxuICAgICAgICBpZiAocHJlZml4ZWQgaW4gc3R5bGUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIChwcmVmaXhDYWNoZVtyYXdOYW1lXSA9IHByZWZpeGVkKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcmF3TmFtZTtcclxufVxuXG5jb25zdCB4bGlua05TID0gJ2h0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsnO1xyXG5mdW5jdGlvbiBwYXRjaEF0dHIoZWwsIGtleSwgdmFsdWUsIGlzU1ZHLCBpbnN0YW5jZSkge1xyXG4gICAgaWYgKGlzU1ZHICYmIGtleS5zdGFydHNXaXRoKCd4bGluazonKSkge1xyXG4gICAgICAgIGlmICh2YWx1ZSA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIGVsLnJlbW92ZUF0dHJpYnV0ZU5TKHhsaW5rTlMsIGtleS5zbGljZSg2LCBrZXkubGVuZ3RoKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBlbC5zZXRBdHRyaWJ1dGVOUyh4bGlua05TLCBrZXksIHZhbHVlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICAvLyBub3RlIHdlIGFyZSBvbmx5IGNoZWNraW5nIGJvb2xlYW4gYXR0cmlidXRlcyB0aGF0IGRvbid0IGhhdmUgYVxyXG4gICAgICAgIC8vIGNvcnJlc3BvbmRpbmcgZG9tIHByb3Agb2YgdGhlIHNhbWUgbmFtZSBoZXJlLlxyXG4gICAgICAgIGNvbnN0IGlzQm9vbGVhbiA9IGlzU3BlY2lhbEJvb2xlYW5BdHRyKGtleSk7XHJcbiAgICAgICAgaWYgKHZhbHVlID09IG51bGwgfHwgKGlzQm9vbGVhbiAmJiAhaW5jbHVkZUJvb2xlYW5BdHRyKHZhbHVlKSkpIHtcclxuICAgICAgICAgICAgZWwucmVtb3ZlQXR0cmlidXRlKGtleSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBlbC5zZXRBdHRyaWJ1dGUoa2V5LCBpc0Jvb2xlYW4gPyAnJyA6IHZhbHVlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cblxuLy8gX19VTlNBRkVfX1xyXG4vLyBmdW5jdGlvbnMuIFRoZSB1c2VyIGlzIHJlc3BvbnNpYmxlIGZvciB1c2luZyB0aGVtIHdpdGggb25seSB0cnVzdGVkIGNvbnRlbnQuXHJcbmZ1bmN0aW9uIHBhdGNoRE9NUHJvcChlbCwga2V5LCB2YWx1ZSwgXHJcbi8vIHRoZSBmb2xsb3dpbmcgYXJncyBhcmUgcGFzc2VkIG9ubHkgZHVlIHRvIHBvdGVudGlhbCBpbm5lckhUTUwvdGV4dENvbnRlbnRcclxuLy8gb3ZlcnJpZGluZyBleGlzdGluZyBWTm9kZXMsIGluIHdoaWNoIGNhc2UgdGhlIG9sZCB0cmVlIG11c3QgYmUgcHJvcGVybHlcclxuLy8gdW5tb3VudGVkLlxyXG5wcmV2Q2hpbGRyZW4sIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIHVubW91bnRDaGlsZHJlbikge1xyXG4gICAgaWYgKGtleSA9PT0gJ2lubmVySFRNTCcgfHwga2V5ID09PSAndGV4dENvbnRlbnQnKSB7XHJcbiAgICAgICAgaWYgKHByZXZDaGlsZHJlbikge1xyXG4gICAgICAgICAgICB1bm1vdW50Q2hpbGRyZW4ocHJldkNoaWxkcmVuLCBwYXJlbnRDb21wb25lbnQsIHBhcmVudFN1c3BlbnNlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxba2V5XSA9IHZhbHVlID09IG51bGwgPyAnJyA6IHZhbHVlO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGlmIChrZXkgPT09ICd2YWx1ZScgJiZcclxuICAgICAgICBlbC50YWdOYW1lICE9PSAnUFJPR1JFU1MnICYmXHJcbiAgICAgICAgLy8gY3VzdG9tIGVsZW1lbnRzIG1heSB1c2UgX3ZhbHVlIGludGVybmFsbHlcclxuICAgICAgICAhZWwudGFnTmFtZS5pbmNsdWRlcygnLScpKSB7XHJcbiAgICAgICAgLy8gc3RvcmUgdmFsdWUgYXMgX3ZhbHVlIGFzIHdlbGwgc2luY2VcclxuICAgICAgICAvLyBub24tc3RyaW5nIHZhbHVlcyB3aWxsIGJlIHN0cmluZ2lmaWVkLlxyXG4gICAgICAgIGVsLl92YWx1ZSA9IHZhbHVlO1xyXG4gICAgICAgIGNvbnN0IG5ld1ZhbHVlID0gdmFsdWUgPT0gbnVsbCA/ICcnIDogdmFsdWU7XHJcbiAgICAgICAgaWYgKGVsLnZhbHVlICE9PSBuZXdWYWx1ZSB8fFxyXG4gICAgICAgICAgICAvLyAjNDk1NjogYWx3YXlzIHNldCBmb3IgT1BUSU9OIGVsZW1lbnRzIGJlY2F1c2UgaXRzIHZhbHVlIGZhbGxzIGJhY2sgdG9cclxuICAgICAgICAgICAgLy8gdGV4dENvbnRlbnQgaWYgbm8gdmFsdWUgYXR0cmlidXRlIGlzIHByZXNlbnQuIEFuZCBzZXR0aW5nIC52YWx1ZSBmb3JcclxuICAgICAgICAgICAgLy8gT1BUSU9OIGhhcyBubyBzaWRlIGVmZmVjdFxyXG4gICAgICAgICAgICBlbC50YWdOYW1lID09PSAnT1BUSU9OJykge1xyXG4gICAgICAgICAgICBlbC52YWx1ZSA9IG5ld1ZhbHVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodmFsdWUgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBlbC5yZW1vdmVBdHRyaWJ1dGUoa2V5KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgbGV0IG5lZWRSZW1vdmUgPSBmYWxzZTtcclxuICAgIGlmICh2YWx1ZSA9PT0gJycgfHwgdmFsdWUgPT0gbnVsbCkge1xyXG4gICAgICAgIGNvbnN0IHR5cGUgPSB0eXBlb2YgZWxba2V5XTtcclxuICAgICAgICBpZiAodHlwZSA9PT0gJ2Jvb2xlYW4nKSB7XHJcbiAgICAgICAgICAgIC8vIGUuZy4gPHNlbGVjdCBtdWx0aXBsZT4gY29tcGlsZXMgdG8geyBtdWx0aXBsZTogJycgfVxyXG4gICAgICAgICAgICB2YWx1ZSA9IGluY2x1ZGVCb29sZWFuQXR0cih2YWx1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHZhbHVlID09IG51bGwgJiYgdHlwZSA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgLy8gZS5nLiA8ZGl2IDppZD1cIm51bGxcIj5cclxuICAgICAgICAgICAgdmFsdWUgPSAnJztcclxuICAgICAgICAgICAgbmVlZFJlbW92ZSA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHR5cGUgPT09ICdudW1iZXInKSB7XHJcbiAgICAgICAgICAgIC8vIGUuZy4gPGltZyA6d2lkdGg9XCJudWxsXCI+XHJcbiAgICAgICAgICAgIC8vIHRoZSB2YWx1ZSBvZiBzb21lIElETCBhdHRyIG11c3QgYmUgZ3JlYXRlciB0aGFuIDAsIGUuZy4gaW5wdXQuc2l6ZSA9IDAgLT4gZXJyb3JcclxuICAgICAgICAgICAgdmFsdWUgPSAwO1xyXG4gICAgICAgICAgICBuZWVkUmVtb3ZlID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvLyBzb21lIHByb3BlcnRpZXMgcGVyZm9ybSB2YWx1ZSB2YWxpZGF0aW9uIGFuZCB0aHJvdyxcclxuICAgIC8vIHNvbWUgcHJvcGVydGllcyBoYXMgZ2V0dGVyLCBubyBzZXR0ZXIsIHdpbGwgZXJyb3IgaW4gJ3VzZSBzdHJpY3QnXHJcbiAgICAvLyBlZy4gPHNlbGVjdCA6dHlwZT1cIm51bGxcIj48L3NlbGVjdD4gPHNlbGVjdCA6d2lsbFZhbGlkYXRlPVwibnVsbFwiPjwvc2VsZWN0PlxyXG4gICAgdHJ5IHtcclxuICAgICAgICBlbFtrZXldID0gdmFsdWU7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcclxuICAgICAgICAgICAgd2FybihgRmFpbGVkIHNldHRpbmcgcHJvcCBcIiR7a2V5fVwiIG9uIDwke2VsLnRhZ05hbWUudG9Mb3dlckNhc2UoKX0+OiBgICtcclxuICAgICAgICAgICAgICAgIGB2YWx1ZSAke3ZhbHVlfSBpcyBpbnZhbGlkLmAsIGUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIG5lZWRSZW1vdmUgJiYgZWwucmVtb3ZlQXR0cmlidXRlKGtleSk7XHJcbn1cblxuLy8gQXN5bmMgZWRnZSBjYXNlIGZpeCByZXF1aXJlcyBzdG9yaW5nIGFuIGV2ZW50IGxpc3RlbmVyJ3MgYXR0YWNoIHRpbWVzdGFtcC5cclxuY29uc3QgW19nZXROb3csIHNraXBUaW1lc3RhbXBDaGVja10gPSAvKiNfX1BVUkVfXyovICgoKSA9PiB7XHJcbiAgICBsZXQgX2dldE5vdyA9IERhdGUubm93O1xyXG4gICAgbGV0IHNraXBUaW1lc3RhbXBDaGVjayA9IGZhbHNlO1xyXG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgLy8gRGV0ZXJtaW5lIHdoYXQgZXZlbnQgdGltZXN0YW1wIHRoZSBicm93c2VyIGlzIHVzaW5nLiBBbm5veWluZ2x5LCB0aGVcclxuICAgICAgICAvLyB0aW1lc3RhbXAgY2FuIGVpdGhlciBiZSBoaS1yZXMgKHJlbGF0aXZlIHRvIHBhZ2UgbG9hZCkgb3IgbG93LXJlc1xyXG4gICAgICAgIC8vIChyZWxhdGl2ZSB0byBVTklYIGVwb2NoKSwgc28gaW4gb3JkZXIgdG8gY29tcGFyZSB0aW1lIHdlIGhhdmUgdG8gdXNlIHRoZVxyXG4gICAgICAgIC8vIHNhbWUgdGltZXN0YW1wIHR5cGUgd2hlbiBzYXZpbmcgdGhlIGZsdXNoIHRpbWVzdGFtcC5cclxuICAgICAgICBpZiAoRGF0ZS5ub3coKSA+IGRvY3VtZW50LmNyZWF0ZUV2ZW50KCdFdmVudCcpLnRpbWVTdGFtcCkge1xyXG4gICAgICAgICAgICAvLyBpZiB0aGUgbG93LXJlcyB0aW1lc3RhbXAgd2hpY2ggaXMgYmlnZ2VyIHRoYW4gdGhlIGV2ZW50IHRpbWVzdGFtcFxyXG4gICAgICAgICAgICAvLyAod2hpY2ggaXMgZXZhbHVhdGVkIEFGVEVSKSBpdCBtZWFucyB0aGUgZXZlbnQgaXMgdXNpbmcgYSBoaS1yZXMgdGltZXN0YW1wLFxyXG4gICAgICAgICAgICAvLyBhbmQgd2UgbmVlZCB0byB1c2UgdGhlIGhpLXJlcyB2ZXJzaW9uIGZvciBldmVudCBsaXN0ZW5lcnMgYXMgd2VsbC5cclxuICAgICAgICAgICAgX2dldE5vdyA9ICgpID0+IHBlcmZvcm1hbmNlLm5vdygpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyAjMzQ4NTogRmlyZWZveCA8PSA1MyBoYXMgaW5jb3JyZWN0IEV2ZW50LnRpbWVTdGFtcCBpbXBsZW1lbnRhdGlvblxyXG4gICAgICAgIC8vIGFuZCBkb2VzIG5vdCBmaXJlIG1pY3JvdGFza3MgaW4gYmV0d2VlbiBldmVudCBwcm9wYWdhdGlvbiwgc28gc2FmZSB0byBleGNsdWRlLlxyXG4gICAgICAgIGNvbnN0IGZmTWF0Y2ggPSBuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9maXJlZm94XFwvKFxcZCspL2kpO1xyXG4gICAgICAgIHNraXBUaW1lc3RhbXBDaGVjayA9ICEhKGZmTWF0Y2ggJiYgTnVtYmVyKGZmTWF0Y2hbMV0pIDw9IDUzKTtcclxuICAgIH1cclxuICAgIHJldHVybiBbX2dldE5vdywgc2tpcFRpbWVzdGFtcENoZWNrXTtcclxufSkoKTtcclxuLy8gVG8gYXZvaWQgdGhlIG92ZXJoZWFkIG9mIHJlcGVhdGVkbHkgY2FsbGluZyBwZXJmb3JtYW5jZS5ub3coKSwgd2UgY2FjaGVcclxuLy8gYW5kIHVzZSB0aGUgc2FtZSB0aW1lc3RhbXAgZm9yIGFsbCBldmVudCBsaXN0ZW5lcnMgYXR0YWNoZWQgaW4gdGhlIHNhbWUgdGljay5cclxubGV0IGNhY2hlZE5vdyA9IDA7XHJcbmNvbnN0IHAgPSAvKiNfX1BVUkVfXyovIFByb21pc2UucmVzb2x2ZSgpO1xyXG5jb25zdCByZXNldCA9ICgpID0+IHtcclxuICAgIGNhY2hlZE5vdyA9IDA7XHJcbn07XHJcbmNvbnN0IGdldE5vdyA9ICgpID0+IGNhY2hlZE5vdyB8fCAocC50aGVuKHJlc2V0KSwgKGNhY2hlZE5vdyA9IF9nZXROb3coKSkpO1xyXG5mdW5jdGlvbiBhZGRFdmVudExpc3RlbmVyKGVsLCBldmVudCwgaGFuZGxlciwgb3B0aW9ucykge1xyXG4gICAgZWwuYWRkRXZlbnRMaXN0ZW5lcihldmVudCwgaGFuZGxlciwgb3B0aW9ucyk7XHJcbn1cclxuZnVuY3Rpb24gcmVtb3ZlRXZlbnRMaXN0ZW5lcihlbCwgZXZlbnQsIGhhbmRsZXIsIG9wdGlvbnMpIHtcclxuICAgIGVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnQsIGhhbmRsZXIsIG9wdGlvbnMpO1xyXG59XHJcbmZ1bmN0aW9uIHBhdGNoRXZlbnQoZWwsIHJhd05hbWUsIHByZXZWYWx1ZSwgbmV4dFZhbHVlLCBpbnN0YW5jZSA9IG51bGwpIHtcclxuICAgIC8vIHZlaSA9IHZ1ZSBldmVudCBpbnZva2Vyc1xyXG4gICAgY29uc3QgaW52b2tlcnMgPSBlbC5fdmVpIHx8IChlbC5fdmVpID0ge30pO1xyXG4gICAgY29uc3QgZXhpc3RpbmdJbnZva2VyID0gaW52b2tlcnNbcmF3TmFtZV07XHJcbiAgICBpZiAobmV4dFZhbHVlICYmIGV4aXN0aW5nSW52b2tlcikge1xyXG4gICAgICAgIC8vIHBhdGNoXHJcbiAgICAgICAgZXhpc3RpbmdJbnZva2VyLnZhbHVlID0gbmV4dFZhbHVlO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgY29uc3QgW25hbWUsIG9wdGlvbnNdID0gcGFyc2VOYW1lKHJhd05hbWUpO1xyXG4gICAgICAgIGlmIChuZXh0VmFsdWUpIHtcclxuICAgICAgICAgICAgLy8gYWRkXHJcbiAgICAgICAgICAgIGNvbnN0IGludm9rZXIgPSAoaW52b2tlcnNbcmF3TmFtZV0gPSBjcmVhdGVJbnZva2VyKG5leHRWYWx1ZSwgaW5zdGFuY2UpKTtcclxuICAgICAgICAgICAgYWRkRXZlbnRMaXN0ZW5lcihlbCwgbmFtZSwgaW52b2tlciwgb3B0aW9ucyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGV4aXN0aW5nSW52b2tlcikge1xyXG4gICAgICAgICAgICAvLyByZW1vdmVcclxuICAgICAgICAgICAgcmVtb3ZlRXZlbnRMaXN0ZW5lcihlbCwgbmFtZSwgZXhpc3RpbmdJbnZva2VyLCBvcHRpb25zKTtcclxuICAgICAgICAgICAgaW52b2tlcnNbcmF3TmFtZV0gPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbmNvbnN0IG9wdGlvbnNNb2RpZmllclJFID0gLyg/Ok9uY2V8UGFzc2l2ZXxDYXB0dXJlKSQvO1xyXG5mdW5jdGlvbiBwYXJzZU5hbWUobmFtZSkge1xyXG4gICAgbGV0IG9wdGlvbnM7XHJcbiAgICBpZiAob3B0aW9uc01vZGlmaWVyUkUudGVzdChuYW1lKSkge1xyXG4gICAgICAgIG9wdGlvbnMgPSB7fTtcclxuICAgICAgICBsZXQgbTtcclxuICAgICAgICB3aGlsZSAoKG0gPSBuYW1lLm1hdGNoKG9wdGlvbnNNb2RpZmllclJFKSkpIHtcclxuICAgICAgICAgICAgbmFtZSA9IG5hbWUuc2xpY2UoMCwgbmFtZS5sZW5ndGggLSBtWzBdLmxlbmd0aCk7XHJcbiAgICAgICAgICAgIG9wdGlvbnNbbVswXS50b0xvd2VyQ2FzZSgpXSA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIFtoeXBoZW5hdGUobmFtZS5zbGljZSgyKSksIG9wdGlvbnNdO1xyXG59XHJcbmZ1bmN0aW9uIGNyZWF0ZUludm9rZXIoaW5pdGlhbFZhbHVlLCBpbnN0YW5jZSkge1xyXG4gICAgY29uc3QgaW52b2tlciA9IChlKSA9PiB7XHJcbiAgICAgICAgLy8gYXN5bmMgZWRnZSBjYXNlICM2NTY2OiBpbm5lciBjbGljayBldmVudCB0cmlnZ2VycyBwYXRjaCwgZXZlbnQgaGFuZGxlclxyXG4gICAgICAgIC8vIGF0dGFjaGVkIHRvIG91dGVyIGVsZW1lbnQgZHVyaW5nIHBhdGNoLCBhbmQgdHJpZ2dlcmVkIGFnYWluLiBUaGlzXHJcbiAgICAgICAgLy8gaGFwcGVucyBiZWNhdXNlIGJyb3dzZXJzIGZpcmUgbWljcm90YXNrIHRpY2tzIGJldHdlZW4gZXZlbnQgcHJvcGFnYXRpb24uXHJcbiAgICAgICAgLy8gdGhlIHNvbHV0aW9uIGlzIHNpbXBsZTogd2Ugc2F2ZSB0aGUgdGltZXN0YW1wIHdoZW4gYSBoYW5kbGVyIGlzIGF0dGFjaGVkLFxyXG4gICAgICAgIC8vIGFuZCB0aGUgaGFuZGxlciB3b3VsZCBvbmx5IGZpcmUgaWYgdGhlIGV2ZW50IHBhc3NlZCB0byBpdCB3YXMgZmlyZWRcclxuICAgICAgICAvLyBBRlRFUiBpdCB3YXMgYXR0YWNoZWQuXHJcbiAgICAgICAgY29uc3QgdGltZVN0YW1wID0gZS50aW1lU3RhbXAgfHwgX2dldE5vdygpO1xyXG4gICAgICAgIGlmIChza2lwVGltZXN0YW1wQ2hlY2sgfHwgdGltZVN0YW1wID49IGludm9rZXIuYXR0YWNoZWQgLSAxKSB7XHJcbiAgICAgICAgICAgIGNhbGxXaXRoQXN5bmNFcnJvckhhbmRsaW5nKHBhdGNoU3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKGUsIGludm9rZXIudmFsdWUpLCBpbnN0YW5jZSwgNSAvKiBOQVRJVkVfRVZFTlRfSEFORExFUiAqLywgW2VdKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgaW52b2tlci52YWx1ZSA9IGluaXRpYWxWYWx1ZTtcclxuICAgIGludm9rZXIuYXR0YWNoZWQgPSBnZXROb3coKTtcclxuICAgIHJldHVybiBpbnZva2VyO1xyXG59XHJcbmZ1bmN0aW9uIHBhdGNoU3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKGUsIHZhbHVlKSB7XHJcbiAgICBpZiAoaXNBcnJheSh2YWx1ZSkpIHtcclxuICAgICAgICBjb25zdCBvcmlnaW5hbFN0b3AgPSBlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbjtcclxuICAgICAgICBlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbiA9ICgpID0+IHtcclxuICAgICAgICAgICAgb3JpZ2luYWxTdG9wLmNhbGwoZSk7XHJcbiAgICAgICAgICAgIGUuX3N0b3BwZWQgPSB0cnVlO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmV0dXJuIHZhbHVlLm1hcChmbiA9PiAoZSkgPT4gIWUuX3N0b3BwZWQgJiYgZm4gJiYgZm4oZSkpO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xyXG4gICAgfVxyXG59XG5cbmNvbnN0IG5hdGl2ZU9uUkUgPSAvXm9uW2Etel0vO1xyXG5jb25zdCBwYXRjaFByb3AgPSAoZWwsIGtleSwgcHJldlZhbHVlLCBuZXh0VmFsdWUsIGlzU1ZHID0gZmFsc2UsIHByZXZDaGlsZHJlbiwgcGFyZW50Q29tcG9uZW50LCBwYXJlbnRTdXNwZW5zZSwgdW5tb3VudENoaWxkcmVuKSA9PiB7XHJcbiAgICBpZiAoa2V5ID09PSAnY2xhc3MnKSB7XHJcbiAgICAgICAgcGF0Y2hDbGFzcyhlbCwgbmV4dFZhbHVlLCBpc1NWRyk7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChrZXkgPT09ICdzdHlsZScpIHtcclxuICAgICAgICBwYXRjaFN0eWxlKGVsLCBwcmV2VmFsdWUsIG5leHRWYWx1ZSk7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChpc09uKGtleSkpIHtcclxuICAgICAgICAvLyBpZ25vcmUgdi1tb2RlbCBsaXN0ZW5lcnNcclxuICAgICAgICBpZiAoIWlzTW9kZWxMaXN0ZW5lcihrZXkpKSB7XHJcbiAgICAgICAgICAgIHBhdGNoRXZlbnQoZWwsIGtleSwgcHJldlZhbHVlLCBuZXh0VmFsdWUsIHBhcmVudENvbXBvbmVudCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoa2V5WzBdID09PSAnLidcclxuICAgICAgICA/ICgoa2V5ID0ga2V5LnNsaWNlKDEpKSwgdHJ1ZSlcclxuICAgICAgICA6IGtleVswXSA9PT0gJ14nXHJcbiAgICAgICAgICAgID8gKChrZXkgPSBrZXkuc2xpY2UoMSkpLCBmYWxzZSlcclxuICAgICAgICAgICAgOiBzaG91bGRTZXRBc1Byb3AoZWwsIGtleSwgbmV4dFZhbHVlLCBpc1NWRykpIHtcclxuICAgICAgICBwYXRjaERPTVByb3AoZWwsIGtleSwgbmV4dFZhbHVlLCBwcmV2Q2hpbGRyZW4sIHBhcmVudENvbXBvbmVudCwgcGFyZW50U3VzcGVuc2UsIHVubW91bnRDaGlsZHJlbik7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICAvLyBzcGVjaWFsIGNhc2UgZm9yIDxpbnB1dCB2LW1vZGVsIHR5cGU9XCJjaGVja2JveFwiPiB3aXRoXHJcbiAgICAgICAgLy8gOnRydWUtdmFsdWUgJiA6ZmFsc2UtdmFsdWVcclxuICAgICAgICAvLyBzdG9yZSB2YWx1ZSBhcyBkb20gcHJvcGVydGllcyBzaW5jZSBub24tc3RyaW5nIHZhbHVlcyB3aWxsIGJlXHJcbiAgICAgICAgLy8gc3RyaW5naWZpZWQuXHJcbiAgICAgICAgaWYgKGtleSA9PT0gJ3RydWUtdmFsdWUnKSB7XHJcbiAgICAgICAgICAgIGVsLl90cnVlVmFsdWUgPSBuZXh0VmFsdWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGtleSA9PT0gJ2ZhbHNlLXZhbHVlJykge1xyXG4gICAgICAgICAgICBlbC5fZmFsc2VWYWx1ZSA9IG5leHRWYWx1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcGF0Y2hBdHRyKGVsLCBrZXksIG5leHRWYWx1ZSwgaXNTVkcpO1xyXG4gICAgfVxyXG59O1xyXG5mdW5jdGlvbiBzaG91bGRTZXRBc1Byb3AoZWwsIGtleSwgdmFsdWUsIGlzU1ZHKSB7XHJcbiAgICBpZiAoaXNTVkcpIHtcclxuICAgICAgICAvLyBtb3N0IGtleXMgbXVzdCBiZSBzZXQgYXMgYXR0cmlidXRlIG9uIHN2ZyBlbGVtZW50cyB0byB3b3JrXHJcbiAgICAgICAgLy8gLi4uZXhjZXB0IGlubmVySFRNTCAmIHRleHRDb250ZW50XHJcbiAgICAgICAgaWYgKGtleSA9PT0gJ2lubmVySFRNTCcgfHwga2V5ID09PSAndGV4dENvbnRlbnQnKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBvciBuYXRpdmUgb25jbGljayB3aXRoIGZ1bmN0aW9uIHZhbHVlc1xyXG4gICAgICAgIGlmIChrZXkgaW4gZWwgJiYgbmF0aXZlT25SRS50ZXN0KGtleSkgJiYgaXNGdW5jdGlvbih2YWx1ZSkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIC8vIHRoZXNlIGFyZSBlbnVtZXJhdGVkIGF0dHJzLCBob3dldmVyIHRoZWlyIGNvcnJlc3BvbmRpbmcgRE9NIHByb3BlcnRpZXNcclxuICAgIC8vIGFyZSBhY3R1YWxseSBib29sZWFucyAtIHRoaXMgbGVhZHMgdG8gc2V0dGluZyBpdCB3aXRoIGEgc3RyaW5nIFwiZmFsc2VcIlxyXG4gICAgLy8gdmFsdWUgbGVhZGluZyBpdCB0byBiZSBjb2VyY2VkIHRvIGB0cnVlYCwgc28gd2UgbmVlZCB0byBhbHdheXMgdHJlYXRcclxuICAgIC8vIHRoZW0gYXMgYXR0cmlidXRlcy5cclxuICAgIC8vIE5vdGUgdGhhdCBgY29udGVudEVkaXRhYmxlYCBkb2Vzbid0IGhhdmUgdGhpcyBwcm9ibGVtOiBpdHMgRE9NXHJcbiAgICAvLyBwcm9wZXJ0eSBpcyBhbHNvIGVudW1lcmF0ZWQgc3RyaW5nIHZhbHVlcy5cclxuICAgIGlmIChrZXkgPT09ICdzcGVsbGNoZWNrJyB8fCBrZXkgPT09ICdkcmFnZ2FibGUnIHx8IGtleSA9PT0gJ3RyYW5zbGF0ZScpIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICAvLyAjMTc4NywgIzI4NDAgZm9ybSBwcm9wZXJ0eSBvbiBmb3JtIGVsZW1lbnRzIGlzIHJlYWRvbmx5IGFuZCBtdXN0IGJlIHNldCBhc1xyXG4gICAgLy8gYXR0cmlidXRlLlxyXG4gICAgaWYgKGtleSA9PT0gJ2Zvcm0nKSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgLy8gIzE1MjYgPGlucHV0IGxpc3Q+IG11c3QgYmUgc2V0IGFzIGF0dHJpYnV0ZVxyXG4gICAgaWYgKGtleSA9PT0gJ2xpc3QnICYmIGVsLnRhZ05hbWUgPT09ICdJTlBVVCcpIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICAvLyAjMjc2NiA8dGV4dGFyZWEgdHlwZT4gbXVzdCBiZSBzZXQgYXMgYXR0cmlidXRlXHJcbiAgICBpZiAoa2V5ID09PSAndHlwZScgJiYgZWwudGFnTmFtZSA9PT0gJ1RFWFRBUkVBJykge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIC8vIG5hdGl2ZSBvbmNsaWNrIHdpdGggc3RyaW5nIHZhbHVlLCBtdXN0IGJlIHNldCBhcyBhdHRyaWJ1dGVcclxuICAgIGlmIChuYXRpdmVPblJFLnRlc3Qoa2V5KSAmJiBpc1N0cmluZyh2YWx1ZSkpIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICByZXR1cm4ga2V5IGluIGVsO1xyXG59XG5cbmZ1bmN0aW9uIGRlZmluZUN1c3RvbUVsZW1lbnQob3B0aW9ucywgaHlkYXRlKSB7XHJcbiAgICBjb25zdCBDb21wID0gZGVmaW5lQ29tcG9uZW50KG9wdGlvbnMpO1xyXG4gICAgY2xhc3MgVnVlQ3VzdG9tRWxlbWVudCBleHRlbmRzIFZ1ZUVsZW1lbnQge1xyXG4gICAgICAgIGNvbnN0cnVjdG9yKGluaXRpYWxQcm9wcykge1xyXG4gICAgICAgICAgICBzdXBlcihDb21wLCBpbml0aWFsUHJvcHMsIGh5ZGF0ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgVnVlQ3VzdG9tRWxlbWVudC5kZWYgPSBDb21wO1xyXG4gICAgcmV0dXJuIFZ1ZUN1c3RvbUVsZW1lbnQ7XHJcbn1cclxuY29uc3QgZGVmaW5lU1NSQ3VzdG9tRWxlbWVudCA9ICgob3B0aW9ucykgPT4ge1xyXG4gICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgcmV0dXJuIGRlZmluZUN1c3RvbUVsZW1lbnQob3B0aW9ucywgaHlkcmF0ZSk7XHJcbn0pO1xyXG5jb25zdCBCYXNlQ2xhc3MgPSAodHlwZW9mIEhUTUxFbGVtZW50ICE9PSAndW5kZWZpbmVkJyA/IEhUTUxFbGVtZW50IDogY2xhc3Mge1xyXG59KTtcclxuY2xhc3MgVnVlRWxlbWVudCBleHRlbmRzIEJhc2VDbGFzcyB7XHJcbiAgICBjb25zdHJ1Y3RvcihfZGVmLCBfcHJvcHMgPSB7fSwgaHlkcmF0ZSkge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcbiAgICAgICAgdGhpcy5fZGVmID0gX2RlZjtcclxuICAgICAgICB0aGlzLl9wcm9wcyA9IF9wcm9wcztcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAaW50ZXJuYWxcclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLl9pbnN0YW5jZSA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5fY29ubmVjdGVkID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5fcmVzb2x2ZWQgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLl9udW1iZXJQcm9wcyA9IG51bGw7XHJcbiAgICAgICAgaWYgKHRoaXMuc2hhZG93Um9vdCAmJiBoeWRyYXRlKSB7XHJcbiAgICAgICAgICAgIGh5ZHJhdGUodGhpcy5fY3JlYXRlVk5vZGUoKSwgdGhpcy5zaGFkb3dSb290KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgdGhpcy5zaGFkb3dSb290KSB7XHJcbiAgICAgICAgICAgICAgICB3YXJuKGBDdXN0b20gZWxlbWVudCBoYXMgcHJlLXJlbmRlcmVkIGRlY2xhcmF0aXZlIHNoYWRvdyByb290IGJ1dCBpcyBub3QgYCArXHJcbiAgICAgICAgICAgICAgICAgICAgYGRlZmluZWQgYXMgaHlkcmF0YWJsZS4gVXNlIFxcYGRlZmluZVNTUkN1c3RvbUVsZW1lbnRcXGAuYCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5hdHRhY2hTaGFkb3coeyBtb2RlOiAnb3BlbicgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgY29ubmVjdGVkQ2FsbGJhY2soKSB7XHJcbiAgICAgICAgdGhpcy5fY29ubmVjdGVkID0gdHJ1ZTtcclxuICAgICAgICBpZiAoIXRoaXMuX2luc3RhbmNlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3Jlc29sdmVEZWYoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBkaXNjb25uZWN0ZWRDYWxsYmFjaygpIHtcclxuICAgICAgICB0aGlzLl9jb25uZWN0ZWQgPSBmYWxzZTtcclxuICAgICAgICBuZXh0VGljaygoKSA9PiB7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5fY29ubmVjdGVkKSB7XHJcbiAgICAgICAgICAgICAgICByZW5kZXIobnVsbCwgdGhpcy5zaGFkb3dSb290KTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2luc3RhbmNlID0gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiByZXNvbHZlIGlubmVyIGNvbXBvbmVudCBkZWZpbml0aW9uIChoYW5kbGUgcG9zc2libGUgYXN5bmMgY29tcG9uZW50KVxyXG4gICAgICovXHJcbiAgICBfcmVzb2x2ZURlZigpIHtcclxuICAgICAgICBpZiAodGhpcy5fcmVzb2x2ZWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLl9yZXNvbHZlZCA9IHRydWU7XHJcbiAgICAgICAgLy8gc2V0IGluaXRpYWwgYXR0cnNcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuYXR0cmlidXRlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICB0aGlzLl9zZXRBdHRyKHRoaXMuYXR0cmlidXRlc1tpXS5uYW1lKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gd2F0Y2ggZnV0dXJlIGF0dHIgY2hhbmdlc1xyXG4gICAgICAgIG5ldyBNdXRhdGlvbk9ic2VydmVyKG11dGF0aW9ucyA9PiB7XHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgbSBvZiBtdXRhdGlvbnMpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3NldEF0dHIobS5hdHRyaWJ1dGVOYW1lKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pLm9ic2VydmUodGhpcywgeyBhdHRyaWJ1dGVzOiB0cnVlIH0pO1xyXG4gICAgICAgIGNvbnN0IHJlc29sdmUgPSAoZGVmKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHsgcHJvcHMsIHN0eWxlcyB9ID0gZGVmO1xyXG4gICAgICAgICAgICBjb25zdCBoYXNPcHRpb25zID0gIWlzQXJyYXkocHJvcHMpO1xyXG4gICAgICAgICAgICBjb25zdCByYXdLZXlzID0gcHJvcHMgPyAoaGFzT3B0aW9ucyA/IE9iamVjdC5rZXlzKHByb3BzKSA6IHByb3BzKSA6IFtdO1xyXG4gICAgICAgICAgICAvLyBjYXN0IE51bWJlci10eXBlIHByb3BzIHNldCBiZWZvcmUgcmVzb2x2ZVxyXG4gICAgICAgICAgICBsZXQgbnVtYmVyUHJvcHM7XHJcbiAgICAgICAgICAgIGlmIChoYXNPcHRpb25zKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiB0aGlzLl9wcm9wcykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG9wdCA9IHByb3BzW2tleV07XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wdCA9PT0gTnVtYmVyIHx8IChvcHQgJiYgb3B0LnR5cGUgPT09IE51bWJlcikpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fcHJvcHNba2V5XSA9IHRvTnVtYmVyKHRoaXMuX3Byb3BzW2tleV0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAobnVtYmVyUHJvcHMgfHwgKG51bWJlclByb3BzID0gT2JqZWN0LmNyZWF0ZShudWxsKSkpW2tleV0gPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLl9udW1iZXJQcm9wcyA9IG51bWJlclByb3BzO1xyXG4gICAgICAgICAgICAvLyBjaGVjayBpZiB0aGVyZSBhcmUgcHJvcHMgc2V0IHByZS11cGdyYWRlIG9yIGNvbm5lY3RcclxuICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgb2YgT2JqZWN0LmtleXModGhpcykpIHtcclxuICAgICAgICAgICAgICAgIGlmIChrZXlbMF0gIT09ICdfJykge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3NldFByb3Aoa2V5LCB0aGlzW2tleV0sIHRydWUsIGZhbHNlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBkZWZpbmluZyBnZXR0ZXIvc2V0dGVycyBvbiBwcm90b3R5cGVcclxuICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgb2YgcmF3S2V5cy5tYXAoY2FtZWxpemUkMSkpIHtcclxuICAgICAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBrZXksIHtcclxuICAgICAgICAgICAgICAgICAgICBnZXQoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9nZXRQcm9wKGtleSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBzZXQodmFsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3NldFByb3Aoa2V5LCB2YWwpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIGFwcGx5IENTU1xyXG4gICAgICAgICAgICB0aGlzLl9hcHBseVN0eWxlcyhzdHlsZXMpO1xyXG4gICAgICAgICAgICAvLyBpbml0aWFsIHJlbmRlclxyXG4gICAgICAgICAgICB0aGlzLl91cGRhdGUoKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIGNvbnN0IGFzeW5jRGVmID0gdGhpcy5fZGVmLl9fYXN5bmNMb2FkZXI7XHJcbiAgICAgICAgaWYgKGFzeW5jRGVmKSB7XHJcbiAgICAgICAgICAgIGFzeW5jRGVmKCkudGhlbihyZXNvbHZlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJlc29sdmUodGhpcy5fZGVmKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBfc2V0QXR0cihrZXkpIHtcclxuICAgICAgICBsZXQgdmFsdWUgPSB0aGlzLmdldEF0dHJpYnV0ZShrZXkpO1xyXG4gICAgICAgIGlmICh0aGlzLl9udW1iZXJQcm9wcyAmJiB0aGlzLl9udW1iZXJQcm9wc1trZXldKSB7XHJcbiAgICAgICAgICAgIHZhbHVlID0gdG9OdW1iZXIodmFsdWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLl9zZXRQcm9wKGNhbWVsaXplJDEoa2V5KSwgdmFsdWUsIGZhbHNlKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogQGludGVybmFsXHJcbiAgICAgKi9cclxuICAgIF9nZXRQcm9wKGtleSkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9wcm9wc1trZXldO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBAaW50ZXJuYWxcclxuICAgICAqL1xyXG4gICAgX3NldFByb3Aoa2V5LCB2YWwsIHNob3VsZFJlZmxlY3QgPSB0cnVlLCBzaG91bGRVcGRhdGUgPSB0cnVlKSB7XHJcbiAgICAgICAgaWYgKHZhbCAhPT0gdGhpcy5fcHJvcHNba2V5XSkge1xyXG4gICAgICAgICAgICB0aGlzLl9wcm9wc1trZXldID0gdmFsO1xyXG4gICAgICAgICAgICBpZiAoc2hvdWxkVXBkYXRlICYmIHRoaXMuX2luc3RhbmNlKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl91cGRhdGUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyByZWZsZWN0XHJcbiAgICAgICAgICAgIGlmIChzaG91bGRSZWZsZWN0KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodmFsID09PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRBdHRyaWJ1dGUoaHlwaGVuYXRlKGtleSksICcnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiB2YWwgPT09ICdzdHJpbmcnIHx8IHR5cGVvZiB2YWwgPT09ICdudW1iZXInKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRBdHRyaWJ1dGUoaHlwaGVuYXRlKGtleSksIHZhbCArICcnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKCF2YWwpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZUF0dHJpYnV0ZShoeXBoZW5hdGUoa2V5KSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBfdXBkYXRlKCkge1xyXG4gICAgICAgIHJlbmRlcih0aGlzLl9jcmVhdGVWTm9kZSgpLCB0aGlzLnNoYWRvd1Jvb3QpO1xyXG4gICAgfVxyXG4gICAgX2NyZWF0ZVZOb2RlKCkge1xyXG4gICAgICAgIGNvbnN0IHZub2RlID0gY3JlYXRlVk5vZGUodGhpcy5fZGVmLCBleHRlbmQoe30sIHRoaXMuX3Byb3BzKSk7XHJcbiAgICAgICAgaWYgKCF0aGlzLl9pbnN0YW5jZSkge1xyXG4gICAgICAgICAgICB2bm9kZS5jZSA9IGluc3RhbmNlID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2luc3RhbmNlID0gaW5zdGFuY2U7XHJcbiAgICAgICAgICAgICAgICBpbnN0YW5jZS5pc0NFID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIC8vIEhNUlxyXG4gICAgICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGluc3RhbmNlLmNlUmVsb2FkID0gbmV3U3R5bGVzID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gYWx3YXlzIHJlc2V0IHN0eWxlc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5fc3R5bGVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9zdHlsZXMuZm9yRWFjaChzID0+IHRoaXMuc2hhZG93Um9vdC5yZW1vdmVDaGlsZChzKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9zdHlsZXMubGVuZ3RoID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9hcHBseVN0eWxlcyhuZXdTdHlsZXMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiB0aGlzIGlzIGFuIGFzeW5jIGNvbXBvbmVudCwgY2VSZWxvYWQgaXMgY2FsbGVkIGZyb20gdGhlIGlubmVyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbXBvbmVudCBzbyBubyBuZWVkIHRvIHJlbG9hZCB0aGUgYXN5bmMgd3JhcHBlclxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuX2RlZi5fX2FzeW5jTG9hZGVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByZWxvYWRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2luc3RhbmNlID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3VwZGF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIGludGVyY2VwdCBlbWl0XHJcbiAgICAgICAgICAgICAgICBpbnN0YW5jZS5lbWl0ID0gKGV2ZW50LCAuLi5hcmdzKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudChldmVudCwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZXRhaWw6IGFyZ3NcclxuICAgICAgICAgICAgICAgICAgICB9KSk7XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgLy8gbG9jYXRlIG5lYXJlc3QgVnVlIGN1c3RvbSBlbGVtZW50IHBhcmVudCBmb3IgcHJvdmlkZS9pbmplY3RcclxuICAgICAgICAgICAgICAgIGxldCBwYXJlbnQgPSB0aGlzO1xyXG4gICAgICAgICAgICAgICAgd2hpbGUgKChwYXJlbnQgPVxyXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudCAmJiAocGFyZW50LnBhcmVudE5vZGUgfHwgcGFyZW50Lmhvc3QpKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChwYXJlbnQgaW5zdGFuY2VvZiBWdWVFbGVtZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGluc3RhbmNlLnBhcmVudCA9IHBhcmVudC5faW5zdGFuY2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHZub2RlO1xyXG4gICAgfVxyXG4gICAgX2FwcGx5U3R5bGVzKHN0eWxlcykge1xyXG4gICAgICAgIGlmIChzdHlsZXMpIHtcclxuICAgICAgICAgICAgc3R5bGVzLmZvckVhY2goY3NzID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpO1xyXG4gICAgICAgICAgICAgICAgcy50ZXh0Q29udGVudCA9IGNzcztcclxuICAgICAgICAgICAgICAgIHRoaXMuc2hhZG93Um9vdC5hcHBlbmRDaGlsZChzKTtcclxuICAgICAgICAgICAgICAgIC8vIHJlY29yZCBmb3IgSE1SXHJcbiAgICAgICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgKHRoaXMuX3N0eWxlcyB8fCAodGhpcy5fc3R5bGVzID0gW10pKS5wdXNoKHMpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cblxuZnVuY3Rpb24gdXNlQ3NzTW9kdWxlKG5hbWUgPSAnJHN0eWxlJykge1xyXG4gICAgLyogaXN0YW5idWwgaWdub3JlIGVsc2UgKi9cclxuICAgIHtcclxuICAgICAgICBjb25zdCBpbnN0YW5jZSA9IGdldEN1cnJlbnRJbnN0YW5jZSgpO1xyXG4gICAgICAgIGlmICghaW5zdGFuY2UpIHtcclxuICAgICAgICAgICAgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmIHdhcm4oYHVzZUNzc01vZHVsZSBtdXN0IGJlIGNhbGxlZCBpbnNpZGUgc2V0dXAoKWApO1xyXG4gICAgICAgICAgICByZXR1cm4gRU1QVFlfT0JKO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBtb2R1bGVzID0gaW5zdGFuY2UudHlwZS5fX2Nzc01vZHVsZXM7XHJcbiAgICAgICAgaWYgKCFtb2R1bGVzKSB7XHJcbiAgICAgICAgICAgIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiB3YXJuKGBDdXJyZW50IGluc3RhbmNlIGRvZXMgbm90IGhhdmUgQ1NTIG1vZHVsZXMgaW5qZWN0ZWQuYCk7XHJcbiAgICAgICAgICAgIHJldHVybiBFTVBUWV9PQko7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IG1vZCA9IG1vZHVsZXNbbmFtZV07XHJcbiAgICAgICAgaWYgKCFtb2QpIHtcclxuICAgICAgICAgICAgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmXHJcbiAgICAgICAgICAgICAgICB3YXJuKGBDdXJyZW50IGluc3RhbmNlIGRvZXMgbm90IGhhdmUgQ1NTIG1vZHVsZSBuYW1lZCBcIiR7bmFtZX1cIi5gKTtcclxuICAgICAgICAgICAgcmV0dXJuIEVNUFRZX09CSjtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG1vZDtcclxuICAgIH1cclxufVxuXG4vKipcclxuICogUnVudGltZSBoZWxwZXIgZm9yIFNGQydzIENTUyB2YXJpYWJsZSBpbmplY3Rpb24gZmVhdHVyZS5cclxuICogQHByaXZhdGVcclxuICovXHJcbmZ1bmN0aW9uIHVzZUNzc1ZhcnMoZ2V0dGVyKSB7XHJcbiAgICBjb25zdCBpbnN0YW5jZSA9IGdldEN1cnJlbnRJbnN0YW5jZSgpO1xyXG4gICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cclxuICAgIGlmICghaW5zdGFuY2UpIHtcclxuICAgICAgICAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiZcclxuICAgICAgICAgICAgd2FybihgdXNlQ3NzVmFycyBpcyBjYWxsZWQgd2l0aG91dCBjdXJyZW50IGFjdGl2ZSBjb21wb25lbnQgaW5zdGFuY2UuYCk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgY29uc3Qgc2V0VmFycyA9ICgpID0+IHNldFZhcnNPblZOb2RlKGluc3RhbmNlLnN1YlRyZWUsIGdldHRlcihpbnN0YW5jZS5wcm94eSkpO1xyXG4gICAgd2F0Y2hQb3N0RWZmZWN0KHNldFZhcnMpO1xyXG4gICAgb25Nb3VudGVkKCgpID0+IHtcclxuICAgICAgICBjb25zdCBvYiA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKHNldFZhcnMpO1xyXG4gICAgICAgIG9iLm9ic2VydmUoaW5zdGFuY2Uuc3ViVHJlZS5lbC5wYXJlbnROb2RlLCB7IGNoaWxkTGlzdDogdHJ1ZSB9KTtcclxuICAgICAgICBvblVubW91bnRlZCgoKSA9PiBvYi5kaXNjb25uZWN0KCkpO1xyXG4gICAgfSk7XHJcbn1cclxuZnVuY3Rpb24gc2V0VmFyc09uVk5vZGUodm5vZGUsIHZhcnMpIHtcclxuICAgIGlmICh2bm9kZS5zaGFwZUZsYWcgJiAxMjggLyogU1VTUEVOU0UgKi8pIHtcclxuICAgICAgICBjb25zdCBzdXNwZW5zZSA9IHZub2RlLnN1c3BlbnNlO1xyXG4gICAgICAgIHZub2RlID0gc3VzcGVuc2UuYWN0aXZlQnJhbmNoO1xyXG4gICAgICAgIGlmIChzdXNwZW5zZS5wZW5kaW5nQnJhbmNoICYmICFzdXNwZW5zZS5pc0h5ZHJhdGluZykge1xyXG4gICAgICAgICAgICBzdXNwZW5zZS5lZmZlY3RzLnB1c2goKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgc2V0VmFyc09uVk5vZGUoc3VzcGVuc2UuYWN0aXZlQnJhbmNoLCB2YXJzKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy8gZHJpbGwgZG93biBIT0NzIHVudGlsIGl0J3MgYSBub24tY29tcG9uZW50IHZub2RlXHJcbiAgICB3aGlsZSAodm5vZGUuY29tcG9uZW50KSB7XHJcbiAgICAgICAgdm5vZGUgPSB2bm9kZS5jb21wb25lbnQuc3ViVHJlZTtcclxuICAgIH1cclxuICAgIGlmICh2bm9kZS5zaGFwZUZsYWcgJiAxIC8qIEVMRU1FTlQgKi8gJiYgdm5vZGUuZWwpIHtcclxuICAgICAgICBzZXRWYXJzT25Ob2RlKHZub2RlLmVsLCB2YXJzKTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKHZub2RlLnR5cGUgPT09IEZyYWdtZW50KSB7XHJcbiAgICAgICAgdm5vZGUuY2hpbGRyZW4uZm9yRWFjaChjID0+IHNldFZhcnNPblZOb2RlKGMsIHZhcnMpKTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKHZub2RlLnR5cGUgPT09IFN0YXRpYykge1xyXG4gICAgICAgIGxldCB7IGVsLCBhbmNob3IgfSA9IHZub2RlO1xyXG4gICAgICAgIHdoaWxlIChlbCkge1xyXG4gICAgICAgICAgICBzZXRWYXJzT25Ob2RlKGVsLCB2YXJzKTtcclxuICAgICAgICAgICAgaWYgKGVsID09PSBhbmNob3IpXHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgZWwgPSBlbC5uZXh0U2libGluZztcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gc2V0VmFyc09uTm9kZShlbCwgdmFycykge1xyXG4gICAgaWYgKGVsLm5vZGVUeXBlID09PSAxKSB7XHJcbiAgICAgICAgY29uc3Qgc3R5bGUgPSBlbC5zdHlsZTtcclxuICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiB2YXJzKSB7XHJcbiAgICAgICAgICAgIHN0eWxlLnNldFByb3BlcnR5KGAtLSR7a2V5fWAsIHZhcnNba2V5XSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XG5cbmNvbnN0IFRSQU5TSVRJT04gPSAndHJhbnNpdGlvbic7XHJcbmNvbnN0IEFOSU1BVElPTiA9ICdhbmltYXRpb24nO1xyXG4vLyBET00gVHJhbnNpdGlvbiBpcyBhIGhpZ2hlci1vcmRlci1jb21wb25lbnQgYmFzZWQgb24gdGhlIHBsYXRmb3JtLWFnbm9zdGljXHJcbi8vIGJhc2UgVHJhbnNpdGlvbiBjb21wb25lbnQsIHdpdGggRE9NLXNwZWNpZmljIGxvZ2ljLlxyXG5jb25zdCBUcmFuc2l0aW9uID0gKHByb3BzLCB7IHNsb3RzIH0pID0+IGgoQmFzZVRyYW5zaXRpb24sIHJlc29sdmVUcmFuc2l0aW9uUHJvcHMocHJvcHMpLCBzbG90cyk7XHJcblRyYW5zaXRpb24uZGlzcGxheU5hbWUgPSAnVHJhbnNpdGlvbic7XHJcbmNvbnN0IERPTVRyYW5zaXRpb25Qcm9wc1ZhbGlkYXRvcnMgPSB7XHJcbiAgICBuYW1lOiBTdHJpbmcsXHJcbiAgICB0eXBlOiBTdHJpbmcsXHJcbiAgICBjc3M6IHtcclxuICAgICAgICB0eXBlOiBCb29sZWFuLFxyXG4gICAgICAgIGRlZmF1bHQ6IHRydWVcclxuICAgIH0sXHJcbiAgICBkdXJhdGlvbjogW1N0cmluZywgTnVtYmVyLCBPYmplY3RdLFxyXG4gICAgZW50ZXJGcm9tQ2xhc3M6IFN0cmluZyxcclxuICAgIGVudGVyQWN0aXZlQ2xhc3M6IFN0cmluZyxcclxuICAgIGVudGVyVG9DbGFzczogU3RyaW5nLFxyXG4gICAgYXBwZWFyRnJvbUNsYXNzOiBTdHJpbmcsXHJcbiAgICBhcHBlYXJBY3RpdmVDbGFzczogU3RyaW5nLFxyXG4gICAgYXBwZWFyVG9DbGFzczogU3RyaW5nLFxyXG4gICAgbGVhdmVGcm9tQ2xhc3M6IFN0cmluZyxcclxuICAgIGxlYXZlQWN0aXZlQ2xhc3M6IFN0cmluZyxcclxuICAgIGxlYXZlVG9DbGFzczogU3RyaW5nXHJcbn07XHJcbmNvbnN0IFRyYW5zaXRpb25Qcm9wc1ZhbGlkYXRvcnMgPSAoVHJhbnNpdGlvbi5wcm9wcyA9XHJcbiAgICAvKiNfX1BVUkVfXyovIGV4dGVuZCh7fSwgQmFzZVRyYW5zaXRpb24ucHJvcHMsIERPTVRyYW5zaXRpb25Qcm9wc1ZhbGlkYXRvcnMpKTtcclxuLyoqXHJcbiAqICMzMjI3IEluY29taW5nIGhvb2tzIG1heSBiZSBtZXJnZWQgaW50byBhcnJheXMgd2hlbiB3cmFwcGluZyBUcmFuc2l0aW9uXHJcbiAqIHdpdGggY3VzdG9tIEhPQ3MuXHJcbiAqL1xyXG5jb25zdCBjYWxsSG9vayA9IChob29rLCBhcmdzID0gW10pID0+IHtcclxuICAgIGlmIChpc0FycmF5KGhvb2spKSB7XHJcbiAgICAgICAgaG9vay5mb3JFYWNoKGggPT4gaCguLi5hcmdzKSk7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChob29rKSB7XHJcbiAgICAgICAgaG9vayguLi5hcmdzKTtcclxuICAgIH1cclxufTtcclxuLyoqXHJcbiAqIENoZWNrIGlmIGEgaG9vayBleHBlY3RzIGEgY2FsbGJhY2sgKDJuZCBhcmcpLCB3aGljaCBtZWFucyB0aGUgdXNlclxyXG4gKiBpbnRlbmRzIHRvIGV4cGxpY2l0bHkgY29udHJvbCB0aGUgZW5kIG9mIHRoZSB0cmFuc2l0aW9uLlxyXG4gKi9cclxuY29uc3QgaGFzRXhwbGljaXRDYWxsYmFjayA9IChob29rKSA9PiB7XHJcbiAgICByZXR1cm4gaG9va1xyXG4gICAgICAgID8gaXNBcnJheShob29rKVxyXG4gICAgICAgICAgICA/IGhvb2suc29tZShoID0+IGgubGVuZ3RoID4gMSlcclxuICAgICAgICAgICAgOiBob29rLmxlbmd0aCA+IDFcclxuICAgICAgICA6IGZhbHNlO1xyXG59O1xyXG5mdW5jdGlvbiByZXNvbHZlVHJhbnNpdGlvblByb3BzKHJhd1Byb3BzKSB7XHJcbiAgICBjb25zdCBiYXNlUHJvcHMgPSB7fTtcclxuICAgIGZvciAoY29uc3Qga2V5IGluIHJhd1Byb3BzKSB7XHJcbiAgICAgICAgaWYgKCEoa2V5IGluIERPTVRyYW5zaXRpb25Qcm9wc1ZhbGlkYXRvcnMpKSB7XHJcbiAgICAgICAgICAgIGJhc2VQcm9wc1trZXldID0gcmF3UHJvcHNba2V5XTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAocmF3UHJvcHMuY3NzID09PSBmYWxzZSkge1xyXG4gICAgICAgIHJldHVybiBiYXNlUHJvcHM7XHJcbiAgICB9XHJcbiAgICBjb25zdCB7IG5hbWUgPSAndicsIHR5cGUsIGR1cmF0aW9uLCBlbnRlckZyb21DbGFzcyA9IGAke25hbWV9LWVudGVyLWZyb21gLCBlbnRlckFjdGl2ZUNsYXNzID0gYCR7bmFtZX0tZW50ZXItYWN0aXZlYCwgZW50ZXJUb0NsYXNzID0gYCR7bmFtZX0tZW50ZXItdG9gLCBhcHBlYXJGcm9tQ2xhc3MgPSBlbnRlckZyb21DbGFzcywgYXBwZWFyQWN0aXZlQ2xhc3MgPSBlbnRlckFjdGl2ZUNsYXNzLCBhcHBlYXJUb0NsYXNzID0gZW50ZXJUb0NsYXNzLCBsZWF2ZUZyb21DbGFzcyA9IGAke25hbWV9LWxlYXZlLWZyb21gLCBsZWF2ZUFjdGl2ZUNsYXNzID0gYCR7bmFtZX0tbGVhdmUtYWN0aXZlYCwgbGVhdmVUb0NsYXNzID0gYCR7bmFtZX0tbGVhdmUtdG9gIH0gPSByYXdQcm9wcztcclxuICAgIGNvbnN0IGR1cmF0aW9ucyA9IG5vcm1hbGl6ZUR1cmF0aW9uKGR1cmF0aW9uKTtcclxuICAgIGNvbnN0IGVudGVyRHVyYXRpb24gPSBkdXJhdGlvbnMgJiYgZHVyYXRpb25zWzBdO1xyXG4gICAgY29uc3QgbGVhdmVEdXJhdGlvbiA9IGR1cmF0aW9ucyAmJiBkdXJhdGlvbnNbMV07XHJcbiAgICBjb25zdCB7IG9uQmVmb3JlRW50ZXIsIG9uRW50ZXIsIG9uRW50ZXJDYW5jZWxsZWQsIG9uTGVhdmUsIG9uTGVhdmVDYW5jZWxsZWQsIG9uQmVmb3JlQXBwZWFyID0gb25CZWZvcmVFbnRlciwgb25BcHBlYXIgPSBvbkVudGVyLCBvbkFwcGVhckNhbmNlbGxlZCA9IG9uRW50ZXJDYW5jZWxsZWQgfSA9IGJhc2VQcm9wcztcclxuICAgIGNvbnN0IGZpbmlzaEVudGVyID0gKGVsLCBpc0FwcGVhciwgZG9uZSkgPT4ge1xyXG4gICAgICAgIHJlbW92ZVRyYW5zaXRpb25DbGFzcyhlbCwgaXNBcHBlYXIgPyBhcHBlYXJUb0NsYXNzIDogZW50ZXJUb0NsYXNzKTtcclxuICAgICAgICByZW1vdmVUcmFuc2l0aW9uQ2xhc3MoZWwsIGlzQXBwZWFyID8gYXBwZWFyQWN0aXZlQ2xhc3MgOiBlbnRlckFjdGl2ZUNsYXNzKTtcclxuICAgICAgICBkb25lICYmIGRvbmUoKTtcclxuICAgIH07XHJcbiAgICBjb25zdCBmaW5pc2hMZWF2ZSA9IChlbCwgZG9uZSkgPT4ge1xyXG4gICAgICAgIHJlbW92ZVRyYW5zaXRpb25DbGFzcyhlbCwgbGVhdmVUb0NsYXNzKTtcclxuICAgICAgICByZW1vdmVUcmFuc2l0aW9uQ2xhc3MoZWwsIGxlYXZlQWN0aXZlQ2xhc3MpO1xyXG4gICAgICAgIGRvbmUgJiYgZG9uZSgpO1xyXG4gICAgfTtcclxuICAgIGNvbnN0IG1ha2VFbnRlckhvb2sgPSAoaXNBcHBlYXIpID0+IHtcclxuICAgICAgICByZXR1cm4gKGVsLCBkb25lKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGhvb2sgPSBpc0FwcGVhciA/IG9uQXBwZWFyIDogb25FbnRlcjtcclxuICAgICAgICAgICAgY29uc3QgcmVzb2x2ZSA9ICgpID0+IGZpbmlzaEVudGVyKGVsLCBpc0FwcGVhciwgZG9uZSk7XHJcbiAgICAgICAgICAgIGNhbGxIb29rKGhvb2ssIFtlbCwgcmVzb2x2ZV0pO1xyXG4gICAgICAgICAgICBuZXh0RnJhbWUoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmVtb3ZlVHJhbnNpdGlvbkNsYXNzKGVsLCBpc0FwcGVhciA/IGFwcGVhckZyb21DbGFzcyA6IGVudGVyRnJvbUNsYXNzKTtcclxuICAgICAgICAgICAgICAgIGFkZFRyYW5zaXRpb25DbGFzcyhlbCwgaXNBcHBlYXIgPyBhcHBlYXJUb0NsYXNzIDogZW50ZXJUb0NsYXNzKTtcclxuICAgICAgICAgICAgICAgIGlmICghaGFzRXhwbGljaXRDYWxsYmFjayhob29rKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHdoZW5UcmFuc2l0aW9uRW5kcyhlbCwgdHlwZSwgZW50ZXJEdXJhdGlvbiwgcmVzb2x2ZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH07XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIGV4dGVuZChiYXNlUHJvcHMsIHtcclxuICAgICAgICBvbkJlZm9yZUVudGVyKGVsKSB7XHJcbiAgICAgICAgICAgIGNhbGxIb29rKG9uQmVmb3JlRW50ZXIsIFtlbF0pO1xyXG4gICAgICAgICAgICBhZGRUcmFuc2l0aW9uQ2xhc3MoZWwsIGVudGVyRnJvbUNsYXNzKTtcclxuICAgICAgICAgICAgYWRkVHJhbnNpdGlvbkNsYXNzKGVsLCBlbnRlckFjdGl2ZUNsYXNzKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIG9uQmVmb3JlQXBwZWFyKGVsKSB7XHJcbiAgICAgICAgICAgIGNhbGxIb29rKG9uQmVmb3JlQXBwZWFyLCBbZWxdKTtcclxuICAgICAgICAgICAgYWRkVHJhbnNpdGlvbkNsYXNzKGVsLCBhcHBlYXJGcm9tQ2xhc3MpO1xyXG4gICAgICAgICAgICBhZGRUcmFuc2l0aW9uQ2xhc3MoZWwsIGFwcGVhckFjdGl2ZUNsYXNzKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIG9uRW50ZXI6IG1ha2VFbnRlckhvb2soZmFsc2UpLFxyXG4gICAgICAgIG9uQXBwZWFyOiBtYWtlRW50ZXJIb29rKHRydWUpLFxyXG4gICAgICAgIG9uTGVhdmUoZWwsIGRvbmUpIHtcclxuICAgICAgICAgICAgY29uc3QgcmVzb2x2ZSA9ICgpID0+IGZpbmlzaExlYXZlKGVsLCBkb25lKTtcclxuICAgICAgICAgICAgYWRkVHJhbnNpdGlvbkNsYXNzKGVsLCBsZWF2ZUZyb21DbGFzcyk7XHJcbiAgICAgICAgICAgIC8vIGZvcmNlIHJlZmxvdyBzbyAqLWxlYXZlLWZyb20gY2xhc3NlcyBpbW1lZGlhdGVseSB0YWtlIGVmZmVjdCAoIzI1OTMpXHJcbiAgICAgICAgICAgIGZvcmNlUmVmbG93KCk7XHJcbiAgICAgICAgICAgIGFkZFRyYW5zaXRpb25DbGFzcyhlbCwgbGVhdmVBY3RpdmVDbGFzcyk7XHJcbiAgICAgICAgICAgIG5leHRGcmFtZSgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZW1vdmVUcmFuc2l0aW9uQ2xhc3MoZWwsIGxlYXZlRnJvbUNsYXNzKTtcclxuICAgICAgICAgICAgICAgIGFkZFRyYW5zaXRpb25DbGFzcyhlbCwgbGVhdmVUb0NsYXNzKTtcclxuICAgICAgICAgICAgICAgIGlmICghaGFzRXhwbGljaXRDYWxsYmFjayhvbkxlYXZlKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHdoZW5UcmFuc2l0aW9uRW5kcyhlbCwgdHlwZSwgbGVhdmVEdXJhdGlvbiwgcmVzb2x2ZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBjYWxsSG9vayhvbkxlYXZlLCBbZWwsIHJlc29sdmVdKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIG9uRW50ZXJDYW5jZWxsZWQoZWwpIHtcclxuICAgICAgICAgICAgZmluaXNoRW50ZXIoZWwsIGZhbHNlKTtcclxuICAgICAgICAgICAgY2FsbEhvb2sob25FbnRlckNhbmNlbGxlZCwgW2VsXSk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBvbkFwcGVhckNhbmNlbGxlZChlbCkge1xyXG4gICAgICAgICAgICBmaW5pc2hFbnRlcihlbCwgdHJ1ZSk7XHJcbiAgICAgICAgICAgIGNhbGxIb29rKG9uQXBwZWFyQ2FuY2VsbGVkLCBbZWxdKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIG9uTGVhdmVDYW5jZWxsZWQoZWwpIHtcclxuICAgICAgICAgICAgZmluaXNoTGVhdmUoZWwpO1xyXG4gICAgICAgICAgICBjYWxsSG9vayhvbkxlYXZlQ2FuY2VsbGVkLCBbZWxdKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufVxyXG5mdW5jdGlvbiBub3JtYWxpemVEdXJhdGlvbihkdXJhdGlvbikge1xyXG4gICAgaWYgKGR1cmF0aW9uID09IG51bGwpIHtcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKGlzT2JqZWN0KGR1cmF0aW9uKSkge1xyXG4gICAgICAgIHJldHVybiBbTnVtYmVyT2YoZHVyYXRpb24uZW50ZXIpLCBOdW1iZXJPZihkdXJhdGlvbi5sZWF2ZSldO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgY29uc3QgbiA9IE51bWJlck9mKGR1cmF0aW9uKTtcclxuICAgICAgICByZXR1cm4gW24sIG5dO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIE51bWJlck9mKHZhbCkge1xyXG4gICAgY29uc3QgcmVzID0gdG9OdW1iZXIodmFsKTtcclxuICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpXHJcbiAgICAgICAgdmFsaWRhdGVEdXJhdGlvbihyZXMpO1xyXG4gICAgcmV0dXJuIHJlcztcclxufVxyXG5mdW5jdGlvbiB2YWxpZGF0ZUR1cmF0aW9uKHZhbCkge1xyXG4gICAgaWYgKHR5cGVvZiB2YWwgIT09ICdudW1iZXInKSB7XHJcbiAgICAgICAgd2FybihgPHRyYW5zaXRpb24+IGV4cGxpY2l0IGR1cmF0aW9uIGlzIG5vdCBhIHZhbGlkIG51bWJlciAtIGAgK1xyXG4gICAgICAgICAgICBgZ290ICR7SlNPTi5zdHJpbmdpZnkodmFsKX0uYCk7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChpc05hTih2YWwpKSB7XHJcbiAgICAgICAgd2FybihgPHRyYW5zaXRpb24+IGV4cGxpY2l0IGR1cmF0aW9uIGlzIE5hTiAtIGAgK1xyXG4gICAgICAgICAgICAndGhlIGR1cmF0aW9uIGV4cHJlc3Npb24gbWlnaHQgYmUgaW5jb3JyZWN0LicpO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIGFkZFRyYW5zaXRpb25DbGFzcyhlbCwgY2xzKSB7XHJcbiAgICBjbHMuc3BsaXQoL1xccysvKS5mb3JFYWNoKGMgPT4gYyAmJiBlbC5jbGFzc0xpc3QuYWRkKGMpKTtcclxuICAgIChlbC5fdnRjIHx8XHJcbiAgICAgICAgKGVsLl92dGMgPSBuZXcgU2V0KCkpKS5hZGQoY2xzKTtcclxufVxyXG5mdW5jdGlvbiByZW1vdmVUcmFuc2l0aW9uQ2xhc3MoZWwsIGNscykge1xyXG4gICAgY2xzLnNwbGl0KC9cXHMrLykuZm9yRWFjaChjID0+IGMgJiYgZWwuY2xhc3NMaXN0LnJlbW92ZShjKSk7XHJcbiAgICBjb25zdCB7IF92dGMgfSA9IGVsO1xyXG4gICAgaWYgKF92dGMpIHtcclxuICAgICAgICBfdnRjLmRlbGV0ZShjbHMpO1xyXG4gICAgICAgIGlmICghX3Z0Yy5zaXplKSB7XHJcbiAgICAgICAgICAgIGVsLl92dGMgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIG5leHRGcmFtZShjYikge1xyXG4gICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcclxuICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoY2IpO1xyXG4gICAgfSk7XHJcbn1cclxubGV0IGVuZElkID0gMDtcclxuZnVuY3Rpb24gd2hlblRyYW5zaXRpb25FbmRzKGVsLCBleHBlY3RlZFR5cGUsIGV4cGxpY2l0VGltZW91dCwgcmVzb2x2ZSkge1xyXG4gICAgY29uc3QgaWQgPSAoZWwuX2VuZElkID0gKytlbmRJZCk7XHJcbiAgICBjb25zdCByZXNvbHZlSWZOb3RTdGFsZSA9ICgpID0+IHtcclxuICAgICAgICBpZiAoaWQgPT09IGVsLl9lbmRJZCkge1xyXG4gICAgICAgICAgICByZXNvbHZlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIGlmIChleHBsaWNpdFRpbWVvdXQpIHtcclxuICAgICAgICByZXR1cm4gc2V0VGltZW91dChyZXNvbHZlSWZOb3RTdGFsZSwgZXhwbGljaXRUaW1lb3V0KTtcclxuICAgIH1cclxuICAgIGNvbnN0IHsgdHlwZSwgdGltZW91dCwgcHJvcENvdW50IH0gPSBnZXRUcmFuc2l0aW9uSW5mbyhlbCwgZXhwZWN0ZWRUeXBlKTtcclxuICAgIGlmICghdHlwZSkge1xyXG4gICAgICAgIHJldHVybiByZXNvbHZlKCk7XHJcbiAgICB9XHJcbiAgICBjb25zdCBlbmRFdmVudCA9IHR5cGUgKyAnZW5kJztcclxuICAgIGxldCBlbmRlZCA9IDA7XHJcbiAgICBjb25zdCBlbmQgPSAoKSA9PiB7XHJcbiAgICAgICAgZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcihlbmRFdmVudCwgb25FbmQpO1xyXG4gICAgICAgIHJlc29sdmVJZk5vdFN0YWxlKCk7XHJcbiAgICB9O1xyXG4gICAgY29uc3Qgb25FbmQgPSAoZSkgPT4ge1xyXG4gICAgICAgIGlmIChlLnRhcmdldCA9PT0gZWwgJiYgKytlbmRlZCA+PSBwcm9wQ291bnQpIHtcclxuICAgICAgICAgICAgZW5kKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgIGlmIChlbmRlZCA8IHByb3BDb3VudCkge1xyXG4gICAgICAgICAgICBlbmQoKTtcclxuICAgICAgICB9XHJcbiAgICB9LCB0aW1lb3V0ICsgMSk7XHJcbiAgICBlbC5hZGRFdmVudExpc3RlbmVyKGVuZEV2ZW50LCBvbkVuZCk7XHJcbn1cclxuZnVuY3Rpb24gZ2V0VHJhbnNpdGlvbkluZm8oZWwsIGV4cGVjdGVkVHlwZSkge1xyXG4gICAgY29uc3Qgc3R5bGVzID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUoZWwpO1xyXG4gICAgLy8gSlNET00gbWF5IHJldHVybiB1bmRlZmluZWQgZm9yIHRyYW5zaXRpb24gcHJvcGVydGllc1xyXG4gICAgY29uc3QgZ2V0U3R5bGVQcm9wZXJ0aWVzID0gKGtleSkgPT4gKHN0eWxlc1trZXldIHx8ICcnKS5zcGxpdCgnLCAnKTtcclxuICAgIGNvbnN0IHRyYW5zaXRpb25EZWxheXMgPSBnZXRTdHlsZVByb3BlcnRpZXMoVFJBTlNJVElPTiArICdEZWxheScpO1xyXG4gICAgY29uc3QgdHJhbnNpdGlvbkR1cmF0aW9ucyA9IGdldFN0eWxlUHJvcGVydGllcyhUUkFOU0lUSU9OICsgJ0R1cmF0aW9uJyk7XHJcbiAgICBjb25zdCB0cmFuc2l0aW9uVGltZW91dCA9IGdldFRpbWVvdXQodHJhbnNpdGlvbkRlbGF5cywgdHJhbnNpdGlvbkR1cmF0aW9ucyk7XHJcbiAgICBjb25zdCBhbmltYXRpb25EZWxheXMgPSBnZXRTdHlsZVByb3BlcnRpZXMoQU5JTUFUSU9OICsgJ0RlbGF5Jyk7XHJcbiAgICBjb25zdCBhbmltYXRpb25EdXJhdGlvbnMgPSBnZXRTdHlsZVByb3BlcnRpZXMoQU5JTUFUSU9OICsgJ0R1cmF0aW9uJyk7XHJcbiAgICBjb25zdCBhbmltYXRpb25UaW1lb3V0ID0gZ2V0VGltZW91dChhbmltYXRpb25EZWxheXMsIGFuaW1hdGlvbkR1cmF0aW9ucyk7XHJcbiAgICBsZXQgdHlwZSA9IG51bGw7XHJcbiAgICBsZXQgdGltZW91dCA9IDA7XHJcbiAgICBsZXQgcHJvcENvdW50ID0gMDtcclxuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xyXG4gICAgaWYgKGV4cGVjdGVkVHlwZSA9PT0gVFJBTlNJVElPTikge1xyXG4gICAgICAgIGlmICh0cmFuc2l0aW9uVGltZW91dCA+IDApIHtcclxuICAgICAgICAgICAgdHlwZSA9IFRSQU5TSVRJT047XHJcbiAgICAgICAgICAgIHRpbWVvdXQgPSB0cmFuc2l0aW9uVGltZW91dDtcclxuICAgICAgICAgICAgcHJvcENvdW50ID0gdHJhbnNpdGlvbkR1cmF0aW9ucy5sZW5ndGg7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoZXhwZWN0ZWRUeXBlID09PSBBTklNQVRJT04pIHtcclxuICAgICAgICBpZiAoYW5pbWF0aW9uVGltZW91dCA+IDApIHtcclxuICAgICAgICAgICAgdHlwZSA9IEFOSU1BVElPTjtcclxuICAgICAgICAgICAgdGltZW91dCA9IGFuaW1hdGlvblRpbWVvdXQ7XHJcbiAgICAgICAgICAgIHByb3BDb3VudCA9IGFuaW1hdGlvbkR1cmF0aW9ucy5sZW5ndGg7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgdGltZW91dCA9IE1hdGgubWF4KHRyYW5zaXRpb25UaW1lb3V0LCBhbmltYXRpb25UaW1lb3V0KTtcclxuICAgICAgICB0eXBlID1cclxuICAgICAgICAgICAgdGltZW91dCA+IDBcclxuICAgICAgICAgICAgICAgID8gdHJhbnNpdGlvblRpbWVvdXQgPiBhbmltYXRpb25UaW1lb3V0XHJcbiAgICAgICAgICAgICAgICAgICAgPyBUUkFOU0lUSU9OXHJcbiAgICAgICAgICAgICAgICAgICAgOiBBTklNQVRJT05cclxuICAgICAgICAgICAgICAgIDogbnVsbDtcclxuICAgICAgICBwcm9wQ291bnQgPSB0eXBlXHJcbiAgICAgICAgICAgID8gdHlwZSA9PT0gVFJBTlNJVElPTlxyXG4gICAgICAgICAgICAgICAgPyB0cmFuc2l0aW9uRHVyYXRpb25zLmxlbmd0aFxyXG4gICAgICAgICAgICAgICAgOiBhbmltYXRpb25EdXJhdGlvbnMubGVuZ3RoXHJcbiAgICAgICAgICAgIDogMDtcclxuICAgIH1cclxuICAgIGNvbnN0IGhhc1RyYW5zZm9ybSA9IHR5cGUgPT09IFRSQU5TSVRJT04gJiZcclxuICAgICAgICAvXFxiKHRyYW5zZm9ybXxhbGwpKCx8JCkvLnRlc3Qoc3R5bGVzW1RSQU5TSVRJT04gKyAnUHJvcGVydHknXSk7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIHR5cGUsXHJcbiAgICAgICAgdGltZW91dCxcclxuICAgICAgICBwcm9wQ291bnQsXHJcbiAgICAgICAgaGFzVHJhbnNmb3JtXHJcbiAgICB9O1xyXG59XHJcbmZ1bmN0aW9uIGdldFRpbWVvdXQoZGVsYXlzLCBkdXJhdGlvbnMpIHtcclxuICAgIHdoaWxlIChkZWxheXMubGVuZ3RoIDwgZHVyYXRpb25zLmxlbmd0aCkge1xyXG4gICAgICAgIGRlbGF5cyA9IGRlbGF5cy5jb25jYXQoZGVsYXlzKTtcclxuICAgIH1cclxuICAgIHJldHVybiBNYXRoLm1heCguLi5kdXJhdGlvbnMubWFwKChkLCBpKSA9PiB0b01zKGQpICsgdG9NcyhkZWxheXNbaV0pKSk7XHJcbn1cclxuLy8gT2xkIHZlcnNpb25zIG9mIENocm9taXVtIChiZWxvdyA2MS4wLjMxNjMuMTAwKSBmb3JtYXRzIGZsb2F0aW5nIHBvaW50ZXJcclxuLy8gbnVtYmVycyBpbiBhIGxvY2FsZS1kZXBlbmRlbnQgd2F5LCB1c2luZyBhIGNvbW1hIGluc3RlYWQgb2YgYSBkb3QuXHJcbi8vIElmIGNvbW1hIGlzIG5vdCByZXBsYWNlZCB3aXRoIGEgZG90LCB0aGUgaW5wdXQgd2lsbCBiZSByb3VuZGVkIGRvd25cclxuLy8gKGkuZS4gYWN0aW5nIGFzIGEgZmxvb3IgZnVuY3Rpb24pIGNhdXNpbmcgdW5leHBlY3RlZCBiZWhhdmlvcnNcclxuZnVuY3Rpb24gdG9NcyhzKSB7XHJcbiAgICByZXR1cm4gTnVtYmVyKHMuc2xpY2UoMCwgLTEpLnJlcGxhY2UoJywnLCAnLicpKSAqIDEwMDA7XHJcbn1cclxuLy8gc3luY2hyb25vdXNseSBmb3JjZSBsYXlvdXQgdG8gcHV0IGVsZW1lbnRzIGludG8gYSBjZXJ0YWluIHN0YXRlXHJcbmZ1bmN0aW9uIGZvcmNlUmVmbG93KCkge1xyXG4gICAgcmV0dXJuIGRvY3VtZW50LmJvZHkub2Zmc2V0SGVpZ2h0O1xyXG59XG5cbmNvbnN0IHBvc2l0aW9uTWFwID0gbmV3IFdlYWtNYXAoKTtcclxuY29uc3QgbmV3UG9zaXRpb25NYXAgPSBuZXcgV2Vha01hcCgpO1xyXG5jb25zdCBUcmFuc2l0aW9uR3JvdXBJbXBsID0ge1xyXG4gICAgbmFtZTogJ1RyYW5zaXRpb25Hcm91cCcsXHJcbiAgICBwcm9wczogLyojX19QVVJFX18qLyBleHRlbmQoe30sIFRyYW5zaXRpb25Qcm9wc1ZhbGlkYXRvcnMsIHtcclxuICAgICAgICB0YWc6IFN0cmluZyxcclxuICAgICAgICBtb3ZlQ2xhc3M6IFN0cmluZ1xyXG4gICAgfSksXHJcbiAgICBzZXR1cChwcm9wcywgeyBzbG90cyB9KSB7XHJcbiAgICAgICAgY29uc3QgaW5zdGFuY2UgPSBnZXRDdXJyZW50SW5zdGFuY2UoKTtcclxuICAgICAgICBjb25zdCBzdGF0ZSA9IHVzZVRyYW5zaXRpb25TdGF0ZSgpO1xyXG4gICAgICAgIGxldCBwcmV2Q2hpbGRyZW47XHJcbiAgICAgICAgbGV0IGNoaWxkcmVuO1xyXG4gICAgICAgIG9uVXBkYXRlZCgoKSA9PiB7XHJcbiAgICAgICAgICAgIC8vIGNoaWxkcmVuIGlzIGd1YXJhbnRlZWQgdG8gZXhpc3QgYWZ0ZXIgaW5pdGlhbCByZW5kZXJcclxuICAgICAgICAgICAgaWYgKCFwcmV2Q2hpbGRyZW4ubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29uc3QgbW92ZUNsYXNzID0gcHJvcHMubW92ZUNsYXNzIHx8IGAke3Byb3BzLm5hbWUgfHwgJ3YnfS1tb3ZlYDtcclxuICAgICAgICAgICAgaWYgKCFoYXNDU1NUcmFuc2Zvcm0ocHJldkNoaWxkcmVuWzBdLmVsLCBpbnN0YW5jZS52bm9kZS5lbCwgbW92ZUNsYXNzKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIHdlIGRpdmlkZSB0aGUgd29yayBpbnRvIHRocmVlIGxvb3BzIHRvIGF2b2lkIG1peGluZyBET00gcmVhZHMgYW5kIHdyaXRlc1xyXG4gICAgICAgICAgICAvLyBpbiBlYWNoIGl0ZXJhdGlvbiAtIHdoaWNoIGhlbHBzIHByZXZlbnQgbGF5b3V0IHRocmFzaGluZy5cclxuICAgICAgICAgICAgcHJldkNoaWxkcmVuLmZvckVhY2goY2FsbFBlbmRpbmdDYnMpO1xyXG4gICAgICAgICAgICBwcmV2Q2hpbGRyZW4uZm9yRWFjaChyZWNvcmRQb3NpdGlvbik7XHJcbiAgICAgICAgICAgIGNvbnN0IG1vdmVkQ2hpbGRyZW4gPSBwcmV2Q2hpbGRyZW4uZmlsdGVyKGFwcGx5VHJhbnNsYXRpb24pO1xyXG4gICAgICAgICAgICAvLyBmb3JjZSByZWZsb3cgdG8gcHV0IGV2ZXJ5dGhpbmcgaW4gcG9zaXRpb25cclxuICAgICAgICAgICAgZm9yY2VSZWZsb3coKTtcclxuICAgICAgICAgICAgbW92ZWRDaGlsZHJlbi5mb3JFYWNoKGMgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZWwgPSBjLmVsO1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc3R5bGUgPSBlbC5zdHlsZTtcclxuICAgICAgICAgICAgICAgIGFkZFRyYW5zaXRpb25DbGFzcyhlbCwgbW92ZUNsYXNzKTtcclxuICAgICAgICAgICAgICAgIHN0eWxlLnRyYW5zZm9ybSA9IHN0eWxlLndlYmtpdFRyYW5zZm9ybSA9IHN0eWxlLnRyYW5zaXRpb25EdXJhdGlvbiA9ICcnO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY2IgPSAoZWwuX21vdmVDYiA9IChlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGUgJiYgZS50YXJnZXQgIT09IGVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFlIHx8IC90cmFuc2Zvcm0kLy50ZXN0KGUucHJvcGVydHlOYW1lKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbC5yZW1vdmVFdmVudExpc3RlbmVyKCd0cmFuc2l0aW9uZW5kJywgY2IpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbC5fbW92ZUNiID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVtb3ZlVHJhbnNpdGlvbkNsYXNzKGVsLCBtb3ZlQ2xhc3MpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcigndHJhbnNpdGlvbmVuZCcsIGNiKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgcmF3UHJvcHMgPSB0b1Jhdyhwcm9wcyk7XHJcbiAgICAgICAgICAgIGNvbnN0IGNzc1RyYW5zaXRpb25Qcm9wcyA9IHJlc29sdmVUcmFuc2l0aW9uUHJvcHMocmF3UHJvcHMpO1xyXG4gICAgICAgICAgICBsZXQgdGFnID0gcmF3UHJvcHMudGFnIHx8IEZyYWdtZW50O1xyXG4gICAgICAgICAgICBwcmV2Q2hpbGRyZW4gPSBjaGlsZHJlbjtcclxuICAgICAgICAgICAgY2hpbGRyZW4gPSBzbG90cy5kZWZhdWx0ID8gZ2V0VHJhbnNpdGlvblJhd0NoaWxkcmVuKHNsb3RzLmRlZmF1bHQoKSkgOiBbXTtcclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjaGlsZHJlbi5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY2hpbGQgPSBjaGlsZHJlbltpXTtcclxuICAgICAgICAgICAgICAgIGlmIChjaGlsZC5rZXkgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHNldFRyYW5zaXRpb25Ib29rcyhjaGlsZCwgcmVzb2x2ZVRyYW5zaXRpb25Ib29rcyhjaGlsZCwgY3NzVHJhbnNpdGlvblByb3BzLCBzdGF0ZSwgaW5zdGFuY2UpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHdhcm4oYDxUcmFuc2l0aW9uR3JvdXA+IGNoaWxkcmVuIG11c3QgYmUga2V5ZWQuYCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHByZXZDaGlsZHJlbikge1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwcmV2Q2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBjaGlsZCA9IHByZXZDaGlsZHJlbltpXTtcclxuICAgICAgICAgICAgICAgICAgICBzZXRUcmFuc2l0aW9uSG9va3MoY2hpbGQsIHJlc29sdmVUcmFuc2l0aW9uSG9va3MoY2hpbGQsIGNzc1RyYW5zaXRpb25Qcm9wcywgc3RhdGUsIGluc3RhbmNlKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb25NYXAuc2V0KGNoaWxkLCBjaGlsZC5lbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZVZOb2RlKHRhZywgbnVsbCwgY2hpbGRyZW4pO1xyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbn07XHJcbmNvbnN0IFRyYW5zaXRpb25Hcm91cCA9IFRyYW5zaXRpb25Hcm91cEltcGw7XHJcbmZ1bmN0aW9uIGNhbGxQZW5kaW5nQ2JzKGMpIHtcclxuICAgIGNvbnN0IGVsID0gYy5lbDtcclxuICAgIGlmIChlbC5fbW92ZUNiKSB7XHJcbiAgICAgICAgZWwuX21vdmVDYigpO1xyXG4gICAgfVxyXG4gICAgaWYgKGVsLl9lbnRlckNiKSB7XHJcbiAgICAgICAgZWwuX2VudGVyQ2IoKTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiByZWNvcmRQb3NpdGlvbihjKSB7XHJcbiAgICBuZXdQb3NpdGlvbk1hcC5zZXQoYywgYy5lbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSk7XHJcbn1cclxuZnVuY3Rpb24gYXBwbHlUcmFuc2xhdGlvbihjKSB7XHJcbiAgICBjb25zdCBvbGRQb3MgPSBwb3NpdGlvbk1hcC5nZXQoYyk7XHJcbiAgICBjb25zdCBuZXdQb3MgPSBuZXdQb3NpdGlvbk1hcC5nZXQoYyk7XHJcbiAgICBjb25zdCBkeCA9IG9sZFBvcy5sZWZ0IC0gbmV3UG9zLmxlZnQ7XHJcbiAgICBjb25zdCBkeSA9IG9sZFBvcy50b3AgLSBuZXdQb3MudG9wO1xyXG4gICAgaWYgKGR4IHx8IGR5KSB7XHJcbiAgICAgICAgY29uc3QgcyA9IGMuZWwuc3R5bGU7XHJcbiAgICAgICAgcy50cmFuc2Zvcm0gPSBzLndlYmtpdFRyYW5zZm9ybSA9IGB0cmFuc2xhdGUoJHtkeH1weCwke2R5fXB4KWA7XHJcbiAgICAgICAgcy50cmFuc2l0aW9uRHVyYXRpb24gPSAnMHMnO1xyXG4gICAgICAgIHJldHVybiBjO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIGhhc0NTU1RyYW5zZm9ybShlbCwgcm9vdCwgbW92ZUNsYXNzKSB7XHJcbiAgICAvLyBEZXRlY3Qgd2hldGhlciBhbiBlbGVtZW50IHdpdGggdGhlIG1vdmUgY2xhc3MgYXBwbGllZCBoYXNcclxuICAgIC8vIENTUyB0cmFuc2l0aW9ucy4gU2luY2UgdGhlIGVsZW1lbnQgbWF5IGJlIGluc2lkZSBhbiBlbnRlcmluZ1xyXG4gICAgLy8gdHJhbnNpdGlvbiBhdCB0aGlzIHZlcnkgbW9tZW50LCB3ZSBtYWtlIGEgY2xvbmUgb2YgaXQgYW5kIHJlbW92ZVxyXG4gICAgLy8gYWxsIG90aGVyIHRyYW5zaXRpb24gY2xhc3NlcyBhcHBsaWVkIHRvIGVuc3VyZSBvbmx5IHRoZSBtb3ZlIGNsYXNzXHJcbiAgICAvLyBpcyBhcHBsaWVkLlxyXG4gICAgY29uc3QgY2xvbmUgPSBlbC5jbG9uZU5vZGUoKTtcclxuICAgIGlmIChlbC5fdnRjKSB7XHJcbiAgICAgICAgZWwuX3Z0Yy5mb3JFYWNoKGNscyA9PiB7XHJcbiAgICAgICAgICAgIGNscy5zcGxpdCgvXFxzKy8pLmZvckVhY2goYyA9PiBjICYmIGNsb25lLmNsYXNzTGlzdC5yZW1vdmUoYykpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgbW92ZUNsYXNzLnNwbGl0KC9cXHMrLykuZm9yRWFjaChjID0+IGMgJiYgY2xvbmUuY2xhc3NMaXN0LmFkZChjKSk7XHJcbiAgICBjbG9uZS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG4gICAgY29uc3QgY29udGFpbmVyID0gKHJvb3Qubm9kZVR5cGUgPT09IDEgPyByb290IDogcm9vdC5wYXJlbnROb2RlKTtcclxuICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChjbG9uZSk7XHJcbiAgICBjb25zdCB7IGhhc1RyYW5zZm9ybSB9ID0gZ2V0VHJhbnNpdGlvbkluZm8oY2xvbmUpO1xyXG4gICAgY29udGFpbmVyLnJlbW92ZUNoaWxkKGNsb25lKTtcclxuICAgIHJldHVybiBoYXNUcmFuc2Zvcm07XHJcbn1cblxuY29uc3QgZ2V0TW9kZWxBc3NpZ25lciA9ICh2bm9kZSkgPT4ge1xyXG4gICAgY29uc3QgZm4gPSB2bm9kZS5wcm9wc1snb25VcGRhdGU6bW9kZWxWYWx1ZSddO1xyXG4gICAgcmV0dXJuIGlzQXJyYXkoZm4pID8gdmFsdWUgPT4gaW52b2tlQXJyYXlGbnMoZm4sIHZhbHVlKSA6IGZuO1xyXG59O1xyXG5mdW5jdGlvbiBvbkNvbXBvc2l0aW9uU3RhcnQoZSkge1xyXG4gICAgZS50YXJnZXQuY29tcG9zaW5nID0gdHJ1ZTtcclxufVxyXG5mdW5jdGlvbiBvbkNvbXBvc2l0aW9uRW5kKGUpIHtcclxuICAgIGNvbnN0IHRhcmdldCA9IGUudGFyZ2V0O1xyXG4gICAgaWYgKHRhcmdldC5jb21wb3NpbmcpIHtcclxuICAgICAgICB0YXJnZXQuY29tcG9zaW5nID0gZmFsc2U7XHJcbiAgICAgICAgdHJpZ2dlcih0YXJnZXQsICdpbnB1dCcpO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIHRyaWdnZXIoZWwsIHR5cGUpIHtcclxuICAgIGNvbnN0IGUgPSBkb2N1bWVudC5jcmVhdGVFdmVudCgnSFRNTEV2ZW50cycpO1xyXG4gICAgZS5pbml0RXZlbnQodHlwZSwgdHJ1ZSwgdHJ1ZSk7XHJcbiAgICBlbC5kaXNwYXRjaEV2ZW50KGUpO1xyXG59XHJcbi8vIFdlIGFyZSBleHBvcnRpbmcgdGhlIHYtbW9kZWwgcnVudGltZSBkaXJlY3RseSBhcyB2bm9kZSBob29rcyBzbyB0aGF0IGl0IGNhblxyXG4vLyBiZSB0cmVlLXNoYWtlbiBpbiBjYXNlIHYtbW9kZWwgaXMgbmV2ZXIgdXNlZC5cclxuY29uc3Qgdk1vZGVsVGV4dCA9IHtcclxuICAgIGNyZWF0ZWQoZWwsIHsgbW9kaWZpZXJzOiB7IGxhenksIHRyaW0sIG51bWJlciB9IH0sIHZub2RlKSB7XHJcbiAgICAgICAgZWwuX2Fzc2lnbiA9IGdldE1vZGVsQXNzaWduZXIodm5vZGUpO1xyXG4gICAgICAgIGNvbnN0IGNhc3RUb051bWJlciA9IG51bWJlciB8fCAodm5vZGUucHJvcHMgJiYgdm5vZGUucHJvcHMudHlwZSA9PT0gJ251bWJlcicpO1xyXG4gICAgICAgIGFkZEV2ZW50TGlzdGVuZXIoZWwsIGxhenkgPyAnY2hhbmdlJyA6ICdpbnB1dCcsIGUgPT4ge1xyXG4gICAgICAgICAgICBpZiAoZS50YXJnZXQuY29tcG9zaW5nKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICBsZXQgZG9tVmFsdWUgPSBlbC52YWx1ZTtcclxuICAgICAgICAgICAgaWYgKHRyaW0pIHtcclxuICAgICAgICAgICAgICAgIGRvbVZhbHVlID0gZG9tVmFsdWUudHJpbSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKGNhc3RUb051bWJlcikge1xyXG4gICAgICAgICAgICAgICAgZG9tVmFsdWUgPSB0b051bWJlcihkb21WYWx1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWwuX2Fzc2lnbihkb21WYWx1ZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgaWYgKHRyaW0pIHtcclxuICAgICAgICAgICAgYWRkRXZlbnRMaXN0ZW5lcihlbCwgJ2NoYW5nZScsICgpID0+IHtcclxuICAgICAgICAgICAgICAgIGVsLnZhbHVlID0gZWwudmFsdWUudHJpbSgpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCFsYXp5KSB7XHJcbiAgICAgICAgICAgIGFkZEV2ZW50TGlzdGVuZXIoZWwsICdjb21wb3NpdGlvbnN0YXJ0Jywgb25Db21wb3NpdGlvblN0YXJ0KTtcclxuICAgICAgICAgICAgYWRkRXZlbnRMaXN0ZW5lcihlbCwgJ2NvbXBvc2l0aW9uZW5kJywgb25Db21wb3NpdGlvbkVuZCk7XHJcbiAgICAgICAgICAgIC8vIFNhZmFyaSA8IDEwLjIgJiBVSVdlYlZpZXcgZG9lc24ndCBmaXJlIGNvbXBvc2l0aW9uZW5kIHdoZW5cclxuICAgICAgICAgICAgLy8gc3dpdGNoaW5nIGZvY3VzIGJlZm9yZSBjb25maXJtaW5nIGNvbXBvc2l0aW9uIGNob2ljZVxyXG4gICAgICAgICAgICAvLyB0aGlzIGFsc28gZml4ZXMgdGhlIGlzc3VlIHdoZXJlIHNvbWUgYnJvd3NlcnMgZS5nLiBpT1MgQ2hyb21lXHJcbiAgICAgICAgICAgIC8vIGZpcmVzIFwiY2hhbmdlXCIgaW5zdGVhZCBvZiBcImlucHV0XCIgb24gYXV0b2NvbXBsZXRlLlxyXG4gICAgICAgICAgICBhZGRFdmVudExpc3RlbmVyKGVsLCAnY2hhbmdlJywgb25Db21wb3NpdGlvbkVuZCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIC8vIHNldCB2YWx1ZSBvbiBtb3VudGVkIHNvIGl0J3MgYWZ0ZXIgbWluL21heCBmb3IgdHlwZT1cInJhbmdlXCJcclxuICAgIG1vdW50ZWQoZWwsIHsgdmFsdWUgfSkge1xyXG4gICAgICAgIGVsLnZhbHVlID0gdmFsdWUgPT0gbnVsbCA/ICcnIDogdmFsdWU7XHJcbiAgICB9LFxyXG4gICAgYmVmb3JlVXBkYXRlKGVsLCB7IHZhbHVlLCBtb2RpZmllcnM6IHsgbGF6eSwgdHJpbSwgbnVtYmVyIH0gfSwgdm5vZGUpIHtcclxuICAgICAgICBlbC5fYXNzaWduID0gZ2V0TW9kZWxBc3NpZ25lcih2bm9kZSk7XHJcbiAgICAgICAgLy8gYXZvaWQgY2xlYXJpbmcgdW5yZXNvbHZlZCB0ZXh0LiAjMjMwMlxyXG4gICAgICAgIGlmIChlbC5jb21wb3NpbmcpXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICBpZiAoZG9jdW1lbnQuYWN0aXZlRWxlbWVudCA9PT0gZWwpIHtcclxuICAgICAgICAgICAgaWYgKGxhenkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodHJpbSAmJiBlbC52YWx1ZS50cmltKCkgPT09IHZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKChudW1iZXIgfHwgZWwudHlwZSA9PT0gJ251bWJlcicpICYmIHRvTnVtYmVyKGVsLnZhbHVlKSA9PT0gdmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBuZXdWYWx1ZSA9IHZhbHVlID09IG51bGwgPyAnJyA6IHZhbHVlO1xyXG4gICAgICAgIGlmIChlbC52YWx1ZSAhPT0gbmV3VmFsdWUpIHtcclxuICAgICAgICAgICAgZWwudmFsdWUgPSBuZXdWYWx1ZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn07XHJcbmNvbnN0IHZNb2RlbENoZWNrYm94ID0ge1xyXG4gICAgLy8gIzQwOTYgYXJyYXkgY2hlY2tib3hlcyBuZWVkIHRvIGJlIGRlZXAgdHJhdmVyc2VkXHJcbiAgICBkZWVwOiB0cnVlLFxyXG4gICAgY3JlYXRlZChlbCwgXywgdm5vZGUpIHtcclxuICAgICAgICBlbC5fYXNzaWduID0gZ2V0TW9kZWxBc3NpZ25lcih2bm9kZSk7XHJcbiAgICAgICAgYWRkRXZlbnRMaXN0ZW5lcihlbCwgJ2NoYW5nZScsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgbW9kZWxWYWx1ZSA9IGVsLl9tb2RlbFZhbHVlO1xyXG4gICAgICAgICAgICBjb25zdCBlbGVtZW50VmFsdWUgPSBnZXRWYWx1ZShlbCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGNoZWNrZWQgPSBlbC5jaGVja2VkO1xyXG4gICAgICAgICAgICBjb25zdCBhc3NpZ24gPSBlbC5fYXNzaWduO1xyXG4gICAgICAgICAgICBpZiAoaXNBcnJheShtb2RlbFZhbHVlKSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaW5kZXggPSBsb29zZUluZGV4T2YobW9kZWxWYWx1ZSwgZWxlbWVudFZhbHVlKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGZvdW5kID0gaW5kZXggIT09IC0xO1xyXG4gICAgICAgICAgICAgICAgaWYgKGNoZWNrZWQgJiYgIWZvdW5kKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXNzaWduKG1vZGVsVmFsdWUuY29uY2F0KGVsZW1lbnRWYWx1ZSkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoIWNoZWNrZWQgJiYgZm91bmQpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBmaWx0ZXJlZCA9IFsuLi5tb2RlbFZhbHVlXTtcclxuICAgICAgICAgICAgICAgICAgICBmaWx0ZXJlZC5zcGxpY2UoaW5kZXgsIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgIGFzc2lnbihmaWx0ZXJlZCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoaXNTZXQobW9kZWxWYWx1ZSkpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGNsb25lZCA9IG5ldyBTZXQobW9kZWxWYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoY2hlY2tlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNsb25lZC5hZGQoZWxlbWVudFZhbHVlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGNsb25lZC5kZWxldGUoZWxlbWVudFZhbHVlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGFzc2lnbihjbG9uZWQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgYXNzaWduKGdldENoZWNrYm94VmFsdWUoZWwsIGNoZWNrZWQpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSxcclxuICAgIC8vIHNldCBpbml0aWFsIGNoZWNrZWQgb24gbW91bnQgdG8gd2FpdCBmb3IgdHJ1ZS12YWx1ZS9mYWxzZS12YWx1ZVxyXG4gICAgbW91bnRlZDogc2V0Q2hlY2tlZCxcclxuICAgIGJlZm9yZVVwZGF0ZShlbCwgYmluZGluZywgdm5vZGUpIHtcclxuICAgICAgICBlbC5fYXNzaWduID0gZ2V0TW9kZWxBc3NpZ25lcih2bm9kZSk7XHJcbiAgICAgICAgc2V0Q2hlY2tlZChlbCwgYmluZGluZywgdm5vZGUpO1xyXG4gICAgfVxyXG59O1xyXG5mdW5jdGlvbiBzZXRDaGVja2VkKGVsLCB7IHZhbHVlLCBvbGRWYWx1ZSB9LCB2bm9kZSkge1xyXG4gICAgZWwuX21vZGVsVmFsdWUgPSB2YWx1ZTtcclxuICAgIGlmIChpc0FycmF5KHZhbHVlKSkge1xyXG4gICAgICAgIGVsLmNoZWNrZWQgPSBsb29zZUluZGV4T2YodmFsdWUsIHZub2RlLnByb3BzLnZhbHVlKSA+IC0xO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoaXNTZXQodmFsdWUpKSB7XHJcbiAgICAgICAgZWwuY2hlY2tlZCA9IHZhbHVlLmhhcyh2bm9kZS5wcm9wcy52YWx1ZSk7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmICh2YWx1ZSAhPT0gb2xkVmFsdWUpIHtcclxuICAgICAgICBlbC5jaGVja2VkID0gbG9vc2VFcXVhbCh2YWx1ZSwgZ2V0Q2hlY2tib3hWYWx1ZShlbCwgdHJ1ZSkpO1xyXG4gICAgfVxyXG59XHJcbmNvbnN0IHZNb2RlbFJhZGlvID0ge1xyXG4gICAgY3JlYXRlZChlbCwgeyB2YWx1ZSB9LCB2bm9kZSkge1xyXG4gICAgICAgIGVsLmNoZWNrZWQgPSBsb29zZUVxdWFsKHZhbHVlLCB2bm9kZS5wcm9wcy52YWx1ZSk7XHJcbiAgICAgICAgZWwuX2Fzc2lnbiA9IGdldE1vZGVsQXNzaWduZXIodm5vZGUpO1xyXG4gICAgICAgIGFkZEV2ZW50TGlzdGVuZXIoZWwsICdjaGFuZ2UnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGVsLl9hc3NpZ24oZ2V0VmFsdWUoZWwpKTtcclxuICAgICAgICB9KTtcclxuICAgIH0sXHJcbiAgICBiZWZvcmVVcGRhdGUoZWwsIHsgdmFsdWUsIG9sZFZhbHVlIH0sIHZub2RlKSB7XHJcbiAgICAgICAgZWwuX2Fzc2lnbiA9IGdldE1vZGVsQXNzaWduZXIodm5vZGUpO1xyXG4gICAgICAgIGlmICh2YWx1ZSAhPT0gb2xkVmFsdWUpIHtcclxuICAgICAgICAgICAgZWwuY2hlY2tlZCA9IGxvb3NlRXF1YWwodmFsdWUsIHZub2RlLnByb3BzLnZhbHVlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn07XHJcbmNvbnN0IHZNb2RlbFNlbGVjdCA9IHtcclxuICAgIC8vIDxzZWxlY3QgbXVsdGlwbGU+IHZhbHVlIG5lZWQgdG8gYmUgZGVlcCB0cmF2ZXJzZWRcclxuICAgIGRlZXA6IHRydWUsXHJcbiAgICBjcmVhdGVkKGVsLCB7IHZhbHVlLCBtb2RpZmllcnM6IHsgbnVtYmVyIH0gfSwgdm5vZGUpIHtcclxuICAgICAgICBjb25zdCBpc1NldE1vZGVsID0gaXNTZXQodmFsdWUpO1xyXG4gICAgICAgIGFkZEV2ZW50TGlzdGVuZXIoZWwsICdjaGFuZ2UnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHNlbGVjdGVkVmFsID0gQXJyYXkucHJvdG90eXBlLmZpbHRlclxyXG4gICAgICAgICAgICAgICAgLmNhbGwoZWwub3B0aW9ucywgKG8pID0+IG8uc2VsZWN0ZWQpXHJcbiAgICAgICAgICAgICAgICAubWFwKChvKSA9PiBudW1iZXIgPyB0b051bWJlcihnZXRWYWx1ZShvKSkgOiBnZXRWYWx1ZShvKSk7XHJcbiAgICAgICAgICAgIGVsLl9hc3NpZ24oZWwubXVsdGlwbGVcclxuICAgICAgICAgICAgICAgID8gaXNTZXRNb2RlbFxyXG4gICAgICAgICAgICAgICAgICAgID8gbmV3IFNldChzZWxlY3RlZFZhbClcclxuICAgICAgICAgICAgICAgICAgICA6IHNlbGVjdGVkVmFsXHJcbiAgICAgICAgICAgICAgICA6IHNlbGVjdGVkVmFsWzBdKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBlbC5fYXNzaWduID0gZ2V0TW9kZWxBc3NpZ25lcih2bm9kZSk7XHJcbiAgICB9LFxyXG4gICAgLy8gc2V0IHZhbHVlIGluIG1vdW50ZWQgJiB1cGRhdGVkIGJlY2F1c2UgPHNlbGVjdD4gcmVsaWVzIG9uIGl0cyBjaGlsZHJlblxyXG4gICAgLy8gPG9wdGlvbj5zLlxyXG4gICAgbW91bnRlZChlbCwgeyB2YWx1ZSB9KSB7XHJcbiAgICAgICAgc2V0U2VsZWN0ZWQoZWwsIHZhbHVlKTtcclxuICAgIH0sXHJcbiAgICBiZWZvcmVVcGRhdGUoZWwsIF9iaW5kaW5nLCB2bm9kZSkge1xyXG4gICAgICAgIGVsLl9hc3NpZ24gPSBnZXRNb2RlbEFzc2lnbmVyKHZub2RlKTtcclxuICAgIH0sXHJcbiAgICB1cGRhdGVkKGVsLCB7IHZhbHVlIH0pIHtcclxuICAgICAgICBzZXRTZWxlY3RlZChlbCwgdmFsdWUpO1xyXG4gICAgfVxyXG59O1xyXG5mdW5jdGlvbiBzZXRTZWxlY3RlZChlbCwgdmFsdWUpIHtcclxuICAgIGNvbnN0IGlzTXVsdGlwbGUgPSBlbC5tdWx0aXBsZTtcclxuICAgIGlmIChpc011bHRpcGxlICYmICFpc0FycmF5KHZhbHVlKSAmJiAhaXNTZXQodmFsdWUpKSB7XHJcbiAgICAgICAgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmXHJcbiAgICAgICAgICAgIHdhcm4oYDxzZWxlY3QgbXVsdGlwbGUgdi1tb2RlbD4gZXhwZWN0cyBhbiBBcnJheSBvciBTZXQgdmFsdWUgZm9yIGl0cyBiaW5kaW5nLCBgICtcclxuICAgICAgICAgICAgICAgIGBidXQgZ290ICR7T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhbHVlKS5zbGljZSg4LCAtMSl9LmApO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGZvciAobGV0IGkgPSAwLCBsID0gZWwub3B0aW9ucy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcclxuICAgICAgICBjb25zdCBvcHRpb24gPSBlbC5vcHRpb25zW2ldO1xyXG4gICAgICAgIGNvbnN0IG9wdGlvblZhbHVlID0gZ2V0VmFsdWUob3B0aW9uKTtcclxuICAgICAgICBpZiAoaXNNdWx0aXBsZSkge1xyXG4gICAgICAgICAgICBpZiAoaXNBcnJheSh2YWx1ZSkpIHtcclxuICAgICAgICAgICAgICAgIG9wdGlvbi5zZWxlY3RlZCA9IGxvb3NlSW5kZXhPZih2YWx1ZSwgb3B0aW9uVmFsdWUpID4gLTE7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBvcHRpb24uc2VsZWN0ZWQgPSB2YWx1ZS5oYXMob3B0aW9uVmFsdWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAobG9vc2VFcXVhbChnZXRWYWx1ZShvcHRpb24pLCB2YWx1ZSkpIHtcclxuICAgICAgICAgICAgICAgIGlmIChlbC5zZWxlY3RlZEluZGV4ICE9PSBpKVxyXG4gICAgICAgICAgICAgICAgICAgIGVsLnNlbGVjdGVkSW5kZXggPSBpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYgKCFpc011bHRpcGxlICYmIGVsLnNlbGVjdGVkSW5kZXggIT09IC0xKSB7XHJcbiAgICAgICAgZWwuc2VsZWN0ZWRJbmRleCA9IC0xO1xyXG4gICAgfVxyXG59XHJcbi8vIHJldHJpZXZlIHJhdyB2YWx1ZSBzZXQgdmlhIDp2YWx1ZSBiaW5kaW5nc1xyXG5mdW5jdGlvbiBnZXRWYWx1ZShlbCkge1xyXG4gICAgcmV0dXJuICdfdmFsdWUnIGluIGVsID8gZWwuX3ZhbHVlIDogZWwudmFsdWU7XHJcbn1cclxuLy8gcmV0cmlldmUgcmF3IHZhbHVlIGZvciB0cnVlLXZhbHVlIGFuZCBmYWxzZS12YWx1ZSBzZXQgdmlhIDp0cnVlLXZhbHVlIG9yIDpmYWxzZS12YWx1ZSBiaW5kaW5nc1xyXG5mdW5jdGlvbiBnZXRDaGVja2JveFZhbHVlKGVsLCBjaGVja2VkKSB7XHJcbiAgICBjb25zdCBrZXkgPSBjaGVja2VkID8gJ190cnVlVmFsdWUnIDogJ19mYWxzZVZhbHVlJztcclxuICAgIHJldHVybiBrZXkgaW4gZWwgPyBlbFtrZXldIDogY2hlY2tlZDtcclxufVxyXG5jb25zdCB2TW9kZWxEeW5hbWljID0ge1xyXG4gICAgY3JlYXRlZChlbCwgYmluZGluZywgdm5vZGUpIHtcclxuICAgICAgICBjYWxsTW9kZWxIb29rKGVsLCBiaW5kaW5nLCB2bm9kZSwgbnVsbCwgJ2NyZWF0ZWQnKTtcclxuICAgIH0sXHJcbiAgICBtb3VudGVkKGVsLCBiaW5kaW5nLCB2bm9kZSkge1xyXG4gICAgICAgIGNhbGxNb2RlbEhvb2soZWwsIGJpbmRpbmcsIHZub2RlLCBudWxsLCAnbW91bnRlZCcpO1xyXG4gICAgfSxcclxuICAgIGJlZm9yZVVwZGF0ZShlbCwgYmluZGluZywgdm5vZGUsIHByZXZWTm9kZSkge1xyXG4gICAgICAgIGNhbGxNb2RlbEhvb2soZWwsIGJpbmRpbmcsIHZub2RlLCBwcmV2Vk5vZGUsICdiZWZvcmVVcGRhdGUnKTtcclxuICAgIH0sXHJcbiAgICB1cGRhdGVkKGVsLCBiaW5kaW5nLCB2bm9kZSwgcHJldlZOb2RlKSB7XHJcbiAgICAgICAgY2FsbE1vZGVsSG9vayhlbCwgYmluZGluZywgdm5vZGUsIHByZXZWTm9kZSwgJ3VwZGF0ZWQnKTtcclxuICAgIH1cclxufTtcclxuZnVuY3Rpb24gY2FsbE1vZGVsSG9vayhlbCwgYmluZGluZywgdm5vZGUsIHByZXZWTm9kZSwgaG9vaykge1xyXG4gICAgbGV0IG1vZGVsVG9Vc2U7XHJcbiAgICBzd2l0Y2ggKGVsLnRhZ05hbWUpIHtcclxuICAgICAgICBjYXNlICdTRUxFQ1QnOlxyXG4gICAgICAgICAgICBtb2RlbFRvVXNlID0gdk1vZGVsU2VsZWN0O1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlICdURVhUQVJFQSc6XHJcbiAgICAgICAgICAgIG1vZGVsVG9Vc2UgPSB2TW9kZWxUZXh0O1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICBzd2l0Y2ggKHZub2RlLnByb3BzICYmIHZub2RlLnByb3BzLnR5cGUpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgJ2NoZWNrYm94JzpcclxuICAgICAgICAgICAgICAgICAgICBtb2RlbFRvVXNlID0gdk1vZGVsQ2hlY2tib3g7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlICdyYWRpbyc6XHJcbiAgICAgICAgICAgICAgICAgICAgbW9kZWxUb1VzZSA9IHZNb2RlbFJhZGlvO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICBtb2RlbFRvVXNlID0gdk1vZGVsVGV4dDtcclxuICAgICAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgY29uc3QgZm4gPSBtb2RlbFRvVXNlW2hvb2tdO1xyXG4gICAgZm4gJiYgZm4oZWwsIGJpbmRpbmcsIHZub2RlLCBwcmV2Vk5vZGUpO1xyXG59XHJcbi8vIFNTUiB2bm9kZSB0cmFuc2Zvcm1zLCBvbmx5IHVzZWQgd2hlbiB1c2VyIGluY2x1ZGVzIGNsaWVudC1vcmllbnRlZCByZW5kZXJcclxuLy8gZnVuY3Rpb24gaW4gU1NSXHJcbmZ1bmN0aW9uIGluaXRWTW9kZWxGb3JTU1IoKSB7XHJcbiAgICB2TW9kZWxUZXh0LmdldFNTUlByb3BzID0gKHsgdmFsdWUgfSkgPT4gKHsgdmFsdWUgfSk7XHJcbiAgICB2TW9kZWxSYWRpby5nZXRTU1JQcm9wcyA9ICh7IHZhbHVlIH0sIHZub2RlKSA9PiB7XHJcbiAgICAgICAgaWYgKHZub2RlLnByb3BzICYmIGxvb3NlRXF1YWwodm5vZGUucHJvcHMudmFsdWUsIHZhbHVlKSkge1xyXG4gICAgICAgICAgICByZXR1cm4geyBjaGVja2VkOiB0cnVlIH07XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIHZNb2RlbENoZWNrYm94LmdldFNTUlByb3BzID0gKHsgdmFsdWUgfSwgdm5vZGUpID0+IHtcclxuICAgICAgICBpZiAoaXNBcnJheSh2YWx1ZSkpIHtcclxuICAgICAgICAgICAgaWYgKHZub2RlLnByb3BzICYmIGxvb3NlSW5kZXhPZih2YWx1ZSwgdm5vZGUucHJvcHMudmFsdWUpID4gLTEpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB7IGNoZWNrZWQ6IHRydWUgfTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChpc1NldCh2YWx1ZSkpIHtcclxuICAgICAgICAgICAgaWYgKHZub2RlLnByb3BzICYmIHZhbHVlLmhhcyh2bm9kZS5wcm9wcy52YWx1ZSkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB7IGNoZWNrZWQ6IHRydWUgfTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICh2YWx1ZSkge1xyXG4gICAgICAgICAgICByZXR1cm4geyBjaGVja2VkOiB0cnVlIH07XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxufVxuXG5jb25zdCBzeXN0ZW1Nb2RpZmllcnMgPSBbJ2N0cmwnLCAnc2hpZnQnLCAnYWx0JywgJ21ldGEnXTtcclxuY29uc3QgbW9kaWZpZXJHdWFyZHMgPSB7XHJcbiAgICBzdG9wOiBlID0+IGUuc3RvcFByb3BhZ2F0aW9uKCksXHJcbiAgICBwcmV2ZW50OiBlID0+IGUucHJldmVudERlZmF1bHQoKSxcclxuICAgIHNlbGY6IGUgPT4gZS50YXJnZXQgIT09IGUuY3VycmVudFRhcmdldCxcclxuICAgIGN0cmw6IGUgPT4gIWUuY3RybEtleSxcclxuICAgIHNoaWZ0OiBlID0+ICFlLnNoaWZ0S2V5LFxyXG4gICAgYWx0OiBlID0+ICFlLmFsdEtleSxcclxuICAgIG1ldGE6IGUgPT4gIWUubWV0YUtleSxcclxuICAgIGxlZnQ6IGUgPT4gJ2J1dHRvbicgaW4gZSAmJiBlLmJ1dHRvbiAhPT0gMCxcclxuICAgIG1pZGRsZTogZSA9PiAnYnV0dG9uJyBpbiBlICYmIGUuYnV0dG9uICE9PSAxLFxyXG4gICAgcmlnaHQ6IGUgPT4gJ2J1dHRvbicgaW4gZSAmJiBlLmJ1dHRvbiAhPT0gMixcclxuICAgIGV4YWN0OiAoZSwgbW9kaWZpZXJzKSA9PiBzeXN0ZW1Nb2RpZmllcnMuc29tZShtID0+IGVbYCR7bX1LZXlgXSAmJiAhbW9kaWZpZXJzLmluY2x1ZGVzKG0pKVxyXG59O1xyXG4vKipcclxuICogQHByaXZhdGVcclxuICovXHJcbmNvbnN0IHdpdGhNb2RpZmllcnMgPSAoZm4sIG1vZGlmaWVycykgPT4ge1xyXG4gICAgcmV0dXJuIChldmVudCwgLi4uYXJncykgPT4ge1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbW9kaWZpZXJzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGd1YXJkID0gbW9kaWZpZXJHdWFyZHNbbW9kaWZpZXJzW2ldXTtcclxuICAgICAgICAgICAgaWYgKGd1YXJkICYmIGd1YXJkKGV2ZW50LCBtb2RpZmllcnMpKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZm4oZXZlbnQsIC4uLmFyZ3MpO1xyXG4gICAgfTtcclxufTtcclxuLy8gS2VwdCBmb3IgMi54IGNvbXBhdC5cclxuLy8gTm90ZTogSUUxMSBjb21wYXQgZm9yIGBzcGFjZWJhcmAgYW5kIGBkZWxgIGlzIHJlbW92ZWQgZm9yIG5vdy5cclxuY29uc3Qga2V5TmFtZXMgPSB7XHJcbiAgICBlc2M6ICdlc2NhcGUnLFxyXG4gICAgc3BhY2U6ICcgJyxcclxuICAgIHVwOiAnYXJyb3ctdXAnLFxyXG4gICAgbGVmdDogJ2Fycm93LWxlZnQnLFxyXG4gICAgcmlnaHQ6ICdhcnJvdy1yaWdodCcsXHJcbiAgICBkb3duOiAnYXJyb3ctZG93bicsXHJcbiAgICBkZWxldGU6ICdiYWNrc3BhY2UnXHJcbn07XHJcbi8qKlxyXG4gKiBAcHJpdmF0ZVxyXG4gKi9cclxuY29uc3Qgd2l0aEtleXMgPSAoZm4sIG1vZGlmaWVycykgPT4ge1xyXG4gICAgcmV0dXJuIChldmVudCkgPT4ge1xyXG4gICAgICAgIGlmICghKCdrZXknIGluIGV2ZW50KSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGV2ZW50S2V5ID0gaHlwaGVuYXRlKGV2ZW50LmtleSk7XHJcbiAgICAgICAgaWYgKG1vZGlmaWVycy5zb21lKGsgPT4gayA9PT0gZXZlbnRLZXkgfHwga2V5TmFtZXNba10gPT09IGV2ZW50S2V5KSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZm4oZXZlbnQpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbn07XG5cbmNvbnN0IHZTaG93ID0ge1xyXG4gICAgYmVmb3JlTW91bnQoZWwsIHsgdmFsdWUgfSwgeyB0cmFuc2l0aW9uIH0pIHtcclxuICAgICAgICBlbC5fdm9kID0gZWwuc3R5bGUuZGlzcGxheSA9PT0gJ25vbmUnID8gJycgOiBlbC5zdHlsZS5kaXNwbGF5O1xyXG4gICAgICAgIGlmICh0cmFuc2l0aW9uICYmIHZhbHVlKSB7XHJcbiAgICAgICAgICAgIHRyYW5zaXRpb24uYmVmb3JlRW50ZXIoZWwpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgc2V0RGlzcGxheShlbCwgdmFsdWUpO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICBtb3VudGVkKGVsLCB7IHZhbHVlIH0sIHsgdHJhbnNpdGlvbiB9KSB7XHJcbiAgICAgICAgaWYgKHRyYW5zaXRpb24gJiYgdmFsdWUpIHtcclxuICAgICAgICAgICAgdHJhbnNpdGlvbi5lbnRlcihlbCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIHVwZGF0ZWQoZWwsIHsgdmFsdWUsIG9sZFZhbHVlIH0sIHsgdHJhbnNpdGlvbiB9KSB7XHJcbiAgICAgICAgaWYgKCF2YWx1ZSA9PT0gIW9sZFZhbHVlKVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgaWYgKHRyYW5zaXRpb24pIHtcclxuICAgICAgICAgICAgaWYgKHZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICB0cmFuc2l0aW9uLmJlZm9yZUVudGVyKGVsKTtcclxuICAgICAgICAgICAgICAgIHNldERpc3BsYXkoZWwsIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgdHJhbnNpdGlvbi5lbnRlcihlbCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0cmFuc2l0aW9uLmxlYXZlKGVsLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2V0RGlzcGxheShlbCwgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHNldERpc3BsYXkoZWwsIHZhbHVlKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgYmVmb3JlVW5tb3VudChlbCwgeyB2YWx1ZSB9KSB7XHJcbiAgICAgICAgc2V0RGlzcGxheShlbCwgdmFsdWUpO1xyXG4gICAgfVxyXG59O1xyXG5mdW5jdGlvbiBzZXREaXNwbGF5KGVsLCB2YWx1ZSkge1xyXG4gICAgZWwuc3R5bGUuZGlzcGxheSA9IHZhbHVlID8gZWwuX3ZvZCA6ICdub25lJztcclxufVxyXG4vLyBTU1Igdm5vZGUgdHJhbnNmb3Jtcywgb25seSB1c2VkIHdoZW4gdXNlciBpbmNsdWRlcyBjbGllbnQtb3JpZW50ZWQgcmVuZGVyXHJcbi8vIGZ1bmN0aW9uIGluIFNTUlxyXG5mdW5jdGlvbiBpbml0VlNob3dGb3JTU1IoKSB7XHJcbiAgICB2U2hvdy5nZXRTU1JQcm9wcyA9ICh7IHZhbHVlIH0pID0+IHtcclxuICAgICAgICBpZiAoIXZhbHVlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7IHN0eWxlOiB7IGRpc3BsYXk6ICdub25lJyB9IH07XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxufVxuXG5jb25zdCByZW5kZXJlck9wdGlvbnMgPSAvKiNfX1BVUkVfXyovIGV4dGVuZCh7IHBhdGNoUHJvcCB9LCBub2RlT3BzKTtcclxuLy8gbGF6eSBjcmVhdGUgdGhlIHJlbmRlcmVyIC0gdGhpcyBtYWtlcyBjb3JlIHJlbmRlcmVyIGxvZ2ljIHRyZWUtc2hha2FibGVcclxuLy8gaW4gY2FzZSB0aGUgdXNlciBvbmx5IGltcG9ydHMgcmVhY3Rpdml0eSB1dGlsaXRpZXMgZnJvbSBWdWUuXHJcbmxldCByZW5kZXJlcjtcclxubGV0IGVuYWJsZWRIeWRyYXRpb24gPSBmYWxzZTtcclxuZnVuY3Rpb24gZW5zdXJlUmVuZGVyZXIoKSB7XHJcbiAgICByZXR1cm4gKHJlbmRlcmVyIHx8XHJcbiAgICAgICAgKHJlbmRlcmVyID0gY3JlYXRlUmVuZGVyZXIocmVuZGVyZXJPcHRpb25zKSkpO1xyXG59XHJcbmZ1bmN0aW9uIGVuc3VyZUh5ZHJhdGlvblJlbmRlcmVyKCkge1xyXG4gICAgcmVuZGVyZXIgPSBlbmFibGVkSHlkcmF0aW9uXHJcbiAgICAgICAgPyByZW5kZXJlclxyXG4gICAgICAgIDogY3JlYXRlSHlkcmF0aW9uUmVuZGVyZXIocmVuZGVyZXJPcHRpb25zKTtcclxuICAgIGVuYWJsZWRIeWRyYXRpb24gPSB0cnVlO1xyXG4gICAgcmV0dXJuIHJlbmRlcmVyO1xyXG59XHJcbi8vIHVzZSBleHBsaWNpdCB0eXBlIGNhc3RzIGhlcmUgdG8gYXZvaWQgaW1wb3J0KCkgY2FsbHMgaW4gcm9sbGVkLXVwIGQudHNcclxuY29uc3QgcmVuZGVyID0gKCguLi5hcmdzKSA9PiB7XHJcbiAgICBlbnN1cmVSZW5kZXJlcigpLnJlbmRlciguLi5hcmdzKTtcclxufSk7XHJcbmNvbnN0IGh5ZHJhdGUgPSAoKC4uLmFyZ3MpID0+IHtcclxuICAgIGVuc3VyZUh5ZHJhdGlvblJlbmRlcmVyKCkuaHlkcmF0ZSguLi5hcmdzKTtcclxufSk7XHJcbmNvbnN0IGNyZWF0ZUFwcCA9ICgoLi4uYXJncykgPT4ge1xyXG4gICAgY29uc3QgYXBwID0gZW5zdXJlUmVuZGVyZXIoKS5jcmVhdGVBcHAoLi4uYXJncyk7XHJcbiAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XHJcbiAgICAgICAgaW5qZWN0TmF0aXZlVGFnQ2hlY2soYXBwKTtcclxuICAgICAgICBpbmplY3RDb21waWxlck9wdGlvbnNDaGVjayhhcHApO1xyXG4gICAgfVxyXG4gICAgY29uc3QgeyBtb3VudCB9ID0gYXBwO1xyXG4gICAgYXBwLm1vdW50ID0gKGNvbnRhaW5lck9yU2VsZWN0b3IpID0+IHtcclxuICAgICAgICBjb25zdCBjb250YWluZXIgPSBub3JtYWxpemVDb250YWluZXIoY29udGFpbmVyT3JTZWxlY3Rvcik7XHJcbiAgICAgICAgaWYgKCFjb250YWluZXIpXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICBjb25zdCBjb21wb25lbnQgPSBhcHAuX2NvbXBvbmVudDtcclxuICAgICAgICBpZiAoIWlzRnVuY3Rpb24oY29tcG9uZW50KSAmJiAhY29tcG9uZW50LnJlbmRlciAmJiAhY29tcG9uZW50LnRlbXBsYXRlKSB7XHJcbiAgICAgICAgICAgIC8vIF9fVU5TQUZFX19cclxuICAgICAgICAgICAgLy8gUmVhc29uOiBwb3RlbnRpYWwgZXhlY3V0aW9uIG9mIEpTIGV4cHJlc3Npb25zIGluIGluLURPTSB0ZW1wbGF0ZS5cclxuICAgICAgICAgICAgLy8gVGhlIHVzZXIgbXVzdCBtYWtlIHN1cmUgdGhlIGluLURPTSB0ZW1wbGF0ZSBpcyB0cnVzdGVkLiBJZiBpdCdzXHJcbiAgICAgICAgICAgIC8vIHJlbmRlcmVkIGJ5IHRoZSBzZXJ2ZXIsIHRoZSB0ZW1wbGF0ZSBzaG91bGQgbm90IGNvbnRhaW4gYW55IHVzZXIgZGF0YS5cclxuICAgICAgICAgICAgY29tcG9uZW50LnRlbXBsYXRlID0gY29udGFpbmVyLmlubmVySFRNTDtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gY2xlYXIgY29udGVudCBiZWZvcmUgbW91bnRpbmdcclxuICAgICAgICBjb250YWluZXIuaW5uZXJIVE1MID0gJyc7XHJcbiAgICAgICAgY29uc3QgcHJveHkgPSBtb3VudChjb250YWluZXIsIGZhbHNlLCBjb250YWluZXIgaW5zdGFuY2VvZiBTVkdFbGVtZW50KTtcclxuICAgICAgICBpZiAoY29udGFpbmVyIGluc3RhbmNlb2YgRWxlbWVudCkge1xyXG4gICAgICAgICAgICBjb250YWluZXIucmVtb3ZlQXR0cmlidXRlKCd2LWNsb2FrJyk7XHJcbiAgICAgICAgICAgIGNvbnRhaW5lci5zZXRBdHRyaWJ1dGUoJ2RhdGEtdi1hcHAnLCAnJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBwcm94eTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gYXBwO1xyXG59KTtcclxuY29uc3QgY3JlYXRlU1NSQXBwID0gKCguLi5hcmdzKSA9PiB7XHJcbiAgICBjb25zdCBhcHAgPSBlbnN1cmVIeWRyYXRpb25SZW5kZXJlcigpLmNyZWF0ZUFwcCguLi5hcmdzKTtcclxuICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcclxuICAgICAgICBpbmplY3ROYXRpdmVUYWdDaGVjayhhcHApO1xyXG4gICAgICAgIGluamVjdENvbXBpbGVyT3B0aW9uc0NoZWNrKGFwcCk7XHJcbiAgICB9XHJcbiAgICBjb25zdCB7IG1vdW50IH0gPSBhcHA7XHJcbiAgICBhcHAubW91bnQgPSAoY29udGFpbmVyT3JTZWxlY3RvcikgPT4ge1xyXG4gICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IG5vcm1hbGl6ZUNvbnRhaW5lcihjb250YWluZXJPclNlbGVjdG9yKTtcclxuICAgICAgICBpZiAoY29udGFpbmVyKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBtb3VudChjb250YWluZXIsIHRydWUsIGNvbnRhaW5lciBpbnN0YW5jZW9mIFNWR0VsZW1lbnQpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICByZXR1cm4gYXBwO1xyXG59KTtcclxuZnVuY3Rpb24gaW5qZWN0TmF0aXZlVGFnQ2hlY2soYXBwKSB7XHJcbiAgICAvLyBJbmplY3QgYGlzTmF0aXZlVGFnYFxyXG4gICAgLy8gdGhpcyBpcyB1c2VkIGZvciBjb21wb25lbnQgbmFtZSB2YWxpZGF0aW9uIChkZXYgb25seSlcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShhcHAuY29uZmlnLCAnaXNOYXRpdmVUYWcnLCB7XHJcbiAgICAgICAgdmFsdWU6ICh0YWcpID0+IGlzSFRNTFRhZyh0YWcpIHx8IGlzU1ZHVGFnKHRhZyksXHJcbiAgICAgICAgd3JpdGFibGU6IGZhbHNlXHJcbiAgICB9KTtcclxufVxyXG4vLyBkZXYgb25seVxyXG5mdW5jdGlvbiBpbmplY3RDb21waWxlck9wdGlvbnNDaGVjayhhcHApIHtcclxuICAgIGlmIChpc1J1bnRpbWVPbmx5KCkpIHtcclxuICAgICAgICBjb25zdCBpc0N1c3RvbUVsZW1lbnQgPSBhcHAuY29uZmlnLmlzQ3VzdG9tRWxlbWVudDtcclxuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoYXBwLmNvbmZpZywgJ2lzQ3VzdG9tRWxlbWVudCcsIHtcclxuICAgICAgICAgICAgZ2V0KCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGlzQ3VzdG9tRWxlbWVudDtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgc2V0KCkge1xyXG4gICAgICAgICAgICAgICAgd2FybihgVGhlIFxcYGlzQ3VzdG9tRWxlbWVudFxcYCBjb25maWcgb3B0aW9uIGlzIGRlcHJlY2F0ZWQuIFVzZSBgICtcclxuICAgICAgICAgICAgICAgICAgICBgXFxgY29tcGlsZXJPcHRpb25zLmlzQ3VzdG9tRWxlbWVudFxcYCBpbnN0ZWFkLmApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgY29uc3QgY29tcGlsZXJPcHRpb25zID0gYXBwLmNvbmZpZy5jb21waWxlck9wdGlvbnM7XHJcbiAgICAgICAgY29uc3QgbXNnID0gYFRoZSBcXGBjb21waWxlck9wdGlvbnNcXGAgY29uZmlnIG9wdGlvbiBpcyBvbmx5IHJlc3BlY3RlZCB3aGVuIHVzaW5nIGAgK1xyXG4gICAgICAgICAgICBgYSBidWlsZCBvZiBWdWUuanMgdGhhdCBpbmNsdWRlcyB0aGUgcnVudGltZSBjb21waWxlciAoYWthIFwiZnVsbCBidWlsZFwiKS4gYCArXHJcbiAgICAgICAgICAgIGBTaW5jZSB5b3UgYXJlIHVzaW5nIHRoZSBydW50aW1lLW9ubHkgYnVpbGQsIFxcYGNvbXBpbGVyT3B0aW9uc1xcYCBgICtcclxuICAgICAgICAgICAgYG11c3QgYmUgcGFzc2VkIHRvIFxcYEB2dWUvY29tcGlsZXItZG9tXFxgIGluIHRoZSBidWlsZCBzZXR1cCBpbnN0ZWFkLlxcbmAgK1xyXG4gICAgICAgICAgICBgLSBGb3IgdnVlLWxvYWRlcjogcGFzcyBpdCB2aWEgdnVlLWxvYWRlcidzIFxcYGNvbXBpbGVyT3B0aW9uc1xcYCBsb2FkZXIgb3B0aW9uLlxcbmAgK1xyXG4gICAgICAgICAgICBgLSBGb3IgdnVlLWNsaTogc2VlIGh0dHBzOi8vY2xpLnZ1ZWpzLm9yZy9ndWlkZS93ZWJwYWNrLmh0bWwjbW9kaWZ5aW5nLW9wdGlvbnMtb2YtYS1sb2FkZXJcXG5gICtcclxuICAgICAgICAgICAgYC0gRm9yIHZpdGU6IHBhc3MgaXQgdmlhIEB2aXRlanMvcGx1Z2luLXZ1ZSBvcHRpb25zLiBTZWUgaHR0cHM6Ly9naXRodWIuY29tL3ZpdGVqcy92aXRlL3RyZWUvbWFpbi9wYWNrYWdlcy9wbHVnaW4tdnVlI2V4YW1wbGUtZm9yLXBhc3Npbmctb3B0aW9ucy10by12dWVjb21waWxlci1kb21gO1xyXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShhcHAuY29uZmlnLCAnY29tcGlsZXJPcHRpb25zJywge1xyXG4gICAgICAgICAgICBnZXQoKSB7XHJcbiAgICAgICAgICAgICAgICB3YXJuKG1zZyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gY29tcGlsZXJPcHRpb25zO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBzZXQoKSB7XHJcbiAgICAgICAgICAgICAgICB3YXJuKG1zZyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBub3JtYWxpemVDb250YWluZXIoY29udGFpbmVyKSB7XHJcbiAgICBpZiAoaXNTdHJpbmcoY29udGFpbmVyKSkge1xyXG4gICAgICAgIGNvbnN0IHJlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyKTtcclxuICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmICFyZXMpIHtcclxuICAgICAgICAgICAgd2FybihgRmFpbGVkIHRvIG1vdW50IGFwcDogbW91bnQgdGFyZ2V0IHNlbGVjdG9yIFwiJHtjb250YWluZXJ9XCIgcmV0dXJuZWQgbnVsbC5gKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJlcztcclxuICAgIH1cclxuICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiZcclxuICAgICAgICB3aW5kb3cuU2hhZG93Um9vdCAmJlxyXG4gICAgICAgIGNvbnRhaW5lciBpbnN0YW5jZW9mIHdpbmRvdy5TaGFkb3dSb290ICYmXHJcbiAgICAgICAgY29udGFpbmVyLm1vZGUgPT09ICdjbG9zZWQnKSB7XHJcbiAgICAgICAgd2FybihgbW91bnRpbmcgb24gYSBTaGFkb3dSb290IHdpdGggXFxge21vZGU6IFwiY2xvc2VkXCJ9XFxgIG1heSBsZWFkIHRvIHVucHJlZGljdGFibGUgYnVnc2ApO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGNvbnRhaW5lcjtcclxufVxyXG5sZXQgc3NyRGlyZWN0aXZlSW5pdGlhbGl6ZWQgPSBmYWxzZTtcclxuLyoqXHJcbiAqIEBpbnRlcm5hbFxyXG4gKi9cclxuY29uc3QgaW5pdERpcmVjdGl2ZXNGb3JTU1IgPSAoKSA9PiB7XHJcbiAgICAgICAgaWYgKCFzc3JEaXJlY3RpdmVJbml0aWFsaXplZCkge1xyXG4gICAgICAgICAgICBzc3JEaXJlY3RpdmVJbml0aWFsaXplZCA9IHRydWU7XHJcbiAgICAgICAgICAgIGluaXRWTW9kZWxGb3JTU1IoKTtcclxuICAgICAgICAgICAgaW5pdFZTaG93Rm9yU1NSKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgO1xuXG5leHBvcnQgeyBUcmFuc2l0aW9uLCBUcmFuc2l0aW9uR3JvdXAsIFZ1ZUVsZW1lbnQsIGNyZWF0ZUFwcCwgY3JlYXRlU1NSQXBwLCBkZWZpbmVDdXN0b21FbGVtZW50LCBkZWZpbmVTU1JDdXN0b21FbGVtZW50LCBoeWRyYXRlLCBpbml0RGlyZWN0aXZlc0ZvclNTUiwgcmVuZGVyLCB1c2VDc3NNb2R1bGUsIHVzZUNzc1ZhcnMsIHZNb2RlbENoZWNrYm94LCB2TW9kZWxEeW5hbWljLCB2TW9kZWxSYWRpbywgdk1vZGVsU2VsZWN0LCB2TW9kZWxUZXh0LCB2U2hvdywgd2l0aEtleXMsIHdpdGhNb2RpZmllcnMgfTtcbiIsImV4cG9ydCBmdW5jdGlvbiBpbmplY3RQcm9wICh0YXJnZXQsIHByb3BOYW1lLCBnZXQsIHNldCkge1xuICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBwcm9wTmFtZSwge1xuICAgIGdldCxcbiAgICBzZXQsXG4gICAgZW51bWVyYWJsZTogdHJ1ZVxuICB9KVxufVxuXG5leHBvcnQgZnVuY3Rpb24gaW5qZWN0TXVsdGlwbGVQcm9wcyAodGFyZ2V0LCBwcm9wcykge1xuICBmb3IgKGNvbnN0IGtleSBpbiBwcm9wcykge1xuICAgIGluamVjdFByb3AodGFyZ2V0LCBrZXksIHByb3BzWyBrZXkgXSlcbiAgfVxufVxuIiwiLyogZXNsaW50LWRpc2FibGUgbm8tdXNlbGVzcy1lc2NhcGUgKi9cblxuaW1wb3J0IHsgcmVmLCByZWFjdGl2ZSB9IGZyb20gJ3Z1ZSdcbmltcG9ydCB7IGluamVjdFByb3AgfSBmcm9tICcuLi91dGlscy9wcml2YXRlL2luamVjdC1vYmotcHJvcCdcblxuLyoqXG4gKiBfXyBRVUFTQVJfU1NSIF9fICAgICAgICAgICAgLT4gcnVucyBvbiBTU1Igb24gY2xpZW50IG9yIHNlcnZlclxuICogX18gUVVBU0FSX1NTUl9TRVJWRVIgX18gICAgIC0+IHJ1bnMgb24gU1NSIG9uIHNlcnZlclxuICogX18gUVVBU0FSX1NTUl9DTElFTlQgX18gICAgIC0+IHJ1bnMgb24gU1NSIG9uIGNsaWVudFxuICogX18gUVVBU0FSX1NTUl9QV0EgX18gICAgICAgIC0+IGJ1aWx0IHdpdGggU1NSK1BXQTsgbWF5IHJ1biBvbiBTU1Igb24gY2xpZW50IG9yIG9uIFBXQSBjbGllbnRcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKG5lZWRzIHJ1bnRpbWUgZGV0ZWN0aW9uKVxuICovXG5cbmV4cG9ydCBjb25zdCBpc1J1bnRpbWVTc3JQcmVIeWRyYXRpb24gPSBfX1FVQVNBUl9TU1JfU0VSVkVSX19cbiAgPyB7IHZhbHVlOiB0cnVlIH1cbiAgOiByZWYoXG4gICAgX19RVUFTQVJfU1NSX0NMSUVOVF9fICYmIChcbiAgICAgIF9fUVVBU0FSX1NTUl9QV0FfXyA/IGRvY3VtZW50LmJvZHkuZ2V0QXR0cmlidXRlKCdkYXRhLXNlcnZlci1yZW5kZXJlZCcpICE9PSBudWxsIDogdHJ1ZVxuICAgIClcbiAgKVxuXG5leHBvcnQgbGV0IGlvc0VtdWxhdGVkID0gZmFsc2VcbmV4cG9ydCBsZXQgaW9zQ29ycmVjdGlvblxuXG5mdW5jdGlvbiBnZXRNYXRjaCAodXNlckFnZW50LCBwbGF0Zm9ybU1hdGNoKSB7XG4gIGNvbnN0IG1hdGNoID0gLyhlZGd8ZWRnZXxlZGdhfGVkZ2lvcylcXC8oW1xcdy5dKykvLmV4ZWModXNlckFnZW50KVxuICAgIHx8IC8ob3ByKVtcXC9dKFtcXHcuXSspLy5leGVjKHVzZXJBZ2VudClcbiAgICB8fCAvKHZpdmFsZGkpW1xcL10oW1xcdy5dKykvLmV4ZWModXNlckFnZW50KVxuICAgIHx8IC8oY2hyb21lfGNyaW9zKVtcXC9dKFtcXHcuXSspLy5leGVjKHVzZXJBZ2VudClcbiAgICB8fCAvKHZlcnNpb24pKGFwcGxld2Via2l0KVtcXC9dKFtcXHcuXSspLiooc2FmYXJpKVtcXC9dKFtcXHcuXSspLy5leGVjKHVzZXJBZ2VudClcbiAgICB8fCAvKHdlYmtpdClbXFwvXShbXFx3Ll0rKS4qKHZlcnNpb24pW1xcL10oW1xcdy5dKykuKihzYWZhcmkpW1xcL10oW1xcdy5dKykvLmV4ZWModXNlckFnZW50KVxuICAgIHx8IC8oZmlyZWZveHxmeGlvcylbXFwvXShbXFx3Ll0rKS8uZXhlYyh1c2VyQWdlbnQpXG4gICAgfHwgLyh3ZWJraXQpW1xcL10oW1xcdy5dKykvLmV4ZWModXNlckFnZW50KVxuICAgIHx8IC8ob3BlcmEpKD86Lip2ZXJzaW9ufClbXFwvXShbXFx3Ll0rKS8uZXhlYyh1c2VyQWdlbnQpXG4gICAgfHwgW11cblxuICByZXR1cm4ge1xuICAgIGJyb3dzZXI6IG1hdGNoWyA1IF0gfHwgbWF0Y2hbIDMgXSB8fCBtYXRjaFsgMSBdIHx8ICcnLFxuICAgIHZlcnNpb246IG1hdGNoWyAyIF0gfHwgbWF0Y2hbIDQgXSB8fCAnMCcsXG4gICAgdmVyc2lvbk51bWJlcjogbWF0Y2hbIDQgXSB8fCBtYXRjaFsgMiBdIHx8ICcwJyxcbiAgICBwbGF0Zm9ybTogcGxhdGZvcm1NYXRjaFsgMCBdIHx8ICcnXG4gIH1cbn1cblxuZnVuY3Rpb24gZ2V0UGxhdGZvcm1NYXRjaCAodXNlckFnZW50KSB7XG4gIHJldHVybiAvKGlwYWQpLy5leGVjKHVzZXJBZ2VudClcbiAgICB8fCAvKGlwb2QpLy5leGVjKHVzZXJBZ2VudClcbiAgICB8fCAvKHdpbmRvd3MgcGhvbmUpLy5leGVjKHVzZXJBZ2VudClcbiAgICB8fCAvKGlwaG9uZSkvLmV4ZWModXNlckFnZW50KVxuICAgIHx8IC8oa2luZGxlKS8uZXhlYyh1c2VyQWdlbnQpXG4gICAgfHwgLyhzaWxrKS8uZXhlYyh1c2VyQWdlbnQpXG4gICAgfHwgLyhhbmRyb2lkKS8uZXhlYyh1c2VyQWdlbnQpXG4gICAgfHwgLyh3aW4pLy5leGVjKHVzZXJBZ2VudClcbiAgICB8fCAvKG1hYykvLmV4ZWModXNlckFnZW50KVxuICAgIHx8IC8obGludXgpLy5leGVjKHVzZXJBZ2VudClcbiAgICB8fCAvKGNyb3MpLy5leGVjKHVzZXJBZ2VudClcbiAgICAvLyBUT0RPOiBSZW1vdmUgQmxhY2tCZXJyeSBkZXRlY3Rpb24uIEJsYWNrQmVycnkgT1MsIEJsYWNrQmVycnkgMTAsIGFuZCBCbGFja0JlcnJ5IFBsYXlCb29rIE9TXG4gICAgLy8gaXMgb2ZmaWNpYWxseSBkZWFkIGFzIG9mIEphbnVhcnkgNCwgMjAyMiAoaHR0cHM6Ly93d3cuYmxhY2tiZXJyeS5jb20vdXMvZW4vc3VwcG9ydC9kZXZpY2VzL2VuZC1vZi1saWZlKVxuICAgIHx8IC8ocGxheWJvb2spLy5leGVjKHVzZXJBZ2VudClcbiAgICB8fCAvKGJiKS8uZXhlYyh1c2VyQWdlbnQpXG4gICAgfHwgLyhibGFja2JlcnJ5KS8uZXhlYyh1c2VyQWdlbnQpXG4gICAgfHwgW11cbn1cblxuY29uc3QgaGFzVG91Y2ggPSBfX1FVQVNBUl9TU1JfU0VSVkVSX19cbiAgPyBmYWxzZVxuICA6ICdvbnRvdWNoc3RhcnQnIGluIHdpbmRvdyB8fCB3aW5kb3cubmF2aWdhdG9yLm1heFRvdWNoUG9pbnRzID4gMFxuXG5mdW5jdGlvbiBhcHBseUlvc0NvcnJlY3Rpb24gKGlzKSB7XG4gIGlvc0NvcnJlY3Rpb24gPSB7IGlzOiB7IC4uLmlzIH0gfVxuXG4gIGRlbGV0ZSBpcy5tYWNcbiAgZGVsZXRlIGlzLmRlc2t0b3BcblxuICBjb25zdCBwbGF0Zm9ybSA9IE1hdGgubWluKHdpbmRvdy5pbm5lckhlaWdodCwgd2luZG93LmlubmVyV2lkdGgpID4gNDE0XG4gICAgPyAnaXBhZCdcbiAgICA6ICdpcGhvbmUnXG5cbiAgT2JqZWN0LmFzc2lnbihpcywge1xuICAgIG1vYmlsZTogdHJ1ZSxcbiAgICBpb3M6IHRydWUsXG4gICAgcGxhdGZvcm0sXG4gICAgWyBwbGF0Zm9ybSBdOiB0cnVlXG4gIH0pXG59XG5cbmZ1bmN0aW9uIGdldFBsYXRmb3JtIChVQSkge1xuICBjb25zdFxuICAgIHVzZXJBZ2VudCA9IFVBLnRvTG93ZXJDYXNlKCksXG4gICAgcGxhdGZvcm1NYXRjaCA9IGdldFBsYXRmb3JtTWF0Y2godXNlckFnZW50KSxcbiAgICBtYXRjaGVkID0gZ2V0TWF0Y2godXNlckFnZW50LCBwbGF0Zm9ybU1hdGNoKSxcbiAgICBicm93c2VyID0ge31cblxuICBpZiAobWF0Y2hlZC5icm93c2VyKSB7XG4gICAgYnJvd3NlclsgbWF0Y2hlZC5icm93c2VyIF0gPSB0cnVlXG4gICAgYnJvd3Nlci52ZXJzaW9uID0gbWF0Y2hlZC52ZXJzaW9uXG4gICAgYnJvd3Nlci52ZXJzaW9uTnVtYmVyID0gcGFyc2VJbnQobWF0Y2hlZC52ZXJzaW9uTnVtYmVyLCAxMClcbiAgfVxuXG4gIGlmIChtYXRjaGVkLnBsYXRmb3JtKSB7XG4gICAgYnJvd3NlclsgbWF0Y2hlZC5wbGF0Zm9ybSBdID0gdHJ1ZVxuICB9XG5cbiAgY29uc3Qga25vd25Nb2JpbGVzID0gYnJvd3Nlci5hbmRyb2lkXG4gICAgfHwgYnJvd3Nlci5pb3NcbiAgICB8fCBicm93c2VyLmJiXG4gICAgfHwgYnJvd3Nlci5ibGFja2JlcnJ5XG4gICAgfHwgYnJvd3Nlci5pcGFkXG4gICAgfHwgYnJvd3Nlci5pcGhvbmVcbiAgICB8fCBicm93c2VyLmlwb2RcbiAgICB8fCBicm93c2VyLmtpbmRsZVxuICAgIHx8IGJyb3dzZXIucGxheWJvb2tcbiAgICB8fCBicm93c2VyLnNpbGtcbiAgICB8fCBicm93c2VyWyAnd2luZG93cyBwaG9uZScgXVxuXG4gIC8vIFRoZXNlIGFyZSBhbGwgY29uc2lkZXJlZCBtb2JpbGUgcGxhdGZvcm1zLCBtZWFuaW5nIHRoZXkgcnVuIGEgbW9iaWxlIGJyb3dzZXJcbiAgaWYgKGtub3duTW9iaWxlcyA9PT0gdHJ1ZSB8fCB1c2VyQWdlbnQuaW5kZXhPZignbW9iaWxlJykgPiAtMSkge1xuICAgIGJyb3dzZXIubW9iaWxlID0gdHJ1ZVxuXG4gICAgaWYgKGJyb3dzZXIuZWRnYSB8fCBicm93c2VyLmVkZ2lvcykge1xuICAgICAgYnJvd3Nlci5lZGdlID0gdHJ1ZVxuICAgICAgbWF0Y2hlZC5icm93c2VyID0gJ2VkZ2UnXG4gICAgfVxuICAgIGVsc2UgaWYgKGJyb3dzZXIuY3Jpb3MpIHtcbiAgICAgIGJyb3dzZXIuY2hyb21lID0gdHJ1ZVxuICAgICAgbWF0Y2hlZC5icm93c2VyID0gJ2Nocm9tZSdcbiAgICB9XG4gICAgZWxzZSBpZiAoYnJvd3Nlci5meGlvcykge1xuICAgICAgYnJvd3Nlci5maXJlZm94ID0gdHJ1ZVxuICAgICAgbWF0Y2hlZC5icm93c2VyID0gJ2ZpcmVmb3gnXG4gICAgfVxuICB9XG4gIC8vIElmIGl0J3Mgbm90IG1vYmlsZSB3ZSBzaG91bGQgY29uc2lkZXIgaXQncyBkZXNrdG9wIHBsYXRmb3JtLCBtZWFuaW5nIGl0IHJ1bnMgYSBkZXNrdG9wIGJyb3dzZXJcbiAgLy8gSXQncyBhIHdvcmthcm91bmQgZm9yIGFub255bWl6ZWQgdXNlciBhZ2VudHNcbiAgLy8gKGJyb3dzZXIuY3JvcyB8fCBicm93c2VyLm1hYyB8fCBicm93c2VyLmxpbnV4IHx8IGJyb3dzZXIud2luKVxuICBlbHNlIHtcbiAgICBicm93c2VyLmRlc2t0b3AgPSB0cnVlXG4gIH1cblxuICAvLyBTZXQgaU9TIGlmIG9uIGlQb2QsIGlQYWQgb3IgaVBob25lXG4gIGlmIChicm93c2VyLmlwb2QgfHwgYnJvd3Nlci5pcGFkIHx8IGJyb3dzZXIuaXBob25lKSB7XG4gICAgYnJvd3Nlci5pb3MgPSB0cnVlXG4gIH1cblxuICBpZiAoYnJvd3NlclsgJ3dpbmRvd3MgcGhvbmUnIF0pIHtcbiAgICBicm93c2VyLndpbnBob25lID0gdHJ1ZVxuICAgIGRlbGV0ZSBicm93c2VyWyAnd2luZG93cyBwaG9uZScgXVxuICB9XG5cbiAgLy8gVE9ETzogVGhlIGFzc3VtcHRpb24gYWJvdXQgV2ViS2l0IGJhc2VkIGJyb3dzZXJzIGJlbG93IGlzIG5vdCBjb21wbGV0ZWx5IGFjY3VyYXRlLlxuICAvLyBHb29nbGUgcmVsZWFzZWQgQmxpbmsoYSBmb3JrIG9mIFdlYktpdCkgZW5naW5lIG9uIEFwcmlsIDMsIDIwMTMsIHdoaWNoIGlzIHJlYWxseSBkaWZmZXJlbnQgdGhhbiBXZWJLaXQgdG9kYXkuXG4gIC8vIFRvZGF5LCBvbmUgbWlnaHQgd2FudCB0byBjaGVjayBmb3IgV2ViS2l0IHRvIGRlYWwgd2l0aCBpdHMgYnVncywgd2hpY2ggaXMgdXNlZCBvbiBhbGwgYnJvd3NlcnMgb24gaU9TLCBhbmQgU2FmYXJpIGJyb3dzZXIgb24gYWxsIHBsYXRmb3Jtcy5cblxuICAvLyBDaHJvbWUsIE9wZXJhIDE1KywgVml2YWxkaSBhbmQgU2FmYXJpIGFyZSB3ZWJraXQgYmFzZWQgYnJvd3NlcnNcbiAgaWYgKFxuICAgIGJyb3dzZXIuY2hyb21lXG4gICAgfHwgYnJvd3Nlci5vcHJcbiAgICB8fCBicm93c2VyLnNhZmFyaVxuICAgIHx8IGJyb3dzZXIudml2YWxkaVxuICAgIC8vIHdlIGV4cGVjdCB1bmtub3duLCBub24gaU9TIG1vYmlsZSBicm93c2VycyB0byBiZSB3ZWJraXQgYmFzZWRcbiAgICB8fCAoXG4gICAgICBicm93c2VyLm1vYmlsZSA9PT0gdHJ1ZVxuICAgICAgJiYgYnJvd3Nlci5pb3MgIT09IHRydWVcbiAgICAgICYmIGtub3duTW9iaWxlcyAhPT0gdHJ1ZVxuICAgIClcbiAgKSB7XG4gICAgYnJvd3Nlci53ZWJraXQgPSB0cnVlXG4gIH1cblxuICAvLyBUT0RPOiAoUXYzKSByZW5hbWUgdGhlIHRlcm1zICdlZGdlJyB0byAnZWRnZSBsZWdhY3knKG9yIHJlbW92ZSBpdCkgdGhlbiAnZWRnZSBjaHJvbWl1bScgdG8gJ2VkZ2UnIHRvIG1hdGNoIHdpdGggdGhlIGtub3duIHVwLXRvLWRhdGUgdGVybXNcbiAgLy8gTWljcm9zb2Z0IEVkZ2UgaXMgdGhlIG5ldyBDaHJvbWl1bS1iYXNlZCBicm93c2VyLiBNaWNyb3NvZnQgRWRnZSBMZWdhY3kgaXMgdGhlIG9sZCBFZGdlSFRNTC1iYXNlZCBicm93c2VyIChFT0w6IE1hcmNoIDksIDIwMjEpLlxuICBpZiAoYnJvd3Nlci5lZGcpIHtcbiAgICBtYXRjaGVkLmJyb3dzZXIgPSAnZWRnZWNocm9taXVtJ1xuICAgIGJyb3dzZXIuZWRnZUNocm9taXVtID0gdHJ1ZVxuICB9XG5cbiAgLy8gQmxhY2tiZXJyeSBicm93c2VycyBhcmUgbWFya2VkIGFzIFNhZmFyaSBvbiBCbGFja0JlcnJ5XG4gIGlmICgoYnJvd3Nlci5zYWZhcmkgJiYgYnJvd3Nlci5ibGFja2JlcnJ5KSB8fCBicm93c2VyLmJiKSB7XG4gICAgbWF0Y2hlZC5icm93c2VyID0gJ2JsYWNrYmVycnknXG4gICAgYnJvd3Nlci5ibGFja2JlcnJ5ID0gdHJ1ZVxuICB9XG5cbiAgLy8gUGxheWJvb2sgYnJvd3NlcnMgYXJlIG1hcmtlZCBhcyBTYWZhcmkgb24gUGxheWJvb2tcbiAgaWYgKGJyb3dzZXIuc2FmYXJpICYmIGJyb3dzZXIucGxheWJvb2spIHtcbiAgICBtYXRjaGVkLmJyb3dzZXIgPSAncGxheWJvb2snXG4gICAgYnJvd3Nlci5wbGF5Ym9vayA9IHRydWVcbiAgfVxuXG4gIC8vIE9wZXJhIDE1KyBhcmUgaWRlbnRpZmllZCBhcyBvcHJcbiAgaWYgKGJyb3dzZXIub3ByKSB7XG4gICAgbWF0Y2hlZC5icm93c2VyID0gJ29wZXJhJ1xuICAgIGJyb3dzZXIub3BlcmEgPSB0cnVlXG4gIH1cblxuICAvLyBTdG9jayBBbmRyb2lkIGJyb3dzZXJzIGFyZSBtYXJrZWQgYXMgU2FmYXJpIG9uIEFuZHJvaWQuXG4gIGlmIChicm93c2VyLnNhZmFyaSAmJiBicm93c2VyLmFuZHJvaWQpIHtcbiAgICBtYXRjaGVkLmJyb3dzZXIgPSAnYW5kcm9pZCdcbiAgICBicm93c2VyLmFuZHJvaWQgPSB0cnVlXG4gIH1cblxuICAvLyBLaW5kbGUgYnJvd3NlcnMgYXJlIG1hcmtlZCBhcyBTYWZhcmkgb24gS2luZGxlXG4gIGlmIChicm93c2VyLnNhZmFyaSAmJiBicm93c2VyLmtpbmRsZSkge1xuICAgIG1hdGNoZWQuYnJvd3NlciA9ICdraW5kbGUnXG4gICAgYnJvd3Nlci5raW5kbGUgPSB0cnVlXG4gIH1cblxuICAvLyBLaW5kbGUgU2lsayBicm93c2VycyBhcmUgbWFya2VkIGFzIFNhZmFyaSBvbiBLaW5kbGVcbiAgaWYgKGJyb3dzZXIuc2FmYXJpICYmIGJyb3dzZXIuc2lsaykge1xuICAgIG1hdGNoZWQuYnJvd3NlciA9ICdzaWxrJ1xuICAgIGJyb3dzZXIuc2lsayA9IHRydWVcbiAgfVxuXG4gIGlmIChicm93c2VyLnZpdmFsZGkpIHtcbiAgICBtYXRjaGVkLmJyb3dzZXIgPSAndml2YWxkaSdcbiAgICBicm93c2VyLnZpdmFsZGkgPSB0cnVlXG4gIH1cblxuICAvLyBBc3NpZ24gdGhlIG5hbWUgYW5kIHBsYXRmb3JtIHZhcmlhYmxlXG4gIGJyb3dzZXIubmFtZSA9IG1hdGNoZWQuYnJvd3NlclxuICBicm93c2VyLnBsYXRmb3JtID0gbWF0Y2hlZC5wbGF0Zm9ybVxuXG4gIGlmIChfX1FVQVNBUl9TU1JfU0VSVkVSX18gIT09IHRydWUpIHtcbiAgICBpZiAodXNlckFnZW50LmluZGV4T2YoJ2VsZWN0cm9uJykgPiAtMSkge1xuICAgICAgYnJvd3Nlci5lbGVjdHJvbiA9IHRydWVcbiAgICB9XG4gICAgZWxzZSBpZiAoZG9jdW1lbnQubG9jYXRpb24uaHJlZi5pbmRleE9mKCctZXh0ZW5zaW9uOi8vJykgPiAtMSkge1xuICAgICAgYnJvd3Nlci5iZXggPSB0cnVlXG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgaWYgKHdpbmRvdy5DYXBhY2l0b3IgIT09IHZvaWQgMCkge1xuICAgICAgICBicm93c2VyLmNhcGFjaXRvciA9IHRydWVcbiAgICAgICAgYnJvd3Nlci5uYXRpdmVNb2JpbGUgPSB0cnVlXG4gICAgICAgIGJyb3dzZXIubmF0aXZlTW9iaWxlV3JhcHBlciA9ICdjYXBhY2l0b3InXG4gICAgICB9XG4gICAgICBlbHNlIGlmICh3aW5kb3cuX2NvcmRvdmFOYXRpdmUgIT09IHZvaWQgMCB8fCB3aW5kb3cuY29yZG92YSAhPT0gdm9pZCAwKSB7XG4gICAgICAgIGJyb3dzZXIuY29yZG92YSA9IHRydWVcbiAgICAgICAgYnJvd3Nlci5uYXRpdmVNb2JpbGUgPSB0cnVlXG4gICAgICAgIGJyb3dzZXIubmF0aXZlTW9iaWxlV3JhcHBlciA9ICdjb3Jkb3ZhJ1xuICAgICAgfVxuXG4gICAgICBpZiAoXG4gICAgICAgIGhhc1RvdWNoID09PSB0cnVlXG4gICAgICAgICYmIGJyb3dzZXIubWFjID09PSB0cnVlXG4gICAgICAgICYmIChcbiAgICAgICAgICAoYnJvd3Nlci5kZXNrdG9wID09PSB0cnVlICYmIGJyb3dzZXIuc2FmYXJpID09PSB0cnVlKVxuICAgICAgICAgIHx8IChcbiAgICAgICAgICAgIGJyb3dzZXIubmF0aXZlTW9iaWxlID09PSB0cnVlXG4gICAgICAgICAgICAmJiBicm93c2VyLmFuZHJvaWQgIT09IHRydWVcbiAgICAgICAgICAgICYmIGJyb3dzZXIuaW9zICE9PSB0cnVlXG4gICAgICAgICAgICAmJiBicm93c2VyLmlwYWQgIT09IHRydWVcbiAgICAgICAgICApXG4gICAgICAgIClcbiAgICAgICkge1xuICAgICAgICAvKlxuICAgICAgICAqIENvcnJlY3Rpb24gbmVlZGVkIGZvciBpT1Mgc2luY2UgdGhlIGRlZmF1bHRcbiAgICAgICAgKiBzZXR0aW5nIG9uIGlQYWQgaXMgdG8gcmVxdWVzdCBkZXNrdG9wIHZpZXc7IGlmIHdlIGhhdmVcbiAgICAgICAgKiB0b3VjaCBzdXBwb3J0IGFuZCB0aGUgdXNlciBhZ2VudCBzYXlzIGl0J3MgYVxuICAgICAgICAqIGRlc2t0b3AsIHdlIGluZmVyIHRoYXQgaXQncyBhbiBpUGhvbmUvaVBhZCB3aXRoIGRlc2t0b3Agdmlld1xuICAgICAgICAqIHNvIHdlIG11c3QgZml4IHRoZSBmYWxzZSBwb3NpdGl2ZXNcbiAgICAgICAgKi9cbiAgICAgICAgYXBwbHlJb3NDb3JyZWN0aW9uKGJyb3dzZXIpXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGJyb3dzZXJcbn1cblxuY29uc3QgdXNlckFnZW50ID0gX19RVUFTQVJfU1NSX1NFUlZFUl9fXG4gID8gJydcbiAgOiBuYXZpZ2F0b3IudXNlckFnZW50IHx8IG5hdmlnYXRvci52ZW5kb3IgfHwgd2luZG93Lm9wZXJhXG5cbmNvbnN0IHNzckNsaWVudCA9IHtcbiAgaGFzOiB7XG4gICAgdG91Y2g6IGZhbHNlLFxuICAgIHdlYlN0b3JhZ2U6IGZhbHNlXG4gIH0sXG4gIHdpdGhpbjogeyBpZnJhbWU6IGZhbHNlIH1cbn1cblxuLy8gV2UgZXhwb3J0IFwiY2xpZW50XCIgZm9yIGh5ZHJhdGlvbiBlcnJvci1mcmVlIHBhcnRzLFxuLy8gbGlrZSB0b3VjaCBkaXJlY3RpdmVzIHdobyBkbyBub3QgKGFuZCBtdXN0IE5PVCkgd2FpdFxuLy8gZm9yIHRoZSBjbGllbnQgdGFrZW92ZXI7XG4vLyBEbyBOT1QgaW1wb3J0IHRoaXMgZGlyZWN0bHkgaW4geW91ciBhcHAsIHVubGVzcyB5b3UgcmVhbGx5IGtub3dcbi8vIHdoYXQgeW91IGFyZSBkb2luZy5cbmV4cG9ydCBjb25zdCBjbGllbnQgPSBfX1FVQVNBUl9TU1JfU0VSVkVSX19cbiAgPyBzc3JDbGllbnRcbiAgOiB7XG4gICAgICB1c2VyQWdlbnQsXG4gICAgICBpczogZ2V0UGxhdGZvcm0odXNlckFnZW50KSxcbiAgICAgIGhhczoge1xuICAgICAgICB0b3VjaDogaGFzVG91Y2hcbiAgICAgIH0sXG4gICAgICB3aXRoaW46IHtcbiAgICAgICAgaWZyYW1lOiB3aW5kb3cuc2VsZiAhPT0gd2luZG93LnRvcFxuICAgICAgfVxuICAgIH1cblxuY29uc3QgUGxhdGZvcm0gPSB7XG4gIGluc3RhbGwgKG9wdHMpIHtcbiAgICBjb25zdCB7ICRxIH0gPSBvcHRzXG5cbiAgICBpZiAoX19RVUFTQVJfU1NSX1NFUlZFUl9fKSB7XG4gICAgICAkcS5wbGF0Zm9ybSA9IHRoaXMucGFyc2VTU1Iob3B0cy5zc3JDb250ZXh0KVxuICAgIH1cbiAgICBlbHNlIGlmIChpc1J1bnRpbWVTc3JQcmVIeWRyYXRpb24udmFsdWUgPT09IHRydWUpIHtcbiAgICAgIC8vIHRha2VvdmVyIHNob3VsZCBpbmNyZWFzZSBhY2N1cmFjeSBmb3JcbiAgICAgIC8vIHRoZSByZXN0IG9mIHRoZSBwcm9wczsgd2UgYWxzbyBhdm9pZFxuICAgICAgLy8gaHlkcmF0aW9uIGVycm9yc1xuICAgICAgb3B0cy5vblNTUkh5ZHJhdGVkLnB1c2goKCkgPT4ge1xuICAgICAgICBpc1J1bnRpbWVTc3JQcmVIeWRyYXRpb24udmFsdWUgPSBmYWxzZVxuICAgICAgICBPYmplY3QuYXNzaWduKCRxLnBsYXRmb3JtLCBjbGllbnQpXG4gICAgICAgIGlvc0NvcnJlY3Rpb24gPSB2b2lkIDBcbiAgICAgIH0pXG5cbiAgICAgIC8vIHdlIG5lZWQgdG8gbWFrZSBwbGF0Zm9ybSByZWFjdGl2ZVxuICAgICAgLy8gZm9yIHRoZSB0YWtlb3ZlciBwaGFzZVxuICAgICAgJHEucGxhdGZvcm0gPSByZWFjdGl2ZSh0aGlzKVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICRxLnBsYXRmb3JtID0gdGhpc1xuICAgIH1cbiAgfVxufVxuXG5pZiAoX19RVUFTQVJfU1NSX1NFUlZFUl9fKSB7XG4gIFBsYXRmb3JtLnBhcnNlU1NSID0gKHNzckNvbnRleHQpID0+IHtcbiAgICBjb25zdCB1c2VyQWdlbnQgPSBzc3JDb250ZXh0LnJlcS5oZWFkZXJzWyAndXNlci1hZ2VudCcgXSB8fCBzc3JDb250ZXh0LnJlcS5oZWFkZXJzWyAnVXNlci1BZ2VudCcgXSB8fCAnJ1xuICAgIHJldHVybiB7XG4gICAgICAuLi5jbGllbnQsXG4gICAgICB1c2VyQWdlbnQsXG4gICAgICBpczogZ2V0UGxhdGZvcm0odXNlckFnZW50KVxuICAgIH1cbiAgfVxufVxuZWxzZSB7XG4gIC8vIGRvIG5vdCBhY2Nlc3Mgd2luZG93LmxvY2FsU3RvcmFnZSB3aXRob3V0XG4gIC8vIGRldmxhbmQgYWN0dWFsbHkgdXNpbmcgaXQgYXMgdGhpcyB3aWxsIGdldFxuICAvLyByZXBvcnRlZCB1bmRlciBcIkNvb2tpZXNcIiBpbiBHb29nbGUgQ2hyb21lXG4gIGxldCBoYXNXZWJTdG9yYWdlXG5cbiAgaW5qZWN0UHJvcChjbGllbnQuaGFzLCAnd2ViU3RvcmFnZScsICgpID0+IHtcbiAgICBpZiAoaGFzV2ViU3RvcmFnZSAhPT0gdm9pZCAwKSB7XG4gICAgICByZXR1cm4gaGFzV2ViU3RvcmFnZVxuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICBpZiAod2luZG93LmxvY2FsU3RvcmFnZSkge1xuICAgICAgICBoYXNXZWJTdG9yYWdlID0gdHJ1ZVxuICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgfVxuICAgIH1cbiAgICBjYXRjaCAoZSkge31cblxuICAgIGhhc1dlYlN0b3JhZ2UgPSBmYWxzZVxuICAgIHJldHVybiBmYWxzZVxuICB9KVxuXG4gIGlvc0VtdWxhdGVkID0gY2xpZW50LmlzLmlvcyA9PT0gdHJ1ZVxuICAgICYmIHdpbmRvdy5uYXZpZ2F0b3IudmVuZG9yLnRvTG93ZXJDYXNlKCkuaW5kZXhPZignYXBwbGUnKSA9PT0gLTFcblxuICBpZiAoaXNSdW50aW1lU3NyUHJlSHlkcmF0aW9uLnZhbHVlID09PSB0cnVlKSB7XG4gICAgLy8gbXVzdCBtYXRjaCB3aXRoIHNlcnZlci1zaWRlIGJlZm9yZVxuICAgIC8vIGNsaWVudCB0YWtpbmcgb3ZlciBpbiBvcmRlciB0byBwcmV2ZW50XG4gICAgLy8gaHlkcmF0aW9uIGVycm9yc1xuICAgIE9iamVjdC5hc3NpZ24oUGxhdGZvcm0sIGNsaWVudCwgaW9zQ29ycmVjdGlvbiwgc3NyQ2xpZW50KVxuICB9XG4gIGVsc2Uge1xuICAgIE9iamVjdC5hc3NpZ24oUGxhdGZvcm0sIGNsaWVudClcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBQbGF0Zm9ybVxuIiwiXG5pbXBvcnQgeyByZWFjdGl2ZSB9IGZyb20gJ3Z1ZSdcbmltcG9ydCB7IGluamVjdFByb3AgfSBmcm9tICcuL2luamVjdC1vYmotcHJvcCdcblxuZXhwb3J0IGRlZmF1bHQgX19RVUFTQVJfU1NSX1NFUlZFUl9fXG4gID8gKHN0YXRlLCBwbHVnaW4pID0+IHtcbiAgICAgIE9iamVjdC5hc3NpZ24ocGx1Z2luLCBzdGF0ZSlcbiAgICAgIHJldHVybiBwbHVnaW5cbiAgICB9XG4gIDogKHN0YXRlLCBwbHVnaW4pID0+IHtcbiAgICAgIGNvbnN0IHJlYWN0aXZlU3RhdGUgPSByZWFjdGl2ZShzdGF0ZSlcblxuICAgICAgZm9yIChjb25zdCBuYW1lIGluIHN0YXRlKSB7XG4gICAgICAgIGluamVjdFByb3AoXG4gICAgICAgICAgcGx1Z2luLFxuICAgICAgICAgIG5hbWUsXG4gICAgICAgICAgKCkgPT4gcmVhY3RpdmVTdGF0ZVsgbmFtZSBdLFxuICAgICAgICAgIHZhbCA9PiB7IHJlYWN0aXZlU3RhdGVbIG5hbWUgXSA9IHZhbCB9XG4gICAgICAgIClcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHBsdWdpblxuICAgIH1cbiIsImV4cG9ydCBjb25zdCBsaXN0ZW5PcHRzID0ge1xuICBoYXNQYXNzaXZlOiBmYWxzZSxcbiAgcGFzc2l2ZUNhcHR1cmU6IHRydWUsXG4gIG5vdFBhc3NpdmVDYXB0dXJlOiB0cnVlXG59XG5cbnRyeSB7XG4gIGNvbnN0IG9wdHMgPSBPYmplY3QuZGVmaW5lUHJvcGVydHkoe30sICdwYXNzaXZlJywge1xuICAgIGdldCAoKSB7XG4gICAgICBPYmplY3QuYXNzaWduKGxpc3Rlbk9wdHMsIHtcbiAgICAgICAgaGFzUGFzc2l2ZTogdHJ1ZSxcbiAgICAgICAgcGFzc2l2ZTogeyBwYXNzaXZlOiB0cnVlIH0sXG4gICAgICAgIG5vdFBhc3NpdmU6IHsgcGFzc2l2ZTogZmFsc2UgfSxcbiAgICAgICAgcGFzc2l2ZUNhcHR1cmU6IHsgcGFzc2l2ZTogdHJ1ZSwgY2FwdHVyZTogdHJ1ZSB9LFxuICAgICAgICBub3RQYXNzaXZlQ2FwdHVyZTogeyBwYXNzaXZlOiBmYWxzZSwgY2FwdHVyZTogdHJ1ZSB9XG4gICAgICB9KVxuICAgIH1cbiAgfSlcbiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3F0ZXN0JywgbnVsbCwgb3B0cylcbiAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3F0ZXN0JywgbnVsbCwgb3B0cylcbn1cbmNhdGNoIChlKSB7fVxuXG5leHBvcnQgZnVuY3Rpb24gbm9vcCAoKSB7fVxuXG5leHBvcnQgZnVuY3Rpb24gbGVmdENsaWNrIChlKSB7XG4gIHJldHVybiBlLmJ1dHRvbiA9PT0gMFxufVxuXG5leHBvcnQgZnVuY3Rpb24gbWlkZGxlQ2xpY2sgKGUpIHtcbiAgcmV0dXJuIGUuYnV0dG9uID09PSAxXG59XG5cbmV4cG9ydCBmdW5jdGlvbiByaWdodENsaWNrIChlKSB7XG4gIHJldHVybiBlLmJ1dHRvbiA9PT0gMlxufVxuXG5leHBvcnQgZnVuY3Rpb24gcG9zaXRpb24gKGUpIHtcbiAgaWYgKGUudG91Y2hlcyAmJiBlLnRvdWNoZXNbIDAgXSkge1xuICAgIGUgPSBlLnRvdWNoZXNbIDAgXVxuICB9XG4gIGVsc2UgaWYgKGUuY2hhbmdlZFRvdWNoZXMgJiYgZS5jaGFuZ2VkVG91Y2hlc1sgMCBdKSB7XG4gICAgZSA9IGUuY2hhbmdlZFRvdWNoZXNbIDAgXVxuICB9XG4gIGVsc2UgaWYgKGUudGFyZ2V0VG91Y2hlcyAmJiBlLnRhcmdldFRvdWNoZXNbIDAgXSkge1xuICAgIGUgPSBlLnRhcmdldFRvdWNoZXNbIDAgXVxuICB9XG5cbiAgcmV0dXJuIHtcbiAgICB0b3A6IGUuY2xpZW50WSxcbiAgICBsZWZ0OiBlLmNsaWVudFhcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0RXZlbnRQYXRoIChlKSB7XG4gIGlmIChlLnBhdGgpIHtcbiAgICByZXR1cm4gZS5wYXRoXG4gIH1cbiAgaWYgKGUuY29tcG9zZWRQYXRoKSB7XG4gICAgcmV0dXJuIGUuY29tcG9zZWRQYXRoKClcbiAgfVxuXG4gIGNvbnN0IHBhdGggPSBbXVxuICBsZXQgZWwgPSBlLnRhcmdldFxuXG4gIHdoaWxlIChlbCkge1xuICAgIHBhdGgucHVzaChlbClcblxuICAgIGlmIChlbC50YWdOYW1lID09PSAnSFRNTCcpIHtcbiAgICAgIHBhdGgucHVzaChkb2N1bWVudClcbiAgICAgIHBhdGgucHVzaCh3aW5kb3cpXG4gICAgICByZXR1cm4gcGF0aFxuICAgIH1cblxuICAgIGVsID0gZWwucGFyZW50RWxlbWVudFxuICB9XG59XG5cbi8vIFJlYXNvbmFibGUgZGVmYXVsdHNcbmNvbnN0XG4gIExJTkVfSEVJR0hUID0gNDAsXG4gIFBBR0VfSEVJR0hUID0gODAwXG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRNb3VzZVdoZWVsRGlzdGFuY2UgKGUpIHtcbiAgbGV0IHggPSBlLmRlbHRhWCwgeSA9IGUuZGVsdGFZXG5cbiAgaWYgKCh4IHx8IHkpICYmIGUuZGVsdGFNb2RlKSB7XG4gICAgY29uc3QgbXVsdGlwbGllciA9IGUuZGVsdGFNb2RlID09PSAxID8gTElORV9IRUlHSFQgOiBQQUdFX0hFSUdIVFxuICAgIHggKj0gbXVsdGlwbGllclxuICAgIHkgKj0gbXVsdGlwbGllclxuICB9XG5cbiAgaWYgKGUuc2hpZnRLZXkgJiYgIXgpIHtcbiAgICBbIHksIHggXSA9IFsgeCwgeSBdXG4gIH1cblxuICByZXR1cm4geyB4LCB5IH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHN0b3AgKGUpIHtcbiAgZS5zdG9wUHJvcGFnYXRpb24oKVxufVxuXG5leHBvcnQgZnVuY3Rpb24gcHJldmVudCAoZSkge1xuICBlLmNhbmNlbGFibGUgIT09IGZhbHNlICYmIGUucHJldmVudERlZmF1bHQoKVxufVxuXG5leHBvcnQgZnVuY3Rpb24gc3RvcEFuZFByZXZlbnQgKGUpIHtcbiAgZS5jYW5jZWxhYmxlICE9PSBmYWxzZSAmJiBlLnByZXZlbnREZWZhdWx0KClcbiAgZS5zdG9wUHJvcGFnYXRpb24oKVxufVxuXG5leHBvcnQgZnVuY3Rpb24gcHJldmVudERyYWdnYWJsZSAoZWwsIHN0YXR1cykge1xuICBpZiAoZWwgPT09IHZvaWQgMCB8fCAoc3RhdHVzID09PSB0cnVlICYmIGVsLl9fZHJhZ1ByZXZlbnRlZCA9PT0gdHJ1ZSkpIHtcbiAgICByZXR1cm5cbiAgfVxuXG4gIGNvbnN0IGZuID0gc3RhdHVzID09PSB0cnVlXG4gICAgPyBlbCA9PiB7XG4gICAgICBlbC5fX2RyYWdQcmV2ZW50ZWQgPSB0cnVlXG4gICAgICBlbC5hZGRFdmVudExpc3RlbmVyKCdkcmFnc3RhcnQnLCBwcmV2ZW50LCBsaXN0ZW5PcHRzLm5vdFBhc3NpdmVDYXB0dXJlKVxuICAgIH1cbiAgICA6IGVsID0+IHtcbiAgICAgIGRlbGV0ZSBlbC5fX2RyYWdQcmV2ZW50ZWRcbiAgICAgIGVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2RyYWdzdGFydCcsIHByZXZlbnQsIGxpc3Rlbk9wdHMubm90UGFzc2l2ZUNhcHR1cmUpXG4gICAgfVxuXG4gIGVsLnF1ZXJ5U2VsZWN0b3JBbGwoJ2EsIGltZycpLmZvckVhY2goZm4pXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBhZGRFdnQgKGN0eCwgdGFyZ2V0TmFtZSwgZXZlbnRzKSB7XG4gIGNvbnN0IG5hbWUgPSBgX19xXyR7IHRhcmdldE5hbWUgfV9ldnRgXG5cbiAgY3R4WyBuYW1lIF0gPSBjdHhbIG5hbWUgXSAhPT0gdm9pZCAwXG4gICAgPyBjdHhbIG5hbWUgXS5jb25jYXQoZXZlbnRzKVxuICAgIDogZXZlbnRzXG5cbiAgZXZlbnRzLmZvckVhY2goZXZ0ID0+IHtcbiAgICBldnRbIDAgXS5hZGRFdmVudExpc3RlbmVyKGV2dFsgMSBdLCBjdHhbIGV2dFsgMiBdIF0sIGxpc3Rlbk9wdHNbIGV2dFsgMyBdIF0pXG4gIH0pXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjbGVhbkV2dCAoY3R4LCB0YXJnZXROYW1lKSB7XG4gIGNvbnN0IG5hbWUgPSBgX19xXyR7IHRhcmdldE5hbWUgfV9ldnRgXG5cbiAgaWYgKGN0eFsgbmFtZSBdICE9PSB2b2lkIDApIHtcbiAgICBjdHhbIG5hbWUgXS5mb3JFYWNoKGV2dCA9PiB7XG4gICAgICBldnRbIDAgXS5yZW1vdmVFdmVudExpc3RlbmVyKGV2dFsgMSBdLCBjdHhbIGV2dFsgMiBdIF0sIGxpc3Rlbk9wdHNbIGV2dFsgMyBdIF0pXG4gICAgfSlcbiAgICBjdHhbIG5hbWUgXSA9IHZvaWQgMFxuICB9XG59XG5cbi8qXG4gKiBhbHNvIHVwZGF0ZSAvdHlwZXMvdXRpbHMvZXZlbnQuZC50c1xuICovXG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgbGlzdGVuT3B0cyxcbiAgbGVmdENsaWNrLFxuICBtaWRkbGVDbGljayxcbiAgcmlnaHRDbGljayxcbiAgcG9zaXRpb24sXG4gIGdldEV2ZW50UGF0aCxcbiAgZ2V0TW91c2VXaGVlbERpc3RhbmNlLFxuICBzdG9wLFxuICBwcmV2ZW50LFxuICBzdG9wQW5kUHJldmVudCxcbiAgcHJldmVudERyYWdnYWJsZVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gKGZuLCB3YWl0ID0gMjUwLCBpbW1lZGlhdGUpIHtcbiAgbGV0IHRpbWVvdXRcblxuICBmdW5jdGlvbiBkZWJvdW5jZWQgKC8qIC4uLmFyZ3MgKi8pIHtcbiAgICBjb25zdCBhcmdzID0gYXJndW1lbnRzXG5cbiAgICBjb25zdCBsYXRlciA9ICgpID0+IHtcbiAgICAgIHRpbWVvdXQgPSB2b2lkIDBcbiAgICAgIGlmIChpbW1lZGlhdGUgIT09IHRydWUpIHtcbiAgICAgICAgZm4uYXBwbHkodGhpcywgYXJncylcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjbGVhclRpbWVvdXQodGltZW91dClcbiAgICBpZiAoaW1tZWRpYXRlID09PSB0cnVlICYmIHRpbWVvdXQgPT09IHZvaWQgMCkge1xuICAgICAgZm4uYXBwbHkodGhpcywgYXJncylcbiAgICB9XG4gICAgdGltZW91dCA9IHNldFRpbWVvdXQobGF0ZXIsIHdhaXQpXG4gIH1cblxuICBkZWJvdW5jZWQuY2FuY2VsID0gKCkgPT4ge1xuICAgIGNsZWFyVGltZW91dCh0aW1lb3V0KVxuICB9XG5cbiAgcmV0dXJuIGRlYm91bmNlZFxufVxuIiwiaW1wb3J0IHsgaXNSdW50aW1lU3NyUHJlSHlkcmF0aW9uLCBjbGllbnQgfSBmcm9tICcuL1BsYXRmb3JtLmpzJ1xuXG5pbXBvcnQgZGVmaW5lUmVhY3RpdmVQbHVnaW4gZnJvbSAnLi4vdXRpbHMvcHJpdmF0ZS9kZWZpbmUtcmVhY3RpdmUtcGx1Z2luLmpzJ1xuaW1wb3J0IHsgbGlzdGVuT3B0cywgbm9vcCB9IGZyb20gJy4uL3V0aWxzL2V2ZW50LmpzJ1xuaW1wb3J0IGRlYm91bmNlIGZyb20gJy4uL3V0aWxzL2RlYm91bmNlLmpzJ1xuXG5jb25zdCBTSVpFX0xJU1QgPSBbICdzbScsICdtZCcsICdsZycsICd4bCcgXVxuY29uc3QgeyBwYXNzaXZlIH0gPSBsaXN0ZW5PcHRzXG5cbmV4cG9ydCBkZWZhdWx0IGRlZmluZVJlYWN0aXZlUGx1Z2luKHtcbiAgd2lkdGg6IDAsXG4gIGhlaWdodDogMCxcbiAgbmFtZTogJ3hzJyxcblxuICBzaXplczoge1xuICAgIHNtOiA2MDAsXG4gICAgbWQ6IDEwMjQsXG4gICAgbGc6IDE0NDAsXG4gICAgeGw6IDE5MjBcbiAgfSxcblxuICBsdDoge1xuICAgIHNtOiB0cnVlLFxuICAgIG1kOiB0cnVlLFxuICAgIGxnOiB0cnVlLFxuICAgIHhsOiB0cnVlXG4gIH0sXG4gIGd0OiB7XG4gICAgeHM6IGZhbHNlLFxuICAgIHNtOiBmYWxzZSxcbiAgICBtZDogZmFsc2UsXG4gICAgbGc6IGZhbHNlXG4gIH0sXG5cbiAgeHM6IHRydWUsXG4gIHNtOiBmYWxzZSxcbiAgbWQ6IGZhbHNlLFxuICBsZzogZmFsc2UsXG4gIHhsOiBmYWxzZVxufSwge1xuICBzZXRTaXplczogbm9vcCxcbiAgc2V0RGVib3VuY2U6IG5vb3AsXG5cbiAgaW5zdGFsbCAoeyAkcSwgb25TU1JIeWRyYXRlZCB9KSB7XG4gICAgJHEuc2NyZWVuID0gdGhpc1xuXG4gICAgaWYgKF9fUVVBU0FSX1NTUl9TRVJWRVJfXykgeyByZXR1cm4gfVxuXG4gICAgaWYgKHRoaXMuX19pbnN0YWxsZWQgPT09IHRydWUpIHtcbiAgICAgIGlmICgkcS5jb25maWcuc2NyZWVuICE9PSB2b2lkIDApIHtcbiAgICAgICAgaWYgKCRxLmNvbmZpZy5zY3JlZW4uYm9keUNsYXNzZXMgPT09IGZhbHNlKSB7XG4gICAgICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QucmVtb3ZlKGBzY3JlZW4tLSR7IHRoaXMubmFtZSB9YClcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICB0aGlzLl9fdXBkYXRlKHRydWUpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGNvbnN0IHsgdmlzdWFsVmlld3BvcnQgfSA9IHdpbmRvd1xuICAgIGNvbnN0IHRhcmdldCA9IHZpc3VhbFZpZXdwb3J0IHx8IHdpbmRvd1xuICAgIGNvbnN0IHNjcm9sbGluZ0VsZW1lbnQgPSBkb2N1bWVudC5zY3JvbGxpbmdFbGVtZW50IHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudFxuICAgIGNvbnN0IGdldFNpemUgPSB2aXN1YWxWaWV3cG9ydCA9PT0gdm9pZCAwIHx8IGNsaWVudC5pcy5tb2JpbGUgPT09IHRydWVcbiAgICAgID8gKCkgPT4gW1xuICAgICAgICAgIE1hdGgubWF4KHdpbmRvdy5pbm5lcldpZHRoLCBzY3JvbGxpbmdFbGVtZW50LmNsaWVudFdpZHRoKSxcbiAgICAgICAgICBNYXRoLm1heCh3aW5kb3cuaW5uZXJIZWlnaHQsIHNjcm9sbGluZ0VsZW1lbnQuY2xpZW50SGVpZ2h0KVxuICAgICAgICBdXG4gICAgICA6ICgpID0+IFtcbiAgICAgICAgICB2aXN1YWxWaWV3cG9ydC53aWR0aCAqIHZpc3VhbFZpZXdwb3J0LnNjYWxlICsgd2luZG93LmlubmVyV2lkdGggLSBzY3JvbGxpbmdFbGVtZW50LmNsaWVudFdpZHRoLFxuICAgICAgICAgIHZpc3VhbFZpZXdwb3J0LmhlaWdodCAqIHZpc3VhbFZpZXdwb3J0LnNjYWxlICsgd2luZG93LmlubmVySGVpZ2h0IC0gc2Nyb2xsaW5nRWxlbWVudC5jbGllbnRIZWlnaHRcbiAgICAgICAgXVxuXG4gICAgY29uc3QgY2xhc3NlcyA9ICRxLmNvbmZpZy5zY3JlZW4gIT09IHZvaWQgMCAmJiAkcS5jb25maWcuc2NyZWVuLmJvZHlDbGFzc2VzID09PSB0cnVlXG5cbiAgICB0aGlzLl9fdXBkYXRlID0gZm9yY2UgPT4ge1xuICAgICAgY29uc3QgWyB3LCBoIF0gPSBnZXRTaXplKClcblxuICAgICAgaWYgKGggIT09IHRoaXMuaGVpZ2h0KSB7XG4gICAgICAgIHRoaXMuaGVpZ2h0ID0gaFxuICAgICAgfVxuXG4gICAgICBpZiAodyAhPT0gdGhpcy53aWR0aCkge1xuICAgICAgICB0aGlzLndpZHRoID0gd1xuICAgICAgfVxuICAgICAgZWxzZSBpZiAoZm9yY2UgIT09IHRydWUpIHtcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG5cbiAgICAgIGxldCBzID0gdGhpcy5zaXplc1xuXG4gICAgICB0aGlzLmd0LnhzID0gdyA+PSBzLnNtXG4gICAgICB0aGlzLmd0LnNtID0gdyA+PSBzLm1kXG4gICAgICB0aGlzLmd0Lm1kID0gdyA+PSBzLmxnXG4gICAgICB0aGlzLmd0LmxnID0gdyA+PSBzLnhsXG4gICAgICB0aGlzLmx0LnNtID0gdyA8IHMuc21cbiAgICAgIHRoaXMubHQubWQgPSB3IDwgcy5tZFxuICAgICAgdGhpcy5sdC5sZyA9IHcgPCBzLmxnXG4gICAgICB0aGlzLmx0LnhsID0gdyA8IHMueGxcbiAgICAgIHRoaXMueHMgPSB0aGlzLmx0LnNtXG4gICAgICB0aGlzLnNtID0gdGhpcy5ndC54cyA9PT0gdHJ1ZSAmJiB0aGlzLmx0Lm1kID09PSB0cnVlXG4gICAgICB0aGlzLm1kID0gdGhpcy5ndC5zbSA9PT0gdHJ1ZSAmJiB0aGlzLmx0LmxnID09PSB0cnVlXG4gICAgICB0aGlzLmxnID0gdGhpcy5ndC5tZCA9PT0gdHJ1ZSAmJiB0aGlzLmx0LnhsID09PSB0cnVlXG4gICAgICB0aGlzLnhsID0gdGhpcy5ndC5sZ1xuXG4gICAgICBzID0gKHRoaXMueHMgPT09IHRydWUgJiYgJ3hzJylcbiAgICAgICAgfHwgKHRoaXMuc20gPT09IHRydWUgJiYgJ3NtJylcbiAgICAgICAgfHwgKHRoaXMubWQgPT09IHRydWUgJiYgJ21kJylcbiAgICAgICAgfHwgKHRoaXMubGcgPT09IHRydWUgJiYgJ2xnJylcbiAgICAgICAgfHwgJ3hsJ1xuXG4gICAgICBpZiAocyAhPT0gdGhpcy5uYW1lKSB7XG4gICAgICAgIGlmIChjbGFzc2VzID09PSB0cnVlKSB7XG4gICAgICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QucmVtb3ZlKGBzY3JlZW4tLSR7IHRoaXMubmFtZSB9YClcbiAgICAgICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5hZGQoYHNjcmVlbi0tJHsgcyB9YClcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm5hbWUgPSBzXG4gICAgICB9XG4gICAgfVxuXG4gICAgbGV0IHVwZGF0ZUV2dCwgdXBkYXRlU2l6ZXMgPSB7fSwgdXBkYXRlRGVib3VuY2UgPSAxNlxuXG4gICAgdGhpcy5zZXRTaXplcyA9IHNpemVzID0+IHtcbiAgICAgIFNJWkVfTElTVC5mb3JFYWNoKG5hbWUgPT4ge1xuICAgICAgICBpZiAoc2l6ZXNbIG5hbWUgXSAhPT0gdm9pZCAwKSB7XG4gICAgICAgICAgdXBkYXRlU2l6ZXNbIG5hbWUgXSA9IHNpemVzWyBuYW1lIF1cbiAgICAgICAgfVxuICAgICAgfSlcbiAgICB9XG4gICAgdGhpcy5zZXREZWJvdW5jZSA9IGRlYiA9PiB7XG4gICAgICB1cGRhdGVEZWJvdW5jZSA9IGRlYlxuICAgIH1cblxuICAgIGNvbnN0IHN0YXJ0ID0gKCkgPT4ge1xuICAgICAgY29uc3Qgc3R5bGUgPSBnZXRDb21wdXRlZFN0eWxlKGRvY3VtZW50LmJvZHkpXG5cbiAgICAgIC8vIGlmIGNzcyBwcm9wcyBhdmFpbGFibGVcbiAgICAgIGlmIChzdHlsZS5nZXRQcm9wZXJ0eVZhbHVlKCctLXEtc2l6ZS1zbScpKSB7XG4gICAgICAgIFNJWkVfTElTVC5mb3JFYWNoKG5hbWUgPT4ge1xuICAgICAgICAgIHRoaXMuc2l6ZXNbIG5hbWUgXSA9IHBhcnNlSW50KHN0eWxlLmdldFByb3BlcnR5VmFsdWUoYC0tcS1zaXplLSR7IG5hbWUgfWApLCAxMClcbiAgICAgICAgfSlcbiAgICAgIH1cblxuICAgICAgdGhpcy5zZXRTaXplcyA9IHNpemVzID0+IHtcbiAgICAgICAgU0laRV9MSVNULmZvckVhY2gobmFtZSA9PiB7XG4gICAgICAgICAgaWYgKHNpemVzWyBuYW1lIF0pIHtcbiAgICAgICAgICAgIHRoaXMuc2l6ZXNbIG5hbWUgXSA9IHNpemVzWyBuYW1lIF1cbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICAgIHRoaXMuX191cGRhdGUodHJ1ZSlcbiAgICAgIH1cblxuICAgICAgdGhpcy5zZXREZWJvdW5jZSA9IGRlbGF5ID0+IHtcbiAgICAgICAgdXBkYXRlRXZ0ICE9PSB2b2lkIDAgJiYgdGFyZ2V0LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHVwZGF0ZUV2dCwgcGFzc2l2ZSlcbiAgICAgICAgdXBkYXRlRXZ0ID0gZGVsYXkgPiAwXG4gICAgICAgICAgPyBkZWJvdW5jZSh0aGlzLl9fdXBkYXRlLCBkZWxheSlcbiAgICAgICAgICA6IHRoaXMuX191cGRhdGVcbiAgICAgICAgdGFyZ2V0LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHVwZGF0ZUV2dCwgcGFzc2l2ZSlcbiAgICAgIH1cblxuICAgICAgdGhpcy5zZXREZWJvdW5jZSh1cGRhdGVEZWJvdW5jZSlcblxuICAgICAgaWYgKE9iamVjdC5rZXlzKHVwZGF0ZVNpemVzKS5sZW5ndGggPiAwKSB7XG4gICAgICAgIHRoaXMuc2V0U2l6ZXModXBkYXRlU2l6ZXMpXG4gICAgICAgIHVwZGF0ZVNpemVzID0gdm9pZCAwIC8vIGZyZWUgdXAgbWVtb3J5XG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgdGhpcy5fX3VwZGF0ZSgpXG4gICAgICB9XG5cbiAgICAgIC8vIGR1ZSB0byBvcHRpbWl6YXRpb25zLCB0aGlzIHdvdWxkIGJlIGxlZnQgb3V0IG90aGVyd2lzZVxuICAgICAgY2xhc3NlcyA9PT0gdHJ1ZSAmJiB0aGlzLm5hbWUgPT09ICd4cydcbiAgICAgICAgJiYgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKCdzY3JlZW4tLXhzJylcbiAgICB9XG5cbiAgICBpZiAoaXNSdW50aW1lU3NyUHJlSHlkcmF0aW9uLnZhbHVlID09PSB0cnVlKSB7XG4gICAgICBvblNTUkh5ZHJhdGVkLnB1c2goc3RhcnQpXG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgc3RhcnQoKVxuICAgIH1cbiAgfVxufSlcbiIsImltcG9ydCBkZWZpbmVSZWFjdGl2ZVBsdWdpbiBmcm9tICcuLi91dGlscy9wcml2YXRlL2RlZmluZS1yZWFjdGl2ZS1wbHVnaW4uanMnXG5pbXBvcnQgeyBpc1J1bnRpbWVTc3JQcmVIeWRyYXRpb24gfSBmcm9tICcuL1BsYXRmb3JtLmpzJ1xuXG5jb25zdCBQbHVnaW4gPSBkZWZpbmVSZWFjdGl2ZVBsdWdpbih7XG4gIGlzQWN0aXZlOiBmYWxzZSxcbiAgbW9kZTogZmFsc2Vcbn0sIHtcbiAgX19tZWRpYTogdm9pZCAwLFxuXG4gIHNldCAodmFsKSB7XG4gICAgaWYgKF9fUVVBU0FSX1NTUl9TRVJWRVJfXykgeyByZXR1cm4gfVxuXG4gICAgUGx1Z2luLm1vZGUgPSB2YWxcblxuICAgIGlmICh2YWwgPT09ICdhdXRvJykge1xuICAgICAgaWYgKFBsdWdpbi5fX21lZGlhID09PSB2b2lkIDApIHtcbiAgICAgICAgUGx1Z2luLl9fbWVkaWEgPSB3aW5kb3cubWF0Y2hNZWRpYSgnKHByZWZlcnMtY29sb3Itc2NoZW1lOiBkYXJrKScpXG4gICAgICAgIFBsdWdpbi5fX3VwZGF0ZU1lZGlhID0gKCkgPT4geyBQbHVnaW4uc2V0KCdhdXRvJykgfVxuICAgICAgICBQbHVnaW4uX19tZWRpYS5hZGRMaXN0ZW5lcihQbHVnaW4uX191cGRhdGVNZWRpYSlcbiAgICAgIH1cblxuICAgICAgdmFsID0gUGx1Z2luLl9fbWVkaWEubWF0Y2hlc1xuICAgIH1cbiAgICBlbHNlIGlmIChQbHVnaW4uX19tZWRpYSAhPT0gdm9pZCAwKSB7XG4gICAgICBQbHVnaW4uX19tZWRpYS5yZW1vdmVMaXN0ZW5lcihQbHVnaW4uX191cGRhdGVNZWRpYSlcbiAgICAgIFBsdWdpbi5fX21lZGlhID0gdm9pZCAwXG4gICAgfVxuXG4gICAgUGx1Z2luLmlzQWN0aXZlID0gdmFsID09PSB0cnVlXG5cbiAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5yZW1vdmUoYGJvZHktLSR7IHZhbCA9PT0gdHJ1ZSA/ICdsaWdodCcgOiAnZGFyaycgfWApXG4gICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKGBib2R5LS0keyB2YWwgPT09IHRydWUgPyAnZGFyaycgOiAnbGlnaHQnIH1gKVxuICB9LFxuXG4gIHRvZ2dsZSAoKSB7XG4gICAgaWYgKF9fUVVBU0FSX1NTUl9TRVJWRVJfXyAhPT0gdHJ1ZSkge1xuICAgICAgUGx1Z2luLnNldChQbHVnaW4uaXNBY3RpdmUgPT09IGZhbHNlKVxuICAgIH1cbiAgfSxcblxuICBpbnN0YWxsICh7ICRxLCBvblNTUkh5ZHJhdGVkLCBzc3JDb250ZXh0IH0pIHtcbiAgICBjb25zdCB7IGRhcmsgfSA9ICRxLmNvbmZpZ1xuXG4gICAgaWYgKF9fUVVBU0FSX1NTUl9TRVJWRVJfXykge1xuICAgICAgdGhpcy5pc0FjdGl2ZSA9IGRhcmsgPT09IHRydWVcblxuICAgICAgJHEuZGFyayA9IHtcbiAgICAgICAgaXNBY3RpdmU6IGZhbHNlLFxuICAgICAgICBtb2RlOiBmYWxzZSxcbiAgICAgICAgc2V0OiB2YWwgPT4ge1xuICAgICAgICAgIHNzckNvbnRleHQuX21ldGEuYm9keUNsYXNzZXMgPSBzc3JDb250ZXh0Ll9tZXRhLmJvZHlDbGFzc2VzXG4gICAgICAgICAgICAucmVwbGFjZSgnIGJvZHktLWxpZ2h0JywgJycpXG4gICAgICAgICAgICAucmVwbGFjZSgnIGJvZHktLWRhcmsnLCAnJykgKyBgIGJvZHktLSR7IHZhbCA9PT0gdHJ1ZSA/ICdkYXJrJyA6ICdsaWdodCcgfWBcblxuICAgICAgICAgICRxLmRhcmsuaXNBY3RpdmUgPSB2YWwgPT09IHRydWVcbiAgICAgICAgICAkcS5kYXJrLm1vZGUgPSB2YWxcbiAgICAgICAgfSxcbiAgICAgICAgdG9nZ2xlOiAoKSA9PiB7XG4gICAgICAgICAgJHEuZGFyay5zZXQoJHEuZGFyay5pc0FjdGl2ZSA9PT0gZmFsc2UpXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgJHEuZGFyay5zZXQoZGFyaylcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgICRxLmRhcmsgPSB0aGlzXG5cbiAgICBpZiAodGhpcy5fX2luc3RhbGxlZCA9PT0gdHJ1ZSAmJiBkYXJrID09PSB2b2lkIDApIHtcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIHRoaXMuaXNBY3RpdmUgPSBkYXJrID09PSB0cnVlXG5cbiAgICBjb25zdCBpbml0aWFsVmFsID0gZGFyayAhPT0gdm9pZCAwID8gZGFyayA6IGZhbHNlXG5cbiAgICBpZiAoaXNSdW50aW1lU3NyUHJlSHlkcmF0aW9uLnZhbHVlID09PSB0cnVlKSB7XG4gICAgICBjb25zdCBzc3JTZXQgPSB2YWwgPT4ge1xuICAgICAgICB0aGlzLl9fZnJvbVNTUiA9IHZhbFxuICAgICAgfVxuXG4gICAgICBjb25zdCBvcmlnaW5hbFNldCA9IHRoaXMuc2V0XG5cbiAgICAgIHRoaXMuc2V0ID0gc3NyU2V0XG4gICAgICBzc3JTZXQoaW5pdGlhbFZhbClcblxuICAgICAgb25TU1JIeWRyYXRlZC5wdXNoKCgpID0+IHtcbiAgICAgICAgdGhpcy5zZXQgPSBvcmlnaW5hbFNldFxuICAgICAgICB0aGlzLnNldCh0aGlzLl9fZnJvbVNTUilcbiAgICAgIH0pXG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgdGhpcy5zZXQoaW5pdGlhbFZhbClcbiAgICB9XG4gIH1cbn0pXG5cbmV4cG9ydCBkZWZhdWx0IFBsdWdpblxuIiwiaW1wb3J0IHsgY2xpZW50IH0gZnJvbSAnLi9wbHVnaW5zL1BsYXRmb3JtLmpzJ1xuaW1wb3J0IHsgbm9vcCB9IGZyb20gJy4vdXRpbHMvZXZlbnQuanMnXG5cbmNvbnN0IGdldFRydWUgPSAoKSA9PiB0cnVlXG5cbmZ1bmN0aW9uIGZpbHRlckludmFsaWRQYXRoIChwYXRoKSB7XG4gIHJldHVybiB0eXBlb2YgcGF0aCA9PT0gJ3N0cmluZydcbiAgICAmJiBwYXRoICE9PSAnJ1xuICAgICYmIHBhdGggIT09ICcvJ1xuICAgICYmIHBhdGggIT09ICcjLydcbn1cblxuZnVuY3Rpb24gbm9ybWFsaXplRXhpdFBhdGggKHBhdGgpIHtcbiAgcGF0aC5zdGFydHNXaXRoKCcjJykgPT09IHRydWUgJiYgKHBhdGggPSBwYXRoLnN1YnN0cmluZygxKSlcbiAgcGF0aC5zdGFydHNXaXRoKCcvJykgPT09IGZhbHNlICYmIChwYXRoID0gJy8nICsgcGF0aClcbiAgcGF0aC5lbmRzV2l0aCgnLycpID09PSB0cnVlICYmIChwYXRoID0gcGF0aC5zdWJzdHJpbmcoMCwgcGF0aC5sZW5ndGggLSAxKSlcbiAgcmV0dXJuICcjJyArIHBhdGhcbn1cblxuZnVuY3Rpb24gZ2V0U2hvdWxkRXhpdEZuIChjZmcpIHtcbiAgaWYgKGNmZy5iYWNrQnV0dG9uRXhpdCA9PT0gZmFsc2UpIHtcbiAgICByZXR1cm4gKCkgPT4gZmFsc2VcbiAgfVxuXG4gIGlmIChjZmcuYmFja0J1dHRvbkV4aXQgPT09ICcqJykge1xuICAgIHJldHVybiBnZXRUcnVlXG4gIH1cblxuICAvLyBBZGQgZGVmYXVsdCByb290IHBhdGhcbiAgY29uc3QgZXhpdFBhdGhzID0gWyAnIy8nIF1cblxuICAvLyBBZGQgY3VzdG9tIGV4aXQgcGF0aHNcbiAgQXJyYXkuaXNBcnJheShjZmcuYmFja0J1dHRvbkV4aXQpID09PSB0cnVlICYmIGV4aXRQYXRocy5wdXNoKFxuICAgIC4uLmNmZy5iYWNrQnV0dG9uRXhpdC5maWx0ZXIoZmlsdGVySW52YWxpZFBhdGgpLm1hcChub3JtYWxpemVFeGl0UGF0aClcbiAgKVxuXG4gIHJldHVybiAoKSA9PiBleGl0UGF0aHMuaW5jbHVkZXMod2luZG93LmxvY2F0aW9uLmhhc2gpXG59XG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgX19oaXN0b3J5OiBbXSxcbiAgYWRkOiBub29wLFxuICByZW1vdmU6IG5vb3AsXG5cbiAgaW5zdGFsbCAoeyAkcSB9KSB7XG4gICAgaWYgKF9fUVVBU0FSX1NTUl9TRVJWRVJfXyB8fCB0aGlzLl9faW5zdGFsbGVkID09PSB0cnVlKSB7IHJldHVybiB9XG5cbiAgICBjb25zdCB7IGNvcmRvdmEsIGNhcGFjaXRvciB9ID0gY2xpZW50LmlzXG5cbiAgICBpZiAoY29yZG92YSAhPT0gdHJ1ZSAmJiBjYXBhY2l0b3IgIT09IHRydWUpIHtcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGNvbnN0IHFDb25mID0gJHEuY29uZmlnWyBjb3Jkb3ZhID09PSB0cnVlID8gJ2NvcmRvdmEnIDogJ2NhcGFjaXRvcicgXVxuXG4gICAgaWYgKHFDb25mICE9PSB2b2lkIDAgJiYgcUNvbmYuYmFja0J1dHRvbiA9PT0gZmFsc2UpIHtcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIC8vIGlmIHRoZSAnQGNhcGFjaXRvci9hcHAnIHBsdWdpbiBpcyBub3QgaW5zdGFsbGVkXG4gICAgLy8gdGhlbiB3ZSBnb3Qgbm90aGluZyB0byBkb1xuICAgIGlmIChcbiAgICAgIC8vIGlmIHdlJ3JlIG9uIENhcGFjaXRvciBtb2RlXG4gICAgICBjYXBhY2l0b3IgPT09IHRydWVcbiAgICAgIC8vIGFuZCBpdCdzIGFsc28gbm90IGluIENhcGFjaXRvcidzIG1haW4gaW5zdGFuY2VcbiAgICAgICYmICh3aW5kb3cuQ2FwYWNpdG9yID09PSB2b2lkIDAgfHwgd2luZG93LkNhcGFjaXRvci5QbHVnaW5zLkFwcCA9PT0gdm9pZCAwKVxuICAgICkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgdGhpcy5hZGQgPSBlbnRyeSA9PiB7XG4gICAgICBpZiAoZW50cnkuY29uZGl0aW9uID09PSB2b2lkIDApIHtcbiAgICAgICAgZW50cnkuY29uZGl0aW9uID0gZ2V0VHJ1ZVxuICAgICAgfVxuICAgICAgdGhpcy5fX2hpc3RvcnkucHVzaChlbnRyeSlcbiAgICB9XG5cbiAgICB0aGlzLnJlbW92ZSA9IGVudHJ5ID0+IHtcbiAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5fX2hpc3RvcnkuaW5kZXhPZihlbnRyeSlcbiAgICAgIGlmIChpbmRleCA+PSAwKSB7XG4gICAgICAgIHRoaXMuX19oaXN0b3J5LnNwbGljZShpbmRleCwgMSlcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBzaG91bGRFeGl0ID0gZ2V0U2hvdWxkRXhpdEZuKFxuICAgICAgT2JqZWN0LmFzc2lnbihcbiAgICAgICAgeyBiYWNrQnV0dG9uRXhpdDogdHJ1ZSB9LFxuICAgICAgICBxQ29uZlxuICAgICAgKVxuICAgIClcblxuICAgIGNvbnN0IGJhY2tIYW5kbGVyID0gKCkgPT4ge1xuICAgICAgaWYgKHRoaXMuX19oaXN0b3J5Lmxlbmd0aCkge1xuICAgICAgICBjb25zdCBlbnRyeSA9IHRoaXMuX19oaXN0b3J5WyB0aGlzLl9faGlzdG9yeS5sZW5ndGggLSAxIF1cblxuICAgICAgICBpZiAoZW50cnkuY29uZGl0aW9uKCkgPT09IHRydWUpIHtcbiAgICAgICAgICB0aGlzLl9faGlzdG9yeS5wb3AoKVxuICAgICAgICAgIGVudHJ5LmhhbmRsZXIoKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBlbHNlIGlmIChzaG91bGRFeGl0KCkgPT09IHRydWUpIHtcbiAgICAgICAgbmF2aWdhdG9yLmFwcC5leGl0QXBwKClcbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICB3aW5kb3cuaGlzdG9yeS5iYWNrKClcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoY29yZG92YSA9PT0gdHJ1ZSkge1xuICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignZGV2aWNlcmVhZHknLCAoKSA9PiB7XG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2JhY2tidXR0b24nLCBiYWNrSGFuZGxlciwgZmFsc2UpXG4gICAgICB9KVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIHdpbmRvdy5DYXBhY2l0b3IuUGx1Z2lucy5BcHAuYWRkTGlzdGVuZXIoJ2JhY2tCdXR0b24nLCBiYWNrSGFuZGxlcilcbiAgICB9XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IHtcbiAgaXNvTmFtZTogJ2VuLVVTJyxcbiAgbmF0aXZlTmFtZTogJ0VuZ2xpc2ggKFVTKScsXG4gIGxhYmVsOiB7XG4gICAgY2xlYXI6ICdDbGVhcicsXG4gICAgb2s6ICdPSycsXG4gICAgY2FuY2VsOiAnQ2FuY2VsJyxcbiAgICBjbG9zZTogJ0Nsb3NlJyxcbiAgICBzZXQ6ICdTZXQnLFxuICAgIHNlbGVjdDogJ1NlbGVjdCcsXG4gICAgcmVzZXQ6ICdSZXNldCcsXG4gICAgcmVtb3ZlOiAnUmVtb3ZlJyxcbiAgICB1cGRhdGU6ICdVcGRhdGUnLFxuICAgIGNyZWF0ZTogJ0NyZWF0ZScsXG4gICAgc2VhcmNoOiAnU2VhcmNoJyxcbiAgICBmaWx0ZXI6ICdGaWx0ZXInLFxuICAgIHJlZnJlc2g6ICdSZWZyZXNoJ1xuICB9LFxuICBkYXRlOiB7XG4gICAgZGF5czogJ1N1bmRheV9Nb25kYXlfVHVlc2RheV9XZWRuZXNkYXlfVGh1cnNkYXlfRnJpZGF5X1NhdHVyZGF5Jy5zcGxpdCgnXycpLFxuICAgIGRheXNTaG9ydDogJ1N1bl9Nb25fVHVlX1dlZF9UaHVfRnJpX1NhdCcuc3BsaXQoJ18nKSxcbiAgICBtb250aHM6ICdKYW51YXJ5X0ZlYnJ1YXJ5X01hcmNoX0FwcmlsX01heV9KdW5lX0p1bHlfQXVndXN0X1NlcHRlbWJlcl9PY3RvYmVyX05vdmVtYmVyX0RlY2VtYmVyJy5zcGxpdCgnXycpLFxuICAgIG1vbnRoc1Nob3J0OiAnSmFuX0ZlYl9NYXJfQXByX01heV9KdW5fSnVsX0F1Z19TZXBfT2N0X05vdl9EZWMnLnNwbGl0KCdfJyksXG4gICAgZmlyc3REYXlPZldlZWs6IDAsIC8vIDAtNiwgMCAtIFN1bmRheSwgMSBNb25kYXksIC4uLlxuICAgIGZvcm1hdDI0aDogZmFsc2UsXG4gICAgcGx1cmFsRGF5OiAnZGF5cydcbiAgfSxcbiAgdGFibGU6IHtcbiAgICBub0RhdGE6ICdObyBkYXRhIGF2YWlsYWJsZScsXG4gICAgbm9SZXN1bHRzOiAnTm8gbWF0Y2hpbmcgcmVjb3JkcyBmb3VuZCcsXG4gICAgbG9hZGluZzogJ0xvYWRpbmcuLi4nLFxuICAgIHNlbGVjdGVkUmVjb3Jkczogcm93cyA9PiAoXG4gICAgICByb3dzID09PSAxXG4gICAgICAgID8gJzEgcmVjb3JkIHNlbGVjdGVkLidcbiAgICAgICAgOiAocm93cyA9PT0gMCA/ICdObycgOiByb3dzKSArICcgcmVjb3JkcyBzZWxlY3RlZC4nXG4gICAgKSxcbiAgICByZWNvcmRzUGVyUGFnZTogJ1JlY29yZHMgcGVyIHBhZ2U6JyxcbiAgICBhbGxSb3dzOiAnQWxsJyxcbiAgICBwYWdpbmF0aW9uOiAoc3RhcnQsIGVuZCwgdG90YWwpID0+IHN0YXJ0ICsgJy0nICsgZW5kICsgJyBvZiAnICsgdG90YWwsXG4gICAgY29sdW1uczogJ0NvbHVtbnMnXG4gIH0sXG4gIGVkaXRvcjoge1xuICAgIHVybDogJ1VSTCcsXG4gICAgYm9sZDogJ0JvbGQnLFxuICAgIGl0YWxpYzogJ0l0YWxpYycsXG4gICAgc3RyaWtldGhyb3VnaDogJ1N0cmlrZXRocm91Z2gnLFxuICAgIHVuZGVybGluZTogJ1VuZGVybGluZScsXG4gICAgdW5vcmRlcmVkTGlzdDogJ1Vub3JkZXJlZCBMaXN0JyxcbiAgICBvcmRlcmVkTGlzdDogJ09yZGVyZWQgTGlzdCcsXG4gICAgc3Vic2NyaXB0OiAnU3Vic2NyaXB0JyxcbiAgICBzdXBlcnNjcmlwdDogJ1N1cGVyc2NyaXB0JyxcbiAgICBoeXBlcmxpbms6ICdIeXBlcmxpbmsnLFxuICAgIHRvZ2dsZUZ1bGxzY3JlZW46ICdUb2dnbGUgRnVsbHNjcmVlbicsXG4gICAgcXVvdGU6ICdRdW90ZScsXG4gICAgbGVmdDogJ0xlZnQgYWxpZ24nLFxuICAgIGNlbnRlcjogJ0NlbnRlciBhbGlnbicsXG4gICAgcmlnaHQ6ICdSaWdodCBhbGlnbicsXG4gICAganVzdGlmeTogJ0p1c3RpZnkgYWxpZ24nLFxuICAgIHByaW50OiAnUHJpbnQnLFxuICAgIG91dGRlbnQ6ICdEZWNyZWFzZSBpbmRlbnRhdGlvbicsXG4gICAgaW5kZW50OiAnSW5jcmVhc2UgaW5kZW50YXRpb24nLFxuICAgIHJlbW92ZUZvcm1hdDogJ1JlbW92ZSBmb3JtYXR0aW5nJyxcbiAgICBmb3JtYXR0aW5nOiAnRm9ybWF0dGluZycsXG4gICAgZm9udFNpemU6ICdGb250IFNpemUnLFxuICAgIGFsaWduOiAnQWxpZ24nLFxuICAgIGhyOiAnSW5zZXJ0IEhvcml6b250YWwgUnVsZScsXG4gICAgdW5kbzogJ1VuZG8nLFxuICAgIHJlZG86ICdSZWRvJyxcbiAgICBoZWFkaW5nMTogJ0hlYWRpbmcgMScsXG4gICAgaGVhZGluZzI6ICdIZWFkaW5nIDInLFxuICAgIGhlYWRpbmczOiAnSGVhZGluZyAzJyxcbiAgICBoZWFkaW5nNDogJ0hlYWRpbmcgNCcsXG4gICAgaGVhZGluZzU6ICdIZWFkaW5nIDUnLFxuICAgIGhlYWRpbmc2OiAnSGVhZGluZyA2JyxcbiAgICBwYXJhZ3JhcGg6ICdQYXJhZ3JhcGgnLFxuICAgIGNvZGU6ICdDb2RlJyxcbiAgICBzaXplMTogJ1Zlcnkgc21hbGwnLFxuICAgIHNpemUyOiAnQSBiaXQgc21hbGwnLFxuICAgIHNpemUzOiAnTm9ybWFsJyxcbiAgICBzaXplNDogJ01lZGl1bS1sYXJnZScsXG4gICAgc2l6ZTU6ICdCaWcnLFxuICAgIHNpemU2OiAnVmVyeSBiaWcnLFxuICAgIHNpemU3OiAnTWF4aW11bScsXG4gICAgZGVmYXVsdEZvbnQ6ICdEZWZhdWx0IEZvbnQnLFxuICAgIHZpZXdTb3VyY2U6ICdWaWV3IFNvdXJjZSdcbiAgfSxcbiAgdHJlZToge1xuICAgIG5vTm9kZXM6ICdObyBub2RlcyBhdmFpbGFibGUnLFxuICAgIG5vUmVzdWx0czogJ05vIG1hdGNoaW5nIG5vZGVzIGZvdW5kJ1xuICB9XG59XG4iLCJpbXBvcnQgZGVmaW5lUmVhY3RpdmVQbHVnaW4gZnJvbSAnLi91dGlscy9wcml2YXRlL2RlZmluZS1yZWFjdGl2ZS1wbHVnaW4uanMnXG4vLyBubyBleHRlbnNpb24gb24gcHVycG9zZSBmb3IgbmV4dCBvbmU6XG5pbXBvcnQgZGVmYXVsdExhbmcgZnJvbSAnLi4vbGFuZy9lbi1VUydcblxuZnVuY3Rpb24gZ2V0TG9jYWxlICgpIHtcbiAgaWYgKF9fUVVBU0FSX1NTUl9TRVJWRVJfXykgeyByZXR1cm4gfVxuXG4gIGNvbnN0IHZhbCA9IEFycmF5LmlzQXJyYXkobmF2aWdhdG9yLmxhbmd1YWdlcykgPT09IHRydWUgJiYgbmF2aWdhdG9yLmxhbmd1YWdlcy5sZW5ndGggPiAwXG4gICAgPyBuYXZpZ2F0b3IubGFuZ3VhZ2VzWyAwIF1cbiAgICA6IG5hdmlnYXRvci5sYW5ndWFnZVxuXG4gIGlmICh0eXBlb2YgdmFsID09PSAnc3RyaW5nJykge1xuICAgIHJldHVybiB2YWwuc3BsaXQoL1stX10vKS5tYXAoKHYsIGkpID0+IChcbiAgICAgIGkgPT09IDBcbiAgICAgICAgPyB2LnRvTG93ZXJDYXNlKClcbiAgICAgICAgOiAoXG4gICAgICAgICAgICBpID4gMSB8fCB2Lmxlbmd0aCA8IDRcbiAgICAgICAgICAgICAgPyB2LnRvVXBwZXJDYXNlKClcbiAgICAgICAgICAgICAgOiAodlsgMCBdLnRvVXBwZXJDYXNlKCkgKyB2LnNsaWNlKDEpLnRvTG93ZXJDYXNlKCkpXG4gICAgICAgICAgKVxuICAgICkpLmpvaW4oJy0nKVxuICB9XG59XG5cbmNvbnN0IFBsdWdpbiA9IGRlZmluZVJlYWN0aXZlUGx1Z2luKHtcbiAgX19sYW5nUGFjazoge31cbn0sIHtcbiAgZ2V0TG9jYWxlLFxuXG4gIHNldCAobGFuZ09iamVjdCA9IGRlZmF1bHRMYW5nLCBzc3JDb250ZXh0KSB7XG4gICAgY29uc3QgbGFuZyA9IHtcbiAgICAgIC4uLmxhbmdPYmplY3QsXG4gICAgICBydGw6IGxhbmdPYmplY3QucnRsID09PSB0cnVlLFxuICAgICAgZ2V0TG9jYWxlXG4gICAgfVxuXG4gICAgaWYgKF9fUVVBU0FSX1NTUl9TRVJWRVJfXykge1xuICAgICAgaWYgKHNzckNvbnRleHQgPT09IHZvaWQgMCkge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdTU1IgRVJST1I6IHNlY29uZCBwYXJhbSByZXF1aXJlZDogUXVhc2FyLmxhbmcuc2V0KGxhbmcsIHNzckNvbnRleHQpJylcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGRpciA9IGxhbmcucnRsID09PSB0cnVlID8gJ3J0bCcgOiAnbHRyJ1xuICAgICAgY29uc3QgYXR0cnMgPSBgbGFuZz0keyBsYW5nLmlzb05hbWUgfSBkaXI9JHsgZGlyIH1gXG5cbiAgICAgIGxhbmcuc2V0ID0gc3NyQ29udGV4dC4kcS5sYW5nLnNldFxuXG4gICAgICBzc3JDb250ZXh0Ll9tZXRhLmh0bWxBdHRycyA9IHNzckNvbnRleHQuX19xUHJldkxhbmcgIT09IHZvaWQgMFxuICAgICAgICA/IHNzckNvbnRleHQuX21ldGEuaHRtbEF0dHJzLnJlcGxhY2Uoc3NyQ29udGV4dC5fX3FQcmV2TGFuZywgYXR0cnMpXG4gICAgICAgIDogYXR0cnNcblxuICAgICAgc3NyQ29udGV4dC5fX3FQcmV2TGFuZyA9IGF0dHJzXG4gICAgICBzc3JDb250ZXh0LiRxLmxhbmcgPSBsYW5nXG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgY29uc3QgZWwgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnRcbiAgICAgIGVsLnNldEF0dHJpYnV0ZSgnZGlyJywgbGFuZy5ydGwgPT09IHRydWUgPyAncnRsJyA6ICdsdHInKVxuICAgICAgZWwuc2V0QXR0cmlidXRlKCdsYW5nJywgbGFuZy5pc29OYW1lKVxuXG4gICAgICBsYW5nLnNldCA9IFBsdWdpbi5zZXRcblxuICAgICAgT2JqZWN0LmFzc2lnbihQbHVnaW4uX19sYW5nUGFjaywgbGFuZylcblxuICAgICAgUGx1Z2luLnByb3BzID0gbGFuZ1xuICAgICAgUGx1Z2luLmlzb05hbWUgPSBsYW5nLmlzb05hbWVcbiAgICAgIFBsdWdpbi5uYXRpdmVOYW1lID0gbGFuZy5uYXRpdmVOYW1lXG4gICAgfVxuICB9LFxuXG4gIGluc3RhbGwgKHsgJHEsIGxhbmcsIHNzckNvbnRleHQgfSkge1xuICAgIGlmIChfX1FVQVNBUl9TU1JfU0VSVkVSX18pIHtcbiAgICAgIGNvbnN0IGluaXRpYWxMYW5nID0gbGFuZyB8fCBkZWZhdWx0TGFuZ1xuXG4gICAgICAkcS5sYW5nID0ge31cbiAgICAgICRxLmxhbmcuc2V0ID0gbGFuZ09iamVjdCA9PiB7XG4gICAgICAgIHRoaXMuc2V0KGxhbmdPYmplY3QsIHNzckNvbnRleHQpXG4gICAgICB9XG5cbiAgICAgICRxLmxhbmcuc2V0KGluaXRpYWxMYW5nKVxuXG4gICAgICAvLyBvbmUtdGltZSBTU1Igc2VydmVyIG9wZXJhdGlvblxuICAgICAgaWYgKHRoaXMuaXNvTmFtZSAhPT0gaW5pdGlhbExhbmcuaXNvTmFtZSkge1xuICAgICAgICB0aGlzLmlzb05hbWUgPSBpbml0aWFsTGFuZy5pc29OYW1lXG4gICAgICAgIHRoaXMubmF0aXZlTmFtZSA9IGluaXRpYWxMYW5nLm5hdGl2ZU5hbWVcbiAgICAgICAgdGhpcy5wcm9wcyA9IGluaXRpYWxMYW5nXG4gICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgJHEubGFuZyA9IFBsdWdpbi5fX2xhbmdQYWNrXG5cbiAgICAgIGlmICh0aGlzLl9faW5zdGFsbGVkID09PSB0cnVlKSB7XG4gICAgICAgIGxhbmcgIT09IHZvaWQgMCAmJiB0aGlzLnNldChsYW5nKVxuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIHRoaXMuc2V0KGxhbmcgfHwgZGVmYXVsdExhbmcpXG4gICAgICB9XG4gICAgfVxuICB9XG59KVxuXG5leHBvcnQgZGVmYXVsdCBQbHVnaW5cbmV4cG9ydCB7IGRlZmF1bHRMYW5nIH1cbiIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHNldENzc1ZhciAocHJvcE5hbWUsIHZhbHVlLCBlbGVtZW50ID0gZG9jdW1lbnQuYm9keSkge1xuICBpZiAodHlwZW9mIHByb3BOYW1lICE9PSAnc3RyaW5nJykge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0V4cGVjdGVkIGEgc3RyaW5nIGFzIHByb3BOYW1lJylcbiAgfVxuICBpZiAodHlwZW9mIHZhbHVlICE9PSAnc3RyaW5nJykge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0V4cGVjdGVkIGEgc3RyaW5nIGFzIHZhbHVlJylcbiAgfVxuICBpZiAoIShlbGVtZW50IGluc3RhbmNlb2YgRWxlbWVudCkpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdFeHBlY3RlZCBhIERPTSBlbGVtZW50JylcbiAgfVxuXG4gIGVsZW1lbnQuc3R5bGUuc2V0UHJvcGVydHkoYC0tcS0keyBwcm9wTmFtZSB9YCwgdmFsdWUpXG59XG4iLCJsZXQgbGFzdEtleUNvbXBvc2l0aW9uU3RhdHVzID0gZmFsc2VcblxuZXhwb3J0IGZ1bmN0aW9uIG9uS2V5RG93bkNvbXBvc2l0aW9uIChldnQpIHtcbiAgbGFzdEtleUNvbXBvc2l0aW9uU3RhdHVzID0gZXZ0LmlzQ29tcG9zaW5nID09PSB0cnVlXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzaG91bGRJZ25vcmVLZXkgKGV2dCkge1xuICByZXR1cm4gbGFzdEtleUNvbXBvc2l0aW9uU3RhdHVzID09PSB0cnVlXG4gICAgfHwgZXZ0ICE9PSBPYmplY3QoZXZ0KVxuICAgIHx8IGV2dC5pc0NvbXBvc2luZyA9PT0gdHJ1ZVxuICAgIHx8IGV2dC5xS2V5RXZlbnQgPT09IHRydWVcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzS2V5Q29kZSAoZXZ0LCBrZXlDb2Rlcykge1xuICByZXR1cm4gc2hvdWxkSWdub3JlS2V5KGV2dCkgPT09IHRydWVcbiAgICA/IGZhbHNlXG4gICAgOiBbXS5jb25jYXQoa2V5Q29kZXMpLmluY2x1ZGVzKGV2dC5rZXlDb2RlKVxufVxuIiwiaW1wb3J0IHNldENzc1ZhciBmcm9tICcuL3V0aWxzL3NldC1jc3MtdmFyLmpzJ1xuaW1wb3J0IHsgbm9vcCB9IGZyb20gJy4vdXRpbHMvZXZlbnQuanMnXG5pbXBvcnQgeyBvbktleURvd25Db21wb3NpdGlvbiB9IGZyb20gJy4vdXRpbHMvcHJpdmF0ZS9rZXktY29tcG9zaXRpb24uanMnXG5pbXBvcnQgeyBpc1J1bnRpbWVTc3JQcmVIeWRyYXRpb24sIGNsaWVudCwgaW9zQ29ycmVjdGlvbiB9IGZyb20gJy4vcGx1Z2lucy9QbGF0Zm9ybS5qcydcblxuZnVuY3Rpb24gZ2V0TW9iaWxlUGxhdGZvcm0gKGlzKSB7XG4gIGlmIChpcy5pb3MgPT09IHRydWUpIHJldHVybiAnaW9zJ1xuICBpZiAoaXMuYW5kcm9pZCA9PT0gdHJ1ZSkgcmV0dXJuICdhbmRyb2lkJ1xufVxuXG5mdW5jdGlvbiBnZXRCb2R5Q2xhc3NlcyAoeyBpcywgaGFzLCB3aXRoaW4gfSwgY2ZnKSB7XG4gIGNvbnN0IGNscyA9IFtcbiAgICBpcy5kZXNrdG9wID09PSB0cnVlID8gJ2Rlc2t0b3AnIDogJ21vYmlsZScsXG4gICAgYCR7IGhhcy50b3VjaCA9PT0gZmFsc2UgPyAnbm8tJyA6ICcnIH10b3VjaGBcbiAgXVxuXG4gIGlmIChpcy5tb2JpbGUgPT09IHRydWUpIHtcbiAgICBjb25zdCBtb2JpbGUgPSBnZXRNb2JpbGVQbGF0Zm9ybShpcylcbiAgICBtb2JpbGUgIT09IHZvaWQgMCAmJiBjbHMucHVzaCgncGxhdGZvcm0tJyArIG1vYmlsZSlcbiAgfVxuXG4gIGlmIChpcy5uYXRpdmVNb2JpbGUgPT09IHRydWUpIHtcbiAgICBjb25zdCB0eXBlID0gaXMubmF0aXZlTW9iaWxlV3JhcHBlclxuXG4gICAgY2xzLnB1c2godHlwZSlcbiAgICBjbHMucHVzaCgnbmF0aXZlLW1vYmlsZScpXG5cbiAgICBpZiAoXG4gICAgICBpcy5pb3MgPT09IHRydWVcbiAgICAgICYmIChjZmdbIHR5cGUgXSA9PT0gdm9pZCAwIHx8IGNmZ1sgdHlwZSBdLmlvc1N0YXR1c0JhclBhZGRpbmcgIT09IGZhbHNlKVxuICAgICkge1xuICAgICAgY2xzLnB1c2goJ3EtaW9zLXBhZGRpbmcnKVxuICAgIH1cbiAgfVxuICBlbHNlIGlmIChpcy5lbGVjdHJvbiA9PT0gdHJ1ZSkge1xuICAgIGNscy5wdXNoKCdlbGVjdHJvbicpXG4gIH1cbiAgZWxzZSBpZiAoaXMuYmV4ID09PSB0cnVlKSB7XG4gICAgY2xzLnB1c2goJ2JleCcpXG4gIH1cblxuICB3aXRoaW4uaWZyYW1lID09PSB0cnVlICYmIGNscy5wdXNoKCd3aXRoaW4taWZyYW1lJylcblxuICByZXR1cm4gY2xzXG59XG5cbmZ1bmN0aW9uIGFwcGx5Q2xpZW50U3NyQ29ycmVjdGlvbnMgKCkge1xuICBjb25zdCBjbGFzc2VzID0gZG9jdW1lbnQuYm9keS5jbGFzc05hbWVcbiAgbGV0IG5ld0NscyA9IGNsYXNzZXNcblxuICBpZiAoaW9zQ29ycmVjdGlvbiAhPT0gdm9pZCAwKSB7XG4gICAgbmV3Q2xzID0gbmV3Q2xzLnJlcGxhY2UoJ2Rlc2t0b3AnLCAncGxhdGZvcm0taW9zIG1vYmlsZScpXG4gIH1cblxuICBpZiAoY2xpZW50Lmhhcy50b3VjaCA9PT0gdHJ1ZSkge1xuICAgIG5ld0NscyA9IG5ld0Nscy5yZXBsYWNlKCduby10b3VjaCcsICd0b3VjaCcpXG4gIH1cblxuICBpZiAoY2xpZW50LndpdGhpbi5pZnJhbWUgPT09IHRydWUpIHtcbiAgICBuZXdDbHMgKz0gJyB3aXRoaW4taWZyYW1lJ1xuICB9XG5cbiAgaWYgKGNsYXNzZXMgIT09IG5ld0Nscykge1xuICAgIGRvY3VtZW50LmJvZHkuY2xhc3NOYW1lID0gbmV3Q2xzXG4gIH1cbn1cblxuZnVuY3Rpb24gc2V0Q29sb3JzIChicmFuZCkge1xuICBmb3IgKGNvbnN0IGNvbG9yIGluIGJyYW5kKSB7XG4gICAgc2V0Q3NzVmFyKGNvbG9yLCBicmFuZFsgY29sb3IgXSlcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCB7XG4gIGluc3RhbGwgKG9wdHMpIHtcbiAgICBpZiAoX19RVUFTQVJfU1NSX1NFUlZFUl9fKSB7XG4gICAgICBjb25zdCB7ICRxLCBzc3JDb250ZXh0IH0gPSBvcHRzXG4gICAgICBjb25zdCBjbHMgPSBnZXRCb2R5Q2xhc3NlcygkcS5wbGF0Zm9ybSwgJHEuY29uZmlnKVxuXG4gICAgICBpZiAoJHEuY29uZmlnLnNjcmVlbiAhPT0gdm9pZCAwICYmICRxLmNvbmZpZy5zY3JlZW4uYm9keUNsYXNzID09PSB0cnVlKSB7XG4gICAgICAgIGNscy5wdXNoKCdzY3JlZW4tLXhzJylcbiAgICAgIH1cblxuICAgICAgc3NyQ29udGV4dC5fbWV0YS5ib2R5Q2xhc3NlcyArPSBjbHMuam9pbignICcpXG5cbiAgICAgIGNvbnN0IGJyYW5kID0gJHEuY29uZmlnLmJyYW5kXG4gICAgICBpZiAoYnJhbmQgIT09IHZvaWQgMCkge1xuICAgICAgICBjb25zdCB2YXJzID0gT2JqZWN0LmtleXMoYnJhbmQpXG4gICAgICAgICAgLm1hcChrZXkgPT4gYC0tcS0keyBrZXkgfTokeyBicmFuZFsga2V5IF0gfTtgKVxuICAgICAgICAgIC5qb2luKCcnKVxuXG4gICAgICAgIHNzckNvbnRleHQuX21ldGEuZW5kaW5nSGVhZFRhZ3MgKz0gYDxzdHlsZT46cm9vdHskeyB2YXJzIH19PC9zdHlsZT5gXG4gICAgICB9XG5cbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGlmICh0aGlzLl9faW5zdGFsbGVkID09PSB0cnVlKSB7IHJldHVybiB9XG5cbiAgICBpZiAoaXNSdW50aW1lU3NyUHJlSHlkcmF0aW9uLnZhbHVlID09PSB0cnVlKSB7XG4gICAgICBhcHBseUNsaWVudFNzckNvcnJlY3Rpb25zKClcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICBjb25zdCB7ICRxIH0gPSBvcHRzXG5cbiAgICAgICRxLmNvbmZpZy5icmFuZCAhPT0gdm9pZCAwICYmIHNldENvbG9ycygkcS5jb25maWcuYnJhbmQpXG5cbiAgICAgIGNvbnN0IGNscyA9IGdldEJvZHlDbGFzc2VzKGNsaWVudCwgJHEuY29uZmlnKVxuICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkLmFwcGx5KGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LCBjbHMpXG4gICAgfVxuXG4gICAgaWYgKGNsaWVudC5pcy5pb3MgPT09IHRydWUpIHtcbiAgICAgIC8vIG5lZWRlZCBmb3IgaU9TIGJ1dHRvbiBhY3RpdmUgc3RhdGVcbiAgICAgIGRvY3VtZW50LmJvZHkuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIG5vb3ApXG4gICAgfVxuXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBvbktleURvd25Db21wb3NpdGlvbiwgdHJ1ZSlcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQge1xuICBuYW1lOiAnbWF0ZXJpYWwtaWNvbnMnLFxuICB0eXBlOiB7XG4gICAgcG9zaXRpdmU6ICdjaGVja19jaXJjbGUnLFxuICAgIG5lZ2F0aXZlOiAnd2FybmluZycsXG4gICAgaW5mbzogJ2luZm8nLFxuICAgIHdhcm5pbmc6ICdwcmlvcml0eV9oaWdoJ1xuICB9LFxuICBhcnJvdzoge1xuICAgIHVwOiAnYXJyb3dfdXB3YXJkJyxcbiAgICByaWdodDogJ2Fycm93X2ZvcndhcmQnLFxuICAgIGRvd246ICdhcnJvd19kb3dud2FyZCcsXG4gICAgbGVmdDogJ2Fycm93X2JhY2snLFxuICAgIGRyb3Bkb3duOiAnYXJyb3dfZHJvcF9kb3duJ1xuICB9LFxuICBjaGV2cm9uOiB7XG4gICAgbGVmdDogJ2NoZXZyb25fbGVmdCcsXG4gICAgcmlnaHQ6ICdjaGV2cm9uX3JpZ2h0J1xuICB9LFxuICBjb2xvclBpY2tlcjoge1xuICAgIHNwZWN0cnVtOiAnZ3JhZGllbnQnLFxuICAgIHR1bmU6ICd0dW5lJyxcbiAgICBwYWxldHRlOiAnc3R5bGUnXG4gIH0sXG4gIHB1bGxUb1JlZnJlc2g6IHtcbiAgICBpY29uOiAncmVmcmVzaCdcbiAgfSxcbiAgY2Fyb3VzZWw6IHtcbiAgICBsZWZ0OiAnY2hldnJvbl9sZWZ0JyxcbiAgICByaWdodDogJ2NoZXZyb25fcmlnaHQnLFxuICAgIHVwOiAna2V5Ym9hcmRfYXJyb3dfdXAnLFxuICAgIGRvd246ICdrZXlib2FyZF9hcnJvd19kb3duJyxcbiAgICBuYXZpZ2F0aW9uSWNvbjogJ2xlbnMnXG4gIH0sXG4gIGNoaXA6IHtcbiAgICByZW1vdmU6ICdjYW5jZWwnLFxuICAgIHNlbGVjdGVkOiAnY2hlY2snXG4gIH0sXG4gIGRhdGV0aW1lOiB7XG4gICAgYXJyb3dMZWZ0OiAnY2hldnJvbl9sZWZ0JyxcbiAgICBhcnJvd1JpZ2h0OiAnY2hldnJvbl9yaWdodCcsXG4gICAgbm93OiAnYWNjZXNzX3RpbWUnLFxuICAgIHRvZGF5OiAndG9kYXknXG4gIH0sXG4gIGVkaXRvcjoge1xuICAgIGJvbGQ6ICdmb3JtYXRfYm9sZCcsXG4gICAgaXRhbGljOiAnZm9ybWF0X2l0YWxpYycsXG4gICAgc3RyaWtldGhyb3VnaDogJ3N0cmlrZXRocm91Z2hfcycsXG4gICAgdW5kZXJsaW5lOiAnZm9ybWF0X3VuZGVybGluZWQnLFxuICAgIHVub3JkZXJlZExpc3Q6ICdmb3JtYXRfbGlzdF9idWxsZXRlZCcsXG4gICAgb3JkZXJlZExpc3Q6ICdmb3JtYXRfbGlzdF9udW1iZXJlZCcsXG4gICAgc3Vic2NyaXB0OiAndmVydGljYWxfYWxpZ25fYm90dG9tJyxcbiAgICBzdXBlcnNjcmlwdDogJ3ZlcnRpY2FsX2FsaWduX3RvcCcsXG4gICAgaHlwZXJsaW5rOiAnbGluaycsXG4gICAgdG9nZ2xlRnVsbHNjcmVlbjogJ2Z1bGxzY3JlZW4nLFxuICAgIHF1b3RlOiAnZm9ybWF0X3F1b3RlJyxcbiAgICBsZWZ0OiAnZm9ybWF0X2FsaWduX2xlZnQnLFxuICAgIGNlbnRlcjogJ2Zvcm1hdF9hbGlnbl9jZW50ZXInLFxuICAgIHJpZ2h0OiAnZm9ybWF0X2FsaWduX3JpZ2h0JyxcbiAgICBqdXN0aWZ5OiAnZm9ybWF0X2FsaWduX2p1c3RpZnknLFxuICAgIHByaW50OiAncHJpbnQnLFxuICAgIG91dGRlbnQ6ICdmb3JtYXRfaW5kZW50X2RlY3JlYXNlJyxcbiAgICBpbmRlbnQ6ICdmb3JtYXRfaW5kZW50X2luY3JlYXNlJyxcbiAgICByZW1vdmVGb3JtYXQ6ICdmb3JtYXRfY2xlYXInLFxuICAgIGZvcm1hdHRpbmc6ICd0ZXh0X2Zvcm1hdCcsXG4gICAgZm9udFNpemU6ICdmb3JtYXRfc2l6ZScsXG4gICAgYWxpZ246ICdmb3JtYXRfYWxpZ25fbGVmdCcsXG4gICAgaHI6ICdyZW1vdmUnLFxuICAgIHVuZG86ICd1bmRvJyxcbiAgICByZWRvOiAncmVkbycsXG4gICAgaGVhZGluZzogJ2Zvcm1hdF9zaXplJyxcbiAgICBjb2RlOiAnY29kZScsXG4gICAgc2l6ZTogJ2Zvcm1hdF9zaXplJyxcbiAgICBmb250OiAnZm9udF9kb3dubG9hZCcsXG4gICAgdmlld1NvdXJjZTogJ2NvZGUnXG4gIH0sXG4gIGV4cGFuc2lvbkl0ZW06IHtcbiAgICBpY29uOiAna2V5Ym9hcmRfYXJyb3dfZG93bicsXG4gICAgZGVuc2VJY29uOiAnYXJyb3dfZHJvcF9kb3duJ1xuICB9LFxuICBmYWI6IHtcbiAgICBpY29uOiAnYWRkJyxcbiAgICBhY3RpdmVJY29uOiAnY2xvc2UnXG4gIH0sXG4gIGZpZWxkOiB7XG4gICAgY2xlYXI6ICdjYW5jZWwnLFxuICAgIGVycm9yOiAnZXJyb3InXG4gIH0sXG4gIHBhZ2luYXRpb246IHtcbiAgICBmaXJzdDogJ2ZpcnN0X3BhZ2UnLFxuICAgIHByZXY6ICdrZXlib2FyZF9hcnJvd19sZWZ0JyxcbiAgICBuZXh0OiAna2V5Ym9hcmRfYXJyb3dfcmlnaHQnLFxuICAgIGxhc3Q6ICdsYXN0X3BhZ2UnXG4gIH0sXG4gIHJhdGluZzoge1xuICAgIGljb246ICdncmFkZSdcbiAgfSxcbiAgc3RlcHBlcjoge1xuICAgIGRvbmU6ICdjaGVjaycsXG4gICAgYWN0aXZlOiAnZWRpdCcsXG4gICAgZXJyb3I6ICd3YXJuaW5nJ1xuICB9LFxuICB0YWJzOiB7XG4gICAgbGVmdDogJ2NoZXZyb25fbGVmdCcsXG4gICAgcmlnaHQ6ICdjaGV2cm9uX3JpZ2h0JyxcbiAgICB1cDogJ2tleWJvYXJkX2Fycm93X3VwJyxcbiAgICBkb3duOiAna2V5Ym9hcmRfYXJyb3dfZG93bidcbiAgfSxcbiAgdGFibGU6IHtcbiAgICBhcnJvd1VwOiAnYXJyb3dfdXB3YXJkJyxcbiAgICB3YXJuaW5nOiAnd2FybmluZycsXG4gICAgZmlyc3RQYWdlOiAnZmlyc3RfcGFnZScsXG4gICAgcHJldlBhZ2U6ICdjaGV2cm9uX2xlZnQnLFxuICAgIG5leHRQYWdlOiAnY2hldnJvbl9yaWdodCcsXG4gICAgbGFzdFBhZ2U6ICdsYXN0X3BhZ2UnXG4gIH0sXG4gIHRyZWU6IHtcbiAgICBpY29uOiAncGxheV9hcnJvdydcbiAgfSxcbiAgdXBsb2FkZXI6IHtcbiAgICBkb25lOiAnZG9uZScsXG4gICAgY2xlYXI6ICdjbGVhcicsXG4gICAgYWRkOiAnYWRkX2JveCcsXG4gICAgdXBsb2FkOiAnY2xvdWRfdXBsb2FkJyxcbiAgICByZW1vdmVRdWV1ZTogJ2NsZWFyX2FsbCcsXG4gICAgcmVtb3ZlVXBsb2FkZWQ6ICdkb25lX2FsbCdcbiAgfVxufVxuIiwiaW1wb3J0IGRlZmluZVJlYWN0aXZlUGx1Z2luIGZyb20gJy4vdXRpbHMvcHJpdmF0ZS9kZWZpbmUtcmVhY3RpdmUtcGx1Z2luLmpzJ1xuaW1wb3J0IHsgaW5qZWN0UHJvcCB9IGZyb20gJy4vdXRpbHMvcHJpdmF0ZS9pbmplY3Qtb2JqLXByb3AuanMnXG4vLyBubyBleHRlbnNpb24gb24gcHVycG9zZSBmb3IgbmV4dCBvbmU6XG5pbXBvcnQgbWF0ZXJpYWxJY29ucyBmcm9tICcuLi9pY29uLXNldC9tYXRlcmlhbC1pY29ucydcblxuY29uc3QgUGx1Z2luID0gZGVmaW5lUmVhY3RpdmVQbHVnaW4oe1xuICBpY29uTWFwRm46IG51bGwsXG4gIF9faWNvbnM6IHt9XG59LCB7XG4gIHNldCAoc2V0T2JqZWN0LCBzc3JDb250ZXh0KSB7XG4gICAgY29uc3QgZGVmID0geyAuLi5zZXRPYmplY3QsIHJ0bDogc2V0T2JqZWN0LnJ0bCA9PT0gdHJ1ZSB9XG5cbiAgICBpZiAoX19RVUFTQVJfU1NSX1NFUlZFUl9fKSB7XG4gICAgICBpZiAoc3NyQ29udGV4dCA9PT0gdm9pZCAwKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ1NTUiBFUlJPUjogc2Vjb25kIHBhcmFtIHJlcXVpcmVkOiBRdWFzYXIuaWNvblNldC5zZXQoaWNvblNldCwgc3NyQ29udGV4dCknKVxuICAgICAgICByZXR1cm5cbiAgICAgIH1cblxuICAgICAgZGVmLnNldCA9IHNzckNvbnRleHQuJHEuaWNvblNldC5zZXRcbiAgICAgIE9iamVjdC5hc3NpZ24oc3NyQ29udGV4dC4kcS5pY29uU2V0LCBkZWYpXG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgZGVmLnNldCA9IFBsdWdpbi5zZXRcbiAgICAgIE9iamVjdC5hc3NpZ24oUGx1Z2luLl9faWNvbnMsIGRlZilcbiAgICB9XG4gIH0sXG5cbiAgaW5zdGFsbCAoeyAkcSwgaWNvblNldCwgc3NyQ29udGV4dCB9KSB7XG4gICAgaWYgKF9fUVVBU0FSX1NTUl9TRVJWRVJfXykge1xuICAgICAgY29uc3QgaW5pdGlhbFNldCA9IGljb25TZXQgfHwgbWF0ZXJpYWxJY29uc1xuXG4gICAgICAkcS5pY29uTWFwRm4gPSBzc3JDb250ZXh0LiRxLmNvbmZpZy5pY29uTWFwRm4gfHwgdGhpcy5pY29uTWFwRm4gfHwgbnVsbFxuICAgICAgJHEuaWNvblNldCA9IHt9XG4gICAgICAkcS5pY29uU2V0LnNldCA9IHNldE9iamVjdCA9PiB7XG4gICAgICAgIHRoaXMuc2V0KHNldE9iamVjdCwgc3NyQ29udGV4dClcbiAgICAgIH1cblxuICAgICAgJHEuaWNvblNldC5zZXQoaW5pdGlhbFNldClcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICBpZiAoJHEuY29uZmlnLmljb25NYXBGbiAhPT0gdm9pZCAwKSB7XG4gICAgICAgIHRoaXMuaWNvbk1hcEZuID0gJHEuY29uZmlnLmljb25NYXBGblxuICAgICAgfVxuXG4gICAgICAkcS5pY29uU2V0ID0gdGhpcy5fX2ljb25zXG5cbiAgICAgIGluamVjdFByb3AoJHEsICdpY29uTWFwRm4nLCAoKSA9PiB0aGlzLmljb25NYXBGbiwgdmFsID0+IHsgdGhpcy5pY29uTWFwRm4gPSB2YWwgfSlcblxuICAgICAgaWYgKHRoaXMuX19pbnN0YWxsZWQgPT09IHRydWUpIHtcbiAgICAgICAgaWNvblNldCAhPT0gdm9pZCAwICYmIHRoaXMuc2V0KGljb25TZXQpXG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgdGhpcy5zZXQoaWNvblNldCB8fCBtYXRlcmlhbEljb25zKVxuICAgICAgfVxuICAgIH1cbiAgfVxufSlcblxuZXhwb3J0IGRlZmF1bHQgUGx1Z2luXG4iLCJleHBvcnQgY29uc3QgcXVhc2FyS2V5ID0gJ19xXydcbmV4cG9ydCBjb25zdCB0aW1lbGluZUtleSA9ICdfcV90XydcbmV4cG9ydCBjb25zdCBzdGVwcGVyS2V5ID0gJ19xX3NfJ1xuZXhwb3J0IGNvbnN0IGxheW91dEtleSA9ICdfcV9sXydcbmV4cG9ydCBjb25zdCBwYWdlQ29udGFpbmVyS2V5ID0gJ19xX3BjXydcbmV4cG9ydCBjb25zdCBmYWJLZXkgPSAnX3FfZl8nXG5leHBvcnQgY29uc3QgZm9ybUtleSA9ICdfcV9mb18nXG5leHBvcnQgY29uc3QgdGFic0tleSA9ICdfcV90YWJzXydcbmV4cG9ydCBjb25zdCB1cGxvYWRlcktleSA9ICdfcV91XydcbiIsIlxuZXhwb3J0IGNvbnN0IGdsb2JhbENvbmZpZyA9IHt9XG5leHBvcnQgbGV0IGdsb2JhbENvbmZpZ0lzRnJvemVuID0gZmFsc2VcblxuZXhwb3J0IGZ1bmN0aW9uIGZyZWV6ZUdsb2JhbENvbmZpZyAoKSB7XG4gIGdsb2JhbENvbmZpZ0lzRnJvemVuID0gdHJ1ZVxufVxuIiwiY29uc3RcbiAgaGFzTWFwID0gdHlwZW9mIE1hcCA9PT0gJ2Z1bmN0aW9uJyxcbiAgaGFzU2V0ID0gdHlwZW9mIFNldCA9PT0gJ2Z1bmN0aW9uJyxcbiAgaGFzQXJyYXlCdWZmZXIgPSB0eXBlb2YgQXJyYXlCdWZmZXIgPT09ICdmdW5jdGlvbidcblxuZXhwb3J0IGZ1bmN0aW9uIGlzRGVlcEVxdWFsIChhLCBiKSB7XG4gIGlmIChhID09PSBiKSB7XG4gICAgcmV0dXJuIHRydWVcbiAgfVxuXG4gIGlmIChhICE9PSBudWxsICYmIGIgIT09IG51bGwgJiYgdHlwZW9mIGEgPT09ICdvYmplY3QnICYmIHR5cGVvZiBiID09PSAnb2JqZWN0Jykge1xuICAgIGlmIChhLmNvbnN0cnVjdG9yICE9PSBiLmNvbnN0cnVjdG9yKSB7XG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG5cbiAgICBsZXQgbGVuZ3RoLCBpXG5cbiAgICBpZiAoYS5jb25zdHJ1Y3RvciA9PT0gQXJyYXkpIHtcbiAgICAgIGxlbmd0aCA9IGEubGVuZ3RoXG5cbiAgICAgIGlmIChsZW5ndGggIT09IGIubGVuZ3RoKSB7XG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgfVxuXG4gICAgICBmb3IgKGkgPSBsZW5ndGg7IGktLSAhPT0gMDspIHtcbiAgICAgICAgaWYgKGlzRGVlcEVxdWFsKGFbIGkgXSwgYlsgaSBdKSAhPT0gdHJ1ZSkge1xuICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0cnVlXG4gICAgfVxuXG4gICAgaWYgKGhhc01hcCA9PT0gdHJ1ZSAmJiBhLmNvbnN0cnVjdG9yID09PSBNYXApIHtcbiAgICAgIGlmIChhLnNpemUgIT09IGIuc2l6ZSkge1xuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgIH1cblxuICAgICAgaSA9IGEuZW50cmllcygpLm5leHQoKVxuICAgICAgd2hpbGUgKGkuZG9uZSAhPT0gdHJ1ZSkge1xuICAgICAgICBpZiAoYi5oYXMoaS52YWx1ZVsgMCBdKSAhPT0gdHJ1ZSkge1xuICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICB9XG4gICAgICAgIGkgPSBpLm5leHQoKVxuICAgICAgfVxuXG4gICAgICBpID0gYS5lbnRyaWVzKCkubmV4dCgpXG4gICAgICB3aGlsZSAoaS5kb25lICE9PSB0cnVlKSB7XG4gICAgICAgIGlmIChpc0RlZXBFcXVhbChpLnZhbHVlWyAxIF0sIGIuZ2V0KGkudmFsdWVbIDAgXSkpICE9PSB0cnVlKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgIH1cbiAgICAgICAgaSA9IGkubmV4dCgpXG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0cnVlXG4gICAgfVxuXG4gICAgaWYgKGhhc1NldCA9PT0gdHJ1ZSAmJiBhLmNvbnN0cnVjdG9yID09PSBTZXQpIHtcbiAgICAgIGlmIChhLnNpemUgIT09IGIuc2l6ZSkge1xuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgIH1cblxuICAgICAgaSA9IGEuZW50cmllcygpLm5leHQoKVxuICAgICAgd2hpbGUgKGkuZG9uZSAhPT0gdHJ1ZSkge1xuICAgICAgICBpZiAoYi5oYXMoaS52YWx1ZVsgMCBdKSAhPT0gdHJ1ZSkge1xuICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICB9XG4gICAgICAgIGkgPSBpLm5leHQoKVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gdHJ1ZVxuICAgIH1cblxuICAgIGlmIChoYXNBcnJheUJ1ZmZlciA9PT0gdHJ1ZSAmJiBhLmJ1ZmZlciAhPSBudWxsICYmIGEuYnVmZmVyLmNvbnN0cnVjdG9yID09PSBBcnJheUJ1ZmZlcikge1xuICAgICAgbGVuZ3RoID0gYS5sZW5ndGhcblxuICAgICAgaWYgKGxlbmd0aCAhPT0gYi5sZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICB9XG5cbiAgICAgIGZvciAoaSA9IGxlbmd0aDsgaS0tICE9PSAwOykge1xuICAgICAgICBpZiAoYVsgaSBdICE9PSBiWyBpIF0pIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gdHJ1ZVxuICAgIH1cblxuICAgIGlmIChhLmNvbnN0cnVjdG9yID09PSBSZWdFeHApIHtcbiAgICAgIHJldHVybiBhLnNvdXJjZSA9PT0gYi5zb3VyY2UgJiYgYS5mbGFncyA9PT0gYi5mbGFnc1xuICAgIH1cblxuICAgIGlmIChhLnZhbHVlT2YgIT09IE9iamVjdC5wcm90b3R5cGUudmFsdWVPZikge1xuICAgICAgcmV0dXJuIGEudmFsdWVPZigpID09PSBiLnZhbHVlT2YoKVxuICAgIH1cblxuICAgIGlmIChhLnRvU3RyaW5nICE9PSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nKSB7XG4gICAgICByZXR1cm4gYS50b1N0cmluZygpID09PSBiLnRvU3RyaW5nKClcbiAgICB9XG5cbiAgICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXMoYSkuZmlsdGVyKGtleSA9PiBhWyBrZXkgXSAhPT0gdm9pZCAwKVxuICAgIGxlbmd0aCA9IGtleXMubGVuZ3RoXG5cbiAgICBpZiAobGVuZ3RoICE9PSBPYmplY3Qua2V5cyhiKS5maWx0ZXIoa2V5ID0+IGJbIGtleSBdICE9PSB2b2lkIDApLmxlbmd0aCkge1xuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuXG4gICAgZm9yIChpID0gbGVuZ3RoOyBpLS0gIT09IDA7KSB7XG4gICAgICBjb25zdCBrZXkgPSBrZXlzWyBpIF1cbiAgICAgIGlmIChpc0RlZXBFcXVhbChhWyBrZXkgXSwgYlsga2V5IF0pICE9PSB0cnVlKSB7XG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB0cnVlXG4gIH1cblxuICAvLyB0cnVlIGlmIGJvdGggTmFOLCBmYWxzZSBvdGhlcndpc2VcbiAgcmV0dXJuIGEgIT09IGEgJiYgYiAhPT0gYiAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXNlbGYtY29tcGFyZVxufVxuXG4vLyBub3QgcGVyZmVjdCwgYnV0IHdoYXQgd2UgQVJFIGludGVyZXN0ZWQgaXMgZm9yIEFycmF5cyBub3QgdG8gc2xpcCBpblxuLy8gYXMgc3ByZWFkIG9wZXJhdG9yIHdpbGwgbWVzcyB0aGluZ3MgdXAgaW4gdmFyaW91cyBhcmVhc1xuZXhwb3J0IGZ1bmN0aW9uIGlzT2JqZWN0ICh2KSB7XG4gIHJldHVybiB2ICE9PSBudWxsICYmIHR5cGVvZiB2ID09PSAnb2JqZWN0JyAmJiBBcnJheS5pc0FycmF5KHYpICE9PSB0cnVlXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc0RhdGUgKHYpIHtcbiAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh2KSA9PT0gJ1tvYmplY3QgRGF0ZV0nXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc1JlZ2V4cCAodikge1xuICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHYpID09PSAnW29iamVjdCBSZWdFeHBdJ1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNOdW1iZXIgKHYpIHtcbiAgcmV0dXJuIHR5cGVvZiB2ID09PSAnbnVtYmVyJyAmJiBpc0Zpbml0ZSh2KVxufVxuIiwiaW1wb3J0IHsgY3JlYXRlQXBwIH0gZnJvbSAndnVlJ1xuXG5pbXBvcnQgUGxhdGZvcm0sIHsgaXNSdW50aW1lU3NyUHJlSHlkcmF0aW9uIH0gZnJvbSAnLi9wbHVnaW5zL1BsYXRmb3JtLmpzJ1xuaW1wb3J0IFNjcmVlbiBmcm9tICcuL3BsdWdpbnMvU2NyZWVuLmpzJ1xuaW1wb3J0IERhcmsgZnJvbSAnLi9wbHVnaW5zL0RhcmsuanMnXG5pbXBvcnQgSGlzdG9yeSBmcm9tICcuL2hpc3RvcnkuanMnXG5pbXBvcnQgTGFuZyBmcm9tICcuL2xhbmcuanMnXG5pbXBvcnQgQm9keSBmcm9tICcuL2JvZHkuanMnXG5pbXBvcnQgSWNvblNldCBmcm9tICcuL2ljb24tc2V0LmpzJ1xuXG5pbXBvcnQgeyBxdWFzYXJLZXkgfSBmcm9tICcuL3V0aWxzL3ByaXZhdGUvc3ltYm9scy5qcydcbmltcG9ydCB7IGdsb2JhbENvbmZpZywgZ2xvYmFsQ29uZmlnSXNGcm96ZW4sIGZyZWV6ZUdsb2JhbENvbmZpZyB9IGZyb20gJy4vdXRpbHMvcHJpdmF0ZS9nbG9iYWwtY29uZmlnLmpzJ1xuaW1wb3J0IHsgaXNPYmplY3QgfSBmcm9tICcuL3V0aWxzL3ByaXZhdGUvaXMuanMnXG5cbmNvbnN0IGF1dG9JbnN0YWxsZWRQbHVnaW5zID0gW1xuICBQbGF0Zm9ybSxcbiAgQm9keSxcbiAgRGFyayxcbiAgU2NyZWVuLFxuICBIaXN0b3J5LFxuICBMYW5nLFxuICBJY29uU2V0XG5dXG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVDaGlsZEFwcCAoYXBwQ2ZnLCBwYXJlbnRBcHApIHtcbiAgY29uc3QgYXBwID0gY3JlYXRlQXBwKGFwcENmZylcblxuICBhcHAuY29uZmlnLmdsb2JhbFByb3BlcnRpZXMgPSBwYXJlbnRBcHAuY29uZmlnLmdsb2JhbFByb3BlcnRpZXNcblxuICBjb25zdCB7IHJlbG9hZCwgLi4uYXBwQ29udGV4dCB9ID0gcGFyZW50QXBwLl9jb250ZXh0XG4gIE9iamVjdC5hc3NpZ24oYXBwLl9jb250ZXh0LCBhcHBDb250ZXh0KVxuXG4gIHJldHVybiBhcHBcbn1cblxuZnVuY3Rpb24gaW5zdGFsbFBsdWdpbnMgKHBsdWdpbk9wdHMsIHBsdWdpbkxpc3QpIHtcbiAgcGx1Z2luTGlzdC5mb3JFYWNoKFBsdWdpbiA9PiB7XG4gICAgUGx1Z2luLmluc3RhbGwocGx1Z2luT3B0cylcbiAgICBQbHVnaW4uX19pbnN0YWxsZWQgPSB0cnVlXG4gIH0pXG59XG5cbmZ1bmN0aW9uIHByZXBhcmVBcHAgKGFwcCwgdWlPcHRzLCBwbHVnaW5PcHRzKSB7XG4gIGFwcC5jb25maWcuZ2xvYmFsUHJvcGVydGllcy4kcSA9IHBsdWdpbk9wdHMuJHFcbiAgYXBwLnByb3ZpZGUocXVhc2FyS2V5LCBwbHVnaW5PcHRzLiRxKVxuXG4gIGluc3RhbGxQbHVnaW5zKHBsdWdpbk9wdHMsIGF1dG9JbnN0YWxsZWRQbHVnaW5zKVxuXG4gIHVpT3B0cy5jb21wb25lbnRzICE9PSB2b2lkIDAgJiYgT2JqZWN0LnZhbHVlcyh1aU9wdHMuY29tcG9uZW50cykuZm9yRWFjaChjID0+IHtcbiAgICBpZiAoaXNPYmplY3QoYykgPT09IHRydWUgJiYgYy5uYW1lICE9PSB2b2lkIDApIHtcbiAgICAgIGFwcC5jb21wb25lbnQoYy5uYW1lLCBjKVxuICAgIH1cbiAgfSlcblxuICB1aU9wdHMuZGlyZWN0aXZlcyAhPT0gdm9pZCAwICYmIE9iamVjdC52YWx1ZXModWlPcHRzLmRpcmVjdGl2ZXMpLmZvckVhY2goZCA9PiB7XG4gICAgaWYgKGlzT2JqZWN0KGQpID09PSB0cnVlICYmIGQubmFtZSAhPT0gdm9pZCAwKSB7XG4gICAgICBhcHAuZGlyZWN0aXZlKGQubmFtZSwgZClcbiAgICB9XG4gIH0pXG5cbiAgdWlPcHRzLnBsdWdpbnMgIT09IHZvaWQgMCAmJiBpbnN0YWxsUGx1Z2lucyhcbiAgICBwbHVnaW5PcHRzLFxuICAgIE9iamVjdC52YWx1ZXModWlPcHRzLnBsdWdpbnMpLmZpbHRlcihcbiAgICAgIHAgPT4gdHlwZW9mIHAuaW5zdGFsbCA9PT0gJ2Z1bmN0aW9uJyAmJiBhdXRvSW5zdGFsbGVkUGx1Z2lucy5pbmNsdWRlcyhwKSA9PT0gZmFsc2VcbiAgICApXG4gIClcblxuICBpZiAoaXNSdW50aW1lU3NyUHJlSHlkcmF0aW9uLnZhbHVlID09PSB0cnVlKSB7XG4gICAgcGx1Z2luT3B0cy4kcS5vblNTUkh5ZHJhdGVkID0gKCkgPT4ge1xuICAgICAgcGx1Z2luT3B0cy5vblNTUkh5ZHJhdGVkLmZvckVhY2goZm4gPT4geyBmbigpIH0pXG4gICAgICBwbHVnaW5PcHRzLiRxLm9uU1NSSHlkcmF0ZWQgPSAoKSA9PiB7fVxuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBfX1FVQVNBUl9TU1JfU0VSVkVSX19cbiAgPyBmdW5jdGlvbiAocGFyZW50QXBwLCBvcHRzID0ge30sIHNzckNvbnRleHQpIHtcbiAgICBjb25zdCAkcSA9IHtcbiAgICAgIHZlcnNpb246IF9fUVVBU0FSX1ZFUlNJT05fXyxcbiAgICAgIGNvbmZpZzogb3B0cy5jb25maWcgfHwge31cbiAgICB9XG5cbiAgICBPYmplY3QuYXNzaWduKHNzckNvbnRleHQsIHtcbiAgICAgICRxLFxuICAgICAgX21ldGE6IHtcbiAgICAgICAgaHRtbEF0dHJzOiAnJyxcbiAgICAgICAgaGVhZFRhZ3M6ICcnLFxuICAgICAgICBlbmRpbmdIZWFkVGFnczogJycsXG4gICAgICAgIGJvZHlDbGFzc2VzOiAnJyxcbiAgICAgICAgYm9keUF0dHJzOiAnZGF0YS1zZXJ2ZXItcmVuZGVyZWQnLFxuICAgICAgICBib2R5VGFnczogJydcbiAgICAgIH1cbiAgICB9KVxuXG4gICAgaWYgKHNzckNvbnRleHQuX21vZHVsZXMgPT09IHZvaWQgMCkge1xuICAgICAgLy8gbm90IE9LLiBtZWFucyB0aGUgU1NSIGJ1aWxkIGlzIG5vdCB1c2luZyBAcXVhc2FyL3Nzci1oZWxwZXJzLFxuICAgICAgLy8gYnV0IHdlIHNob3VsZG4ndCBjcmFzaCB0aGUgYXBwXG4gICAgICBzc3JDb250ZXh0Ll9tb2R1bGVzID0gW11cbiAgICB9XG5cbiAgICBpZiAoc3NyQ29udGV4dC5vblJlbmRlcmVkID09PSB2b2lkIDApIHtcbiAgICAgIC8vIG5vdCBPSy4gbWVhbnMgdGhlIFNTUiBidWlsZCBpcyBub3QgdXNpbmcgQHF1YXNhci9zc3ItaGVscGVycyxcbiAgICAgIC8vIGJ1dCB3ZSBzaG91bGRuJ3QgY3Jhc2ggdGhlIGFwcFxuICAgICAgc3NyQ29udGV4dC5vblJlbmRlcmVkID0gKCkgPT4ge31cbiAgICB9XG5cbiAgICBwYXJlbnRBcHAuY29uZmlnLmdsb2JhbFByb3BlcnRpZXMuc3NyQ29udGV4dCA9IHNzckNvbnRleHRcblxuICAgIHByZXBhcmVBcHAocGFyZW50QXBwLCBvcHRzLCB7XG4gICAgICBwYXJlbnRBcHAsXG4gICAgICAkcSxcbiAgICAgIGxhbmc6IG9wdHMubGFuZyxcbiAgICAgIGljb25TZXQ6IG9wdHMuaWNvblNldCxcbiAgICAgIHNzckNvbnRleHRcbiAgICB9KVxuICB9XG4gIDogZnVuY3Rpb24gKHBhcmVudEFwcCwgb3B0cyA9IHt9KSB7XG4gICAgY29uc3QgJHEgPSB7IHZlcnNpb246IF9fUVVBU0FSX1ZFUlNJT05fXyB9XG5cbiAgICBpZiAoZ2xvYmFsQ29uZmlnSXNGcm96ZW4gPT09IGZhbHNlKSB7XG4gICAgICBpZiAob3B0cy5jb25maWcgIT09IHZvaWQgMCkge1xuICAgICAgICBPYmplY3QuYXNzaWduKGdsb2JhbENvbmZpZywgb3B0cy5jb25maWcpXG4gICAgICB9XG5cbiAgICAgICRxLmNvbmZpZyA9IHsgLi4uZ2xvYmFsQ29uZmlnIH1cbiAgICAgIGZyZWV6ZUdsb2JhbENvbmZpZygpXG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgJHEuY29uZmlnID0gb3B0cy5jb25maWcgfHwge31cbiAgICB9XG5cbiAgICBwcmVwYXJlQXBwKHBhcmVudEFwcCwgb3B0cywge1xuICAgICAgcGFyZW50QXBwLFxuICAgICAgJHEsXG4gICAgICBsYW5nOiBvcHRzLmxhbmcsXG4gICAgICBpY29uU2V0OiBvcHRzLmljb25TZXQsXG4gICAgICBvblNTUkh5ZHJhdGVkOiBbXVxuICAgIH0pXG4gIH1cbiIsImltcG9ydCBpbnN0YWxsUXVhc2FyIGZyb20gJy4vaW5zdGFsbC1xdWFzYXIuanMnXG5pbXBvcnQgbGFuZyBmcm9tICcuL2xhbmcuanMnXG5pbXBvcnQgaWNvblNldCBmcm9tICcuL2ljb24tc2V0LmpzJ1xuXG5leHBvcnQgZGVmYXVsdCB7XG4gIHZlcnNpb246IF9fUVVBU0FSX1ZFUlNJT05fXyxcbiAgaW5zdGFsbDogaW5zdGFsbFF1YXNhcixcbiAgbGFuZyxcbiAgaWNvblNldFxufVxuIiwiXG5leHBvcnQgZGVmYXVsdCAoc2ZjLCBwcm9wcykgPT4ge1xuICBjb25zdCB0YXJnZXQgPSBzZmMuX192Y2NPcHRzIHx8IHNmYztcbiAgZm9yIChjb25zdCBba2V5LCB2YWxdIG9mIHByb3BzKSB7XG4gICAgdGFyZ2V0W2tleV0gPSB2YWw7XG4gIH1cbiAgcmV0dXJuIHRhcmdldDtcbn1cbiIsIjx0ZW1wbGF0ZT5cbiAgPHJvdXRlci12aWV3IC8+XG48L3RlbXBsYXRlPlxuXG48c2NyaXB0PlxuaW1wb3J0IHsgZGVmaW5lQ29tcG9uZW50IH0gZnJvbSAndnVlJ1xuXG5leHBvcnQgZGVmYXVsdCBkZWZpbmVDb21wb25lbnQoe1xuICBuYW1lOiAnQXBwJ1xufSlcbjwvc2NyaXB0PlxuIiwiLy8gRnVuY3Rpb25zIGluIHRoaXMgZmlsZSBhcmUgbm8tb3AsXG4vLyAgdGhleSBqdXN0IHRha2UgYSBjYWxsYmFjayBmdW5jdGlvbiBhbmQgcmV0dXJuIGl0XG4vLyBUaGV5J3JlIHVzZWQgdG8gYXBwbHkgdHlwaW5ncyB0byB0aGUgY2FsbGJhY2tcbi8vICBwYXJhbWV0ZXJzIGFuZCByZXR1cm4gdmFsdWUgd2hlbiB1c2luZyBRdWFzYXIgd2l0aCBUeXBlU2NyaXB0XG4vLyBXZSBuZWVkIHRoZXNlIGluIGB1aWAgZm9sZGVyIHRvIG1ha2UgYHF1YXNhci93cmFwcGVyYCBpbXBvcnQgd29yayxcbi8vICBidXQgdGhleSBhcmUgdXNlZnVsIG9ubHkgZm9yIFF1YXNhciBDTEkgcHJvamVjdHNcbi8vIFRoZXkgYXJlIHR5cGVkIHZpYSBtb2R1bGUgYXVnbWVudGF0aW9uIGJ5IGBAcXVhc2FyL2FwcC13ZWJwYWNrYCAvIGBAcXVhc2FyL2FwcC12aXRlYFxuXG5leHBvcnQgZnVuY3Rpb24gYm9vdCAoY2FsbGJhY2spIHtcbiAgcmV0dXJuIGNhbGxiYWNrXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjb25maWd1cmUgKGNhbGxiYWNrKSB7XG4gIHJldHVybiBjYWxsYmFja1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcHJlRmV0Y2ggKGNhbGxiYWNrKSB7XG4gIHJldHVybiBjYWxsYmFja1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcm91dGUgKGNhbGxiYWNrKSB7XG4gIHJldHVybiBjYWxsYmFja1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc3RvcmUgKGNhbGxiYWNrKSB7XG4gIHJldHVybiBjYWxsYmFja1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc3NyTWlkZGxld2FyZSAoY2FsbGJhY2spIHtcbiAgcmV0dXJuIGNhbGxiYWNrXG59XG5cbi8qKlxuICogQmVsb3cgb25seSBmb3IgQHF1YXNhci9hcHAtd2VicGFja1xuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBzc3JQcm9kdWN0aW9uRXhwb3J0IChjYWxsYmFjaykge1xuICByZXR1cm4gY2FsbGJhY2tcbn1cblxuLyoqXG4gKiBCZWxvdyBvbmx5IGZvciBAcXVhc2FyL2FwcC12aXRlXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHNzckNyZWF0ZSAoY2FsbGJhY2spIHtcbiAgcmV0dXJuIGNhbGxiYWNrXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzc3JMaXN0ZW4gKGNhbGxiYWNrKSB7XG4gIHJldHVybiBjYWxsYmFja1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc3NyQ2xvc2UgKGNhbGxiYWNrKSB7XG4gIHJldHVybiBjYWxsYmFja1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc3NyU2VydmVTdGF0aWNDb250ZW50IChjYWxsYmFjaykge1xuICByZXR1cm4gY2FsbGJhY2tcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNzclJlbmRlclByZWxvYWRUYWcgKGNhbGxiYWNrKSB7XG4gIHJldHVybiBjYWxsYmFja1xufVxuIiwiaW1wb3J0ICogYXMgVnVlIGZyb20gJ3Z1ZSdcblxudmFyIGlzVnVlMiA9IGZhbHNlXG52YXIgaXNWdWUzID0gdHJ1ZVxudmFyIFZ1ZTIgPSB1bmRlZmluZWRcblxuZnVuY3Rpb24gaW5zdGFsbCgpIHt9XG5cbmV4cG9ydCBmdW5jdGlvbiBzZXQodGFyZ2V0LCBrZXksIHZhbCkge1xuICBpZiAoQXJyYXkuaXNBcnJheSh0YXJnZXQpKSB7XG4gICAgdGFyZ2V0Lmxlbmd0aCA9IE1hdGgubWF4KHRhcmdldC5sZW5ndGgsIGtleSlcbiAgICB0YXJnZXQuc3BsaWNlKGtleSwgMSwgdmFsKVxuICAgIHJldHVybiB2YWxcbiAgfVxuICB0YXJnZXRba2V5XSA9IHZhbFxuICByZXR1cm4gdmFsXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkZWwodGFyZ2V0LCBrZXkpIHtcbiAgaWYgKEFycmF5LmlzQXJyYXkodGFyZ2V0KSkge1xuICAgIHRhcmdldC5zcGxpY2Uoa2V5LCAxKVxuICAgIHJldHVyblxuICB9XG4gIGRlbGV0ZSB0YXJnZXRba2V5XVxufVxuXG5leHBvcnQgKiBmcm9tICd2dWUnXG5leHBvcnQge1xuICBWdWUsXG4gIFZ1ZTIsXG4gIGlzVnVlMixcbiAgaXNWdWUzLFxuICBpbnN0YWxsLFxufVxuIiwiLyohXG4gICogcGluaWEgdjIuMC4xM1xuICAqIChjKSAyMDIyIEVkdWFyZG8gU2FuIE1hcnRpbiBNb3JvdGVcbiAgKiBAbGljZW5zZSBNSVRcbiAgKi9cbmltcG9ydCB7IGdldEN1cnJlbnRJbnN0YW5jZSwgaW5qZWN0LCB0b1Jhdywgd2F0Y2gsIHVucmVmLCBtYXJrUmF3LCBlZmZlY3RTY29wZSwgcmVmLCBpc1Z1ZTIsIGlzUmVmLCBpc1JlYWN0aXZlLCBzZXQsIG9uVW5tb3VudGVkLCByZWFjdGl2ZSwgdG9SZWYsIGRlbCwgbmV4dFRpY2ssIGNvbXB1dGVkLCB0b1JlZnMgfSBmcm9tICd2dWUtZGVtaSc7XG5pbXBvcnQgeyBzZXR1cERldnRvb2xzUGx1Z2luIH0gZnJvbSAnQHZ1ZS9kZXZ0b29scy1hcGknO1xuXG4vKipcclxuICogc2V0QWN0aXZlUGluaWEgbXVzdCBiZSBjYWxsZWQgdG8gaGFuZGxlIFNTUiBhdCB0aGUgdG9wIG9mIGZ1bmN0aW9ucyBsaWtlXHJcbiAqIGBmZXRjaGAsIGBzZXR1cGAsIGBzZXJ2ZXJQcmVmZXRjaGAgYW5kIG90aGVyc1xyXG4gKi9cclxubGV0IGFjdGl2ZVBpbmlhO1xyXG4vKipcclxuICogU2V0cyBvciB1bnNldHMgdGhlIGFjdGl2ZSBwaW5pYS4gVXNlZCBpbiBTU1IgYW5kIGludGVybmFsbHkgd2hlbiBjYWxsaW5nXHJcbiAqIGFjdGlvbnMgYW5kIGdldHRlcnNcclxuICpcclxuICogQHBhcmFtIHBpbmlhIC0gUGluaWEgaW5zdGFuY2VcclxuICovXHJcbmNvbnN0IHNldEFjdGl2ZVBpbmlhID0gKHBpbmlhKSA9PiAoYWN0aXZlUGluaWEgPSBwaW5pYSk7XHJcbi8qKlxyXG4gKiBHZXQgdGhlIGN1cnJlbnRseSBhY3RpdmUgcGluaWEgaWYgdGhlcmUgaXMgYW55LlxyXG4gKi9cclxuY29uc3QgZ2V0QWN0aXZlUGluaWEgPSAoKSA9PiAoZ2V0Q3VycmVudEluc3RhbmNlKCkgJiYgaW5qZWN0KHBpbmlhU3ltYm9sKSkgfHwgYWN0aXZlUGluaWE7XHJcbmNvbnN0IHBpbmlhU3ltYm9sID0gKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSA/IFN5bWJvbCgncGluaWEnKSA6IC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovIFN5bWJvbCgpKTtcblxuZnVuY3Rpb24gaXNQbGFpbk9iamVjdChcclxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcclxubykge1xyXG4gICAgcmV0dXJuIChvICYmXHJcbiAgICAgICAgdHlwZW9mIG8gPT09ICdvYmplY3QnICYmXHJcbiAgICAgICAgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG8pID09PSAnW29iamVjdCBPYmplY3RdJyAmJlxyXG4gICAgICAgIHR5cGVvZiBvLnRvSlNPTiAhPT0gJ2Z1bmN0aW9uJyk7XHJcbn1cclxuLy8gdHlwZSBEZWVwUmVhZG9ubHk8VD4gPSB7IHJlYWRvbmx5IFtQIGluIGtleW9mIFRdOiBEZWVwUmVhZG9ubHk8VFtQXT4gfVxyXG4vLyBUT0RPOiBjYW4gd2UgY2hhbmdlIHRoZXNlIHRvIG51bWJlcnM/XHJcbi8qKlxyXG4gKiBQb3NzaWJsZSB0eXBlcyBmb3IgU3Vic2NyaXB0aW9uQ2FsbGJhY2tcclxuICovXHJcbnZhciBNdXRhdGlvblR5cGU7XHJcbihmdW5jdGlvbiAoTXV0YXRpb25UeXBlKSB7XHJcbiAgICAvKipcclxuICAgICAqIERpcmVjdCBtdXRhdGlvbiBvZiB0aGUgc3RhdGU6XHJcbiAgICAgKlxyXG4gICAgICogLSBgc3RvcmUubmFtZSA9ICduZXcgbmFtZSdgXHJcbiAgICAgKiAtIGBzdG9yZS4kc3RhdGUubmFtZSA9ICduZXcgbmFtZSdgXHJcbiAgICAgKiAtIGBzdG9yZS5saXN0LnB1c2goJ25ldyBpdGVtJylgXHJcbiAgICAgKi9cclxuICAgIE11dGF0aW9uVHlwZVtcImRpcmVjdFwiXSA9IFwiZGlyZWN0XCI7XHJcbiAgICAvKipcclxuICAgICAqIE11dGF0ZWQgdGhlIHN0YXRlIHdpdGggYCRwYXRjaGAgYW5kIGFuIG9iamVjdFxyXG4gICAgICpcclxuICAgICAqIC0gYHN0b3JlLiRwYXRjaCh7IG5hbWU6ICduZXdOYW1lJyB9KWBcclxuICAgICAqL1xyXG4gICAgTXV0YXRpb25UeXBlW1wicGF0Y2hPYmplY3RcIl0gPSBcInBhdGNoIG9iamVjdFwiO1xyXG4gICAgLyoqXHJcbiAgICAgKiBNdXRhdGVkIHRoZSBzdGF0ZSB3aXRoIGAkcGF0Y2hgIGFuZCBhIGZ1bmN0aW9uXHJcbiAgICAgKlxyXG4gICAgICogLSBgc3RvcmUuJHBhdGNoKHN0YXRlID0+IHN0YXRlLm5hbWUgPSAnbmV3TmFtZScpYFxyXG4gICAgICovXHJcbiAgICBNdXRhdGlvblR5cGVbXCJwYXRjaEZ1bmN0aW9uXCJdID0gXCJwYXRjaCBmdW5jdGlvblwiO1xyXG4gICAgLy8gbWF5YmUgcmVzZXQ/IGZvciAkc3RhdGUgPSB7fSBhbmQgJHJlc2V0XHJcbn0pKE11dGF0aW9uVHlwZSB8fCAoTXV0YXRpb25UeXBlID0ge30pKTtcblxuY29uc3QgSVNfQ0xJRU5UID0gdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCc7XG5cbi8qXHJcbiAqIEZpbGVTYXZlci5qcyBBIHNhdmVBcygpIEZpbGVTYXZlciBpbXBsZW1lbnRhdGlvbi5cclxuICpcclxuICogT3JpZ2luYWxseSBieSBFbGkgR3JleSwgYWRhcHRlZCBhcyBhbiBFU00gbW9kdWxlIGJ5IEVkdWFyZG8gU2FuIE1hcnRpblxyXG4gKiBNb3JvdGUuXHJcbiAqXHJcbiAqIExpY2Vuc2UgOiBNSVRcclxuICovXHJcbi8vIFRoZSBvbmUgYW5kIG9ubHkgd2F5IG9mIGdldHRpbmcgZ2xvYmFsIHNjb3BlIGluIGFsbCBlbnZpcm9ubWVudHNcclxuLy8gaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xLzMyNzcxODIvMTAwODk5OVxyXG5jb25zdCBfZ2xvYmFsID0gLyojX19QVVJFX18qLyAoKCkgPT4gdHlwZW9mIHdpbmRvdyA9PT0gJ29iamVjdCcgJiYgd2luZG93LndpbmRvdyA9PT0gd2luZG93XHJcbiAgICA/IHdpbmRvd1xyXG4gICAgOiB0eXBlb2Ygc2VsZiA9PT0gJ29iamVjdCcgJiYgc2VsZi5zZWxmID09PSBzZWxmXHJcbiAgICAgICAgPyBzZWxmXHJcbiAgICAgICAgOiB0eXBlb2YgZ2xvYmFsID09PSAnb2JqZWN0JyAmJiBnbG9iYWwuZ2xvYmFsID09PSBnbG9iYWxcclxuICAgICAgICAgICAgPyBnbG9iYWxcclxuICAgICAgICAgICAgOiB0eXBlb2YgZ2xvYmFsVGhpcyA9PT0gJ29iamVjdCdcclxuICAgICAgICAgICAgICAgID8gZ2xvYmFsVGhpc1xyXG4gICAgICAgICAgICAgICAgOiB7IEhUTUxFbGVtZW50OiBudWxsIH0pKCk7XHJcbmZ1bmN0aW9uIGJvbShibG9iLCB7IGF1dG9Cb20gPSBmYWxzZSB9ID0ge30pIHtcclxuICAgIC8vIHByZXBlbmQgQk9NIGZvciBVVEYtOCBYTUwgYW5kIHRleHQvKiB0eXBlcyAoaW5jbHVkaW5nIEhUTUwpXHJcbiAgICAvLyBub3RlOiB5b3VyIGJyb3dzZXIgd2lsbCBhdXRvbWF0aWNhbGx5IGNvbnZlcnQgVVRGLTE2IFUrRkVGRiB0byBFRiBCQiBCRlxyXG4gICAgaWYgKGF1dG9Cb20gJiZcclxuICAgICAgICAvXlxccyooPzp0ZXh0XFwvXFxTKnxhcHBsaWNhdGlvblxcL3htbHxcXFMqXFwvXFxTKlxcK3htbClcXHMqOy4qY2hhcnNldFxccyo9XFxzKnV0Zi04L2kudGVzdChibG9iLnR5cGUpKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBCbG9iKFtTdHJpbmcuZnJvbUNoYXJDb2RlKDB4ZmVmZiksIGJsb2JdLCB7IHR5cGU6IGJsb2IudHlwZSB9KTtcclxuICAgIH1cclxuICAgIHJldHVybiBibG9iO1xyXG59XHJcbmZ1bmN0aW9uIGRvd25sb2FkKHVybCwgbmFtZSwgb3B0cykge1xyXG4gICAgY29uc3QgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XHJcbiAgICB4aHIub3BlbignR0VUJywgdXJsKTtcclxuICAgIHhoci5yZXNwb25zZVR5cGUgPSAnYmxvYic7XHJcbiAgICB4aHIub25sb2FkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHNhdmVBcyh4aHIucmVzcG9uc2UsIG5hbWUsIG9wdHMpO1xyXG4gICAgfTtcclxuICAgIHhoci5vbmVycm9yID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ2NvdWxkIG5vdCBkb3dubG9hZCBmaWxlJyk7XHJcbiAgICB9O1xyXG4gICAgeGhyLnNlbmQoKTtcclxufVxyXG5mdW5jdGlvbiBjb3JzRW5hYmxlZCh1cmwpIHtcclxuICAgIGNvbnN0IHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xyXG4gICAgLy8gdXNlIHN5bmMgdG8gYXZvaWQgcG9wdXAgYmxvY2tlclxyXG4gICAgeGhyLm9wZW4oJ0hFQUQnLCB1cmwsIGZhbHNlKTtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgeGhyLnNlbmQoKTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlKSB7IH1cclxuICAgIHJldHVybiB4aHIuc3RhdHVzID49IDIwMCAmJiB4aHIuc3RhdHVzIDw9IDI5OTtcclxufVxyXG4vLyBgYS5jbGljaygpYCBkb2Vzbid0IHdvcmsgZm9yIGFsbCBicm93c2VycyAoIzQ2NSlcclxuZnVuY3Rpb24gY2xpY2sobm9kZSkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBub2RlLmRpc3BhdGNoRXZlbnQobmV3IE1vdXNlRXZlbnQoJ2NsaWNrJykpO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICBjb25zdCBldnQgPSBkb2N1bWVudC5jcmVhdGVFdmVudCgnTW91c2VFdmVudHMnKTtcclxuICAgICAgICBldnQuaW5pdE1vdXNlRXZlbnQoJ2NsaWNrJywgdHJ1ZSwgdHJ1ZSwgd2luZG93LCAwLCAwLCAwLCA4MCwgMjAsIGZhbHNlLCBmYWxzZSwgZmFsc2UsIGZhbHNlLCAwLCBudWxsKTtcclxuICAgICAgICBub2RlLmRpc3BhdGNoRXZlbnQoZXZ0KTtcclxuICAgIH1cclxufVxyXG5jb25zdCBfbmF2aWdhdG9yID0gXHJcbiB0eXBlb2YgbmF2aWdhdG9yID09PSAnb2JqZWN0JyA/IG5hdmlnYXRvciA6IHsgdXNlckFnZW50OiAnJyB9O1xyXG4vLyBEZXRlY3QgV2ViVmlldyBpbnNpZGUgYSBuYXRpdmUgbWFjT1MgYXBwIGJ5IHJ1bGluZyBvdXQgYWxsIGJyb3dzZXJzXHJcbi8vIFdlIGp1c3QgbmVlZCB0byBjaGVjayBmb3IgJ1NhZmFyaScgYmVjYXVzZSBhbGwgb3RoZXIgYnJvd3NlcnMgKGJlc2lkZXMgRmlyZWZveCkgaW5jbHVkZSB0aGF0IHRvb1xyXG4vLyBodHRwczovL3d3dy53aGF0aXNteWJyb3dzZXIuY29tL2d1aWRlcy90aGUtbGF0ZXN0LXVzZXItYWdlbnQvbWFjb3NcclxuY29uc3QgaXNNYWNPU1dlYlZpZXcgPSAvKiNfX1BVUkVfXyovICgoKSA9PiAvTWFjaW50b3NoLy50ZXN0KF9uYXZpZ2F0b3IudXNlckFnZW50KSAmJlxyXG4gICAgL0FwcGxlV2ViS2l0Ly50ZXN0KF9uYXZpZ2F0b3IudXNlckFnZW50KSAmJlxyXG4gICAgIS9TYWZhcmkvLnRlc3QoX25hdmlnYXRvci51c2VyQWdlbnQpKSgpO1xyXG5jb25zdCBzYXZlQXMgPSAhSVNfQ0xJRU5UXHJcbiAgICA/ICgpID0+IHsgfSAvLyBub29wXHJcbiAgICA6IC8vIFVzZSBkb3dubG9hZCBhdHRyaWJ1dGUgZmlyc3QgaWYgcG9zc2libGUgKCMxOTMgTHVtaWEgbW9iaWxlKSB1bmxlc3MgdGhpcyBpcyBhIG1hY09TIFdlYlZpZXcgb3IgbWluaSBwcm9ncmFtXHJcbiAgICAgICAgdHlwZW9mIEhUTUxBbmNob3JFbGVtZW50ICE9PSAndW5kZWZpbmVkJyAmJlxyXG4gICAgICAgICAgICAnZG93bmxvYWQnIGluIEhUTUxBbmNob3JFbGVtZW50LnByb3RvdHlwZSAmJlxyXG4gICAgICAgICAgICAhaXNNYWNPU1dlYlZpZXdcclxuICAgICAgICAgICAgPyBkb3dubG9hZFNhdmVBc1xyXG4gICAgICAgICAgICA6IC8vIFVzZSBtc1NhdmVPck9wZW5CbG9iIGFzIGEgc2Vjb25kIGFwcHJvYWNoXHJcbiAgICAgICAgICAgICAgICAnbXNTYXZlT3JPcGVuQmxvYicgaW4gX25hdmlnYXRvclxyXG4gICAgICAgICAgICAgICAgICAgID8gbXNTYXZlQXNcclxuICAgICAgICAgICAgICAgICAgICA6IC8vIEZhbGxiYWNrIHRvIHVzaW5nIEZpbGVSZWFkZXIgYW5kIGEgcG9wdXBcclxuICAgICAgICAgICAgICAgICAgICAgICAgZmlsZVNhdmVyU2F2ZUFzO1xyXG5mdW5jdGlvbiBkb3dubG9hZFNhdmVBcyhibG9iLCBuYW1lID0gJ2Rvd25sb2FkJywgb3B0cykge1xyXG4gICAgY29uc3QgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTtcclxuICAgIGEuZG93bmxvYWQgPSBuYW1lO1xyXG4gICAgYS5yZWwgPSAnbm9vcGVuZXInOyAvLyB0YWJuYWJiaW5nXHJcbiAgICAvLyBUT0RPOiBkZXRlY3QgY2hyb21lIGV4dGVuc2lvbnMgJiBwYWNrYWdlZCBhcHBzXHJcbiAgICAvLyBhLnRhcmdldCA9ICdfYmxhbmsnXHJcbiAgICBpZiAodHlwZW9mIGJsb2IgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgLy8gU3VwcG9ydCByZWd1bGFyIGxpbmtzXHJcbiAgICAgICAgYS5ocmVmID0gYmxvYjtcclxuICAgICAgICBpZiAoYS5vcmlnaW4gIT09IGxvY2F0aW9uLm9yaWdpbikge1xyXG4gICAgICAgICAgICBpZiAoY29yc0VuYWJsZWQoYS5ocmVmKSkge1xyXG4gICAgICAgICAgICAgICAgZG93bmxvYWQoYmxvYiwgbmFtZSwgb3B0cyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBhLnRhcmdldCA9ICdfYmxhbmsnO1xyXG4gICAgICAgICAgICAgICAgY2xpY2soYSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGNsaWNrKGEpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIC8vIFN1cHBvcnQgYmxvYnNcclxuICAgICAgICBhLmhyZWYgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpO1xyXG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBVUkwucmV2b2tlT2JqZWN0VVJMKGEuaHJlZik7XHJcbiAgICAgICAgfSwgNGU0KTsgLy8gNDBzXHJcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGNsaWNrKGEpO1xyXG4gICAgICAgIH0sIDApO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIG1zU2F2ZUFzKGJsb2IsIG5hbWUgPSAnZG93bmxvYWQnLCBvcHRzKSB7XHJcbiAgICBpZiAodHlwZW9mIGJsb2IgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgaWYgKGNvcnNFbmFibGVkKGJsb2IpKSB7XHJcbiAgICAgICAgICAgIGRvd25sb2FkKGJsb2IsIG5hbWUsIG9wdHMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgY29uc3QgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTtcclxuICAgICAgICAgICAgYS5ocmVmID0gYmxvYjtcclxuICAgICAgICAgICAgYS50YXJnZXQgPSAnX2JsYW5rJztcclxuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBjbGljayhhKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgLy8gQHRzLWlnbm9yZTogd29ya3Mgb24gd2luZG93c1xyXG4gICAgICAgIG5hdmlnYXRvci5tc1NhdmVPck9wZW5CbG9iKGJvbShibG9iLCBvcHRzKSwgbmFtZSk7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gZmlsZVNhdmVyU2F2ZUFzKGJsb2IsIG5hbWUsIG9wdHMsIHBvcHVwKSB7XHJcbiAgICAvLyBPcGVuIGEgcG9wdXAgaW1tZWRpYXRlbHkgZG8gZ28gYXJvdW5kIHBvcHVwIGJsb2NrZXJcclxuICAgIC8vIE1vc3RseSBvbmx5IGF2YWlsYWJsZSBvbiB1c2VyIGludGVyYWN0aW9uIGFuZCB0aGUgZmlsZVJlYWRlciBpcyBhc3luYyBzby4uLlxyXG4gICAgcG9wdXAgPSBwb3B1cCB8fCBvcGVuKCcnLCAnX2JsYW5rJyk7XHJcbiAgICBpZiAocG9wdXApIHtcclxuICAgICAgICBwb3B1cC5kb2N1bWVudC50aXRsZSA9IHBvcHVwLmRvY3VtZW50LmJvZHkuaW5uZXJUZXh0ID0gJ2Rvd25sb2FkaW5nLi4uJztcclxuICAgIH1cclxuICAgIGlmICh0eXBlb2YgYmxvYiA9PT0gJ3N0cmluZycpXHJcbiAgICAgICAgcmV0dXJuIGRvd25sb2FkKGJsb2IsIG5hbWUsIG9wdHMpO1xyXG4gICAgY29uc3QgZm9yY2UgPSBibG9iLnR5cGUgPT09ICdhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW0nO1xyXG4gICAgY29uc3QgaXNTYWZhcmkgPSAvY29uc3RydWN0b3IvaS50ZXN0KFN0cmluZyhfZ2xvYmFsLkhUTUxFbGVtZW50KSkgfHwgJ3NhZmFyaScgaW4gX2dsb2JhbDtcclxuICAgIGNvbnN0IGlzQ2hyb21lSU9TID0gL0NyaU9TXFwvW1xcZF0rLy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpO1xyXG4gICAgaWYgKChpc0Nocm9tZUlPUyB8fCAoZm9yY2UgJiYgaXNTYWZhcmkpIHx8IGlzTWFjT1NXZWJWaWV3KSAmJlxyXG4gICAgICAgIHR5cGVvZiBGaWxlUmVhZGVyICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgIC8vIFNhZmFyaSBkb2Vzbid0IGFsbG93IGRvd25sb2FkaW5nIG9mIGJsb2IgVVJMc1xyXG4gICAgICAgIGNvbnN0IHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7XHJcbiAgICAgICAgcmVhZGVyLm9ubG9hZGVuZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgbGV0IHVybCA9IHJlYWRlci5yZXN1bHQ7XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgdXJsICE9PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICAgICAgcG9wdXAgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdXcm9uZyByZWFkZXIucmVzdWx0IHR5cGUnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB1cmwgPSBpc0Nocm9tZUlPU1xyXG4gICAgICAgICAgICAgICAgPyB1cmxcclxuICAgICAgICAgICAgICAgIDogdXJsLnJlcGxhY2UoL15kYXRhOlteO10qOy8sICdkYXRhOmF0dGFjaG1lbnQvZmlsZTsnKTtcclxuICAgICAgICAgICAgaWYgKHBvcHVwKSB7XHJcbiAgICAgICAgICAgICAgICBwb3B1cC5sb2NhdGlvbi5ocmVmID0gdXJsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgbG9jYXRpb24uYXNzaWduKHVybCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcG9wdXAgPSBudWxsOyAvLyByZXZlcnNlLXRhYm5hYmJpbmcgIzQ2MFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmVhZGVyLnJlYWRBc0RhdGFVUkwoYmxvYik7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICBjb25zdCB1cmwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpO1xyXG4gICAgICAgIGlmIChwb3B1cClcclxuICAgICAgICAgICAgcG9wdXAubG9jYXRpb24uYXNzaWduKHVybCk7XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICBsb2NhdGlvbi5ocmVmID0gdXJsO1xyXG4gICAgICAgIHBvcHVwID0gbnVsbDsgLy8gcmV2ZXJzZS10YWJuYWJiaW5nICM0NjBcclxuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgVVJMLnJldm9rZU9iamVjdFVSTCh1cmwpO1xyXG4gICAgICAgIH0sIDRlNCk7IC8vIDQwc1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBTaG93cyBhIHRvYXN0IG9yIGNvbnNvbGUubG9nXHJcbiAqXHJcbiAqIEBwYXJhbSBtZXNzYWdlIC0gbWVzc2FnZSB0byBsb2dcclxuICogQHBhcmFtIHR5cGUgLSBkaWZmZXJlbnQgY29sb3Igb2YgdGhlIHRvb2x0aXBcclxuICovXHJcbmZ1bmN0aW9uIHRvYXN0TWVzc2FnZShtZXNzYWdlLCB0eXBlKSB7XHJcbiAgICBjb25zdCBwaW5pYU1lc3NhZ2UgPSAn8J+NjSAnICsgbWVzc2FnZTtcclxuICAgIGlmICh0eXBlb2YgX19WVUVfREVWVE9PTFNfVE9BU1RfXyA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgIF9fVlVFX0RFVlRPT0xTX1RPQVNUX18ocGluaWFNZXNzYWdlLCB0eXBlKTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKHR5cGUgPT09ICdlcnJvcicpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKHBpbmlhTWVzc2FnZSk7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmICh0eXBlID09PSAnd2FybicpIHtcclxuICAgICAgICBjb25zb2xlLndhcm4ocGluaWFNZXNzYWdlKTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKHBpbmlhTWVzc2FnZSk7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gaXNQaW5pYShvKSB7XHJcbiAgICByZXR1cm4gJ19hJyBpbiBvICYmICdpbnN0YWxsJyBpbiBvO1xyXG59XG5cbmZ1bmN0aW9uIGNoZWNrQ2xpcGJvYXJkQWNjZXNzKCkge1xyXG4gICAgaWYgKCEoJ2NsaXBib2FyZCcgaW4gbmF2aWdhdG9yKSkge1xyXG4gICAgICAgIHRvYXN0TWVzc2FnZShgWW91ciBicm93c2VyIGRvZXNuJ3Qgc3VwcG9ydCB0aGUgQ2xpcGJvYXJkIEFQSWAsICdlcnJvcicpO1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIGNoZWNrTm90Rm9jdXNlZEVycm9yKGVycm9yKSB7XHJcbiAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvciAmJlxyXG4gICAgICAgIGVycm9yLm1lc3NhZ2UudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygnZG9jdW1lbnQgaXMgbm90IGZvY3VzZWQnKSkge1xyXG4gICAgICAgIHRvYXN0TWVzc2FnZSgnWW91IG5lZWQgdG8gYWN0aXZhdGUgdGhlIFwiRW11bGF0ZSBhIGZvY3VzZWQgcGFnZVwiIHNldHRpbmcgaW4gdGhlIFwiUmVuZGVyaW5nXCIgcGFuZWwgb2YgZGV2dG9vbHMuJywgJ3dhcm4nKTtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuICAgIHJldHVybiBmYWxzZTtcclxufVxyXG5hc3luYyBmdW5jdGlvbiBhY3Rpb25HbG9iYWxDb3B5U3RhdGUocGluaWEpIHtcclxuICAgIGlmIChjaGVja0NsaXBib2FyZEFjY2VzcygpKVxyXG4gICAgICAgIHJldHVybjtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgYXdhaXQgbmF2aWdhdG9yLmNsaXBib2FyZC53cml0ZVRleHQoSlNPTi5zdHJpbmdpZnkocGluaWEuc3RhdGUudmFsdWUpKTtcclxuICAgICAgICB0b2FzdE1lc3NhZ2UoJ0dsb2JhbCBzdGF0ZSBjb3BpZWQgdG8gY2xpcGJvYXJkLicpO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgaWYgKGNoZWNrTm90Rm9jdXNlZEVycm9yKGVycm9yKSlcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIHRvYXN0TWVzc2FnZShgRmFpbGVkIHRvIHNlcmlhbGl6ZSB0aGUgc3RhdGUuIENoZWNrIHRoZSBjb25zb2xlIGZvciBtb3JlIGRldGFpbHMuYCwgJ2Vycm9yJyk7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XHJcbiAgICB9XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gYWN0aW9uR2xvYmFsUGFzdGVTdGF0ZShwaW5pYSkge1xyXG4gICAgaWYgKGNoZWNrQ2xpcGJvYXJkQWNjZXNzKCkpXHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBwaW5pYS5zdGF0ZS52YWx1ZSA9IEpTT04ucGFyc2UoYXdhaXQgbmF2aWdhdG9yLmNsaXBib2FyZC5yZWFkVGV4dCgpKTtcclxuICAgICAgICB0b2FzdE1lc3NhZ2UoJ0dsb2JhbCBzdGF0ZSBwYXN0ZWQgZnJvbSBjbGlwYm9hcmQuJyk7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICBpZiAoY2hlY2tOb3RGb2N1c2VkRXJyb3IoZXJyb3IpKVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgdG9hc3RNZXNzYWdlKGBGYWlsZWQgdG8gZGVzZXJpYWxpemUgdGhlIHN0YXRlIGZyb20gY2xpcGJvYXJkLiBDaGVjayB0aGUgY29uc29sZSBmb3IgbW9yZSBkZXRhaWxzLmAsICdlcnJvcicpO1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xyXG4gICAgfVxyXG59XHJcbmFzeW5jIGZ1bmN0aW9uIGFjdGlvbkdsb2JhbFNhdmVTdGF0ZShwaW5pYSkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBzYXZlQXMobmV3IEJsb2IoW0pTT04uc3RyaW5naWZ5KHBpbmlhLnN0YXRlLnZhbHVlKV0sIHtcclxuICAgICAgICAgICAgdHlwZTogJ3RleHQvcGxhaW47Y2hhcnNldD11dGYtOCcsXHJcbiAgICAgICAgfSksICdwaW5pYS1zdGF0ZS5qc29uJyk7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICB0b2FzdE1lc3NhZ2UoYEZhaWxlZCB0byBleHBvcnQgdGhlIHN0YXRlIGFzIEpTT04uIENoZWNrIHRoZSBjb25zb2xlIGZvciBtb3JlIGRldGFpbHMuYCwgJ2Vycm9yJyk7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XHJcbiAgICB9XHJcbn1cclxubGV0IGZpbGVJbnB1dDtcclxuZnVuY3Rpb24gZ2V0RmlsZU9wZW5lcigpIHtcclxuICAgIGlmICghZmlsZUlucHV0KSB7XHJcbiAgICAgICAgZmlsZUlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTtcclxuICAgICAgICBmaWxlSW5wdXQudHlwZSA9ICdmaWxlJztcclxuICAgICAgICBmaWxlSW5wdXQuYWNjZXB0ID0gJy5qc29uJztcclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIG9wZW5GaWxlKCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgICAgIGZpbGVJbnB1dC5vbmNoYW5nZSA9IGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGZpbGVzID0gZmlsZUlucHV0LmZpbGVzO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFmaWxlcylcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZShudWxsKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGZpbGUgPSBmaWxlcy5pdGVtKDApO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFmaWxlKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHZlKG51bGwpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUoeyB0ZXh0OiBhd2FpdCBmaWxlLnRleHQoKSwgZmlsZSB9KTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgLy8gQHRzLWlnbm9yZTogVE9ETzogY2hhbmdlZCBmcm9tIDQuMyB0byA0LjRcclxuICAgICAgICAgICAgZmlsZUlucHV0Lm9uY2FuY2VsID0gKCkgPT4gcmVzb2x2ZShudWxsKTtcclxuICAgICAgICAgICAgZmlsZUlucHV0Lm9uZXJyb3IgPSByZWplY3Q7XHJcbiAgICAgICAgICAgIGZpbGVJbnB1dC5jbGljaygpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG9wZW5GaWxlO1xyXG59XHJcbmFzeW5jIGZ1bmN0aW9uIGFjdGlvbkdsb2JhbE9wZW5TdGF0ZUZpbGUocGluaWEpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3Qgb3BlbiA9IGF3YWl0IGdldEZpbGVPcGVuZXIoKTtcclxuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBvcGVuKCk7XHJcbiAgICAgICAgaWYgKCFyZXN1bHQpXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICBjb25zdCB7IHRleHQsIGZpbGUgfSA9IHJlc3VsdDtcclxuICAgICAgICBwaW5pYS5zdGF0ZS52YWx1ZSA9IEpTT04ucGFyc2UodGV4dCk7XHJcbiAgICAgICAgdG9hc3RNZXNzYWdlKGBHbG9iYWwgc3RhdGUgaW1wb3J0ZWQgZnJvbSBcIiR7ZmlsZS5uYW1lfVwiLmApO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgdG9hc3RNZXNzYWdlKGBGYWlsZWQgdG8gZXhwb3J0IHRoZSBzdGF0ZSBhcyBKU09OLiBDaGVjayB0aGUgY29uc29sZSBmb3IgbW9yZSBkZXRhaWxzLmAsICdlcnJvcicpO1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xyXG4gICAgfVxyXG59XG5cbmZ1bmN0aW9uIGZvcm1hdERpc3BsYXkoZGlzcGxheSkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBfY3VzdG9tOiB7XHJcbiAgICAgICAgICAgIGRpc3BsYXksXHJcbiAgICAgICAgfSxcclxuICAgIH07XHJcbn1cclxuY29uc3QgUElOSUFfUk9PVF9MQUJFTCA9ICfwn42NIFBpbmlhIChyb290KSc7XHJcbmNvbnN0IFBJTklBX1JPT1RfSUQgPSAnX3Jvb3QnO1xyXG5mdW5jdGlvbiBmb3JtYXRTdG9yZUZvckluc3BlY3RvclRyZWUoc3RvcmUpIHtcclxuICAgIHJldHVybiBpc1BpbmlhKHN0b3JlKVxyXG4gICAgICAgID8ge1xyXG4gICAgICAgICAgICBpZDogUElOSUFfUk9PVF9JRCxcclxuICAgICAgICAgICAgbGFiZWw6IFBJTklBX1JPT1RfTEFCRUwsXHJcbiAgICAgICAgfVxyXG4gICAgICAgIDoge1xyXG4gICAgICAgICAgICBpZDogc3RvcmUuJGlkLFxyXG4gICAgICAgICAgICBsYWJlbDogc3RvcmUuJGlkLFxyXG4gICAgICAgIH07XHJcbn1cclxuZnVuY3Rpb24gZm9ybWF0U3RvcmVGb3JJbnNwZWN0b3JTdGF0ZShzdG9yZSkge1xyXG4gICAgaWYgKGlzUGluaWEoc3RvcmUpKSB7XHJcbiAgICAgICAgY29uc3Qgc3RvcmVOYW1lcyA9IEFycmF5LmZyb20oc3RvcmUuX3Mua2V5cygpKTtcclxuICAgICAgICBjb25zdCBzdG9yZU1hcCA9IHN0b3JlLl9zO1xyXG4gICAgICAgIGNvbnN0IHN0YXRlID0ge1xyXG4gICAgICAgICAgICBzdGF0ZTogc3RvcmVOYW1lcy5tYXAoKHN0b3JlSWQpID0+ICh7XHJcbiAgICAgICAgICAgICAgICBlZGl0YWJsZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIGtleTogc3RvcmVJZCxcclxuICAgICAgICAgICAgICAgIHZhbHVlOiBzdG9yZS5zdGF0ZS52YWx1ZVtzdG9yZUlkXSxcclxuICAgICAgICAgICAgfSkpLFxyXG4gICAgICAgICAgICBnZXR0ZXJzOiBzdG9yZU5hbWVzXHJcbiAgICAgICAgICAgICAgICAuZmlsdGVyKChpZCkgPT4gc3RvcmVNYXAuZ2V0KGlkKS5fZ2V0dGVycylcclxuICAgICAgICAgICAgICAgIC5tYXAoKGlkKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzdG9yZSA9IHN0b3JlTWFwLmdldChpZCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGVkaXRhYmxlOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICBrZXk6IGlkLFxyXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBzdG9yZS5fZ2V0dGVycy5yZWR1Y2UoKGdldHRlcnMsIGtleSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBnZXR0ZXJzW2tleV0gPSBzdG9yZVtrZXldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZ2V0dGVycztcclxuICAgICAgICAgICAgICAgICAgICB9LCB7fSksXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9KSxcclxuICAgICAgICB9O1xyXG4gICAgICAgIHJldHVybiBzdGF0ZTtcclxuICAgIH1cclxuICAgIGNvbnN0IHN0YXRlID0ge1xyXG4gICAgICAgIHN0YXRlOiBPYmplY3Qua2V5cyhzdG9yZS4kc3RhdGUpLm1hcCgoa2V5KSA9PiAoe1xyXG4gICAgICAgICAgICBlZGl0YWJsZTogdHJ1ZSxcclxuICAgICAgICAgICAga2V5LFxyXG4gICAgICAgICAgICB2YWx1ZTogc3RvcmUuJHN0YXRlW2tleV0sXHJcbiAgICAgICAgfSkpLFxyXG4gICAgfTtcclxuICAgIC8vIGF2b2lkIGFkZGluZyBlbXB0eSBnZXR0ZXJzXHJcbiAgICBpZiAoc3RvcmUuX2dldHRlcnMgJiYgc3RvcmUuX2dldHRlcnMubGVuZ3RoKSB7XHJcbiAgICAgICAgc3RhdGUuZ2V0dGVycyA9IHN0b3JlLl9nZXR0ZXJzLm1hcCgoZ2V0dGVyTmFtZSkgPT4gKHtcclxuICAgICAgICAgICAgZWRpdGFibGU6IGZhbHNlLFxyXG4gICAgICAgICAgICBrZXk6IGdldHRlck5hbWUsXHJcbiAgICAgICAgICAgIHZhbHVlOiBzdG9yZVtnZXR0ZXJOYW1lXSxcclxuICAgICAgICB9KSk7XHJcbiAgICB9XHJcbiAgICBpZiAoc3RvcmUuX2N1c3RvbVByb3BlcnRpZXMuc2l6ZSkge1xyXG4gICAgICAgIHN0YXRlLmN1c3RvbVByb3BlcnRpZXMgPSBBcnJheS5mcm9tKHN0b3JlLl9jdXN0b21Qcm9wZXJ0aWVzKS5tYXAoKGtleSkgPT4gKHtcclxuICAgICAgICAgICAgZWRpdGFibGU6IHRydWUsXHJcbiAgICAgICAgICAgIGtleSxcclxuICAgICAgICAgICAgdmFsdWU6IHN0b3JlW2tleV0sXHJcbiAgICAgICAgfSkpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHN0YXRlO1xyXG59XHJcbmZ1bmN0aW9uIGZvcm1hdEV2ZW50RGF0YShldmVudHMpIHtcclxuICAgIGlmICghZXZlbnRzKVxyXG4gICAgICAgIHJldHVybiB7fTtcclxuICAgIGlmIChBcnJheS5pc0FycmF5KGV2ZW50cykpIHtcclxuICAgICAgICAvLyBUT0RPOiBoYW5kbGUgYWRkIGFuZCBkZWxldGUgZm9yIGFycmF5cyBhbmQgb2JqZWN0c1xyXG4gICAgICAgIHJldHVybiBldmVudHMucmVkdWNlKChkYXRhLCBldmVudCkgPT4ge1xyXG4gICAgICAgICAgICBkYXRhLmtleXMucHVzaChldmVudC5rZXkpO1xyXG4gICAgICAgICAgICBkYXRhLm9wZXJhdGlvbnMucHVzaChldmVudC50eXBlKTtcclxuICAgICAgICAgICAgZGF0YS5vbGRWYWx1ZVtldmVudC5rZXldID0gZXZlbnQub2xkVmFsdWU7XHJcbiAgICAgICAgICAgIGRhdGEubmV3VmFsdWVbZXZlbnQua2V5XSA9IGV2ZW50Lm5ld1ZhbHVlO1xyXG4gICAgICAgICAgICByZXR1cm4gZGF0YTtcclxuICAgICAgICB9LCB7XHJcbiAgICAgICAgICAgIG9sZFZhbHVlOiB7fSxcclxuICAgICAgICAgICAga2V5czogW10sXHJcbiAgICAgICAgICAgIG9wZXJhdGlvbnM6IFtdLFxyXG4gICAgICAgICAgICBuZXdWYWx1ZToge30sXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBvcGVyYXRpb246IGZvcm1hdERpc3BsYXkoZXZlbnRzLnR5cGUpLFxyXG4gICAgICAgICAgICBrZXk6IGZvcm1hdERpc3BsYXkoZXZlbnRzLmtleSksXHJcbiAgICAgICAgICAgIG9sZFZhbHVlOiBldmVudHMub2xkVmFsdWUsXHJcbiAgICAgICAgICAgIG5ld1ZhbHVlOiBldmVudHMubmV3VmFsdWUsXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBmb3JtYXRNdXRhdGlvblR5cGUodHlwZSkge1xyXG4gICAgc3dpdGNoICh0eXBlKSB7XHJcbiAgICAgICAgY2FzZSBNdXRhdGlvblR5cGUuZGlyZWN0OlxyXG4gICAgICAgICAgICByZXR1cm4gJ211dGF0aW9uJztcclxuICAgICAgICBjYXNlIE11dGF0aW9uVHlwZS5wYXRjaEZ1bmN0aW9uOlxyXG4gICAgICAgICAgICByZXR1cm4gJyRwYXRjaCc7XHJcbiAgICAgICAgY2FzZSBNdXRhdGlvblR5cGUucGF0Y2hPYmplY3Q6XHJcbiAgICAgICAgICAgIHJldHVybiAnJHBhdGNoJztcclxuICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICByZXR1cm4gJ3Vua25vd24nO1xyXG4gICAgfVxyXG59XG5cbi8vIHRpbWVsaW5lIGNhbiBiZSBwYXVzZWQgd2hlbiBkaXJlY3RseSBjaGFuZ2luZyB0aGUgc3RhdGVcclxubGV0IGlzVGltZWxpbmVBY3RpdmUgPSB0cnVlO1xyXG5jb25zdCBjb21wb25lbnRTdGF0ZVR5cGVzID0gW107XHJcbmNvbnN0IE1VVEFUSU9OU19MQVlFUl9JRCA9ICdwaW5pYTptdXRhdGlvbnMnO1xyXG5jb25zdCBJTlNQRUNUT1JfSUQgPSAncGluaWEnO1xyXG4vKipcclxuICogR2V0cyB0aGUgZGlzcGxheWVkIG5hbWUgb2YgYSBzdG9yZSBpbiBkZXZ0b29sc1xyXG4gKlxyXG4gKiBAcGFyYW0gaWQgLSBpZCBvZiB0aGUgc3RvcmVcclxuICogQHJldHVybnMgYSBmb3JtYXR0ZWQgc3RyaW5nXHJcbiAqL1xyXG5jb25zdCBnZXRTdG9yZVR5cGUgPSAoaWQpID0+ICfwn42NICcgKyBpZDtcclxuLyoqXHJcbiAqIEFkZCB0aGUgcGluaWEgcGx1Z2luIHdpdGhvdXQgYW55IHN0b3JlLiBBbGxvd3MgZGlzcGxheWluZyBhIFBpbmlhIHBsdWdpbiB0YWJcclxuICogYXMgc29vbiBhcyBpdCBpcyBhZGRlZCB0byB0aGUgYXBwbGljYXRpb24uXHJcbiAqXHJcbiAqIEBwYXJhbSBhcHAgLSBWdWUgYXBwbGljYXRpb25cclxuICogQHBhcmFtIHBpbmlhIC0gcGluaWEgaW5zdGFuY2VcclxuICovXHJcbmZ1bmN0aW9uIHJlZ2lzdGVyUGluaWFEZXZ0b29scyhhcHAsIHBpbmlhKSB7XHJcbiAgICBzZXR1cERldnRvb2xzUGx1Z2luKHtcclxuICAgICAgICBpZDogJ2Rldi5lc20ucGluaWEnLFxyXG4gICAgICAgIGxhYmVsOiAnUGluaWEg8J+NjScsXHJcbiAgICAgICAgbG9nbzogJ2h0dHBzOi8vcGluaWEudnVlanMub3JnL2xvZ28uc3ZnJyxcclxuICAgICAgICBwYWNrYWdlTmFtZTogJ3BpbmlhJyxcclxuICAgICAgICBob21lcGFnZTogJ2h0dHBzOi8vcGluaWEudnVlanMub3JnJyxcclxuICAgICAgICBjb21wb25lbnRTdGF0ZVR5cGVzLFxyXG4gICAgICAgIGFwcCxcclxuICAgIH0sIChhcGkpID0+IHtcclxuICAgICAgICBpZiAodHlwZW9mIGFwaS5ub3cgIT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgdG9hc3RNZXNzYWdlKCdZb3Ugc2VlbSB0byBiZSB1c2luZyBhbiBvdXRkYXRlZCB2ZXJzaW9uIG9mIFZ1ZSBEZXZ0b29scy4gQXJlIHlvdSBzdGlsbCB1c2luZyB0aGUgQmV0YSByZWxlYXNlIGluc3RlYWQgb2YgdGhlIHN0YWJsZSBvbmU/IFlvdSBjYW4gZmluZCB0aGUgbGlua3MgYXQgaHR0cHM6Ly9kZXZ0b29scy52dWVqcy5vcmcvZ3VpZGUvaW5zdGFsbGF0aW9uLmh0bWwuJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGFwaS5hZGRUaW1lbGluZUxheWVyKHtcclxuICAgICAgICAgICAgaWQ6IE1VVEFUSU9OU19MQVlFUl9JRCxcclxuICAgICAgICAgICAgbGFiZWw6IGBQaW5pYSDwn42NYCxcclxuICAgICAgICAgICAgY29sb3I6IDB4ZTVkZjg4LFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGFwaS5hZGRJbnNwZWN0b3Ioe1xyXG4gICAgICAgICAgICBpZDogSU5TUEVDVE9SX0lELFxyXG4gICAgICAgICAgICBsYWJlbDogJ1BpbmlhIPCfjY0nLFxyXG4gICAgICAgICAgICBpY29uOiAnc3RvcmFnZScsXHJcbiAgICAgICAgICAgIHRyZWVGaWx0ZXJQbGFjZWhvbGRlcjogJ1NlYXJjaCBzdG9yZXMnLFxyXG4gICAgICAgICAgICBhY3Rpb25zOiBbXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWNvbjogJ2NvbnRlbnRfY29weScsXHJcbiAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbkdsb2JhbENvcHlTdGF0ZShwaW5pYSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICB0b29sdGlwOiAnU2VyaWFsaXplIGFuZCBjb3B5IHRoZSBzdGF0ZScsXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGljb246ICdjb250ZW50X3Bhc3RlJyxcclxuICAgICAgICAgICAgICAgICAgICBhY3Rpb246IGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgYWN0aW9uR2xvYmFsUGFzdGVTdGF0ZShwaW5pYSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFwaS5zZW5kSW5zcGVjdG9yVHJlZShJTlNQRUNUT1JfSUQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhcGkuc2VuZEluc3BlY3RvclN0YXRlKElOU1BFQ1RPUl9JRCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICB0b29sdGlwOiAnUmVwbGFjZSB0aGUgc3RhdGUgd2l0aCB0aGUgY29udGVudCBvZiB5b3VyIGNsaXBib2FyZCcsXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGljb246ICdzYXZlJyxcclxuICAgICAgICAgICAgICAgICAgICBhY3Rpb246ICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWN0aW9uR2xvYmFsU2F2ZVN0YXRlKHBpbmlhKTtcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHRvb2x0aXA6ICdTYXZlIHRoZSBzdGF0ZSBhcyBhIEpTT04gZmlsZScsXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGljb246ICdmb2xkZXJfb3BlbicsXHJcbiAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IGFjdGlvbkdsb2JhbE9wZW5TdGF0ZUZpbGUocGluaWEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhcGkuc2VuZEluc3BlY3RvclRyZWUoSU5TUEVDVE9SX0lEKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXBpLnNlbmRJbnNwZWN0b3JTdGF0ZShJTlNQRUNUT1JfSUQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgdG9vbHRpcDogJ0ltcG9ydCB0aGUgc3RhdGUgZnJvbSBhIEpTT04gZmlsZScsXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBdLFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGFwaS5vbi5pbnNwZWN0Q29tcG9uZW50KChwYXlsb2FkLCBjdHgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgcHJveHkgPSAocGF5bG9hZC5jb21wb25lbnRJbnN0YW5jZSAmJlxyXG4gICAgICAgICAgICAgICAgcGF5bG9hZC5jb21wb25lbnRJbnN0YW5jZS5wcm94eSk7XHJcbiAgICAgICAgICAgIGlmIChwcm94eSAmJiBwcm94eS5fcFN0b3Jlcykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcGluaWFTdG9yZXMgPSBwYXlsb2FkLmNvbXBvbmVudEluc3RhbmNlLnByb3h5Ll9wU3RvcmVzO1xyXG4gICAgICAgICAgICAgICAgT2JqZWN0LnZhbHVlcyhwaW5pYVN0b3JlcykuZm9yRWFjaCgoc3RvcmUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBwYXlsb2FkLmluc3RhbmNlRGF0YS5zdGF0ZS5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogZ2V0U3RvcmVUeXBlKHN0b3JlLiRpZCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleTogJ3N0YXRlJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWRpdGFibGU6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBzdG9yZS5faXNPcHRpb25zQVBJXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY3VzdG9tOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBzdG9yZS4kc3RhdGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbnM6IFtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpY29uOiAncmVzdG9yZScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9vbHRpcDogJ1Jlc2V0IHRoZSBzdGF0ZSBvZiB0aGlzIHN0b3JlJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3Rpb246ICgpID0+IHN0b3JlLiRyZXNldCgpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBzdG9yZS4kc3RhdGUsXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHN0b3JlLl9nZXR0ZXJzICYmIHN0b3JlLl9nZXR0ZXJzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXlsb2FkLmluc3RhbmNlRGF0YS5zdGF0ZS5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IGdldFN0b3JlVHlwZShzdG9yZS4kaWQpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5OiAnZ2V0dGVycycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlZGl0YWJsZTogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogc3RvcmUuX2dldHRlcnMucmVkdWNlKChnZXR0ZXJzLCBrZXkpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZXR0ZXJzW2tleV0gPSBzdG9yZVtrZXldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvcjogd2UganVzdCB3YW50IHRvIHNob3cgaXQgaW4gZGV2dG9vbHNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2V0dGVyc1trZXldID0gZXJyb3I7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBnZXR0ZXJzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwge30pLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGFwaS5vbi5nZXRJbnNwZWN0b3JUcmVlKChwYXlsb2FkKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChwYXlsb2FkLmFwcCA9PT0gYXBwICYmIHBheWxvYWQuaW5zcGVjdG9ySWQgPT09IElOU1BFQ1RPUl9JRCkge1xyXG4gICAgICAgICAgICAgICAgbGV0IHN0b3JlcyA9IFtwaW5pYV07XHJcbiAgICAgICAgICAgICAgICBzdG9yZXMgPSBzdG9yZXMuY29uY2F0KEFycmF5LmZyb20ocGluaWEuX3MudmFsdWVzKCkpKTtcclxuICAgICAgICAgICAgICAgIHBheWxvYWQucm9vdE5vZGVzID0gKHBheWxvYWQuZmlsdGVyXHJcbiAgICAgICAgICAgICAgICAgICAgPyBzdG9yZXMuZmlsdGVyKChzdG9yZSkgPT4gJyRpZCcgaW4gc3RvcmVcclxuICAgICAgICAgICAgICAgICAgICAgICAgPyBzdG9yZS4kaWRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50b0xvd2VyQ2FzZSgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuaW5jbHVkZXMocGF5bG9hZC5maWx0ZXIudG9Mb3dlckNhc2UoKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgOiBQSU5JQV9ST09UX0xBQkVMLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMocGF5bG9hZC5maWx0ZXIudG9Mb3dlckNhc2UoKSkpXHJcbiAgICAgICAgICAgICAgICAgICAgOiBzdG9yZXMpLm1hcChmb3JtYXRTdG9yZUZvckluc3BlY3RvclRyZWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgYXBpLm9uLmdldEluc3BlY3RvclN0YXRlKChwYXlsb2FkKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChwYXlsb2FkLmFwcCA9PT0gYXBwICYmIHBheWxvYWQuaW5zcGVjdG9ySWQgPT09IElOU1BFQ1RPUl9JRCkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaW5zcGVjdGVkU3RvcmUgPSBwYXlsb2FkLm5vZGVJZCA9PT0gUElOSUFfUk9PVF9JRFxyXG4gICAgICAgICAgICAgICAgICAgID8gcGluaWFcclxuICAgICAgICAgICAgICAgICAgICA6IHBpbmlhLl9zLmdldChwYXlsb2FkLm5vZGVJZCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWluc3BlY3RlZFN0b3JlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gdGhpcyBjb3VsZCBiZSB0aGUgc2VsZWN0ZWQgc3RvcmUgcmVzdG9yZWQgZm9yIGEgZGlmZmVyZW50IHByb2plY3RcclxuICAgICAgICAgICAgICAgICAgICAvLyBzbyBpdCdzIGJldHRlciBub3QgdG8gc2F5IGFueXRoaW5nIGhlcmVcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoaW5zcGVjdGVkU3RvcmUpIHtcclxuICAgICAgICAgICAgICAgICAgICBwYXlsb2FkLnN0YXRlID0gZm9ybWF0U3RvcmVGb3JJbnNwZWN0b3JTdGF0ZShpbnNwZWN0ZWRTdG9yZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICBhcGkub24uZWRpdEluc3BlY3RvclN0YXRlKChwYXlsb2FkLCBjdHgpID0+IHtcclxuICAgICAgICAgICAgaWYgKHBheWxvYWQuYXBwID09PSBhcHAgJiYgcGF5bG9hZC5pbnNwZWN0b3JJZCA9PT0gSU5TUEVDVE9SX0lEKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBpbnNwZWN0ZWRTdG9yZSA9IHBheWxvYWQubm9kZUlkID09PSBQSU5JQV9ST09UX0lEXHJcbiAgICAgICAgICAgICAgICAgICAgPyBwaW5pYVxyXG4gICAgICAgICAgICAgICAgICAgIDogcGluaWEuX3MuZ2V0KHBheWxvYWQubm9kZUlkKTtcclxuICAgICAgICAgICAgICAgIGlmICghaW5zcGVjdGVkU3RvcmUpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdG9hc3RNZXNzYWdlKGBzdG9yZSBcIiR7cGF5bG9hZC5ub2RlSWR9XCIgbm90IGZvdW5kYCwgJ2Vycm9yJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjb25zdCB7IHBhdGggfSA9IHBheWxvYWQ7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWlzUGluaWEoaW5zcGVjdGVkU3RvcmUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gYWNjZXNzIG9ubHkgdGhlIHN0YXRlXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBhdGgubGVuZ3RoICE9PSAxIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICFpbnNwZWN0ZWRTdG9yZS5fY3VzdG9tUHJvcGVydGllcy5oYXMocGF0aFswXSkgfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGF0aFswXSBpbiBpbnNwZWN0ZWRTdG9yZS4kc3RhdGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGF0aC51bnNoaWZ0KCckc3RhdGUnKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBSb290IGFjY2Vzcywgd2UgY2FuIG9taXQgdGhlIGAudmFsdWVgIGJlY2F1c2UgdGhlIGRldnRvb2xzIEFQSSBkb2VzIGl0IGZvciB1c1xyXG4gICAgICAgICAgICAgICAgICAgIHBhdGgudW5zaGlmdCgnc3RhdGUnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlzVGltZWxpbmVBY3RpdmUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIHBheWxvYWQuc2V0KGluc3BlY3RlZFN0b3JlLCBwYXRoLCBwYXlsb2FkLnN0YXRlLnZhbHVlKTtcclxuICAgICAgICAgICAgICAgIGlzVGltZWxpbmVBY3RpdmUgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgYXBpLm9uLmVkaXRDb21wb25lbnRTdGF0ZSgocGF5bG9hZCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAocGF5bG9hZC50eXBlLnN0YXJ0c1dpdGgoJ/CfjY0nKSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc3RvcmVJZCA9IHBheWxvYWQudHlwZS5yZXBsYWNlKC9e8J+NjVxccyovLCAnJyk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzdG9yZSA9IHBpbmlhLl9zLmdldChzdG9yZUlkKTtcclxuICAgICAgICAgICAgICAgIGlmICghc3RvcmUpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdG9hc3RNZXNzYWdlKGBzdG9yZSBcIiR7c3RvcmVJZH1cIiBub3QgZm91bmRgLCAnZXJyb3InKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNvbnN0IHsgcGF0aCB9ID0gcGF5bG9hZDtcclxuICAgICAgICAgICAgICAgIGlmIChwYXRoWzBdICE9PSAnc3RhdGUnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRvYXN0TWVzc2FnZShgSW52YWxpZCBwYXRoIGZvciBzdG9yZSBcIiR7c3RvcmVJZH1cIjpcXG4ke3BhdGh9XFxuT25seSBzdGF0ZSBjYW4gYmUgbW9kaWZpZWQuYCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyByZXdyaXRlIHRoZSBmaXJzdCBlbnRyeSB0byBiZSBhYmxlIHRvIGRpcmVjdGx5IHNldCB0aGUgc3RhdGUgYXNcclxuICAgICAgICAgICAgICAgIC8vIHdlbGwgYXMgYW55IG90aGVyIHBhdGhcclxuICAgICAgICAgICAgICAgIHBhdGhbMF0gPSAnJHN0YXRlJztcclxuICAgICAgICAgICAgICAgIGlzVGltZWxpbmVBY3RpdmUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIHBheWxvYWQuc2V0KHN0b3JlLCBwYXRoLCBwYXlsb2FkLnN0YXRlLnZhbHVlKTtcclxuICAgICAgICAgICAgICAgIGlzVGltZWxpbmVBY3RpdmUgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufVxyXG5mdW5jdGlvbiBhZGRTdG9yZVRvRGV2dG9vbHMoYXBwLCBzdG9yZSkge1xyXG4gICAgaWYgKCFjb21wb25lbnRTdGF0ZVR5cGVzLmluY2x1ZGVzKGdldFN0b3JlVHlwZShzdG9yZS4kaWQpKSkge1xyXG4gICAgICAgIGNvbXBvbmVudFN0YXRlVHlwZXMucHVzaChnZXRTdG9yZVR5cGUoc3RvcmUuJGlkKSk7XHJcbiAgICB9XHJcbiAgICBzZXR1cERldnRvb2xzUGx1Z2luKHtcclxuICAgICAgICBpZDogJ2Rldi5lc20ucGluaWEnLFxyXG4gICAgICAgIGxhYmVsOiAnUGluaWEg8J+NjScsXHJcbiAgICAgICAgbG9nbzogJ2h0dHBzOi8vcGluaWEudnVlanMub3JnL2xvZ28uc3ZnJyxcclxuICAgICAgICBwYWNrYWdlTmFtZTogJ3BpbmlhJyxcclxuICAgICAgICBob21lcGFnZTogJ2h0dHBzOi8vcGluaWEudnVlanMub3JnJyxcclxuICAgICAgICBjb21wb25lbnRTdGF0ZVR5cGVzLFxyXG4gICAgICAgIGFwcCxcclxuICAgICAgICBzZXR0aW5nczoge1xyXG4gICAgICAgICAgICBsb2dTdG9yZUNoYW5nZXM6IHtcclxuICAgICAgICAgICAgICAgIGxhYmVsOiAnTm90aWZ5IGFib3V0IG5ldy9kZWxldGVkIHN0b3JlcycsXHJcbiAgICAgICAgICAgICAgICB0eXBlOiAnYm9vbGVhbicsXHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU6IHRydWUsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIC8vIHVzZUVtb2ppczoge1xyXG4gICAgICAgICAgICAvLyAgIGxhYmVsOiAnVXNlIGVtb2ppcyBpbiBtZXNzYWdlcyDimqHvuI8nLFxyXG4gICAgICAgICAgICAvLyAgIHR5cGU6ICdib29sZWFuJyxcclxuICAgICAgICAgICAgLy8gICBkZWZhdWx0VmFsdWU6IHRydWUsXHJcbiAgICAgICAgICAgIC8vIH0sXHJcbiAgICAgICAgfSxcclxuICAgIH0sIChhcGkpID0+IHtcclxuICAgICAgICAvLyBncmFjZWZ1bGx5IGhhbmRsZSBlcnJvcnNcclxuICAgICAgICBjb25zdCBub3cgPSB0eXBlb2YgYXBpLm5vdyA9PT0gJ2Z1bmN0aW9uJyA/IGFwaS5ub3cuYmluZChhcGkpIDogRGF0ZS5ub3c7XHJcbiAgICAgICAgc3RvcmUuJG9uQWN0aW9uKCh7IGFmdGVyLCBvbkVycm9yLCBuYW1lLCBhcmdzIH0pID0+IHtcclxuICAgICAgICAgICAgY29uc3QgZ3JvdXBJZCA9IHJ1bm5pbmdBY3Rpb25JZCsrO1xyXG4gICAgICAgICAgICBhcGkuYWRkVGltZWxpbmVFdmVudCh7XHJcbiAgICAgICAgICAgICAgICBsYXllcklkOiBNVVRBVElPTlNfTEFZRVJfSUQsXHJcbiAgICAgICAgICAgICAgICBldmVudDoge1xyXG4gICAgICAgICAgICAgICAgICAgIHRpbWU6IG5vdygpLFxyXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiAn8J+bqyAnICsgbmFtZSxcclxuICAgICAgICAgICAgICAgICAgICBzdWJ0aXRsZTogJ3N0YXJ0JyxcclxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0b3JlOiBmb3JtYXREaXNwbGF5KHN0b3JlLiRpZCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbjogZm9ybWF0RGlzcGxheShuYW1lKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXJncyxcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGdyb3VwSWQsXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgYWZ0ZXIoKHJlc3VsdCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgYWN0aXZlQWN0aW9uID0gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICAgICAgYXBpLmFkZFRpbWVsaW5lRXZlbnQoe1xyXG4gICAgICAgICAgICAgICAgICAgIGxheWVySWQ6IE1VVEFUSU9OU19MQVlFUl9JRCxcclxuICAgICAgICAgICAgICAgICAgICBldmVudDoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aW1lOiBub3coKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICfwn5usICcgKyBuYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdWJ0aXRsZTogJ2VuZCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0b3JlOiBmb3JtYXREaXNwbGF5KHN0b3JlLiRpZCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3Rpb246IGZvcm1hdERpc3BsYXkobmFtZSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcmdzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBncm91cElkLFxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIG9uRXJyb3IoKGVycm9yKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBhY3RpdmVBY3Rpb24gPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgICAgICBhcGkuYWRkVGltZWxpbmVFdmVudCh7XHJcbiAgICAgICAgICAgICAgICAgICAgbGF5ZXJJZDogTVVUQVRJT05TX0xBWUVSX0lELFxyXG4gICAgICAgICAgICAgICAgICAgIGV2ZW50OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpbWU6IG5vdygpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsb2dUeXBlOiAnZXJyb3InLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ/CfkqUgJyArIG5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1YnRpdGxlOiAnZW5kJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RvcmU6IGZvcm1hdERpc3BsYXkoc3RvcmUuJGlkKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbjogZm9ybWF0RGlzcGxheShuYW1lKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyZ3MsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvcixcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZ3JvdXBJZCxcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0sIHRydWUpO1xyXG4gICAgICAgIHN0b3JlLl9jdXN0b21Qcm9wZXJ0aWVzLmZvckVhY2goKG5hbWUpID0+IHtcclxuICAgICAgICAgICAgd2F0Y2goKCkgPT4gdW5yZWYoc3RvcmVbbmFtZV0pLCAobmV3VmFsdWUsIG9sZFZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBhcGkubm90aWZ5Q29tcG9uZW50VXBkYXRlKCk7XHJcbiAgICAgICAgICAgICAgICBhcGkuc2VuZEluc3BlY3RvclN0YXRlKElOU1BFQ1RPUl9JRCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoaXNUaW1lbGluZUFjdGl2ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGFwaS5hZGRUaW1lbGluZUV2ZW50KHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGF5ZXJJZDogTVVUQVRJT05TX0xBWUVSX0lELFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBldmVudDoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZTogbm93KCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ0NoYW5nZScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJ0aXRsZTogbmFtZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdWYWx1ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbGRWYWx1ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBncm91cElkOiBhY3RpdmVBY3Rpb24sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sIHsgZGVlcDogdHJ1ZSB9KTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBzdG9yZS4kc3Vic2NyaWJlKCh7IGV2ZW50cywgdHlwZSB9LCBzdGF0ZSkgPT4ge1xyXG4gICAgICAgICAgICBhcGkubm90aWZ5Q29tcG9uZW50VXBkYXRlKCk7XHJcbiAgICAgICAgICAgIGFwaS5zZW5kSW5zcGVjdG9yU3RhdGUoSU5TUEVDVE9SX0lEKTtcclxuICAgICAgICAgICAgaWYgKCFpc1RpbWVsaW5lQWN0aXZlKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAvLyByb290U3RvcmUuc3RhdGVbc3RvcmUuaWRdID0gc3RhdGVcclxuICAgICAgICAgICAgY29uc3QgZXZlbnREYXRhID0ge1xyXG4gICAgICAgICAgICAgICAgdGltZTogbm93KCksXHJcbiAgICAgICAgICAgICAgICB0aXRsZTogZm9ybWF0TXV0YXRpb25UeXBlKHR5cGUpLFxyXG4gICAgICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgICAgIHN0b3JlOiBmb3JtYXREaXNwbGF5KHN0b3JlLiRpZCksXHJcbiAgICAgICAgICAgICAgICAgICAgLi4uZm9ybWF0RXZlbnREYXRhKGV2ZW50cyksXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgZ3JvdXBJZDogYWN0aXZlQWN0aW9uLFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAvLyByZXNldCBmb3IgdGhlIG5leHQgbXV0YXRpb25cclxuICAgICAgICAgICAgYWN0aXZlQWN0aW9uID0gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICBpZiAodHlwZSA9PT0gTXV0YXRpb25UeXBlLnBhdGNoRnVuY3Rpb24pIHtcclxuICAgICAgICAgICAgICAgIGV2ZW50RGF0YS5zdWJ0aXRsZSA9ICfipLXvuI8nO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKHR5cGUgPT09IE11dGF0aW9uVHlwZS5wYXRjaE9iamVjdCkge1xyXG4gICAgICAgICAgICAgICAgZXZlbnREYXRhLnN1YnRpdGxlID0gJ/Cfp6knO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKGV2ZW50cyAmJiAhQXJyYXkuaXNBcnJheShldmVudHMpKSB7XHJcbiAgICAgICAgICAgICAgICBldmVudERhdGEuc3VidGl0bGUgPSBldmVudHMudHlwZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoZXZlbnRzKSB7XHJcbiAgICAgICAgICAgICAgICBldmVudERhdGEuZGF0YVsncmF3RXZlbnQocyknXSA9IHtcclxuICAgICAgICAgICAgICAgICAgICBfY3VzdG9tOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6ICdEZWJ1Z2dlckV2ZW50JyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ29iamVjdCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvb2x0aXA6ICdyYXcgRGVidWdnZXJFdmVudFtdJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGV2ZW50cyxcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBhcGkuYWRkVGltZWxpbmVFdmVudCh7XHJcbiAgICAgICAgICAgICAgICBsYXllcklkOiBNVVRBVElPTlNfTEFZRVJfSUQsXHJcbiAgICAgICAgICAgICAgICBldmVudDogZXZlbnREYXRhLFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9LCB7IGRldGFjaGVkOiB0cnVlLCBmbHVzaDogJ3N5bmMnIH0pO1xyXG4gICAgICAgIGNvbnN0IGhvdFVwZGF0ZSA9IHN0b3JlLl9ob3RVcGRhdGU7XHJcbiAgICAgICAgc3RvcmUuX2hvdFVwZGF0ZSA9IG1hcmtSYXcoKG5ld1N0b3JlKSA9PiB7XHJcbiAgICAgICAgICAgIGhvdFVwZGF0ZShuZXdTdG9yZSk7XHJcbiAgICAgICAgICAgIGFwaS5hZGRUaW1lbGluZUV2ZW50KHtcclxuICAgICAgICAgICAgICAgIGxheWVySWQ6IE1VVEFUSU9OU19MQVlFUl9JRCxcclxuICAgICAgICAgICAgICAgIGV2ZW50OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGltZTogbm93KCksXHJcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICfwn5SlICcgKyBzdG9yZS4kaWQsXHJcbiAgICAgICAgICAgICAgICAgICAgc3VidGl0bGU6ICdITVIgdXBkYXRlJyxcclxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0b3JlOiBmb3JtYXREaXNwbGF5KHN0b3JlLiRpZCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGluZm86IGZvcm1hdERpc3BsYXkoYEhNUiB1cGRhdGVgKSxcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIC8vIHVwZGF0ZSB0aGUgZGV2dG9vbHMgdG9vXHJcbiAgICAgICAgICAgIGFwaS5ub3RpZnlDb21wb25lbnRVcGRhdGUoKTtcclxuICAgICAgICAgICAgYXBpLnNlbmRJbnNwZWN0b3JUcmVlKElOU1BFQ1RPUl9JRCk7XHJcbiAgICAgICAgICAgIGFwaS5zZW5kSW5zcGVjdG9yU3RhdGUoSU5TUEVDVE9SX0lEKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBjb25zdCB7ICRkaXNwb3NlIH0gPSBzdG9yZTtcclxuICAgICAgICBzdG9yZS4kZGlzcG9zZSA9ICgpID0+IHtcclxuICAgICAgICAgICAgJGRpc3Bvc2UoKTtcclxuICAgICAgICAgICAgYXBpLm5vdGlmeUNvbXBvbmVudFVwZGF0ZSgpO1xyXG4gICAgICAgICAgICBhcGkuc2VuZEluc3BlY3RvclRyZWUoSU5TUEVDVE9SX0lEKTtcclxuICAgICAgICAgICAgYXBpLnNlbmRJbnNwZWN0b3JTdGF0ZShJTlNQRUNUT1JfSUQpO1xyXG4gICAgICAgICAgICBhcGkuZ2V0U2V0dGluZ3MoKS5sb2dTdG9yZUNoYW5nZXMgJiZcclxuICAgICAgICAgICAgICAgIHRvYXN0TWVzc2FnZShgRGlzcG9zZWQgXCIke3N0b3JlLiRpZH1cIiBzdG9yZSDwn5eRYCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICAvLyB0cmlnZ2VyIGFuIHVwZGF0ZSBzbyBpdCBjYW4gZGlzcGxheSBuZXcgcmVnaXN0ZXJlZCBzdG9yZXNcclxuICAgICAgICBhcGkubm90aWZ5Q29tcG9uZW50VXBkYXRlKCk7XHJcbiAgICAgICAgYXBpLnNlbmRJbnNwZWN0b3JUcmVlKElOU1BFQ1RPUl9JRCk7XHJcbiAgICAgICAgYXBpLnNlbmRJbnNwZWN0b3JTdGF0ZShJTlNQRUNUT1JfSUQpO1xyXG4gICAgICAgIGFwaS5nZXRTZXR0aW5ncygpLmxvZ1N0b3JlQ2hhbmdlcyAmJlxyXG4gICAgICAgICAgICB0b2FzdE1lc3NhZ2UoYFwiJHtzdG9yZS4kaWR9XCIgc3RvcmUgaW5zdGFsbGVkIPCfhpVgKTtcclxuICAgIH0pO1xyXG59XHJcbmxldCBydW5uaW5nQWN0aW9uSWQgPSAwO1xyXG5sZXQgYWN0aXZlQWN0aW9uO1xyXG4vKipcclxuICogUGF0Y2hlcyBhIHN0b3JlIHRvIGVuYWJsZSBhY3Rpb24gZ3JvdXBpbmcgaW4gZGV2dG9vbHMgYnkgd3JhcHBpbmcgdGhlIHN0b3JlIHdpdGggYSBQcm94eSB0aGF0IGlzIHBhc3NlZCBhcyB0aGVcclxuICogY29udGV4dCBvZiBhbGwgYWN0aW9ucywgYWxsb3dpbmcgdXMgdG8gc2V0IGBydW5uaW5nQWN0aW9uYCBvbiBlYWNoIGFjY2VzcyBhbmQgZWZmZWN0aXZlbHkgYXNzb2NpYXRpbmcgYW55IHN0YXRlXHJcbiAqIG11dGF0aW9uIHRvIHRoZSBhY3Rpb24uXHJcbiAqXHJcbiAqIEBwYXJhbSBzdG9yZSAtIHN0b3JlIHRvIHBhdGNoXHJcbiAqIEBwYXJhbSBhY3Rpb25OYW1lcyAtIGxpc3Qgb2YgYWN0aW9uc3QgdG8gcGF0Y2hcclxuICovXHJcbmZ1bmN0aW9uIHBhdGNoQWN0aW9uRm9yR3JvdXBpbmcoc3RvcmUsIGFjdGlvbk5hbWVzKSB7XHJcbiAgICAvLyBvcmlnaW5hbCBhY3Rpb25zIG9mIHRoZSBzdG9yZSBhcyB0aGV5IGFyZSBnaXZlbiBieSBwaW5pYS4gV2UgYXJlIGdvaW5nIHRvIG92ZXJyaWRlIHRoZW1cclxuICAgIGNvbnN0IGFjdGlvbnMgPSBhY3Rpb25OYW1lcy5yZWR1Y2UoKHN0b3JlQWN0aW9ucywgYWN0aW9uTmFtZSkgPT4ge1xyXG4gICAgICAgIC8vIHVzZSB0b1JhdyB0byBhdm9pZCB0cmFja2luZyAjNTQxXHJcbiAgICAgICAgc3RvcmVBY3Rpb25zW2FjdGlvbk5hbWVdID0gdG9SYXcoc3RvcmUpW2FjdGlvbk5hbWVdO1xyXG4gICAgICAgIHJldHVybiBzdG9yZUFjdGlvbnM7XHJcbiAgICB9LCB7fSk7XHJcbiAgICBmb3IgKGNvbnN0IGFjdGlvbk5hbWUgaW4gYWN0aW9ucykge1xyXG4gICAgICAgIHN0b3JlW2FjdGlvbk5hbWVdID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAvLyBzZXRBY3RpdmVQaW5pYShzdG9yZS5fcClcclxuICAgICAgICAgICAgLy8gdGhlIHJ1bm5pbmcgYWN0aW9uIGlkIGlzIGluY3JlbWVudGVkIGluIGEgYmVmb3JlIGFjdGlvbiBob29rXHJcbiAgICAgICAgICAgIGNvbnN0IF9hY3Rpb25JZCA9IHJ1bm5pbmdBY3Rpb25JZDtcclxuICAgICAgICAgICAgY29uc3QgdHJhY2tlZFN0b3JlID0gbmV3IFByb3h5KHN0b3JlLCB7XHJcbiAgICAgICAgICAgICAgICBnZXQoLi4uYXJncykge1xyXG4gICAgICAgICAgICAgICAgICAgIGFjdGl2ZUFjdGlvbiA9IF9hY3Rpb25JZDtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gUmVmbGVjdC5nZXQoLi4uYXJncyk7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgc2V0KC4uLmFyZ3MpIHtcclxuICAgICAgICAgICAgICAgICAgICBhY3RpdmVBY3Rpb24gPSBfYWN0aW9uSWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFJlZmxlY3Quc2V0KC4uLmFyZ3MpO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHJldHVybiBhY3Rpb25zW2FjdGlvbk5hbWVdLmFwcGx5KHRyYWNrZWRTdG9yZSwgYXJndW1lbnRzKTtcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBwaW5pYS51c2UoZGV2dG9vbHNQbHVnaW4pXHJcbiAqL1xyXG5mdW5jdGlvbiBkZXZ0b29sc1BsdWdpbih7IGFwcCwgc3RvcmUsIG9wdGlvbnMgfSkge1xyXG4gICAgLy8gSE1SIG1vZHVsZVxyXG4gICAgaWYgKHN0b3JlLiRpZC5zdGFydHNXaXRoKCdfX2hvdDonKSkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIC8vIGRldGVjdCBvcHRpb24gYXBpIHZzIHNldHVwIGFwaVxyXG4gICAgaWYgKG9wdGlvbnMuc3RhdGUpIHtcclxuICAgICAgICBzdG9yZS5faXNPcHRpb25zQVBJID0gdHJ1ZTtcclxuICAgIH1cclxuICAgIC8vIG9ubHkgd3JhcCBhY3Rpb25zIGluIG9wdGlvbi1kZWZpbmVkIHN0b3JlcyBhcyB0aGlzIHRlY2huaXF1ZSByZWxpZXMgb25cclxuICAgIC8vIHdyYXBwaW5nIHRoZSBjb250ZXh0IG9mIHRoZSBhY3Rpb24gd2l0aCBhIHByb3h5XHJcbiAgICBpZiAodHlwZW9mIG9wdGlvbnMuc3RhdGUgPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICBwYXRjaEFjdGlvbkZvckdyb3VwaW5nKFxyXG4gICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3I6IGNhbiBjYXN0IHRoZSBzdG9yZS4uLlxyXG4gICAgICAgIHN0b3JlLCBPYmplY3Qua2V5cyhvcHRpb25zLmFjdGlvbnMpKTtcclxuICAgICAgICBjb25zdCBvcmlnaW5hbEhvdFVwZGF0ZSA9IHN0b3JlLl9ob3RVcGRhdGU7XHJcbiAgICAgICAgLy8gVXBncmFkZSB0aGUgSE1SIHRvIGFsc28gdXBkYXRlIHRoZSBuZXcgYWN0aW9uc1xyXG4gICAgICAgIHRvUmF3KHN0b3JlKS5faG90VXBkYXRlID0gZnVuY3Rpb24gKG5ld1N0b3JlKSB7XHJcbiAgICAgICAgICAgIG9yaWdpbmFsSG90VXBkYXRlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XHJcbiAgICAgICAgICAgIHBhdGNoQWN0aW9uRm9yR3JvdXBpbmcoc3RvcmUsIE9iamVjdC5rZXlzKG5ld1N0b3JlLl9obXJQYXlsb2FkLmFjdGlvbnMpKTtcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG4gICAgYWRkU3RvcmVUb0RldnRvb2xzKGFwcCwgXHJcbiAgICAvLyBGSVhNRTogaXMgdGhlcmUgYSB3YXkgdG8gYWxsb3cgdGhlIGFzc2lnbm1lbnQgZnJvbSBTdG9yZTxJZCwgUywgRywgQT4gdG8gU3RvcmVHZW5lcmljP1xyXG4gICAgc3RvcmUpO1xyXG59XG5cbi8qKlxyXG4gKiBDcmVhdGVzIGEgUGluaWEgaW5zdGFuY2UgdG8gYmUgdXNlZCBieSB0aGUgYXBwbGljYXRpb25cclxuICovXHJcbmZ1bmN0aW9uIGNyZWF0ZVBpbmlhKCkge1xyXG4gICAgY29uc3Qgc2NvcGUgPSBlZmZlY3RTY29wZSh0cnVlKTtcclxuICAgIC8vIE5PVEU6IGhlcmUgd2UgY291bGQgY2hlY2sgdGhlIHdpbmRvdyBvYmplY3QgZm9yIGEgc3RhdGUgYW5kIGRpcmVjdGx5IHNldCBpdFxyXG4gICAgLy8gaWYgdGhlcmUgaXMgYW55dGhpbmcgbGlrZSBpdCB3aXRoIFZ1ZSAzIFNTUlxyXG4gICAgY29uc3Qgc3RhdGUgPSBzY29wZS5ydW4oKCkgPT4gcmVmKHt9KSk7XHJcbiAgICBsZXQgX3AgPSBbXTtcclxuICAgIC8vIHBsdWdpbnMgYWRkZWQgYmVmb3JlIGNhbGxpbmcgYXBwLnVzZShwaW5pYSlcclxuICAgIGxldCB0b0JlSW5zdGFsbGVkID0gW107XHJcbiAgICBjb25zdCBwaW5pYSA9IG1hcmtSYXcoe1xyXG4gICAgICAgIGluc3RhbGwoYXBwKSB7XHJcbiAgICAgICAgICAgIC8vIHRoaXMgYWxsb3dzIGNhbGxpbmcgdXNlU3RvcmUoKSBvdXRzaWRlIG9mIGEgY29tcG9uZW50IHNldHVwIGFmdGVyXHJcbiAgICAgICAgICAgIC8vIGluc3RhbGxpbmcgcGluaWEncyBwbHVnaW5cclxuICAgICAgICAgICAgc2V0QWN0aXZlUGluaWEocGluaWEpO1xyXG4gICAgICAgICAgICBpZiAoIWlzVnVlMikge1xyXG4gICAgICAgICAgICAgICAgcGluaWEuX2EgPSBhcHA7XHJcbiAgICAgICAgICAgICAgICBhcHAucHJvdmlkZShwaW5pYVN5bWJvbCwgcGluaWEpO1xyXG4gICAgICAgICAgICAgICAgYXBwLmNvbmZpZy5nbG9iYWxQcm9wZXJ0aWVzLiRwaW5pYSA9IHBpbmlhO1xyXG4gICAgICAgICAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIGVsc2UgKi9cclxuICAgICAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgSVNfQ0xJRU5UKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVnaXN0ZXJQaW5pYURldnRvb2xzKGFwcCwgcGluaWEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdG9CZUluc3RhbGxlZC5mb3JFYWNoKChwbHVnaW4pID0+IF9wLnB1c2gocGx1Z2luKSk7XHJcbiAgICAgICAgICAgICAgICB0b0JlSW5zdGFsbGVkID0gW107XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIHVzZShwbHVnaW4pIHtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLl9hICYmICFpc1Z1ZTIpIHtcclxuICAgICAgICAgICAgICAgIHRvQmVJbnN0YWxsZWQucHVzaChwbHVnaW4pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgX3AucHVzaChwbHVnaW4pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgX3AsXHJcbiAgICAgICAgLy8gaXQncyBhY3R1YWxseSB1bmRlZmluZWQgaGVyZVxyXG4gICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3JcclxuICAgICAgICBfYTogbnVsbCxcclxuICAgICAgICBfZTogc2NvcGUsXHJcbiAgICAgICAgX3M6IG5ldyBNYXAoKSxcclxuICAgICAgICBzdGF0ZSxcclxuICAgIH0pO1xyXG4gICAgLy8gcGluaWEgZGV2dG9vbHMgcmVseSBvbiBkZXYgb25seSBmZWF0dXJlcyBzbyB0aGV5IGNhbm5vdCBiZSBmb3JjZWQgdW5sZXNzXHJcbiAgICAvLyB0aGUgZGV2IGJ1aWxkIG9mIFZ1ZSBpcyB1c2VkXHJcbiAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmIElTX0NMSUVOVCkge1xyXG4gICAgICAgIHBpbmlhLnVzZShkZXZ0b29sc1BsdWdpbik7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcGluaWE7XHJcbn1cblxuLyoqXHJcbiAqIENoZWNrcyBpZiBhIGZ1bmN0aW9uIGlzIGEgYFN0b3JlRGVmaW5pdGlvbmAuXHJcbiAqXHJcbiAqIEBwYXJhbSBmbiAtIG9iamVjdCB0byB0ZXN0XHJcbiAqIEByZXR1cm5zIHRydWUgaWYgYGZuYCBpcyBhIFN0b3JlRGVmaW5pdGlvblxyXG4gKi9cclxuY29uc3QgaXNVc2VTdG9yZSA9IChmbikgPT4ge1xyXG4gICAgcmV0dXJuIHR5cGVvZiBmbiA9PT0gJ2Z1bmN0aW9uJyAmJiB0eXBlb2YgZm4uJGlkID09PSAnc3RyaW5nJztcclxufTtcclxuLyoqXHJcbiAqIE11dGF0ZXMgaW4gcGxhY2UgYG5ld1N0YXRlYCB3aXRoIGBvbGRTdGF0ZWAgdG8gX2hvdCB1cGRhdGVfIGl0LiBJdCB3aWxsXHJcbiAqIHJlbW92ZSBhbnkga2V5IG5vdCBleGlzdGluZyBpbiBgbmV3U3RhdGVgIGFuZCByZWN1cnNpdmVseSBtZXJnZSBwbGFpblxyXG4gKiBvYmplY3RzLlxyXG4gKlxyXG4gKiBAcGFyYW0gbmV3U3RhdGUgLSBuZXcgc3RhdGUgb2JqZWN0IHRvIGJlIHBhdGNoZWRcclxuICogQHBhcmFtIG9sZFN0YXRlIC0gb2xkIHN0YXRlIHRoYXQgc2hvdWxkIGJlIHVzZWQgdG8gcGF0Y2ggbmV3U3RhdGVcclxuICogQHJldHVybnMgLSBuZXdTdGF0ZVxyXG4gKi9cclxuZnVuY3Rpb24gcGF0Y2hPYmplY3QobmV3U3RhdGUsIG9sZFN0YXRlKSB7XHJcbiAgICAvLyBubyBuZWVkIHRvIGdvIHRocm91Z2ggc3ltYm9scyBiZWNhdXNlIHRoZXkgY2Fubm90IGJlIHNlcmlhbGl6ZWQgYW55d2F5XHJcbiAgICBmb3IgKGNvbnN0IGtleSBpbiBvbGRTdGF0ZSkge1xyXG4gICAgICAgIGNvbnN0IHN1YlBhdGNoID0gb2xkU3RhdGVba2V5XTtcclxuICAgICAgICAvLyBza2lwIHRoZSB3aG9sZSBzdWIgdHJlZVxyXG4gICAgICAgIGlmICghKGtleSBpbiBuZXdTdGF0ZSkpIHtcclxuICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHRhcmdldFZhbHVlID0gbmV3U3RhdGVba2V5XTtcclxuICAgICAgICBpZiAoaXNQbGFpbk9iamVjdCh0YXJnZXRWYWx1ZSkgJiZcclxuICAgICAgICAgICAgaXNQbGFpbk9iamVjdChzdWJQYXRjaCkgJiZcclxuICAgICAgICAgICAgIWlzUmVmKHN1YlBhdGNoKSAmJlxyXG4gICAgICAgICAgICAhaXNSZWFjdGl2ZShzdWJQYXRjaCkpIHtcclxuICAgICAgICAgICAgbmV3U3RhdGVba2V5XSA9IHBhdGNoT2JqZWN0KHRhcmdldFZhbHVlLCBzdWJQYXRjaCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBvYmplY3RzIGFyZSBlaXRoZXIgYSBiaXQgbW9yZSBjb21wbGV4IChlLmcuIHJlZnMpIG9yIHByaW1pdGl2ZXMsIHNvIHdlXHJcbiAgICAgICAgICAgIC8vIGp1c3Qgc2V0IHRoZSB3aG9sZSB0aGluZ1xyXG4gICAgICAgICAgICBpZiAoaXNWdWUyKSB7XHJcbiAgICAgICAgICAgICAgICBzZXQobmV3U3RhdGUsIGtleSwgc3ViUGF0Y2gpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgbmV3U3RhdGVba2V5XSA9IHN1YlBhdGNoO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIG5ld1N0YXRlO1xyXG59XHJcbi8qKlxyXG4gKiBDcmVhdGVzIGFuIF9hY2NlcHRfIGZ1bmN0aW9uIHRvIHBhc3MgdG8gYGltcG9ydC5tZXRhLmhvdGAgaW4gVml0ZSBhcHBsaWNhdGlvbnMuXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIGBgYGpzXHJcbiAqIGNvbnN0IHVzZVVzZXIgPSBkZWZpbmVTdG9yZSguLi4pXHJcbiAqIGlmIChpbXBvcnQubWV0YS5ob3QpIHtcclxuICogICBpbXBvcnQubWV0YS5ob3QuYWNjZXB0KGFjY2VwdEhNUlVwZGF0ZSh1c2VVc2VyLCBpbXBvcnQubWV0YS5ob3QpKVxyXG4gKiB9XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBAcGFyYW0gaW5pdGlhbFVzZVN0b3JlIC0gcmV0dXJuIG9mIHRoZSBkZWZpbmVTdG9yZSB0byBob3QgdXBkYXRlXHJcbiAqIEBwYXJhbSBob3QgLSBgaW1wb3J0Lm1ldGEuaG90YFxyXG4gKi9cclxuZnVuY3Rpb24gYWNjZXB0SE1SVXBkYXRlKGluaXRpYWxVc2VTdG9yZSwgaG90KSB7XHJcbiAgICByZXR1cm4gKG5ld01vZHVsZSkgPT4ge1xyXG4gICAgICAgIGNvbnN0IHBpbmlhID0gaG90LmRhdGEucGluaWEgfHwgaW5pdGlhbFVzZVN0b3JlLl9waW5pYTtcclxuICAgICAgICBpZiAoIXBpbmlhKSB7XHJcbiAgICAgICAgICAgIC8vIHRoaXMgc3RvcmUgaXMgc3RpbGwgbm90IHVzZWRcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBwcmVzZXJ2ZSB0aGUgcGluaWEgaW5zdGFuY2UgYWNyb3NzIGxvYWRzXHJcbiAgICAgICAgaG90LmRhdGEucGluaWEgPSBwaW5pYTtcclxuICAgICAgICAvLyBjb25zb2xlLmxvZygnZ290IGRhdGEnLCBuZXdTdG9yZSlcclxuICAgICAgICBmb3IgKGNvbnN0IGV4cG9ydE5hbWUgaW4gbmV3TW9kdWxlKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHVzZVN0b3JlID0gbmV3TW9kdWxlW2V4cG9ydE5hbWVdO1xyXG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnY2hlY2tpbmcgZm9yJywgZXhwb3J0TmFtZSlcclxuICAgICAgICAgICAgaWYgKGlzVXNlU3RvcmUodXNlU3RvcmUpICYmIHBpbmlhLl9zLmhhcyh1c2VTdG9yZS4kaWQpKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnQWNjZXB0aW5nIHVwZGF0ZSBmb3InLCB1c2VTdG9yZS4kaWQpXHJcbiAgICAgICAgICAgICAgICBjb25zdCBpZCA9IHVzZVN0b3JlLiRpZDtcclxuICAgICAgICAgICAgICAgIGlmIChpZCAhPT0gaW5pdGlhbFVzZVN0b3JlLiRpZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihgVGhlIGlkIG9mIHRoZSBzdG9yZSBjaGFuZ2VkIGZyb20gXCIke2luaXRpYWxVc2VTdG9yZS4kaWR9XCIgdG8gXCIke2lkfVwiLiBSZWxvYWRpbmcuYCk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gcmV0dXJuIGltcG9ydC5tZXRhLmhvdC5pbnZhbGlkYXRlKClcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaG90LmludmFsaWRhdGUoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nU3RvcmUgPSBwaW5pYS5fcy5nZXQoaWQpO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFleGlzdGluZ1N0b3JlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFtQaW5pYV06IHNraXBwaW5nIGhtciBiZWNhdXNlIHN0b3JlIGRvZXNuJ3QgZXhpc3QgeWV0YCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdXNlU3RvcmUocGluaWEsIGV4aXN0aW5nU3RvcmUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxufVxuXG5jb25zdCBub29wID0gKCkgPT4geyB9O1xyXG5mdW5jdGlvbiBhZGRTdWJzY3JpcHRpb24oc3Vic2NyaXB0aW9ucywgY2FsbGJhY2ssIGRldGFjaGVkLCBvbkNsZWFudXAgPSBub29wKSB7XHJcbiAgICBzdWJzY3JpcHRpb25zLnB1c2goY2FsbGJhY2spO1xyXG4gICAgY29uc3QgcmVtb3ZlU3Vic2NyaXB0aW9uID0gKCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGlkeCA9IHN1YnNjcmlwdGlvbnMuaW5kZXhPZihjYWxsYmFjayk7XHJcbiAgICAgICAgaWYgKGlkeCA+IC0xKSB7XHJcbiAgICAgICAgICAgIHN1YnNjcmlwdGlvbnMuc3BsaWNlKGlkeCwgMSk7XHJcbiAgICAgICAgICAgIG9uQ2xlYW51cCgpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBpZiAoIWRldGFjaGVkICYmIGdldEN1cnJlbnRJbnN0YW5jZSgpKSB7XHJcbiAgICAgICAgb25Vbm1vdW50ZWQocmVtb3ZlU3Vic2NyaXB0aW9uKTtcclxuICAgIH1cclxuICAgIHJldHVybiByZW1vdmVTdWJzY3JpcHRpb247XHJcbn1cclxuZnVuY3Rpb24gdHJpZ2dlclN1YnNjcmlwdGlvbnMoc3Vic2NyaXB0aW9ucywgLi4uYXJncykge1xyXG4gICAgc3Vic2NyaXB0aW9ucy5zbGljZSgpLmZvckVhY2goKGNhbGxiYWNrKSA9PiB7XHJcbiAgICAgICAgY2FsbGJhY2soLi4uYXJncyk7XHJcbiAgICB9KTtcclxufVxuXG5mdW5jdGlvbiBtZXJnZVJlYWN0aXZlT2JqZWN0cyh0YXJnZXQsIHBhdGNoVG9BcHBseSkge1xyXG4gICAgLy8gbm8gbmVlZCB0byBnbyB0aHJvdWdoIHN5bWJvbHMgYmVjYXVzZSB0aGV5IGNhbm5vdCBiZSBzZXJpYWxpemVkIGFueXdheVxyXG4gICAgZm9yIChjb25zdCBrZXkgaW4gcGF0Y2hUb0FwcGx5KSB7XHJcbiAgICAgICAgaWYgKCFwYXRjaFRvQXBwbHkuaGFzT3duUHJvcGVydHkoa2V5KSlcclxuICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgY29uc3Qgc3ViUGF0Y2ggPSBwYXRjaFRvQXBwbHlba2V5XTtcclxuICAgICAgICBjb25zdCB0YXJnZXRWYWx1ZSA9IHRhcmdldFtrZXldO1xyXG4gICAgICAgIGlmIChpc1BsYWluT2JqZWN0KHRhcmdldFZhbHVlKSAmJlxyXG4gICAgICAgICAgICBpc1BsYWluT2JqZWN0KHN1YlBhdGNoKSAmJlxyXG4gICAgICAgICAgICB0YXJnZXQuaGFzT3duUHJvcGVydHkoa2V5KSAmJlxyXG4gICAgICAgICAgICAhaXNSZWYoc3ViUGF0Y2gpICYmXHJcbiAgICAgICAgICAgICFpc1JlYWN0aXZlKHN1YlBhdGNoKSkge1xyXG4gICAgICAgICAgICB0YXJnZXRba2V5XSA9IG1lcmdlUmVhY3RpdmVPYmplY3RzKHRhcmdldFZhbHVlLCBzdWJQYXRjaCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yOiBzdWJQYXRjaCBpcyBhIHZhbGlkIHZhbHVlXHJcbiAgICAgICAgICAgIHRhcmdldFtrZXldID0gc3ViUGF0Y2g7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRhcmdldDtcclxufVxyXG5jb25zdCBza2lwSHlkcmF0ZVN5bWJvbCA9IChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKVxyXG4gICAgPyBTeW1ib2woJ3BpbmlhOnNraXBIeWRyYXRpb24nKVxyXG4gICAgOiAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLyBTeW1ib2woKTtcclxuY29uc3Qgc2tpcEh5ZHJhdGVNYXAgPSAvKiNfX1BVUkVfXyovIG5ldyBXZWFrTWFwKCk7XHJcbmZ1bmN0aW9uIHNraXBIeWRyYXRlKG9iaikge1xyXG4gICAgcmV0dXJuIGlzVnVlMlxyXG4gICAgICAgID8gLy8gaW4gQHZ1ZS9jb21wb3NpdGlvbi1hcGksIHRoZSByZWZzIGFyZSBzZWFsZWQgc28gZGVmaW5lUHJvcGVydHkgZG9lc24ndCB3b3JrLi4uXHJcbiAgICAgICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovIHNraXBIeWRyYXRlTWFwLnNldChvYmosIDEpICYmIG9ialxyXG4gICAgICAgIDogT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwgc2tpcEh5ZHJhdGVTeW1ib2wsIHt9KTtcclxufVxyXG5mdW5jdGlvbiBzaG91bGRIeWRyYXRlKG9iaikge1xyXG4gICAgcmV0dXJuIGlzVnVlMlxyXG4gICAgICAgID8gLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8gIXNraXBIeWRyYXRlTWFwLmhhcyhvYmopXHJcbiAgICAgICAgOiAhaXNQbGFpbk9iamVjdChvYmopIHx8ICFvYmouaGFzT3duUHJvcGVydHkoc2tpcEh5ZHJhdGVTeW1ib2wpO1xyXG59XHJcbmNvbnN0IHsgYXNzaWduIH0gPSBPYmplY3Q7XHJcbmZ1bmN0aW9uIGlzQ29tcHV0ZWQobykge1xyXG4gICAgcmV0dXJuICEhKGlzUmVmKG8pICYmIG8uZWZmZWN0KTtcclxufVxyXG5mdW5jdGlvbiBjcmVhdGVPcHRpb25zU3RvcmUoaWQsIG9wdGlvbnMsIHBpbmlhLCBob3QpIHtcclxuICAgIGNvbnN0IHsgc3RhdGUsIGFjdGlvbnMsIGdldHRlcnMgfSA9IG9wdGlvbnM7XHJcbiAgICBjb25zdCBpbml0aWFsU3RhdGUgPSBwaW5pYS5zdGF0ZS52YWx1ZVtpZF07XHJcbiAgICBsZXQgc3RvcmU7XHJcbiAgICBmdW5jdGlvbiBzZXR1cCgpIHtcclxuICAgICAgICBpZiAoIWluaXRpYWxTdGF0ZSAmJiAoIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB8fCAhaG90KSkge1xyXG4gICAgICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cclxuICAgICAgICAgICAgaWYgKGlzVnVlMikge1xyXG4gICAgICAgICAgICAgICAgc2V0KHBpbmlhLnN0YXRlLnZhbHVlLCBpZCwgc3RhdGUgPyBzdGF0ZSgpIDoge30pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcGluaWEuc3RhdGUudmFsdWVbaWRdID0gc3RhdGUgPyBzdGF0ZSgpIDoge307XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gYXZvaWQgY3JlYXRpbmcgYSBzdGF0ZSBpbiBwaW5pYS5zdGF0ZS52YWx1ZVxyXG4gICAgICAgIGNvbnN0IGxvY2FsU3RhdGUgPSAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgaG90XHJcbiAgICAgICAgICAgID8gLy8gdXNlIHJlZigpIHRvIHVud3JhcCByZWZzIGluc2lkZSBzdGF0ZSBUT0RPOiBjaGVjayBpZiB0aGlzIGlzIHN0aWxsIG5lY2Vzc2FyeVxyXG4gICAgICAgICAgICAgICAgdG9SZWZzKHJlZihzdGF0ZSA/IHN0YXRlKCkgOiB7fSkudmFsdWUpXHJcbiAgICAgICAgICAgIDogdG9SZWZzKHBpbmlhLnN0YXRlLnZhbHVlW2lkXSk7XHJcbiAgICAgICAgcmV0dXJuIGFzc2lnbihsb2NhbFN0YXRlLCBhY3Rpb25zLCBPYmplY3Qua2V5cyhnZXR0ZXJzIHx8IHt9KS5yZWR1Y2UoKGNvbXB1dGVkR2V0dGVycywgbmFtZSkgPT4ge1xyXG4gICAgICAgICAgICBjb21wdXRlZEdldHRlcnNbbmFtZV0gPSBtYXJrUmF3KGNvbXB1dGVkKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHNldEFjdGl2ZVBpbmlhKHBpbmlhKTtcclxuICAgICAgICAgICAgICAgIC8vIGl0IHdhcyBjcmVhdGVkIGp1c3QgYmVmb3JlXHJcbiAgICAgICAgICAgICAgICBjb25zdCBzdG9yZSA9IHBpbmlhLl9zLmdldChpZCk7XHJcbiAgICAgICAgICAgICAgICAvLyBhbGxvdyBjcm9zcyB1c2luZyBzdG9yZXNcclxuICAgICAgICAgICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXHJcbiAgICAgICAgICAgICAgICBpZiAoaXNWdWUyICYmICFzdG9yZS5fcilcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yXHJcbiAgICAgICAgICAgICAgICAvLyByZXR1cm4gZ2V0dGVycyFbbmFtZV0uY2FsbChjb250ZXh0LCBjb250ZXh0KVxyXG4gICAgICAgICAgICAgICAgLy8gVE9ETzogYXZvaWQgcmVhZGluZyB0aGUgZ2V0dGVyIHdoaWxlIGFzc2lnbmluZyB3aXRoIGEgZ2xvYmFsIHZhcmlhYmxlXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZ2V0dGVyc1tuYW1lXS5jYWxsKHN0b3JlLCBzdG9yZSk7XHJcbiAgICAgICAgICAgIH0pKTtcclxuICAgICAgICAgICAgcmV0dXJuIGNvbXB1dGVkR2V0dGVycztcclxuICAgICAgICB9LCB7fSkpO1xyXG4gICAgfVxyXG4gICAgc3RvcmUgPSBjcmVhdGVTZXR1cFN0b3JlKGlkLCBzZXR1cCwgb3B0aW9ucywgcGluaWEsIGhvdCk7XHJcbiAgICBzdG9yZS4kcmVzZXQgPSBmdW5jdGlvbiAkcmVzZXQoKSB7XHJcbiAgICAgICAgY29uc3QgbmV3U3RhdGUgPSBzdGF0ZSA/IHN0YXRlKCkgOiB7fTtcclxuICAgICAgICAvLyB3ZSB1c2UgYSBwYXRjaCB0byBncm91cCBhbGwgY2hhbmdlcyBpbnRvIG9uZSBzaW5nbGUgc3Vic2NyaXB0aW9uXHJcbiAgICAgICAgdGhpcy4kcGF0Y2goKCRzdGF0ZSkgPT4ge1xyXG4gICAgICAgICAgICBhc3NpZ24oJHN0YXRlLCBuZXdTdGF0ZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIHN0b3JlO1xyXG59XHJcbmZ1bmN0aW9uIGNyZWF0ZVNldHVwU3RvcmUoJGlkLCBzZXR1cCwgb3B0aW9ucyA9IHt9LCBwaW5pYSwgaG90KSB7XHJcbiAgICBsZXQgc2NvcGU7XHJcbiAgICBjb25zdCBidWlsZFN0YXRlID0gb3B0aW9ucy5zdGF0ZTtcclxuICAgIGNvbnN0IG9wdGlvbnNGb3JQbHVnaW4gPSBhc3NpZ24oeyBhY3Rpb25zOiB7fSB9LCBvcHRpb25zKTtcclxuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xyXG4gICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiAhcGluaWEuX2UuYWN0aXZlKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdQaW5pYSBkZXN0cm95ZWQnKTtcclxuICAgIH1cclxuICAgIC8vIHdhdGNoZXIgb3B0aW9ucyBmb3IgJHN1YnNjcmliZVxyXG4gICAgY29uc3QgJHN1YnNjcmliZU9wdGlvbnMgPSB7XHJcbiAgICAgICAgZGVlcDogdHJ1ZSxcclxuICAgICAgICAvLyBmbHVzaDogJ3Bvc3QnLFxyXG4gICAgfTtcclxuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBlbHNlICovXHJcbiAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmICFpc1Z1ZTIpIHtcclxuICAgICAgICAkc3Vic2NyaWJlT3B0aW9ucy5vblRyaWdnZXIgPSAoZXZlbnQpID0+IHtcclxuICAgICAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIGVsc2UgKi9cclxuICAgICAgICAgICAgaWYgKGlzTGlzdGVuaW5nKSB7XHJcbiAgICAgICAgICAgICAgICBkZWJ1Z2dlckV2ZW50cyA9IGV2ZW50O1xyXG4gICAgICAgICAgICAgICAgLy8gYXZvaWQgdHJpZ2dlcmluZyB0aGlzIHdoaWxlIHRoZSBzdG9yZSBpcyBiZWluZyBidWlsdCBhbmQgdGhlIHN0YXRlIGlzIGJlaW5nIHNldCBpbiBwaW5pYVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKGlzTGlzdGVuaW5nID09IGZhbHNlICYmICFzdG9yZS5faG90VXBkYXRpbmcpIHtcclxuICAgICAgICAgICAgICAgIC8vIGxldCBwYXRjaCBzZW5kIGFsbCB0aGUgZXZlbnRzIHRvZ2V0aGVyIGxhdGVyXHJcbiAgICAgICAgICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgZWxzZSAqL1xyXG4gICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoZGVidWdnZXJFdmVudHMpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVidWdnZXJFdmVudHMucHVzaChldmVudCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCfwn42NIGRlYnVnZ2VyRXZlbnRzIHNob3VsZCBiZSBhbiBhcnJheS4gVGhpcyBpcyBtb3N0IGxpa2VseSBhbiBpbnRlcm5hbCBQaW5pYSBidWcuJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgfVxyXG4gICAgLy8gaW50ZXJuYWwgc3RhdGVcclxuICAgIGxldCBpc0xpc3RlbmluZzsgLy8gc2V0IHRvIHRydWUgYXQgdGhlIGVuZFxyXG4gICAgbGV0IGlzU3luY0xpc3RlbmluZzsgLy8gc2V0IHRvIHRydWUgYXQgdGhlIGVuZFxyXG4gICAgbGV0IHN1YnNjcmlwdGlvbnMgPSBtYXJrUmF3KFtdKTtcclxuICAgIGxldCBhY3Rpb25TdWJzY3JpcHRpb25zID0gbWFya1JhdyhbXSk7XHJcbiAgICBsZXQgZGVidWdnZXJFdmVudHM7XHJcbiAgICBjb25zdCBpbml0aWFsU3RhdGUgPSBwaW5pYS5zdGF0ZS52YWx1ZVskaWRdO1xyXG4gICAgLy8gYXZvaWQgc2V0dGluZyB0aGUgc3RhdGUgZm9yIG9wdGlvbiBzdG9yZXMgYXJlIGl0IGlzIHNldFxyXG4gICAgLy8gYnkgdGhlIHNldHVwXHJcbiAgICBpZiAoIWJ1aWxkU3RhdGUgJiYgIWluaXRpYWxTdGF0ZSAmJiAoIShwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB8fCAhaG90KSkge1xyXG4gICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xyXG4gICAgICAgIGlmIChpc1Z1ZTIpIHtcclxuICAgICAgICAgICAgc2V0KHBpbmlhLnN0YXRlLnZhbHVlLCAkaWQsIHt9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHBpbmlhLnN0YXRlLnZhbHVlWyRpZF0gPSB7fTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBjb25zdCBob3RTdGF0ZSA9IHJlZih7fSk7XHJcbiAgICBmdW5jdGlvbiAkcGF0Y2gocGFydGlhbFN0YXRlT3JNdXRhdG9yKSB7XHJcbiAgICAgICAgbGV0IHN1YnNjcmlwdGlvbk11dGF0aW9uO1xyXG4gICAgICAgIGlzTGlzdGVuaW5nID0gaXNTeW5jTGlzdGVuaW5nID0gZmFsc2U7XHJcbiAgICAgICAgLy8gcmVzZXQgdGhlIGRlYnVnZ2VyIGV2ZW50cyBzaW5jZSBwYXRjaGVzIGFyZSBzeW5jXHJcbiAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIGVsc2UgKi9cclxuICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XHJcbiAgICAgICAgICAgIGRlYnVnZ2VyRXZlbnRzID0gW107XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0eXBlb2YgcGFydGlhbFN0YXRlT3JNdXRhdG9yID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgIHBhcnRpYWxTdGF0ZU9yTXV0YXRvcihwaW5pYS5zdGF0ZS52YWx1ZVskaWRdKTtcclxuICAgICAgICAgICAgc3Vic2NyaXB0aW9uTXV0YXRpb24gPSB7XHJcbiAgICAgICAgICAgICAgICB0eXBlOiBNdXRhdGlvblR5cGUucGF0Y2hGdW5jdGlvbixcclxuICAgICAgICAgICAgICAgIHN0b3JlSWQ6ICRpZCxcclxuICAgICAgICAgICAgICAgIGV2ZW50czogZGVidWdnZXJFdmVudHMsXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBtZXJnZVJlYWN0aXZlT2JqZWN0cyhwaW5pYS5zdGF0ZS52YWx1ZVskaWRdLCBwYXJ0aWFsU3RhdGVPck11dGF0b3IpO1xyXG4gICAgICAgICAgICBzdWJzY3JpcHRpb25NdXRhdGlvbiA9IHtcclxuICAgICAgICAgICAgICAgIHR5cGU6IE11dGF0aW9uVHlwZS5wYXRjaE9iamVjdCxcclxuICAgICAgICAgICAgICAgIHBheWxvYWQ6IHBhcnRpYWxTdGF0ZU9yTXV0YXRvcixcclxuICAgICAgICAgICAgICAgIHN0b3JlSWQ6ICRpZCxcclxuICAgICAgICAgICAgICAgIGV2ZW50czogZGVidWdnZXJFdmVudHMsXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIG5leHRUaWNrKCkudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgIGlzTGlzdGVuaW5nID0gdHJ1ZTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBpc1N5bmNMaXN0ZW5pbmcgPSB0cnVlO1xyXG4gICAgICAgIC8vIGJlY2F1c2Ugd2UgcGF1c2VkIHRoZSB3YXRjaGVyLCB3ZSBuZWVkIHRvIG1hbnVhbGx5IGNhbGwgdGhlIHN1YnNjcmlwdGlvbnNcclxuICAgICAgICB0cmlnZ2VyU3Vic2NyaXB0aW9ucyhzdWJzY3JpcHRpb25zLCBzdWJzY3JpcHRpb25NdXRhdGlvbiwgcGluaWEuc3RhdGUudmFsdWVbJGlkXSk7XHJcbiAgICB9XHJcbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xyXG4gICAgY29uc3QgJHJlc2V0ID0gKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpXHJcbiAgICAgICAgPyAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihg8J+NjTogU3RvcmUgXCIkeyRpZH1cIiBpcyBidWlsZCB1c2luZyB0aGUgc2V0dXAgc3ludGF4IGFuZCBkb2VzIG5vdCBpbXBsZW1lbnQgJHJlc2V0KCkuYCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIDogbm9vcDtcclxuICAgIGZ1bmN0aW9uICRkaXNwb3NlKCkge1xyXG4gICAgICAgIHNjb3BlLnN0b3AoKTtcclxuICAgICAgICBzdWJzY3JpcHRpb25zID0gW107XHJcbiAgICAgICAgYWN0aW9uU3Vic2NyaXB0aW9ucyA9IFtdO1xyXG4gICAgICAgIHBpbmlhLl9zLmRlbGV0ZSgkaWQpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBXcmFwcyBhbiBhY3Rpb24gdG8gaGFuZGxlIHN1YnNjcmlwdGlvbnMuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIG5hbWUgLSBuYW1lIG9mIHRoZSBhY3Rpb25cclxuICAgICAqIEBwYXJhbSBhY3Rpb24gLSBhY3Rpb24gdG8gd3JhcFxyXG4gICAgICogQHJldHVybnMgYSB3cmFwcGVkIGFjdGlvbiB0byBoYW5kbGUgc3Vic2NyaXB0aW9uc1xyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiB3cmFwQWN0aW9uKG5hbWUsIGFjdGlvbikge1xyXG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHNldEFjdGl2ZVBpbmlhKHBpbmlhKTtcclxuICAgICAgICAgICAgY29uc3QgYXJncyA9IEFycmF5LmZyb20oYXJndW1lbnRzKTtcclxuICAgICAgICAgICAgY29uc3QgYWZ0ZXJDYWxsYmFja0xpc3QgPSBbXTtcclxuICAgICAgICAgICAgY29uc3Qgb25FcnJvckNhbGxiYWNrTGlzdCA9IFtdO1xyXG4gICAgICAgICAgICBmdW5jdGlvbiBhZnRlcihjYWxsYmFjaykge1xyXG4gICAgICAgICAgICAgICAgYWZ0ZXJDYWxsYmFja0xpc3QucHVzaChjYWxsYmFjayk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZnVuY3Rpb24gb25FcnJvcihjYWxsYmFjaykge1xyXG4gICAgICAgICAgICAgICAgb25FcnJvckNhbGxiYWNrTGlzdC5wdXNoKGNhbGxiYWNrKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yXHJcbiAgICAgICAgICAgIHRyaWdnZXJTdWJzY3JpcHRpb25zKGFjdGlvblN1YnNjcmlwdGlvbnMsIHtcclxuICAgICAgICAgICAgICAgIGFyZ3MsXHJcbiAgICAgICAgICAgICAgICBuYW1lLFxyXG4gICAgICAgICAgICAgICAgc3RvcmUsXHJcbiAgICAgICAgICAgICAgICBhZnRlcixcclxuICAgICAgICAgICAgICAgIG9uRXJyb3IsXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBsZXQgcmV0O1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgcmV0ID0gYWN0aW9uLmFwcGx5KHRoaXMgJiYgdGhpcy4kaWQgPT09ICRpZCA/IHRoaXMgOiBzdG9yZSwgYXJncyk7XHJcbiAgICAgICAgICAgICAgICAvLyBoYW5kbGUgc3luYyBlcnJvcnNcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIHRyaWdnZXJTdWJzY3JpcHRpb25zKG9uRXJyb3JDYWxsYmFja0xpc3QsIGVycm9yKTtcclxuICAgICAgICAgICAgICAgIHRocm93IGVycm9yO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChyZXQgaW5zdGFuY2VvZiBQcm9taXNlKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmV0XHJcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdHJpZ2dlclN1YnNjcmlwdGlvbnMoYWZ0ZXJDYWxsYmFja0xpc3QsIHZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0cmlnZ2VyU3Vic2NyaXB0aW9ucyhvbkVycm9yQ2FsbGJhY2tMaXN0LCBlcnJvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIGFsbG93IHRoZSBhZnRlckNhbGxiYWNrIHRvIG92ZXJyaWRlIHRoZSByZXR1cm4gdmFsdWVcclxuICAgICAgICAgICAgdHJpZ2dlclN1YnNjcmlwdGlvbnMoYWZ0ZXJDYWxsYmFja0xpc3QsIHJldCk7XHJcbiAgICAgICAgICAgIHJldHVybiByZXQ7XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuICAgIGNvbnN0IF9obXJQYXlsb2FkID0gLyojX19QVVJFX18qLyBtYXJrUmF3KHtcclxuICAgICAgICBhY3Rpb25zOiB7fSxcclxuICAgICAgICBnZXR0ZXJzOiB7fSxcclxuICAgICAgICBzdGF0ZTogW10sXHJcbiAgICAgICAgaG90U3RhdGUsXHJcbiAgICB9KTtcclxuICAgIGNvbnN0IHBhcnRpYWxTdG9yZSA9IHtcclxuICAgICAgICBfcDogcGluaWEsXHJcbiAgICAgICAgLy8gX3M6IHNjb3BlLFxyXG4gICAgICAgICRpZCxcclxuICAgICAgICAkb25BY3Rpb246IGFkZFN1YnNjcmlwdGlvbi5iaW5kKG51bGwsIGFjdGlvblN1YnNjcmlwdGlvbnMpLFxyXG4gICAgICAgICRwYXRjaCxcclxuICAgICAgICAkcmVzZXQsXHJcbiAgICAgICAgJHN1YnNjcmliZShjYWxsYmFjaywgb3B0aW9ucyA9IHt9KSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlbW92ZVN1YnNjcmlwdGlvbiA9IGFkZFN1YnNjcmlwdGlvbihzdWJzY3JpcHRpb25zLCBjYWxsYmFjaywgb3B0aW9ucy5kZXRhY2hlZCwgKCkgPT4gc3RvcFdhdGNoZXIoKSk7XHJcbiAgICAgICAgICAgIGNvbnN0IHN0b3BXYXRjaGVyID0gc2NvcGUucnVuKCgpID0+IHdhdGNoKCgpID0+IHBpbmlhLnN0YXRlLnZhbHVlWyRpZF0sIChzdGF0ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuZmx1c2ggPT09ICdzeW5jJyA/IGlzU3luY0xpc3RlbmluZyA6IGlzTGlzdGVuaW5nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdG9yZUlkOiAkaWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IE11dGF0aW9uVHlwZS5kaXJlY3QsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50czogZGVidWdnZXJFdmVudHMsXHJcbiAgICAgICAgICAgICAgICAgICAgfSwgc3RhdGUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LCBhc3NpZ24oe30sICRzdWJzY3JpYmVPcHRpb25zLCBvcHRpb25zKSkpO1xyXG4gICAgICAgICAgICByZXR1cm4gcmVtb3ZlU3Vic2NyaXB0aW9uO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgJGRpc3Bvc2UsXHJcbiAgICB9O1xyXG4gICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXHJcbiAgICBpZiAoaXNWdWUyKSB7XHJcbiAgICAgICAgLy8gc3RhcnQgYXMgbm9uIHJlYWR5XHJcbiAgICAgICAgcGFydGlhbFN0b3JlLl9yID0gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBjb25zdCBzdG9yZSA9IHJlYWN0aXZlKGFzc2lnbigocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgSVNfQ0xJRU5UXHJcbiAgICAgICAgPyAvLyBkZXZ0b29scyBjdXN0b20gcHJvcGVydGllc1xyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBfY3VzdG9tUHJvcGVydGllczogbWFya1JhdyhuZXcgU2V0KCkpLFxyXG4gICAgICAgICAgICAgICAgX2htclBheWxvYWQsXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICA6IHt9LCBwYXJ0aWFsU3RvcmVcclxuICAgIC8vIG11c3QgYmUgYWRkZWQgbGF0ZXJcclxuICAgIC8vIHNldHVwU3RvcmVcclxuICAgICkpO1xyXG4gICAgLy8gc3RvcmUgdGhlIHBhcnRpYWwgc3RvcmUgbm93IHNvIHRoZSBzZXR1cCBvZiBzdG9yZXMgY2FuIGluc3RhbnRpYXRlIGVhY2ggb3RoZXIgYmVmb3JlIHRoZXkgYXJlIGZpbmlzaGVkIHdpdGhvdXRcclxuICAgIC8vIGNyZWF0aW5nIGluZmluaXRlIGxvb3BzLlxyXG4gICAgcGluaWEuX3Muc2V0KCRpZCwgc3RvcmUpO1xyXG4gICAgLy8gVE9ETzogaWRlYSBjcmVhdGUgc2tpcFNlcmlhbGl6ZSB0aGF0IG1hcmtzIHByb3BlcnRpZXMgYXMgbm9uIHNlcmlhbGl6YWJsZSBhbmQgdGhleSBhcmUgc2tpcHBlZFxyXG4gICAgY29uc3Qgc2V0dXBTdG9yZSA9IHBpbmlhLl9lLnJ1bigoKSA9PiB7XHJcbiAgICAgICAgc2NvcGUgPSBlZmZlY3RTY29wZSgpO1xyXG4gICAgICAgIHJldHVybiBzY29wZS5ydW4oKCkgPT4gc2V0dXAoKSk7XHJcbiAgICB9KTtcclxuICAgIC8vIG92ZXJ3cml0ZSBleGlzdGluZyBhY3Rpb25zIHRvIHN1cHBvcnQgJG9uQWN0aW9uXHJcbiAgICBmb3IgKGNvbnN0IGtleSBpbiBzZXR1cFN0b3JlKSB7XHJcbiAgICAgICAgY29uc3QgcHJvcCA9IHNldHVwU3RvcmVba2V5XTtcclxuICAgICAgICBpZiAoKGlzUmVmKHByb3ApICYmICFpc0NvbXB1dGVkKHByb3ApKSB8fCBpc1JlYWN0aXZlKHByb3ApKSB7XHJcbiAgICAgICAgICAgIC8vIG1hcmsgaXQgYXMgYSBwaWVjZSBvZiBzdGF0ZSB0byBiZSBzZXJpYWxpemVkXHJcbiAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgaG90KSB7XHJcbiAgICAgICAgICAgICAgICBzZXQoaG90U3RhdGUudmFsdWUsIGtleSwgdG9SZWYoc2V0dXBTdG9yZSwga2V5KSk7XHJcbiAgICAgICAgICAgICAgICAvLyBjcmVhdGVPcHRpb25TdG9yZSBkaXJlY3RseSBzZXRzIHRoZSBzdGF0ZSBpbiBwaW5pYS5zdGF0ZS52YWx1ZSBzbyB3ZVxyXG4gICAgICAgICAgICAgICAgLy8gY2FuIGp1c3Qgc2tpcCB0aGF0XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoIWJ1aWxkU3RhdGUpIHtcclxuICAgICAgICAgICAgICAgIC8vIGluIHNldHVwIHN0b3JlcyB3ZSBtdXN0IGh5ZHJhdGUgdGhlIHN0YXRlIGFuZCBzeW5jIHBpbmlhIHN0YXRlIHRyZWUgd2l0aCB0aGUgcmVmcyB0aGUgdXNlciBqdXN0IGNyZWF0ZWRcclxuICAgICAgICAgICAgICAgIGlmIChpbml0aWFsU3RhdGUgJiYgc2hvdWxkSHlkcmF0ZShwcm9wKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpc1JlZihwcm9wKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9wLnZhbHVlID0gaW5pdGlhbFN0YXRlW2tleV07XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBwcm9iYWJseSBhIHJlYWN0aXZlIG9iamVjdCwgbGV0cyByZWN1cnNpdmVseSBhc3NpZ25cclxuICAgICAgICAgICAgICAgICAgICAgICAgbWVyZ2VSZWFjdGl2ZU9iamVjdHMocHJvcCwgaW5pdGlhbFN0YXRlW2tleV0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIHRyYW5zZmVyIHRoZSByZWYgdG8gdGhlIHBpbmlhIHN0YXRlIHRvIGtlZXAgZXZlcnl0aGluZyBpbiBzeW5jXHJcbiAgICAgICAgICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cclxuICAgICAgICAgICAgICAgIGlmIChpc1Z1ZTIpIHtcclxuICAgICAgICAgICAgICAgICAgICBzZXQocGluaWEuc3RhdGUudmFsdWVbJGlkXSwga2V5LCBwcm9wKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHBpbmlhLnN0YXRlLnZhbHVlWyRpZF1ba2V5XSA9IHByb3A7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIGVsc2UgKi9cclxuICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xyXG4gICAgICAgICAgICAgICAgX2htclBheWxvYWQuc3RhdGUucHVzaChrZXkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIGFjdGlvblxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICh0eXBlb2YgcHJvcCA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yOiB3ZSBhcmUgb3ZlcnJpZGluZyB0aGUgZnVuY3Rpb24gd2UgYXZvaWQgd3JhcHBpbmcgaWZcclxuICAgICAgICAgICAgY29uc3QgYWN0aW9uVmFsdWUgPSAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgaG90ID8gcHJvcCA6IHdyYXBBY3Rpb24oa2V5LCBwcm9wKTtcclxuICAgICAgICAgICAgLy8gdGhpcyBhIGhvdCBtb2R1bGUgcmVwbGFjZW1lbnQgc3RvcmUgYmVjYXVzZSB0aGUgaG90VXBkYXRlIG1ldGhvZCBuZWVkc1xyXG4gICAgICAgICAgICAvLyB0byBkbyBpdCB3aXRoIHRoZSByaWdodCBjb250ZXh0XHJcbiAgICAgICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xyXG4gICAgICAgICAgICBpZiAoaXNWdWUyKSB7XHJcbiAgICAgICAgICAgICAgICBzZXQoc2V0dXBTdG9yZSwga2V5LCBhY3Rpb25WYWx1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yXHJcbiAgICAgICAgICAgICAgICBzZXR1cFN0b3JlW2tleV0gPSBhY3Rpb25WYWx1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgZWxzZSAqL1xyXG4gICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XHJcbiAgICAgICAgICAgICAgICBfaG1yUGF5bG9hZC5hY3Rpb25zW2tleV0gPSBwcm9wO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIGxpc3QgYWN0aW9ucyBzbyB0aGV5IGNhbiBiZSB1c2VkIGluIHBsdWdpbnNcclxuICAgICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvclxyXG4gICAgICAgICAgICBvcHRpb25zRm9yUGx1Z2luLmFjdGlvbnNba2V5XSA9IHByb3A7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xyXG4gICAgICAgICAgICAvLyBhZGQgZ2V0dGVycyBmb3IgZGV2dG9vbHNcclxuICAgICAgICAgICAgaWYgKGlzQ29tcHV0ZWQocHJvcCkpIHtcclxuICAgICAgICAgICAgICAgIF9obXJQYXlsb2FkLmdldHRlcnNba2V5XSA9IGJ1aWxkU3RhdGVcclxuICAgICAgICAgICAgICAgICAgICA/IC8vIEB0cy1leHBlY3QtZXJyb3JcclxuICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5nZXR0ZXJzW2tleV1cclxuICAgICAgICAgICAgICAgICAgICA6IHByb3A7XHJcbiAgICAgICAgICAgICAgICBpZiAoSVNfQ0xJRU5UKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZ2V0dGVycyA9IFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3I6IGl0IHNob3VsZCBiZSBvbiB0aGUgc3RvcmVcclxuICAgICAgICAgICAgICAgICAgICBzZXR1cFN0b3JlLl9nZXR0ZXJzIHx8IChzZXR1cFN0b3JlLl9nZXR0ZXJzID0gbWFya1JhdyhbXSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGdldHRlcnMucHVzaChrZXkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy8gYWRkIHRoZSBzdGF0ZSwgZ2V0dGVycywgYW5kIGFjdGlvbiBwcm9wZXJ0aWVzXHJcbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cclxuICAgIGlmIChpc1Z1ZTIpIHtcclxuICAgICAgICBPYmplY3Qua2V5cyhzZXR1cFN0b3JlKS5mb3JFYWNoKChrZXkpID0+IHtcclxuICAgICAgICAgICAgc2V0KHN0b3JlLCBrZXksIFxyXG4gICAgICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yOiB2YWxpZCBrZXkgaW5kZXhpbmdcclxuICAgICAgICAgICAgc2V0dXBTdG9yZVtrZXldKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIGFzc2lnbihzdG9yZSwgc2V0dXBTdG9yZSk7XHJcbiAgICAgICAgLy8gYWxsb3dzIHJldHJpZXZpbmcgcmVhY3RpdmUgb2JqZWN0cyB3aXRoIGBzdG9yZVRvUmVmcygpYC4gTXVzdCBiZSBjYWxsZWQgYWZ0ZXIgYXNzaWduaW5nIHRvIHRoZSByZWFjdGl2ZSBvYmplY3QuXHJcbiAgICAgICAgLy8gTWFrZSBgc3RvcmVUb1JlZnMoKWAgd29yayB3aXRoIGByZWFjdGl2ZSgpYCAjNzk5XHJcbiAgICAgICAgYXNzaWduKHRvUmF3KHN0b3JlKSwgc2V0dXBTdG9yZSk7XHJcbiAgICB9XHJcbiAgICAvLyB1c2UgdGhpcyBpbnN0ZWFkIG9mIGEgY29tcHV0ZWQgd2l0aCBzZXR0ZXIgdG8gYmUgYWJsZSB0byBjcmVhdGUgaXQgYW55d2hlcmVcclxuICAgIC8vIHdpdGhvdXQgbGlua2luZyB0aGUgY29tcHV0ZWQgbGlmZXNwYW4gdG8gd2hlcmV2ZXIgdGhlIHN0b3JlIGlzIGZpcnN0XHJcbiAgICAvLyBjcmVhdGVkLlxyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHN0b3JlLCAnJHN0YXRlJywge1xyXG4gICAgICAgIGdldDogKCkgPT4gKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiBob3QgPyBob3RTdGF0ZS52YWx1ZSA6IHBpbmlhLnN0YXRlLnZhbHVlWyRpZF0pLFxyXG4gICAgICAgIHNldDogKHN0YXRlKSA9PiB7XHJcbiAgICAgICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xyXG4gICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmIGhvdCkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdjYW5ub3Qgc2V0IGhvdFN0YXRlJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgJHBhdGNoKCgkc3RhdGUpID0+IHtcclxuICAgICAgICAgICAgICAgIGFzc2lnbigkc3RhdGUsIHN0YXRlKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSxcclxuICAgIH0pO1xyXG4gICAgLy8gYWRkIHRoZSBob3RVcGRhdGUgYmVmb3JlIHBsdWdpbnMgdG8gYWxsb3cgdGhlbSB0byBvdmVycmlkZSBpdFxyXG4gICAgLyogaXN0YW5idWwgaWdub3JlIGVsc2UgKi9cclxuICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcclxuICAgICAgICBzdG9yZS5faG90VXBkYXRlID0gbWFya1JhdygobmV3U3RvcmUpID0+IHtcclxuICAgICAgICAgICAgc3RvcmUuX2hvdFVwZGF0aW5nID0gdHJ1ZTtcclxuICAgICAgICAgICAgbmV3U3RvcmUuX2htclBheWxvYWQuc3RhdGUuZm9yRWFjaCgoc3RhdGVLZXkpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChzdGF0ZUtleSBpbiBzdG9yZS4kc3RhdGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdTdGF0ZVRhcmdldCA9IG5ld1N0b3JlLiRzdGF0ZVtzdGF0ZUtleV07XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgb2xkU3RhdGVTb3VyY2UgPSBzdG9yZS4kc3RhdGVbc3RhdGVLZXldO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgbmV3U3RhdGVUYXJnZXQgPT09ICdvYmplY3QnICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzUGxhaW5PYmplY3QobmV3U3RhdGVUYXJnZXQpICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzUGxhaW5PYmplY3Qob2xkU3RhdGVTb3VyY2UpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhdGNoT2JqZWN0KG5ld1N0YXRlVGFyZ2V0LCBvbGRTdGF0ZVNvdXJjZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB0cmFuc2ZlciB0aGUgcmVmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld1N0b3JlLiRzdGF0ZVtzdGF0ZUtleV0gPSBvbGRTdGF0ZVNvdXJjZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyBwYXRjaCBkaXJlY3QgYWNjZXNzIHByb3BlcnRpZXMgdG8gYWxsb3cgc3RvcmUuc3RhdGVQcm9wZXJ0eSB0byB3b3JrIGFzXHJcbiAgICAgICAgICAgICAgICAvLyBzdG9yZS4kc3RhdGUuc3RhdGVQcm9wZXJ0eVxyXG4gICAgICAgICAgICAgICAgc2V0KHN0b3JlLCBzdGF0ZUtleSwgdG9SZWYobmV3U3RvcmUuJHN0YXRlLCBzdGF0ZUtleSkpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgLy8gcmVtb3ZlIGRlbGV0ZWQgc3RhdGUgcHJvcGVydGllc1xyXG4gICAgICAgICAgICBPYmplY3Qua2V5cyhzdG9yZS4kc3RhdGUpLmZvckVhY2goKHN0YXRlS2V5KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIShzdGF0ZUtleSBpbiBuZXdTdG9yZS4kc3RhdGUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVsKHN0b3JlLCBzdGF0ZUtleSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAvLyBhdm9pZCBkZXZ0b29scyBsb2dnaW5nIHRoaXMgYXMgYSBtdXRhdGlvblxyXG4gICAgICAgICAgICBpc0xpc3RlbmluZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICBpc1N5bmNMaXN0ZW5pbmcgPSBmYWxzZTtcclxuICAgICAgICAgICAgcGluaWEuc3RhdGUudmFsdWVbJGlkXSA9IHRvUmVmKG5ld1N0b3JlLl9obXJQYXlsb2FkLCAnaG90U3RhdGUnKTtcclxuICAgICAgICAgICAgaXNTeW5jTGlzdGVuaW5nID0gdHJ1ZTtcclxuICAgICAgICAgICAgbmV4dFRpY2soKS50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIGlzTGlzdGVuaW5nID0gdHJ1ZTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgYWN0aW9uTmFtZSBpbiBuZXdTdG9yZS5faG1yUGF5bG9hZC5hY3Rpb25zKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBhY3Rpb24gPSBuZXdTdG9yZVthY3Rpb25OYW1lXTtcclxuICAgICAgICAgICAgICAgIHNldChzdG9yZSwgYWN0aW9uTmFtZSwgd3JhcEFjdGlvbihhY3Rpb25OYW1lLCBhY3Rpb24pKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBUT0RPOiBkb2VzIHRoaXMgd29yayBpbiBib3RoIHNldHVwIGFuZCBvcHRpb24gc3RvcmU/XHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgZ2V0dGVyTmFtZSBpbiBuZXdTdG9yZS5faG1yUGF5bG9hZC5nZXR0ZXJzKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBnZXR0ZXIgPSBuZXdTdG9yZS5faG1yUGF5bG9hZC5nZXR0ZXJzW2dldHRlck5hbWVdO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZ2V0dGVyVmFsdWUgPSBidWlsZFN0YXRlXHJcbiAgICAgICAgICAgICAgICAgICAgPyAvLyBzcGVjaWFsIGhhbmRsaW5nIG9mIG9wdGlvbnMgYXBpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbXB1dGVkKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldEFjdGl2ZVBpbmlhKHBpbmlhKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBnZXR0ZXIuY2FsbChzdG9yZSwgc3RvcmUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgIDogZ2V0dGVyO1xyXG4gICAgICAgICAgICAgICAgc2V0KHN0b3JlLCBnZXR0ZXJOYW1lLCBnZXR0ZXJWYWx1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gcmVtb3ZlIGRlbGV0ZWQgZ2V0dGVyc1xyXG4gICAgICAgICAgICBPYmplY3Qua2V5cyhzdG9yZS5faG1yUGF5bG9hZC5nZXR0ZXJzKS5mb3JFYWNoKChrZXkpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmICghKGtleSBpbiBuZXdTdG9yZS5faG1yUGF5bG9hZC5nZXR0ZXJzKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGRlbChzdG9yZSwga2V5KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIC8vIHJlbW92ZSBvbGQgYWN0aW9uc1xyXG4gICAgICAgICAgICBPYmplY3Qua2V5cyhzdG9yZS5faG1yUGF5bG9hZC5hY3Rpb25zKS5mb3JFYWNoKChrZXkpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmICghKGtleSBpbiBuZXdTdG9yZS5faG1yUGF5bG9hZC5hY3Rpb25zKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGRlbChzdG9yZSwga2V5KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIC8vIHVwZGF0ZSB0aGUgdmFsdWVzIHVzZWQgaW4gZGV2dG9vbHMgYW5kIHRvIGFsbG93IGRlbGV0aW5nIG5ldyBwcm9wZXJ0aWVzIGxhdGVyIG9uXHJcbiAgICAgICAgICAgIHN0b3JlLl9obXJQYXlsb2FkID0gbmV3U3RvcmUuX2htclBheWxvYWQ7XHJcbiAgICAgICAgICAgIHN0b3JlLl9nZXR0ZXJzID0gbmV3U3RvcmUuX2dldHRlcnM7XHJcbiAgICAgICAgICAgIHN0b3JlLl9ob3RVcGRhdGluZyA9IGZhbHNlO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGNvbnN0IG5vbkVudW1lcmFibGUgPSB7XHJcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxyXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXHJcbiAgICAgICAgICAgIC8vIGF2b2lkIHdhcm5pbmcgb24gZGV2dG9vbHMgdHJ5aW5nIHRvIGRpc3BsYXkgdGhpcyBwcm9wZXJ0eVxyXG4gICAgICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcclxuICAgICAgICB9O1xyXG4gICAgICAgIGlmIChJU19DTElFTlQpIHtcclxuICAgICAgICAgICAgWydfcCcsICdfaG1yUGF5bG9hZCcsICdfZ2V0dGVycycsICdfY3VzdG9tUHJvcGVydGllcyddLmZvckVhY2goKHApID0+IHtcclxuICAgICAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzdG9yZSwgcCwge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBzdG9yZVtwXSxcclxuICAgICAgICAgICAgICAgICAgICAuLi5ub25FbnVtZXJhYmxlLFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xyXG4gICAgaWYgKGlzVnVlMikge1xyXG4gICAgICAgIC8vIG1hcmsgdGhlIHN0b3JlIGFzIHJlYWR5IGJlZm9yZSBwbHVnaW5zXHJcbiAgICAgICAgc3RvcmUuX3IgPSB0cnVlO1xyXG4gICAgfVxyXG4gICAgLy8gYXBwbHkgYWxsIHBsdWdpbnNcclxuICAgIHBpbmlhLl9wLmZvckVhY2goKGV4dGVuZGVyKSA9PiB7XHJcbiAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIGVsc2UgKi9cclxuICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmIElTX0NMSUVOVCkge1xyXG4gICAgICAgICAgICBjb25zdCBleHRlbnNpb25zID0gc2NvcGUucnVuKCgpID0+IGV4dGVuZGVyKHtcclxuICAgICAgICAgICAgICAgIHN0b3JlLFxyXG4gICAgICAgICAgICAgICAgYXBwOiBwaW5pYS5fYSxcclxuICAgICAgICAgICAgICAgIHBpbmlhLFxyXG4gICAgICAgICAgICAgICAgb3B0aW9uczogb3B0aW9uc0ZvclBsdWdpbixcclxuICAgICAgICAgICAgfSkpO1xyXG4gICAgICAgICAgICBPYmplY3Qua2V5cyhleHRlbnNpb25zIHx8IHt9KS5mb3JFYWNoKChrZXkpID0+IHN0b3JlLl9jdXN0b21Qcm9wZXJ0aWVzLmFkZChrZXkpKTtcclxuICAgICAgICAgICAgYXNzaWduKHN0b3JlLCBleHRlbnNpb25zKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGFzc2lnbihzdG9yZSwgc2NvcGUucnVuKCgpID0+IGV4dGVuZGVyKHtcclxuICAgICAgICAgICAgICAgIHN0b3JlLFxyXG4gICAgICAgICAgICAgICAgYXBwOiBwaW5pYS5fYSxcclxuICAgICAgICAgICAgICAgIHBpbmlhLFxyXG4gICAgICAgICAgICAgICAgb3B0aW9uczogb3B0aW9uc0ZvclBsdWdpbixcclxuICAgICAgICAgICAgfSkpKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiZcclxuICAgICAgICBzdG9yZS4kc3RhdGUgJiZcclxuICAgICAgICB0eXBlb2Ygc3RvcmUuJHN0YXRlID09PSAnb2JqZWN0JyAmJlxyXG4gICAgICAgIHR5cGVvZiBzdG9yZS4kc3RhdGUuY29uc3RydWN0b3IgPT09ICdmdW5jdGlvbicgJiZcclxuICAgICAgICAhc3RvcmUuJHN0YXRlLmNvbnN0cnVjdG9yLnRvU3RyaW5nKCkuaW5jbHVkZXMoJ1tuYXRpdmUgY29kZV0nKSkge1xyXG4gICAgICAgIGNvbnNvbGUud2FybihgW/CfjY1dOiBUaGUgXCJzdGF0ZVwiIG11c3QgYmUgYSBwbGFpbiBvYmplY3QuIEl0IGNhbm5vdCBiZVxcbmAgK1xyXG4gICAgICAgICAgICBgXFx0c3RhdGU6ICgpID0+IG5ldyBNeUNsYXNzKClcXG5gICtcclxuICAgICAgICAgICAgYEZvdW5kIGluIHN0b3JlIFwiJHtzdG9yZS4kaWR9XCIuYCk7XHJcbiAgICB9XHJcbiAgICAvLyBvbmx5IGFwcGx5IGh5ZHJhdGUgdG8gb3B0aW9uIHN0b3JlcyB3aXRoIGFuIGluaXRpYWwgc3RhdGUgaW4gcGluaWFcclxuICAgIGlmIChpbml0aWFsU3RhdGUgJiZcclxuICAgICAgICBidWlsZFN0YXRlICYmXHJcbiAgICAgICAgb3B0aW9ucy5oeWRyYXRlKSB7XHJcbiAgICAgICAgb3B0aW9ucy5oeWRyYXRlKHN0b3JlLiRzdGF0ZSwgaW5pdGlhbFN0YXRlKTtcclxuICAgIH1cclxuICAgIGlzTGlzdGVuaW5nID0gdHJ1ZTtcclxuICAgIGlzU3luY0xpc3RlbmluZyA9IHRydWU7XHJcbiAgICByZXR1cm4gc3RvcmU7XHJcbn1cclxuZnVuY3Rpb24gZGVmaW5lU3RvcmUoXHJcbi8vIFRPRE86IGFkZCBwcm9wZXIgdHlwZXMgZnJvbSBhYm92ZVxyXG5pZE9yT3B0aW9ucywgc2V0dXAsIHNldHVwT3B0aW9ucykge1xyXG4gICAgbGV0IGlkO1xyXG4gICAgbGV0IG9wdGlvbnM7XHJcbiAgICBjb25zdCBpc1NldHVwU3RvcmUgPSB0eXBlb2Ygc2V0dXAgPT09ICdmdW5jdGlvbic7XHJcbiAgICBpZiAodHlwZW9mIGlkT3JPcHRpb25zID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgIGlkID0gaWRPck9wdGlvbnM7XHJcbiAgICAgICAgLy8gdGhlIG9wdGlvbiBzdG9yZSBzZXR1cCB3aWxsIGNvbnRhaW4gdGhlIGFjdHVhbCBvcHRpb25zIGluIHRoaXMgY2FzZVxyXG4gICAgICAgIG9wdGlvbnMgPSBpc1NldHVwU3RvcmUgPyBzZXR1cE9wdGlvbnMgOiBzZXR1cDtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIG9wdGlvbnMgPSBpZE9yT3B0aW9ucztcclxuICAgICAgICBpZCA9IGlkT3JPcHRpb25zLmlkO1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gdXNlU3RvcmUocGluaWEsIGhvdCkge1xyXG4gICAgICAgIGNvbnN0IGN1cnJlbnRJbnN0YW5jZSA9IGdldEN1cnJlbnRJbnN0YW5jZSgpO1xyXG4gICAgICAgIHBpbmlhID1cclxuICAgICAgICAgICAgLy8gaW4gdGVzdCBtb2RlLCBpZ25vcmUgdGhlIGFyZ3VtZW50IHByb3ZpZGVkIGFzIHdlIGNhbiBhbHdheXMgcmV0cmlldmUgYVxyXG4gICAgICAgICAgICAvLyBwaW5pYSBpbnN0YW5jZSB3aXRoIGdldEFjdGl2ZVBpbmlhKClcclxuICAgICAgICAgICAgKChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ3Rlc3QnKSAmJiBhY3RpdmVQaW5pYSAmJiBhY3RpdmVQaW5pYS5fdGVzdGluZyA/IG51bGwgOiBwaW5pYSkgfHxcclxuICAgICAgICAgICAgICAgIChjdXJyZW50SW5zdGFuY2UgJiYgaW5qZWN0KHBpbmlhU3ltYm9sKSk7XHJcbiAgICAgICAgaWYgKHBpbmlhKVxyXG4gICAgICAgICAgICBzZXRBY3RpdmVQaW5pYShwaW5pYSk7XHJcbiAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiAhYWN0aXZlUGluaWEpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBb8J+NjV06IGdldEFjdGl2ZVBpbmlhIHdhcyBjYWxsZWQgd2l0aCBubyBhY3RpdmUgUGluaWEuIERpZCB5b3UgZm9yZ2V0IHRvIGluc3RhbGwgcGluaWE/XFxuYCArXHJcbiAgICAgICAgICAgICAgICBgXFx0Y29uc3QgcGluaWEgPSBjcmVhdGVQaW5pYSgpXFxuYCArXHJcbiAgICAgICAgICAgICAgICBgXFx0YXBwLnVzZShwaW5pYSlcXG5gICtcclxuICAgICAgICAgICAgICAgIGBUaGlzIHdpbGwgZmFpbCBpbiBwcm9kdWN0aW9uLmApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwaW5pYSA9IGFjdGl2ZVBpbmlhO1xyXG4gICAgICAgIGlmICghcGluaWEuX3MuaGFzKGlkKSkge1xyXG4gICAgICAgICAgICAvLyBjcmVhdGluZyB0aGUgc3RvcmUgcmVnaXN0ZXJzIGl0IGluIGBwaW5pYS5fc2BcclxuICAgICAgICAgICAgaWYgKGlzU2V0dXBTdG9yZSkge1xyXG4gICAgICAgICAgICAgICAgY3JlYXRlU2V0dXBTdG9yZShpZCwgc2V0dXAsIG9wdGlvbnMsIHBpbmlhKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNyZWF0ZU9wdGlvbnNTdG9yZShpZCwgb3B0aW9ucywgcGluaWEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBlbHNlICovXHJcbiAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcclxuICAgICAgICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3I6IG5vdCB0aGUgcmlnaHQgaW5mZXJyZWQgdHlwZVxyXG4gICAgICAgICAgICAgICAgdXNlU3RvcmUuX3BpbmlhID0gcGluaWE7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3Qgc3RvcmUgPSBwaW5pYS5fcy5nZXQoaWQpO1xyXG4gICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgaG90KSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGhvdElkID0gJ19faG90OicgKyBpZDtcclxuICAgICAgICAgICAgY29uc3QgbmV3U3RvcmUgPSBpc1NldHVwU3RvcmVcclxuICAgICAgICAgICAgICAgID8gY3JlYXRlU2V0dXBTdG9yZShob3RJZCwgc2V0dXAsIG9wdGlvbnMsIHBpbmlhLCB0cnVlKVxyXG4gICAgICAgICAgICAgICAgOiBjcmVhdGVPcHRpb25zU3RvcmUoaG90SWQsIGFzc2lnbih7fSwgb3B0aW9ucyksIHBpbmlhLCB0cnVlKTtcclxuICAgICAgICAgICAgaG90Ll9ob3RVcGRhdGUobmV3U3RvcmUpO1xyXG4gICAgICAgICAgICAvLyBjbGVhbnVwIHRoZSBzdGF0ZSBwcm9wZXJ0aWVzIGFuZCB0aGUgc3RvcmUgZnJvbSB0aGUgY2FjaGVcclxuICAgICAgICAgICAgZGVsZXRlIHBpbmlhLnN0YXRlLnZhbHVlW2hvdElkXTtcclxuICAgICAgICAgICAgcGluaWEuX3MuZGVsZXRlKGhvdElkKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gc2F2ZSBzdG9yZXMgaW4gaW5zdGFuY2VzIHRvIGFjY2VzcyB0aGVtIGRldnRvb2xzXHJcbiAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJlxyXG4gICAgICAgICAgICBJU19DTElFTlQgJiZcclxuICAgICAgICAgICAgY3VycmVudEluc3RhbmNlICYmXHJcbiAgICAgICAgICAgIGN1cnJlbnRJbnN0YW5jZS5wcm94eSAmJlxyXG4gICAgICAgICAgICAvLyBhdm9pZCBhZGRpbmcgc3RvcmVzIHRoYXQgYXJlIGp1c3QgYnVpbHQgZm9yIGhvdCBtb2R1bGUgcmVwbGFjZW1lbnRcclxuICAgICAgICAgICAgIWhvdCkge1xyXG4gICAgICAgICAgICBjb25zdCB2bSA9IGN1cnJlbnRJbnN0YW5jZS5wcm94eTtcclxuICAgICAgICAgICAgY29uc3QgY2FjaGUgPSAnX3BTdG9yZXMnIGluIHZtID8gdm0uX3BTdG9yZXMgOiAodm0uX3BTdG9yZXMgPSB7fSk7XHJcbiAgICAgICAgICAgIGNhY2hlW2lkXSA9IHN0b3JlO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBTdG9yZUdlbmVyaWMgY2Fubm90IGJlIGNhc3RlZCB0b3dhcmRzIFN0b3JlXHJcbiAgICAgICAgcmV0dXJuIHN0b3JlO1xyXG4gICAgfVxyXG4gICAgdXNlU3RvcmUuJGlkID0gaWQ7XHJcbiAgICByZXR1cm4gdXNlU3RvcmU7XHJcbn1cblxubGV0IG1hcFN0b3JlU3VmZml4ID0gJ1N0b3JlJztcclxuLyoqXHJcbiAqIENoYW5nZXMgdGhlIHN1ZmZpeCBhZGRlZCBieSBgbWFwU3RvcmVzKClgLiBDYW4gYmUgc2V0IHRvIGFuIGVtcHR5IHN0cmluZy5cclxuICogRGVmYXVsdHMgdG8gYFwiU3RvcmVcImAuIE1ha2Ugc3VyZSB0byBleHRlbmQgdGhlIE1hcFN0b3Jlc0N1c3RvbWl6YXRpb25cclxuICogaW50ZXJmYWNlIGlmIHlvdSBuZWVkIGFyZSB1c2luZyBUeXBlU2NyaXB0LlxyXG4gKlxyXG4gKiBAcGFyYW0gc3VmZml4IC0gbmV3IHN1ZmZpeFxyXG4gKi9cclxuZnVuY3Rpb24gc2V0TWFwU3RvcmVTdWZmaXgoc3VmZml4IC8vIGNvdWxkIGJlICdTdG9yZScgYnV0IHRoYXQgd291bGQgYmUgYW5ub3lpbmcgZm9yIEpTXHJcbikge1xyXG4gICAgbWFwU3RvcmVTdWZmaXggPSBzdWZmaXg7XHJcbn1cclxuLyoqXHJcbiAqIEFsbG93cyB1c2luZyBzdG9yZXMgd2l0aG91dCB0aGUgY29tcG9zaXRpb24gQVBJIChgc2V0dXAoKWApIGJ5IGdlbmVyYXRpbmcgYW5cclxuICogb2JqZWN0IHRvIGJlIHNwcmVhZCBpbiB0aGUgYGNvbXB1dGVkYCBmaWVsZCBvZiBhIGNvbXBvbmVudC4gSXQgYWNjZXB0cyBhIGxpc3RcclxuICogb2Ygc3RvcmUgZGVmaW5pdGlvbnMuXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIGBgYGpzXHJcbiAqIGV4cG9ydCBkZWZhdWx0IHtcclxuICogICBjb21wdXRlZDoge1xyXG4gKiAgICAgLy8gb3RoZXIgY29tcHV0ZWQgcHJvcGVydGllc1xyXG4gKiAgICAgLi4ubWFwU3RvcmVzKHVzZVVzZXJTdG9yZSwgdXNlQ2FydFN0b3JlKVxyXG4gKiAgIH0sXHJcbiAqXHJcbiAqICAgY3JlYXRlZCgpIHtcclxuICogICAgIHRoaXMudXNlclN0b3JlIC8vIHN0b3JlIHdpdGggaWQgXCJ1c2VyXCJcclxuICogICAgIHRoaXMuY2FydFN0b3JlIC8vIHN0b3JlIHdpdGggaWQgXCJjYXJ0XCJcclxuICogICB9XHJcbiAqIH1cclxuICogYGBgXHJcbiAqXHJcbiAqIEBwYXJhbSBzdG9yZXMgLSBsaXN0IG9mIHN0b3JlcyB0byBtYXAgdG8gYW4gb2JqZWN0XHJcbiAqL1xyXG5mdW5jdGlvbiBtYXBTdG9yZXMoLi4uc3RvcmVzKSB7XHJcbiAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmIEFycmF5LmlzQXJyYXkoc3RvcmVzWzBdKSkge1xyXG4gICAgICAgIGNvbnNvbGUud2FybihgW/CfjY1dOiBEaXJlY3RseSBwYXNzIGFsbCBzdG9yZXMgdG8gXCJtYXBTdG9yZXMoKVwiIHdpdGhvdXQgcHV0dGluZyB0aGVtIGluIGFuIGFycmF5OlxcbmAgK1xyXG4gICAgICAgICAgICBgUmVwbGFjZVxcbmAgK1xyXG4gICAgICAgICAgICBgXFx0bWFwU3RvcmVzKFt1c2VBdXRoU3RvcmUsIHVzZUNhcnRTdG9yZV0pXFxuYCArXHJcbiAgICAgICAgICAgIGB3aXRoXFxuYCArXHJcbiAgICAgICAgICAgIGBcXHRtYXBTdG9yZXModXNlQXV0aFN0b3JlLCB1c2VDYXJ0U3RvcmUpXFxuYCArXHJcbiAgICAgICAgICAgIGBUaGlzIHdpbGwgZmFpbCBpbiBwcm9kdWN0aW9uIGlmIG5vdCBmaXhlZC5gKTtcclxuICAgICAgICBzdG9yZXMgPSBzdG9yZXNbMF07XHJcbiAgICB9XHJcbiAgICByZXR1cm4gc3RvcmVzLnJlZHVjZSgocmVkdWNlZCwgdXNlU3RvcmUpID0+IHtcclxuICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yOiAkaWQgaXMgYWRkZWQgYnkgZGVmaW5lU3RvcmVcclxuICAgICAgICByZWR1Y2VkW3VzZVN0b3JlLiRpZCArIG1hcFN0b3JlU3VmZml4XSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHVzZVN0b3JlKHRoaXMuJHBpbmlhKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHJldHVybiByZWR1Y2VkO1xyXG4gICAgfSwge30pO1xyXG59XHJcbi8qKlxyXG4gKiBBbGxvd3MgdXNpbmcgc3RhdGUgYW5kIGdldHRlcnMgZnJvbSBvbmUgc3RvcmUgd2l0aG91dCB1c2luZyB0aGUgY29tcG9zaXRpb25cclxuICogQVBJIChgc2V0dXAoKWApIGJ5IGdlbmVyYXRpbmcgYW4gb2JqZWN0IHRvIGJlIHNwcmVhZCBpbiB0aGUgYGNvbXB1dGVkYCBmaWVsZFxyXG4gKiBvZiBhIGNvbXBvbmVudC5cclxuICpcclxuICogQHBhcmFtIHVzZVN0b3JlIC0gc3RvcmUgdG8gbWFwIGZyb21cclxuICogQHBhcmFtIGtleXNPck1hcHBlciAtIGFycmF5IG9yIG9iamVjdFxyXG4gKi9cclxuZnVuY3Rpb24gbWFwU3RhdGUodXNlU3RvcmUsIGtleXNPck1hcHBlcikge1xyXG4gICAgcmV0dXJuIEFycmF5LmlzQXJyYXkoa2V5c09yTWFwcGVyKVxyXG4gICAgICAgID8ga2V5c09yTWFwcGVyLnJlZHVjZSgocmVkdWNlZCwga2V5KSA9PiB7XHJcbiAgICAgICAgICAgIHJlZHVjZWRba2V5XSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB1c2VTdG9yZSh0aGlzLiRwaW5pYSlba2V5XTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgcmV0dXJuIHJlZHVjZWQ7XHJcbiAgICAgICAgfSwge30pXHJcbiAgICAgICAgOiBPYmplY3Qua2V5cyhrZXlzT3JNYXBwZXIpLnJlZHVjZSgocmVkdWNlZCwga2V5KSA9PiB7XHJcbiAgICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3JcclxuICAgICAgICAgICAgcmVkdWNlZFtrZXldID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc3RvcmUgPSB1c2VTdG9yZSh0aGlzLiRwaW5pYSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzdG9yZUtleSA9IGtleXNPck1hcHBlcltrZXldO1xyXG4gICAgICAgICAgICAgICAgLy8gZm9yIHNvbWUgcmVhc29uIFRTIGlzIHVuYWJsZSB0byBpbmZlciB0aGUgdHlwZSBvZiBzdG9yZUtleSB0byBiZSBhXHJcbiAgICAgICAgICAgICAgICAvLyBmdW5jdGlvblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHR5cGVvZiBzdG9yZUtleSA9PT0gJ2Z1bmN0aW9uJ1xyXG4gICAgICAgICAgICAgICAgICAgID8gc3RvcmVLZXkuY2FsbCh0aGlzLCBzdG9yZSlcclxuICAgICAgICAgICAgICAgICAgICA6IHN0b3JlW3N0b3JlS2V5XTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgcmV0dXJuIHJlZHVjZWQ7XHJcbiAgICAgICAgfSwge30pO1xyXG59XHJcbi8qKlxyXG4gKiBBbGlhcyBmb3IgYG1hcFN0YXRlKClgLiBZb3Ugc2hvdWxkIHVzZSBgbWFwU3RhdGUoKWAgaW5zdGVhZC5cclxuICogQGRlcHJlY2F0ZWQgdXNlIGBtYXBTdGF0ZSgpYCBpbnN0ZWFkLlxyXG4gKi9cclxuY29uc3QgbWFwR2V0dGVycyA9IG1hcFN0YXRlO1xyXG4vKipcclxuICogQWxsb3dzIGRpcmVjdGx5IHVzaW5nIGFjdGlvbnMgZnJvbSB5b3VyIHN0b3JlIHdpdGhvdXQgdXNpbmcgdGhlIGNvbXBvc2l0aW9uXHJcbiAqIEFQSSAoYHNldHVwKClgKSBieSBnZW5lcmF0aW5nIGFuIG9iamVjdCB0byBiZSBzcHJlYWQgaW4gdGhlIGBtZXRob2RzYCBmaWVsZFxyXG4gKiBvZiBhIGNvbXBvbmVudC5cclxuICpcclxuICogQHBhcmFtIHVzZVN0b3JlIC0gc3RvcmUgdG8gbWFwIGZyb21cclxuICogQHBhcmFtIGtleXNPck1hcHBlciAtIGFycmF5IG9yIG9iamVjdFxyXG4gKi9cclxuZnVuY3Rpb24gbWFwQWN0aW9ucyh1c2VTdG9yZSwga2V5c09yTWFwcGVyKSB7XHJcbiAgICByZXR1cm4gQXJyYXkuaXNBcnJheShrZXlzT3JNYXBwZXIpXHJcbiAgICAgICAgPyBrZXlzT3JNYXBwZXIucmVkdWNlKChyZWR1Y2VkLCBrZXkpID0+IHtcclxuICAgICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvclxyXG4gICAgICAgICAgICByZWR1Y2VkW2tleV0gPSBmdW5jdGlvbiAoLi4uYXJncykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHVzZVN0b3JlKHRoaXMuJHBpbmlhKVtrZXldKC4uLmFyZ3MpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICByZXR1cm4gcmVkdWNlZDtcclxuICAgICAgICB9LCB7fSlcclxuICAgICAgICA6IE9iamVjdC5rZXlzKGtleXNPck1hcHBlcikucmVkdWNlKChyZWR1Y2VkLCBrZXkpID0+IHtcclxuICAgICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvclxyXG4gICAgICAgICAgICByZWR1Y2VkW2tleV0gPSBmdW5jdGlvbiAoLi4uYXJncykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHVzZVN0b3JlKHRoaXMuJHBpbmlhKVtrZXlzT3JNYXBwZXJba2V5XV0oLi4uYXJncyk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHJldHVybiByZWR1Y2VkO1xyXG4gICAgICAgIH0sIHt9KTtcclxufVxyXG4vKipcclxuICogQWxsb3dzIHVzaW5nIHN0YXRlIGFuZCBnZXR0ZXJzIGZyb20gb25lIHN0b3JlIHdpdGhvdXQgdXNpbmcgdGhlIGNvbXBvc2l0aW9uXHJcbiAqIEFQSSAoYHNldHVwKClgKSBieSBnZW5lcmF0aW5nIGFuIG9iamVjdCB0byBiZSBzcHJlYWQgaW4gdGhlIGBjb21wdXRlZGAgZmllbGRcclxuICogb2YgYSBjb21wb25lbnQuXHJcbiAqXHJcbiAqIEBwYXJhbSB1c2VTdG9yZSAtIHN0b3JlIHRvIG1hcCBmcm9tXHJcbiAqIEBwYXJhbSBrZXlzT3JNYXBwZXIgLSBhcnJheSBvciBvYmplY3RcclxuICovXHJcbmZ1bmN0aW9uIG1hcFdyaXRhYmxlU3RhdGUodXNlU3RvcmUsIGtleXNPck1hcHBlcikge1xyXG4gICAgcmV0dXJuIEFycmF5LmlzQXJyYXkoa2V5c09yTWFwcGVyKVxyXG4gICAgICAgID8ga2V5c09yTWFwcGVyLnJlZHVjZSgocmVkdWNlZCwga2V5KSA9PiB7XHJcbiAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICAgICAgcmVkdWNlZFtrZXldID0ge1xyXG4gICAgICAgICAgICAgICAgZ2V0KCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB1c2VTdG9yZSh0aGlzLiRwaW5pYSlba2V5XTtcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBzZXQodmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBpdCdzIGVhc2llciB0byB0eXBlIGl0IGhlcmUgYXMgYW55XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICh1c2VTdG9yZSh0aGlzLiRwaW5pYSlba2V5XSA9IHZhbHVlKTtcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHJldHVybiByZWR1Y2VkO1xyXG4gICAgICAgIH0sIHt9KVxyXG4gICAgICAgIDogT2JqZWN0LmtleXMoa2V5c09yTWFwcGVyKS5yZWR1Y2UoKHJlZHVjZWQsIGtleSkgPT4ge1xyXG4gICAgICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgICAgIHJlZHVjZWRba2V5XSA9IHtcclxuICAgICAgICAgICAgICAgIGdldCgpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdXNlU3RvcmUodGhpcy4kcGluaWEpW2tleXNPck1hcHBlcltrZXldXTtcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBzZXQodmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBpdCdzIGVhc2llciB0byB0eXBlIGl0IGhlcmUgYXMgYW55XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICh1c2VTdG9yZSh0aGlzLiRwaW5pYSlba2V5c09yTWFwcGVyW2tleV1dID0gdmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgcmV0dXJuIHJlZHVjZWQ7XHJcbiAgICAgICAgfSwge30pO1xyXG59XG5cbi8qKlxyXG4gKiBDcmVhdGVzIGFuIG9iamVjdCBvZiByZWZlcmVuY2VzIHdpdGggYWxsIHRoZSBzdGF0ZSwgZ2V0dGVycywgYW5kIHBsdWdpbi1hZGRlZFxyXG4gKiBzdGF0ZSBwcm9wZXJ0aWVzIG9mIHRoZSBzdG9yZS4gU2ltaWxhciB0byBgdG9SZWZzKClgIGJ1dCBzcGVjaWZpY2FsbHlcclxuICogZGVzaWduZWQgZm9yIFBpbmlhIHN0b3JlcyBzbyBtZXRob2RzIGFuZCBub24gcmVhY3RpdmUgcHJvcGVydGllcyBhcmVcclxuICogY29tcGxldGVseSBpZ25vcmVkLlxyXG4gKlxyXG4gKiBAcGFyYW0gc3RvcmUgLSBzdG9yZSB0byBleHRyYWN0IHRoZSByZWZzIGZyb21cclxuICovXHJcbmZ1bmN0aW9uIHN0b3JlVG9SZWZzKHN0b3JlKSB7XHJcbiAgICAvLyBTZWUgaHR0cHM6Ly9naXRodWIuY29tL3Z1ZWpzL3BpbmlhL2lzc3Vlcy84NTJcclxuICAgIC8vIEl0J3MgZWFzaWVyIHRvIGp1c3QgdXNlIHRvUmVmcygpIGV2ZW4gaWYgaXQgaW5jbHVkZXMgbW9yZSBzdHVmZlxyXG4gICAgaWYgKGlzVnVlMikge1xyXG4gICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3I6IHRvUmVmcyBpbmNsdWRlIG1ldGhvZHMgYW5kIG90aGVyc1xyXG4gICAgICAgIHJldHVybiB0b1JlZnMoc3RvcmUpO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgc3RvcmUgPSB0b1JhdyhzdG9yZSk7XHJcbiAgICAgICAgY29uc3QgcmVmcyA9IHt9O1xyXG4gICAgICAgIGZvciAoY29uc3Qga2V5IGluIHN0b3JlKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gc3RvcmVba2V5XTtcclxuICAgICAgICAgICAgaWYgKGlzUmVmKHZhbHVlKSB8fCBpc1JlYWN0aXZlKHZhbHVlKSkge1xyXG4gICAgICAgICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvcjogdGhlIGtleSBpcyBzdGF0ZSBvciBnZXR0ZXJcclxuICAgICAgICAgICAgICAgIHJlZnNba2V5XSA9XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gLS0tXHJcbiAgICAgICAgICAgICAgICAgICAgdG9SZWYoc3RvcmUsIGtleSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJlZnM7XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIFZ1ZSAyIFBsdWdpbiB0aGF0IG11c3QgYmUgaW5zdGFsbGVkIGZvciBwaW5pYSB0byB3b3JrLiBOb3RlICoqeW91IGRvbid0IG5lZWRcclxuICogdGhpcyBwbHVnaW4gaWYgeW91IGFyZSB1c2luZyBOdXh0LmpzKiouIFVzZSB0aGUgYGJ1aWxkTW9kdWxlYCBpbnN0ZWFkOlxyXG4gKiBodHRwczovL3BpbmlhLnZ1ZWpzLm9yZy9zc3IvbnV4dC5odG1sLlxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gKiBgYGBqc1xyXG4gKiBpbXBvcnQgVnVlIGZyb20gJ3Z1ZSdcclxuICogaW1wb3J0IHsgUGluaWFWdWVQbHVnaW4sIGNyZWF0ZVBpbmlhIH0gZnJvbSAncGluaWEnXHJcbiAqXHJcbiAqIFZ1ZS51c2UoUGluaWFWdWVQbHVnaW4pXHJcbiAqIGNvbnN0IHBpbmlhID0gY3JlYXRlUGluaWEoKVxyXG4gKlxyXG4gKiBuZXcgVnVlKHtcclxuICogICBlbDogJyNhcHAnLFxyXG4gKiAgIC8vIC4uLlxyXG4gKiAgIHBpbmlhLFxyXG4gKiB9KVxyXG4gKiBgYGBcclxuICpcclxuICogQHBhcmFtIF9WdWUgLSBgVnVlYCBpbXBvcnRlZCBmcm9tICd2dWUnLlxyXG4gKi9cclxuY29uc3QgUGluaWFWdWVQbHVnaW4gPSBmdW5jdGlvbiAoX1Z1ZSkge1xyXG4gICAgLy8gRXF1aXZhbGVudCBvZlxyXG4gICAgLy8gYXBwLmNvbmZpZy5nbG9iYWxQcm9wZXJ0aWVzLiRwaW5pYSA9IHBpbmlhXHJcbiAgICBfVnVlLm1peGluKHtcclxuICAgICAgICBiZWZvcmVDcmVhdGUoKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG9wdGlvbnMgPSB0aGlzLiRvcHRpb25zO1xyXG4gICAgICAgICAgICBpZiAob3B0aW9ucy5waW5pYSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcGluaWEgPSBvcHRpb25zLnBpbmlhO1xyXG4gICAgICAgICAgICAgICAgLy8gSEFDSzogdGFrZW4gZnJvbSBwcm92aWRlKCk6IGh0dHBzOi8vZ2l0aHViLmNvbS92dWVqcy9jb21wb3NpdGlvbi1hcGkvYmxvYi9tYXN0ZXIvc3JjL2FwaXMvaW5qZWN0LnRzI0wzMFxyXG4gICAgICAgICAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIGVsc2UgKi9cclxuICAgICAgICAgICAgICAgIGlmICghdGhpcy5fcHJvdmlkZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBwcm92aWRlQ2FjaGUgPSB7fTtcclxuICAgICAgICAgICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgJ19wcm92aWRlZCcsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZ2V0OiAoKSA9PiBwcm92aWRlQ2FjaGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldDogKHYpID0+IE9iamVjdC5hc3NpZ24ocHJvdmlkZUNhY2hlLCB2KSxcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRoaXMuX3Byb3ZpZGVkW3BpbmlhU3ltYm9sXSA9IHBpbmlhO1xyXG4gICAgICAgICAgICAgICAgLy8gcHJvcGFnYXRlIHRoZSBwaW5pYSBpbnN0YW5jZSBpbiBhbiBTU1IgZnJpZW5kbHkgd2F5XHJcbiAgICAgICAgICAgICAgICAvLyBhdm9pZCBhZGRpbmcgaXQgdG8gbnV4dCB0d2ljZVxyXG4gICAgICAgICAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIGVsc2UgKi9cclxuICAgICAgICAgICAgICAgIGlmICghdGhpcy4kcGluaWEpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLiRwaW5pYSA9IHBpbmlhO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcGluaWEuX2EgPSB0aGlzO1xyXG4gICAgICAgICAgICAgICAgaWYgKElTX0NMSUVOVCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIHRoaXMgYWxsb3dzIGNhbGxpbmcgdXNlU3RvcmUoKSBvdXRzaWRlIG9mIGEgY29tcG9uZW50IHNldHVwIGFmdGVyXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gaW5zdGFsbGluZyBwaW5pYSdzIHBsdWdpblxyXG4gICAgICAgICAgICAgICAgICAgIHNldEFjdGl2ZVBpbmlhKHBpbmlhKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlZ2lzdGVyUGluaWFEZXZ0b29scyhwaW5pYS5fYSwgcGluaWEpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmICghdGhpcy4kcGluaWEgJiYgb3B0aW9ucy5wYXJlbnQgJiYgb3B0aW9ucy5wYXJlbnQuJHBpbmlhKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLiRwaW5pYSA9IG9wdGlvbnMucGFyZW50LiRwaW5pYTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZGVzdHJveWVkKCkge1xyXG4gICAgICAgICAgICBkZWxldGUgdGhpcy5fcFN0b3JlcztcclxuICAgICAgICB9LFxyXG4gICAgfSk7XHJcbn07XG5cbmV4cG9ydCB7IE11dGF0aW9uVHlwZSwgUGluaWFWdWVQbHVnaW4sIGFjY2VwdEhNUlVwZGF0ZSwgY3JlYXRlUGluaWEsIGRlZmluZVN0b3JlLCBnZXRBY3RpdmVQaW5pYSwgbWFwQWN0aW9ucywgbWFwR2V0dGVycywgbWFwU3RhdGUsIG1hcFN0b3JlcywgbWFwV3JpdGFibGVTdGF0ZSwgc2V0QWN0aXZlUGluaWEsIHNldE1hcFN0b3JlU3VmZml4LCBza2lwSHlkcmF0ZSwgc3RvcmVUb1JlZnMgfTtcbiIsImltcG9ydCB7IHN0b3JlIH0gZnJvbSAncXVhc2FyL3dyYXBwZXJzJ1xuaW1wb3J0IHsgY3JlYXRlUGluaWEgfSBmcm9tICdwaW5pYSdcblxuLypcbiAqIElmIG5vdCBidWlsZGluZyB3aXRoIFNTUiBtb2RlLCB5b3UgY2FuXG4gKiBkaXJlY3RseSBleHBvcnQgdGhlIFN0b3JlIGluc3RhbnRpYXRpb247XG4gKlxuICogVGhlIGZ1bmN0aW9uIGJlbG93IGNhbiBiZSBhc3luYyB0b287IGVpdGhlciB1c2VcbiAqIGFzeW5jL2F3YWl0IG9yIHJldHVybiBhIFByb21pc2Ugd2hpY2ggcmVzb2x2ZXNcbiAqIHdpdGggdGhlIFN0b3JlIGluc3RhbmNlLlxuICovXG5cbmV4cG9ydCBkZWZhdWx0IHN0b3JlKCgvKiB7IHNzckNvbnRleHQgfSAqLykgPT4ge1xuICBjb25zdCBwaW5pYSA9IGNyZWF0ZVBpbmlhKClcblxuICAvLyBZb3UgY2FuIGFkZCBQaW5pYSBwbHVnaW5zIGhlcmVcbiAgLy8gcGluaWEudXNlKFNvbWVQaW5pYVBsdWdpbilcblxuICByZXR1cm4gcGluaWFcbn0pXG4iLCIvKiFcbiAgKiB2dWUtcm91dGVyIHY0LjAuMTRcbiAgKiAoYykgMjAyMiBFZHVhcmRvIFNhbiBNYXJ0aW4gTW9yb3RlXG4gICogQGxpY2Vuc2UgTUlUXG4gICovXG5pbXBvcnQgeyBnZXRDdXJyZW50SW5zdGFuY2UsIGluamVjdCwgb25Vbm1vdW50ZWQsIG9uRGVhY3RpdmF0ZWQsIG9uQWN0aXZhdGVkLCBjb21wdXRlZCwgdW5yZWYsIHdhdGNoRWZmZWN0LCBkZWZpbmVDb21wb25lbnQsIHJlYWN0aXZlLCBoLCBwcm92aWRlLCByZWYsIHdhdGNoLCBzaGFsbG93UmVmLCBuZXh0VGljayB9IGZyb20gJ3Z1ZSc7XG5pbXBvcnQgeyBzZXR1cERldnRvb2xzUGx1Z2luIH0gZnJvbSAnQHZ1ZS9kZXZ0b29scy1hcGknO1xuXG5jb25zdCBoYXNTeW1ib2wgPSB0eXBlb2YgU3ltYm9sID09PSAnZnVuY3Rpb24nICYmIHR5cGVvZiBTeW1ib2wudG9TdHJpbmdUYWcgPT09ICdzeW1ib2wnO1xyXG5jb25zdCBQb2x5U3ltYm9sID0gKG5hbWUpID0+IFxyXG4vLyB2ciA9IHZ1ZSByb3V0ZXJcclxuaGFzU3ltYm9sXHJcbiAgICA/IFN5bWJvbCgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgPyAnW3Z1ZS1yb3V0ZXJdOiAnICsgbmFtZSA6IG5hbWUpXHJcbiAgICA6ICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgPyAnW3Z1ZS1yb3V0ZXJdOiAnIDogJ192cl8nKSArIG5hbWU7XHJcbi8vIHJ2bG0gPSBSb3V0ZXIgVmlldyBMb2NhdGlvbiBNYXRjaGVkXHJcbi8qKlxyXG4gKiBSb3V0ZVJlY29yZCBiZWluZyByZW5kZXJlZCBieSB0aGUgY2xvc2VzdCBhbmNlc3RvciBSb3V0ZXIgVmlldy4gVXNlZCBmb3JcclxuICogYG9uQmVmb3JlUm91dGVVcGRhdGVgIGFuZCBgb25CZWZvcmVSb3V0ZUxlYXZlYC4gcnZsbSBzdGFuZHMgZm9yIFJvdXRlciBWaWV3XHJcbiAqIExvY2F0aW9uIE1hdGNoZWRcclxuICpcclxuICogQGludGVybmFsXHJcbiAqL1xyXG5jb25zdCBtYXRjaGVkUm91dGVLZXkgPSAvKiNfX1BVUkVfXyovIFBvbHlTeW1ib2woKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpID8gJ3JvdXRlciB2aWV3IGxvY2F0aW9uIG1hdGNoZWQnIDogJ3J2bG0nKTtcclxuLyoqXHJcbiAqIEFsbG93cyBvdmVycmlkaW5nIHRoZSByb3V0ZXIgdmlldyBkZXB0aCB0byBjb250cm9sIHdoaWNoIGNvbXBvbmVudCBpblxyXG4gKiBgbWF0Y2hlZGAgaXMgcmVuZGVyZWQuIHJ2ZCBzdGFuZHMgZm9yIFJvdXRlciBWaWV3IERlcHRoXHJcbiAqXHJcbiAqIEBpbnRlcm5hbFxyXG4gKi9cclxuY29uc3Qgdmlld0RlcHRoS2V5ID0gLyojX19QVVJFX18qLyBQb2x5U3ltYm9sKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSA/ICdyb3V0ZXIgdmlldyBkZXB0aCcgOiAncnZkJyk7XHJcbi8qKlxyXG4gKiBBbGxvd3Mgb3ZlcnJpZGluZyB0aGUgcm91dGVyIGluc3RhbmNlIHJldHVybmVkIGJ5IGB1c2VSb3V0ZXJgIGluIHRlc3RzLiByXHJcbiAqIHN0YW5kcyBmb3Igcm91dGVyXHJcbiAqXHJcbiAqIEBpbnRlcm5hbFxyXG4gKi9cclxuY29uc3Qgcm91dGVyS2V5ID0gLyojX19QVVJFX18qLyBQb2x5U3ltYm9sKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSA/ICdyb3V0ZXInIDogJ3InKTtcclxuLyoqXHJcbiAqIEFsbG93cyBvdmVycmlkaW5nIHRoZSBjdXJyZW50IHJvdXRlIHJldHVybmVkIGJ5IGB1c2VSb3V0ZWAgaW4gdGVzdHMuIHJsXHJcbiAqIHN0YW5kcyBmb3Igcm91dGUgbG9jYXRpb25cclxuICpcclxuICogQGludGVybmFsXHJcbiAqL1xyXG5jb25zdCByb3V0ZUxvY2F0aW9uS2V5ID0gLyojX19QVVJFX18qLyBQb2x5U3ltYm9sKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSA/ICdyb3V0ZSBsb2NhdGlvbicgOiAncmwnKTtcclxuLyoqXHJcbiAqIEFsbG93cyBvdmVycmlkaW5nIHRoZSBjdXJyZW50IHJvdXRlIHVzZWQgYnkgcm91dGVyLXZpZXcuIEludGVybmFsbHkgdGhpcyBpc1xyXG4gKiB1c2VkIHdoZW4gdGhlIGByb3V0ZWAgcHJvcCBpcyBwYXNzZWQuXHJcbiAqXHJcbiAqIEBpbnRlcm5hbFxyXG4gKi9cclxuY29uc3Qgcm91dGVyVmlld0xvY2F0aW9uS2V5ID0gLyojX19QVVJFX18qLyBQb2x5U3ltYm9sKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSA/ICdyb3V0ZXIgdmlldyBsb2NhdGlvbicgOiAncnZsJyk7XG5cbmNvbnN0IGlzQnJvd3NlciA9IHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnO1xuXG5mdW5jdGlvbiBpc0VTTW9kdWxlKG9iaikge1xyXG4gICAgcmV0dXJuIG9iai5fX2VzTW9kdWxlIHx8IChoYXNTeW1ib2wgJiYgb2JqW1N5bWJvbC50b1N0cmluZ1RhZ10gPT09ICdNb2R1bGUnKTtcclxufVxyXG5jb25zdCBhc3NpZ24gPSBPYmplY3QuYXNzaWduO1xyXG5mdW5jdGlvbiBhcHBseVRvUGFyYW1zKGZuLCBwYXJhbXMpIHtcclxuICAgIGNvbnN0IG5ld1BhcmFtcyA9IHt9O1xyXG4gICAgZm9yIChjb25zdCBrZXkgaW4gcGFyYW1zKSB7XHJcbiAgICAgICAgY29uc3QgdmFsdWUgPSBwYXJhbXNba2V5XTtcclxuICAgICAgICBuZXdQYXJhbXNba2V5XSA9IEFycmF5LmlzQXJyYXkodmFsdWUpID8gdmFsdWUubWFwKGZuKSA6IGZuKHZhbHVlKTtcclxuICAgIH1cclxuICAgIHJldHVybiBuZXdQYXJhbXM7XHJcbn1cclxuY29uc3Qgbm9vcCA9ICgpID0+IHsgfTtcblxuZnVuY3Rpb24gd2Fybihtc2cpIHtcclxuICAgIC8vIGF2b2lkIHVzaW5nIC4uLmFyZ3MgYXMgaXQgYnJlYWtzIGluIG9sZGVyIEVkZ2UgYnVpbGRzXHJcbiAgICBjb25zdCBhcmdzID0gQXJyYXkuZnJvbShhcmd1bWVudHMpLnNsaWNlKDEpO1xyXG4gICAgY29uc29sZS53YXJuLmFwcGx5KGNvbnNvbGUsIFsnW1Z1ZSBSb3V0ZXIgd2Fybl06ICcgKyBtc2ddLmNvbmNhdChhcmdzKSk7XHJcbn1cblxuY29uc3QgVFJBSUxJTkdfU0xBU0hfUkUgPSAvXFwvJC87XHJcbmNvbnN0IHJlbW92ZVRyYWlsaW5nU2xhc2ggPSAocGF0aCkgPT4gcGF0aC5yZXBsYWNlKFRSQUlMSU5HX1NMQVNIX1JFLCAnJyk7XHJcbi8qKlxyXG4gKiBUcmFuc2Zvcm1zIGFuIFVSSSBpbnRvIGEgbm9ybWFsaXplZCBoaXN0b3J5IGxvY2F0aW9uXHJcbiAqXHJcbiAqIEBwYXJhbSBwYXJzZVF1ZXJ5XHJcbiAqIEBwYXJhbSBsb2NhdGlvbiAtIFVSSSB0byBub3JtYWxpemVcclxuICogQHBhcmFtIGN1cnJlbnRMb2NhdGlvbiAtIGN1cnJlbnQgYWJzb2x1dGUgbG9jYXRpb24uIEFsbG93cyByZXNvbHZpbmcgcmVsYXRpdmVcclxuICogcGF0aHMuIE11c3Qgc3RhcnQgd2l0aCBgL2AuIERlZmF1bHRzIHRvIGAvYFxyXG4gKiBAcmV0dXJucyBhIG5vcm1hbGl6ZWQgaGlzdG9yeSBsb2NhdGlvblxyXG4gKi9cclxuZnVuY3Rpb24gcGFyc2VVUkwocGFyc2VRdWVyeSwgbG9jYXRpb24sIGN1cnJlbnRMb2NhdGlvbiA9ICcvJykge1xyXG4gICAgbGV0IHBhdGgsIHF1ZXJ5ID0ge30sIHNlYXJjaFN0cmluZyA9ICcnLCBoYXNoID0gJyc7XHJcbiAgICAvLyBDb3VsZCB1c2UgVVJMIGFuZCBVUkxTZWFyY2hQYXJhbXMgYnV0IElFIDExIGRvZXNuJ3Qgc3VwcG9ydCBpdFxyXG4gICAgY29uc3Qgc2VhcmNoUG9zID0gbG9jYXRpb24uaW5kZXhPZignPycpO1xyXG4gICAgY29uc3QgaGFzaFBvcyA9IGxvY2F0aW9uLmluZGV4T2YoJyMnLCBzZWFyY2hQb3MgPiAtMSA/IHNlYXJjaFBvcyA6IDApO1xyXG4gICAgaWYgKHNlYXJjaFBvcyA+IC0xKSB7XHJcbiAgICAgICAgcGF0aCA9IGxvY2F0aW9uLnNsaWNlKDAsIHNlYXJjaFBvcyk7XHJcbiAgICAgICAgc2VhcmNoU3RyaW5nID0gbG9jYXRpb24uc2xpY2Uoc2VhcmNoUG9zICsgMSwgaGFzaFBvcyA+IC0xID8gaGFzaFBvcyA6IGxvY2F0aW9uLmxlbmd0aCk7XHJcbiAgICAgICAgcXVlcnkgPSBwYXJzZVF1ZXJ5KHNlYXJjaFN0cmluZyk7XHJcbiAgICB9XHJcbiAgICBpZiAoaGFzaFBvcyA+IC0xKSB7XHJcbiAgICAgICAgcGF0aCA9IHBhdGggfHwgbG9jYXRpb24uc2xpY2UoMCwgaGFzaFBvcyk7XHJcbiAgICAgICAgLy8ga2VlcCB0aGUgIyBjaGFyYWN0ZXJcclxuICAgICAgICBoYXNoID0gbG9jYXRpb24uc2xpY2UoaGFzaFBvcywgbG9jYXRpb24ubGVuZ3RoKTtcclxuICAgIH1cclxuICAgIC8vIG5vIHNlYXJjaCBhbmQgbm8gcXVlcnlcclxuICAgIHBhdGggPSByZXNvbHZlUmVsYXRpdmVQYXRoKHBhdGggIT0gbnVsbCA/IHBhdGggOiBsb2NhdGlvbiwgY3VycmVudExvY2F0aW9uKTtcclxuICAgIC8vIGVtcHR5IHBhdGggbWVhbnMgYSByZWxhdGl2ZSBxdWVyeSBvciBoYXNoIGA/Zm9vPWZgLCBgI3RoaW5nYFxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBmdWxsUGF0aDogcGF0aCArIChzZWFyY2hTdHJpbmcgJiYgJz8nKSArIHNlYXJjaFN0cmluZyArIGhhc2gsXHJcbiAgICAgICAgcGF0aCxcclxuICAgICAgICBxdWVyeSxcclxuICAgICAgICBoYXNoLFxyXG4gICAgfTtcclxufVxyXG4vKipcclxuICogU3RyaW5naWZpZXMgYSBVUkwgb2JqZWN0XHJcbiAqXHJcbiAqIEBwYXJhbSBzdHJpbmdpZnlRdWVyeVxyXG4gKiBAcGFyYW0gbG9jYXRpb25cclxuICovXHJcbmZ1bmN0aW9uIHN0cmluZ2lmeVVSTChzdHJpbmdpZnlRdWVyeSwgbG9jYXRpb24pIHtcclxuICAgIGNvbnN0IHF1ZXJ5ID0gbG9jYXRpb24ucXVlcnkgPyBzdHJpbmdpZnlRdWVyeShsb2NhdGlvbi5xdWVyeSkgOiAnJztcclxuICAgIHJldHVybiBsb2NhdGlvbi5wYXRoICsgKHF1ZXJ5ICYmICc/JykgKyBxdWVyeSArIChsb2NhdGlvbi5oYXNoIHx8ICcnKTtcclxufVxyXG4vKipcclxuICogU3RyaXBzIG9mZiB0aGUgYmFzZSBmcm9tIHRoZSBiZWdpbm5pbmcgb2YgYSBsb2NhdGlvbi5wYXRobmFtZSBpbiBhIG5vblxyXG4gKiBjYXNlLXNlbnNpdGl2ZSB3YXkuXHJcbiAqXHJcbiAqIEBwYXJhbSBwYXRobmFtZSAtIGxvY2F0aW9uLnBhdGhuYW1lXHJcbiAqIEBwYXJhbSBiYXNlIC0gYmFzZSB0byBzdHJpcCBvZmZcclxuICovXHJcbmZ1bmN0aW9uIHN0cmlwQmFzZShwYXRobmFtZSwgYmFzZSkge1xyXG4gICAgLy8gbm8gYmFzZSBvciBiYXNlIGlzIG5vdCBmb3VuZCBhdCB0aGUgYmVnaW5uaW5nXHJcbiAgICBpZiAoIWJhc2UgfHwgIXBhdGhuYW1lLnRvTG93ZXJDYXNlKCkuc3RhcnRzV2l0aChiYXNlLnRvTG93ZXJDYXNlKCkpKVxyXG4gICAgICAgIHJldHVybiBwYXRobmFtZTtcclxuICAgIHJldHVybiBwYXRobmFtZS5zbGljZShiYXNlLmxlbmd0aCkgfHwgJy8nO1xyXG59XHJcbi8qKlxyXG4gKiBDaGVja3MgaWYgdHdvIFJvdXRlTG9jYXRpb24gYXJlIGVxdWFsLiBUaGlzIG1lYW5zIHRoYXQgYm90aCBsb2NhdGlvbnMgYXJlXHJcbiAqIHBvaW50aW5nIHRvd2FyZHMgdGhlIHNhbWUge0BsaW5rIFJvdXRlUmVjb3JkfSBhbmQgdGhhdCBhbGwgYHBhcmFtc2AsIGBxdWVyeWBcclxuICogcGFyYW1ldGVycyBhbmQgYGhhc2hgIGFyZSB0aGUgc2FtZVxyXG4gKlxyXG4gKiBAcGFyYW0gYSAtIGZpcnN0IHtAbGluayBSb3V0ZUxvY2F0aW9ufVxyXG4gKiBAcGFyYW0gYiAtIHNlY29uZCB7QGxpbmsgUm91dGVMb2NhdGlvbn1cclxuICovXHJcbmZ1bmN0aW9uIGlzU2FtZVJvdXRlTG9jYXRpb24oc3RyaW5naWZ5UXVlcnksIGEsIGIpIHtcclxuICAgIGNvbnN0IGFMYXN0SW5kZXggPSBhLm1hdGNoZWQubGVuZ3RoIC0gMTtcclxuICAgIGNvbnN0IGJMYXN0SW5kZXggPSBiLm1hdGNoZWQubGVuZ3RoIC0gMTtcclxuICAgIHJldHVybiAoYUxhc3RJbmRleCA+IC0xICYmXHJcbiAgICAgICAgYUxhc3RJbmRleCA9PT0gYkxhc3RJbmRleCAmJlxyXG4gICAgICAgIGlzU2FtZVJvdXRlUmVjb3JkKGEubWF0Y2hlZFthTGFzdEluZGV4XSwgYi5tYXRjaGVkW2JMYXN0SW5kZXhdKSAmJlxyXG4gICAgICAgIGlzU2FtZVJvdXRlTG9jYXRpb25QYXJhbXMoYS5wYXJhbXMsIGIucGFyYW1zKSAmJlxyXG4gICAgICAgIHN0cmluZ2lmeVF1ZXJ5KGEucXVlcnkpID09PSBzdHJpbmdpZnlRdWVyeShiLnF1ZXJ5KSAmJlxyXG4gICAgICAgIGEuaGFzaCA9PT0gYi5oYXNoKTtcclxufVxyXG4vKipcclxuICogQ2hlY2sgaWYgdHdvIGBSb3V0ZVJlY29yZHNgIGFyZSBlcXVhbC4gVGFrZXMgaW50byBhY2NvdW50IGFsaWFzZXM6IHRoZXkgYXJlXHJcbiAqIGNvbnNpZGVyZWQgZXF1YWwgdG8gdGhlIGBSb3V0ZVJlY29yZGAgdGhleSBhcmUgYWxpYXNpbmcuXHJcbiAqXHJcbiAqIEBwYXJhbSBhIC0gZmlyc3Qge0BsaW5rIFJvdXRlUmVjb3JkfVxyXG4gKiBAcGFyYW0gYiAtIHNlY29uZCB7QGxpbmsgUm91dGVSZWNvcmR9XHJcbiAqL1xyXG5mdW5jdGlvbiBpc1NhbWVSb3V0ZVJlY29yZChhLCBiKSB7XHJcbiAgICAvLyBzaW5jZSB0aGUgb3JpZ2luYWwgcmVjb3JkIGhhcyBhbiB1bmRlZmluZWQgdmFsdWUgZm9yIGFsaWFzT2ZcclxuICAgIC8vIGJ1dCBhbGwgYWxpYXNlcyBwb2ludCB0byB0aGUgb3JpZ2luYWwgcmVjb3JkLCB0aGlzIHdpbGwgYWx3YXlzIGNvbXBhcmVcclxuICAgIC8vIHRoZSBvcmlnaW5hbCByZWNvcmRcclxuICAgIHJldHVybiAoYS5hbGlhc09mIHx8IGEpID09PSAoYi5hbGlhc09mIHx8IGIpO1xyXG59XHJcbmZ1bmN0aW9uIGlzU2FtZVJvdXRlTG9jYXRpb25QYXJhbXMoYSwgYikge1xyXG4gICAgaWYgKE9iamVjdC5rZXlzKGEpLmxlbmd0aCAhPT0gT2JqZWN0LmtleXMoYikubGVuZ3RoKVxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIGZvciAoY29uc3Qga2V5IGluIGEpIHtcclxuICAgICAgICBpZiAoIWlzU2FtZVJvdXRlTG9jYXRpb25QYXJhbXNWYWx1ZShhW2tleV0sIGJba2V5XSkpXHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIHJldHVybiB0cnVlO1xyXG59XHJcbmZ1bmN0aW9uIGlzU2FtZVJvdXRlTG9jYXRpb25QYXJhbXNWYWx1ZShhLCBiKSB7XHJcbiAgICByZXR1cm4gQXJyYXkuaXNBcnJheShhKVxyXG4gICAgICAgID8gaXNFcXVpdmFsZW50QXJyYXkoYSwgYilcclxuICAgICAgICA6IEFycmF5LmlzQXJyYXkoYilcclxuICAgICAgICAgICAgPyBpc0VxdWl2YWxlbnRBcnJheShiLCBhKVxyXG4gICAgICAgICAgICA6IGEgPT09IGI7XHJcbn1cclxuLyoqXHJcbiAqIENoZWNrIGlmIHR3byBhcnJheXMgYXJlIHRoZSBzYW1lIG9yIGlmIGFuIGFycmF5IHdpdGggb25lIHNpbmdsZSBlbnRyeSBpcyB0aGVcclxuICogc2FtZSBhcyBhbm90aGVyIHByaW1pdGl2ZSB2YWx1ZS4gVXNlZCB0byBjaGVjayBxdWVyeSBhbmQgcGFyYW1ldGVyc1xyXG4gKlxyXG4gKiBAcGFyYW0gYSAtIGFycmF5IG9mIHZhbHVlc1xyXG4gKiBAcGFyYW0gYiAtIGFycmF5IG9mIHZhbHVlcyBvciBhIHNpbmdsZSB2YWx1ZVxyXG4gKi9cclxuZnVuY3Rpb24gaXNFcXVpdmFsZW50QXJyYXkoYSwgYikge1xyXG4gICAgcmV0dXJuIEFycmF5LmlzQXJyYXkoYilcclxuICAgICAgICA/IGEubGVuZ3RoID09PSBiLmxlbmd0aCAmJiBhLmV2ZXJ5KCh2YWx1ZSwgaSkgPT4gdmFsdWUgPT09IGJbaV0pXHJcbiAgICAgICAgOiBhLmxlbmd0aCA9PT0gMSAmJiBhWzBdID09PSBiO1xyXG59XHJcbi8qKlxyXG4gKiBSZXNvbHZlcyBhIHJlbGF0aXZlIHBhdGggdGhhdCBzdGFydHMgd2l0aCBgLmAuXHJcbiAqXHJcbiAqIEBwYXJhbSB0byAtIHBhdGggbG9jYXRpb24gd2UgYXJlIHJlc29sdmluZ1xyXG4gKiBAcGFyYW0gZnJvbSAtIGN1cnJlbnRMb2NhdGlvbi5wYXRoLCBzaG91bGQgc3RhcnQgd2l0aCBgL2BcclxuICovXHJcbmZ1bmN0aW9uIHJlc29sdmVSZWxhdGl2ZVBhdGgodG8sIGZyb20pIHtcclxuICAgIGlmICh0by5zdGFydHNXaXRoKCcvJykpXHJcbiAgICAgICAgcmV0dXJuIHRvO1xyXG4gICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiAhZnJvbS5zdGFydHNXaXRoKCcvJykpIHtcclxuICAgICAgICB3YXJuKGBDYW5ub3QgcmVzb2x2ZSBhIHJlbGF0aXZlIGxvY2F0aW9uIHdpdGhvdXQgYW4gYWJzb2x1dGUgcGF0aC4gVHJ5aW5nIHRvIHJlc29sdmUgXCIke3RvfVwiIGZyb20gXCIke2Zyb219XCIuIEl0IHNob3VsZCBsb29rIGxpa2UgXCIvJHtmcm9tfVwiLmApO1xyXG4gICAgICAgIHJldHVybiB0bztcclxuICAgIH1cclxuICAgIGlmICghdG8pXHJcbiAgICAgICAgcmV0dXJuIGZyb207XHJcbiAgICBjb25zdCBmcm9tU2VnbWVudHMgPSBmcm9tLnNwbGl0KCcvJyk7XHJcbiAgICBjb25zdCB0b1NlZ21lbnRzID0gdG8uc3BsaXQoJy8nKTtcclxuICAgIGxldCBwb3NpdGlvbiA9IGZyb21TZWdtZW50cy5sZW5ndGggLSAxO1xyXG4gICAgbGV0IHRvUG9zaXRpb247XHJcbiAgICBsZXQgc2VnbWVudDtcclxuICAgIGZvciAodG9Qb3NpdGlvbiA9IDA7IHRvUG9zaXRpb24gPCB0b1NlZ21lbnRzLmxlbmd0aDsgdG9Qb3NpdGlvbisrKSB7XHJcbiAgICAgICAgc2VnbWVudCA9IHRvU2VnbWVudHNbdG9Qb3NpdGlvbl07XHJcbiAgICAgICAgLy8gY2FuJ3QgZ28gYmVsb3cgemVyb1xyXG4gICAgICAgIGlmIChwb3NpdGlvbiA9PT0gMSB8fCBzZWdtZW50ID09PSAnLicpXHJcbiAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgIGlmIChzZWdtZW50ID09PSAnLi4nKVxyXG4gICAgICAgICAgICBwb3NpdGlvbi0tO1xyXG4gICAgICAgIC8vIGZvdW5kIHNvbWV0aGluZyB0aGF0IGlzIG5vdCByZWxhdGl2ZSBwYXRoXHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICBicmVhaztcclxuICAgIH1cclxuICAgIHJldHVybiAoZnJvbVNlZ21lbnRzLnNsaWNlKDAsIHBvc2l0aW9uKS5qb2luKCcvJykgK1xyXG4gICAgICAgICcvJyArXHJcbiAgICAgICAgdG9TZWdtZW50c1xyXG4gICAgICAgICAgICAuc2xpY2UodG9Qb3NpdGlvbiAtICh0b1Bvc2l0aW9uID09PSB0b1NlZ21lbnRzLmxlbmd0aCA/IDEgOiAwKSlcclxuICAgICAgICAgICAgLmpvaW4oJy8nKSk7XHJcbn1cblxudmFyIE5hdmlnYXRpb25UeXBlO1xyXG4oZnVuY3Rpb24gKE5hdmlnYXRpb25UeXBlKSB7XHJcbiAgICBOYXZpZ2F0aW9uVHlwZVtcInBvcFwiXSA9IFwicG9wXCI7XHJcbiAgICBOYXZpZ2F0aW9uVHlwZVtcInB1c2hcIl0gPSBcInB1c2hcIjtcclxufSkoTmF2aWdhdGlvblR5cGUgfHwgKE5hdmlnYXRpb25UeXBlID0ge30pKTtcclxudmFyIE5hdmlnYXRpb25EaXJlY3Rpb247XHJcbihmdW5jdGlvbiAoTmF2aWdhdGlvbkRpcmVjdGlvbikge1xyXG4gICAgTmF2aWdhdGlvbkRpcmVjdGlvbltcImJhY2tcIl0gPSBcImJhY2tcIjtcclxuICAgIE5hdmlnYXRpb25EaXJlY3Rpb25bXCJmb3J3YXJkXCJdID0gXCJmb3J3YXJkXCI7XHJcbiAgICBOYXZpZ2F0aW9uRGlyZWN0aW9uW1widW5rbm93blwiXSA9IFwiXCI7XHJcbn0pKE5hdmlnYXRpb25EaXJlY3Rpb24gfHwgKE5hdmlnYXRpb25EaXJlY3Rpb24gPSB7fSkpO1xyXG4vKipcclxuICogU3RhcnRpbmcgbG9jYXRpb24gZm9yIEhpc3Rvcmllc1xyXG4gKi9cclxuY29uc3QgU1RBUlQgPSAnJztcclxuLy8gR2VuZXJpYyB1dGlsc1xyXG4vKipcclxuICogTm9ybWFsaXplcyBhIGJhc2UgYnkgcmVtb3ZpbmcgYW55IHRyYWlsaW5nIHNsYXNoIGFuZCByZWFkaW5nIHRoZSBiYXNlIHRhZyBpZlxyXG4gKiBwcmVzZW50LlxyXG4gKlxyXG4gKiBAcGFyYW0gYmFzZSAtIGJhc2UgdG8gbm9ybWFsaXplXHJcbiAqL1xyXG5mdW5jdGlvbiBub3JtYWxpemVCYXNlKGJhc2UpIHtcclxuICAgIGlmICghYmFzZSkge1xyXG4gICAgICAgIGlmIChpc0Jyb3dzZXIpIHtcclxuICAgICAgICAgICAgLy8gcmVzcGVjdCA8YmFzZT4gdGFnXHJcbiAgICAgICAgICAgIGNvbnN0IGJhc2VFbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2Jhc2UnKTtcclxuICAgICAgICAgICAgYmFzZSA9IChiYXNlRWwgJiYgYmFzZUVsLmdldEF0dHJpYnV0ZSgnaHJlZicpKSB8fCAnLyc7XHJcbiAgICAgICAgICAgIC8vIHN0cmlwIGZ1bGwgVVJMIG9yaWdpblxyXG4gICAgICAgICAgICBiYXNlID0gYmFzZS5yZXBsYWNlKC9eXFx3KzpcXC9cXC9bXlxcL10rLywgJycpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgYmFzZSA9ICcvJztcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvLyBlbnN1cmUgbGVhZGluZyBzbGFzaCB3aGVuIGl0IHdhcyByZW1vdmVkIGJ5IHRoZSByZWdleCBhYm92ZSBhdm9pZCBsZWFkaW5nXHJcbiAgICAvLyBzbGFzaCB3aXRoIGhhc2ggYmVjYXVzZSB0aGUgZmlsZSBjb3VsZCBiZSByZWFkIGZyb20gdGhlIGRpc2sgbGlrZSBmaWxlOi8vXHJcbiAgICAvLyBhbmQgdGhlIGxlYWRpbmcgc2xhc2ggd291bGQgY2F1c2UgcHJvYmxlbXNcclxuICAgIGlmIChiYXNlWzBdICE9PSAnLycgJiYgYmFzZVswXSAhPT0gJyMnKVxyXG4gICAgICAgIGJhc2UgPSAnLycgKyBiYXNlO1xyXG4gICAgLy8gcmVtb3ZlIHRoZSB0cmFpbGluZyBzbGFzaCBzbyBhbGwgb3RoZXIgbWV0aG9kIGNhbiBqdXN0IGRvIGBiYXNlICsgZnVsbFBhdGhgXHJcbiAgICAvLyB0byBidWlsZCBhbiBocmVmXHJcbiAgICByZXR1cm4gcmVtb3ZlVHJhaWxpbmdTbGFzaChiYXNlKTtcclxufVxyXG4vLyByZW1vdmUgYW55IGNoYXJhY3RlciBiZWZvcmUgdGhlIGhhc2hcclxuY29uc3QgQkVGT1JFX0hBU0hfUkUgPSAvXlteI10rIy87XHJcbmZ1bmN0aW9uIGNyZWF0ZUhyZWYoYmFzZSwgbG9jYXRpb24pIHtcclxuICAgIHJldHVybiBiYXNlLnJlcGxhY2UoQkVGT1JFX0hBU0hfUkUsICcjJykgKyBsb2NhdGlvbjtcclxufVxuXG5mdW5jdGlvbiBnZXRFbGVtZW50UG9zaXRpb24oZWwsIG9mZnNldCkge1xyXG4gICAgY29uc3QgZG9jUmVjdCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICAgIGNvbnN0IGVsUmVjdCA9IGVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBiZWhhdmlvcjogb2Zmc2V0LmJlaGF2aW9yLFxyXG4gICAgICAgIGxlZnQ6IGVsUmVjdC5sZWZ0IC0gZG9jUmVjdC5sZWZ0IC0gKG9mZnNldC5sZWZ0IHx8IDApLFxyXG4gICAgICAgIHRvcDogZWxSZWN0LnRvcCAtIGRvY1JlY3QudG9wIC0gKG9mZnNldC50b3AgfHwgMCksXHJcbiAgICB9O1xyXG59XHJcbmNvbnN0IGNvbXB1dGVTY3JvbGxQb3NpdGlvbiA9ICgpID0+ICh7XHJcbiAgICBsZWZ0OiB3aW5kb3cucGFnZVhPZmZzZXQsXHJcbiAgICB0b3A6IHdpbmRvdy5wYWdlWU9mZnNldCxcclxufSk7XHJcbmZ1bmN0aW9uIHNjcm9sbFRvUG9zaXRpb24ocG9zaXRpb24pIHtcclxuICAgIGxldCBzY3JvbGxUb09wdGlvbnM7XHJcbiAgICBpZiAoJ2VsJyBpbiBwb3NpdGlvbikge1xyXG4gICAgICAgIGNvbnN0IHBvc2l0aW9uRWwgPSBwb3NpdGlvbi5lbDtcclxuICAgICAgICBjb25zdCBpc0lkU2VsZWN0b3IgPSB0eXBlb2YgcG9zaXRpb25FbCA9PT0gJ3N0cmluZycgJiYgcG9zaXRpb25FbC5zdGFydHNXaXRoKCcjJyk7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogYGlkYHMgY2FuIGFjY2VwdCBwcmV0dHkgbXVjaCBhbnkgY2hhcmFjdGVycywgaW5jbHVkaW5nIENTUyBjb21iaW5hdG9yc1xyXG4gICAgICAgICAqIGxpa2UgYD5gIG9yIGB+YC4gSXQncyBzdGlsbCBwb3NzaWJsZSB0byByZXRyaWV2ZSBlbGVtZW50cyB1c2luZ1xyXG4gICAgICAgICAqIGBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnficpYCBidXQgaXQgbmVlZHMgdG8gYmUgZXNjYXBlZCB3aGVuIHVzaW5nXHJcbiAgICAgICAgICogYGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNcXFxcficpYCBmb3IgaXQgdG8gYmUgdmFsaWQuIFRoZSBvbmx5XHJcbiAgICAgICAgICogcmVxdWlyZW1lbnRzIGZvciBgaWRgcyBhcmUgdGhlbSB0byBiZSB1bmlxdWUgb24gdGhlIHBhZ2UgYW5kIHRvIG5vdCBiZVxyXG4gICAgICAgICAqIGVtcHR5IChgaWQ9XCJcImApLiBCZWNhdXNlIG9mIHRoYXQsIHdoZW4gcGFzc2luZyBhbiBpZCBzZWxlY3RvciwgaXQgc2hvdWxkXHJcbiAgICAgICAgICogYmUgcHJvcGVybHkgZXNjYXBlZCBmb3IgaXQgdG8gd29yayB3aXRoIGBxdWVyeVNlbGVjdG9yYC4gV2UgY291bGQgY2hlY2tcclxuICAgICAgICAgKiBmb3IgdGhlIGlkIHNlbGVjdG9yIHRvIGJlIHNpbXBsZSAobm8gQ1NTIGNvbWJpbmF0b3JzIGArID5+YCkgYnV0IHRoYXRcclxuICAgICAgICAgKiB3b3VsZCBtYWtlIHRoaW5ncyBpbmNvbnNpc3RlbnQgc2luY2UgdGhleSBhcmUgdmFsaWQgY2hhcmFjdGVycyBmb3IgYW5cclxuICAgICAgICAgKiBgaWRgIGJ1dCB3b3VsZCBuZWVkIHRvIGJlIGVzY2FwZWQgd2hlbiB1c2luZyBgcXVlcnlTZWxlY3RvcmAsIGJyZWFraW5nXHJcbiAgICAgICAgICogdGhlaXIgdXNhZ2UgYW5kIGVuZGluZyB1cCBpbiBubyBzZWxlY3RvciByZXR1cm5lZC4gU2VsZWN0b3JzIG5lZWQgdG8gYmVcclxuICAgICAgICAgKiBlc2NhcGVkOlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogLSBgIzEtdGhpbmdgIGJlY29tZXMgYCNcXDMxIC10aGluZ2BcclxuICAgICAgICAgKiAtIGAjd2l0aH5zeW1ib2xzYCBiZWNvbWVzIGAjd2l0aFxcXFx+c3ltYm9sc2BcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIC0gTW9yZSBpbmZvcm1hdGlvbiBhYm91dCAgdGhlIHRvcGljIGNhbiBiZSBmb3VuZCBhdFxyXG4gICAgICAgICAqICAgaHR0cHM6Ly9tYXRoaWFzYnluZW5zLmJlL25vdGVzL2h0bWw1LWlkLWNsYXNzLlxyXG4gICAgICAgICAqIC0gUHJhY3RpY2FsIGV4YW1wbGU6IGh0dHBzOi8vbWF0aGlhc2J5bmVucy5iZS9kZW1vL2h0bWw1LWlkXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiB0eXBlb2YgcG9zaXRpb24uZWwgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgIGlmICghaXNJZFNlbGVjdG9yIHx8ICFkb2N1bWVudC5nZXRFbGVtZW50QnlJZChwb3NpdGlvbi5lbC5zbGljZSgxKSkpIHtcclxuICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZm91bmRFbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9zaXRpb24uZWwpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpc0lkU2VsZWN0b3IgJiYgZm91bmRFbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB3YXJuKGBUaGUgc2VsZWN0b3IgXCIke3Bvc2l0aW9uLmVsfVwiIHNob3VsZCBiZSBwYXNzZWQgYXMgXCJlbDogZG9jdW1lbnQucXVlcnlTZWxlY3RvcignJHtwb3NpdGlvbi5lbH0nKVwiIGJlY2F1c2UgaXQgc3RhcnRzIHdpdGggXCIjXCIuYCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJldHVybiB0byBhdm9pZCBvdGhlciB3YXJuaW5nc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2F0Y2ggKGVycikge1xyXG4gICAgICAgICAgICAgICAgICAgIHdhcm4oYFRoZSBzZWxlY3RvciBcIiR7cG9zaXRpb24uZWx9XCIgaXMgaW52YWxpZC4gSWYgeW91IGFyZSB1c2luZyBhbiBpZCBzZWxlY3RvciwgbWFrZSBzdXJlIHRvIGVzY2FwZSBpdC4gWW91IGNhbiBmaW5kIG1vcmUgaW5mb3JtYXRpb24gYWJvdXQgZXNjYXBpbmcgY2hhcmFjdGVycyBpbiBzZWxlY3RvcnMgYXQgaHR0cHM6Ly9tYXRoaWFzYnluZW5zLmJlL25vdGVzL2Nzcy1lc2NhcGVzIG9yIHVzZSBDU1MuZXNjYXBlIChodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvQ1NTL2VzY2FwZSkuYCk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gcmV0dXJuIHRvIGF2b2lkIG90aGVyIHdhcm5pbmdzXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGVsID0gdHlwZW9mIHBvc2l0aW9uRWwgPT09ICdzdHJpbmcnXHJcbiAgICAgICAgICAgID8gaXNJZFNlbGVjdG9yXHJcbiAgICAgICAgICAgICAgICA/IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHBvc2l0aW9uRWwuc2xpY2UoMSkpXHJcbiAgICAgICAgICAgICAgICA6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9zaXRpb25FbClcclxuICAgICAgICAgICAgOiBwb3NpdGlvbkVsO1xyXG4gICAgICAgIGlmICghZWwpIHtcclxuICAgICAgICAgICAgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmXHJcbiAgICAgICAgICAgICAgICB3YXJuKGBDb3VsZG4ndCBmaW5kIGVsZW1lbnQgdXNpbmcgc2VsZWN0b3IgXCIke3Bvc2l0aW9uLmVsfVwiIHJldHVybmVkIGJ5IHNjcm9sbEJlaGF2aW9yLmApO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHNjcm9sbFRvT3B0aW9ucyA9IGdldEVsZW1lbnRQb3NpdGlvbihlbCwgcG9zaXRpb24pO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgc2Nyb2xsVG9PcHRpb25zID0gcG9zaXRpb247XHJcbiAgICB9XHJcbiAgICBpZiAoJ3Njcm9sbEJlaGF2aW9yJyBpbiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc3R5bGUpXHJcbiAgICAgICAgd2luZG93LnNjcm9sbFRvKHNjcm9sbFRvT3B0aW9ucyk7XHJcbiAgICBlbHNlIHtcclxuICAgICAgICB3aW5kb3cuc2Nyb2xsVG8oc2Nyb2xsVG9PcHRpb25zLmxlZnQgIT0gbnVsbCA/IHNjcm9sbFRvT3B0aW9ucy5sZWZ0IDogd2luZG93LnBhZ2VYT2Zmc2V0LCBzY3JvbGxUb09wdGlvbnMudG9wICE9IG51bGwgPyBzY3JvbGxUb09wdGlvbnMudG9wIDogd2luZG93LnBhZ2VZT2Zmc2V0KTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBnZXRTY3JvbGxLZXkocGF0aCwgZGVsdGEpIHtcclxuICAgIGNvbnN0IHBvc2l0aW9uID0gaGlzdG9yeS5zdGF0ZSA/IGhpc3Rvcnkuc3RhdGUucG9zaXRpb24gLSBkZWx0YSA6IC0xO1xyXG4gICAgcmV0dXJuIHBvc2l0aW9uICsgcGF0aDtcclxufVxyXG5jb25zdCBzY3JvbGxQb3NpdGlvbnMgPSBuZXcgTWFwKCk7XHJcbmZ1bmN0aW9uIHNhdmVTY3JvbGxQb3NpdGlvbihrZXksIHNjcm9sbFBvc2l0aW9uKSB7XHJcbiAgICBzY3JvbGxQb3NpdGlvbnMuc2V0KGtleSwgc2Nyb2xsUG9zaXRpb24pO1xyXG59XHJcbmZ1bmN0aW9uIGdldFNhdmVkU2Nyb2xsUG9zaXRpb24oa2V5KSB7XHJcbiAgICBjb25zdCBzY3JvbGwgPSBzY3JvbGxQb3NpdGlvbnMuZ2V0KGtleSk7XHJcbiAgICAvLyBjb25zdW1lIGl0IHNvIGl0J3Mgbm90IHVzZWQgYWdhaW5cclxuICAgIHNjcm9sbFBvc2l0aW9ucy5kZWxldGUoa2V5KTtcclxuICAgIHJldHVybiBzY3JvbGw7XHJcbn1cclxuLy8gVE9ETzogUkZDIGFib3V0IGhvdyB0byBzYXZlIHNjcm9sbCBwb3NpdGlvblxyXG4vKipcclxuICogU2Nyb2xsQmVoYXZpb3IgaW5zdGFuY2UgdXNlZCBieSB0aGUgcm91dGVyIHRvIGNvbXB1dGUgYW5kIHJlc3RvcmUgdGhlIHNjcm9sbFxyXG4gKiBwb3NpdGlvbiB3aGVuIG5hdmlnYXRpbmcuXHJcbiAqL1xyXG4vLyBleHBvcnQgaW50ZXJmYWNlIFNjcm9sbEhhbmRsZXI8U2Nyb2xsUG9zaXRpb25FbnRyeSBleHRlbmRzIEhpc3RvcnlTdGF0ZVZhbHVlLCBTY3JvbGxQb3NpdGlvbiBleHRlbmRzIFNjcm9sbFBvc2l0aW9uRW50cnk+IHtcclxuLy8gICAvLyByZXR1cm5zIGEgc2Nyb2xsIHBvc2l0aW9uIHRoYXQgY2FuIGJlIHNhdmVkIGluIGhpc3RvcnlcclxuLy8gICBjb21wdXRlKCk6IFNjcm9sbFBvc2l0aW9uRW50cnlcclxuLy8gICAvLyBjYW4gdGFrZSBhbiBleHRlbmRlZCBTY3JvbGxQb3NpdGlvbkVudHJ5XHJcbi8vICAgc2Nyb2xsKHBvc2l0aW9uOiBTY3JvbGxQb3NpdGlvbik6IHZvaWRcclxuLy8gfVxyXG4vLyBleHBvcnQgY29uc3Qgc2Nyb2xsSGFuZGxlcjogU2Nyb2xsSGFuZGxlcjxTY3JvbGxQb3NpdGlvbj4gPSB7XHJcbi8vICAgY29tcHV0ZTogY29tcHV0ZVNjcm9sbCxcclxuLy8gICBzY3JvbGw6IHNjcm9sbFRvUG9zaXRpb24sXHJcbi8vIH1cblxubGV0IGNyZWF0ZUJhc2VMb2NhdGlvbiA9ICgpID0+IGxvY2F0aW9uLnByb3RvY29sICsgJy8vJyArIGxvY2F0aW9uLmhvc3Q7XHJcbi8qKlxyXG4gKiBDcmVhdGVzIGEgbm9ybWFsaXplZCBoaXN0b3J5IGxvY2F0aW9uIGZyb20gYSB3aW5kb3cubG9jYXRpb24gb2JqZWN0XHJcbiAqIEBwYXJhbSBsb2NhdGlvbiAtXHJcbiAqL1xyXG5mdW5jdGlvbiBjcmVhdGVDdXJyZW50TG9jYXRpb24oYmFzZSwgbG9jYXRpb24pIHtcclxuICAgIGNvbnN0IHsgcGF0aG5hbWUsIHNlYXJjaCwgaGFzaCB9ID0gbG9jYXRpb247XHJcbiAgICAvLyBhbGxvd3MgaGFzaCBiYXNlcyBsaWtlICMsIC8jLCAjLywgIyEsICMhLywgLyMhLywgb3IgZXZlbiAvZm9sZGVyI2VuZFxyXG4gICAgY29uc3QgaGFzaFBvcyA9IGJhc2UuaW5kZXhPZignIycpO1xyXG4gICAgaWYgKGhhc2hQb3MgPiAtMSkge1xyXG4gICAgICAgIGxldCBzbGljZVBvcyA9IGhhc2guaW5jbHVkZXMoYmFzZS5zbGljZShoYXNoUG9zKSlcclxuICAgICAgICAgICAgPyBiYXNlLnNsaWNlKGhhc2hQb3MpLmxlbmd0aFxyXG4gICAgICAgICAgICA6IDE7XHJcbiAgICAgICAgbGV0IHBhdGhGcm9tSGFzaCA9IGhhc2guc2xpY2Uoc2xpY2VQb3MpO1xyXG4gICAgICAgIC8vIHByZXBlbmQgdGhlIHN0YXJ0aW5nIHNsYXNoIHRvIGhhc2ggc28gdGhlIHVybCBzdGFydHMgd2l0aCAvI1xyXG4gICAgICAgIGlmIChwYXRoRnJvbUhhc2hbMF0gIT09ICcvJylcclxuICAgICAgICAgICAgcGF0aEZyb21IYXNoID0gJy8nICsgcGF0aEZyb21IYXNoO1xyXG4gICAgICAgIHJldHVybiBzdHJpcEJhc2UocGF0aEZyb21IYXNoLCAnJyk7XHJcbiAgICB9XHJcbiAgICBjb25zdCBwYXRoID0gc3RyaXBCYXNlKHBhdGhuYW1lLCBiYXNlKTtcclxuICAgIHJldHVybiBwYXRoICsgc2VhcmNoICsgaGFzaDtcclxufVxyXG5mdW5jdGlvbiB1c2VIaXN0b3J5TGlzdGVuZXJzKGJhc2UsIGhpc3RvcnlTdGF0ZSwgY3VycmVudExvY2F0aW9uLCByZXBsYWNlKSB7XHJcbiAgICBsZXQgbGlzdGVuZXJzID0gW107XHJcbiAgICBsZXQgdGVhcmRvd25zID0gW107XHJcbiAgICAvLyBUT0RPOiBzaG91bGQgaXQgYmUgYSBzdGFjaz8gYSBEaWN0LiBDaGVjayBpZiB0aGUgcG9wc3RhdGUgbGlzdGVuZXJcclxuICAgIC8vIGNhbiB0cmlnZ2VyIHR3aWNlXHJcbiAgICBsZXQgcGF1c2VTdGF0ZSA9IG51bGw7XHJcbiAgICBjb25zdCBwb3BTdGF0ZUhhbmRsZXIgPSAoeyBzdGF0ZSwgfSkgPT4ge1xyXG4gICAgICAgIGNvbnN0IHRvID0gY3JlYXRlQ3VycmVudExvY2F0aW9uKGJhc2UsIGxvY2F0aW9uKTtcclxuICAgICAgICBjb25zdCBmcm9tID0gY3VycmVudExvY2F0aW9uLnZhbHVlO1xyXG4gICAgICAgIGNvbnN0IGZyb21TdGF0ZSA9IGhpc3RvcnlTdGF0ZS52YWx1ZTtcclxuICAgICAgICBsZXQgZGVsdGEgPSAwO1xyXG4gICAgICAgIGlmIChzdGF0ZSkge1xyXG4gICAgICAgICAgICBjdXJyZW50TG9jYXRpb24udmFsdWUgPSB0bztcclxuICAgICAgICAgICAgaGlzdG9yeVN0YXRlLnZhbHVlID0gc3RhdGU7XHJcbiAgICAgICAgICAgIC8vIGlnbm9yZSB0aGUgcG9wc3RhdGUgYW5kIHJlc2V0IHRoZSBwYXVzZVN0YXRlXHJcbiAgICAgICAgICAgIGlmIChwYXVzZVN0YXRlICYmIHBhdXNlU3RhdGUgPT09IGZyb20pIHtcclxuICAgICAgICAgICAgICAgIHBhdXNlU3RhdGUgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGRlbHRhID0gZnJvbVN0YXRlID8gc3RhdGUucG9zaXRpb24gLSBmcm9tU3RhdGUucG9zaXRpb24gOiAwO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmVwbGFjZSh0byk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKHsgZGVsdGFGcm9tQ3VycmVudCB9KVxyXG4gICAgICAgIC8vIEhlcmUgd2UgY291bGQgYWxzbyByZXZlcnQgdGhlIG5hdmlnYXRpb24gYnkgY2FsbGluZyBoaXN0b3J5LmdvKC1kZWx0YSlcclxuICAgICAgICAvLyB0aGlzIGxpc3RlbmVyIHdpbGwgaGF2ZSB0byBiZSBhZGFwdGVkIHRvIG5vdCB0cmlnZ2VyIGFnYWluIGFuZCB0byB3YWl0IGZvciB0aGUgdXJsXHJcbiAgICAgICAgLy8gdG8gYmUgdXBkYXRlZCBiZWZvcmUgdHJpZ2dlcmluZyB0aGUgbGlzdGVuZXJzLiBTb21lIGtpbmQgb2YgdmFsaWRhdGlvbiBmdW5jdGlvbiB3b3VsZCBhbHNvXHJcbiAgICAgICAgLy8gbmVlZCB0byBiZSBwYXNzZWQgdG8gdGhlIGxpc3RlbmVycyBzbyB0aGUgbmF2aWdhdGlvbiBjYW4gYmUgYWNjZXB0ZWRcclxuICAgICAgICAvLyBjYWxsIGFsbCBsaXN0ZW5lcnNcclxuICAgICAgICBsaXN0ZW5lcnMuZm9yRWFjaChsaXN0ZW5lciA9PiB7XHJcbiAgICAgICAgICAgIGxpc3RlbmVyKGN1cnJlbnRMb2NhdGlvbi52YWx1ZSwgZnJvbSwge1xyXG4gICAgICAgICAgICAgICAgZGVsdGEsXHJcbiAgICAgICAgICAgICAgICB0eXBlOiBOYXZpZ2F0aW9uVHlwZS5wb3AsXHJcbiAgICAgICAgICAgICAgICBkaXJlY3Rpb246IGRlbHRhXHJcbiAgICAgICAgICAgICAgICAgICAgPyBkZWx0YSA+IDBcclxuICAgICAgICAgICAgICAgICAgICAgICAgPyBOYXZpZ2F0aW9uRGlyZWN0aW9uLmZvcndhcmRcclxuICAgICAgICAgICAgICAgICAgICAgICAgOiBOYXZpZ2F0aW9uRGlyZWN0aW9uLmJhY2tcclxuICAgICAgICAgICAgICAgICAgICA6IE5hdmlnYXRpb25EaXJlY3Rpb24udW5rbm93bixcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgZnVuY3Rpb24gcGF1c2VMaXN0ZW5lcnMoKSB7XHJcbiAgICAgICAgcGF1c2VTdGF0ZSA9IGN1cnJlbnRMb2NhdGlvbi52YWx1ZTtcclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIGxpc3RlbihjYWxsYmFjaykge1xyXG4gICAgICAgIC8vIHNldHVwIHRoZSBsaXN0ZW5lciBhbmQgcHJlcGFyZSB0ZWFyZG93biBjYWxsYmFja3NcclxuICAgICAgICBsaXN0ZW5lcnMucHVzaChjYWxsYmFjayk7XHJcbiAgICAgICAgY29uc3QgdGVhcmRvd24gPSAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gbGlzdGVuZXJzLmluZGV4T2YoY2FsbGJhY2spO1xyXG4gICAgICAgICAgICBpZiAoaW5kZXggPiAtMSlcclxuICAgICAgICAgICAgICAgIGxpc3RlbmVycy5zcGxpY2UoaW5kZXgsIDEpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGVhcmRvd25zLnB1c2godGVhcmRvd24pO1xyXG4gICAgICAgIHJldHVybiB0ZWFyZG93bjtcclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIGJlZm9yZVVubG9hZExpc3RlbmVyKCkge1xyXG4gICAgICAgIGNvbnN0IHsgaGlzdG9yeSB9ID0gd2luZG93O1xyXG4gICAgICAgIGlmICghaGlzdG9yeS5zdGF0ZSlcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIGhpc3RvcnkucmVwbGFjZVN0YXRlKGFzc2lnbih7fSwgaGlzdG9yeS5zdGF0ZSwgeyBzY3JvbGw6IGNvbXB1dGVTY3JvbGxQb3NpdGlvbigpIH0pLCAnJyk7XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiBkZXN0cm95KCkge1xyXG4gICAgICAgIGZvciAoY29uc3QgdGVhcmRvd24gb2YgdGVhcmRvd25zKVxyXG4gICAgICAgICAgICB0ZWFyZG93bigpO1xyXG4gICAgICAgIHRlYXJkb3ducyA9IFtdO1xyXG4gICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdwb3BzdGF0ZScsIHBvcFN0YXRlSGFuZGxlcik7XHJcbiAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2JlZm9yZXVubG9hZCcsIGJlZm9yZVVubG9hZExpc3RlbmVyKTtcclxuICAgIH1cclxuICAgIC8vIHNldHVwIHRoZSBsaXN0ZW5lcnMgYW5kIHByZXBhcmUgdGVhcmRvd24gY2FsbGJhY2tzXHJcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncG9wc3RhdGUnLCBwb3BTdGF0ZUhhbmRsZXIpO1xyXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2JlZm9yZXVubG9hZCcsIGJlZm9yZVVubG9hZExpc3RlbmVyKTtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgcGF1c2VMaXN0ZW5lcnMsXHJcbiAgICAgICAgbGlzdGVuLFxyXG4gICAgICAgIGRlc3Ryb3ksXHJcbiAgICB9O1xyXG59XHJcbi8qKlxyXG4gKiBDcmVhdGVzIGEgc3RhdGUgb2JqZWN0XHJcbiAqL1xyXG5mdW5jdGlvbiBidWlsZFN0YXRlKGJhY2ssIGN1cnJlbnQsIGZvcndhcmQsIHJlcGxhY2VkID0gZmFsc2UsIGNvbXB1dGVTY3JvbGwgPSBmYWxzZSkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBiYWNrLFxyXG4gICAgICAgIGN1cnJlbnQsXHJcbiAgICAgICAgZm9yd2FyZCxcclxuICAgICAgICByZXBsYWNlZCxcclxuICAgICAgICBwb3NpdGlvbjogd2luZG93Lmhpc3RvcnkubGVuZ3RoLFxyXG4gICAgICAgIHNjcm9sbDogY29tcHV0ZVNjcm9sbCA/IGNvbXB1dGVTY3JvbGxQb3NpdGlvbigpIDogbnVsbCxcclxuICAgIH07XHJcbn1cclxuZnVuY3Rpb24gdXNlSGlzdG9yeVN0YXRlTmF2aWdhdGlvbihiYXNlKSB7XHJcbiAgICBjb25zdCB7IGhpc3RvcnksIGxvY2F0aW9uIH0gPSB3aW5kb3c7XHJcbiAgICAvLyBwcml2YXRlIHZhcmlhYmxlc1xyXG4gICAgY29uc3QgY3VycmVudExvY2F0aW9uID0ge1xyXG4gICAgICAgIHZhbHVlOiBjcmVhdGVDdXJyZW50TG9jYXRpb24oYmFzZSwgbG9jYXRpb24pLFxyXG4gICAgfTtcclxuICAgIGNvbnN0IGhpc3RvcnlTdGF0ZSA9IHsgdmFsdWU6IGhpc3Rvcnkuc3RhdGUgfTtcclxuICAgIC8vIGJ1aWxkIGN1cnJlbnQgaGlzdG9yeSBlbnRyeSBhcyB0aGlzIGlzIGEgZnJlc2ggbmF2aWdhdGlvblxyXG4gICAgaWYgKCFoaXN0b3J5U3RhdGUudmFsdWUpIHtcclxuICAgICAgICBjaGFuZ2VMb2NhdGlvbihjdXJyZW50TG9jYXRpb24udmFsdWUsIHtcclxuICAgICAgICAgICAgYmFjazogbnVsbCxcclxuICAgICAgICAgICAgY3VycmVudDogY3VycmVudExvY2F0aW9uLnZhbHVlLFxyXG4gICAgICAgICAgICBmb3J3YXJkOiBudWxsLFxyXG4gICAgICAgICAgICAvLyB0aGUgbGVuZ3RoIGlzIG9mZiBieSBvbmUsIHdlIG5lZWQgdG8gZGVjcmVhc2UgaXRcclxuICAgICAgICAgICAgcG9zaXRpb246IGhpc3RvcnkubGVuZ3RoIC0gMSxcclxuICAgICAgICAgICAgcmVwbGFjZWQ6IHRydWUsXHJcbiAgICAgICAgICAgIC8vIGRvbid0IGFkZCBhIHNjcm9sbCBhcyB0aGUgdXNlciBtYXkgaGF2ZSBhbiBhbmNob3IgYW5kIHdlIHdhbnRcclxuICAgICAgICAgICAgLy8gc2Nyb2xsQmVoYXZpb3IgdG8gYmUgdHJpZ2dlcmVkIHdpdGhvdXQgYSBzYXZlZCBwb3NpdGlvblxyXG4gICAgICAgICAgICBzY3JvbGw6IG51bGwsXHJcbiAgICAgICAgfSwgdHJ1ZSk7XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiBjaGFuZ2VMb2NhdGlvbih0bywgc3RhdGUsIHJlcGxhY2UpIHtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBpZiBhIGJhc2UgdGFnIGlzIHByb3ZpZGVkIGFuZCB3ZSBhcmUgb24gYSBub3JtYWwgZG9tYWluLCB3ZSBoYXZlIHRvXHJcbiAgICAgICAgICogcmVzcGVjdCB0aGUgcHJvdmlkZWQgYGJhc2VgIGF0dHJpYnV0ZSBiZWNhdXNlIHB1c2hTdGF0ZSgpIHdpbGwgdXNlIGl0IGFuZFxyXG4gICAgICAgICAqIHBvdGVudGlhbGx5IGVyYXNlIGFueXRoaW5nIGJlZm9yZSB0aGUgYCNgIGxpa2UgYXRcclxuICAgICAgICAgKiBodHRwczovL2dpdGh1Yi5jb20vdnVlanMvcm91dGVyL2lzc3Vlcy82ODUgd2hlcmUgYSBiYXNlIG9mXHJcbiAgICAgICAgICogYC9mb2xkZXIvI2AgYnV0IGEgYmFzZSBvZiBgL2Agd291bGQgZXJhc2UgdGhlIGAvZm9sZGVyL2Agc2VjdGlvbi4gSWZcclxuICAgICAgICAgKiB0aGVyZSBpcyBubyBob3N0LCB0aGUgYDxiYXNlPmAgdGFnIG1ha2VzIG5vIHNlbnNlIGFuZCBpZiB0aGVyZSBpc24ndCBhXHJcbiAgICAgICAgICogYmFzZSB0YWcgd2UgY2FuIGp1c3QgdXNlIGV2ZXJ5dGhpbmcgYWZ0ZXIgdGhlIGAjYC5cclxuICAgICAgICAgKi9cclxuICAgICAgICBjb25zdCBoYXNoSW5kZXggPSBiYXNlLmluZGV4T2YoJyMnKTtcclxuICAgICAgICBjb25zdCB1cmwgPSBoYXNoSW5kZXggPiAtMVxyXG4gICAgICAgICAgICA/IChsb2NhdGlvbi5ob3N0ICYmIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2Jhc2UnKVxyXG4gICAgICAgICAgICAgICAgPyBiYXNlXHJcbiAgICAgICAgICAgICAgICA6IGJhc2Uuc2xpY2UoaGFzaEluZGV4KSkgKyB0b1xyXG4gICAgICAgICAgICA6IGNyZWF0ZUJhc2VMb2NhdGlvbigpICsgYmFzZSArIHRvO1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIC8vIEJST1dTRVIgUVVJUktcclxuICAgICAgICAgICAgLy8gTk9URTogU2FmYXJpIHRocm93cyBhIFNlY3VyaXR5RXJyb3Igd2hlbiBjYWxsaW5nIHRoaXMgZnVuY3Rpb24gMTAwIHRpbWVzIGluIDMwIHNlY29uZHNcclxuICAgICAgICAgICAgaGlzdG9yeVtyZXBsYWNlID8gJ3JlcGxhY2VTdGF0ZScgOiAncHVzaFN0YXRlJ10oc3RhdGUsICcnLCB1cmwpO1xyXG4gICAgICAgICAgICBoaXN0b3J5U3RhdGUudmFsdWUgPSBzdGF0ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKGVycikge1xyXG4gICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XHJcbiAgICAgICAgICAgICAgICB3YXJuKCdFcnJvciB3aXRoIHB1c2gvcmVwbGFjZSBTdGF0ZScsIGVycik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gRm9yY2UgdGhlIG5hdmlnYXRpb24sIHRoaXMgYWxzbyByZXNldHMgdGhlIGNhbGwgY291bnRcclxuICAgICAgICAgICAgbG9jYXRpb25bcmVwbGFjZSA/ICdyZXBsYWNlJyA6ICdhc3NpZ24nXSh1cmwpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIHJlcGxhY2UodG8sIGRhdGEpIHtcclxuICAgICAgICBjb25zdCBzdGF0ZSA9IGFzc2lnbih7fSwgaGlzdG9yeS5zdGF0ZSwgYnVpbGRTdGF0ZShoaXN0b3J5U3RhdGUudmFsdWUuYmFjaywgXHJcbiAgICAgICAgLy8ga2VlcCBiYWNrIGFuZCBmb3J3YXJkIGVudHJpZXMgYnV0IG92ZXJyaWRlIGN1cnJlbnQgcG9zaXRpb25cclxuICAgICAgICB0bywgaGlzdG9yeVN0YXRlLnZhbHVlLmZvcndhcmQsIHRydWUpLCBkYXRhLCB7IHBvc2l0aW9uOiBoaXN0b3J5U3RhdGUudmFsdWUucG9zaXRpb24gfSk7XHJcbiAgICAgICAgY2hhbmdlTG9jYXRpb24odG8sIHN0YXRlLCB0cnVlKTtcclxuICAgICAgICBjdXJyZW50TG9jYXRpb24udmFsdWUgPSB0bztcclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIHB1c2godG8sIGRhdGEpIHtcclxuICAgICAgICAvLyBBZGQgdG8gY3VycmVudCBlbnRyeSB0aGUgaW5mb3JtYXRpb24gb2Ygd2hlcmUgd2UgYXJlIGdvaW5nXHJcbiAgICAgICAgLy8gYXMgd2VsbCBhcyBzYXZpbmcgdGhlIGN1cnJlbnQgcG9zaXRpb25cclxuICAgICAgICBjb25zdCBjdXJyZW50U3RhdGUgPSBhc3NpZ24oe30sIFxyXG4gICAgICAgIC8vIHVzZSBjdXJyZW50IGhpc3Rvcnkgc3RhdGUgdG8gZ3JhY2VmdWxseSBoYW5kbGUgYSB3cm9uZyBjYWxsIHRvXHJcbiAgICAgICAgLy8gaGlzdG9yeS5yZXBsYWNlU3RhdGVcclxuICAgICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vdnVlanMvcm91dGVyL2lzc3Vlcy8zNjZcclxuICAgICAgICBoaXN0b3J5U3RhdGUudmFsdWUsIGhpc3Rvcnkuc3RhdGUsIHtcclxuICAgICAgICAgICAgZm9yd2FyZDogdG8sXHJcbiAgICAgICAgICAgIHNjcm9sbDogY29tcHV0ZVNjcm9sbFBvc2l0aW9uKCksXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiAhaGlzdG9yeS5zdGF0ZSkge1xyXG4gICAgICAgICAgICB3YXJuKGBoaXN0b3J5LnN0YXRlIHNlZW1zIHRvIGhhdmUgYmVlbiBtYW51YWxseSByZXBsYWNlZCB3aXRob3V0IHByZXNlcnZpbmcgdGhlIG5lY2Vzc2FyeSB2YWx1ZXMuIE1ha2Ugc3VyZSB0byBwcmVzZXJ2ZSBleGlzdGluZyBoaXN0b3J5IHN0YXRlIGlmIHlvdSBhcmUgbWFudWFsbHkgY2FsbGluZyBoaXN0b3J5LnJlcGxhY2VTdGF0ZTpcXG5cXG5gICtcclxuICAgICAgICAgICAgICAgIGBoaXN0b3J5LnJlcGxhY2VTdGF0ZShoaXN0b3J5LnN0YXRlLCAnJywgdXJsKVxcblxcbmAgK1xyXG4gICAgICAgICAgICAgICAgYFlvdSBjYW4gZmluZCBtb3JlIGluZm9ybWF0aW9uIGF0IGh0dHBzOi8vbmV4dC5yb3V0ZXIudnVlanMub3JnL2d1aWRlL21pZ3JhdGlvbi8jdXNhZ2Utb2YtaGlzdG9yeS1zdGF0ZS5gKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2hhbmdlTG9jYXRpb24oY3VycmVudFN0YXRlLmN1cnJlbnQsIGN1cnJlbnRTdGF0ZSwgdHJ1ZSk7XHJcbiAgICAgICAgY29uc3Qgc3RhdGUgPSBhc3NpZ24oe30sIGJ1aWxkU3RhdGUoY3VycmVudExvY2F0aW9uLnZhbHVlLCB0bywgbnVsbCksIHsgcG9zaXRpb246IGN1cnJlbnRTdGF0ZS5wb3NpdGlvbiArIDEgfSwgZGF0YSk7XHJcbiAgICAgICAgY2hhbmdlTG9jYXRpb24odG8sIHN0YXRlLCBmYWxzZSk7XHJcbiAgICAgICAgY3VycmVudExvY2F0aW9uLnZhbHVlID0gdG87XHJcbiAgICB9XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIGxvY2F0aW9uOiBjdXJyZW50TG9jYXRpb24sXHJcbiAgICAgICAgc3RhdGU6IGhpc3RvcnlTdGF0ZSxcclxuICAgICAgICBwdXNoLFxyXG4gICAgICAgIHJlcGxhY2UsXHJcbiAgICB9O1xyXG59XHJcbi8qKlxyXG4gKiBDcmVhdGVzIGFuIEhUTUw1IGhpc3RvcnkuIE1vc3QgY29tbW9uIGhpc3RvcnkgZm9yIHNpbmdsZSBwYWdlIGFwcGxpY2F0aW9ucy5cclxuICpcclxuICogQHBhcmFtIGJhc2UgLVxyXG4gKi9cclxuZnVuY3Rpb24gY3JlYXRlV2ViSGlzdG9yeShiYXNlKSB7XHJcbiAgICBiYXNlID0gbm9ybWFsaXplQmFzZShiYXNlKTtcclxuICAgIGNvbnN0IGhpc3RvcnlOYXZpZ2F0aW9uID0gdXNlSGlzdG9yeVN0YXRlTmF2aWdhdGlvbihiYXNlKTtcclxuICAgIGNvbnN0IGhpc3RvcnlMaXN0ZW5lcnMgPSB1c2VIaXN0b3J5TGlzdGVuZXJzKGJhc2UsIGhpc3RvcnlOYXZpZ2F0aW9uLnN0YXRlLCBoaXN0b3J5TmF2aWdhdGlvbi5sb2NhdGlvbiwgaGlzdG9yeU5hdmlnYXRpb24ucmVwbGFjZSk7XHJcbiAgICBmdW5jdGlvbiBnbyhkZWx0YSwgdHJpZ2dlckxpc3RlbmVycyA9IHRydWUpIHtcclxuICAgICAgICBpZiAoIXRyaWdnZXJMaXN0ZW5lcnMpXHJcbiAgICAgICAgICAgIGhpc3RvcnlMaXN0ZW5lcnMucGF1c2VMaXN0ZW5lcnMoKTtcclxuICAgICAgICBoaXN0b3J5LmdvKGRlbHRhKTtcclxuICAgIH1cclxuICAgIGNvbnN0IHJvdXRlckhpc3RvcnkgPSBhc3NpZ24oe1xyXG4gICAgICAgIC8vIGl0J3Mgb3ZlcnJpZGRlbiByaWdodCBhZnRlclxyXG4gICAgICAgIGxvY2F0aW9uOiAnJyxcclxuICAgICAgICBiYXNlLFxyXG4gICAgICAgIGdvLFxyXG4gICAgICAgIGNyZWF0ZUhyZWY6IGNyZWF0ZUhyZWYuYmluZChudWxsLCBiYXNlKSxcclxuICAgIH0sIGhpc3RvcnlOYXZpZ2F0aW9uLCBoaXN0b3J5TGlzdGVuZXJzKTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShyb3V0ZXJIaXN0b3J5LCAnbG9jYXRpb24nLCB7XHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBnZXQ6ICgpID0+IGhpc3RvcnlOYXZpZ2F0aW9uLmxvY2F0aW9uLnZhbHVlLFxyXG4gICAgfSk7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkocm91dGVySGlzdG9yeSwgJ3N0YXRlJywge1xyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgZ2V0OiAoKSA9PiBoaXN0b3J5TmF2aWdhdGlvbi5zdGF0ZS52YWx1ZSxcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIHJvdXRlckhpc3Rvcnk7XHJcbn1cblxuLyoqXHJcbiAqIENyZWF0ZXMgYSBpbi1tZW1vcnkgYmFzZWQgaGlzdG9yeS4gVGhlIG1haW4gcHVycG9zZSBvZiB0aGlzIGhpc3RvcnkgaXMgdG8gaGFuZGxlIFNTUi4gSXQgc3RhcnRzIGluIGEgc3BlY2lhbCBsb2NhdGlvbiB0aGF0IGlzIG5vd2hlcmUuXHJcbiAqIEl0J3MgdXAgdG8gdGhlIHVzZXIgdG8gcmVwbGFjZSB0aGF0IGxvY2F0aW9uIHdpdGggdGhlIHN0YXJ0ZXIgbG9jYXRpb24gYnkgZWl0aGVyIGNhbGxpbmcgYHJvdXRlci5wdXNoYCBvciBgcm91dGVyLnJlcGxhY2VgLlxyXG4gKlxyXG4gKiBAcGFyYW0gYmFzZSAtIEJhc2UgYXBwbGllZCB0byBhbGwgdXJscywgZGVmYXVsdHMgdG8gJy8nXHJcbiAqIEByZXR1cm5zIGEgaGlzdG9yeSBvYmplY3QgdGhhdCBjYW4gYmUgcGFzc2VkIHRvIHRoZSByb3V0ZXIgY29uc3RydWN0b3JcclxuICovXHJcbmZ1bmN0aW9uIGNyZWF0ZU1lbW9yeUhpc3RvcnkoYmFzZSA9ICcnKSB7XHJcbiAgICBsZXQgbGlzdGVuZXJzID0gW107XHJcbiAgICBsZXQgcXVldWUgPSBbU1RBUlRdO1xyXG4gICAgbGV0IHBvc2l0aW9uID0gMDtcclxuICAgIGJhc2UgPSBub3JtYWxpemVCYXNlKGJhc2UpO1xyXG4gICAgZnVuY3Rpb24gc2V0TG9jYXRpb24obG9jYXRpb24pIHtcclxuICAgICAgICBwb3NpdGlvbisrO1xyXG4gICAgICAgIGlmIChwb3NpdGlvbiA9PT0gcXVldWUubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIC8vIHdlIGFyZSBhdCB0aGUgZW5kLCB3ZSBjYW4gc2ltcGx5IGFwcGVuZCBhIG5ldyBlbnRyeVxyXG4gICAgICAgICAgICBxdWV1ZS5wdXNoKGxvY2F0aW9uKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIHdlIGFyZSBpbiB0aGUgbWlkZGxlLCB3ZSByZW1vdmUgZXZlcnl0aGluZyBmcm9tIGhlcmUgaW4gdGhlIHF1ZXVlXHJcbiAgICAgICAgICAgIHF1ZXVlLnNwbGljZShwb3NpdGlvbik7XHJcbiAgICAgICAgICAgIHF1ZXVlLnB1c2gobG9jYXRpb24pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIHRyaWdnZXJMaXN0ZW5lcnModG8sIGZyb20sIHsgZGlyZWN0aW9uLCBkZWx0YSB9KSB7XHJcbiAgICAgICAgY29uc3QgaW5mbyA9IHtcclxuICAgICAgICAgICAgZGlyZWN0aW9uLFxyXG4gICAgICAgICAgICBkZWx0YSxcclxuICAgICAgICAgICAgdHlwZTogTmF2aWdhdGlvblR5cGUucG9wLFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgZm9yIChjb25zdCBjYWxsYmFjayBvZiBsaXN0ZW5lcnMpIHtcclxuICAgICAgICAgICAgY2FsbGJhY2sodG8sIGZyb20sIGluZm8pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGNvbnN0IHJvdXRlckhpc3RvcnkgPSB7XHJcbiAgICAgICAgLy8gcmV3cml0dGVuIGJ5IE9iamVjdC5kZWZpbmVQcm9wZXJ0eVxyXG4gICAgICAgIGxvY2F0aW9uOiBTVEFSVCxcclxuICAgICAgICAvLyBUT0RPOiBzaG91bGQgYmUga2VwdCBpbiBxdWV1ZVxyXG4gICAgICAgIHN0YXRlOiB7fSxcclxuICAgICAgICBiYXNlLFxyXG4gICAgICAgIGNyZWF0ZUhyZWY6IGNyZWF0ZUhyZWYuYmluZChudWxsLCBiYXNlKSxcclxuICAgICAgICByZXBsYWNlKHRvKSB7XHJcbiAgICAgICAgICAgIC8vIHJlbW92ZSBjdXJyZW50IGVudHJ5IGFuZCBkZWNyZW1lbnQgcG9zaXRpb25cclxuICAgICAgICAgICAgcXVldWUuc3BsaWNlKHBvc2l0aW9uLS0sIDEpO1xyXG4gICAgICAgICAgICBzZXRMb2NhdGlvbih0byk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBwdXNoKHRvLCBkYXRhKSB7XHJcbiAgICAgICAgICAgIHNldExvY2F0aW9uKHRvKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGxpc3RlbihjYWxsYmFjaykge1xyXG4gICAgICAgICAgICBsaXN0ZW5lcnMucHVzaChjYWxsYmFjayk7XHJcbiAgICAgICAgICAgIHJldHVybiAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBpbmRleCA9IGxpc3RlbmVycy5pbmRleE9mKGNhbGxiYWNrKTtcclxuICAgICAgICAgICAgICAgIGlmIChpbmRleCA+IC0xKVxyXG4gICAgICAgICAgICAgICAgICAgIGxpc3RlbmVycy5zcGxpY2UoaW5kZXgsIDEpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZGVzdHJveSgpIHtcclxuICAgICAgICAgICAgbGlzdGVuZXJzID0gW107XHJcbiAgICAgICAgICAgIHF1ZXVlID0gW1NUQVJUXTtcclxuICAgICAgICAgICAgcG9zaXRpb24gPSAwO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZ28oZGVsdGEsIHNob3VsZFRyaWdnZXIgPSB0cnVlKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGZyb20gPSB0aGlzLmxvY2F0aW9uO1xyXG4gICAgICAgICAgICBjb25zdCBkaXJlY3Rpb24gPSBcclxuICAgICAgICAgICAgLy8gd2UgYXJlIGNvbnNpZGVyaW5nIGRlbHRhID09PSAwIGdvaW5nIGZvcndhcmQsIGJ1dCBpbiBhYnN0cmFjdCBtb2RlXHJcbiAgICAgICAgICAgIC8vIHVzaW5nIDAgZm9yIHRoZSBkZWx0YSBkb2Vzbid0IG1ha2Ugc2Vuc2UgbGlrZSBpdCBkb2VzIGluIGh0bWw1IHdoZXJlXHJcbiAgICAgICAgICAgIC8vIGl0IHJlbG9hZHMgdGhlIHBhZ2VcclxuICAgICAgICAgICAgZGVsdGEgPCAwID8gTmF2aWdhdGlvbkRpcmVjdGlvbi5iYWNrIDogTmF2aWdhdGlvbkRpcmVjdGlvbi5mb3J3YXJkO1xyXG4gICAgICAgICAgICBwb3NpdGlvbiA9IE1hdGgubWF4KDAsIE1hdGgubWluKHBvc2l0aW9uICsgZGVsdGEsIHF1ZXVlLmxlbmd0aCAtIDEpKTtcclxuICAgICAgICAgICAgaWYgKHNob3VsZFRyaWdnZXIpIHtcclxuICAgICAgICAgICAgICAgIHRyaWdnZXJMaXN0ZW5lcnModGhpcy5sb2NhdGlvbiwgZnJvbSwge1xyXG4gICAgICAgICAgICAgICAgICAgIGRpcmVjdGlvbixcclxuICAgICAgICAgICAgICAgICAgICBkZWx0YSxcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgIH07XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkocm91dGVySGlzdG9yeSwgJ2xvY2F0aW9uJywge1xyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgZ2V0OiAoKSA9PiBxdWV1ZVtwb3NpdGlvbl0sXHJcbiAgICB9KTtcclxuICAgIHJldHVybiByb3V0ZXJIaXN0b3J5O1xyXG59XG5cbi8qKlxyXG4gKiBDcmVhdGVzIGEgaGFzaCBoaXN0b3J5LiBVc2VmdWwgZm9yIHdlYiBhcHBsaWNhdGlvbnMgd2l0aCBubyBob3N0IChlLmcuXHJcbiAqIGBmaWxlOi8vYCkgb3Igd2hlbiBjb25maWd1cmluZyBhIHNlcnZlciB0byBoYW5kbGUgYW55IFVSTCBpcyBub3QgcG9zc2libGUuXHJcbiAqXHJcbiAqIEBwYXJhbSBiYXNlIC0gb3B0aW9uYWwgYmFzZSB0byBwcm92aWRlLiBEZWZhdWx0cyB0byBgbG9jYXRpb24ucGF0aG5hbWUgK1xyXG4gKiBsb2NhdGlvbi5zZWFyY2hgIElmIHRoZXJlIGlzIGEgYDxiYXNlPmAgdGFnIGluIHRoZSBgaGVhZGAsIGl0cyB2YWx1ZSB3aWxsIGJlXHJcbiAqIGlnbm9yZWQgaW4gZmF2b3Igb2YgdGhpcyBwYXJhbWV0ZXIgKipidXQgbm90ZSBpdCBhZmZlY3RzIGFsbCB0aGVcclxuICogaGlzdG9yeS5wdXNoU3RhdGUoKSBjYWxscyoqLCBtZWFuaW5nIHRoYXQgaWYgeW91IHVzZSBhIGA8YmFzZT5gIHRhZywgaXQnc1xyXG4gKiBgaHJlZmAgdmFsdWUgKipoYXMgdG8gbWF0Y2ggdGhpcyBwYXJhbWV0ZXIqKiAoaWdub3JpbmcgYW55dGhpbmcgYWZ0ZXIgdGhlXHJcbiAqIGAjYCkuXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIGBgYGpzXHJcbiAqIC8vIGF0IGh0dHBzOi8vZXhhbXBsZS5jb20vZm9sZGVyXHJcbiAqIGNyZWF0ZVdlYkhhc2hIaXN0b3J5KCkgLy8gZ2l2ZXMgYSB1cmwgb2YgYGh0dHBzOi8vZXhhbXBsZS5jb20vZm9sZGVyI2BcclxuICogY3JlYXRlV2ViSGFzaEhpc3RvcnkoJy9mb2xkZXIvJykgLy8gZ2l2ZXMgYSB1cmwgb2YgYGh0dHBzOi8vZXhhbXBsZS5jb20vZm9sZGVyLyNgXHJcbiAqIC8vIGlmIHRoZSBgI2AgaXMgcHJvdmlkZWQgaW4gdGhlIGJhc2UsIGl0IHdvbid0IGJlIGFkZGVkIGJ5IGBjcmVhdGVXZWJIYXNoSGlzdG9yeWBcclxuICogY3JlYXRlV2ViSGFzaEhpc3RvcnkoJy9mb2xkZXIvIy9hcHAvJykgLy8gZ2l2ZXMgYSB1cmwgb2YgYGh0dHBzOi8vZXhhbXBsZS5jb20vZm9sZGVyLyMvYXBwL2BcclxuICogLy8geW91IHNob3VsZCBhdm9pZCBkb2luZyB0aGlzIGJlY2F1c2UgaXQgY2hhbmdlcyB0aGUgb3JpZ2luYWwgdXJsIGFuZCBicmVha3MgY29weWluZyB1cmxzXHJcbiAqIGNyZWF0ZVdlYkhhc2hIaXN0b3J5KCcvb3RoZXItZm9sZGVyLycpIC8vIGdpdmVzIGEgdXJsIG9mIGBodHRwczovL2V4YW1wbGUuY29tL290aGVyLWZvbGRlci8jYFxyXG4gKlxyXG4gKiAvLyBhdCBmaWxlOi8vL3Vzci9ldGMvZm9sZGVyL2luZGV4Lmh0bWxcclxuICogLy8gZm9yIGxvY2F0aW9ucyB3aXRoIG5vIGBob3N0YCwgdGhlIGJhc2UgaXMgaWdub3JlZFxyXG4gKiBjcmVhdGVXZWJIYXNoSGlzdG9yeSgnL2lBbUlnbm9yZWQnKSAvLyBnaXZlcyBhIHVybCBvZiBgZmlsZTovLy91c3IvZXRjL2ZvbGRlci9pbmRleC5odG1sI2BcclxuICogYGBgXHJcbiAqL1xyXG5mdW5jdGlvbiBjcmVhdGVXZWJIYXNoSGlzdG9yeShiYXNlKSB7XHJcbiAgICAvLyBNYWtlIHN1cmUgdGhpcyBpbXBsZW1lbnRhdGlvbiBpcyBmaW5lIGluIHRlcm1zIG9mIGVuY29kaW5nLCBzcGVjaWFsbHkgZm9yIElFMTFcclxuICAgIC8vIGZvciBgZmlsZTovL2AsIGRpcmVjdGx5IHVzZSB0aGUgcGF0aG5hbWUgYW5kIGlnbm9yZSB0aGUgYmFzZVxyXG4gICAgLy8gbG9jYXRpb24ucGF0aG5hbWUgY29udGFpbnMgYW4gaW5pdGlhbCBgL2AgZXZlbiBhdCB0aGUgcm9vdDogYGh0dHBzOi8vZXhhbXBsZS5jb21gXHJcbiAgICBiYXNlID0gbG9jYXRpb24uaG9zdCA/IGJhc2UgfHwgbG9jYXRpb24ucGF0aG5hbWUgKyBsb2NhdGlvbi5zZWFyY2ggOiAnJztcclxuICAgIC8vIGFsbG93IHRoZSB1c2VyIHRvIHByb3ZpZGUgYSBgI2AgaW4gdGhlIG1pZGRsZTogYC9iYXNlLyMvYXBwYFxyXG4gICAgaWYgKCFiYXNlLmluY2x1ZGVzKCcjJykpXHJcbiAgICAgICAgYmFzZSArPSAnIyc7XHJcbiAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmICFiYXNlLmVuZHNXaXRoKCcjLycpICYmICFiYXNlLmVuZHNXaXRoKCcjJykpIHtcclxuICAgICAgICB3YXJuKGBBIGhhc2ggYmFzZSBtdXN0IGVuZCB3aXRoIGEgXCIjXCI6XFxuXCIke2Jhc2V9XCIgc2hvdWxkIGJlIFwiJHtiYXNlLnJlcGxhY2UoLyMuKiQvLCAnIycpfVwiLmApO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGNyZWF0ZVdlYkhpc3RvcnkoYmFzZSk7XHJcbn1cblxuZnVuY3Rpb24gaXNSb3V0ZUxvY2F0aW9uKHJvdXRlKSB7XHJcbiAgICByZXR1cm4gdHlwZW9mIHJvdXRlID09PSAnc3RyaW5nJyB8fCAocm91dGUgJiYgdHlwZW9mIHJvdXRlID09PSAnb2JqZWN0Jyk7XHJcbn1cclxuZnVuY3Rpb24gaXNSb3V0ZU5hbWUobmFtZSkge1xyXG4gICAgcmV0dXJuIHR5cGVvZiBuYW1lID09PSAnc3RyaW5nJyB8fCB0eXBlb2YgbmFtZSA9PT0gJ3N5bWJvbCc7XHJcbn1cblxuLyoqXHJcbiAqIEluaXRpYWwgcm91dGUgbG9jYXRpb24gd2hlcmUgdGhlIHJvdXRlciBpcy4gQ2FuIGJlIHVzZWQgaW4gbmF2aWdhdGlvbiBndWFyZHNcclxuICogdG8gZGlmZmVyZW50aWF0ZSB0aGUgaW5pdGlhbCBuYXZpZ2F0aW9uLlxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gKiBgYGBqc1xyXG4gKiBpbXBvcnQgeyBTVEFSVF9MT0NBVElPTiB9IGZyb20gJ3Z1ZS1yb3V0ZXInXHJcbiAqXHJcbiAqIHJvdXRlci5iZWZvcmVFYWNoKCh0bywgZnJvbSkgPT4ge1xyXG4gKiAgIGlmIChmcm9tID09PSBTVEFSVF9MT0NBVElPTikge1xyXG4gKiAgICAgLy8gaW5pdGlhbCBuYXZpZ2F0aW9uXHJcbiAqICAgfVxyXG4gKiB9KVxyXG4gKiBgYGBcclxuICovXHJcbmNvbnN0IFNUQVJUX0xPQ0FUSU9OX05PUk1BTElaRUQgPSB7XHJcbiAgICBwYXRoOiAnLycsXHJcbiAgICBuYW1lOiB1bmRlZmluZWQsXHJcbiAgICBwYXJhbXM6IHt9LFxyXG4gICAgcXVlcnk6IHt9LFxyXG4gICAgaGFzaDogJycsXHJcbiAgICBmdWxsUGF0aDogJy8nLFxyXG4gICAgbWF0Y2hlZDogW10sXHJcbiAgICBtZXRhOiB7fSxcclxuICAgIHJlZGlyZWN0ZWRGcm9tOiB1bmRlZmluZWQsXHJcbn07XG5cbmNvbnN0IE5hdmlnYXRpb25GYWlsdXJlU3ltYm9sID0gLyojX19QVVJFX18qLyBQb2x5U3ltYm9sKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSA/ICduYXZpZ2F0aW9uIGZhaWx1cmUnIDogJ25mJyk7XHJcbi8qKlxyXG4gKiBFbnVtZXJhdGlvbiB3aXRoIGFsbCBwb3NzaWJsZSB0eXBlcyBmb3IgbmF2aWdhdGlvbiBmYWlsdXJlcy4gQ2FuIGJlIHBhc3NlZCB0b1xyXG4gKiB7QGxpbmsgaXNOYXZpZ2F0aW9uRmFpbHVyZX0gdG8gY2hlY2sgZm9yIHNwZWNpZmljIGZhaWx1cmVzLlxyXG4gKi9cclxudmFyIE5hdmlnYXRpb25GYWlsdXJlVHlwZTtcclxuKGZ1bmN0aW9uIChOYXZpZ2F0aW9uRmFpbHVyZVR5cGUpIHtcclxuICAgIC8qKlxyXG4gICAgICogQW4gYWJvcnRlZCBuYXZpZ2F0aW9uIGlzIGEgbmF2aWdhdGlvbiB0aGF0IGZhaWxlZCBiZWNhdXNlIGEgbmF2aWdhdGlvblxyXG4gICAgICogZ3VhcmQgcmV0dXJuZWQgYGZhbHNlYCBvciBjYWxsZWQgYG5leHQoZmFsc2UpYFxyXG4gICAgICovXHJcbiAgICBOYXZpZ2F0aW9uRmFpbHVyZVR5cGVbTmF2aWdhdGlvbkZhaWx1cmVUeXBlW1wiYWJvcnRlZFwiXSA9IDRdID0gXCJhYm9ydGVkXCI7XHJcbiAgICAvKipcclxuICAgICAqIEEgY2FuY2VsbGVkIG5hdmlnYXRpb24gaXMgYSBuYXZpZ2F0aW9uIHRoYXQgZmFpbGVkIGJlY2F1c2UgYSBtb3JlIHJlY2VudFxyXG4gICAgICogbmF2aWdhdGlvbiBmaW5pc2hlZCBzdGFydGVkIChub3QgbmVjZXNzYXJpbHkgZmluaXNoZWQpLlxyXG4gICAgICovXHJcbiAgICBOYXZpZ2F0aW9uRmFpbHVyZVR5cGVbTmF2aWdhdGlvbkZhaWx1cmVUeXBlW1wiY2FuY2VsbGVkXCJdID0gOF0gPSBcImNhbmNlbGxlZFwiO1xyXG4gICAgLyoqXHJcbiAgICAgKiBBIGR1cGxpY2F0ZWQgbmF2aWdhdGlvbiBpcyBhIG5hdmlnYXRpb24gdGhhdCBmYWlsZWQgYmVjYXVzZSBpdCB3YXNcclxuICAgICAqIGluaXRpYXRlZCB3aGlsZSBhbHJlYWR5IGJlaW5nIGF0IHRoZSBleGFjdCBzYW1lIGxvY2F0aW9uLlxyXG4gICAgICovXHJcbiAgICBOYXZpZ2F0aW9uRmFpbHVyZVR5cGVbTmF2aWdhdGlvbkZhaWx1cmVUeXBlW1wiZHVwbGljYXRlZFwiXSA9IDE2XSA9IFwiZHVwbGljYXRlZFwiO1xyXG59KShOYXZpZ2F0aW9uRmFpbHVyZVR5cGUgfHwgKE5hdmlnYXRpb25GYWlsdXJlVHlwZSA9IHt9KSk7XHJcbi8vIERFViBvbmx5IGRlYnVnIG1lc3NhZ2VzXHJcbmNvbnN0IEVycm9yVHlwZU1lc3NhZ2VzID0ge1xyXG4gICAgWzEgLyogTUFUQ0hFUl9OT1RfRk9VTkQgKi9dKHsgbG9jYXRpb24sIGN1cnJlbnRMb2NhdGlvbiB9KSB7XHJcbiAgICAgICAgcmV0dXJuIGBObyBtYXRjaCBmb3JcXG4gJHtKU09OLnN0cmluZ2lmeShsb2NhdGlvbil9JHtjdXJyZW50TG9jYXRpb25cclxuICAgICAgICAgICAgPyAnXFxud2hpbGUgYmVpbmcgYXRcXG4nICsgSlNPTi5zdHJpbmdpZnkoY3VycmVudExvY2F0aW9uKVxyXG4gICAgICAgICAgICA6ICcnfWA7XHJcbiAgICB9LFxyXG4gICAgWzIgLyogTkFWSUdBVElPTl9HVUFSRF9SRURJUkVDVCAqL10oeyBmcm9tLCB0bywgfSkge1xyXG4gICAgICAgIHJldHVybiBgUmVkaXJlY3RlZCBmcm9tIFwiJHtmcm9tLmZ1bGxQYXRofVwiIHRvIFwiJHtzdHJpbmdpZnlSb3V0ZSh0byl9XCIgdmlhIGEgbmF2aWdhdGlvbiBndWFyZC5gO1xyXG4gICAgfSxcclxuICAgIFs0IC8qIE5BVklHQVRJT05fQUJPUlRFRCAqL10oeyBmcm9tLCB0byB9KSB7XHJcbiAgICAgICAgcmV0dXJuIGBOYXZpZ2F0aW9uIGFib3J0ZWQgZnJvbSBcIiR7ZnJvbS5mdWxsUGF0aH1cIiB0byBcIiR7dG8uZnVsbFBhdGh9XCIgdmlhIGEgbmF2aWdhdGlvbiBndWFyZC5gO1xyXG4gICAgfSxcclxuICAgIFs4IC8qIE5BVklHQVRJT05fQ0FOQ0VMTEVEICovXSh7IGZyb20sIHRvIH0pIHtcclxuICAgICAgICByZXR1cm4gYE5hdmlnYXRpb24gY2FuY2VsbGVkIGZyb20gXCIke2Zyb20uZnVsbFBhdGh9XCIgdG8gXCIke3RvLmZ1bGxQYXRofVwiIHdpdGggYSBuZXcgbmF2aWdhdGlvbi5gO1xyXG4gICAgfSxcclxuICAgIFsxNiAvKiBOQVZJR0FUSU9OX0RVUExJQ0FURUQgKi9dKHsgZnJvbSwgdG8gfSkge1xyXG4gICAgICAgIHJldHVybiBgQXZvaWRlZCByZWR1bmRhbnQgbmF2aWdhdGlvbiB0byBjdXJyZW50IGxvY2F0aW9uOiBcIiR7ZnJvbS5mdWxsUGF0aH1cIi5gO1xyXG4gICAgfSxcclxufTtcclxuZnVuY3Rpb24gY3JlYXRlUm91dGVyRXJyb3IodHlwZSwgcGFyYW1zKSB7XHJcbiAgICAvLyBrZWVwIGZ1bGwgZXJyb3IgbWVzc2FnZXMgaW4gY2pzIHZlcnNpb25zXHJcbiAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHx8ICF0cnVlKSB7XHJcbiAgICAgICAgcmV0dXJuIGFzc2lnbihuZXcgRXJyb3IoRXJyb3JUeXBlTWVzc2FnZXNbdHlwZV0ocGFyYW1zKSksIHtcclxuICAgICAgICAgICAgdHlwZSxcclxuICAgICAgICAgICAgW05hdmlnYXRpb25GYWlsdXJlU3ltYm9sXTogdHJ1ZSxcclxuICAgICAgICB9LCBwYXJhbXMpO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIGFzc2lnbihuZXcgRXJyb3IoKSwge1xyXG4gICAgICAgICAgICB0eXBlLFxyXG4gICAgICAgICAgICBbTmF2aWdhdGlvbkZhaWx1cmVTeW1ib2xdOiB0cnVlLFxyXG4gICAgICAgIH0sIHBhcmFtcyk7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gaXNOYXZpZ2F0aW9uRmFpbHVyZShlcnJvciwgdHlwZSkge1xyXG4gICAgcmV0dXJuIChlcnJvciBpbnN0YW5jZW9mIEVycm9yICYmXHJcbiAgICAgICAgTmF2aWdhdGlvbkZhaWx1cmVTeW1ib2wgaW4gZXJyb3IgJiZcclxuICAgICAgICAodHlwZSA9PSBudWxsIHx8ICEhKGVycm9yLnR5cGUgJiB0eXBlKSkpO1xyXG59XHJcbmNvbnN0IHByb3BlcnRpZXNUb0xvZyA9IFsncGFyYW1zJywgJ3F1ZXJ5JywgJ2hhc2gnXTtcclxuZnVuY3Rpb24gc3RyaW5naWZ5Um91dGUodG8pIHtcclxuICAgIGlmICh0eXBlb2YgdG8gPT09ICdzdHJpbmcnKVxyXG4gICAgICAgIHJldHVybiB0bztcclxuICAgIGlmICgncGF0aCcgaW4gdG8pXHJcbiAgICAgICAgcmV0dXJuIHRvLnBhdGg7XHJcbiAgICBjb25zdCBsb2NhdGlvbiA9IHt9O1xyXG4gICAgZm9yIChjb25zdCBrZXkgb2YgcHJvcGVydGllc1RvTG9nKSB7XHJcbiAgICAgICAgaWYgKGtleSBpbiB0bylcclxuICAgICAgICAgICAgbG9jYXRpb25ba2V5XSA9IHRvW2tleV07XHJcbiAgICB9XHJcbiAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkobG9jYXRpb24sIG51bGwsIDIpO1xyXG59XG5cbi8vIGRlZmF1bHQgcGF0dGVybiBmb3IgYSBwYXJhbTogbm9uIGdyZWVkeSBldmVyeXRoaW5nIGJ1dCAvXHJcbmNvbnN0IEJBU0VfUEFSQU1fUEFUVEVSTiA9ICdbXi9dKz8nO1xyXG5jb25zdCBCQVNFX1BBVEhfUEFSU0VSX09QVElPTlMgPSB7XHJcbiAgICBzZW5zaXRpdmU6IGZhbHNlLFxyXG4gICAgc3RyaWN0OiBmYWxzZSxcclxuICAgIHN0YXJ0OiB0cnVlLFxyXG4gICAgZW5kOiB0cnVlLFxyXG59O1xyXG4vLyBTcGVjaWFsIFJlZ2V4IGNoYXJhY3RlcnMgdGhhdCBtdXN0IGJlIGVzY2FwZWQgaW4gc3RhdGljIHRva2Vuc1xyXG5jb25zdCBSRUdFWF9DSEFSU19SRSA9IC9bLisqP14ke30oKVtcXF0vXFxcXF0vZztcclxuLyoqXHJcbiAqIENyZWF0ZXMgYSBwYXRoIHBhcnNlciBmcm9tIGFuIGFycmF5IG9mIFNlZ21lbnRzIChhIHNlZ21lbnQgaXMgYW4gYXJyYXkgb2YgVG9rZW5zKVxyXG4gKlxyXG4gKiBAcGFyYW0gc2VnbWVudHMgLSBhcnJheSBvZiBzZWdtZW50cyByZXR1cm5lZCBieSB0b2tlbml6ZVBhdGhcclxuICogQHBhcmFtIGV4dHJhT3B0aW9ucyAtIG9wdGlvbmFsIG9wdGlvbnMgZm9yIHRoZSByZWdleHBcclxuICogQHJldHVybnMgYSBQYXRoUGFyc2VyXHJcbiAqL1xyXG5mdW5jdGlvbiB0b2tlbnNUb1BhcnNlcihzZWdtZW50cywgZXh0cmFPcHRpb25zKSB7XHJcbiAgICBjb25zdCBvcHRpb25zID0gYXNzaWduKHt9LCBCQVNFX1BBVEhfUEFSU0VSX09QVElPTlMsIGV4dHJhT3B0aW9ucyk7XHJcbiAgICAvLyB0aGUgYW1vdW50IG9mIHNjb3JlcyBpcyB0aGUgc2FtZSBhcyB0aGUgbGVuZ3RoIG9mIHNlZ21lbnRzIGV4Y2VwdCBmb3IgdGhlIHJvb3Qgc2VnbWVudCBcIi9cIlxyXG4gICAgY29uc3Qgc2NvcmUgPSBbXTtcclxuICAgIC8vIHRoZSByZWdleHAgYXMgYSBzdHJpbmdcclxuICAgIGxldCBwYXR0ZXJuID0gb3B0aW9ucy5zdGFydCA/ICdeJyA6ICcnO1xyXG4gICAgLy8gZXh0cmFjdGVkIGtleXNcclxuICAgIGNvbnN0IGtleXMgPSBbXTtcclxuICAgIGZvciAoY29uc3Qgc2VnbWVudCBvZiBzZWdtZW50cykge1xyXG4gICAgICAgIC8vIHRoZSByb290IHNlZ21lbnQgbmVlZHMgc3BlY2lhbCB0cmVhdG1lbnRcclxuICAgICAgICBjb25zdCBzZWdtZW50U2NvcmVzID0gc2VnbWVudC5sZW5ndGggPyBbXSA6IFs5MCAvKiBSb290ICovXTtcclxuICAgICAgICAvLyBhbGxvdyB0cmFpbGluZyBzbGFzaFxyXG4gICAgICAgIGlmIChvcHRpb25zLnN0cmljdCAmJiAhc2VnbWVudC5sZW5ndGgpXHJcbiAgICAgICAgICAgIHBhdHRlcm4gKz0gJy8nO1xyXG4gICAgICAgIGZvciAobGV0IHRva2VuSW5kZXggPSAwOyB0b2tlbkluZGV4IDwgc2VnbWVudC5sZW5ndGg7IHRva2VuSW5kZXgrKykge1xyXG4gICAgICAgICAgICBjb25zdCB0b2tlbiA9IHNlZ21lbnRbdG9rZW5JbmRleF07XHJcbiAgICAgICAgICAgIC8vIHJlc2V0cyB0aGUgc2NvcmUgaWYgd2UgYXJlIGluc2lkZSBhIHN1YiBzZWdtZW50IC86YS1vdGhlci06YlxyXG4gICAgICAgICAgICBsZXQgc3ViU2VnbWVudFNjb3JlID0gNDAgLyogU2VnbWVudCAqLyArXHJcbiAgICAgICAgICAgICAgICAob3B0aW9ucy5zZW5zaXRpdmUgPyAwLjI1IC8qIEJvbnVzQ2FzZVNlbnNpdGl2ZSAqLyA6IDApO1xyXG4gICAgICAgICAgICBpZiAodG9rZW4udHlwZSA9PT0gMCAvKiBTdGF0aWMgKi8pIHtcclxuICAgICAgICAgICAgICAgIC8vIHByZXBlbmQgdGhlIHNsYXNoIGlmIHdlIGFyZSBzdGFydGluZyBhIG5ldyBzZWdtZW50XHJcbiAgICAgICAgICAgICAgICBpZiAoIXRva2VuSW5kZXgpXHJcbiAgICAgICAgICAgICAgICAgICAgcGF0dGVybiArPSAnLyc7XHJcbiAgICAgICAgICAgICAgICBwYXR0ZXJuICs9IHRva2VuLnZhbHVlLnJlcGxhY2UoUkVHRVhfQ0hBUlNfUkUsICdcXFxcJCYnKTtcclxuICAgICAgICAgICAgICAgIHN1YlNlZ21lbnRTY29yZSArPSA0MCAvKiBTdGF0aWMgKi87XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAodG9rZW4udHlwZSA9PT0gMSAvKiBQYXJhbSAqLykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgeyB2YWx1ZSwgcmVwZWF0YWJsZSwgb3B0aW9uYWwsIHJlZ2V4cCB9ID0gdG9rZW47XHJcbiAgICAgICAgICAgICAgICBrZXlzLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IHZhbHVlLFxyXG4gICAgICAgICAgICAgICAgICAgIHJlcGVhdGFibGUsXHJcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9uYWwsXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHJlID0gcmVnZXhwID8gcmVnZXhwIDogQkFTRV9QQVJBTV9QQVRURVJOO1xyXG4gICAgICAgICAgICAgICAgLy8gdGhlIHVzZXIgcHJvdmlkZWQgYSBjdXN0b20gcmVnZXhwIC86aWQoXFxcXGQrKVxyXG4gICAgICAgICAgICAgICAgaWYgKHJlICE9PSBCQVNFX1BBUkFNX1BBVFRFUk4pIHtcclxuICAgICAgICAgICAgICAgICAgICBzdWJTZWdtZW50U2NvcmUgKz0gMTAgLyogQm9udXNDdXN0b21SZWdFeHAgKi87XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gbWFrZSBzdXJlIHRoZSByZWdleHAgaXMgdmFsaWQgYmVmb3JlIHVzaW5nIGl0XHJcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3IFJlZ0V4cChgKCR7cmV9KWApO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZXJyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBjdXN0b20gUmVnRXhwIGZvciBwYXJhbSBcIiR7dmFsdWV9XCIgKCR7cmV9KTogYCArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnIubWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gd2hlbiB3ZSByZXBlYXQgd2UgbXVzdCB0YWtlIGNhcmUgb2YgdGhlIHJlcGVhdGluZyBsZWFkaW5nIHNsYXNoXHJcbiAgICAgICAgICAgICAgICBsZXQgc3ViUGF0dGVybiA9IHJlcGVhdGFibGUgPyBgKCg/OiR7cmV9KSg/Oi8oPzoke3JlfSkpKilgIDogYCgke3JlfSlgO1xyXG4gICAgICAgICAgICAgICAgLy8gcHJlcGVuZCB0aGUgc2xhc2ggaWYgd2UgYXJlIHN0YXJ0aW5nIGEgbmV3IHNlZ21lbnRcclxuICAgICAgICAgICAgICAgIGlmICghdG9rZW5JbmRleClcclxuICAgICAgICAgICAgICAgICAgICBzdWJQYXR0ZXJuID1cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gYXZvaWQgYW4gb3B0aW9uYWwgLyBpZiB0aGVyZSBhcmUgbW9yZSBzZWdtZW50cyBlLmcuIC86cD8tc3RhdGljXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIG9yIC86cD8tOnAyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbmFsICYmIHNlZ21lbnQubGVuZ3RoIDwgMlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBgKD86LyR7c3ViUGF0dGVybn0pYFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiAnLycgKyBzdWJQYXR0ZXJuO1xyXG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbmFsKVxyXG4gICAgICAgICAgICAgICAgICAgIHN1YlBhdHRlcm4gKz0gJz8nO1xyXG4gICAgICAgICAgICAgICAgcGF0dGVybiArPSBzdWJQYXR0ZXJuO1xyXG4gICAgICAgICAgICAgICAgc3ViU2VnbWVudFNjb3JlICs9IDIwIC8qIER5bmFtaWMgKi87XHJcbiAgICAgICAgICAgICAgICBpZiAob3B0aW9uYWwpXHJcbiAgICAgICAgICAgICAgICAgICAgc3ViU2VnbWVudFNjb3JlICs9IC04IC8qIEJvbnVzT3B0aW9uYWwgKi87XHJcbiAgICAgICAgICAgICAgICBpZiAocmVwZWF0YWJsZSlcclxuICAgICAgICAgICAgICAgICAgICBzdWJTZWdtZW50U2NvcmUgKz0gLTIwIC8qIEJvbnVzUmVwZWF0YWJsZSAqLztcclxuICAgICAgICAgICAgICAgIGlmIChyZSA9PT0gJy4qJylcclxuICAgICAgICAgICAgICAgICAgICBzdWJTZWdtZW50U2NvcmUgKz0gLTUwIC8qIEJvbnVzV2lsZGNhcmQgKi87XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgc2VnbWVudFNjb3Jlcy5wdXNoKHN1YlNlZ21lbnRTY29yZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGFuIGVtcHR5IGFycmF5IGxpa2UgL2hvbWUvIC0+IFtbe2hvbWV9XSwgW11dXHJcbiAgICAgICAgLy8gaWYgKCFzZWdtZW50Lmxlbmd0aCkgcGF0dGVybiArPSAnLydcclxuICAgICAgICBzY29yZS5wdXNoKHNlZ21lbnRTY29yZXMpO1xyXG4gICAgfVxyXG4gICAgLy8gb25seSBhcHBseSB0aGUgc3RyaWN0IGJvbnVzIHRvIHRoZSBsYXN0IHNjb3JlXHJcbiAgICBpZiAob3B0aW9ucy5zdHJpY3QgJiYgb3B0aW9ucy5lbmQpIHtcclxuICAgICAgICBjb25zdCBpID0gc2NvcmUubGVuZ3RoIC0gMTtcclxuICAgICAgICBzY29yZVtpXVtzY29yZVtpXS5sZW5ndGggLSAxXSArPSAwLjcwMDAwMDAwMDAwMDAwMDEgLyogQm9udXNTdHJpY3QgKi87XHJcbiAgICB9XHJcbiAgICAvLyBUT0RPOiBkZXYgb25seSB3YXJuIGRvdWJsZSB0cmFpbGluZyBzbGFzaFxyXG4gICAgaWYgKCFvcHRpb25zLnN0cmljdClcclxuICAgICAgICBwYXR0ZXJuICs9ICcvPyc7XHJcbiAgICBpZiAob3B0aW9ucy5lbmQpXHJcbiAgICAgICAgcGF0dGVybiArPSAnJCc7XHJcbiAgICAvLyBhbGxvdyBwYXRocyBsaWtlIC9keW5hbWljIHRvIG9ubHkgbWF0Y2ggZHluYW1pYyBvciBkeW5hbWljLy4uLiBidXQgbm90IGR5bmFtaWNfc29tZXRoaW5nX2Vsc2VcclxuICAgIGVsc2UgaWYgKG9wdGlvbnMuc3RyaWN0KVxyXG4gICAgICAgIHBhdHRlcm4gKz0gJyg/Oi98JCknO1xyXG4gICAgY29uc3QgcmUgPSBuZXcgUmVnRXhwKHBhdHRlcm4sIG9wdGlvbnMuc2Vuc2l0aXZlID8gJycgOiAnaScpO1xyXG4gICAgZnVuY3Rpb24gcGFyc2UocGF0aCkge1xyXG4gICAgICAgIGNvbnN0IG1hdGNoID0gcGF0aC5tYXRjaChyZSk7XHJcbiAgICAgICAgY29uc3QgcGFyYW1zID0ge307XHJcbiAgICAgICAgaWYgKCFtYXRjaClcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCBtYXRjaC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBjb25zdCB2YWx1ZSA9IG1hdGNoW2ldIHx8ICcnO1xyXG4gICAgICAgICAgICBjb25zdCBrZXkgPSBrZXlzW2kgLSAxXTtcclxuICAgICAgICAgICAgcGFyYW1zW2tleS5uYW1lXSA9IHZhbHVlICYmIGtleS5yZXBlYXRhYmxlID8gdmFsdWUuc3BsaXQoJy8nKSA6IHZhbHVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcGFyYW1zO1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gc3RyaW5naWZ5KHBhcmFtcykge1xyXG4gICAgICAgIGxldCBwYXRoID0gJyc7XHJcbiAgICAgICAgLy8gZm9yIG9wdGlvbmFsIHBhcmFtZXRlcnMgdG8gYWxsb3cgdG8gYmUgZW1wdHlcclxuICAgICAgICBsZXQgYXZvaWREdXBsaWNhdGVkU2xhc2ggPSBmYWxzZTtcclxuICAgICAgICBmb3IgKGNvbnN0IHNlZ21lbnQgb2Ygc2VnbWVudHMpIHtcclxuICAgICAgICAgICAgaWYgKCFhdm9pZER1cGxpY2F0ZWRTbGFzaCB8fCAhcGF0aC5lbmRzV2l0aCgnLycpKVxyXG4gICAgICAgICAgICAgICAgcGF0aCArPSAnLyc7XHJcbiAgICAgICAgICAgIGF2b2lkRHVwbGljYXRlZFNsYXNoID0gZmFsc2U7XHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgdG9rZW4gb2Ygc2VnbWVudCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRva2VuLnR5cGUgPT09IDAgLyogU3RhdGljICovKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcGF0aCArPSB0b2tlbi52YWx1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHRva2VuLnR5cGUgPT09IDEgLyogUGFyYW0gKi8pIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB7IHZhbHVlLCByZXBlYXRhYmxlLCBvcHRpb25hbCB9ID0gdG9rZW47XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcGFyYW0gPSB2YWx1ZSBpbiBwYXJhbXMgPyBwYXJhbXNbdmFsdWVdIDogJyc7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkocGFyYW0pICYmICFyZXBlYXRhYmxlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFByb3ZpZGVkIHBhcmFtIFwiJHt2YWx1ZX1cIiBpcyBhbiBhcnJheSBidXQgaXQgaXMgbm90IHJlcGVhdGFibGUgKCogb3IgKyBtb2RpZmllcnMpYCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdGV4dCA9IEFycmF5LmlzQXJyYXkocGFyYW0pID8gcGFyYW0uam9pbignLycpIDogcGFyYW07XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0ZXh0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb25hbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgd2UgaGF2ZSBtb3JlIHRoYW4gb25lIG9wdGlvbmFsIHBhcmFtIGxpa2UgLzphPy1zdGF0aWMgd2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRvbid0IG5lZWQgdG8gY2FyZSBhYm91dCB0aGUgb3B0aW9uYWwgcGFyYW1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzZWdtZW50Lmxlbmd0aCA8IDIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByZW1vdmUgdGhlIGxhc3Qgc2xhc2ggYXMgd2UgY291bGQgYmUgYXQgdGhlIGVuZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwYXRoLmVuZHNXaXRoKCcvJykpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhdGggPSBwYXRoLnNsaWNlKDAsIC0xKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBkbyBub3QgYXBwZW5kIGEgc2xhc2ggb24gdGhlIG5leHQgaXRlcmF0aW9uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdm9pZER1cGxpY2F0ZWRTbGFzaCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBNaXNzaW5nIHJlcXVpcmVkIHBhcmFtIFwiJHt2YWx1ZX1cImApO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBwYXRoICs9IHRleHQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHBhdGg7XHJcbiAgICB9XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIHJlLFxyXG4gICAgICAgIHNjb3JlLFxyXG4gICAgICAgIGtleXMsXHJcbiAgICAgICAgcGFyc2UsXHJcbiAgICAgICAgc3RyaW5naWZ5LFxyXG4gICAgfTtcclxufVxyXG4vKipcclxuICogQ29tcGFyZXMgYW4gYXJyYXkgb2YgbnVtYmVycyBhcyB1c2VkIGluIFBhdGhQYXJzZXIuc2NvcmUgYW5kIHJldHVybnMgYVxyXG4gKiBudW1iZXIuIFRoaXMgZnVuY3Rpb24gY2FuIGJlIHVzZWQgdG8gYHNvcnRgIGFuIGFycmF5XHJcbiAqXHJcbiAqIEBwYXJhbSBhIC0gZmlyc3QgYXJyYXkgb2YgbnVtYmVyc1xyXG4gKiBAcGFyYW0gYiAtIHNlY29uZCBhcnJheSBvZiBudW1iZXJzXHJcbiAqIEByZXR1cm5zIDAgaWYgYm90aCBhcmUgZXF1YWwsIDwgMCBpZiBhIHNob3VsZCBiZSBzb3J0ZWQgZmlyc3QsID4gMCBpZiBiXHJcbiAqIHNob3VsZCBiZSBzb3J0ZWQgZmlyc3RcclxuICovXHJcbmZ1bmN0aW9uIGNvbXBhcmVTY29yZUFycmF5KGEsIGIpIHtcclxuICAgIGxldCBpID0gMDtcclxuICAgIHdoaWxlIChpIDwgYS5sZW5ndGggJiYgaSA8IGIubGVuZ3RoKSB7XHJcbiAgICAgICAgY29uc3QgZGlmZiA9IGJbaV0gLSBhW2ldO1xyXG4gICAgICAgIC8vIG9ubHkga2VlcCBnb2luZyBpZiBkaWZmID09PSAwXHJcbiAgICAgICAgaWYgKGRpZmYpXHJcbiAgICAgICAgICAgIHJldHVybiBkaWZmO1xyXG4gICAgICAgIGkrKztcclxuICAgIH1cclxuICAgIC8vIGlmIHRoZSBsYXN0IHN1YnNlZ21lbnQgd2FzIFN0YXRpYywgdGhlIHNob3J0ZXIgc2VnbWVudHMgc2hvdWxkIGJlIHNvcnRlZCBmaXJzdFxyXG4gICAgLy8gb3RoZXJ3aXNlIHNvcnQgdGhlIGxvbmdlc3Qgc2VnbWVudCBmaXJzdFxyXG4gICAgaWYgKGEubGVuZ3RoIDwgYi5sZW5ndGgpIHtcclxuICAgICAgICByZXR1cm4gYS5sZW5ndGggPT09IDEgJiYgYVswXSA9PT0gNDAgLyogU3RhdGljICovICsgNDAgLyogU2VnbWVudCAqL1xyXG4gICAgICAgICAgICA/IC0xXHJcbiAgICAgICAgICAgIDogMTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKGEubGVuZ3RoID4gYi5sZW5ndGgpIHtcclxuICAgICAgICByZXR1cm4gYi5sZW5ndGggPT09IDEgJiYgYlswXSA9PT0gNDAgLyogU3RhdGljICovICsgNDAgLyogU2VnbWVudCAqL1xyXG4gICAgICAgICAgICA/IDFcclxuICAgICAgICAgICAgOiAtMTtcclxuICAgIH1cclxuICAgIHJldHVybiAwO1xyXG59XHJcbi8qKlxyXG4gKiBDb21wYXJlIGZ1bmN0aW9uIHRoYXQgY2FuIGJlIHVzZWQgd2l0aCBgc29ydGAgdG8gc29ydCBhbiBhcnJheSBvZiBQYXRoUGFyc2VyXHJcbiAqXHJcbiAqIEBwYXJhbSBhIC0gZmlyc3QgUGF0aFBhcnNlclxyXG4gKiBAcGFyYW0gYiAtIHNlY29uZCBQYXRoUGFyc2VyXHJcbiAqIEByZXR1cm5zIDAgaWYgYm90aCBhcmUgZXF1YWwsIDwgMCBpZiBhIHNob3VsZCBiZSBzb3J0ZWQgZmlyc3QsID4gMCBpZiBiXHJcbiAqL1xyXG5mdW5jdGlvbiBjb21wYXJlUGF0aFBhcnNlclNjb3JlKGEsIGIpIHtcclxuICAgIGxldCBpID0gMDtcclxuICAgIGNvbnN0IGFTY29yZSA9IGEuc2NvcmU7XHJcbiAgICBjb25zdCBiU2NvcmUgPSBiLnNjb3JlO1xyXG4gICAgd2hpbGUgKGkgPCBhU2NvcmUubGVuZ3RoICYmIGkgPCBiU2NvcmUubGVuZ3RoKSB7XHJcbiAgICAgICAgY29uc3QgY29tcCA9IGNvbXBhcmVTY29yZUFycmF5KGFTY29yZVtpXSwgYlNjb3JlW2ldKTtcclxuICAgICAgICAvLyBkbyBub3QgcmV0dXJuIGlmIGJvdGggYXJlIGVxdWFsXHJcbiAgICAgICAgaWYgKGNvbXApXHJcbiAgICAgICAgICAgIHJldHVybiBjb21wO1xyXG4gICAgICAgIGkrKztcclxuICAgIH1cclxuICAgIC8vIGlmIGEgYW5kIGIgc2hhcmUgdGhlIHNhbWUgc2NvcmUgZW50cmllcyBidXQgYiBoYXMgbW9yZSwgc29ydCBiIGZpcnN0XHJcbiAgICByZXR1cm4gYlNjb3JlLmxlbmd0aCAtIGFTY29yZS5sZW5ndGg7XHJcbiAgICAvLyB0aGlzIGlzIHRoZSB0ZXJuYXJ5IHZlcnNpb25cclxuICAgIC8vIHJldHVybiBhU2NvcmUubGVuZ3RoIDwgYlNjb3JlLmxlbmd0aFxyXG4gICAgLy8gICA/IDFcclxuICAgIC8vICAgOiBhU2NvcmUubGVuZ3RoID4gYlNjb3JlLmxlbmd0aFxyXG4gICAgLy8gICA/IC0xXHJcbiAgICAvLyAgIDogMFxyXG59XG5cbmNvbnN0IFJPT1RfVE9LRU4gPSB7XHJcbiAgICB0eXBlOiAwIC8qIFN0YXRpYyAqLyxcclxuICAgIHZhbHVlOiAnJyxcclxufTtcclxuY29uc3QgVkFMSURfUEFSQU1fUkUgPSAvW2EtekEtWjAtOV9dLztcclxuLy8gQWZ0ZXIgc29tZSBwcm9maWxpbmcsIHRoZSBjYWNoZSBzZWVtcyB0byBiZSB1bm5lY2Vzc2FyeSBiZWNhdXNlIHRva2VuaXplUGF0aFxyXG4vLyAodGhlIHNsb3dlc3QgcGFydCBvZiBhZGRpbmcgYSByb3V0ZSkgaXMgdmVyeSBmYXN0XHJcbi8vIGNvbnN0IHRva2VuQ2FjaGUgPSBuZXcgTWFwPHN0cmluZywgVG9rZW5bXVtdPigpXHJcbmZ1bmN0aW9uIHRva2VuaXplUGF0aChwYXRoKSB7XHJcbiAgICBpZiAoIXBhdGgpXHJcbiAgICAgICAgcmV0dXJuIFtbXV07XHJcbiAgICBpZiAocGF0aCA9PT0gJy8nKVxyXG4gICAgICAgIHJldHVybiBbW1JPT1RfVE9LRU5dXTtcclxuICAgIGlmICghcGF0aC5zdGFydHNXaXRoKCcvJykpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpXHJcbiAgICAgICAgICAgID8gYFJvdXRlIHBhdGhzIHNob3VsZCBzdGFydCB3aXRoIGEgXCIvXCI6IFwiJHtwYXRofVwiIHNob3VsZCBiZSBcIi8ke3BhdGh9XCIuYFxyXG4gICAgICAgICAgICA6IGBJbnZhbGlkIHBhdGggXCIke3BhdGh9XCJgKTtcclxuICAgIH1cclxuICAgIC8vIGlmICh0b2tlbkNhY2hlLmhhcyhwYXRoKSkgcmV0dXJuIHRva2VuQ2FjaGUuZ2V0KHBhdGgpIVxyXG4gICAgZnVuY3Rpb24gY3Jhc2gobWVzc2FnZSkge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgRVJSICgke3N0YXRlfSkvXCIke2J1ZmZlcn1cIjogJHttZXNzYWdlfWApO1xyXG4gICAgfVxyXG4gICAgbGV0IHN0YXRlID0gMCAvKiBTdGF0aWMgKi87XHJcbiAgICBsZXQgcHJldmlvdXNTdGF0ZSA9IHN0YXRlO1xyXG4gICAgY29uc3QgdG9rZW5zID0gW107XHJcbiAgICAvLyB0aGUgc2VnbWVudCB3aWxsIGFsd2F5cyBiZSB2YWxpZCBiZWNhdXNlIHdlIGdldCBpbnRvIHRoZSBpbml0aWFsIHN0YXRlXHJcbiAgICAvLyB3aXRoIHRoZSBsZWFkaW5nIC9cclxuICAgIGxldCBzZWdtZW50O1xyXG4gICAgZnVuY3Rpb24gZmluYWxpemVTZWdtZW50KCkge1xyXG4gICAgICAgIGlmIChzZWdtZW50KVxyXG4gICAgICAgICAgICB0b2tlbnMucHVzaChzZWdtZW50KTtcclxuICAgICAgICBzZWdtZW50ID0gW107XHJcbiAgICB9XHJcbiAgICAvLyBpbmRleCBvbiB0aGUgcGF0aFxyXG4gICAgbGV0IGkgPSAwO1xyXG4gICAgLy8gY2hhciBhdCBpbmRleFxyXG4gICAgbGV0IGNoYXI7XHJcbiAgICAvLyBidWZmZXIgb2YgdGhlIHZhbHVlIHJlYWRcclxuICAgIGxldCBidWZmZXIgPSAnJztcclxuICAgIC8vIGN1c3RvbSByZWdleHAgZm9yIGEgcGFyYW1cclxuICAgIGxldCBjdXN0b21SZSA9ICcnO1xyXG4gICAgZnVuY3Rpb24gY29uc3VtZUJ1ZmZlcigpIHtcclxuICAgICAgICBpZiAoIWJ1ZmZlcilcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIGlmIChzdGF0ZSA9PT0gMCAvKiBTdGF0aWMgKi8pIHtcclxuICAgICAgICAgICAgc2VnbWVudC5wdXNoKHtcclxuICAgICAgICAgICAgICAgIHR5cGU6IDAgLyogU3RhdGljICovLFxyXG4gICAgICAgICAgICAgICAgdmFsdWU6IGJ1ZmZlcixcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHN0YXRlID09PSAxIC8qIFBhcmFtICovIHx8XHJcbiAgICAgICAgICAgIHN0YXRlID09PSAyIC8qIFBhcmFtUmVnRXhwICovIHx8XHJcbiAgICAgICAgICAgIHN0YXRlID09PSAzIC8qIFBhcmFtUmVnRXhwRW5kICovKSB7XHJcbiAgICAgICAgICAgIGlmIChzZWdtZW50Lmxlbmd0aCA+IDEgJiYgKGNoYXIgPT09ICcqJyB8fCBjaGFyID09PSAnKycpKVxyXG4gICAgICAgICAgICAgICAgY3Jhc2goYEEgcmVwZWF0YWJsZSBwYXJhbSAoJHtidWZmZXJ9KSBtdXN0IGJlIGFsb25lIGluIGl0cyBzZWdtZW50LiBlZzogJy86aWRzKy5gKTtcclxuICAgICAgICAgICAgc2VnbWVudC5wdXNoKHtcclxuICAgICAgICAgICAgICAgIHR5cGU6IDEgLyogUGFyYW0gKi8sXHJcbiAgICAgICAgICAgICAgICB2YWx1ZTogYnVmZmVyLFxyXG4gICAgICAgICAgICAgICAgcmVnZXhwOiBjdXN0b21SZSxcclxuICAgICAgICAgICAgICAgIHJlcGVhdGFibGU6IGNoYXIgPT09ICcqJyB8fCBjaGFyID09PSAnKycsXHJcbiAgICAgICAgICAgICAgICBvcHRpb25hbDogY2hhciA9PT0gJyonIHx8IGNoYXIgPT09ICc/JyxcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBjcmFzaCgnSW52YWxpZCBzdGF0ZSB0byBjb25zdW1lIGJ1ZmZlcicpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBidWZmZXIgPSAnJztcclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIGFkZENoYXJUb0J1ZmZlcigpIHtcclxuICAgICAgICBidWZmZXIgKz0gY2hhcjtcclxuICAgIH1cclxuICAgIHdoaWxlIChpIDwgcGF0aC5sZW5ndGgpIHtcclxuICAgICAgICBjaGFyID0gcGF0aFtpKytdO1xyXG4gICAgICAgIGlmIChjaGFyID09PSAnXFxcXCcgJiYgc3RhdGUgIT09IDIgLyogUGFyYW1SZWdFeHAgKi8pIHtcclxuICAgICAgICAgICAgcHJldmlvdXNTdGF0ZSA9IHN0YXRlO1xyXG4gICAgICAgICAgICBzdGF0ZSA9IDQgLyogRXNjYXBlTmV4dCAqLztcclxuICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHN3aXRjaCAoc3RhdGUpIHtcclxuICAgICAgICAgICAgY2FzZSAwIC8qIFN0YXRpYyAqLzpcclxuICAgICAgICAgICAgICAgIGlmIChjaGFyID09PSAnLycpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoYnVmZmVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN1bWVCdWZmZXIoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZmluYWxpemVTZWdtZW50KCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChjaGFyID09PSAnOicpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdW1lQnVmZmVyKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgc3RhdGUgPSAxIC8qIFBhcmFtICovO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYWRkQ2hhclRvQnVmZmVyKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSA0IC8qIEVzY2FwZU5leHQgKi86XHJcbiAgICAgICAgICAgICAgICBhZGRDaGFyVG9CdWZmZXIoKTtcclxuICAgICAgICAgICAgICAgIHN0YXRlID0gcHJldmlvdXNTdGF0ZTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIDEgLyogUGFyYW0gKi86XHJcbiAgICAgICAgICAgICAgICBpZiAoY2hhciA9PT0gJygnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3RhdGUgPSAyIC8qIFBhcmFtUmVnRXhwICovO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoVkFMSURfUEFSQU1fUkUudGVzdChjaGFyKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGFkZENoYXJUb0J1ZmZlcigpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3VtZUJ1ZmZlcigpO1xyXG4gICAgICAgICAgICAgICAgICAgIHN0YXRlID0gMCAvKiBTdGF0aWMgKi87XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gZ28gYmFjayBvbmUgY2hhcmFjdGVyIGlmIHdlIHdlcmUgbm90IG1vZGlmeWluZ1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjaGFyICE9PSAnKicgJiYgY2hhciAhPT0gJz8nICYmIGNoYXIgIT09ICcrJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgaS0tO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgMiAvKiBQYXJhbVJlZ0V4cCAqLzpcclxuICAgICAgICAgICAgICAgIC8vIFRPRE86IGlzIGl0IHdvcnRoIGhhbmRsaW5nIG5lc3RlZCByZWdleHA/IGxpa2UgOnAoPzpwcmVmaXhfKFteL10rKV9zdWZmaXgpXHJcbiAgICAgICAgICAgICAgICAvLyBpdCBhbHJlYWR5IHdvcmtzIGJ5IGVzY2FwaW5nIHRoZSBjbG9zaW5nIClcclxuICAgICAgICAgICAgICAgIC8vIGh0dHBzOi8vcGF0aHMuZXNtLmRldi8/cD1BQU1lSmJpQXdRRWNES2JBb0FBa1A2MFBHMlI2UUF2Z05hQTZBRkFDTTJBQnVRQkIjXHJcbiAgICAgICAgICAgICAgICAvLyBpcyB0aGlzIHJlYWxseSBzb21ldGhpbmcgcGVvcGxlIG5lZWQgc2luY2UgeW91IGNhbiBhbHNvIHdyaXRlXHJcbiAgICAgICAgICAgICAgICAvLyAvcHJlZml4XzpwKClfc3VmZml4XHJcbiAgICAgICAgICAgICAgICBpZiAoY2hhciA9PT0gJyknKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gaGFuZGxlIHRoZSBlc2NhcGVkIClcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY3VzdG9tUmVbY3VzdG9tUmUubGVuZ3RoIC0gMV0gPT0gJ1xcXFwnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXN0b21SZSA9IGN1c3RvbVJlLnNsaWNlKDAsIC0xKSArIGNoYXI7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZSA9IDMgLyogUGFyYW1SZWdFeHBFbmQgKi87XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBjdXN0b21SZSArPSBjaGFyO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgMyAvKiBQYXJhbVJlZ0V4cEVuZCAqLzpcclxuICAgICAgICAgICAgICAgIC8vIHNhbWUgYXMgZmluYWxpemluZyBhIHBhcmFtXHJcbiAgICAgICAgICAgICAgICBjb25zdW1lQnVmZmVyKCk7XHJcbiAgICAgICAgICAgICAgICBzdGF0ZSA9IDAgLyogU3RhdGljICovO1xyXG4gICAgICAgICAgICAgICAgLy8gZ28gYmFjayBvbmUgY2hhcmFjdGVyIGlmIHdlIHdlcmUgbm90IG1vZGlmeWluZ1xyXG4gICAgICAgICAgICAgICAgaWYgKGNoYXIgIT09ICcqJyAmJiBjaGFyICE9PSAnPycgJiYgY2hhciAhPT0gJysnKVxyXG4gICAgICAgICAgICAgICAgICAgIGktLTtcclxuICAgICAgICAgICAgICAgIGN1c3RvbVJlID0gJyc7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIGNyYXNoKCdVbmtub3duIHN0YXRlJyk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAoc3RhdGUgPT09IDIgLyogUGFyYW1SZWdFeHAgKi8pXHJcbiAgICAgICAgY3Jhc2goYFVuZmluaXNoZWQgY3VzdG9tIFJlZ0V4cCBmb3IgcGFyYW0gXCIke2J1ZmZlcn1cImApO1xyXG4gICAgY29uc3VtZUJ1ZmZlcigpO1xyXG4gICAgZmluYWxpemVTZWdtZW50KCk7XHJcbiAgICAvLyB0b2tlbkNhY2hlLnNldChwYXRoLCB0b2tlbnMpXHJcbiAgICByZXR1cm4gdG9rZW5zO1xyXG59XG5cbmZ1bmN0aW9uIGNyZWF0ZVJvdXRlUmVjb3JkTWF0Y2hlcihyZWNvcmQsIHBhcmVudCwgb3B0aW9ucykge1xyXG4gICAgY29uc3QgcGFyc2VyID0gdG9rZW5zVG9QYXJzZXIodG9rZW5pemVQYXRoKHJlY29yZC5wYXRoKSwgb3B0aW9ucyk7XHJcbiAgICAvLyB3YXJuIGFnYWluc3QgcGFyYW1zIHdpdGggdGhlIHNhbWUgbmFtZVxyXG4gICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xyXG4gICAgICAgIGNvbnN0IGV4aXN0aW5nS2V5cyA9IG5ldyBTZXQoKTtcclxuICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiBwYXJzZXIua2V5cykge1xyXG4gICAgICAgICAgICBpZiAoZXhpc3RpbmdLZXlzLmhhcyhrZXkubmFtZSkpXHJcbiAgICAgICAgICAgICAgICB3YXJuKGBGb3VuZCBkdXBsaWNhdGVkIHBhcmFtcyB3aXRoIG5hbWUgXCIke2tleS5uYW1lfVwiIGZvciBwYXRoIFwiJHtyZWNvcmQucGF0aH1cIi4gT25seSB0aGUgbGFzdCBvbmUgd2lsbCBiZSBhdmFpbGFibGUgb24gXCIkcm91dGUucGFyYW1zXCIuYCk7XHJcbiAgICAgICAgICAgIGV4aXN0aW5nS2V5cy5hZGQoa2V5Lm5hbWUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGNvbnN0IG1hdGNoZXIgPSBhc3NpZ24ocGFyc2VyLCB7XHJcbiAgICAgICAgcmVjb3JkLFxyXG4gICAgICAgIHBhcmVudCxcclxuICAgICAgICAvLyB0aGVzZSBuZWVkcyB0byBiZSBwb3B1bGF0ZWQgYnkgdGhlIHBhcmVudFxyXG4gICAgICAgIGNoaWxkcmVuOiBbXSxcclxuICAgICAgICBhbGlhczogW10sXHJcbiAgICB9KTtcclxuICAgIGlmIChwYXJlbnQpIHtcclxuICAgICAgICAvLyBib3RoIGFyZSBhbGlhc2VzIG9yIGJvdGggYXJlIG5vdCBhbGlhc2VzXHJcbiAgICAgICAgLy8gd2UgZG9uJ3Qgd2FudCB0byBtaXggdGhlbSBiZWNhdXNlIHRoZSBvcmRlciBpcyB1c2VkIHdoZW5cclxuICAgICAgICAvLyBwYXNzaW5nIG9yaWdpbmFsUmVjb3JkIGluIE1hdGNoZXIuYWRkUm91dGVcclxuICAgICAgICBpZiAoIW1hdGNoZXIucmVjb3JkLmFsaWFzT2YgPT09ICFwYXJlbnQucmVjb3JkLmFsaWFzT2YpXHJcbiAgICAgICAgICAgIHBhcmVudC5jaGlsZHJlbi5wdXNoKG1hdGNoZXIpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG1hdGNoZXI7XHJcbn1cblxuLyoqXHJcbiAqIENyZWF0ZXMgYSBSb3V0ZXIgTWF0Y2hlci5cclxuICpcclxuICogQGludGVybmFsXHJcbiAqIEBwYXJhbSByb3V0ZXMgLSBhcnJheSBvZiBpbml0aWFsIHJvdXRlc1xyXG4gKiBAcGFyYW0gZ2xvYmFsT3B0aW9ucyAtIGdsb2JhbCByb3V0ZSBvcHRpb25zXHJcbiAqL1xyXG5mdW5jdGlvbiBjcmVhdGVSb3V0ZXJNYXRjaGVyKHJvdXRlcywgZ2xvYmFsT3B0aW9ucykge1xyXG4gICAgLy8gbm9ybWFsaXplZCBvcmRlcmVkIGFycmF5IG9mIG1hdGNoZXJzXHJcbiAgICBjb25zdCBtYXRjaGVycyA9IFtdO1xyXG4gICAgY29uc3QgbWF0Y2hlck1hcCA9IG5ldyBNYXAoKTtcclxuICAgIGdsb2JhbE9wdGlvbnMgPSBtZXJnZU9wdGlvbnMoeyBzdHJpY3Q6IGZhbHNlLCBlbmQ6IHRydWUsIHNlbnNpdGl2ZTogZmFsc2UgfSwgZ2xvYmFsT3B0aW9ucyk7XHJcbiAgICBmdW5jdGlvbiBnZXRSZWNvcmRNYXRjaGVyKG5hbWUpIHtcclxuICAgICAgICByZXR1cm4gbWF0Y2hlck1hcC5nZXQobmFtZSk7XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiBhZGRSb3V0ZShyZWNvcmQsIHBhcmVudCwgb3JpZ2luYWxSZWNvcmQpIHtcclxuICAgICAgICAvLyB1c2VkIGxhdGVyIG9uIHRvIHJlbW92ZSBieSBuYW1lXHJcbiAgICAgICAgY29uc3QgaXNSb290QWRkID0gIW9yaWdpbmFsUmVjb3JkO1xyXG4gICAgICAgIGNvbnN0IG1haW5Ob3JtYWxpemVkUmVjb3JkID0gbm9ybWFsaXplUm91dGVSZWNvcmQocmVjb3JkKTtcclxuICAgICAgICAvLyB3ZSBtaWdodCBiZSB0aGUgY2hpbGQgb2YgYW4gYWxpYXNcclxuICAgICAgICBtYWluTm9ybWFsaXplZFJlY29yZC5hbGlhc09mID0gb3JpZ2luYWxSZWNvcmQgJiYgb3JpZ2luYWxSZWNvcmQucmVjb3JkO1xyXG4gICAgICAgIGNvbnN0IG9wdGlvbnMgPSBtZXJnZU9wdGlvbnMoZ2xvYmFsT3B0aW9ucywgcmVjb3JkKTtcclxuICAgICAgICAvLyBnZW5lcmF0ZSBhbiBhcnJheSBvZiByZWNvcmRzIHRvIGNvcnJlY3RseSBoYW5kbGUgYWxpYXNlc1xyXG4gICAgICAgIGNvbnN0IG5vcm1hbGl6ZWRSZWNvcmRzID0gW1xyXG4gICAgICAgICAgICBtYWluTm9ybWFsaXplZFJlY29yZCxcclxuICAgICAgICBdO1xyXG4gICAgICAgIGlmICgnYWxpYXMnIGluIHJlY29yZCkge1xyXG4gICAgICAgICAgICBjb25zdCBhbGlhc2VzID0gdHlwZW9mIHJlY29yZC5hbGlhcyA9PT0gJ3N0cmluZycgPyBbcmVjb3JkLmFsaWFzXSA6IHJlY29yZC5hbGlhcztcclxuICAgICAgICAgICAgZm9yIChjb25zdCBhbGlhcyBvZiBhbGlhc2VzKSB7XHJcbiAgICAgICAgICAgICAgICBub3JtYWxpemVkUmVjb3Jkcy5wdXNoKGFzc2lnbih7fSwgbWFpbk5vcm1hbGl6ZWRSZWNvcmQsIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyB0aGlzIGFsbG93cyB1cyB0byBob2xkIGEgY29weSBvZiB0aGUgYGNvbXBvbmVudHNgIG9wdGlvblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIHNvIHRoYXQgYXN5bmMgY29tcG9uZW50cyBjYWNoZSBpcyBob2xkIG9uIHRoZSBvcmlnaW5hbCByZWNvcmRcclxuICAgICAgICAgICAgICAgICAgICBjb21wb25lbnRzOiBvcmlnaW5hbFJlY29yZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICA/IG9yaWdpbmFsUmVjb3JkLnJlY29yZC5jb21wb25lbnRzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDogbWFpbk5vcm1hbGl6ZWRSZWNvcmQuY29tcG9uZW50cyxcclxuICAgICAgICAgICAgICAgICAgICBwYXRoOiBhbGlhcyxcclxuICAgICAgICAgICAgICAgICAgICAvLyB3ZSBtaWdodCBiZSB0aGUgY2hpbGQgb2YgYW4gYWxpYXNcclxuICAgICAgICAgICAgICAgICAgICBhbGlhc09mOiBvcmlnaW5hbFJlY29yZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICA/IG9yaWdpbmFsUmVjb3JkLnJlY29yZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICA6IG1haW5Ob3JtYWxpemVkUmVjb3JkLFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIHRoZSBhbGlhc2VzIGFyZSBhbHdheXMgb2YgdGhlIHNhbWUga2luZCBhcyB0aGUgb3JpZ2luYWwgc2luY2UgdGhleVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGFyZSBkZWZpbmVkIG9uIHRoZSBzYW1lIHJlY29yZFxyXG4gICAgICAgICAgICAgICAgfSkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCBtYXRjaGVyO1xyXG4gICAgICAgIGxldCBvcmlnaW5hbE1hdGNoZXI7XHJcbiAgICAgICAgZm9yIChjb25zdCBub3JtYWxpemVkUmVjb3JkIG9mIG5vcm1hbGl6ZWRSZWNvcmRzKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHsgcGF0aCB9ID0gbm9ybWFsaXplZFJlY29yZDtcclxuICAgICAgICAgICAgLy8gQnVpbGQgdXAgdGhlIHBhdGggZm9yIG5lc3RlZCByb3V0ZXMgaWYgdGhlIGNoaWxkIGlzbid0IGFuIGFic29sdXRlXHJcbiAgICAgICAgICAgIC8vIHJvdXRlLiBPbmx5IGFkZCB0aGUgLyBkZWxpbWl0ZXIgaWYgdGhlIGNoaWxkIHBhdGggaXNuJ3QgZW1wdHkgYW5kIGlmIHRoZVxyXG4gICAgICAgICAgICAvLyBwYXJlbnQgcGF0aCBkb2Vzbid0IGhhdmUgYSB0cmFpbGluZyBzbGFzaFxyXG4gICAgICAgICAgICBpZiAocGFyZW50ICYmIHBhdGhbMF0gIT09ICcvJykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcGFyZW50UGF0aCA9IHBhcmVudC5yZWNvcmQucGF0aDtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGNvbm5lY3RpbmdTbGFzaCA9IHBhcmVudFBhdGhbcGFyZW50UGF0aC5sZW5ndGggLSAxXSA9PT0gJy8nID8gJycgOiAnLyc7XHJcbiAgICAgICAgICAgICAgICBub3JtYWxpemVkUmVjb3JkLnBhdGggPVxyXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudC5yZWNvcmQucGF0aCArIChwYXRoICYmIGNvbm5lY3RpbmdTbGFzaCArIHBhdGgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgbm9ybWFsaXplZFJlY29yZC5wYXRoID09PSAnKicpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQ2F0Y2ggYWxsIHJvdXRlcyAoXCIqXCIpIG11c3Qgbm93IGJlIGRlZmluZWQgdXNpbmcgYSBwYXJhbSB3aXRoIGEgY3VzdG9tIHJlZ2V4cC5cXG4nICtcclxuICAgICAgICAgICAgICAgICAgICAnU2VlIG1vcmUgYXQgaHR0cHM6Ly9uZXh0LnJvdXRlci52dWVqcy5vcmcvZ3VpZGUvbWlncmF0aW9uLyNyZW1vdmVkLXN0YXItb3ItY2F0Y2gtYWxsLXJvdXRlcy4nKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBjcmVhdGUgdGhlIG9iamVjdCBiZWZvcmUgaGFuZCBzbyBpdCBjYW4gYmUgcGFzc2VkIHRvIGNoaWxkcmVuXHJcbiAgICAgICAgICAgIG1hdGNoZXIgPSBjcmVhdGVSb3V0ZVJlY29yZE1hdGNoZXIobm9ybWFsaXplZFJlY29yZCwgcGFyZW50LCBvcHRpb25zKTtcclxuICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiBwYXJlbnQgJiYgcGF0aFswXSA9PT0gJy8nKVxyXG4gICAgICAgICAgICAgICAgY2hlY2tNaXNzaW5nUGFyYW1zSW5BYnNvbHV0ZVBhdGgobWF0Y2hlciwgcGFyZW50KTtcclxuICAgICAgICAgICAgLy8gaWYgd2UgYXJlIGFuIGFsaWFzIHdlIG11c3QgdGVsbCB0aGUgb3JpZ2luYWwgcmVjb3JkIHRoYXQgd2UgZXhpc3RcclxuICAgICAgICAgICAgLy8gc28gd2UgY2FuIGJlIHJlbW92ZWRcclxuICAgICAgICAgICAgaWYgKG9yaWdpbmFsUmVjb3JkKSB7XHJcbiAgICAgICAgICAgICAgICBvcmlnaW5hbFJlY29yZC5hbGlhcy5wdXNoKG1hdGNoZXIpO1xyXG4gICAgICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNoZWNrU2FtZVBhcmFtcyhvcmlnaW5hbFJlY29yZCwgbWF0Y2hlcik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyBvdGhlcndpc2UsIHRoZSBmaXJzdCByZWNvcmQgaXMgdGhlIG9yaWdpbmFsIGFuZCBvdGhlcnMgYXJlIGFsaWFzZXNcclxuICAgICAgICAgICAgICAgIG9yaWdpbmFsTWF0Y2hlciA9IG9yaWdpbmFsTWF0Y2hlciB8fCBtYXRjaGVyO1xyXG4gICAgICAgICAgICAgICAgaWYgKG9yaWdpbmFsTWF0Y2hlciAhPT0gbWF0Y2hlcilcclxuICAgICAgICAgICAgICAgICAgICBvcmlnaW5hbE1hdGNoZXIuYWxpYXMucHVzaChtYXRjaGVyKTtcclxuICAgICAgICAgICAgICAgIC8vIHJlbW92ZSB0aGUgcm91dGUgaWYgbmFtZWQgYW5kIG9ubHkgZm9yIHRoZSB0b3AgcmVjb3JkIChhdm9pZCBpbiBuZXN0ZWQgY2FsbHMpXHJcbiAgICAgICAgICAgICAgICAvLyB0aGlzIHdvcmtzIGJlY2F1c2UgdGhlIG9yaWdpbmFsIHJlY29yZCBpcyB0aGUgZmlyc3Qgb25lXHJcbiAgICAgICAgICAgICAgICBpZiAoaXNSb290QWRkICYmIHJlY29yZC5uYW1lICYmICFpc0FsaWFzUmVjb3JkKG1hdGNoZXIpKVxyXG4gICAgICAgICAgICAgICAgICAgIHJlbW92ZVJvdXRlKHJlY29yZC5uYW1lKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoJ2NoaWxkcmVuJyBpbiBtYWluTm9ybWFsaXplZFJlY29yZCkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY2hpbGRyZW4gPSBtYWluTm9ybWFsaXplZFJlY29yZC5jaGlsZHJlbjtcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBhZGRSb3V0ZShjaGlsZHJlbltpXSwgbWF0Y2hlciwgb3JpZ2luYWxSZWNvcmQgJiYgb3JpZ2luYWxSZWNvcmQuY2hpbGRyZW5baV0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIGlmIHRoZXJlIHdhcyBubyBvcmlnaW5hbCByZWNvcmQsIHRoZW4gdGhlIGZpcnN0IG9uZSB3YXMgbm90IGFuIGFsaWFzIGFuZCBhbGxcclxuICAgICAgICAgICAgLy8gb3RoZXIgYWxpYXMgKGlmIGFueSkgbmVlZCB0byByZWZlcmVuY2UgdGhpcyByZWNvcmQgd2hlbiBhZGRpbmcgY2hpbGRyZW5cclxuICAgICAgICAgICAgb3JpZ2luYWxSZWNvcmQgPSBvcmlnaW5hbFJlY29yZCB8fCBtYXRjaGVyO1xyXG4gICAgICAgICAgICAvLyBUT0RPOiBhZGQgbm9ybWFsaXplZCByZWNvcmRzIGZvciBtb3JlIGZsZXhpYmlsaXR5XHJcbiAgICAgICAgICAgIC8vIGlmIChwYXJlbnQgJiYgaXNBbGlhc1JlY29yZChvcmlnaW5hbFJlY29yZCkpIHtcclxuICAgICAgICAgICAgLy8gICBwYXJlbnQuY2hpbGRyZW4ucHVzaChvcmlnaW5hbFJlY29yZClcclxuICAgICAgICAgICAgLy8gfVxyXG4gICAgICAgICAgICBpbnNlcnRNYXRjaGVyKG1hdGNoZXIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gb3JpZ2luYWxNYXRjaGVyXHJcbiAgICAgICAgICAgID8gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgLy8gc2luY2Ugb3RoZXIgbWF0Y2hlcnMgYXJlIGFsaWFzZXMsIHRoZXkgc2hvdWxkIGJlIHJlbW92ZWQgYnkgdGhlIG9yaWdpbmFsIG1hdGNoZXJcclxuICAgICAgICAgICAgICAgIHJlbW92ZVJvdXRlKG9yaWdpbmFsTWF0Y2hlcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgOiBub29wO1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gcmVtb3ZlUm91dGUobWF0Y2hlclJlZikge1xyXG4gICAgICAgIGlmIChpc1JvdXRlTmFtZShtYXRjaGVyUmVmKSkge1xyXG4gICAgICAgICAgICBjb25zdCBtYXRjaGVyID0gbWF0Y2hlck1hcC5nZXQobWF0Y2hlclJlZik7XHJcbiAgICAgICAgICAgIGlmIChtYXRjaGVyKSB7XHJcbiAgICAgICAgICAgICAgICBtYXRjaGVyTWFwLmRlbGV0ZShtYXRjaGVyUmVmKTtcclxuICAgICAgICAgICAgICAgIG1hdGNoZXJzLnNwbGljZShtYXRjaGVycy5pbmRleE9mKG1hdGNoZXIpLCAxKTtcclxuICAgICAgICAgICAgICAgIG1hdGNoZXIuY2hpbGRyZW4uZm9yRWFjaChyZW1vdmVSb3V0ZSk7XHJcbiAgICAgICAgICAgICAgICBtYXRjaGVyLmFsaWFzLmZvckVhY2gocmVtb3ZlUm91dGUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zdCBpbmRleCA9IG1hdGNoZXJzLmluZGV4T2YobWF0Y2hlclJlZik7XHJcbiAgICAgICAgICAgIGlmIChpbmRleCA+IC0xKSB7XHJcbiAgICAgICAgICAgICAgICBtYXRjaGVycy5zcGxpY2UoaW5kZXgsIDEpO1xyXG4gICAgICAgICAgICAgICAgaWYgKG1hdGNoZXJSZWYucmVjb3JkLm5hbWUpXHJcbiAgICAgICAgICAgICAgICAgICAgbWF0Y2hlck1hcC5kZWxldGUobWF0Y2hlclJlZi5yZWNvcmQubmFtZSk7XHJcbiAgICAgICAgICAgICAgICBtYXRjaGVyUmVmLmNoaWxkcmVuLmZvckVhY2gocmVtb3ZlUm91dGUpO1xyXG4gICAgICAgICAgICAgICAgbWF0Y2hlclJlZi5hbGlhcy5mb3JFYWNoKHJlbW92ZVJvdXRlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIGdldFJvdXRlcygpIHtcclxuICAgICAgICByZXR1cm4gbWF0Y2hlcnM7XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiBpbnNlcnRNYXRjaGVyKG1hdGNoZXIpIHtcclxuICAgICAgICBsZXQgaSA9IDA7XHJcbiAgICAgICAgd2hpbGUgKGkgPCBtYXRjaGVycy5sZW5ndGggJiZcclxuICAgICAgICAgICAgY29tcGFyZVBhdGhQYXJzZXJTY29yZShtYXRjaGVyLCBtYXRjaGVyc1tpXSkgPj0gMCAmJlxyXG4gICAgICAgICAgICAvLyBBZGRpbmcgY2hpbGRyZW4gd2l0aCBlbXB0eSBwYXRoIHNob3VsZCBzdGlsbCBhcHBlYXIgYmVmb3JlIHRoZSBwYXJlbnRcclxuICAgICAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL3Z1ZWpzL3JvdXRlci9pc3N1ZXMvMTEyNFxyXG4gICAgICAgICAgICAobWF0Y2hlci5yZWNvcmQucGF0aCAhPT0gbWF0Y2hlcnNbaV0ucmVjb3JkLnBhdGggfHxcclxuICAgICAgICAgICAgICAgICFpc1JlY29yZENoaWxkT2YobWF0Y2hlciwgbWF0Y2hlcnNbaV0pKSlcclxuICAgICAgICAgICAgaSsrO1xyXG4gICAgICAgIG1hdGNoZXJzLnNwbGljZShpLCAwLCBtYXRjaGVyKTtcclxuICAgICAgICAvLyBvbmx5IGFkZCB0aGUgb3JpZ2luYWwgcmVjb3JkIHRvIHRoZSBuYW1lIG1hcFxyXG4gICAgICAgIGlmIChtYXRjaGVyLnJlY29yZC5uYW1lICYmICFpc0FsaWFzUmVjb3JkKG1hdGNoZXIpKVxyXG4gICAgICAgICAgICBtYXRjaGVyTWFwLnNldChtYXRjaGVyLnJlY29yZC5uYW1lLCBtYXRjaGVyKTtcclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIHJlc29sdmUobG9jYXRpb24sIGN1cnJlbnRMb2NhdGlvbikge1xyXG4gICAgICAgIGxldCBtYXRjaGVyO1xyXG4gICAgICAgIGxldCBwYXJhbXMgPSB7fTtcclxuICAgICAgICBsZXQgcGF0aDtcclxuICAgICAgICBsZXQgbmFtZTtcclxuICAgICAgICBpZiAoJ25hbWUnIGluIGxvY2F0aW9uICYmIGxvY2F0aW9uLm5hbWUpIHtcclxuICAgICAgICAgICAgbWF0Y2hlciA9IG1hdGNoZXJNYXAuZ2V0KGxvY2F0aW9uLm5hbWUpO1xyXG4gICAgICAgICAgICBpZiAoIW1hdGNoZXIpXHJcbiAgICAgICAgICAgICAgICB0aHJvdyBjcmVhdGVSb3V0ZXJFcnJvcigxIC8qIE1BVENIRVJfTk9UX0ZPVU5EICovLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgbG9jYXRpb24sXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgbmFtZSA9IG1hdGNoZXIucmVjb3JkLm5hbWU7XHJcbiAgICAgICAgICAgIHBhcmFtcyA9IGFzc2lnbihcclxuICAgICAgICAgICAgLy8gcGFyYW1zRnJvbUxvY2F0aW9uIGlzIGEgbmV3IG9iamVjdFxyXG4gICAgICAgICAgICBwYXJhbXNGcm9tTG9jYXRpb24oY3VycmVudExvY2F0aW9uLnBhcmFtcywgXHJcbiAgICAgICAgICAgIC8vIG9ubHkga2VlcCBwYXJhbXMgdGhhdCBleGlzdCBpbiB0aGUgcmVzb2x2ZWQgbG9jYXRpb25cclxuICAgICAgICAgICAgLy8gVE9ETzogb25seSBrZWVwIG9wdGlvbmFsIHBhcmFtcyBjb21pbmcgZnJvbSBhIHBhcmVudCByZWNvcmRcclxuICAgICAgICAgICAgbWF0Y2hlci5rZXlzLmZpbHRlcihrID0+ICFrLm9wdGlvbmFsKS5tYXAoayA9PiBrLm5hbWUpKSwgbG9jYXRpb24ucGFyYW1zKTtcclxuICAgICAgICAgICAgLy8gdGhyb3dzIGlmIGNhbm5vdCBiZSBzdHJpbmdpZmllZFxyXG4gICAgICAgICAgICBwYXRoID0gbWF0Y2hlci5zdHJpbmdpZnkocGFyYW1zKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoJ3BhdGgnIGluIGxvY2F0aW9uKSB7XHJcbiAgICAgICAgICAgIC8vIG5vIG5lZWQgdG8gcmVzb2x2ZSB0aGUgcGF0aCB3aXRoIHRoZSBtYXRjaGVyIGFzIGl0IHdhcyBwcm92aWRlZFxyXG4gICAgICAgICAgICAvLyB0aGlzIGFsc28gYWxsb3dzIHRoZSB1c2VyIHRvIGNvbnRyb2wgdGhlIGVuY29kaW5nXHJcbiAgICAgICAgICAgIHBhdGggPSBsb2NhdGlvbi5wYXRoO1xyXG4gICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmICFwYXRoLnN0YXJ0c1dpdGgoJy8nKSkge1xyXG4gICAgICAgICAgICAgICAgd2FybihgVGhlIE1hdGNoZXIgY2Fubm90IHJlc29sdmUgcmVsYXRpdmUgcGF0aHMgYnV0IHJlY2VpdmVkIFwiJHtwYXRofVwiLiBVbmxlc3MgeW91IGRpcmVjdGx5IGNhbGxlZCBcXGBtYXRjaGVyLnJlc29sdmUoXCIke3BhdGh9XCIpXFxgLCB0aGlzIGlzIHByb2JhYmx5IGEgYnVnIGluIHZ1ZS1yb3V0ZXIuIFBsZWFzZSBvcGVuIGFuIGlzc3VlIGF0IGh0dHBzOi8vbmV3LWlzc3VlLnZ1ZWpzLm9yZy8/cmVwbz12dWVqcy9yb3V0ZXIuYCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgbWF0Y2hlciA9IG1hdGNoZXJzLmZpbmQobSA9PiBtLnJlLnRlc3QocGF0aCkpO1xyXG4gICAgICAgICAgICAvLyBtYXRjaGVyIHNob3VsZCBoYXZlIGEgdmFsdWUgYWZ0ZXIgdGhlIGxvb3BcclxuICAgICAgICAgICAgaWYgKG1hdGNoZXIpIHtcclxuICAgICAgICAgICAgICAgIC8vIFRPRE86IGRldiB3YXJuaW5nIG9mIHVudXNlZCBwYXJhbXMgaWYgcHJvdmlkZWRcclxuICAgICAgICAgICAgICAgIC8vIHdlIGtub3cgdGhlIG1hdGNoZXIgd29ya3MgYmVjYXVzZSB3ZSB0ZXN0ZWQgdGhlIHJlZ2V4cFxyXG4gICAgICAgICAgICAgICAgcGFyYW1zID0gbWF0Y2hlci5wYXJzZShwYXRoKTtcclxuICAgICAgICAgICAgICAgIG5hbWUgPSBtYXRjaGVyLnJlY29yZC5uYW1lO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIGxvY2F0aW9uIGlzIGEgcmVsYXRpdmUgcGF0aFxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgLy8gbWF0Y2ggYnkgbmFtZSBvciBwYXRoIG9mIGN1cnJlbnQgcm91dGVcclxuICAgICAgICAgICAgbWF0Y2hlciA9IGN1cnJlbnRMb2NhdGlvbi5uYW1lXHJcbiAgICAgICAgICAgICAgICA/IG1hdGNoZXJNYXAuZ2V0KGN1cnJlbnRMb2NhdGlvbi5uYW1lKVxyXG4gICAgICAgICAgICAgICAgOiBtYXRjaGVycy5maW5kKG0gPT4gbS5yZS50ZXN0KGN1cnJlbnRMb2NhdGlvbi5wYXRoKSk7XHJcbiAgICAgICAgICAgIGlmICghbWF0Y2hlcilcclxuICAgICAgICAgICAgICAgIHRocm93IGNyZWF0ZVJvdXRlckVycm9yKDEgLyogTUFUQ0hFUl9OT1RfRk9VTkQgKi8sIHtcclxuICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbixcclxuICAgICAgICAgICAgICAgICAgICBjdXJyZW50TG9jYXRpb24sXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgbmFtZSA9IG1hdGNoZXIucmVjb3JkLm5hbWU7XHJcbiAgICAgICAgICAgIC8vIHNpbmNlIHdlIGFyZSBuYXZpZ2F0aW5nIHRvIHRoZSBzYW1lIGxvY2F0aW9uLCB3ZSBkb24ndCBuZWVkIHRvIHBpY2sgdGhlXHJcbiAgICAgICAgICAgIC8vIHBhcmFtcyBsaWtlIHdoZW4gYG5hbWVgIGlzIHByb3ZpZGVkXHJcbiAgICAgICAgICAgIHBhcmFtcyA9IGFzc2lnbih7fSwgY3VycmVudExvY2F0aW9uLnBhcmFtcywgbG9jYXRpb24ucGFyYW1zKTtcclxuICAgICAgICAgICAgcGF0aCA9IG1hdGNoZXIuc3RyaW5naWZ5KHBhcmFtcyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IG1hdGNoZWQgPSBbXTtcclxuICAgICAgICBsZXQgcGFyZW50TWF0Y2hlciA9IG1hdGNoZXI7XHJcbiAgICAgICAgd2hpbGUgKHBhcmVudE1hdGNoZXIpIHtcclxuICAgICAgICAgICAgLy8gcmV2ZXJzZWQgb3JkZXIgc28gcGFyZW50cyBhcmUgYXQgdGhlIGJlZ2lubmluZ1xyXG4gICAgICAgICAgICBtYXRjaGVkLnVuc2hpZnQocGFyZW50TWF0Y2hlci5yZWNvcmQpO1xyXG4gICAgICAgICAgICBwYXJlbnRNYXRjaGVyID0gcGFyZW50TWF0Y2hlci5wYXJlbnQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIG5hbWUsXHJcbiAgICAgICAgICAgIHBhdGgsXHJcbiAgICAgICAgICAgIHBhcmFtcyxcclxuICAgICAgICAgICAgbWF0Y2hlZCxcclxuICAgICAgICAgICAgbWV0YTogbWVyZ2VNZXRhRmllbGRzKG1hdGNoZWQpLFxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbiAgICAvLyBhZGQgaW5pdGlhbCByb3V0ZXNcclxuICAgIHJvdXRlcy5mb3JFYWNoKHJvdXRlID0+IGFkZFJvdXRlKHJvdXRlKSk7XHJcbiAgICByZXR1cm4geyBhZGRSb3V0ZSwgcmVzb2x2ZSwgcmVtb3ZlUm91dGUsIGdldFJvdXRlcywgZ2V0UmVjb3JkTWF0Y2hlciB9O1xyXG59XHJcbmZ1bmN0aW9uIHBhcmFtc0Zyb21Mb2NhdGlvbihwYXJhbXMsIGtleXMpIHtcclxuICAgIGNvbnN0IG5ld1BhcmFtcyA9IHt9O1xyXG4gICAgZm9yIChjb25zdCBrZXkgb2Yga2V5cykge1xyXG4gICAgICAgIGlmIChrZXkgaW4gcGFyYW1zKVxyXG4gICAgICAgICAgICBuZXdQYXJhbXNba2V5XSA9IHBhcmFtc1trZXldO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG5ld1BhcmFtcztcclxufVxyXG4vKipcclxuICogTm9ybWFsaXplcyBhIFJvdXRlUmVjb3JkUmF3LiBDcmVhdGVzIGEgY29weVxyXG4gKlxyXG4gKiBAcGFyYW0gcmVjb3JkXHJcbiAqIEByZXR1cm5zIHRoZSBub3JtYWxpemVkIHZlcnNpb25cclxuICovXHJcbmZ1bmN0aW9uIG5vcm1hbGl6ZVJvdXRlUmVjb3JkKHJlY29yZCkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBwYXRoOiByZWNvcmQucGF0aCxcclxuICAgICAgICByZWRpcmVjdDogcmVjb3JkLnJlZGlyZWN0LFxyXG4gICAgICAgIG5hbWU6IHJlY29yZC5uYW1lLFxyXG4gICAgICAgIG1ldGE6IHJlY29yZC5tZXRhIHx8IHt9LFxyXG4gICAgICAgIGFsaWFzT2Y6IHVuZGVmaW5lZCxcclxuICAgICAgICBiZWZvcmVFbnRlcjogcmVjb3JkLmJlZm9yZUVudGVyLFxyXG4gICAgICAgIHByb3BzOiBub3JtYWxpemVSZWNvcmRQcm9wcyhyZWNvcmQpLFxyXG4gICAgICAgIGNoaWxkcmVuOiByZWNvcmQuY2hpbGRyZW4gfHwgW10sXHJcbiAgICAgICAgaW5zdGFuY2VzOiB7fSxcclxuICAgICAgICBsZWF2ZUd1YXJkczogbmV3IFNldCgpLFxyXG4gICAgICAgIHVwZGF0ZUd1YXJkczogbmV3IFNldCgpLFxyXG4gICAgICAgIGVudGVyQ2FsbGJhY2tzOiB7fSxcclxuICAgICAgICBjb21wb25lbnRzOiAnY29tcG9uZW50cycgaW4gcmVjb3JkXHJcbiAgICAgICAgICAgID8gcmVjb3JkLmNvbXBvbmVudHMgfHwge31cclxuICAgICAgICAgICAgOiB7IGRlZmF1bHQ6IHJlY29yZC5jb21wb25lbnQgfSxcclxuICAgIH07XHJcbn1cclxuLyoqXHJcbiAqIE5vcm1hbGl6ZSB0aGUgb3B0aW9uYWwgYHByb3BzYCBpbiBhIHJlY29yZCB0byBhbHdheXMgYmUgYW4gb2JqZWN0IHNpbWlsYXIgdG9cclxuICogY29tcG9uZW50cy4gQWxzbyBhY2NlcHQgYSBib29sZWFuIGZvciBjb21wb25lbnRzLlxyXG4gKiBAcGFyYW0gcmVjb3JkXHJcbiAqL1xyXG5mdW5jdGlvbiBub3JtYWxpemVSZWNvcmRQcm9wcyhyZWNvcmQpIHtcclxuICAgIGNvbnN0IHByb3BzT2JqZWN0ID0ge307XHJcbiAgICAvLyBwcm9wcyBkb2VzIG5vdCBleGlzdCBvbiByZWRpcmVjdCByZWNvcmRzIGJ1dCB3ZSBjYW4gc2V0IGZhbHNlIGRpcmVjdGx5XHJcbiAgICBjb25zdCBwcm9wcyA9IHJlY29yZC5wcm9wcyB8fCBmYWxzZTtcclxuICAgIGlmICgnY29tcG9uZW50JyBpbiByZWNvcmQpIHtcclxuICAgICAgICBwcm9wc09iamVjdC5kZWZhdWx0ID0gcHJvcHM7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICAvLyBOT1RFOiB3ZSBjb3VsZCBhbHNvIGFsbG93IGEgZnVuY3Rpb24gdG8gYmUgYXBwbGllZCB0byBldmVyeSBjb21wb25lbnQuXHJcbiAgICAgICAgLy8gV291bGQgbmVlZCB1c2VyIGZlZWRiYWNrIGZvciB1c2UgY2FzZXNcclxuICAgICAgICBmb3IgKGNvbnN0IG5hbWUgaW4gcmVjb3JkLmNvbXBvbmVudHMpXHJcbiAgICAgICAgICAgIHByb3BzT2JqZWN0W25hbWVdID0gdHlwZW9mIHByb3BzID09PSAnYm9vbGVhbicgPyBwcm9wcyA6IHByb3BzW25hbWVdO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHByb3BzT2JqZWN0O1xyXG59XHJcbi8qKlxyXG4gKiBDaGVja3MgaWYgYSByZWNvcmQgb3IgYW55IG9mIGl0cyBwYXJlbnQgaXMgYW4gYWxpYXNcclxuICogQHBhcmFtIHJlY29yZFxyXG4gKi9cclxuZnVuY3Rpb24gaXNBbGlhc1JlY29yZChyZWNvcmQpIHtcclxuICAgIHdoaWxlIChyZWNvcmQpIHtcclxuICAgICAgICBpZiAocmVjb3JkLnJlY29yZC5hbGlhc09mKVxyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICByZWNvcmQgPSByZWNvcmQucGFyZW50O1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG59XHJcbi8qKlxyXG4gKiBNZXJnZSBtZXRhIGZpZWxkcyBvZiBhbiBhcnJheSBvZiByZWNvcmRzXHJcbiAqXHJcbiAqIEBwYXJhbSBtYXRjaGVkIC0gYXJyYXkgb2YgbWF0Y2hlZCByZWNvcmRzXHJcbiAqL1xyXG5mdW5jdGlvbiBtZXJnZU1ldGFGaWVsZHMobWF0Y2hlZCkge1xyXG4gICAgcmV0dXJuIG1hdGNoZWQucmVkdWNlKChtZXRhLCByZWNvcmQpID0+IGFzc2lnbihtZXRhLCByZWNvcmQubWV0YSksIHt9KTtcclxufVxyXG5mdW5jdGlvbiBtZXJnZU9wdGlvbnMoZGVmYXVsdHMsIHBhcnRpYWxPcHRpb25zKSB7XHJcbiAgICBjb25zdCBvcHRpb25zID0ge307XHJcbiAgICBmb3IgKGNvbnN0IGtleSBpbiBkZWZhdWx0cykge1xyXG4gICAgICAgIG9wdGlvbnNba2V5XSA9IGtleSBpbiBwYXJ0aWFsT3B0aW9ucyA/IHBhcnRpYWxPcHRpb25zW2tleV0gOiBkZWZhdWx0c1trZXldO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG9wdGlvbnM7XHJcbn1cclxuZnVuY3Rpb24gaXNTYW1lUGFyYW0oYSwgYikge1xyXG4gICAgcmV0dXJuIChhLm5hbWUgPT09IGIubmFtZSAmJlxyXG4gICAgICAgIGEub3B0aW9uYWwgPT09IGIub3B0aW9uYWwgJiZcclxuICAgICAgICBhLnJlcGVhdGFibGUgPT09IGIucmVwZWF0YWJsZSk7XHJcbn1cclxuLyoqXHJcbiAqIENoZWNrIGlmIGEgcGF0aCBhbmQgaXRzIGFsaWFzIGhhdmUgdGhlIHNhbWUgcmVxdWlyZWQgcGFyYW1zXHJcbiAqXHJcbiAqIEBwYXJhbSBhIC0gb3JpZ2luYWwgcmVjb3JkXHJcbiAqIEBwYXJhbSBiIC0gYWxpYXMgcmVjb3JkXHJcbiAqL1xyXG5mdW5jdGlvbiBjaGVja1NhbWVQYXJhbXMoYSwgYikge1xyXG4gICAgZm9yIChjb25zdCBrZXkgb2YgYS5rZXlzKSB7XHJcbiAgICAgICAgaWYgKCFrZXkub3B0aW9uYWwgJiYgIWIua2V5cy5maW5kKGlzU2FtZVBhcmFtLmJpbmQobnVsbCwga2V5KSkpXHJcbiAgICAgICAgICAgIHJldHVybiB3YXJuKGBBbGlhcyBcIiR7Yi5yZWNvcmQucGF0aH1cIiBhbmQgdGhlIG9yaWdpbmFsIHJlY29yZDogXCIke2EucmVjb3JkLnBhdGh9XCIgc2hvdWxkIGhhdmUgdGhlIGV4YWN0IHNhbWUgcGFyYW0gbmFtZWQgXCIke2tleS5uYW1lfVwiYCk7XHJcbiAgICB9XHJcbiAgICBmb3IgKGNvbnN0IGtleSBvZiBiLmtleXMpIHtcclxuICAgICAgICBpZiAoIWtleS5vcHRpb25hbCAmJiAhYS5rZXlzLmZpbmQoaXNTYW1lUGFyYW0uYmluZChudWxsLCBrZXkpKSlcclxuICAgICAgICAgICAgcmV0dXJuIHdhcm4oYEFsaWFzIFwiJHtiLnJlY29yZC5wYXRofVwiIGFuZCB0aGUgb3JpZ2luYWwgcmVjb3JkOiBcIiR7YS5yZWNvcmQucGF0aH1cIiBzaG91bGQgaGF2ZSB0aGUgZXhhY3Qgc2FtZSBwYXJhbSBuYW1lZCBcIiR7a2V5Lm5hbWV9XCJgKTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBjaGVja01pc3NpbmdQYXJhbXNJbkFic29sdXRlUGF0aChyZWNvcmQsIHBhcmVudCkge1xyXG4gICAgZm9yIChjb25zdCBrZXkgb2YgcGFyZW50LmtleXMpIHtcclxuICAgICAgICBpZiAoIXJlY29yZC5rZXlzLmZpbmQoaXNTYW1lUGFyYW0uYmluZChudWxsLCBrZXkpKSlcclxuICAgICAgICAgICAgcmV0dXJuIHdhcm4oYEFic29sdXRlIHBhdGggXCIke3JlY29yZC5yZWNvcmQucGF0aH1cIiBzaG91bGQgaGF2ZSB0aGUgZXhhY3Qgc2FtZSBwYXJhbSBuYW1lZCBcIiR7a2V5Lm5hbWV9XCIgYXMgaXRzIHBhcmVudCBcIiR7cGFyZW50LnJlY29yZC5wYXRofVwiLmApO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIGlzUmVjb3JkQ2hpbGRPZihyZWNvcmQsIHBhcmVudCkge1xyXG4gICAgcmV0dXJuIHBhcmVudC5jaGlsZHJlbi5zb21lKGNoaWxkID0+IGNoaWxkID09PSByZWNvcmQgfHwgaXNSZWNvcmRDaGlsZE9mKHJlY29yZCwgY2hpbGQpKTtcclxufVxuXG4vKipcclxuICogRW5jb2RpbmcgUnVsZXMg4pCjID0gU3BhY2UgUGF0aDog4pCjIFwiIDwgPiAjID8geyB9IFF1ZXJ5OiDikKMgXCIgPCA+ICMgJiA9IEhhc2g6IOKQoyBcIlxyXG4gKiA8ID4gYFxyXG4gKlxyXG4gKiBPbiB0b3Agb2YgdGhhdCwgdGhlIFJGQzM5ODYgKGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmMzOTg2I3NlY3Rpb24tMi4yKVxyXG4gKiBkZWZpbmVzIHNvbWUgZXh0cmEgY2hhcmFjdGVycyB0byBiZSBlbmNvZGVkLiBNb3N0IGJyb3dzZXJzIGRvIG5vdCBlbmNvZGUgdGhlbVxyXG4gKiBpbiBlbmNvZGVVUkkgaHR0cHM6Ly9naXRodWIuY29tL3doYXR3Zy91cmwvaXNzdWVzLzM2OSwgc28gaXQgbWF5IGJlIHNhZmVyIHRvXHJcbiAqIGFsc28gZW5jb2RlIGAhJygpKmAuIExlYXZpbmcgdW5lbmNvZGVkIG9ubHkgQVNDSUkgYWxwaGFudW1lcmljKGBhLXpBLVowLTlgKVxyXG4gKiBwbHVzIGAtLl9+YC4gVGhpcyBleHRyYSBzYWZldHkgc2hvdWxkIGJlIGFwcGxpZWQgdG8gcXVlcnkgYnkgcGF0Y2hpbmcgdGhlXHJcbiAqIHN0cmluZyByZXR1cm5lZCBieSBlbmNvZGVVUklDb21wb25lbnQgZW5jb2RlVVJJIGFsc28gZW5jb2RlcyBgW1xcXV5gLiBgXFxgXHJcbiAqIHNob3VsZCBiZSBlbmNvZGVkIHRvIGF2b2lkIGFtYmlndWl0eS4gQnJvd3NlcnMgKElFLCBGRiwgQykgdHJhbnNmb3JtIGEgYFxcYFxyXG4gKiBpbnRvIGEgYC9gIGlmIGRpcmVjdGx5IHR5cGVkIGluLiBUaGUgX2JhY2t0aWNrXyAoYGBgYGApIHNob3VsZCBhbHNvIGJlXHJcbiAqIGVuY29kZWQgZXZlcnl3aGVyZSBiZWNhdXNlIHNvbWUgYnJvd3NlcnMgbGlrZSBGRiBlbmNvZGUgaXQgd2hlbiBkaXJlY3RseVxyXG4gKiB3cml0dGVuIHdoaWxlIG90aGVycyBkb24ndC4gU2FmYXJpIGFuZCBJRSBkb24ndCBlbmNvZGUgYGBcIjw+e31gYGAgaW4gaGFzaC5cclxuICovXHJcbi8vIGNvbnN0IEVYVFJBX1JFU0VSVkVEX1JFID0gL1shJygpKl0vZ1xyXG4vLyBjb25zdCBlbmNvZGVSZXNlcnZlZFJlcGxhY2VyID0gKGM6IHN0cmluZykgPT4gJyUnICsgYy5jaGFyQ29kZUF0KDApLnRvU3RyaW5nKDE2KVxyXG5jb25zdCBIQVNIX1JFID0gLyMvZzsgLy8gJTIzXHJcbmNvbnN0IEFNUEVSU0FORF9SRSA9IC8mL2c7IC8vICUyNlxyXG5jb25zdCBTTEFTSF9SRSA9IC9cXC8vZzsgLy8gJTJGXHJcbmNvbnN0IEVRVUFMX1JFID0gLz0vZzsgLy8gJTNEXHJcbmNvbnN0IElNX1JFID0gL1xcPy9nOyAvLyAlM0ZcclxuY29uc3QgUExVU19SRSA9IC9cXCsvZzsgLy8gJTJCXHJcbi8qKlxyXG4gKiBOT1RFOiBJdCdzIG5vdCBjbGVhciB0byBtZSBpZiB3ZSBzaG91bGQgZW5jb2RlIHRoZSArIHN5bWJvbCBpbiBxdWVyaWVzLCBpdFxyXG4gKiBzZWVtcyB0byBiZSBsZXNzIGZsZXhpYmxlIHRoYW4gbm90IGRvaW5nIHNvIGFuZCBJIGNhbid0IGZpbmQgb3V0IHRoZSBsZWdhY3lcclxuICogc3lzdGVtcyByZXF1aXJpbmcgdGhpcyBmb3IgcmVndWxhciByZXF1ZXN0cyBsaWtlIHRleHQvaHRtbC4gSW4gdGhlIHN0YW5kYXJkLFxyXG4gKiB0aGUgZW5jb2Rpbmcgb2YgdGhlIHBsdXMgY2hhcmFjdGVyIGlzIG9ubHkgbWVudGlvbmVkIGZvclxyXG4gKiBhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWRcclxuICogKGh0dHBzOi8vdXJsLnNwZWMud2hhdHdnLm9yZy8jdXJsZW5jb2RlZC1wYXJzaW5nKSBhbmQgbW9zdCBicm93c2VycyBzZWVtcyBsb1xyXG4gKiBsZWF2ZSB0aGUgcGx1cyBjaGFyYWN0ZXIgYXMgaXMgaW4gcXVlcmllcy4gVG8gYmUgbW9yZSBmbGV4aWJsZSwgd2UgYWxsb3cgdGhlXHJcbiAqIHBsdXMgY2hhcmFjdGVyIG9uIHRoZSBxdWVyeSBidXQgaXQgY2FuIGFsc28gYmUgbWFudWFsbHkgZW5jb2RlZCBieSB0aGUgdXNlci5cclxuICpcclxuICogUmVzb3VyY2VzOlxyXG4gKiAtIGh0dHBzOi8vdXJsLnNwZWMud2hhdHdnLm9yZy8jdXJsZW5jb2RlZC1wYXJzaW5nXHJcbiAqIC0gaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMTYzNDI3MS91cmwtZW5jb2RpbmctdGhlLXNwYWNlLWNoYXJhY3Rlci1vci0yMFxyXG4gKi9cclxuY29uc3QgRU5DX0JSQUNLRVRfT1BFTl9SRSA9IC8lNUIvZzsgLy8gW1xyXG5jb25zdCBFTkNfQlJBQ0tFVF9DTE9TRV9SRSA9IC8lNUQvZzsgLy8gXVxyXG5jb25zdCBFTkNfQ0FSRVRfUkUgPSAvJTVFL2c7IC8vIF5cclxuY29uc3QgRU5DX0JBQ0tUSUNLX1JFID0gLyU2MC9nOyAvLyBgXHJcbmNvbnN0IEVOQ19DVVJMWV9PUEVOX1JFID0gLyU3Qi9nOyAvLyB7XHJcbmNvbnN0IEVOQ19QSVBFX1JFID0gLyU3Qy9nOyAvLyB8XHJcbmNvbnN0IEVOQ19DVVJMWV9DTE9TRV9SRSA9IC8lN0QvZzsgLy8gfVxyXG5jb25zdCBFTkNfU1BBQ0VfUkUgPSAvJTIwL2c7IC8vIH1cclxuLyoqXHJcbiAqIEVuY29kZSBjaGFyYWN0ZXJzIHRoYXQgbmVlZCB0byBiZSBlbmNvZGVkIG9uIHRoZSBwYXRoLCBzZWFyY2ggYW5kIGhhc2hcclxuICogc2VjdGlvbnMgb2YgdGhlIFVSTC5cclxuICpcclxuICogQGludGVybmFsXHJcbiAqIEBwYXJhbSB0ZXh0IC0gc3RyaW5nIHRvIGVuY29kZVxyXG4gKiBAcmV0dXJucyBlbmNvZGVkIHN0cmluZ1xyXG4gKi9cclxuZnVuY3Rpb24gY29tbW9uRW5jb2RlKHRleHQpIHtcclxuICAgIHJldHVybiBlbmNvZGVVUkkoJycgKyB0ZXh0KVxyXG4gICAgICAgIC5yZXBsYWNlKEVOQ19QSVBFX1JFLCAnfCcpXHJcbiAgICAgICAgLnJlcGxhY2UoRU5DX0JSQUNLRVRfT1BFTl9SRSwgJ1snKVxyXG4gICAgICAgIC5yZXBsYWNlKEVOQ19CUkFDS0VUX0NMT1NFX1JFLCAnXScpO1xyXG59XHJcbi8qKlxyXG4gKiBFbmNvZGUgY2hhcmFjdGVycyB0aGF0IG5lZWQgdG8gYmUgZW5jb2RlZCBvbiB0aGUgaGFzaCBzZWN0aW9uIG9mIHRoZSBVUkwuXHJcbiAqXHJcbiAqIEBwYXJhbSB0ZXh0IC0gc3RyaW5nIHRvIGVuY29kZVxyXG4gKiBAcmV0dXJucyBlbmNvZGVkIHN0cmluZ1xyXG4gKi9cclxuZnVuY3Rpb24gZW5jb2RlSGFzaCh0ZXh0KSB7XHJcbiAgICByZXR1cm4gY29tbW9uRW5jb2RlKHRleHQpXHJcbiAgICAgICAgLnJlcGxhY2UoRU5DX0NVUkxZX09QRU5fUkUsICd7JylcclxuICAgICAgICAucmVwbGFjZShFTkNfQ1VSTFlfQ0xPU0VfUkUsICd9JylcclxuICAgICAgICAucmVwbGFjZShFTkNfQ0FSRVRfUkUsICdeJyk7XHJcbn1cclxuLyoqXHJcbiAqIEVuY29kZSBjaGFyYWN0ZXJzIHRoYXQgbmVlZCB0byBiZSBlbmNvZGVkIHF1ZXJ5IHZhbHVlcyBvbiB0aGUgcXVlcnlcclxuICogc2VjdGlvbiBvZiB0aGUgVVJMLlxyXG4gKlxyXG4gKiBAcGFyYW0gdGV4dCAtIHN0cmluZyB0byBlbmNvZGVcclxuICogQHJldHVybnMgZW5jb2RlZCBzdHJpbmdcclxuICovXHJcbmZ1bmN0aW9uIGVuY29kZVF1ZXJ5VmFsdWUodGV4dCkge1xyXG4gICAgcmV0dXJuIChjb21tb25FbmNvZGUodGV4dClcclxuICAgICAgICAvLyBFbmNvZGUgdGhlIHNwYWNlIGFzICssIGVuY29kZSB0aGUgKyB0byBkaWZmZXJlbnRpYXRlIGl0IGZyb20gdGhlIHNwYWNlXHJcbiAgICAgICAgLnJlcGxhY2UoUExVU19SRSwgJyUyQicpXHJcbiAgICAgICAgLnJlcGxhY2UoRU5DX1NQQUNFX1JFLCAnKycpXHJcbiAgICAgICAgLnJlcGxhY2UoSEFTSF9SRSwgJyUyMycpXHJcbiAgICAgICAgLnJlcGxhY2UoQU1QRVJTQU5EX1JFLCAnJTI2JylcclxuICAgICAgICAucmVwbGFjZShFTkNfQkFDS1RJQ0tfUkUsICdgJylcclxuICAgICAgICAucmVwbGFjZShFTkNfQ1VSTFlfT1BFTl9SRSwgJ3snKVxyXG4gICAgICAgIC5yZXBsYWNlKEVOQ19DVVJMWV9DTE9TRV9SRSwgJ30nKVxyXG4gICAgICAgIC5yZXBsYWNlKEVOQ19DQVJFVF9SRSwgJ14nKSk7XHJcbn1cclxuLyoqXHJcbiAqIExpa2UgYGVuY29kZVF1ZXJ5VmFsdWVgIGJ1dCBhbHNvIGVuY29kZXMgdGhlIGA9YCBjaGFyYWN0ZXIuXHJcbiAqXHJcbiAqIEBwYXJhbSB0ZXh0IC0gc3RyaW5nIHRvIGVuY29kZVxyXG4gKi9cclxuZnVuY3Rpb24gZW5jb2RlUXVlcnlLZXkodGV4dCkge1xyXG4gICAgcmV0dXJuIGVuY29kZVF1ZXJ5VmFsdWUodGV4dCkucmVwbGFjZShFUVVBTF9SRSwgJyUzRCcpO1xyXG59XHJcbi8qKlxyXG4gKiBFbmNvZGUgY2hhcmFjdGVycyB0aGF0IG5lZWQgdG8gYmUgZW5jb2RlZCBvbiB0aGUgcGF0aCBzZWN0aW9uIG9mIHRoZSBVUkwuXHJcbiAqXHJcbiAqIEBwYXJhbSB0ZXh0IC0gc3RyaW5nIHRvIGVuY29kZVxyXG4gKiBAcmV0dXJucyBlbmNvZGVkIHN0cmluZ1xyXG4gKi9cclxuZnVuY3Rpb24gZW5jb2RlUGF0aCh0ZXh0KSB7XHJcbiAgICByZXR1cm4gY29tbW9uRW5jb2RlKHRleHQpLnJlcGxhY2UoSEFTSF9SRSwgJyUyMycpLnJlcGxhY2UoSU1fUkUsICclM0YnKTtcclxufVxyXG4vKipcclxuICogRW5jb2RlIGNoYXJhY3RlcnMgdGhhdCBuZWVkIHRvIGJlIGVuY29kZWQgb24gdGhlIHBhdGggc2VjdGlvbiBvZiB0aGUgVVJMIGFzIGFcclxuICogcGFyYW0uIFRoaXMgZnVuY3Rpb24gZW5jb2RlcyBldmVyeXRoaW5nIHtAbGluayBlbmNvZGVQYXRofSBkb2VzIHBsdXMgdGhlXHJcbiAqIHNsYXNoIChgL2ApIGNoYXJhY3Rlci4gSWYgYHRleHRgIGlzIGBudWxsYCBvciBgdW5kZWZpbmVkYCwgcmV0dXJucyBhbiBlbXB0eVxyXG4gKiBzdHJpbmcgaW5zdGVhZC5cclxuICpcclxuICogQHBhcmFtIHRleHQgLSBzdHJpbmcgdG8gZW5jb2RlXHJcbiAqIEByZXR1cm5zIGVuY29kZWQgc3RyaW5nXHJcbiAqL1xyXG5mdW5jdGlvbiBlbmNvZGVQYXJhbSh0ZXh0KSB7XHJcbiAgICByZXR1cm4gdGV4dCA9PSBudWxsID8gJycgOiBlbmNvZGVQYXRoKHRleHQpLnJlcGxhY2UoU0xBU0hfUkUsICclMkYnKTtcclxufVxyXG4vKipcclxuICogRGVjb2RlIHRleHQgdXNpbmcgYGRlY29kZVVSSUNvbXBvbmVudGAuIFJldHVybnMgdGhlIG9yaWdpbmFsIHRleHQgaWYgaXRcclxuICogZmFpbHMuXHJcbiAqXHJcbiAqIEBwYXJhbSB0ZXh0IC0gc3RyaW5nIHRvIGRlY29kZVxyXG4gKiBAcmV0dXJucyBkZWNvZGVkIHN0cmluZ1xyXG4gKi9cclxuZnVuY3Rpb24gZGVjb2RlKHRleHQpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgcmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudCgnJyArIHRleHQpO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGVycikge1xyXG4gICAgICAgIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiB3YXJuKGBFcnJvciBkZWNvZGluZyBcIiR7dGV4dH1cIi4gVXNpbmcgb3JpZ2luYWwgdmFsdWVgKTtcclxuICAgIH1cclxuICAgIHJldHVybiAnJyArIHRleHQ7XHJcbn1cblxuLyoqXHJcbiAqIFRyYW5zZm9ybXMgYSBxdWVyeVN0cmluZyBpbnRvIGEge0BsaW5rIExvY2F0aW9uUXVlcnl9IG9iamVjdC4gQWNjZXB0IGJvdGgsIGFcclxuICogdmVyc2lvbiB3aXRoIHRoZSBsZWFkaW5nIGA/YCBhbmQgd2l0aG91dCBTaG91bGQgd29yayBhcyBVUkxTZWFyY2hQYXJhbXNcclxuXG4gKiBAaW50ZXJuYWxcclxuICpcclxuICogQHBhcmFtIHNlYXJjaCAtIHNlYXJjaCBzdHJpbmcgdG8gcGFyc2VcclxuICogQHJldHVybnMgYSBxdWVyeSBvYmplY3RcclxuICovXHJcbmZ1bmN0aW9uIHBhcnNlUXVlcnkoc2VhcmNoKSB7XHJcbiAgICBjb25zdCBxdWVyeSA9IHt9O1xyXG4gICAgLy8gYXZvaWQgY3JlYXRpbmcgYW4gb2JqZWN0IHdpdGggYW4gZW1wdHkga2V5IGFuZCBlbXB0eSB2YWx1ZVxyXG4gICAgLy8gYmVjYXVzZSBvZiBzcGxpdCgnJicpXHJcbiAgICBpZiAoc2VhcmNoID09PSAnJyB8fCBzZWFyY2ggPT09ICc/JylcclxuICAgICAgICByZXR1cm4gcXVlcnk7XHJcbiAgICBjb25zdCBoYXNMZWFkaW5nSU0gPSBzZWFyY2hbMF0gPT09ICc/JztcclxuICAgIGNvbnN0IHNlYXJjaFBhcmFtcyA9IChoYXNMZWFkaW5nSU0gPyBzZWFyY2guc2xpY2UoMSkgOiBzZWFyY2gpLnNwbGl0KCcmJyk7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNlYXJjaFBhcmFtcy5sZW5ndGg7ICsraSkge1xyXG4gICAgICAgIC8vIHByZSBkZWNvZGUgdGhlICsgaW50byBzcGFjZVxyXG4gICAgICAgIGNvbnN0IHNlYXJjaFBhcmFtID0gc2VhcmNoUGFyYW1zW2ldLnJlcGxhY2UoUExVU19SRSwgJyAnKTtcclxuICAgICAgICAvLyBhbGxvdyB0aGUgPSBjaGFyYWN0ZXJcclxuICAgICAgICBjb25zdCBlcVBvcyA9IHNlYXJjaFBhcmFtLmluZGV4T2YoJz0nKTtcclxuICAgICAgICBjb25zdCBrZXkgPSBkZWNvZGUoZXFQb3MgPCAwID8gc2VhcmNoUGFyYW0gOiBzZWFyY2hQYXJhbS5zbGljZSgwLCBlcVBvcykpO1xyXG4gICAgICAgIGNvbnN0IHZhbHVlID0gZXFQb3MgPCAwID8gbnVsbCA6IGRlY29kZShzZWFyY2hQYXJhbS5zbGljZShlcVBvcyArIDEpKTtcclxuICAgICAgICBpZiAoa2V5IGluIHF1ZXJ5KSB7XHJcbiAgICAgICAgICAgIC8vIGFuIGV4dHJhIHZhcmlhYmxlIGZvciB0cyB0eXBlc1xyXG4gICAgICAgICAgICBsZXQgY3VycmVudFZhbHVlID0gcXVlcnlba2V5XTtcclxuICAgICAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KGN1cnJlbnRWYWx1ZSkpIHtcclxuICAgICAgICAgICAgICAgIGN1cnJlbnRWYWx1ZSA9IHF1ZXJ5W2tleV0gPSBbY3VycmVudFZhbHVlXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjdXJyZW50VmFsdWUucHVzaCh2YWx1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBxdWVyeVtrZXldID0gdmFsdWU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHF1ZXJ5O1xyXG59XHJcbi8qKlxyXG4gKiBTdHJpbmdpZmllcyBhIHtAbGluayBMb2NhdGlvblF1ZXJ5UmF3fSBvYmplY3QuIExpa2UgYFVSTFNlYXJjaFBhcmFtc2AsIGl0XHJcbiAqIGRvZXNuJ3QgcHJlcGVuZCBhIGA/YFxyXG4gKlxyXG4gKiBAaW50ZXJuYWxcclxuICpcclxuICogQHBhcmFtIHF1ZXJ5IC0gcXVlcnkgb2JqZWN0IHRvIHN0cmluZ2lmeVxyXG4gKiBAcmV0dXJucyBzdHJpbmcgdmVyc2lvbiBvZiB0aGUgcXVlcnkgd2l0aG91dCB0aGUgbGVhZGluZyBgP2BcclxuICovXHJcbmZ1bmN0aW9uIHN0cmluZ2lmeVF1ZXJ5KHF1ZXJ5KSB7XHJcbiAgICBsZXQgc2VhcmNoID0gJyc7XHJcbiAgICBmb3IgKGxldCBrZXkgaW4gcXVlcnkpIHtcclxuICAgICAgICBjb25zdCB2YWx1ZSA9IHF1ZXJ5W2tleV07XHJcbiAgICAgICAga2V5ID0gZW5jb2RlUXVlcnlLZXkoa2V5KTtcclxuICAgICAgICBpZiAodmFsdWUgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAvLyBvbmx5IG51bGwgYWRkcyB0aGUgdmFsdWVcclxuICAgICAgICAgICAgaWYgKHZhbHVlICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIHNlYXJjaCArPSAoc2VhcmNoLmxlbmd0aCA/ICcmJyA6ICcnKSArIGtleTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8ga2VlcCBudWxsIHZhbHVlc1xyXG4gICAgICAgIGNvbnN0IHZhbHVlcyA9IEFycmF5LmlzQXJyYXkodmFsdWUpXHJcbiAgICAgICAgICAgID8gdmFsdWUubWFwKHYgPT4gdiAmJiBlbmNvZGVRdWVyeVZhbHVlKHYpKVxyXG4gICAgICAgICAgICA6IFt2YWx1ZSAmJiBlbmNvZGVRdWVyeVZhbHVlKHZhbHVlKV07XHJcbiAgICAgICAgdmFsdWVzLmZvckVhY2godmFsdWUgPT4ge1xyXG4gICAgICAgICAgICAvLyBza2lwIHVuZGVmaW5lZCB2YWx1ZXMgaW4gYXJyYXlzIGFzIGlmIHRoZXkgd2VyZSBub3QgcHJlc2VudFxyXG4gICAgICAgICAgICAvLyBzbWFsbGVyIGNvZGUgdGhhbiB1c2luZyBmaWx0ZXJcclxuICAgICAgICAgICAgaWYgKHZhbHVlICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIC8vIG9ubHkgYXBwZW5kICYgd2l0aCBub24tZW1wdHkgc2VhcmNoXHJcbiAgICAgICAgICAgICAgICBzZWFyY2ggKz0gKHNlYXJjaC5sZW5ndGggPyAnJicgOiAnJykgKyBrZXk7XHJcbiAgICAgICAgICAgICAgICBpZiAodmFsdWUgIT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICBzZWFyY2ggKz0gJz0nICsgdmFsdWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIHJldHVybiBzZWFyY2g7XHJcbn1cclxuLyoqXHJcbiAqIFRyYW5zZm9ybXMgYSB7QGxpbmsgTG9jYXRpb25RdWVyeVJhd30gaW50byBhIHtAbGluayBMb2NhdGlvblF1ZXJ5fSBieSBjYXN0aW5nXHJcbiAqIG51bWJlcnMgaW50byBzdHJpbmdzLCByZW1vdmluZyBrZXlzIHdpdGggYW4gdW5kZWZpbmVkIHZhbHVlIGFuZCByZXBsYWNpbmdcclxuICogdW5kZWZpbmVkIHdpdGggbnVsbCBpbiBhcnJheXNcclxuICpcclxuICogQHBhcmFtIHF1ZXJ5IC0gcXVlcnkgb2JqZWN0IHRvIG5vcm1hbGl6ZVxyXG4gKiBAcmV0dXJucyBhIG5vcm1hbGl6ZWQgcXVlcnkgb2JqZWN0XHJcbiAqL1xyXG5mdW5jdGlvbiBub3JtYWxpemVRdWVyeShxdWVyeSkge1xyXG4gICAgY29uc3Qgbm9ybWFsaXplZFF1ZXJ5ID0ge307XHJcbiAgICBmb3IgKGNvbnN0IGtleSBpbiBxdWVyeSkge1xyXG4gICAgICAgIGNvbnN0IHZhbHVlID0gcXVlcnlba2V5XTtcclxuICAgICAgICBpZiAodmFsdWUgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBub3JtYWxpemVkUXVlcnlba2V5XSA9IEFycmF5LmlzQXJyYXkodmFsdWUpXHJcbiAgICAgICAgICAgICAgICA/IHZhbHVlLm1hcCh2ID0+ICh2ID09IG51bGwgPyBudWxsIDogJycgKyB2KSlcclxuICAgICAgICAgICAgICAgIDogdmFsdWUgPT0gbnVsbFxyXG4gICAgICAgICAgICAgICAgICAgID8gdmFsdWVcclxuICAgICAgICAgICAgICAgICAgICA6ICcnICsgdmFsdWU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIG5vcm1hbGl6ZWRRdWVyeTtcclxufVxuXG4vKipcclxuICogQ3JlYXRlIGEgbGlzdCBvZiBjYWxsYmFja3MgdGhhdCBjYW4gYmUgcmVzZXQuIFVzZWQgdG8gY3JlYXRlIGJlZm9yZSBhbmQgYWZ0ZXIgbmF2aWdhdGlvbiBndWFyZHMgbGlzdFxyXG4gKi9cclxuZnVuY3Rpb24gdXNlQ2FsbGJhY2tzKCkge1xyXG4gICAgbGV0IGhhbmRsZXJzID0gW107XHJcbiAgICBmdW5jdGlvbiBhZGQoaGFuZGxlcikge1xyXG4gICAgICAgIGhhbmRsZXJzLnB1c2goaGFuZGxlcik7XHJcbiAgICAgICAgcmV0dXJuICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgaSA9IGhhbmRsZXJzLmluZGV4T2YoaGFuZGxlcik7XHJcbiAgICAgICAgICAgIGlmIChpID4gLTEpXHJcbiAgICAgICAgICAgICAgICBoYW5kbGVycy5zcGxpY2UoaSwgMSk7XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIHJlc2V0KCkge1xyXG4gICAgICAgIGhhbmRsZXJzID0gW107XHJcbiAgICB9XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIGFkZCxcclxuICAgICAgICBsaXN0OiAoKSA9PiBoYW5kbGVycyxcclxuICAgICAgICByZXNldCxcclxuICAgIH07XHJcbn1cblxuZnVuY3Rpb24gcmVnaXN0ZXJHdWFyZChyZWNvcmQsIG5hbWUsIGd1YXJkKSB7XHJcbiAgICBjb25zdCByZW1vdmVGcm9tTGlzdCA9ICgpID0+IHtcclxuICAgICAgICByZWNvcmRbbmFtZV0uZGVsZXRlKGd1YXJkKTtcclxuICAgIH07XHJcbiAgICBvblVubW91bnRlZChyZW1vdmVGcm9tTGlzdCk7XHJcbiAgICBvbkRlYWN0aXZhdGVkKHJlbW92ZUZyb21MaXN0KTtcclxuICAgIG9uQWN0aXZhdGVkKCgpID0+IHtcclxuICAgICAgICByZWNvcmRbbmFtZV0uYWRkKGd1YXJkKTtcclxuICAgIH0pO1xyXG4gICAgcmVjb3JkW25hbWVdLmFkZChndWFyZCk7XHJcbn1cclxuLyoqXHJcbiAqIEFkZCBhIG5hdmlnYXRpb24gZ3VhcmQgdGhhdCB0cmlnZ2VycyB3aGVuZXZlciB0aGUgY29tcG9uZW50IGZvciB0aGUgY3VycmVudFxyXG4gKiBsb2NhdGlvbiBpcyBhYm91dCB0byBiZSBsZWZ0LiBTaW1pbGFyIHRvIHtAbGluayBiZWZvcmVSb3V0ZUxlYXZlfSBidXQgY2FuIGJlXHJcbiAqIHVzZWQgaW4gYW55IGNvbXBvbmVudC4gVGhlIGd1YXJkIGlzIHJlbW92ZWQgd2hlbiB0aGUgY29tcG9uZW50IGlzIHVubW91bnRlZC5cclxuICpcclxuICogQHBhcmFtIGxlYXZlR3VhcmQgLSB7QGxpbmsgTmF2aWdhdGlvbkd1YXJkfVxyXG4gKi9cclxuZnVuY3Rpb24gb25CZWZvcmVSb3V0ZUxlYXZlKGxlYXZlR3VhcmQpIHtcclxuICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgIWdldEN1cnJlbnRJbnN0YW5jZSgpKSB7XHJcbiAgICAgICAgd2FybignZ2V0Q3VycmVudEluc3RhbmNlKCkgcmV0dXJuZWQgbnVsbC4gb25CZWZvcmVSb3V0ZUxlYXZlKCkgbXVzdCBiZSBjYWxsZWQgYXQgdGhlIHRvcCBvZiBhIHNldHVwIGZ1bmN0aW9uJyk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgY29uc3QgYWN0aXZlUmVjb3JkID0gaW5qZWN0KG1hdGNoZWRSb3V0ZUtleSwgXHJcbiAgICAvLyB0byBhdm9pZCB3YXJuaW5nXHJcbiAgICB7fSkudmFsdWU7XHJcbiAgICBpZiAoIWFjdGl2ZVJlY29yZCkge1xyXG4gICAgICAgIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJlxyXG4gICAgICAgICAgICB3YXJuKCdObyBhY3RpdmUgcm91dGUgcmVjb3JkIHdhcyBmb3VuZCB3aGVuIGNhbGxpbmcgYG9uQmVmb3JlUm91dGVMZWF2ZSgpYC4gTWFrZSBzdXJlIHlvdSBjYWxsIHRoaXMgZnVuY3Rpb24gaW5zaWRlIG9mIGEgY29tcG9uZW50IGNoaWxkIG9mIDxyb3V0ZXItdmlldz4uIE1heWJlIHlvdSBjYWxsZWQgaXQgaW5zaWRlIG9mIEFwcC52dWU/Jyk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgcmVnaXN0ZXJHdWFyZChhY3RpdmVSZWNvcmQsICdsZWF2ZUd1YXJkcycsIGxlYXZlR3VhcmQpO1xyXG59XHJcbi8qKlxyXG4gKiBBZGQgYSBuYXZpZ2F0aW9uIGd1YXJkIHRoYXQgdHJpZ2dlcnMgd2hlbmV2ZXIgdGhlIGN1cnJlbnQgbG9jYXRpb24gaXMgYWJvdXRcclxuICogdG8gYmUgdXBkYXRlZC4gU2ltaWxhciB0byB7QGxpbmsgYmVmb3JlUm91dGVVcGRhdGV9IGJ1dCBjYW4gYmUgdXNlZCBpbiBhbnlcclxuICogY29tcG9uZW50LiBUaGUgZ3VhcmQgaXMgcmVtb3ZlZCB3aGVuIHRoZSBjb21wb25lbnQgaXMgdW5tb3VudGVkLlxyXG4gKlxyXG4gKiBAcGFyYW0gdXBkYXRlR3VhcmQgLSB7QGxpbmsgTmF2aWdhdGlvbkd1YXJkfVxyXG4gKi9cclxuZnVuY3Rpb24gb25CZWZvcmVSb3V0ZVVwZGF0ZSh1cGRhdGVHdWFyZCkge1xyXG4gICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiAhZ2V0Q3VycmVudEluc3RhbmNlKCkpIHtcclxuICAgICAgICB3YXJuKCdnZXRDdXJyZW50SW5zdGFuY2UoKSByZXR1cm5lZCBudWxsLiBvbkJlZm9yZVJvdXRlVXBkYXRlKCkgbXVzdCBiZSBjYWxsZWQgYXQgdGhlIHRvcCBvZiBhIHNldHVwIGZ1bmN0aW9uJyk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgY29uc3QgYWN0aXZlUmVjb3JkID0gaW5qZWN0KG1hdGNoZWRSb3V0ZUtleSwgXHJcbiAgICAvLyB0byBhdm9pZCB3YXJuaW5nXHJcbiAgICB7fSkudmFsdWU7XHJcbiAgICBpZiAoIWFjdGl2ZVJlY29yZCkge1xyXG4gICAgICAgIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJlxyXG4gICAgICAgICAgICB3YXJuKCdObyBhY3RpdmUgcm91dGUgcmVjb3JkIHdhcyBmb3VuZCB3aGVuIGNhbGxpbmcgYG9uQmVmb3JlUm91dGVVcGRhdGUoKWAuIE1ha2Ugc3VyZSB5b3UgY2FsbCB0aGlzIGZ1bmN0aW9uIGluc2lkZSBvZiBhIGNvbXBvbmVudCBjaGlsZCBvZiA8cm91dGVyLXZpZXc+LiBNYXliZSB5b3UgY2FsbGVkIGl0IGluc2lkZSBvZiBBcHAudnVlPycpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIHJlZ2lzdGVyR3VhcmQoYWN0aXZlUmVjb3JkLCAndXBkYXRlR3VhcmRzJywgdXBkYXRlR3VhcmQpO1xyXG59XHJcbmZ1bmN0aW9uIGd1YXJkVG9Qcm9taXNlRm4oZ3VhcmQsIHRvLCBmcm9tLCByZWNvcmQsIG5hbWUpIHtcclxuICAgIC8vIGtlZXAgYSByZWZlcmVuY2UgdG8gdGhlIGVudGVyQ2FsbGJhY2tBcnJheSB0byBwcmV2ZW50IHB1c2hpbmcgY2FsbGJhY2tzIGlmIGEgbmV3IG5hdmlnYXRpb24gdG9vayBwbGFjZVxyXG4gICAgY29uc3QgZW50ZXJDYWxsYmFja0FycmF5ID0gcmVjb3JkICYmXHJcbiAgICAgICAgLy8gbmFtZSBpcyBkZWZpbmVkIGlmIHJlY29yZCBpcyBiZWNhdXNlIG9mIHRoZSBmdW5jdGlvbiBvdmVybG9hZFxyXG4gICAgICAgIChyZWNvcmQuZW50ZXJDYWxsYmFja3NbbmFtZV0gPSByZWNvcmQuZW50ZXJDYWxsYmFja3NbbmFtZV0gfHwgW10pO1xyXG4gICAgcmV0dXJuICgpID0+IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICBjb25zdCBuZXh0ID0gKHZhbGlkKSA9PiB7XHJcbiAgICAgICAgICAgIGlmICh2YWxpZCA9PT0gZmFsc2UpXHJcbiAgICAgICAgICAgICAgICByZWplY3QoY3JlYXRlUm91dGVyRXJyb3IoNCAvKiBOQVZJR0FUSU9OX0FCT1JURUQgKi8sIHtcclxuICAgICAgICAgICAgICAgICAgICBmcm9tLFxyXG4gICAgICAgICAgICAgICAgICAgIHRvLFxyXG4gICAgICAgICAgICAgICAgfSkpO1xyXG4gICAgICAgICAgICBlbHNlIGlmICh2YWxpZCBpbnN0YW5jZW9mIEVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICByZWplY3QodmFsaWQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKGlzUm91dGVMb2NhdGlvbih2YWxpZCkpIHtcclxuICAgICAgICAgICAgICAgIHJlamVjdChjcmVhdGVSb3V0ZXJFcnJvcigyIC8qIE5BVklHQVRJT05fR1VBUkRfUkVESVJFQ1QgKi8sIHtcclxuICAgICAgICAgICAgICAgICAgICBmcm9tOiB0byxcclxuICAgICAgICAgICAgICAgICAgICB0bzogdmFsaWQsXHJcbiAgICAgICAgICAgICAgICB9KSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZW50ZXJDYWxsYmFja0FycmF5ICYmXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gc2luY2UgZW50ZXJDYWxsYmFja0FycmF5IGlzIHRydXRoeSwgYm90aCByZWNvcmQgYW5kIG5hbWUgYWxzbyBhcmVcclxuICAgICAgICAgICAgICAgICAgICByZWNvcmQuZW50ZXJDYWxsYmFja3NbbmFtZV0gPT09IGVudGVyQ2FsbGJhY2tBcnJheSAmJlxyXG4gICAgICAgICAgICAgICAgICAgIHR5cGVvZiB2YWxpZCA9PT0gJ2Z1bmN0aW9uJylcclxuICAgICAgICAgICAgICAgICAgICBlbnRlckNhbGxiYWNrQXJyYXkucHVzaCh2YWxpZCk7XHJcbiAgICAgICAgICAgICAgICByZXNvbHZlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIC8vIHdyYXBwaW5nIHdpdGggUHJvbWlzZS5yZXNvbHZlIGFsbG93cyBpdCB0byB3b3JrIHdpdGggYm90aCBhc3luYyBhbmQgc3luYyBndWFyZHNcclxuICAgICAgICBjb25zdCBndWFyZFJldHVybiA9IGd1YXJkLmNhbGwocmVjb3JkICYmIHJlY29yZC5pbnN0YW5jZXNbbmFtZV0sIHRvLCBmcm9tLCAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgPyBjYW5Pbmx5QmVDYWxsZWRPbmNlKG5leHQsIHRvLCBmcm9tKSA6IG5leHQpO1xyXG4gICAgICAgIGxldCBndWFyZENhbGwgPSBQcm9taXNlLnJlc29sdmUoZ3VhcmRSZXR1cm4pO1xyXG4gICAgICAgIGlmIChndWFyZC5sZW5ndGggPCAzKVxyXG4gICAgICAgICAgICBndWFyZENhbGwgPSBndWFyZENhbGwudGhlbihuZXh0KTtcclxuICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmIGd1YXJkLmxlbmd0aCA+IDIpIHtcclxuICAgICAgICAgICAgY29uc3QgbWVzc2FnZSA9IGBUaGUgXCJuZXh0XCIgY2FsbGJhY2sgd2FzIG5ldmVyIGNhbGxlZCBpbnNpZGUgb2YgJHtndWFyZC5uYW1lID8gJ1wiJyArIGd1YXJkLm5hbWUgKyAnXCInIDogJyd9OlxcbiR7Z3VhcmQudG9TdHJpbmcoKX1cXG4uIElmIHlvdSBhcmUgcmV0dXJuaW5nIGEgdmFsdWUgaW5zdGVhZCBvZiBjYWxsaW5nIFwibmV4dFwiLCBtYWtlIHN1cmUgdG8gcmVtb3ZlIHRoZSBcIm5leHRcIiBwYXJhbWV0ZXIgZnJvbSB5b3VyIGZ1bmN0aW9uLmA7XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgZ3VhcmRSZXR1cm4gPT09ICdvYmplY3QnICYmICd0aGVuJyBpbiBndWFyZFJldHVybikge1xyXG4gICAgICAgICAgICAgICAgZ3VhcmRDYWxsID0gZ3VhcmRDYWxsLnRoZW4ocmVzb2x2ZWRWYWx1ZSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvcjogX2NhbGxlZCBpcyBhZGRlZCBhdCBjYW5Pbmx5QmVDYWxsZWRPbmNlXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFuZXh0Ll9jYWxsZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgd2FybihtZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBFcnJvcignSW52YWxpZCBuYXZpZ2F0aW9uIGd1YXJkJykpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZWRWYWx1ZTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgLy8gVE9ETzogdGVzdCBtZSFcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChndWFyZFJldHVybiAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yOiBfY2FsbGVkIGlzIGFkZGVkIGF0IGNhbk9ubHlCZUNhbGxlZE9uY2VcclxuICAgICAgICAgICAgICAgIGlmICghbmV4dC5fY2FsbGVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgd2FybihtZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgICAgICByZWplY3QobmV3IEVycm9yKCdJbnZhbGlkIG5hdmlnYXRpb24gZ3VhcmQnKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGd1YXJkQ2FsbC5jYXRjaChlcnIgPT4gcmVqZWN0KGVycikpO1xyXG4gICAgfSk7XHJcbn1cclxuZnVuY3Rpb24gY2FuT25seUJlQ2FsbGVkT25jZShuZXh0LCB0bywgZnJvbSkge1xyXG4gICAgbGV0IGNhbGxlZCA9IDA7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmIChjYWxsZWQrKyA9PT0gMSlcclxuICAgICAgICAgICAgd2FybihgVGhlIFwibmV4dFwiIGNhbGxiYWNrIHdhcyBjYWxsZWQgbW9yZSB0aGFuIG9uY2UgaW4gb25lIG5hdmlnYXRpb24gZ3VhcmQgd2hlbiBnb2luZyBmcm9tIFwiJHtmcm9tLmZ1bGxQYXRofVwiIHRvIFwiJHt0by5mdWxsUGF0aH1cIi4gSXQgc2hvdWxkIGJlIGNhbGxlZCBleGFjdGx5IG9uZSB0aW1lIGluIGVhY2ggbmF2aWdhdGlvbiBndWFyZC4gVGhpcyB3aWxsIGZhaWwgaW4gcHJvZHVjdGlvbi5gKTtcclxuICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yOiB3ZSBwdXQgaXQgaW4gdGhlIG9yaWdpbmFsIG9uZSBiZWNhdXNlIGl0J3MgZWFzaWVyIHRvIGNoZWNrXHJcbiAgICAgICAgbmV4dC5fY2FsbGVkID0gdHJ1ZTtcclxuICAgICAgICBpZiAoY2FsbGVkID09PSAxKVxyXG4gICAgICAgICAgICBuZXh0LmFwcGx5KG51bGwsIGFyZ3VtZW50cyk7XHJcbiAgICB9O1xyXG59XHJcbmZ1bmN0aW9uIGV4dHJhY3RDb21wb25lbnRzR3VhcmRzKG1hdGNoZWQsIGd1YXJkVHlwZSwgdG8sIGZyb20pIHtcclxuICAgIGNvbnN0IGd1YXJkcyA9IFtdO1xyXG4gICAgZm9yIChjb25zdCByZWNvcmQgb2YgbWF0Y2hlZCkge1xyXG4gICAgICAgIGZvciAoY29uc3QgbmFtZSBpbiByZWNvcmQuY29tcG9uZW50cykge1xyXG4gICAgICAgICAgICBsZXQgcmF3Q29tcG9uZW50ID0gcmVjb3JkLmNvbXBvbmVudHNbbmFtZV07XHJcbiAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcclxuICAgICAgICAgICAgICAgIGlmICghcmF3Q29tcG9uZW50IHx8XHJcbiAgICAgICAgICAgICAgICAgICAgKHR5cGVvZiByYXdDb21wb25lbnQgIT09ICdvYmplY3QnICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGVvZiByYXdDb21wb25lbnQgIT09ICdmdW5jdGlvbicpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgd2FybihgQ29tcG9uZW50IFwiJHtuYW1lfVwiIGluIHJlY29yZCB3aXRoIHBhdGggXCIke3JlY29yZC5wYXRofVwiIGlzIG5vdGAgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBgIGEgdmFsaWQgY29tcG9uZW50LiBSZWNlaXZlZCBcIiR7U3RyaW5nKHJhd0NvbXBvbmVudCl9XCIuYCk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gdGhyb3cgdG8gZW5zdXJlIHdlIHN0b3AgaGVyZSBidXQgd2FybiB0byBlbnN1cmUgdGhlIG1lc3NhZ2UgaXNuJ3RcclxuICAgICAgICAgICAgICAgICAgICAvLyBtaXNzZWQgYnkgdGhlIHVzZXJcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgcm91dGUgY29tcG9uZW50Jyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmICgndGhlbicgaW4gcmF3Q29tcG9uZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gd2FybiBpZiB1c2VyIHdyb3RlIGltcG9ydCgnL2NvbXBvbmVudC52dWUnKSBpbnN0ZWFkIG9mICgpID0+XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gaW1wb3J0KCcuL2NvbXBvbmVudC52dWUnKVxyXG4gICAgICAgICAgICAgICAgICAgIHdhcm4oYENvbXBvbmVudCBcIiR7bmFtZX1cIiBpbiByZWNvcmQgd2l0aCBwYXRoIFwiJHtyZWNvcmQucGF0aH1cIiBpcyBhIGAgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBgUHJvbWlzZSBpbnN0ZWFkIG9mIGEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIGEgUHJvbWlzZS4gRGlkIHlvdSBgICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYHdyaXRlIFwiaW1wb3J0KCcuL015UGFnZS52dWUnKVwiIGluc3RlYWQgb2YgYCArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGBcIigpID0+IGltcG9ydCgnLi9NeVBhZ2UudnVlJylcIiA/IFRoaXMgd2lsbCBicmVhayBpbiBgICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYHByb2R1Y3Rpb24gaWYgbm90IGZpeGVkLmApO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHByb21pc2UgPSByYXdDb21wb25lbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgcmF3Q29tcG9uZW50ID0gKCkgPT4gcHJvbWlzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHJhd0NvbXBvbmVudC5fX2FzeW5jTG9hZGVyICYmXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gd2FybiBvbmx5IG9uY2UgcGVyIGNvbXBvbmVudFxyXG4gICAgICAgICAgICAgICAgICAgICFyYXdDb21wb25lbnQuX193YXJuZWREZWZpbmVBc3luYykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJhd0NvbXBvbmVudC5fX3dhcm5lZERlZmluZUFzeW5jID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB3YXJuKGBDb21wb25lbnQgXCIke25hbWV9XCIgaW4gcmVjb3JkIHdpdGggcGF0aCBcIiR7cmVjb3JkLnBhdGh9XCIgaXMgZGVmaW5lZCBgICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYHVzaW5nIFwiZGVmaW5lQXN5bmNDb21wb25lbnQoKVwiLiBgICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYFdyaXRlIFwiKCkgPT4gaW1wb3J0KCcuL015UGFnZS52dWUnKVwiIGluc3RlYWQgb2YgYCArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGBcImRlZmluZUFzeW5jQ29tcG9uZW50KCgpID0+IGltcG9ydCgnLi9NeVBhZ2UudnVlJykpXCIuYCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gc2tpcCB1cGRhdGUgYW5kIGxlYXZlIGd1YXJkcyBpZiB0aGUgcm91dGUgY29tcG9uZW50IGlzIG5vdCBtb3VudGVkXHJcbiAgICAgICAgICAgIGlmIChndWFyZFR5cGUgIT09ICdiZWZvcmVSb3V0ZUVudGVyJyAmJiAhcmVjb3JkLmluc3RhbmNlc1tuYW1lXSlcclxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICBpZiAoaXNSb3V0ZUNvbXBvbmVudChyYXdDb21wb25lbnQpKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBfX3ZjY09wdHMgaXMgYWRkZWQgYnkgdnVlLWNsYXNzLWNvbXBvbmVudCBhbmQgY29udGFpbiB0aGUgcmVndWxhciBvcHRpb25zXHJcbiAgICAgICAgICAgICAgICBjb25zdCBvcHRpb25zID0gcmF3Q29tcG9uZW50Ll9fdmNjT3B0cyB8fCByYXdDb21wb25lbnQ7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBndWFyZCA9IG9wdGlvbnNbZ3VhcmRUeXBlXTtcclxuICAgICAgICAgICAgICAgIGd1YXJkICYmIGd1YXJkcy5wdXNoKGd1YXJkVG9Qcm9taXNlRm4oZ3VhcmQsIHRvLCBmcm9tLCByZWNvcmQsIG5hbWUpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vIHN0YXJ0IHJlcXVlc3RpbmcgdGhlIGNodW5rIGFscmVhZHlcclxuICAgICAgICAgICAgICAgIGxldCBjb21wb25lbnRQcm9taXNlID0gcmF3Q29tcG9uZW50KCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmICEoJ2NhdGNoJyBpbiBjb21wb25lbnRQcm9taXNlKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHdhcm4oYENvbXBvbmVudCBcIiR7bmFtZX1cIiBpbiByZWNvcmQgd2l0aCBwYXRoIFwiJHtyZWNvcmQucGF0aH1cIiBpcyBhIGZ1bmN0aW9uIHRoYXQgZG9lcyBub3QgcmV0dXJuIGEgUHJvbWlzZS4gSWYgeW91IHdlcmUgcGFzc2luZyBhIGZ1bmN0aW9uYWwgY29tcG9uZW50LCBtYWtlIHN1cmUgdG8gYWRkIGEgXCJkaXNwbGF5TmFtZVwiIHRvIHRoZSBjb21wb25lbnQuIFRoaXMgd2lsbCBicmVhayBpbiBwcm9kdWN0aW9uIGlmIG5vdCBmaXhlZC5gKTtcclxuICAgICAgICAgICAgICAgICAgICBjb21wb25lbnRQcm9taXNlID0gUHJvbWlzZS5yZXNvbHZlKGNvbXBvbmVudFByb21pc2UpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZ3VhcmRzLnB1c2goKCkgPT4gY29tcG9uZW50UHJvbWlzZS50aGVuKHJlc29sdmVkID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIXJlc29sdmVkKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKGBDb3VsZG4ndCByZXNvbHZlIGNvbXBvbmVudCBcIiR7bmFtZX1cIiBhdCBcIiR7cmVjb3JkLnBhdGh9XCJgKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzb2x2ZWRDb21wb25lbnQgPSBpc0VTTW9kdWxlKHJlc29sdmVkKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA/IHJlc29sdmVkLmRlZmF1bHRcclxuICAgICAgICAgICAgICAgICAgICAgICAgOiByZXNvbHZlZDtcclxuICAgICAgICAgICAgICAgICAgICAvLyByZXBsYWNlIHRoZSBmdW5jdGlvbiB3aXRoIHRoZSByZXNvbHZlZCBjb21wb25lbnRcclxuICAgICAgICAgICAgICAgICAgICByZWNvcmQuY29tcG9uZW50c1tuYW1lXSA9IHJlc29sdmVkQ29tcG9uZW50O1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIF9fdmNjT3B0cyBpcyBhZGRlZCBieSB2dWUtY2xhc3MtY29tcG9uZW50IGFuZCBjb250YWluIHRoZSByZWd1bGFyIG9wdGlvbnNcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBvcHRpb25zID0gcmVzb2x2ZWRDb21wb25lbnQuX192Y2NPcHRzIHx8IHJlc29sdmVkQ29tcG9uZW50O1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGd1YXJkID0gb3B0aW9uc1tndWFyZFR5cGVdO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBndWFyZCAmJiBndWFyZFRvUHJvbWlzZUZuKGd1YXJkLCB0bywgZnJvbSwgcmVjb3JkLCBuYW1lKSgpO1xyXG4gICAgICAgICAgICAgICAgfSkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGd1YXJkcztcclxufVxyXG4vKipcclxuICogQWxsb3dzIGRpZmZlcmVudGlhdGluZyBsYXp5IGNvbXBvbmVudHMgZnJvbSBmdW5jdGlvbmFsIGNvbXBvbmVudHMgYW5kIHZ1ZS1jbGFzcy1jb21wb25lbnRcclxuICpcclxuICogQHBhcmFtIGNvbXBvbmVudFxyXG4gKi9cclxuZnVuY3Rpb24gaXNSb3V0ZUNvbXBvbmVudChjb21wb25lbnQpIHtcclxuICAgIHJldHVybiAodHlwZW9mIGNvbXBvbmVudCA9PT0gJ29iamVjdCcgfHxcclxuICAgICAgICAnZGlzcGxheU5hbWUnIGluIGNvbXBvbmVudCB8fFxyXG4gICAgICAgICdwcm9wcycgaW4gY29tcG9uZW50IHx8XHJcbiAgICAgICAgJ19fdmNjT3B0cycgaW4gY29tcG9uZW50KTtcclxufVxuXG4vLyBUT0RPOiB3ZSBjb3VsZCBhbGxvdyBjdXJyZW50Um91dGUgYXMgYSBwcm9wIHRvIGV4cG9zZSBgaXNBY3RpdmVgIGFuZFxyXG4vLyBgaXNFeGFjdEFjdGl2ZWAgYmVoYXZpb3Igc2hvdWxkIGdvIHRocm91Z2ggYW4gUkZDXHJcbmZ1bmN0aW9uIHVzZUxpbmsocHJvcHMpIHtcclxuICAgIGNvbnN0IHJvdXRlciA9IGluamVjdChyb3V0ZXJLZXkpO1xyXG4gICAgY29uc3QgY3VycmVudFJvdXRlID0gaW5qZWN0KHJvdXRlTG9jYXRpb25LZXkpO1xyXG4gICAgY29uc3Qgcm91dGUgPSBjb21wdXRlZCgoKSA9PiByb3V0ZXIucmVzb2x2ZSh1bnJlZihwcm9wcy50bykpKTtcclxuICAgIGNvbnN0IGFjdGl2ZVJlY29yZEluZGV4ID0gY29tcHV0ZWQoKCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IHsgbWF0Y2hlZCB9ID0gcm91dGUudmFsdWU7XHJcbiAgICAgICAgY29uc3QgeyBsZW5ndGggfSA9IG1hdGNoZWQ7XHJcbiAgICAgICAgY29uc3Qgcm91dGVNYXRjaGVkID0gbWF0Y2hlZFtsZW5ndGggLSAxXTtcclxuICAgICAgICBjb25zdCBjdXJyZW50TWF0Y2hlZCA9IGN1cnJlbnRSb3V0ZS5tYXRjaGVkO1xyXG4gICAgICAgIGlmICghcm91dGVNYXRjaGVkIHx8ICFjdXJyZW50TWF0Y2hlZC5sZW5ndGgpXHJcbiAgICAgICAgICAgIHJldHVybiAtMTtcclxuICAgICAgICBjb25zdCBpbmRleCA9IGN1cnJlbnRNYXRjaGVkLmZpbmRJbmRleChpc1NhbWVSb3V0ZVJlY29yZC5iaW5kKG51bGwsIHJvdXRlTWF0Y2hlZCkpO1xyXG4gICAgICAgIGlmIChpbmRleCA+IC0xKVxyXG4gICAgICAgICAgICByZXR1cm4gaW5kZXg7XHJcbiAgICAgICAgLy8gcG9zc2libGUgcGFyZW50IHJlY29yZFxyXG4gICAgICAgIGNvbnN0IHBhcmVudFJlY29yZFBhdGggPSBnZXRPcmlnaW5hbFBhdGgobWF0Y2hlZFtsZW5ndGggLSAyXSk7XHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAvLyB3ZSBhcmUgZGVhbGluZyB3aXRoIG5lc3RlZCByb3V0ZXNcclxuICAgICAgICBsZW5ndGggPiAxICYmXHJcbiAgICAgICAgICAgIC8vIGlmIHRoZSBwYXJlbnQgYW5kIG1hdGNoZWQgcm91dGUgaGF2ZSB0aGUgc2FtZSBwYXRoLCB0aGlzIGxpbmsgaXNcclxuICAgICAgICAgICAgLy8gcmVmZXJyaW5nIHRvIHRoZSBlbXB0eSBjaGlsZC4gT3Igd2UgY3VycmVudGx5IGFyZSBvbiBhIGRpZmZlcmVudFxyXG4gICAgICAgICAgICAvLyBjaGlsZCBvZiB0aGUgc2FtZSBwYXJlbnRcclxuICAgICAgICAgICAgZ2V0T3JpZ2luYWxQYXRoKHJvdXRlTWF0Y2hlZCkgPT09IHBhcmVudFJlY29yZFBhdGggJiZcclxuICAgICAgICAgICAgLy8gYXZvaWQgY29tcGFyaW5nIHRoZSBjaGlsZCB3aXRoIGl0cyBwYXJlbnRcclxuICAgICAgICAgICAgY3VycmVudE1hdGNoZWRbY3VycmVudE1hdGNoZWQubGVuZ3RoIC0gMV0ucGF0aCAhPT0gcGFyZW50UmVjb3JkUGF0aFxyXG4gICAgICAgICAgICA/IGN1cnJlbnRNYXRjaGVkLmZpbmRJbmRleChpc1NhbWVSb3V0ZVJlY29yZC5iaW5kKG51bGwsIG1hdGNoZWRbbGVuZ3RoIC0gMl0pKVxyXG4gICAgICAgICAgICA6IGluZGV4KTtcclxuICAgIH0pO1xyXG4gICAgY29uc3QgaXNBY3RpdmUgPSBjb21wdXRlZCgoKSA9PiBhY3RpdmVSZWNvcmRJbmRleC52YWx1ZSA+IC0xICYmXHJcbiAgICAgICAgaW5jbHVkZXNQYXJhbXMoY3VycmVudFJvdXRlLnBhcmFtcywgcm91dGUudmFsdWUucGFyYW1zKSk7XHJcbiAgICBjb25zdCBpc0V4YWN0QWN0aXZlID0gY29tcHV0ZWQoKCkgPT4gYWN0aXZlUmVjb3JkSW5kZXgudmFsdWUgPiAtMSAmJlxyXG4gICAgICAgIGFjdGl2ZVJlY29yZEluZGV4LnZhbHVlID09PSBjdXJyZW50Um91dGUubWF0Y2hlZC5sZW5ndGggLSAxICYmXHJcbiAgICAgICAgaXNTYW1lUm91dGVMb2NhdGlvblBhcmFtcyhjdXJyZW50Um91dGUucGFyYW1zLCByb3V0ZS52YWx1ZS5wYXJhbXMpKTtcclxuICAgIGZ1bmN0aW9uIG5hdmlnYXRlKGUgPSB7fSkge1xyXG4gICAgICAgIGlmIChndWFyZEV2ZW50KGUpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiByb3V0ZXJbdW5yZWYocHJvcHMucmVwbGFjZSkgPyAncmVwbGFjZScgOiAncHVzaCddKHVucmVmKHByb3BzLnRvKVxyXG4gICAgICAgICAgICAvLyBhdm9pZCB1bmNhdWdodCBlcnJvcnMgYXJlIHRoZXkgYXJlIGxvZ2dlZCBhbnl3YXlcclxuICAgICAgICAgICAgKS5jYXRjaChub29wKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xyXG4gICAgfVxyXG4gICAgLy8gZGV2dG9vbHMgb25seVxyXG4gICAgaWYgKCgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgfHwgX19WVUVfUFJPRF9ERVZUT09MU19fKSAmJiBpc0Jyb3dzZXIpIHtcclxuICAgICAgICBjb25zdCBpbnN0YW5jZSA9IGdldEN1cnJlbnRJbnN0YW5jZSgpO1xyXG4gICAgICAgIGlmIChpbnN0YW5jZSkge1xyXG4gICAgICAgICAgICBjb25zdCBsaW5rQ29udGV4dERldnRvb2xzID0ge1xyXG4gICAgICAgICAgICAgICAgcm91dGU6IHJvdXRlLnZhbHVlLFxyXG4gICAgICAgICAgICAgICAgaXNBY3RpdmU6IGlzQWN0aXZlLnZhbHVlLFxyXG4gICAgICAgICAgICAgICAgaXNFeGFjdEFjdGl2ZTogaXNFeGFjdEFjdGl2ZS52YWx1ZSxcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvcjogdGhpcyBpcyBpbnRlcm5hbFxyXG4gICAgICAgICAgICBpbnN0YW5jZS5fX3ZybF9kZXZ0b29scyA9IGluc3RhbmNlLl9fdnJsX2RldnRvb2xzIHx8IFtdO1xyXG4gICAgICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yOiB0aGlzIGlzIGludGVybmFsXHJcbiAgICAgICAgICAgIGluc3RhbmNlLl9fdnJsX2RldnRvb2xzLnB1c2gobGlua0NvbnRleHREZXZ0b29scyk7XHJcbiAgICAgICAgICAgIHdhdGNoRWZmZWN0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgIGxpbmtDb250ZXh0RGV2dG9vbHMucm91dGUgPSByb3V0ZS52YWx1ZTtcclxuICAgICAgICAgICAgICAgIGxpbmtDb250ZXh0RGV2dG9vbHMuaXNBY3RpdmUgPSBpc0FjdGl2ZS52YWx1ZTtcclxuICAgICAgICAgICAgICAgIGxpbmtDb250ZXh0RGV2dG9vbHMuaXNFeGFjdEFjdGl2ZSA9IGlzRXhhY3RBY3RpdmUudmFsdWU7XHJcbiAgICAgICAgICAgIH0sIHsgZmx1c2g6ICdwb3N0JyB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIHJvdXRlLFxyXG4gICAgICAgIGhyZWY6IGNvbXB1dGVkKCgpID0+IHJvdXRlLnZhbHVlLmhyZWYpLFxyXG4gICAgICAgIGlzQWN0aXZlLFxyXG4gICAgICAgIGlzRXhhY3RBY3RpdmUsXHJcbiAgICAgICAgbmF2aWdhdGUsXHJcbiAgICB9O1xyXG59XHJcbmNvbnN0IFJvdXRlckxpbmtJbXBsID0gLyojX19QVVJFX18qLyBkZWZpbmVDb21wb25lbnQoe1xyXG4gICAgbmFtZTogJ1JvdXRlckxpbmsnLFxyXG4gICAgcHJvcHM6IHtcclxuICAgICAgICB0bzoge1xyXG4gICAgICAgICAgICB0eXBlOiBbU3RyaW5nLCBPYmplY3RdLFxyXG4gICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcclxuICAgICAgICB9LFxyXG4gICAgICAgIHJlcGxhY2U6IEJvb2xlYW4sXHJcbiAgICAgICAgYWN0aXZlQ2xhc3M6IFN0cmluZyxcclxuICAgICAgICAvLyBpbmFjdGl2ZUNsYXNzOiBTdHJpbmcsXHJcbiAgICAgICAgZXhhY3RBY3RpdmVDbGFzczogU3RyaW5nLFxyXG4gICAgICAgIGN1c3RvbTogQm9vbGVhbixcclxuICAgICAgICBhcmlhQ3VycmVudFZhbHVlOiB7XHJcbiAgICAgICAgICAgIHR5cGU6IFN0cmluZyxcclxuICAgICAgICAgICAgZGVmYXVsdDogJ3BhZ2UnLFxyXG4gICAgICAgIH0sXHJcbiAgICB9LFxyXG4gICAgdXNlTGluayxcclxuICAgIHNldHVwKHByb3BzLCB7IHNsb3RzIH0pIHtcclxuICAgICAgICBjb25zdCBsaW5rID0gcmVhY3RpdmUodXNlTGluayhwcm9wcykpO1xyXG4gICAgICAgIGNvbnN0IHsgb3B0aW9ucyB9ID0gaW5qZWN0KHJvdXRlcktleSk7XHJcbiAgICAgICAgY29uc3QgZWxDbGFzcyA9IGNvbXB1dGVkKCgpID0+ICh7XHJcbiAgICAgICAgICAgIFtnZXRMaW5rQ2xhc3MocHJvcHMuYWN0aXZlQ2xhc3MsIG9wdGlvbnMubGlua0FjdGl2ZUNsYXNzLCAncm91dGVyLWxpbmstYWN0aXZlJyldOiBsaW5rLmlzQWN0aXZlLFxyXG4gICAgICAgICAgICAvLyBbZ2V0TGlua0NsYXNzKFxyXG4gICAgICAgICAgICAvLyAgIHByb3BzLmluYWN0aXZlQ2xhc3MsXHJcbiAgICAgICAgICAgIC8vICAgb3B0aW9ucy5saW5rSW5hY3RpdmVDbGFzcyxcclxuICAgICAgICAgICAgLy8gICAncm91dGVyLWxpbmstaW5hY3RpdmUnXHJcbiAgICAgICAgICAgIC8vICldOiAhbGluay5pc0V4YWN0QWN0aXZlLFxyXG4gICAgICAgICAgICBbZ2V0TGlua0NsYXNzKHByb3BzLmV4YWN0QWN0aXZlQ2xhc3MsIG9wdGlvbnMubGlua0V4YWN0QWN0aXZlQ2xhc3MsICdyb3V0ZXItbGluay1leGFjdC1hY3RpdmUnKV06IGxpbmsuaXNFeGFjdEFjdGl2ZSxcclxuICAgICAgICB9KSk7XHJcbiAgICAgICAgcmV0dXJuICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgY2hpbGRyZW4gPSBzbG90cy5kZWZhdWx0ICYmIHNsb3RzLmRlZmF1bHQobGluayk7XHJcbiAgICAgICAgICAgIHJldHVybiBwcm9wcy5jdXN0b21cclxuICAgICAgICAgICAgICAgID8gY2hpbGRyZW5cclxuICAgICAgICAgICAgICAgIDogaCgnYScsIHtcclxuICAgICAgICAgICAgICAgICAgICAnYXJpYS1jdXJyZW50JzogbGluay5pc0V4YWN0QWN0aXZlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgID8gcHJvcHMuYXJpYUN1cnJlbnRWYWx1ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA6IG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgaHJlZjogbGluay5ocmVmLFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIHRoaXMgd291bGQgb3ZlcnJpZGUgdXNlciBhZGRlZCBhdHRycyBidXQgVnVlIHdpbGwgc3RpbGwgYWRkXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gdGhlIGxpc3RlbmVyIHNvIHdlIGVuZCB1cCB0cmlnZ2VyaW5nIGJvdGhcclxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrOiBsaW5rLm5hdmlnYXRlLFxyXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzOiBlbENsYXNzLnZhbHVlLFxyXG4gICAgICAgICAgICAgICAgfSwgY2hpbGRyZW4pO1xyXG4gICAgICAgIH07XHJcbiAgICB9LFxyXG59KTtcclxuLy8gZXhwb3J0IHRoZSBwdWJsaWMgdHlwZSBmb3IgaC90c3ggaW5mZXJlbmNlXHJcbi8vIGFsc28gdG8gYXZvaWQgaW5saW5lIGltcG9ydCgpIGluIGdlbmVyYXRlZCBkLnRzIGZpbGVzXHJcbi8qKlxyXG4gKiBDb21wb25lbnQgdG8gcmVuZGVyIGEgbGluayB0aGF0IHRyaWdnZXJzIGEgbmF2aWdhdGlvbiBvbiBjbGljay5cclxuICovXHJcbmNvbnN0IFJvdXRlckxpbmsgPSBSb3V0ZXJMaW5rSW1wbDtcclxuZnVuY3Rpb24gZ3VhcmRFdmVudChlKSB7XHJcbiAgICAvLyBkb24ndCByZWRpcmVjdCB3aXRoIGNvbnRyb2wga2V5c1xyXG4gICAgaWYgKGUubWV0YUtleSB8fCBlLmFsdEtleSB8fCBlLmN0cmxLZXkgfHwgZS5zaGlmdEtleSlcclxuICAgICAgICByZXR1cm47XHJcbiAgICAvLyBkb24ndCByZWRpcmVjdCB3aGVuIHByZXZlbnREZWZhdWx0IGNhbGxlZFxyXG4gICAgaWYgKGUuZGVmYXVsdFByZXZlbnRlZClcclxuICAgICAgICByZXR1cm47XHJcbiAgICAvLyBkb24ndCByZWRpcmVjdCBvbiByaWdodCBjbGlja1xyXG4gICAgaWYgKGUuYnV0dG9uICE9PSB1bmRlZmluZWQgJiYgZS5idXR0b24gIT09IDApXHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgLy8gZG9uJ3QgcmVkaXJlY3QgaWYgYHRhcmdldD1cIl9ibGFua1wiYFxyXG4gICAgLy8gQHRzLWV4cGVjdC1lcnJvciBnZXRBdHRyaWJ1dGUgZG9lcyBleGlzdFxyXG4gICAgaWYgKGUuY3VycmVudFRhcmdldCAmJiBlLmN1cnJlbnRUYXJnZXQuZ2V0QXR0cmlidXRlKSB7XHJcbiAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciBnZXRBdHRyaWJ1dGUgZXhpc3RzXHJcbiAgICAgICAgY29uc3QgdGFyZ2V0ID0gZS5jdXJyZW50VGFyZ2V0LmdldEF0dHJpYnV0ZSgndGFyZ2V0Jyk7XHJcbiAgICAgICAgaWYgKC9cXGJfYmxhbmtcXGIvaS50ZXN0KHRhcmdldCkpXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIC8vIHRoaXMgbWF5IGJlIGEgV2VleCBldmVudCB3aGljaCBkb2Vzbid0IGhhdmUgdGhpcyBtZXRob2RcclxuICAgIGlmIChlLnByZXZlbnREZWZhdWx0KVxyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgIHJldHVybiB0cnVlO1xyXG59XHJcbmZ1bmN0aW9uIGluY2x1ZGVzUGFyYW1zKG91dGVyLCBpbm5lcikge1xyXG4gICAgZm9yIChjb25zdCBrZXkgaW4gaW5uZXIpIHtcclxuICAgICAgICBjb25zdCBpbm5lclZhbHVlID0gaW5uZXJba2V5XTtcclxuICAgICAgICBjb25zdCBvdXRlclZhbHVlID0gb3V0ZXJba2V5XTtcclxuICAgICAgICBpZiAodHlwZW9mIGlubmVyVmFsdWUgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgIGlmIChpbm5lclZhbHVlICE9PSBvdXRlclZhbHVlKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KG91dGVyVmFsdWUpIHx8XHJcbiAgICAgICAgICAgICAgICBvdXRlclZhbHVlLmxlbmd0aCAhPT0gaW5uZXJWYWx1ZS5sZW5ndGggfHxcclxuICAgICAgICAgICAgICAgIGlubmVyVmFsdWUuc29tZSgodmFsdWUsIGkpID0+IHZhbHVlICE9PSBvdXRlclZhbHVlW2ldKSlcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdHJ1ZTtcclxufVxyXG4vKipcclxuICogR2V0IHRoZSBvcmlnaW5hbCBwYXRoIHZhbHVlIG9mIGEgcmVjb3JkIGJ5IGZvbGxvd2luZyBpdHMgYWxpYXNPZlxyXG4gKiBAcGFyYW0gcmVjb3JkXHJcbiAqL1xyXG5mdW5jdGlvbiBnZXRPcmlnaW5hbFBhdGgocmVjb3JkKSB7XHJcbiAgICByZXR1cm4gcmVjb3JkID8gKHJlY29yZC5hbGlhc09mID8gcmVjb3JkLmFsaWFzT2YucGF0aCA6IHJlY29yZC5wYXRoKSA6ICcnO1xyXG59XHJcbi8qKlxyXG4gKiBVdGlsaXR5IGNsYXNzIHRvIGdldCB0aGUgYWN0aXZlIGNsYXNzIGJhc2VkIG9uIGRlZmF1bHRzLlxyXG4gKiBAcGFyYW0gcHJvcENsYXNzXHJcbiAqIEBwYXJhbSBnbG9iYWxDbGFzc1xyXG4gKiBAcGFyYW0gZGVmYXVsdENsYXNzXHJcbiAqL1xyXG5jb25zdCBnZXRMaW5rQ2xhc3MgPSAocHJvcENsYXNzLCBnbG9iYWxDbGFzcywgZGVmYXVsdENsYXNzKSA9PiBwcm9wQ2xhc3MgIT0gbnVsbFxyXG4gICAgPyBwcm9wQ2xhc3NcclxuICAgIDogZ2xvYmFsQ2xhc3MgIT0gbnVsbFxyXG4gICAgICAgID8gZ2xvYmFsQ2xhc3NcclxuICAgICAgICA6IGRlZmF1bHRDbGFzcztcblxuY29uc3QgUm91dGVyVmlld0ltcGwgPSAvKiNfX1BVUkVfXyovIGRlZmluZUNvbXBvbmVudCh7XHJcbiAgICBuYW1lOiAnUm91dGVyVmlldycsXHJcbiAgICAvLyAjNjc0IHdlIG1hbnVhbGx5IGluaGVyaXQgdGhlbVxyXG4gICAgaW5oZXJpdEF0dHJzOiBmYWxzZSxcclxuICAgIHByb3BzOiB7XHJcbiAgICAgICAgbmFtZToge1xyXG4gICAgICAgICAgICB0eXBlOiBTdHJpbmcsXHJcbiAgICAgICAgICAgIGRlZmF1bHQ6ICdkZWZhdWx0JyxcclxuICAgICAgICB9LFxyXG4gICAgICAgIHJvdXRlOiBPYmplY3QsXHJcbiAgICB9LFxyXG4gICAgc2V0dXAocHJvcHMsIHsgYXR0cnMsIHNsb3RzIH0pIHtcclxuICAgICAgICAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgd2FybkRlcHJlY2F0ZWRVc2FnZSgpO1xyXG4gICAgICAgIGNvbnN0IGluamVjdGVkUm91dGUgPSBpbmplY3Qocm91dGVyVmlld0xvY2F0aW9uS2V5KTtcclxuICAgICAgICBjb25zdCByb3V0ZVRvRGlzcGxheSA9IGNvbXB1dGVkKCgpID0+IHByb3BzLnJvdXRlIHx8IGluamVjdGVkUm91dGUudmFsdWUpO1xyXG4gICAgICAgIGNvbnN0IGRlcHRoID0gaW5qZWN0KHZpZXdEZXB0aEtleSwgMCk7XHJcbiAgICAgICAgY29uc3QgbWF0Y2hlZFJvdXRlUmVmID0gY29tcHV0ZWQoKCkgPT4gcm91dGVUb0Rpc3BsYXkudmFsdWUubWF0Y2hlZFtkZXB0aF0pO1xyXG4gICAgICAgIHByb3ZpZGUodmlld0RlcHRoS2V5LCBkZXB0aCArIDEpO1xyXG4gICAgICAgIHByb3ZpZGUobWF0Y2hlZFJvdXRlS2V5LCBtYXRjaGVkUm91dGVSZWYpO1xyXG4gICAgICAgIHByb3ZpZGUocm91dGVyVmlld0xvY2F0aW9uS2V5LCByb3V0ZVRvRGlzcGxheSk7XHJcbiAgICAgICAgY29uc3Qgdmlld1JlZiA9IHJlZigpO1xyXG4gICAgICAgIC8vIHdhdGNoIGF0IHRoZSBzYW1lIHRpbWUgdGhlIGNvbXBvbmVudCBpbnN0YW5jZSwgdGhlIHJvdXRlIHJlY29yZCB3ZSBhcmVcclxuICAgICAgICAvLyByZW5kZXJpbmcsIGFuZCB0aGUgbmFtZVxyXG4gICAgICAgIHdhdGNoKCgpID0+IFt2aWV3UmVmLnZhbHVlLCBtYXRjaGVkUm91dGVSZWYudmFsdWUsIHByb3BzLm5hbWVdLCAoW2luc3RhbmNlLCB0bywgbmFtZV0sIFtvbGRJbnN0YW5jZSwgZnJvbSwgb2xkTmFtZV0pID0+IHtcclxuICAgICAgICAgICAgLy8gY29weSByZXVzZWQgaW5zdGFuY2VzXHJcbiAgICAgICAgICAgIGlmICh0bykge1xyXG4gICAgICAgICAgICAgICAgLy8gdGhpcyB3aWxsIHVwZGF0ZSB0aGUgaW5zdGFuY2UgZm9yIG5ldyBpbnN0YW5jZXMgYXMgd2VsbCBhcyByZXVzZWRcclxuICAgICAgICAgICAgICAgIC8vIGluc3RhbmNlcyB3aGVuIG5hdmlnYXRpbmcgdG8gYSBuZXcgcm91dGVcclxuICAgICAgICAgICAgICAgIHRvLmluc3RhbmNlc1tuYW1lXSA9IGluc3RhbmNlO1xyXG4gICAgICAgICAgICAgICAgLy8gdGhlIGNvbXBvbmVudCBpbnN0YW5jZSBpcyByZXVzZWQgZm9yIGEgZGlmZmVyZW50IHJvdXRlIG9yIG5hbWUgc29cclxuICAgICAgICAgICAgICAgIC8vIHdlIGNvcHkgYW55IHNhdmVkIHVwZGF0ZSBvciBsZWF2ZSBndWFyZHMuIFdpdGggYXN5bmMgc2V0dXAsIHRoZVxyXG4gICAgICAgICAgICAgICAgLy8gbW91bnRpbmcgY29tcG9uZW50IHdpbGwgbW91bnQgYmVmb3JlIHRoZSBtYXRjaGVkUm91dGUgY2hhbmdlcyxcclxuICAgICAgICAgICAgICAgIC8vIG1ha2luZyBpbnN0YW5jZSA9PT0gb2xkSW5zdGFuY2UsIHNvIHdlIGNoZWNrIGlmIGd1YXJkcyBoYXZlIGJlZW5cclxuICAgICAgICAgICAgICAgIC8vIGFkZGVkIGJlZm9yZS4gVGhpcyB3b3JrcyBiZWNhdXNlIHdlIHJlbW92ZSBndWFyZHMgd2hlblxyXG4gICAgICAgICAgICAgICAgLy8gdW5tb3VudGluZy9kZWFjdGl2YXRpbmcgY29tcG9uZW50c1xyXG4gICAgICAgICAgICAgICAgaWYgKGZyb20gJiYgZnJvbSAhPT0gdG8gJiYgaW5zdGFuY2UgJiYgaW5zdGFuY2UgPT09IG9sZEluc3RhbmNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0by5sZWF2ZUd1YXJkcy5zaXplKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvLmxlYXZlR3VhcmRzID0gZnJvbS5sZWF2ZUd1YXJkcztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0by51cGRhdGVHdWFyZHMuc2l6ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0by51cGRhdGVHdWFyZHMgPSBmcm9tLnVwZGF0ZUd1YXJkcztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gdHJpZ2dlciBiZWZvcmVSb3V0ZUVudGVyIG5leHQgY2FsbGJhY2tzXHJcbiAgICAgICAgICAgIGlmIChpbnN0YW5jZSAmJlxyXG4gICAgICAgICAgICAgICAgdG8gJiZcclxuICAgICAgICAgICAgICAgIC8vIGlmIHRoZXJlIGlzIG5vIGluc3RhbmNlIGJ1dCB0byBhbmQgZnJvbSBhcmUgdGhlIHNhbWUgdGhpcyBtaWdodCBiZVxyXG4gICAgICAgICAgICAgICAgLy8gdGhlIGZpcnN0IHZpc2l0XHJcbiAgICAgICAgICAgICAgICAoIWZyb20gfHwgIWlzU2FtZVJvdXRlUmVjb3JkKHRvLCBmcm9tKSB8fCAhb2xkSW5zdGFuY2UpKSB7XHJcbiAgICAgICAgICAgICAgICAodG8uZW50ZXJDYWxsYmFja3NbbmFtZV0gfHwgW10pLmZvckVhY2goY2FsbGJhY2sgPT4gY2FsbGJhY2soaW5zdGFuY2UpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sIHsgZmx1c2g6ICdwb3N0JyB9KTtcclxuICAgICAgICByZXR1cm4gKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCByb3V0ZSA9IHJvdXRlVG9EaXNwbGF5LnZhbHVlO1xyXG4gICAgICAgICAgICBjb25zdCBtYXRjaGVkUm91dGUgPSBtYXRjaGVkUm91dGVSZWYudmFsdWU7XHJcbiAgICAgICAgICAgIGNvbnN0IFZpZXdDb21wb25lbnQgPSBtYXRjaGVkUm91dGUgJiYgbWF0Y2hlZFJvdXRlLmNvbXBvbmVudHNbcHJvcHMubmFtZV07XHJcbiAgICAgICAgICAgIC8vIHdlIG5lZWQgdGhlIHZhbHVlIGF0IHRoZSB0aW1lIHdlIHJlbmRlciBiZWNhdXNlIHdoZW4gd2UgdW5tb3VudCwgd2VcclxuICAgICAgICAgICAgLy8gbmF2aWdhdGVkIHRvIGEgZGlmZmVyZW50IGxvY2F0aW9uIHNvIHRoZSB2YWx1ZSBpcyBkaWZmZXJlbnRcclxuICAgICAgICAgICAgY29uc3QgY3VycmVudE5hbWUgPSBwcm9wcy5uYW1lO1xyXG4gICAgICAgICAgICBpZiAoIVZpZXdDb21wb25lbnQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBub3JtYWxpemVTbG90KHNsb3RzLmRlZmF1bHQsIHsgQ29tcG9uZW50OiBWaWV3Q29tcG9uZW50LCByb3V0ZSB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBwcm9wcyBmcm9tIHJvdXRlIGNvbmZpZ3VyYXRpb25cclxuICAgICAgICAgICAgY29uc3Qgcm91dGVQcm9wc09wdGlvbiA9IG1hdGNoZWRSb3V0ZS5wcm9wc1twcm9wcy5uYW1lXTtcclxuICAgICAgICAgICAgY29uc3Qgcm91dGVQcm9wcyA9IHJvdXRlUHJvcHNPcHRpb25cclxuICAgICAgICAgICAgICAgID8gcm91dGVQcm9wc09wdGlvbiA9PT0gdHJ1ZVxyXG4gICAgICAgICAgICAgICAgICAgID8gcm91dGUucGFyYW1zXHJcbiAgICAgICAgICAgICAgICAgICAgOiB0eXBlb2Ygcm91dGVQcm9wc09wdGlvbiA9PT0gJ2Z1bmN0aW9uJ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICA/IHJvdXRlUHJvcHNPcHRpb24ocm91dGUpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDogcm91dGVQcm9wc09wdGlvblxyXG4gICAgICAgICAgICAgICAgOiBudWxsO1xyXG4gICAgICAgICAgICBjb25zdCBvblZub2RlVW5tb3VudGVkID0gdm5vZGUgPT4ge1xyXG4gICAgICAgICAgICAgICAgLy8gcmVtb3ZlIHRoZSBpbnN0YW5jZSByZWZlcmVuY2UgdG8gcHJldmVudCBsZWFrXHJcbiAgICAgICAgICAgICAgICBpZiAodm5vZGUuY29tcG9uZW50LmlzVW5tb3VudGVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWF0Y2hlZFJvdXRlLmluc3RhbmNlc1tjdXJyZW50TmFtZV0gPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBjb25zdCBjb21wb25lbnQgPSBoKFZpZXdDb21wb25lbnQsIGFzc2lnbih7fSwgcm91dGVQcm9wcywgYXR0cnMsIHtcclxuICAgICAgICAgICAgICAgIG9uVm5vZGVVbm1vdW50ZWQsXHJcbiAgICAgICAgICAgICAgICByZWY6IHZpZXdSZWYsXHJcbiAgICAgICAgICAgIH0pKTtcclxuICAgICAgICAgICAgaWYgKCgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgfHwgX19WVUVfUFJPRF9ERVZUT09MU19fKSAmJlxyXG4gICAgICAgICAgICAgICAgaXNCcm93c2VyICYmXHJcbiAgICAgICAgICAgICAgICBjb21wb25lbnQucmVmKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBUT0RPOiBjYW4gZGlzcGxheSBpZiBpdCdzIGFuIGFsaWFzLCBpdHMgcHJvcHNcclxuICAgICAgICAgICAgICAgIGNvbnN0IGluZm8gPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVwdGgsXHJcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogbWF0Y2hlZFJvdXRlLm5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgcGF0aDogbWF0Y2hlZFJvdXRlLnBhdGgsXHJcbiAgICAgICAgICAgICAgICAgICAgbWV0YTogbWF0Y2hlZFJvdXRlLm1ldGEsXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaW50ZXJuYWxJbnN0YW5jZXMgPSBBcnJheS5pc0FycmF5KGNvbXBvbmVudC5yZWYpXHJcbiAgICAgICAgICAgICAgICAgICAgPyBjb21wb25lbnQucmVmLm1hcChyID0+IHIuaSlcclxuICAgICAgICAgICAgICAgICAgICA6IFtjb21wb25lbnQucmVmLmldO1xyXG4gICAgICAgICAgICAgICAgaW50ZXJuYWxJbnN0YW5jZXMuZm9yRWFjaChpbnN0YW5jZSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvclxyXG4gICAgICAgICAgICAgICAgICAgIGluc3RhbmNlLl9fdnJ2X2RldnRvb2xzID0gaW5mbztcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIC8vIHBhc3MgdGhlIHZub2RlIHRvIHRoZSBzbG90IGFzIGEgcHJvcC5cclxuICAgICAgICAgICAgLy8gaCBhbmQgPGNvbXBvbmVudCA6aXM9XCIuLi5cIj4gYm90aCBhY2NlcHQgdm5vZGVzXHJcbiAgICAgICAgICAgIG5vcm1hbGl6ZVNsb3Qoc2xvdHMuZGVmYXVsdCwgeyBDb21wb25lbnQ6IGNvbXBvbmVudCwgcm91dGUgfSkgfHxcclxuICAgICAgICAgICAgICAgIGNvbXBvbmVudCk7XHJcbiAgICAgICAgfTtcclxuICAgIH0sXHJcbn0pO1xyXG5mdW5jdGlvbiBub3JtYWxpemVTbG90KHNsb3QsIGRhdGEpIHtcclxuICAgIGlmICghc2xvdClcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIGNvbnN0IHNsb3RDb250ZW50ID0gc2xvdChkYXRhKTtcclxuICAgIHJldHVybiBzbG90Q29udGVudC5sZW5ndGggPT09IDEgPyBzbG90Q29udGVudFswXSA6IHNsb3RDb250ZW50O1xyXG59XHJcbi8vIGV4cG9ydCB0aGUgcHVibGljIHR5cGUgZm9yIGgvdHN4IGluZmVyZW5jZVxyXG4vLyBhbHNvIHRvIGF2b2lkIGlubGluZSBpbXBvcnQoKSBpbiBnZW5lcmF0ZWQgZC50cyBmaWxlc1xyXG4vKipcclxuICogQ29tcG9uZW50IHRvIGRpc3BsYXkgdGhlIGN1cnJlbnQgcm91dGUgdGhlIHVzZXIgaXMgYXQuXHJcbiAqL1xyXG5jb25zdCBSb3V0ZXJWaWV3ID0gUm91dGVyVmlld0ltcGw7XHJcbi8vIHdhcm4gYWdhaW5zdCBkZXByZWNhdGVkIHVzYWdlIHdpdGggPHRyYW5zaXRpb24+ICYgPGtlZXAtYWxpdmU+XHJcbi8vIGR1ZSB0byBmdW5jdGlvbmFsIGNvbXBvbmVudCBiZWluZyBubyBsb25nZXIgZWFnZXIgaW4gVnVlIDNcclxuZnVuY3Rpb24gd2FybkRlcHJlY2F0ZWRVc2FnZSgpIHtcclxuICAgIGNvbnN0IGluc3RhbmNlID0gZ2V0Q3VycmVudEluc3RhbmNlKCk7XHJcbiAgICBjb25zdCBwYXJlbnROYW1lID0gaW5zdGFuY2UucGFyZW50ICYmIGluc3RhbmNlLnBhcmVudC50eXBlLm5hbWU7XHJcbiAgICBpZiAocGFyZW50TmFtZSAmJlxyXG4gICAgICAgIChwYXJlbnROYW1lID09PSAnS2VlcEFsaXZlJyB8fCBwYXJlbnROYW1lLmluY2x1ZGVzKCdUcmFuc2l0aW9uJykpKSB7XHJcbiAgICAgICAgY29uc3QgY29tcCA9IHBhcmVudE5hbWUgPT09ICdLZWVwQWxpdmUnID8gJ2tlZXAtYWxpdmUnIDogJ3RyYW5zaXRpb24nO1xyXG4gICAgICAgIHdhcm4oYDxyb3V0ZXItdmlldz4gY2FuIG5vIGxvbmdlciBiZSB1c2VkIGRpcmVjdGx5IGluc2lkZSA8dHJhbnNpdGlvbj4gb3IgPGtlZXAtYWxpdmU+LlxcbmAgK1xyXG4gICAgICAgICAgICBgVXNlIHNsb3QgcHJvcHMgaW5zdGVhZDpcXG5cXG5gICtcclxuICAgICAgICAgICAgYDxyb3V0ZXItdmlldyB2LXNsb3Q9XCJ7IENvbXBvbmVudCB9XCI+XFxuYCArXHJcbiAgICAgICAgICAgIGAgIDwke2NvbXB9PlxcbmAgK1xyXG4gICAgICAgICAgICBgICAgIDxjb21wb25lbnQgOmlzPVwiQ29tcG9uZW50XCIgLz5cXG5gICtcclxuICAgICAgICAgICAgYCAgPC8ke2NvbXB9PlxcbmAgK1xyXG4gICAgICAgICAgICBgPC9yb3V0ZXItdmlldz5gKTtcclxuICAgIH1cclxufVxuXG5mdW5jdGlvbiBmb3JtYXRSb3V0ZUxvY2F0aW9uKHJvdXRlTG9jYXRpb24sIHRvb2x0aXApIHtcclxuICAgIGNvbnN0IGNvcHkgPSBhc3NpZ24oe30sIHJvdXRlTG9jYXRpb24sIHtcclxuICAgICAgICAvLyByZW1vdmUgdmFyaWFibGVzIHRoYXQgY2FuIGNvbnRhaW4gdnVlIGluc3RhbmNlc1xyXG4gICAgICAgIG1hdGNoZWQ6IHJvdXRlTG9jYXRpb24ubWF0Y2hlZC5tYXAobWF0Y2hlZCA9PiBvbWl0KG1hdGNoZWQsIFsnaW5zdGFuY2VzJywgJ2NoaWxkcmVuJywgJ2FsaWFzT2YnXSkpLFxyXG4gICAgfSk7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIF9jdXN0b206IHtcclxuICAgICAgICAgICAgdHlwZTogbnVsbCxcclxuICAgICAgICAgICAgcmVhZE9ubHk6IHRydWUsXHJcbiAgICAgICAgICAgIGRpc3BsYXk6IHJvdXRlTG9jYXRpb24uZnVsbFBhdGgsXHJcbiAgICAgICAgICAgIHRvb2x0aXAsXHJcbiAgICAgICAgICAgIHZhbHVlOiBjb3B5LFxyXG4gICAgICAgIH0sXHJcbiAgICB9O1xyXG59XHJcbmZ1bmN0aW9uIGZvcm1hdERpc3BsYXkoZGlzcGxheSkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBfY3VzdG9tOiB7XHJcbiAgICAgICAgICAgIGRpc3BsYXksXHJcbiAgICAgICAgfSxcclxuICAgIH07XHJcbn1cclxuLy8gdG8gc3VwcG9ydCBtdWx0aXBsZSByb3V0ZXIgaW5zdGFuY2VzXHJcbmxldCByb3V0ZXJJZCA9IDA7XHJcbmZ1bmN0aW9uIGFkZERldnRvb2xzKGFwcCwgcm91dGVyLCBtYXRjaGVyKSB7XHJcbiAgICAvLyBUYWtlIG92ZXIgcm91dGVyLmJlZm9yZUVhY2ggYW5kIGFmdGVyRWFjaFxyXG4gICAgLy8gbWFrZSBzdXJlIHdlIGFyZSBub3QgcmVnaXN0ZXJpbmcgdGhlIGRldnRvb2wgdHdpY2VcclxuICAgIGlmIChyb3V0ZXIuX19oYXNEZXZ0b29scylcclxuICAgICAgICByZXR1cm47XHJcbiAgICByb3V0ZXIuX19oYXNEZXZ0b29scyA9IHRydWU7XHJcbiAgICAvLyBpbmNyZW1lbnQgdG8gc3VwcG9ydCBtdWx0aXBsZSByb3V0ZXIgaW5zdGFuY2VzXHJcbiAgICBjb25zdCBpZCA9IHJvdXRlcklkKys7XHJcbiAgICBzZXR1cERldnRvb2xzUGx1Z2luKHtcclxuICAgICAgICBpZDogJ29yZy52dWVqcy5yb3V0ZXInICsgKGlkID8gJy4nICsgaWQgOiAnJyksXHJcbiAgICAgICAgbGFiZWw6ICdWdWUgUm91dGVyJyxcclxuICAgICAgICBwYWNrYWdlTmFtZTogJ3Z1ZS1yb3V0ZXInLFxyXG4gICAgICAgIGhvbWVwYWdlOiAnaHR0cHM6Ly9yb3V0ZXIudnVlanMub3JnJyxcclxuICAgICAgICBsb2dvOiAnaHR0cHM6Ly9yb3V0ZXIudnVlanMub3JnL2xvZ28ucG5nJyxcclxuICAgICAgICBjb21wb25lbnRTdGF0ZVR5cGVzOiBbJ1JvdXRpbmcnXSxcclxuICAgICAgICBhcHAsXHJcbiAgICB9LCBhcGkgPT4ge1xyXG4gICAgICAgIC8vIGRpc3BsYXkgc3RhdGUgYWRkZWQgYnkgdGhlIHJvdXRlclxyXG4gICAgICAgIGFwaS5vbi5pbnNwZWN0Q29tcG9uZW50KChwYXlsb2FkLCBjdHgpID0+IHtcclxuICAgICAgICAgICAgaWYgKHBheWxvYWQuaW5zdGFuY2VEYXRhKSB7XHJcbiAgICAgICAgICAgICAgICBwYXlsb2FkLmluc3RhbmNlRGF0YS5zdGF0ZS5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnUm91dGluZycsXHJcbiAgICAgICAgICAgICAgICAgICAga2V5OiAnJHJvdXRlJyxcclxuICAgICAgICAgICAgICAgICAgICBlZGl0YWJsZTogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGZvcm1hdFJvdXRlTG9jYXRpb24ocm91dGVyLmN1cnJlbnRSb3V0ZS52YWx1ZSwgJ0N1cnJlbnQgUm91dGUnKSxcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy8gbWFyayByb3V0ZXItbGluayBhcyBhY3RpdmUgYW5kIGRpc3BsYXkgdGFncyBvbiByb3V0ZXIgdmlld3NcclxuICAgICAgICBhcGkub24udmlzaXRDb21wb25lbnRUcmVlKCh7IHRyZWVOb2RlOiBub2RlLCBjb21wb25lbnRJbnN0YW5jZSB9KSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChjb21wb25lbnRJbnN0YW5jZS5fX3Zydl9kZXZ0b29scykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaW5mbyA9IGNvbXBvbmVudEluc3RhbmNlLl9fdnJ2X2RldnRvb2xzO1xyXG4gICAgICAgICAgICAgICAgbm9kZS50YWdzLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgIGxhYmVsOiAoaW5mby5uYW1lID8gYCR7aW5mby5uYW1lLnRvU3RyaW5nKCl9OiBgIDogJycpICsgaW5mby5wYXRoLFxyXG4gICAgICAgICAgICAgICAgICAgIHRleHRDb2xvcjogMCxcclxuICAgICAgICAgICAgICAgICAgICB0b29sdGlwOiAnVGhpcyBjb21wb25lbnQgaXMgcmVuZGVyZWQgYnkgJmx0O3JvdXRlci12aWV3Jmd0OycsXHJcbiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiBQSU5LXzUwMCxcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIGlmIG11bHRpcGxlIHVzZUxpbmsgYXJlIHVzZWRcclxuICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoY29tcG9uZW50SW5zdGFuY2UuX192cmxfZGV2dG9vbHMpKSB7XHJcbiAgICAgICAgICAgICAgICBjb21wb25lbnRJbnN0YW5jZS5fX2RldnRvb2xzQXBpID0gYXBpO1xyXG4gICAgICAgICAgICAgICAgY29tcG9uZW50SW5zdGFuY2UuX192cmxfZGV2dG9vbHMuZm9yRWFjaChkZXZ0b29sc0RhdGEgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBiYWNrZ3JvdW5kQ29sb3IgPSBPUkFOR0VfNDAwO1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCB0b29sdGlwID0gJyc7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRldnRvb2xzRGF0YS5pc0V4YWN0QWN0aXZlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvciA9IExJTUVfNTAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0b29sdGlwID0gJ1RoaXMgaXMgZXhhY3RseSBhY3RpdmUnO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChkZXZ0b29sc0RhdGEuaXNBY3RpdmUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yID0gQkxVRV82MDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvb2x0aXAgPSAnVGhpcyBsaW5rIGlzIGFjdGl2ZSc7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIG5vZGUudGFncy5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6IGRldnRvb2xzRGF0YS5yb3V0ZS5wYXRoLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXh0Q29sb3I6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvb2x0aXAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcixcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgd2F0Y2gocm91dGVyLmN1cnJlbnRSb3V0ZSwgKCkgPT4ge1xyXG4gICAgICAgICAgICAvLyByZWZyZXNoIGFjdGl2ZSBzdGF0ZVxyXG4gICAgICAgICAgICByZWZyZXNoUm91dGVzVmlldygpO1xyXG4gICAgICAgICAgICBhcGkubm90aWZ5Q29tcG9uZW50VXBkYXRlKCk7XHJcbiAgICAgICAgICAgIGFwaS5zZW5kSW5zcGVjdG9yVHJlZShyb3V0ZXJJbnNwZWN0b3JJZCk7XHJcbiAgICAgICAgICAgIGFwaS5zZW5kSW5zcGVjdG9yU3RhdGUocm91dGVySW5zcGVjdG9ySWQpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGNvbnN0IG5hdmlnYXRpb25zTGF5ZXJJZCA9ICdyb3V0ZXI6bmF2aWdhdGlvbnM6JyArIGlkO1xyXG4gICAgICAgIGFwaS5hZGRUaW1lbGluZUxheWVyKHtcclxuICAgICAgICAgICAgaWQ6IG5hdmlnYXRpb25zTGF5ZXJJZCxcclxuICAgICAgICAgICAgbGFiZWw6IGBSb3V0ZXIke2lkID8gJyAnICsgaWQgOiAnJ30gTmF2aWdhdGlvbnNgLFxyXG4gICAgICAgICAgICBjb2xvcjogMHg0MGE4YzQsXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy8gY29uc3QgZXJyb3JzTGF5ZXJJZCA9ICdyb3V0ZXI6ZXJyb3JzJ1xyXG4gICAgICAgIC8vIGFwaS5hZGRUaW1lbGluZUxheWVyKHtcclxuICAgICAgICAvLyAgIGlkOiBlcnJvcnNMYXllcklkLFxyXG4gICAgICAgIC8vICAgbGFiZWw6ICdSb3V0ZXIgRXJyb3JzJyxcclxuICAgICAgICAvLyAgIGNvbG9yOiAweGVhNTQ1NSxcclxuICAgICAgICAvLyB9KVxyXG4gICAgICAgIHJvdXRlci5vbkVycm9yKChlcnJvciwgdG8pID0+IHtcclxuICAgICAgICAgICAgYXBpLmFkZFRpbWVsaW5lRXZlbnQoe1xyXG4gICAgICAgICAgICAgICAgbGF5ZXJJZDogbmF2aWdhdGlvbnNMYXllcklkLFxyXG4gICAgICAgICAgICAgICAgZXZlbnQ6IHtcclxuICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ0Vycm9yIGR1cmluZyBOYXZpZ2F0aW9uJyxcclxuICAgICAgICAgICAgICAgICAgICBzdWJ0aXRsZTogdG8uZnVsbFBhdGgsXHJcbiAgICAgICAgICAgICAgICAgICAgbG9nVHlwZTogJ2Vycm9yJyxcclxuICAgICAgICAgICAgICAgICAgICB0aW1lOiBhcGkubm93KCksXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogeyBlcnJvciB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGdyb3VwSWQ6IHRvLm1ldGEuX19uYXZpZ2F0aW9uSWQsXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAvLyBhdHRhY2hlZCB0byBgbWV0YWAgYW5kIHVzZWQgdG8gZ3JvdXAgZXZlbnRzXHJcbiAgICAgICAgbGV0IG5hdmlnYXRpb25JZCA9IDA7XHJcbiAgICAgICAgcm91dGVyLmJlZm9yZUVhY2goKHRvLCBmcm9tKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGRhdGEgPSB7XHJcbiAgICAgICAgICAgICAgICBndWFyZDogZm9ybWF0RGlzcGxheSgnYmVmb3JlRWFjaCcpLFxyXG4gICAgICAgICAgICAgICAgZnJvbTogZm9ybWF0Um91dGVMb2NhdGlvbihmcm9tLCAnQ3VycmVudCBMb2NhdGlvbiBkdXJpbmcgdGhpcyBuYXZpZ2F0aW9uJyksXHJcbiAgICAgICAgICAgICAgICB0bzogZm9ybWF0Um91dGVMb2NhdGlvbih0bywgJ1RhcmdldCBsb2NhdGlvbicpLFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAvLyBVc2VkIHRvIGdyb3VwIG5hdmlnYXRpb25zIHRvZ2V0aGVyLCBoaWRlIGZyb20gZGV2dG9vbHNcclxuICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRvLm1ldGEsICdfX25hdmlnYXRpb25JZCcsIHtcclxuICAgICAgICAgICAgICAgIHZhbHVlOiBuYXZpZ2F0aW9uSWQrKyxcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGFwaS5hZGRUaW1lbGluZUV2ZW50KHtcclxuICAgICAgICAgICAgICAgIGxheWVySWQ6IG5hdmlnYXRpb25zTGF5ZXJJZCxcclxuICAgICAgICAgICAgICAgIGV2ZW50OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGltZTogYXBpLm5vdygpLFxyXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiAnU3RhcnQgb2YgbmF2aWdhdGlvbicsXHJcbiAgICAgICAgICAgICAgICAgICAgc3VidGl0bGU6IHRvLmZ1bGxQYXRoLFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGEsXHJcbiAgICAgICAgICAgICAgICAgICAgZ3JvdXBJZDogdG8ubWV0YS5fX25hdmlnYXRpb25JZCxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJvdXRlci5hZnRlckVhY2goKHRvLCBmcm9tLCBmYWlsdXJlKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGRhdGEgPSB7XHJcbiAgICAgICAgICAgICAgICBndWFyZDogZm9ybWF0RGlzcGxheSgnYWZ0ZXJFYWNoJyksXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIGlmIChmYWlsdXJlKSB7XHJcbiAgICAgICAgICAgICAgICBkYXRhLmZhaWx1cmUgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgX2N1c3RvbToge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBFcnJvcixcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVhZE9ubHk6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6IGZhaWx1cmUgPyBmYWlsdXJlLm1lc3NhZ2UgOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdG9vbHRpcDogJ05hdmlnYXRpb24gRmFpbHVyZScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBmYWlsdXJlLFxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgZGF0YS5zdGF0dXMgPSBmb3JtYXREaXNwbGF5KCfinYwnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGRhdGEuc3RhdHVzID0gZm9ybWF0RGlzcGxheSgn4pyFJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gd2Ugc2V0IGhlcmUgdG8gaGF2ZSB0aGUgcmlnaHQgb3JkZXJcclxuICAgICAgICAgICAgZGF0YS5mcm9tID0gZm9ybWF0Um91dGVMb2NhdGlvbihmcm9tLCAnQ3VycmVudCBMb2NhdGlvbiBkdXJpbmcgdGhpcyBuYXZpZ2F0aW9uJyk7XHJcbiAgICAgICAgICAgIGRhdGEudG8gPSBmb3JtYXRSb3V0ZUxvY2F0aW9uKHRvLCAnVGFyZ2V0IGxvY2F0aW9uJyk7XHJcbiAgICAgICAgICAgIGFwaS5hZGRUaW1lbGluZUV2ZW50KHtcclxuICAgICAgICAgICAgICAgIGxheWVySWQ6IG5hdmlnYXRpb25zTGF5ZXJJZCxcclxuICAgICAgICAgICAgICAgIGV2ZW50OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICdFbmQgb2YgbmF2aWdhdGlvbicsXHJcbiAgICAgICAgICAgICAgICAgICAgc3VidGl0bGU6IHRvLmZ1bGxQYXRoLFxyXG4gICAgICAgICAgICAgICAgICAgIHRpbWU6IGFwaS5ub3coKSxcclxuICAgICAgICAgICAgICAgICAgICBkYXRhLFxyXG4gICAgICAgICAgICAgICAgICAgIGxvZ1R5cGU6IGZhaWx1cmUgPyAnd2FybmluZycgOiAnZGVmYXVsdCcsXHJcbiAgICAgICAgICAgICAgICAgICAgZ3JvdXBJZDogdG8ubWV0YS5fX25hdmlnYXRpb25JZCxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEluc3BlY3RvciBvZiBFeGlzdGluZyByb3V0ZXNcclxuICAgICAgICAgKi9cclxuICAgICAgICBjb25zdCByb3V0ZXJJbnNwZWN0b3JJZCA9ICdyb3V0ZXItaW5zcGVjdG9yOicgKyBpZDtcclxuICAgICAgICBhcGkuYWRkSW5zcGVjdG9yKHtcclxuICAgICAgICAgICAgaWQ6IHJvdXRlckluc3BlY3RvcklkLFxyXG4gICAgICAgICAgICBsYWJlbDogJ1JvdXRlcycgKyAoaWQgPyAnICcgKyBpZCA6ICcnKSxcclxuICAgICAgICAgICAgaWNvbjogJ2Jvb2snLFxyXG4gICAgICAgICAgICB0cmVlRmlsdGVyUGxhY2Vob2xkZXI6ICdTZWFyY2ggcm91dGVzJyxcclxuICAgICAgICB9KTtcclxuICAgICAgICBmdW5jdGlvbiByZWZyZXNoUm91dGVzVmlldygpIHtcclxuICAgICAgICAgICAgLy8gdGhlIHJvdXRlcyB2aWV3IGlzbid0IGFjdGl2ZVxyXG4gICAgICAgICAgICBpZiAoIWFjdGl2ZVJvdXRlc1BheWxvYWQpXHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIGNvbnN0IHBheWxvYWQgPSBhY3RpdmVSb3V0ZXNQYXlsb2FkO1xyXG4gICAgICAgICAgICAvLyBjaGlsZHJlbiByb3V0ZXMgd2lsbCBhcHBlYXIgYXMgbmVzdGVkXHJcbiAgICAgICAgICAgIGxldCByb3V0ZXMgPSBtYXRjaGVyLmdldFJvdXRlcygpLmZpbHRlcihyb3V0ZSA9PiAhcm91dGUucGFyZW50KTtcclxuICAgICAgICAgICAgLy8gcmVzZXQgbWF0Y2ggc3RhdGUgdG8gZmFsc2VcclxuICAgICAgICAgICAgcm91dGVzLmZvckVhY2gocmVzZXRNYXRjaFN0YXRlT25Sb3V0ZVJlY29yZCk7XHJcbiAgICAgICAgICAgIC8vIGFwcGx5IGEgbWF0Y2ggc3RhdGUgaWYgdGhlcmUgaXMgYSBwYXlsb2FkXHJcbiAgICAgICAgICAgIGlmIChwYXlsb2FkLmZpbHRlcikge1xyXG4gICAgICAgICAgICAgICAgcm91dGVzID0gcm91dGVzLmZpbHRlcihyb3V0ZSA9PiBcclxuICAgICAgICAgICAgICAgIC8vIHNhdmUgbWF0Y2hlcyBzdGF0ZSBiYXNlZCBvbiB0aGUgcGF5bG9hZFxyXG4gICAgICAgICAgICAgICAgaXNSb3V0ZU1hdGNoaW5nKHJvdXRlLCBwYXlsb2FkLmZpbHRlci50b0xvd2VyQ2FzZSgpKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gbWFyayBhY3RpdmUgcm91dGVzXHJcbiAgICAgICAgICAgIHJvdXRlcy5mb3JFYWNoKHJvdXRlID0+IG1hcmtSb3V0ZVJlY29yZEFjdGl2ZShyb3V0ZSwgcm91dGVyLmN1cnJlbnRSb3V0ZS52YWx1ZSkpO1xyXG4gICAgICAgICAgICBwYXlsb2FkLnJvb3ROb2RlcyA9IHJvdXRlcy5tYXAoZm9ybWF0Um91dGVSZWNvcmRGb3JJbnNwZWN0b3IpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgYWN0aXZlUm91dGVzUGF5bG9hZDtcclxuICAgICAgICBhcGkub24uZ2V0SW5zcGVjdG9yVHJlZShwYXlsb2FkID0+IHtcclxuICAgICAgICAgICAgYWN0aXZlUm91dGVzUGF5bG9hZCA9IHBheWxvYWQ7XHJcbiAgICAgICAgICAgIGlmIChwYXlsb2FkLmFwcCA9PT0gYXBwICYmIHBheWxvYWQuaW5zcGVjdG9ySWQgPT09IHJvdXRlckluc3BlY3RvcklkKSB7XHJcbiAgICAgICAgICAgICAgICByZWZyZXNoUm91dGVzVmlldygpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogRGlzcGxheSBpbmZvcm1hdGlvbiBhYm91dCB0aGUgY3VycmVudGx5IHNlbGVjdGVkIHJvdXRlIHJlY29yZFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGFwaS5vbi5nZXRJbnNwZWN0b3JTdGF0ZShwYXlsb2FkID0+IHtcclxuICAgICAgICAgICAgaWYgKHBheWxvYWQuYXBwID09PSBhcHAgJiYgcGF5bG9hZC5pbnNwZWN0b3JJZCA9PT0gcm91dGVySW5zcGVjdG9ySWQpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHJvdXRlcyA9IG1hdGNoZXIuZ2V0Um91dGVzKCk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCByb3V0ZSA9IHJvdXRlcy5maW5kKHJvdXRlID0+IHJvdXRlLnJlY29yZC5fX3ZkX2lkID09PSBwYXlsb2FkLm5vZGVJZCk7XHJcbiAgICAgICAgICAgICAgICBpZiAocm91dGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBwYXlsb2FkLnN0YXRlID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zOiBmb3JtYXRSb3V0ZVJlY29yZE1hdGNoZXJGb3JTdGF0ZUluc3BlY3Rvcihyb3V0ZSksXHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGFwaS5zZW5kSW5zcGVjdG9yVHJlZShyb3V0ZXJJbnNwZWN0b3JJZCk7XHJcbiAgICAgICAgYXBpLnNlbmRJbnNwZWN0b3JTdGF0ZShyb3V0ZXJJbnNwZWN0b3JJZCk7XHJcbiAgICB9KTtcclxufVxyXG5mdW5jdGlvbiBtb2RpZmllckZvcktleShrZXkpIHtcclxuICAgIGlmIChrZXkub3B0aW9uYWwpIHtcclxuICAgICAgICByZXR1cm4ga2V5LnJlcGVhdGFibGUgPyAnKicgOiAnPyc7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICByZXR1cm4ga2V5LnJlcGVhdGFibGUgPyAnKycgOiAnJztcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBmb3JtYXRSb3V0ZVJlY29yZE1hdGNoZXJGb3JTdGF0ZUluc3BlY3Rvcihyb3V0ZSkge1xyXG4gICAgY29uc3QgeyByZWNvcmQgfSA9IHJvdXRlO1xyXG4gICAgY29uc3QgZmllbGRzID0gW1xyXG4gICAgICAgIHsgZWRpdGFibGU6IGZhbHNlLCBrZXk6ICdwYXRoJywgdmFsdWU6IHJlY29yZC5wYXRoIH0sXHJcbiAgICBdO1xyXG4gICAgaWYgKHJlY29yZC5uYW1lICE9IG51bGwpIHtcclxuICAgICAgICBmaWVsZHMucHVzaCh7XHJcbiAgICAgICAgICAgIGVkaXRhYmxlOiBmYWxzZSxcclxuICAgICAgICAgICAga2V5OiAnbmFtZScsXHJcbiAgICAgICAgICAgIHZhbHVlOiByZWNvcmQubmFtZSxcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIGZpZWxkcy5wdXNoKHsgZWRpdGFibGU6IGZhbHNlLCBrZXk6ICdyZWdleHAnLCB2YWx1ZTogcm91dGUucmUgfSk7XHJcbiAgICBpZiAocm91dGUua2V5cy5sZW5ndGgpIHtcclxuICAgICAgICBmaWVsZHMucHVzaCh7XHJcbiAgICAgICAgICAgIGVkaXRhYmxlOiBmYWxzZSxcclxuICAgICAgICAgICAga2V5OiAna2V5cycsXHJcbiAgICAgICAgICAgIHZhbHVlOiB7XHJcbiAgICAgICAgICAgICAgICBfY3VzdG9tOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICByZWFkT25seTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiByb3V0ZS5rZXlzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoa2V5ID0+IGAke2tleS5uYW1lfSR7bW9kaWZpZXJGb3JLZXkoa2V5KX1gKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuam9pbignICcpLFxyXG4gICAgICAgICAgICAgICAgICAgIHRvb2x0aXA6ICdQYXJhbSBrZXlzJyxcclxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogcm91dGUua2V5cyxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAocmVjb3JkLnJlZGlyZWN0ICE9IG51bGwpIHtcclxuICAgICAgICBmaWVsZHMucHVzaCh7XHJcbiAgICAgICAgICAgIGVkaXRhYmxlOiBmYWxzZSxcclxuICAgICAgICAgICAga2V5OiAncmVkaXJlY3QnLFxyXG4gICAgICAgICAgICB2YWx1ZTogcmVjb3JkLnJlZGlyZWN0LFxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKHJvdXRlLmFsaWFzLmxlbmd0aCkge1xyXG4gICAgICAgIGZpZWxkcy5wdXNoKHtcclxuICAgICAgICAgICAgZWRpdGFibGU6IGZhbHNlLFxyXG4gICAgICAgICAgICBrZXk6ICdhbGlhc2VzJyxcclxuICAgICAgICAgICAgdmFsdWU6IHJvdXRlLmFsaWFzLm1hcChhbGlhcyA9PiBhbGlhcy5yZWNvcmQucGF0aCksXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBmaWVsZHMucHVzaCh7XHJcbiAgICAgICAga2V5OiAnc2NvcmUnLFxyXG4gICAgICAgIGVkaXRhYmxlOiBmYWxzZSxcclxuICAgICAgICB2YWx1ZToge1xyXG4gICAgICAgICAgICBfY3VzdG9tOiB7XHJcbiAgICAgICAgICAgICAgICB0eXBlOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgcmVhZE9ubHk6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBkaXNwbGF5OiByb3V0ZS5zY29yZS5tYXAoc2NvcmUgPT4gc2NvcmUuam9pbignLCAnKSkuam9pbignIHwgJyksXHJcbiAgICAgICAgICAgICAgICB0b29sdGlwOiAnU2NvcmUgdXNlZCB0byBzb3J0IHJvdXRlcycsXHJcbiAgICAgICAgICAgICAgICB2YWx1ZTogcm91dGUuc2NvcmUsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgfSxcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIGZpZWxkcztcclxufVxyXG4vKipcclxuICogRXh0cmFjdGVkIGZyb20gdGFpbHdpbmQgcGFsZXR0ZVxyXG4gKi9cclxuY29uc3QgUElOS181MDAgPSAweGVjNDg5OTtcclxuY29uc3QgQkxVRV82MDAgPSAweDI1NjNlYjtcclxuY29uc3QgTElNRV81MDAgPSAweDg0Y2MxNjtcclxuY29uc3QgQ1lBTl80MDAgPSAweDIyZDNlZTtcclxuY29uc3QgT1JBTkdFXzQwMCA9IDB4ZmI5MjNjO1xyXG4vLyBjb25zdCBHUkFZXzEwMCA9IDB4ZjRmNGY1XHJcbmNvbnN0IERBUksgPSAweDY2NjY2NjtcclxuZnVuY3Rpb24gZm9ybWF0Um91dGVSZWNvcmRGb3JJbnNwZWN0b3Iocm91dGUpIHtcclxuICAgIGNvbnN0IHRhZ3MgPSBbXTtcclxuICAgIGNvbnN0IHsgcmVjb3JkIH0gPSByb3V0ZTtcclxuICAgIGlmIChyZWNvcmQubmFtZSAhPSBudWxsKSB7XHJcbiAgICAgICAgdGFncy5wdXNoKHtcclxuICAgICAgICAgICAgbGFiZWw6IFN0cmluZyhyZWNvcmQubmFtZSksXHJcbiAgICAgICAgICAgIHRleHRDb2xvcjogMCxcclxuICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiBDWUFOXzQwMCxcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIGlmIChyZWNvcmQuYWxpYXNPZikge1xyXG4gICAgICAgIHRhZ3MucHVzaCh7XHJcbiAgICAgICAgICAgIGxhYmVsOiAnYWxpYXMnLFxyXG4gICAgICAgICAgICB0ZXh0Q29sb3I6IDAsXHJcbiAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogT1JBTkdFXzQwMCxcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIGlmIChyb3V0ZS5fX3ZkX21hdGNoKSB7XHJcbiAgICAgICAgdGFncy5wdXNoKHtcclxuICAgICAgICAgICAgbGFiZWw6ICdtYXRjaGVzJyxcclxuICAgICAgICAgICAgdGV4dENvbG9yOiAwLFxyXG4gICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IFBJTktfNTAwLFxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKHJvdXRlLl9fdmRfZXhhY3RBY3RpdmUpIHtcclxuICAgICAgICB0YWdzLnB1c2goe1xyXG4gICAgICAgICAgICBsYWJlbDogJ2V4YWN0JyxcclxuICAgICAgICAgICAgdGV4dENvbG9yOiAwLFxyXG4gICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IExJTUVfNTAwLFxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKHJvdXRlLl9fdmRfYWN0aXZlKSB7XHJcbiAgICAgICAgdGFncy5wdXNoKHtcclxuICAgICAgICAgICAgbGFiZWw6ICdhY3RpdmUnLFxyXG4gICAgICAgICAgICB0ZXh0Q29sb3I6IDAsXHJcbiAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogQkxVRV82MDAsXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAocmVjb3JkLnJlZGlyZWN0KSB7XHJcbiAgICAgICAgdGFncy5wdXNoKHtcclxuICAgICAgICAgICAgbGFiZWw6ICdyZWRpcmVjdDogJyArXHJcbiAgICAgICAgICAgICAgICAodHlwZW9mIHJlY29yZC5yZWRpcmVjdCA9PT0gJ3N0cmluZycgPyByZWNvcmQucmVkaXJlY3QgOiAnT2JqZWN0JyksXHJcbiAgICAgICAgICAgIHRleHRDb2xvcjogMHhmZmZmZmYsXHJcbiAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogREFSSyxcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIC8vIGFkZCBhbiBpZCB0byBiZSBhYmxlIHRvIHNlbGVjdCBpdC4gVXNpbmcgdGhlIGBwYXRoYCBpcyBub3QgcG9zc2libGUgYmVjYXVzZVxyXG4gICAgLy8gZW1wdHkgcGF0aCBjaGlsZHJlbiB3b3VsZCBjb2xsaWRlIHdpdGggdGhlaXIgcGFyZW50c1xyXG4gICAgbGV0IGlkID0gcmVjb3JkLl9fdmRfaWQ7XHJcbiAgICBpZiAoaWQgPT0gbnVsbCkge1xyXG4gICAgICAgIGlkID0gU3RyaW5nKHJvdXRlUmVjb3JkSWQrKyk7XHJcbiAgICAgICAgcmVjb3JkLl9fdmRfaWQgPSBpZDtcclxuICAgIH1cclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgaWQsXHJcbiAgICAgICAgbGFiZWw6IHJlY29yZC5wYXRoLFxyXG4gICAgICAgIHRhZ3MsXHJcbiAgICAgICAgY2hpbGRyZW46IHJvdXRlLmNoaWxkcmVuLm1hcChmb3JtYXRSb3V0ZVJlY29yZEZvckluc3BlY3RvciksXHJcbiAgICB9O1xyXG59XHJcbi8vICBpbmNyZW1lbnRhbCBpZCBmb3Igcm91dGUgcmVjb3JkcyBhbmQgaW5zcGVjdG9yIHN0YXRlXHJcbmxldCByb3V0ZVJlY29yZElkID0gMDtcclxuY29uc3QgRVhUUkFDVF9SRUdFWFBfUkUgPSAvXlxcLyguKilcXC8oW2Etel0qKSQvO1xyXG5mdW5jdGlvbiBtYXJrUm91dGVSZWNvcmRBY3RpdmUocm91dGUsIGN1cnJlbnRSb3V0ZSkge1xyXG4gICAgLy8gbm8gcm91dGUgd2lsbCBiZSBhY3RpdmUgaWYgbWF0Y2hlZCBpcyBlbXB0eVxyXG4gICAgLy8gcmVzZXQgdGhlIG1hdGNoaW5nIHN0YXRlXHJcbiAgICBjb25zdCBpc0V4YWN0QWN0aXZlID0gY3VycmVudFJvdXRlLm1hdGNoZWQubGVuZ3RoICYmXHJcbiAgICAgICAgaXNTYW1lUm91dGVSZWNvcmQoY3VycmVudFJvdXRlLm1hdGNoZWRbY3VycmVudFJvdXRlLm1hdGNoZWQubGVuZ3RoIC0gMV0sIHJvdXRlLnJlY29yZCk7XHJcbiAgICByb3V0ZS5fX3ZkX2V4YWN0QWN0aXZlID0gcm91dGUuX192ZF9hY3RpdmUgPSBpc0V4YWN0QWN0aXZlO1xyXG4gICAgaWYgKCFpc0V4YWN0QWN0aXZlKSB7XHJcbiAgICAgICAgcm91dGUuX192ZF9hY3RpdmUgPSBjdXJyZW50Um91dGUubWF0Y2hlZC5zb21lKG1hdGNoID0+IGlzU2FtZVJvdXRlUmVjb3JkKG1hdGNoLCByb3V0ZS5yZWNvcmQpKTtcclxuICAgIH1cclxuICAgIHJvdXRlLmNoaWxkcmVuLmZvckVhY2goY2hpbGRSb3V0ZSA9PiBtYXJrUm91dGVSZWNvcmRBY3RpdmUoY2hpbGRSb3V0ZSwgY3VycmVudFJvdXRlKSk7XHJcbn1cclxuZnVuY3Rpb24gcmVzZXRNYXRjaFN0YXRlT25Sb3V0ZVJlY29yZChyb3V0ZSkge1xyXG4gICAgcm91dGUuX192ZF9tYXRjaCA9IGZhbHNlO1xyXG4gICAgcm91dGUuY2hpbGRyZW4uZm9yRWFjaChyZXNldE1hdGNoU3RhdGVPblJvdXRlUmVjb3JkKTtcclxufVxyXG5mdW5jdGlvbiBpc1JvdXRlTWF0Y2hpbmcocm91dGUsIGZpbHRlcikge1xyXG4gICAgY29uc3QgZm91bmQgPSBTdHJpbmcocm91dGUucmUpLm1hdGNoKEVYVFJBQ1RfUkVHRVhQX1JFKTtcclxuICAgIHJvdXRlLl9fdmRfbWF0Y2ggPSBmYWxzZTtcclxuICAgIGlmICghZm91bmQgfHwgZm91bmQubGVuZ3RoIDwgMykge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIC8vIHVzZSBhIHJlZ2V4cCB3aXRob3V0ICQgYXQgdGhlIGVuZCB0byBtYXRjaCBuZXN0ZWQgcm91dGVzIGJldHRlclxyXG4gICAgY29uc3Qgbm9uRW5kaW5nUkUgPSBuZXcgUmVnRXhwKGZvdW5kWzFdLnJlcGxhY2UoL1xcJCQvLCAnJyksIGZvdW5kWzJdKTtcclxuICAgIGlmIChub25FbmRpbmdSRS50ZXN0KGZpbHRlcikpIHtcclxuICAgICAgICAvLyBtYXJrIGNoaWxkcmVuIGFzIG1hdGNoZXNcclxuICAgICAgICByb3V0ZS5jaGlsZHJlbi5mb3JFYWNoKGNoaWxkID0+IGlzUm91dGVNYXRjaGluZyhjaGlsZCwgZmlsdGVyKSk7XHJcbiAgICAgICAgLy8gZXhjZXB0aW9uIGNhc2U6IGAvYFxyXG4gICAgICAgIGlmIChyb3V0ZS5yZWNvcmQucGF0aCAhPT0gJy8nIHx8IGZpbHRlciA9PT0gJy8nKSB7XHJcbiAgICAgICAgICAgIHJvdXRlLl9fdmRfbWF0Y2ggPSByb3V0ZS5yZS50ZXN0KGZpbHRlcik7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBoaWRlIHRoZSAvIHJvdXRlXHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgY29uc3QgcGF0aCA9IHJvdXRlLnJlY29yZC5wYXRoLnRvTG93ZXJDYXNlKCk7XHJcbiAgICBjb25zdCBkZWNvZGVkUGF0aCA9IGRlY29kZShwYXRoKTtcclxuICAgIC8vIGFsc28gYWxsb3cgcGFydGlhbCBtYXRjaGluZyBvbiB0aGUgcGF0aFxyXG4gICAgaWYgKCFmaWx0ZXIuc3RhcnRzV2l0aCgnLycpICYmXHJcbiAgICAgICAgKGRlY29kZWRQYXRoLmluY2x1ZGVzKGZpbHRlcikgfHwgcGF0aC5pbmNsdWRlcyhmaWx0ZXIpKSlcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIGlmIChkZWNvZGVkUGF0aC5zdGFydHNXaXRoKGZpbHRlcikgfHwgcGF0aC5zdGFydHNXaXRoKGZpbHRlcikpXHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICBpZiAocm91dGUucmVjb3JkLm5hbWUgJiYgU3RyaW5nKHJvdXRlLnJlY29yZC5uYW1lKS5pbmNsdWRlcyhmaWx0ZXIpKVxyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgcmV0dXJuIHJvdXRlLmNoaWxkcmVuLnNvbWUoY2hpbGQgPT4gaXNSb3V0ZU1hdGNoaW5nKGNoaWxkLCBmaWx0ZXIpKTtcclxufVxyXG5mdW5jdGlvbiBvbWl0KG9iaiwga2V5cykge1xyXG4gICAgY29uc3QgcmV0ID0ge307XHJcbiAgICBmb3IgKGNvbnN0IGtleSBpbiBvYmopIHtcclxuICAgICAgICBpZiAoIWtleXMuaW5jbHVkZXMoa2V5KSkge1xyXG4gICAgICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yXHJcbiAgICAgICAgICAgIHJldFtrZXldID0gb2JqW2tleV07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHJldDtcclxufVxuXG4vKipcclxuICogQ3JlYXRlcyBhIFJvdXRlciBpbnN0YW5jZSB0aGF0IGNhbiBiZSB1c2VkIGJ5IGEgVnVlIGFwcC5cclxuICpcclxuICogQHBhcmFtIG9wdGlvbnMgLSB7QGxpbmsgUm91dGVyT3B0aW9uc31cclxuICovXHJcbmZ1bmN0aW9uIGNyZWF0ZVJvdXRlcihvcHRpb25zKSB7XHJcbiAgICBjb25zdCBtYXRjaGVyID0gY3JlYXRlUm91dGVyTWF0Y2hlcihvcHRpb25zLnJvdXRlcywgb3B0aW9ucyk7XHJcbiAgICBjb25zdCBwYXJzZVF1ZXJ5JDEgPSBvcHRpb25zLnBhcnNlUXVlcnkgfHwgcGFyc2VRdWVyeTtcclxuICAgIGNvbnN0IHN0cmluZ2lmeVF1ZXJ5JDEgPSBvcHRpb25zLnN0cmluZ2lmeVF1ZXJ5IHx8IHN0cmluZ2lmeVF1ZXJ5O1xyXG4gICAgY29uc3Qgcm91dGVySGlzdG9yeSA9IG9wdGlvbnMuaGlzdG9yeTtcclxuICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgIXJvdXRlckhpc3RvcnkpXHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdQcm92aWRlIHRoZSBcImhpc3RvcnlcIiBvcHRpb24gd2hlbiBjYWxsaW5nIFwiY3JlYXRlUm91dGVyKClcIjonICtcclxuICAgICAgICAgICAgJyBodHRwczovL25leHQucm91dGVyLnZ1ZWpzLm9yZy9hcGkvI2hpc3RvcnkuJyk7XHJcbiAgICBjb25zdCBiZWZvcmVHdWFyZHMgPSB1c2VDYWxsYmFja3MoKTtcclxuICAgIGNvbnN0IGJlZm9yZVJlc29sdmVHdWFyZHMgPSB1c2VDYWxsYmFja3MoKTtcclxuICAgIGNvbnN0IGFmdGVyR3VhcmRzID0gdXNlQ2FsbGJhY2tzKCk7XHJcbiAgICBjb25zdCBjdXJyZW50Um91dGUgPSBzaGFsbG93UmVmKFNUQVJUX0xPQ0FUSU9OX05PUk1BTElaRUQpO1xyXG4gICAgbGV0IHBlbmRpbmdMb2NhdGlvbiA9IFNUQVJUX0xPQ0FUSU9OX05PUk1BTElaRUQ7XHJcbiAgICAvLyBsZWF2ZSB0aGUgc2Nyb2xsUmVzdG9yYXRpb24gaWYgbm8gc2Nyb2xsQmVoYXZpb3IgaXMgcHJvdmlkZWRcclxuICAgIGlmIChpc0Jyb3dzZXIgJiYgb3B0aW9ucy5zY3JvbGxCZWhhdmlvciAmJiAnc2Nyb2xsUmVzdG9yYXRpb24nIGluIGhpc3RvcnkpIHtcclxuICAgICAgICBoaXN0b3J5LnNjcm9sbFJlc3RvcmF0aW9uID0gJ21hbnVhbCc7XHJcbiAgICB9XHJcbiAgICBjb25zdCBub3JtYWxpemVQYXJhbXMgPSBhcHBseVRvUGFyYW1zLmJpbmQobnVsbCwgcGFyYW1WYWx1ZSA9PiAnJyArIHBhcmFtVmFsdWUpO1xyXG4gICAgY29uc3QgZW5jb2RlUGFyYW1zID0gYXBwbHlUb1BhcmFtcy5iaW5kKG51bGwsIGVuY29kZVBhcmFtKTtcclxuICAgIGNvbnN0IGRlY29kZVBhcmFtcyA9IFxyXG4gICAgLy8gQHRzLWV4cGVjdC1lcnJvcjogaW50ZW50aW9uYWxseSBhdm9pZCB0aGUgdHlwZSBjaGVja1xyXG4gICAgYXBwbHlUb1BhcmFtcy5iaW5kKG51bGwsIGRlY29kZSk7XHJcbiAgICBmdW5jdGlvbiBhZGRSb3V0ZShwYXJlbnRPclJvdXRlLCByb3V0ZSkge1xyXG4gICAgICAgIGxldCBwYXJlbnQ7XHJcbiAgICAgICAgbGV0IHJlY29yZDtcclxuICAgICAgICBpZiAoaXNSb3V0ZU5hbWUocGFyZW50T3JSb3V0ZSkpIHtcclxuICAgICAgICAgICAgcGFyZW50ID0gbWF0Y2hlci5nZXRSZWNvcmRNYXRjaGVyKHBhcmVudE9yUm91dGUpO1xyXG4gICAgICAgICAgICByZWNvcmQgPSByb3V0ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJlY29yZCA9IHBhcmVudE9yUm91dGU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBtYXRjaGVyLmFkZFJvdXRlKHJlY29yZCwgcGFyZW50KTtcclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIHJlbW92ZVJvdXRlKG5hbWUpIHtcclxuICAgICAgICBjb25zdCByZWNvcmRNYXRjaGVyID0gbWF0Y2hlci5nZXRSZWNvcmRNYXRjaGVyKG5hbWUpO1xyXG4gICAgICAgIGlmIChyZWNvcmRNYXRjaGVyKSB7XHJcbiAgICAgICAgICAgIG1hdGNoZXIucmVtb3ZlUm91dGUocmVjb3JkTWF0Y2hlcik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xyXG4gICAgICAgICAgICB3YXJuKGBDYW5ub3QgcmVtb3ZlIG5vbi1leGlzdGVudCByb3V0ZSBcIiR7U3RyaW5nKG5hbWUpfVwiYCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gZ2V0Um91dGVzKCkge1xyXG4gICAgICAgIHJldHVybiBtYXRjaGVyLmdldFJvdXRlcygpLm1hcChyb3V0ZU1hdGNoZXIgPT4gcm91dGVNYXRjaGVyLnJlY29yZCk7XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiBoYXNSb3V0ZShuYW1lKSB7XHJcbiAgICAgICAgcmV0dXJuICEhbWF0Y2hlci5nZXRSZWNvcmRNYXRjaGVyKG5hbWUpO1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gcmVzb2x2ZShyYXdMb2NhdGlvbiwgY3VycmVudExvY2F0aW9uKSB7XHJcbiAgICAgICAgLy8gY29uc3Qgb2JqZWN0TG9jYXRpb24gPSByb3V0ZXJMb2NhdGlvbkFzT2JqZWN0KHJhd0xvY2F0aW9uKVxyXG4gICAgICAgIC8vIHdlIGNyZWF0ZSBhIGNvcHkgdG8gbW9kaWZ5IGl0IGxhdGVyXHJcbiAgICAgICAgY3VycmVudExvY2F0aW9uID0gYXNzaWduKHt9LCBjdXJyZW50TG9jYXRpb24gfHwgY3VycmVudFJvdXRlLnZhbHVlKTtcclxuICAgICAgICBpZiAodHlwZW9mIHJhd0xvY2F0aW9uID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICBjb25zdCBsb2NhdGlvbk5vcm1hbGl6ZWQgPSBwYXJzZVVSTChwYXJzZVF1ZXJ5JDEsIHJhd0xvY2F0aW9uLCBjdXJyZW50TG9jYXRpb24ucGF0aCk7XHJcbiAgICAgICAgICAgIGNvbnN0IG1hdGNoZWRSb3V0ZSA9IG1hdGNoZXIucmVzb2x2ZSh7IHBhdGg6IGxvY2F0aW9uTm9ybWFsaXplZC5wYXRoIH0sIGN1cnJlbnRMb2NhdGlvbik7XHJcbiAgICAgICAgICAgIGNvbnN0IGhyZWYgPSByb3V0ZXJIaXN0b3J5LmNyZWF0ZUhyZWYobG9jYXRpb25Ob3JtYWxpemVkLmZ1bGxQYXRoKTtcclxuICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGhyZWYuc3RhcnRzV2l0aCgnLy8nKSlcclxuICAgICAgICAgICAgICAgICAgICB3YXJuKGBMb2NhdGlvbiBcIiR7cmF3TG9jYXRpb259XCIgcmVzb2x2ZWQgdG8gXCIke2hyZWZ9XCIuIEEgcmVzb2x2ZWQgbG9jYXRpb24gY2Fubm90IHN0YXJ0IHdpdGggbXVsdGlwbGUgc2xhc2hlcy5gKTtcclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKCFtYXRjaGVkUm91dGUubWF0Y2hlZC5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICB3YXJuKGBObyBtYXRjaCBmb3VuZCBmb3IgbG9jYXRpb24gd2l0aCBwYXRoIFwiJHtyYXdMb2NhdGlvbn1cImApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIGxvY2F0aW9uTm9ybWFsaXplZCBpcyBhbHdheXMgYSBuZXcgb2JqZWN0XHJcbiAgICAgICAgICAgIHJldHVybiBhc3NpZ24obG9jYXRpb25Ob3JtYWxpemVkLCBtYXRjaGVkUm91dGUsIHtcclxuICAgICAgICAgICAgICAgIHBhcmFtczogZGVjb2RlUGFyYW1zKG1hdGNoZWRSb3V0ZS5wYXJhbXMpLFxyXG4gICAgICAgICAgICAgICAgaGFzaDogZGVjb2RlKGxvY2F0aW9uTm9ybWFsaXplZC5oYXNoKSxcclxuICAgICAgICAgICAgICAgIHJlZGlyZWN0ZWRGcm9tOiB1bmRlZmluZWQsXHJcbiAgICAgICAgICAgICAgICBocmVmLFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IG1hdGNoZXJMb2NhdGlvbjtcclxuICAgICAgICAvLyBwYXRoIGNvdWxkIGJlIHJlbGF0aXZlIGluIG9iamVjdCBhcyB3ZWxsXHJcbiAgICAgICAgaWYgKCdwYXRoJyBpbiByYXdMb2NhdGlvbikge1xyXG4gICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmXHJcbiAgICAgICAgICAgICAgICAncGFyYW1zJyBpbiByYXdMb2NhdGlvbiAmJlxyXG4gICAgICAgICAgICAgICAgISgnbmFtZScgaW4gcmF3TG9jYXRpb24pICYmXHJcbiAgICAgICAgICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yOiB0aGUgdHlwZSBpcyBuZXZlclxyXG4gICAgICAgICAgICAgICAgT2JqZWN0LmtleXMocmF3TG9jYXRpb24ucGFyYW1zKS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIHdhcm4oYFBhdGggXCIke1xyXG4gICAgICAgICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvcjogdGhlIHR5cGUgaXMgbmV2ZXJcclxuICAgICAgICAgICAgICAgIHJhd0xvY2F0aW9uLnBhdGh9XCIgd2FzIHBhc3NlZCB3aXRoIHBhcmFtcyBidXQgdGhleSB3aWxsIGJlIGlnbm9yZWQuIFVzZSBhIG5hbWVkIHJvdXRlIGFsb25nc2lkZSBwYXJhbXMgaW5zdGVhZC5gKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBtYXRjaGVyTG9jYXRpb24gPSBhc3NpZ24oe30sIHJhd0xvY2F0aW9uLCB7XHJcbiAgICAgICAgICAgICAgICBwYXRoOiBwYXJzZVVSTChwYXJzZVF1ZXJ5JDEsIHJhd0xvY2F0aW9uLnBhdGgsIGN1cnJlbnRMb2NhdGlvbi5wYXRoKS5wYXRoLFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIHJlbW92ZSBhbnkgbnVsbGlzaCBwYXJhbVxyXG4gICAgICAgICAgICBjb25zdCB0YXJnZXRQYXJhbXMgPSBhc3NpZ24oe30sIHJhd0xvY2F0aW9uLnBhcmFtcyk7XHJcbiAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIHRhcmdldFBhcmFtcykge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRhcmdldFBhcmFtc1trZXldID09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICBkZWxldGUgdGFyZ2V0UGFyYW1zW2tleV07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gcGFzcyBlbmNvZGVkIHZhbHVlcyB0byB0aGUgbWF0Y2hlciBzbyBpdCBjYW4gcHJvZHVjZSBlbmNvZGVkIHBhdGggYW5kIGZ1bGxQYXRoXHJcbiAgICAgICAgICAgIG1hdGNoZXJMb2NhdGlvbiA9IGFzc2lnbih7fSwgcmF3TG9jYXRpb24sIHtcclxuICAgICAgICAgICAgICAgIHBhcmFtczogZW5jb2RlUGFyYW1zKHJhd0xvY2F0aW9uLnBhcmFtcyksXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAvLyBjdXJyZW50IGxvY2F0aW9uIHBhcmFtcyBhcmUgZGVjb2RlZCwgd2UgbmVlZCB0byBlbmNvZGUgdGhlbSBpbiBjYXNlIHRoZVxyXG4gICAgICAgICAgICAvLyBtYXRjaGVyIG1lcmdlcyB0aGUgcGFyYW1zXHJcbiAgICAgICAgICAgIGN1cnJlbnRMb2NhdGlvbi5wYXJhbXMgPSBlbmNvZGVQYXJhbXMoY3VycmVudExvY2F0aW9uLnBhcmFtcyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IG1hdGNoZWRSb3V0ZSA9IG1hdGNoZXIucmVzb2x2ZShtYXRjaGVyTG9jYXRpb24sIGN1cnJlbnRMb2NhdGlvbik7XHJcbiAgICAgICAgY29uc3QgaGFzaCA9IHJhd0xvY2F0aW9uLmhhc2ggfHwgJyc7XHJcbiAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiBoYXNoICYmICFoYXNoLnN0YXJ0c1dpdGgoJyMnKSkge1xyXG4gICAgICAgICAgICB3YXJuKGBBIFxcYGhhc2hcXGAgc2hvdWxkIGFsd2F5cyBzdGFydCB3aXRoIHRoZSBjaGFyYWN0ZXIgXCIjXCIuIFJlcGxhY2UgXCIke2hhc2h9XCIgd2l0aCBcIiMke2hhc2h9XCIuYCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGRlY29kaW5nIHRoZW0pIHRoZSBtYXRjaGVyIG1pZ2h0IGhhdmUgbWVyZ2VkIGN1cnJlbnQgbG9jYXRpb24gcGFyYW1zIHNvXHJcbiAgICAgICAgLy8gd2UgbmVlZCB0byBydW4gdGhlIGRlY29kaW5nIGFnYWluXHJcbiAgICAgICAgbWF0Y2hlZFJvdXRlLnBhcmFtcyA9IG5vcm1hbGl6ZVBhcmFtcyhkZWNvZGVQYXJhbXMobWF0Y2hlZFJvdXRlLnBhcmFtcykpO1xyXG4gICAgICAgIGNvbnN0IGZ1bGxQYXRoID0gc3RyaW5naWZ5VVJMKHN0cmluZ2lmeVF1ZXJ5JDEsIGFzc2lnbih7fSwgcmF3TG9jYXRpb24sIHtcclxuICAgICAgICAgICAgaGFzaDogZW5jb2RlSGFzaChoYXNoKSxcclxuICAgICAgICAgICAgcGF0aDogbWF0Y2hlZFJvdXRlLnBhdGgsXHJcbiAgICAgICAgfSkpO1xyXG4gICAgICAgIGNvbnN0IGhyZWYgPSByb3V0ZXJIaXN0b3J5LmNyZWF0ZUhyZWYoZnVsbFBhdGgpO1xyXG4gICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcclxuICAgICAgICAgICAgaWYgKGhyZWYuc3RhcnRzV2l0aCgnLy8nKSkge1xyXG4gICAgICAgICAgICAgICAgd2FybihgTG9jYXRpb24gXCIke3Jhd0xvY2F0aW9ufVwiIHJlc29sdmVkIHRvIFwiJHtocmVmfVwiLiBBIHJlc29sdmVkIGxvY2F0aW9uIGNhbm5vdCBzdGFydCB3aXRoIG11bHRpcGxlIHNsYXNoZXMuYCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoIW1hdGNoZWRSb3V0ZS5tYXRjaGVkLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgd2FybihgTm8gbWF0Y2ggZm91bmQgZm9yIGxvY2F0aW9uIHdpdGggcGF0aCBcIiR7J3BhdGgnIGluIHJhd0xvY2F0aW9uID8gcmF3TG9jYXRpb24ucGF0aCA6IHJhd0xvY2F0aW9ufVwiYCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGFzc2lnbih7XHJcbiAgICAgICAgICAgIGZ1bGxQYXRoLFxyXG4gICAgICAgICAgICAvLyBrZWVwIHRoZSBoYXNoIGVuY29kZWQgc28gZnVsbFBhdGggaXMgZWZmZWN0aXZlbHkgcGF0aCArIGVuY29kZWRRdWVyeSArXHJcbiAgICAgICAgICAgIC8vIGhhc2hcclxuICAgICAgICAgICAgaGFzaCxcclxuICAgICAgICAgICAgcXVlcnk6IFxyXG4gICAgICAgICAgICAvLyBpZiB0aGUgdXNlciBpcyB1c2luZyBhIGN1c3RvbSBxdWVyeSBsaWIgbGlrZSBxcywgd2UgbWlnaHQgaGF2ZVxyXG4gICAgICAgICAgICAvLyBuZXN0ZWQgb2JqZWN0cywgc28gd2Uga2VlcCB0aGUgcXVlcnkgYXMgaXMsIG1lYW5pbmcgaXQgY2FuIGNvbnRhaW5cclxuICAgICAgICAgICAgLy8gbnVtYmVycyBhdCBgJHJvdXRlLnF1ZXJ5YCwgYnV0IGF0IHRoZSBwb2ludCwgdGhlIHVzZXIgd2lsbCBoYXZlIHRvXHJcbiAgICAgICAgICAgIC8vIHVzZSB0aGVpciBvd24gdHlwZSBhbnl3YXkuXHJcbiAgICAgICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS92dWVqcy9yb3V0ZXIvaXNzdWVzLzMyOCNpc3N1ZWNvbW1lbnQtNjQ5NDgxNTY3XHJcbiAgICAgICAgICAgIHN0cmluZ2lmeVF1ZXJ5JDEgPT09IHN0cmluZ2lmeVF1ZXJ5XHJcbiAgICAgICAgICAgICAgICA/IG5vcm1hbGl6ZVF1ZXJ5KHJhd0xvY2F0aW9uLnF1ZXJ5KVxyXG4gICAgICAgICAgICAgICAgOiAocmF3TG9jYXRpb24ucXVlcnkgfHwge30pLFxyXG4gICAgICAgIH0sIG1hdGNoZWRSb3V0ZSwge1xyXG4gICAgICAgICAgICByZWRpcmVjdGVkRnJvbTogdW5kZWZpbmVkLFxyXG4gICAgICAgICAgICBocmVmLFxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gbG9jYXRpb25Bc09iamVjdCh0bykge1xyXG4gICAgICAgIHJldHVybiB0eXBlb2YgdG8gPT09ICdzdHJpbmcnXHJcbiAgICAgICAgICAgID8gcGFyc2VVUkwocGFyc2VRdWVyeSQxLCB0bywgY3VycmVudFJvdXRlLnZhbHVlLnBhdGgpXHJcbiAgICAgICAgICAgIDogYXNzaWduKHt9LCB0byk7XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiBjaGVja0NhbmNlbGVkTmF2aWdhdGlvbih0bywgZnJvbSkge1xyXG4gICAgICAgIGlmIChwZW5kaW5nTG9jYXRpb24gIT09IHRvKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBjcmVhdGVSb3V0ZXJFcnJvcig4IC8qIE5BVklHQVRJT05fQ0FOQ0VMTEVEICovLCB7XHJcbiAgICAgICAgICAgICAgICBmcm9tLFxyXG4gICAgICAgICAgICAgICAgdG8sXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIHB1c2godG8pIHtcclxuICAgICAgICByZXR1cm4gcHVzaFdpdGhSZWRpcmVjdCh0byk7XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiByZXBsYWNlKHRvKSB7XHJcbiAgICAgICAgcmV0dXJuIHB1c2goYXNzaWduKGxvY2F0aW9uQXNPYmplY3QodG8pLCB7IHJlcGxhY2U6IHRydWUgfSkpO1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gaGFuZGxlUmVkaXJlY3RSZWNvcmQodG8pIHtcclxuICAgICAgICBjb25zdCBsYXN0TWF0Y2hlZCA9IHRvLm1hdGNoZWRbdG8ubWF0Y2hlZC5sZW5ndGggLSAxXTtcclxuICAgICAgICBpZiAobGFzdE1hdGNoZWQgJiYgbGFzdE1hdGNoZWQucmVkaXJlY3QpIHtcclxuICAgICAgICAgICAgY29uc3QgeyByZWRpcmVjdCB9ID0gbGFzdE1hdGNoZWQ7XHJcbiAgICAgICAgICAgIGxldCBuZXdUYXJnZXRMb2NhdGlvbiA9IHR5cGVvZiByZWRpcmVjdCA9PT0gJ2Z1bmN0aW9uJyA/IHJlZGlyZWN0KHRvKSA6IHJlZGlyZWN0O1xyXG4gICAgICAgICAgICBpZiAodHlwZW9mIG5ld1RhcmdldExvY2F0aW9uID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICAgICAgbmV3VGFyZ2V0TG9jYXRpb24gPVxyXG4gICAgICAgICAgICAgICAgICAgIG5ld1RhcmdldExvY2F0aW9uLmluY2x1ZGVzKCc/JykgfHwgbmV3VGFyZ2V0TG9jYXRpb24uaW5jbHVkZXMoJyMnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA/IChuZXdUYXJnZXRMb2NhdGlvbiA9IGxvY2F0aW9uQXNPYmplY3QobmV3VGFyZ2V0TG9jYXRpb24pKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA6IC8vIGZvcmNlIGVtcHR5IHBhcmFtc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBwYXRoOiBuZXdUYXJnZXRMb2NhdGlvbiB9O1xyXG4gICAgICAgICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvcjogZm9yY2UgZW1wdHkgcGFyYW1zIHdoZW4gYSBzdHJpbmcgaXMgcGFzc2VkIHRvIGxldFxyXG4gICAgICAgICAgICAgICAgLy8gdGhlIHJvdXRlciBwYXJzZSB0aGVtIGFnYWluXHJcbiAgICAgICAgICAgICAgICBuZXdUYXJnZXRMb2NhdGlvbi5wYXJhbXMgPSB7fTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmXHJcbiAgICAgICAgICAgICAgICAhKCdwYXRoJyBpbiBuZXdUYXJnZXRMb2NhdGlvbikgJiZcclxuICAgICAgICAgICAgICAgICEoJ25hbWUnIGluIG5ld1RhcmdldExvY2F0aW9uKSkge1xyXG4gICAgICAgICAgICAgICAgd2FybihgSW52YWxpZCByZWRpcmVjdCBmb3VuZDpcXG4ke0pTT04uc3RyaW5naWZ5KG5ld1RhcmdldExvY2F0aW9uLCBudWxsLCAyKX1cXG4gd2hlbiBuYXZpZ2F0aW5nIHRvIFwiJHt0by5mdWxsUGF0aH1cIi4gQSByZWRpcmVjdCBtdXN0IGNvbnRhaW4gYSBuYW1lIG9yIHBhdGguIFRoaXMgd2lsbCBicmVhayBpbiBwcm9kdWN0aW9uLmApO1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIHJlZGlyZWN0Jyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGFzc2lnbih7XHJcbiAgICAgICAgICAgICAgICBxdWVyeTogdG8ucXVlcnksXHJcbiAgICAgICAgICAgICAgICBoYXNoOiB0by5oYXNoLFxyXG4gICAgICAgICAgICAgICAgcGFyYW1zOiB0by5wYXJhbXMsXHJcbiAgICAgICAgICAgIH0sIG5ld1RhcmdldExvY2F0aW9uKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiBwdXNoV2l0aFJlZGlyZWN0KHRvLCByZWRpcmVjdGVkRnJvbSkge1xyXG4gICAgICAgIGNvbnN0IHRhcmdldExvY2F0aW9uID0gKHBlbmRpbmdMb2NhdGlvbiA9IHJlc29sdmUodG8pKTtcclxuICAgICAgICBjb25zdCBmcm9tID0gY3VycmVudFJvdXRlLnZhbHVlO1xyXG4gICAgICAgIGNvbnN0IGRhdGEgPSB0by5zdGF0ZTtcclxuICAgICAgICBjb25zdCBmb3JjZSA9IHRvLmZvcmNlO1xyXG4gICAgICAgIC8vIHRvIGNvdWxkIGJlIGEgc3RyaW5nIHdoZXJlIGByZXBsYWNlYCBpcyBhIGZ1bmN0aW9uXHJcbiAgICAgICAgY29uc3QgcmVwbGFjZSA9IHRvLnJlcGxhY2UgPT09IHRydWU7XHJcbiAgICAgICAgY29uc3Qgc2hvdWxkUmVkaXJlY3QgPSBoYW5kbGVSZWRpcmVjdFJlY29yZCh0YXJnZXRMb2NhdGlvbik7XHJcbiAgICAgICAgaWYgKHNob3VsZFJlZGlyZWN0KVxyXG4gICAgICAgICAgICByZXR1cm4gcHVzaFdpdGhSZWRpcmVjdChhc3NpZ24obG9jYXRpb25Bc09iamVjdChzaG91bGRSZWRpcmVjdCksIHtcclxuICAgICAgICAgICAgICAgIHN0YXRlOiBkYXRhLFxyXG4gICAgICAgICAgICAgICAgZm9yY2UsXHJcbiAgICAgICAgICAgICAgICByZXBsYWNlLFxyXG4gICAgICAgICAgICB9KSwgXHJcbiAgICAgICAgICAgIC8vIGtlZXAgb3JpZ2luYWwgcmVkaXJlY3RlZEZyb20gaWYgaXQgZXhpc3RzXHJcbiAgICAgICAgICAgIHJlZGlyZWN0ZWRGcm9tIHx8IHRhcmdldExvY2F0aW9uKTtcclxuICAgICAgICAvLyBpZiBpdCB3YXMgYSByZWRpcmVjdCB3ZSBhbHJlYWR5IGNhbGxlZCBgcHVzaFdpdGhSZWRpcmVjdGAgYWJvdmVcclxuICAgICAgICBjb25zdCB0b0xvY2F0aW9uID0gdGFyZ2V0TG9jYXRpb247XHJcbiAgICAgICAgdG9Mb2NhdGlvbi5yZWRpcmVjdGVkRnJvbSA9IHJlZGlyZWN0ZWRGcm9tO1xyXG4gICAgICAgIGxldCBmYWlsdXJlO1xyXG4gICAgICAgIGlmICghZm9yY2UgJiYgaXNTYW1lUm91dGVMb2NhdGlvbihzdHJpbmdpZnlRdWVyeSQxLCBmcm9tLCB0YXJnZXRMb2NhdGlvbikpIHtcclxuICAgICAgICAgICAgZmFpbHVyZSA9IGNyZWF0ZVJvdXRlckVycm9yKDE2IC8qIE5BVklHQVRJT05fRFVQTElDQVRFRCAqLywgeyB0bzogdG9Mb2NhdGlvbiwgZnJvbSB9KTtcclxuICAgICAgICAgICAgLy8gdHJpZ2dlciBzY3JvbGwgdG8gYWxsb3cgc2Nyb2xsaW5nIHRvIHRoZSBzYW1lIGFuY2hvclxyXG4gICAgICAgICAgICBoYW5kbGVTY3JvbGwoZnJvbSwgZnJvbSwgXHJcbiAgICAgICAgICAgIC8vIHRoaXMgaXMgYSBwdXNoLCB0aGUgb25seSB3YXkgZm9yIGl0IHRvIGJlIHRyaWdnZXJlZCBmcm9tIGFcclxuICAgICAgICAgICAgLy8gaGlzdG9yeS5saXN0ZW4gaXMgd2l0aCBhIHJlZGlyZWN0LCB3aGljaCBtYWtlcyBpdCBiZWNvbWUgYSBwdXNoXHJcbiAgICAgICAgICAgIHRydWUsIFxyXG4gICAgICAgICAgICAvLyBUaGlzIGNhbm5vdCBiZSB0aGUgZmlyc3QgbmF2aWdhdGlvbiBiZWNhdXNlIHRoZSBpbml0aWFsIGxvY2F0aW9uXHJcbiAgICAgICAgICAgIC8vIGNhbm5vdCBiZSBtYW51YWxseSBuYXZpZ2F0ZWQgdG9cclxuICAgICAgICAgICAgZmFsc2UpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gKGZhaWx1cmUgPyBQcm9taXNlLnJlc29sdmUoZmFpbHVyZSkgOiBuYXZpZ2F0ZSh0b0xvY2F0aW9uLCBmcm9tKSlcclxuICAgICAgICAgICAgLmNhdGNoKChlcnJvcikgPT4gaXNOYXZpZ2F0aW9uRmFpbHVyZShlcnJvcilcclxuICAgICAgICAgICAgPyAvLyBuYXZpZ2F0aW9uIHJlZGlyZWN0cyBzdGlsbCBtYXJrIHRoZSByb3V0ZXIgYXMgcmVhZHlcclxuICAgICAgICAgICAgICAgIGlzTmF2aWdhdGlvbkZhaWx1cmUoZXJyb3IsIDIgLyogTkFWSUdBVElPTl9HVUFSRF9SRURJUkVDVCAqLylcclxuICAgICAgICAgICAgICAgICAgICA/IGVycm9yXHJcbiAgICAgICAgICAgICAgICAgICAgOiBtYXJrQXNSZWFkeShlcnJvcikgLy8gYWxzbyByZXR1cm5zIHRoZSBlcnJvclxyXG4gICAgICAgICAgICA6IC8vIHJlamVjdCBhbnkgdW5rbm93biBlcnJvclxyXG4gICAgICAgICAgICAgICAgdHJpZ2dlckVycm9yKGVycm9yLCB0b0xvY2F0aW9uLCBmcm9tKSlcclxuICAgICAgICAgICAgLnRoZW4oKGZhaWx1cmUpID0+IHtcclxuICAgICAgICAgICAgaWYgKGZhaWx1cmUpIHtcclxuICAgICAgICAgICAgICAgIGlmIChpc05hdmlnYXRpb25GYWlsdXJlKGZhaWx1cmUsIDIgLyogTkFWSUdBVElPTl9HVUFSRF9SRURJUkVDVCAqLykpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHdlIGFyZSByZWRpcmVjdGluZyB0byB0aGUgc2FtZSBsb2NhdGlvbiB3ZSB3ZXJlIGFscmVhZHkgYXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgaXNTYW1lUm91dGVMb2NhdGlvbihzdHJpbmdpZnlRdWVyeSQxLCByZXNvbHZlKGZhaWx1cmUudG8pLCB0b0xvY2F0aW9uKSAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBhbmQgd2UgaGF2ZSBkb25lIGl0IGEgY291cGxlIG9mIHRpbWVzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlZGlyZWN0ZWRGcm9tICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3I6IGFkZGVkIG9ubHkgaW4gZGV2XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIChyZWRpcmVjdGVkRnJvbS5fY291bnQgPSByZWRpcmVjdGVkRnJvbS5fY291bnRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gLy8gQHRzLWV4cGVjdC1lcnJvclxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZGlyZWN0ZWRGcm9tLl9jb3VudCArIDFcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogMSkgPiAxMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB3YXJuKGBEZXRlY3RlZCBhbiBpbmZpbml0ZSByZWRpcmVjdGlvbiBpbiBhIG5hdmlnYXRpb24gZ3VhcmQgd2hlbiBnb2luZyBmcm9tIFwiJHtmcm9tLmZ1bGxQYXRofVwiIHRvIFwiJHt0b0xvY2F0aW9uLmZ1bGxQYXRofVwiLiBBYm9ydGluZyB0byBhdm9pZCBhIFN0YWNrIE92ZXJmbG93LiBUaGlzIHdpbGwgYnJlYWsgaW4gcHJvZHVjdGlvbiBpZiBub3QgZml4ZWQuYCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoJ0luZmluaXRlIHJlZGlyZWN0IGluIG5hdmlnYXRpb24gZ3VhcmQnKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBwdXNoV2l0aFJlZGlyZWN0KFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGtlZXAgb3B0aW9uc1xyXG4gICAgICAgICAgICAgICAgICAgIGFzc2lnbihsb2NhdGlvbkFzT2JqZWN0KGZhaWx1cmUudG8pLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlOiBkYXRhLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JjZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVwbGFjZSxcclxuICAgICAgICAgICAgICAgICAgICB9KSwgXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gcHJlc2VydmUgdGhlIG9yaWdpbmFsIHJlZGlyZWN0ZWRGcm9tIGlmIGFueVxyXG4gICAgICAgICAgICAgICAgICAgIHJlZGlyZWN0ZWRGcm9tIHx8IHRvTG9jYXRpb24pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8gaWYgd2UgZmFpbCB3ZSBkb24ndCBmaW5hbGl6ZSB0aGUgbmF2aWdhdGlvblxyXG4gICAgICAgICAgICAgICAgZmFpbHVyZSA9IGZpbmFsaXplTmF2aWdhdGlvbih0b0xvY2F0aW9uLCBmcm9tLCB0cnVlLCByZXBsYWNlLCBkYXRhKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0cmlnZ2VyQWZ0ZXJFYWNoKHRvTG9jYXRpb24sIGZyb20sIGZhaWx1cmUpO1xyXG4gICAgICAgICAgICByZXR1cm4gZmFpbHVyZTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogSGVscGVyIHRvIHJlamVjdCBhbmQgc2tpcCBhbGwgbmF2aWdhdGlvbiBndWFyZHMgaWYgYSBuZXcgbmF2aWdhdGlvbiBoYXBwZW5lZFxyXG4gICAgICogQHBhcmFtIHRvXHJcbiAgICAgKiBAcGFyYW0gZnJvbVxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBjaGVja0NhbmNlbGVkTmF2aWdhdGlvbkFuZFJlamVjdCh0bywgZnJvbSkge1xyXG4gICAgICAgIGNvbnN0IGVycm9yID0gY2hlY2tDYW5jZWxlZE5hdmlnYXRpb24odG8sIGZyb20pO1xyXG4gICAgICAgIHJldHVybiBlcnJvciA/IFByb21pc2UucmVqZWN0KGVycm9yKSA6IFByb21pc2UucmVzb2x2ZSgpO1xyXG4gICAgfVxyXG4gICAgLy8gVE9ETzogcmVmYWN0b3IgdGhlIHdob2xlIGJlZm9yZSBndWFyZHMgYnkgaW50ZXJuYWxseSB1c2luZyByb3V0ZXIuYmVmb3JlRWFjaFxyXG4gICAgZnVuY3Rpb24gbmF2aWdhdGUodG8sIGZyb20pIHtcclxuICAgICAgICBsZXQgZ3VhcmRzO1xyXG4gICAgICAgIGNvbnN0IFtsZWF2aW5nUmVjb3JkcywgdXBkYXRpbmdSZWNvcmRzLCBlbnRlcmluZ1JlY29yZHNdID0gZXh0cmFjdENoYW5naW5nUmVjb3Jkcyh0bywgZnJvbSk7XHJcbiAgICAgICAgLy8gYWxsIGNvbXBvbmVudHMgaGVyZSBoYXZlIGJlZW4gcmVzb2x2ZWQgb25jZSBiZWNhdXNlIHdlIGFyZSBsZWF2aW5nXHJcbiAgICAgICAgZ3VhcmRzID0gZXh0cmFjdENvbXBvbmVudHNHdWFyZHMobGVhdmluZ1JlY29yZHMucmV2ZXJzZSgpLCAnYmVmb3JlUm91dGVMZWF2ZScsIHRvLCBmcm9tKTtcclxuICAgICAgICAvLyBsZWF2aW5nUmVjb3JkcyBpcyBhbHJlYWR5IHJldmVyc2VkXHJcbiAgICAgICAgZm9yIChjb25zdCByZWNvcmQgb2YgbGVhdmluZ1JlY29yZHMpIHtcclxuICAgICAgICAgICAgcmVjb3JkLmxlYXZlR3VhcmRzLmZvckVhY2goZ3VhcmQgPT4ge1xyXG4gICAgICAgICAgICAgICAgZ3VhcmRzLnB1c2goZ3VhcmRUb1Byb21pc2VGbihndWFyZCwgdG8sIGZyb20pKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGNhbmNlbGVkTmF2aWdhdGlvbkNoZWNrID0gY2hlY2tDYW5jZWxlZE5hdmlnYXRpb25BbmRSZWplY3QuYmluZChudWxsLCB0bywgZnJvbSk7XHJcbiAgICAgICAgZ3VhcmRzLnB1c2goY2FuY2VsZWROYXZpZ2F0aW9uQ2hlY2spO1xyXG4gICAgICAgIC8vIHJ1biB0aGUgcXVldWUgb2YgcGVyIHJvdXRlIGJlZm9yZVJvdXRlTGVhdmUgZ3VhcmRzXHJcbiAgICAgICAgcmV0dXJuIChydW5HdWFyZFF1ZXVlKGd1YXJkcylcclxuICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICAvLyBjaGVjayBnbG9iYWwgZ3VhcmRzIGJlZm9yZUVhY2hcclxuICAgICAgICAgICAgZ3VhcmRzID0gW107XHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgZ3VhcmQgb2YgYmVmb3JlR3VhcmRzLmxpc3QoKSkge1xyXG4gICAgICAgICAgICAgICAgZ3VhcmRzLnB1c2goZ3VhcmRUb1Byb21pc2VGbihndWFyZCwgdG8sIGZyb20pKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBndWFyZHMucHVzaChjYW5jZWxlZE5hdmlnYXRpb25DaGVjayk7XHJcbiAgICAgICAgICAgIHJldHVybiBydW5HdWFyZFF1ZXVlKGd1YXJkcyk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICAvLyBjaGVjayBpbiBjb21wb25lbnRzIGJlZm9yZVJvdXRlVXBkYXRlXHJcbiAgICAgICAgICAgIGd1YXJkcyA9IGV4dHJhY3RDb21wb25lbnRzR3VhcmRzKHVwZGF0aW5nUmVjb3JkcywgJ2JlZm9yZVJvdXRlVXBkYXRlJywgdG8sIGZyb20pO1xyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IHJlY29yZCBvZiB1cGRhdGluZ1JlY29yZHMpIHtcclxuICAgICAgICAgICAgICAgIHJlY29yZC51cGRhdGVHdWFyZHMuZm9yRWFjaChndWFyZCA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgZ3VhcmRzLnB1c2goZ3VhcmRUb1Byb21pc2VGbihndWFyZCwgdG8sIGZyb20pKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGd1YXJkcy5wdXNoKGNhbmNlbGVkTmF2aWdhdGlvbkNoZWNrKTtcclxuICAgICAgICAgICAgLy8gcnVuIHRoZSBxdWV1ZSBvZiBwZXIgcm91dGUgYmVmb3JlRW50ZXIgZ3VhcmRzXHJcbiAgICAgICAgICAgIHJldHVybiBydW5HdWFyZFF1ZXVlKGd1YXJkcyk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICAvLyBjaGVjayB0aGUgcm91dGUgYmVmb3JlRW50ZXJcclxuICAgICAgICAgICAgZ3VhcmRzID0gW107XHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgcmVjb3JkIG9mIHRvLm1hdGNoZWQpIHtcclxuICAgICAgICAgICAgICAgIC8vIGRvIG5vdCB0cmlnZ2VyIGJlZm9yZUVudGVyIG9uIHJldXNlZCB2aWV3c1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlY29yZC5iZWZvcmVFbnRlciAmJiAhZnJvbS5tYXRjaGVkLmluY2x1ZGVzKHJlY29yZCkpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShyZWNvcmQuYmVmb3JlRW50ZXIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgYmVmb3JlRW50ZXIgb2YgcmVjb3JkLmJlZm9yZUVudGVyKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3VhcmRzLnB1c2goZ3VhcmRUb1Byb21pc2VGbihiZWZvcmVFbnRlciwgdG8sIGZyb20pKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGd1YXJkcy5wdXNoKGd1YXJkVG9Qcm9taXNlRm4ocmVjb3JkLmJlZm9yZUVudGVyLCB0bywgZnJvbSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBndWFyZHMucHVzaChjYW5jZWxlZE5hdmlnYXRpb25DaGVjayk7XHJcbiAgICAgICAgICAgIC8vIHJ1biB0aGUgcXVldWUgb2YgcGVyIHJvdXRlIGJlZm9yZUVudGVyIGd1YXJkc1xyXG4gICAgICAgICAgICByZXR1cm4gcnVuR3VhcmRRdWV1ZShndWFyZHMpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgLy8gTk9URTogYXQgdGhpcyBwb2ludCB0by5tYXRjaGVkIGlzIG5vcm1hbGl6ZWQgYW5kIGRvZXMgbm90IGNvbnRhaW4gYW55ICgpID0+IFByb21pc2U8Q29tcG9uZW50PlxyXG4gICAgICAgICAgICAvLyBjbGVhciBleGlzdGluZyBlbnRlckNhbGxiYWNrcywgdGhlc2UgYXJlIGFkZGVkIGJ5IGV4dHJhY3RDb21wb25lbnRzR3VhcmRzXHJcbiAgICAgICAgICAgIHRvLm1hdGNoZWQuZm9yRWFjaChyZWNvcmQgPT4gKHJlY29yZC5lbnRlckNhbGxiYWNrcyA9IHt9KSk7XHJcbiAgICAgICAgICAgIC8vIGNoZWNrIGluLWNvbXBvbmVudCBiZWZvcmVSb3V0ZUVudGVyXHJcbiAgICAgICAgICAgIGd1YXJkcyA9IGV4dHJhY3RDb21wb25lbnRzR3VhcmRzKGVudGVyaW5nUmVjb3JkcywgJ2JlZm9yZVJvdXRlRW50ZXInLCB0bywgZnJvbSk7XHJcbiAgICAgICAgICAgIGd1YXJkcy5wdXNoKGNhbmNlbGVkTmF2aWdhdGlvbkNoZWNrKTtcclxuICAgICAgICAgICAgLy8gcnVuIHRoZSBxdWV1ZSBvZiBwZXIgcm91dGUgYmVmb3JlRW50ZXIgZ3VhcmRzXHJcbiAgICAgICAgICAgIHJldHVybiBydW5HdWFyZFF1ZXVlKGd1YXJkcyk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICAvLyBjaGVjayBnbG9iYWwgZ3VhcmRzIGJlZm9yZVJlc29sdmVcclxuICAgICAgICAgICAgZ3VhcmRzID0gW107XHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgZ3VhcmQgb2YgYmVmb3JlUmVzb2x2ZUd1YXJkcy5saXN0KCkpIHtcclxuICAgICAgICAgICAgICAgIGd1YXJkcy5wdXNoKGd1YXJkVG9Qcm9taXNlRm4oZ3VhcmQsIHRvLCBmcm9tKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZ3VhcmRzLnB1c2goY2FuY2VsZWROYXZpZ2F0aW9uQ2hlY2spO1xyXG4gICAgICAgICAgICByZXR1cm4gcnVuR3VhcmRRdWV1ZShndWFyZHMpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgICAgIC8vIGNhdGNoIGFueSBuYXZpZ2F0aW9uIGNhbmNlbGVkXHJcbiAgICAgICAgICAgIC5jYXRjaChlcnIgPT4gaXNOYXZpZ2F0aW9uRmFpbHVyZShlcnIsIDggLyogTkFWSUdBVElPTl9DQU5DRUxMRUQgKi8pXHJcbiAgICAgICAgICAgID8gZXJyXHJcbiAgICAgICAgICAgIDogUHJvbWlzZS5yZWplY3QoZXJyKSkpO1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gdHJpZ2dlckFmdGVyRWFjaCh0bywgZnJvbSwgZmFpbHVyZSkge1xyXG4gICAgICAgIC8vIG5hdmlnYXRpb24gaXMgY29uZmlybWVkLCBjYWxsIGFmdGVyR3VhcmRzXHJcbiAgICAgICAgLy8gVE9ETzogd3JhcCB3aXRoIGVycm9yIGhhbmRsZXJzXHJcbiAgICAgICAgZm9yIChjb25zdCBndWFyZCBvZiBhZnRlckd1YXJkcy5saXN0KCkpXHJcbiAgICAgICAgICAgIGd1YXJkKHRvLCBmcm9tLCBmYWlsdXJlKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogLSBDbGVhbnMgdXAgYW55IG5hdmlnYXRpb24gZ3VhcmRzXHJcbiAgICAgKiAtIENoYW5nZXMgdGhlIHVybCBpZiBuZWNlc3NhcnlcclxuICAgICAqIC0gQ2FsbHMgdGhlIHNjcm9sbEJlaGF2aW9yXHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIGZpbmFsaXplTmF2aWdhdGlvbih0b0xvY2F0aW9uLCBmcm9tLCBpc1B1c2gsIHJlcGxhY2UsIGRhdGEpIHtcclxuICAgICAgICAvLyBhIG1vcmUgcmVjZW50IG5hdmlnYXRpb24gdG9vayBwbGFjZVxyXG4gICAgICAgIGNvbnN0IGVycm9yID0gY2hlY2tDYW5jZWxlZE5hdmlnYXRpb24odG9Mb2NhdGlvbiwgZnJvbSk7XHJcbiAgICAgICAgaWYgKGVycm9yKVxyXG4gICAgICAgICAgICByZXR1cm4gZXJyb3I7XHJcbiAgICAgICAgLy8gb25seSBjb25zaWRlciBhcyBwdXNoIGlmIGl0J3Mgbm90IHRoZSBmaXJzdCBuYXZpZ2F0aW9uXHJcbiAgICAgICAgY29uc3QgaXNGaXJzdE5hdmlnYXRpb24gPSBmcm9tID09PSBTVEFSVF9MT0NBVElPTl9OT1JNQUxJWkVEO1xyXG4gICAgICAgIGNvbnN0IHN0YXRlID0gIWlzQnJvd3NlciA/IHt9IDogaGlzdG9yeS5zdGF0ZTtcclxuICAgICAgICAvLyBjaGFuZ2UgVVJMIG9ubHkgaWYgdGhlIHVzZXIgZGlkIGEgcHVzaC9yZXBsYWNlIGFuZCBpZiBpdCdzIG5vdCB0aGUgaW5pdGlhbCBuYXZpZ2F0aW9uIGJlY2F1c2VcclxuICAgICAgICAvLyBpdCdzIGp1c3QgcmVmbGVjdGluZyB0aGUgdXJsXHJcbiAgICAgICAgaWYgKGlzUHVzaCkge1xyXG4gICAgICAgICAgICAvLyBvbiB0aGUgaW5pdGlhbCBuYXZpZ2F0aW9uLCB3ZSB3YW50IHRvIHJldXNlIHRoZSBzY3JvbGwgcG9zaXRpb24gZnJvbVxyXG4gICAgICAgICAgICAvLyBoaXN0b3J5IHN0YXRlIGlmIGl0IGV4aXN0c1xyXG4gICAgICAgICAgICBpZiAocmVwbGFjZSB8fCBpc0ZpcnN0TmF2aWdhdGlvbilcclxuICAgICAgICAgICAgICAgIHJvdXRlckhpc3RvcnkucmVwbGFjZSh0b0xvY2F0aW9uLmZ1bGxQYXRoLCBhc3NpZ24oe1xyXG4gICAgICAgICAgICAgICAgICAgIHNjcm9sbDogaXNGaXJzdE5hdmlnYXRpb24gJiYgc3RhdGUgJiYgc3RhdGUuc2Nyb2xsLFxyXG4gICAgICAgICAgICAgICAgfSwgZGF0YSkpO1xyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICByb3V0ZXJIaXN0b3J5LnB1c2godG9Mb2NhdGlvbi5mdWxsUGF0aCwgZGF0YSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGFjY2VwdCBjdXJyZW50IG5hdmlnYXRpb25cclxuICAgICAgICBjdXJyZW50Um91dGUudmFsdWUgPSB0b0xvY2F0aW9uO1xyXG4gICAgICAgIGhhbmRsZVNjcm9sbCh0b0xvY2F0aW9uLCBmcm9tLCBpc1B1c2gsIGlzRmlyc3ROYXZpZ2F0aW9uKTtcclxuICAgICAgICBtYXJrQXNSZWFkeSgpO1xyXG4gICAgfVxyXG4gICAgbGV0IHJlbW92ZUhpc3RvcnlMaXN0ZW5lcjtcclxuICAgIC8vIGF0dGFjaCBsaXN0ZW5lciB0byBoaXN0b3J5IHRvIHRyaWdnZXIgbmF2aWdhdGlvbnNcclxuICAgIGZ1bmN0aW9uIHNldHVwTGlzdGVuZXJzKCkge1xyXG4gICAgICAgIHJlbW92ZUhpc3RvcnlMaXN0ZW5lciA9IHJvdXRlckhpc3RvcnkubGlzdGVuKCh0bywgX2Zyb20sIGluZm8pID0+IHtcclxuICAgICAgICAgICAgLy8gY2Fubm90IGJlIGEgcmVkaXJlY3Qgcm91dGUgYmVjYXVzZSBpdCB3YXMgaW4gaGlzdG9yeVxyXG4gICAgICAgICAgICBjb25zdCB0b0xvY2F0aW9uID0gcmVzb2x2ZSh0byk7XHJcbiAgICAgICAgICAgIC8vIGR1ZSB0byBkeW5hbWljIHJvdXRpbmcsIGFuZCB0byBoYXNoIGhpc3Rvcnkgd2l0aCBtYW51YWwgbmF2aWdhdGlvblxyXG4gICAgICAgICAgICAvLyAobWFudWFsbHkgY2hhbmdpbmcgdGhlIHVybCBvciBjYWxsaW5nIGhpc3RvcnkuaGFzaCA9ICcjL3NvbWV3aGVyZScpLFxyXG4gICAgICAgICAgICAvLyB0aGVyZSBjb3VsZCBiZSBhIHJlZGlyZWN0IHJlY29yZCBpbiBoaXN0b3J5XHJcbiAgICAgICAgICAgIGNvbnN0IHNob3VsZFJlZGlyZWN0ID0gaGFuZGxlUmVkaXJlY3RSZWNvcmQodG9Mb2NhdGlvbik7XHJcbiAgICAgICAgICAgIGlmIChzaG91bGRSZWRpcmVjdCkge1xyXG4gICAgICAgICAgICAgICAgcHVzaFdpdGhSZWRpcmVjdChhc3NpZ24oc2hvdWxkUmVkaXJlY3QsIHsgcmVwbGFjZTogdHJ1ZSB9KSwgdG9Mb2NhdGlvbikuY2F0Y2gobm9vcCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcGVuZGluZ0xvY2F0aW9uID0gdG9Mb2NhdGlvbjtcclxuICAgICAgICAgICAgY29uc3QgZnJvbSA9IGN1cnJlbnRSb3V0ZS52YWx1ZTtcclxuICAgICAgICAgICAgLy8gVE9ETzogc2hvdWxkIGJlIG1vdmVkIHRvIHdlYiBoaXN0b3J5P1xyXG4gICAgICAgICAgICBpZiAoaXNCcm93c2VyKSB7XHJcbiAgICAgICAgICAgICAgICBzYXZlU2Nyb2xsUG9zaXRpb24oZ2V0U2Nyb2xsS2V5KGZyb20uZnVsbFBhdGgsIGluZm8uZGVsdGEpLCBjb21wdXRlU2Nyb2xsUG9zaXRpb24oKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgbmF2aWdhdGUodG9Mb2NhdGlvbiwgZnJvbSlcclxuICAgICAgICAgICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChpc05hdmlnYXRpb25GYWlsdXJlKGVycm9yLCA0IC8qIE5BVklHQVRJT05fQUJPUlRFRCAqLyB8IDggLyogTkFWSUdBVElPTl9DQU5DRUxMRUQgKi8pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVycm9yO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKGlzTmF2aWdhdGlvbkZhaWx1cmUoZXJyb3IsIDIgLyogTkFWSUdBVElPTl9HVUFSRF9SRURJUkVDVCAqLykpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBIZXJlIHdlIGNvdWxkIGNhbGwgaWYgKGluZm8uZGVsdGEpIHJvdXRlckhpc3RvcnkuZ28oLWluZm8uZGVsdGEsXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gZmFsc2UpIGJ1dCB0aGlzIGlzIGJ1ZyBwcm9uZSBhcyB3ZSBoYXZlIG5vIHdheSB0byB3YWl0IHRoZVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIG5hdmlnYXRpb24gdG8gYmUgZmluaXNoZWQgYmVmb3JlIGNhbGxpbmcgcHVzaFdpdGhSZWRpcmVjdC4gVXNpbmdcclxuICAgICAgICAgICAgICAgICAgICAvLyBhIHNldFRpbWVvdXQgb2YgMTZtcyBzZWVtcyB0byB3b3JrIGJ1dCB0aGVyZSBpcyBub3QgZ3VhcmFudGVlIGZvclxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGl0IHRvIHdvcmsgb24gZXZlcnkgYnJvd3Nlci4gU28gSW5zdGVhZCB3ZSBkbyBub3QgcmVzdG9yZSB0aGVcclxuICAgICAgICAgICAgICAgICAgICAvLyBoaXN0b3J5IGVudHJ5IGFuZCB0cmlnZ2VyIGEgbmV3IG5hdmlnYXRpb24gYXMgcmVxdWVzdGVkIGJ5IHRoZVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIG5hdmlnYXRpb24gZ3VhcmQuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gdGhlIGVycm9yIGlzIGFscmVhZHkgaGFuZGxlZCBieSByb3V0ZXIucHVzaCB3ZSBqdXN0IHdhbnQgdG8gYXZvaWRcclxuICAgICAgICAgICAgICAgICAgICAvLyBsb2dnaW5nIHRoZSBlcnJvclxyXG4gICAgICAgICAgICAgICAgICAgIHB1c2hXaXRoUmVkaXJlY3QoZXJyb3IudG8sIHRvTG9jYXRpb25cclxuICAgICAgICAgICAgICAgICAgICAvLyBhdm9pZCBhbiB1bmNhdWdodCByZWplY3Rpb24sIGxldCBwdXNoIGNhbGwgdHJpZ2dlckVycm9yXHJcbiAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAudGhlbihmYWlsdXJlID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gbWFudWFsIGNoYW5nZSBpbiBoYXNoIGhpc3RvcnkgIzkxNiBlbmRpbmcgdXAgaW4gdGhlIFVSTCBub3RcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gY2hhbmdpbmcgYnV0IGl0IHdhcyBjaGFuZ2VkIGJ5IHRoZSBtYW51YWwgdXJsIGNoYW5nZSwgc28gd2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gbmVlZCB0byBtYW51YWxseSBjaGFuZ2UgaXQgb3Vyc2VsdmVzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc05hdmlnYXRpb25GYWlsdXJlKGZhaWx1cmUsIDQgLyogTkFWSUdBVElPTl9BQk9SVEVEICovIHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDE2IC8qIE5BVklHQVRJT05fRFVQTElDQVRFRCAqLykgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICFpbmZvLmRlbHRhICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmZvLnR5cGUgPT09IE5hdmlnYXRpb25UeXBlLnBvcCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcm91dGVySGlzdG9yeS5nbygtMSwgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgLmNhdGNoKG5vb3ApO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGF2b2lkIHRoZSB0aGVuIGJyYW5jaFxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdCgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gZG8gbm90IHJlc3RvcmUgaGlzdG9yeSBvbiB1bmtub3duIGRpcmVjdGlvblxyXG4gICAgICAgICAgICAgICAgaWYgKGluZm8uZGVsdGEpXHJcbiAgICAgICAgICAgICAgICAgICAgcm91dGVySGlzdG9yeS5nbygtaW5mby5kZWx0YSwgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgLy8gdW5yZWNvZ25pemVkIGVycm9yLCB0cmFuc2ZlciB0byB0aGUgZ2xvYmFsIGhhbmRsZXJcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cmlnZ2VyRXJyb3IoZXJyb3IsIHRvTG9jYXRpb24sIGZyb20pO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oKGZhaWx1cmUpID0+IHtcclxuICAgICAgICAgICAgICAgIGZhaWx1cmUgPVxyXG4gICAgICAgICAgICAgICAgICAgIGZhaWx1cmUgfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZmluYWxpemVOYXZpZ2F0aW9uKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBhZnRlciBuYXZpZ2F0aW9uLCBhbGwgbWF0Y2hlZCBjb21wb25lbnRzIGFyZSByZXNvbHZlZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0b0xvY2F0aW9uLCBmcm9tLCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICAvLyByZXZlcnQgdGhlIG5hdmlnYXRpb25cclxuICAgICAgICAgICAgICAgIGlmIChmYWlsdXJlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGluZm8uZGVsdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcm91dGVySGlzdG9yeS5nbygtaW5mby5kZWx0YSwgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChpbmZvLnR5cGUgPT09IE5hdmlnYXRpb25UeXBlLnBvcCAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpc05hdmlnYXRpb25GYWlsdXJlKGZhaWx1cmUsIDQgLyogTkFWSUdBVElPTl9BQk9SVEVEICovIHwgMTYgLyogTkFWSUdBVElPTl9EVVBMSUNBVEVEICovKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBtYW51YWwgY2hhbmdlIGluIGhhc2ggaGlzdG9yeSAjOTE2XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGl0J3MgbGlrZSBhIHB1c2ggYnV0IGxhY2tzIHRoZSBpbmZvcm1hdGlvbiBvZiB0aGUgZGlyZWN0aW9uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJvdXRlckhpc3RvcnkuZ28oLTEsIGZhbHNlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0cmlnZ2VyQWZ0ZXJFYWNoKHRvTG9jYXRpb24sIGZyb20sIGZhaWx1cmUpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLmNhdGNoKG5vb3ApO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgLy8gSW5pdGlhbGl6YXRpb24gYW5kIEVycm9yc1xyXG4gICAgbGV0IHJlYWR5SGFuZGxlcnMgPSB1c2VDYWxsYmFja3MoKTtcclxuICAgIGxldCBlcnJvckhhbmRsZXJzID0gdXNlQ2FsbGJhY2tzKCk7XHJcbiAgICBsZXQgcmVhZHk7XHJcbiAgICAvKipcclxuICAgICAqIFRyaWdnZXIgZXJyb3JIYW5kbGVycyBhZGRlZCB2aWEgb25FcnJvciBhbmQgdGhyb3dzIHRoZSBlcnJvciBhcyB3ZWxsXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGVycm9yIC0gZXJyb3IgdG8gdGhyb3dcclxuICAgICAqIEBwYXJhbSB0byAtIGxvY2F0aW9uIHdlIHdlcmUgbmF2aWdhdGluZyB0byB3aGVuIHRoZSBlcnJvciBoYXBwZW5lZFxyXG4gICAgICogQHBhcmFtIGZyb20gLSBsb2NhdGlvbiB3ZSB3ZXJlIG5hdmlnYXRpbmcgZnJvbSB3aGVuIHRoZSBlcnJvciBoYXBwZW5lZFxyXG4gICAgICogQHJldHVybnMgdGhlIGVycm9yIGFzIGEgcmVqZWN0ZWQgcHJvbWlzZVxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiB0cmlnZ2VyRXJyb3IoZXJyb3IsIHRvLCBmcm9tKSB7XHJcbiAgICAgICAgbWFya0FzUmVhZHkoZXJyb3IpO1xyXG4gICAgICAgIGNvbnN0IGxpc3QgPSBlcnJvckhhbmRsZXJzLmxpc3QoKTtcclxuICAgICAgICBpZiAobGlzdC5sZW5ndGgpIHtcclxuICAgICAgICAgICAgbGlzdC5mb3JFYWNoKGhhbmRsZXIgPT4gaGFuZGxlcihlcnJvciwgdG8sIGZyb20pKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcclxuICAgICAgICAgICAgICAgIHdhcm4oJ3VuY2F1Z2h0IGVycm9yIGR1cmluZyByb3V0ZSBuYXZpZ2F0aW9uOicpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpO1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gaXNSZWFkeSgpIHtcclxuICAgICAgICBpZiAocmVhZHkgJiYgY3VycmVudFJvdXRlLnZhbHVlICE9PSBTVEFSVF9MT0NBVElPTl9OT1JNQUxJWkVEKVxyXG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICAgICAgcmVhZHlIYW5kbGVycy5hZGQoW3Jlc29sdmUsIHJlamVjdF0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gbWFya0FzUmVhZHkoZXJyKSB7XHJcbiAgICAgICAgaWYgKCFyZWFkeSkge1xyXG4gICAgICAgICAgICAvLyBzdGlsbCBub3QgcmVhZHkgaWYgYW4gZXJyb3IgaGFwcGVuZWRcclxuICAgICAgICAgICAgcmVhZHkgPSAhZXJyO1xyXG4gICAgICAgICAgICBzZXR1cExpc3RlbmVycygpO1xyXG4gICAgICAgICAgICByZWFkeUhhbmRsZXJzXHJcbiAgICAgICAgICAgICAgICAubGlzdCgpXHJcbiAgICAgICAgICAgICAgICAuZm9yRWFjaCgoW3Jlc29sdmUsIHJlamVjdF0pID0+IChlcnIgPyByZWplY3QoZXJyKSA6IHJlc29sdmUoKSkpO1xyXG4gICAgICAgICAgICByZWFkeUhhbmRsZXJzLnJlc2V0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBlcnI7XHJcbiAgICB9XHJcbiAgICAvLyBTY3JvbGwgYmVoYXZpb3JcclxuICAgIGZ1bmN0aW9uIGhhbmRsZVNjcm9sbCh0bywgZnJvbSwgaXNQdXNoLCBpc0ZpcnN0TmF2aWdhdGlvbikge1xyXG4gICAgICAgIGNvbnN0IHsgc2Nyb2xsQmVoYXZpb3IgfSA9IG9wdGlvbnM7XHJcbiAgICAgICAgaWYgKCFpc0Jyb3dzZXIgfHwgIXNjcm9sbEJlaGF2aW9yKVxyXG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XHJcbiAgICAgICAgY29uc3Qgc2Nyb2xsUG9zaXRpb24gPSAoIWlzUHVzaCAmJiBnZXRTYXZlZFNjcm9sbFBvc2l0aW9uKGdldFNjcm9sbEtleSh0by5mdWxsUGF0aCwgMCkpKSB8fFxyXG4gICAgICAgICAgICAoKGlzRmlyc3ROYXZpZ2F0aW9uIHx8ICFpc1B1c2gpICYmXHJcbiAgICAgICAgICAgICAgICBoaXN0b3J5LnN0YXRlICYmXHJcbiAgICAgICAgICAgICAgICBoaXN0b3J5LnN0YXRlLnNjcm9sbCkgfHxcclxuICAgICAgICAgICAgbnVsbDtcclxuICAgICAgICByZXR1cm4gbmV4dFRpY2soKVxyXG4gICAgICAgICAgICAudGhlbigoKSA9PiBzY3JvbGxCZWhhdmlvcih0bywgZnJvbSwgc2Nyb2xsUG9zaXRpb24pKVxyXG4gICAgICAgICAgICAudGhlbihwb3NpdGlvbiA9PiBwb3NpdGlvbiAmJiBzY3JvbGxUb1Bvc2l0aW9uKHBvc2l0aW9uKSlcclxuICAgICAgICAgICAgLmNhdGNoKGVyciA9PiB0cmlnZ2VyRXJyb3IoZXJyLCB0bywgZnJvbSkpO1xyXG4gICAgfVxyXG4gICAgY29uc3QgZ28gPSAoZGVsdGEpID0+IHJvdXRlckhpc3RvcnkuZ28oZGVsdGEpO1xyXG4gICAgbGV0IHN0YXJ0ZWQ7XHJcbiAgICBjb25zdCBpbnN0YWxsZWRBcHBzID0gbmV3IFNldCgpO1xyXG4gICAgY29uc3Qgcm91dGVyID0ge1xyXG4gICAgICAgIGN1cnJlbnRSb3V0ZSxcclxuICAgICAgICBhZGRSb3V0ZSxcclxuICAgICAgICByZW1vdmVSb3V0ZSxcclxuICAgICAgICBoYXNSb3V0ZSxcclxuICAgICAgICBnZXRSb3V0ZXMsXHJcbiAgICAgICAgcmVzb2x2ZSxcclxuICAgICAgICBvcHRpb25zLFxyXG4gICAgICAgIHB1c2gsXHJcbiAgICAgICAgcmVwbGFjZSxcclxuICAgICAgICBnbyxcclxuICAgICAgICBiYWNrOiAoKSA9PiBnbygtMSksXHJcbiAgICAgICAgZm9yd2FyZDogKCkgPT4gZ28oMSksXHJcbiAgICAgICAgYmVmb3JlRWFjaDogYmVmb3JlR3VhcmRzLmFkZCxcclxuICAgICAgICBiZWZvcmVSZXNvbHZlOiBiZWZvcmVSZXNvbHZlR3VhcmRzLmFkZCxcclxuICAgICAgICBhZnRlckVhY2g6IGFmdGVyR3VhcmRzLmFkZCxcclxuICAgICAgICBvbkVycm9yOiBlcnJvckhhbmRsZXJzLmFkZCxcclxuICAgICAgICBpc1JlYWR5LFxyXG4gICAgICAgIGluc3RhbGwoYXBwKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJvdXRlciA9IHRoaXM7XHJcbiAgICAgICAgICAgIGFwcC5jb21wb25lbnQoJ1JvdXRlckxpbmsnLCBSb3V0ZXJMaW5rKTtcclxuICAgICAgICAgICAgYXBwLmNvbXBvbmVudCgnUm91dGVyVmlldycsIFJvdXRlclZpZXcpO1xyXG4gICAgICAgICAgICBhcHAuY29uZmlnLmdsb2JhbFByb3BlcnRpZXMuJHJvdXRlciA9IHJvdXRlcjtcclxuICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGFwcC5jb25maWcuZ2xvYmFsUHJvcGVydGllcywgJyRyb3V0ZScsIHtcclxuICAgICAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBnZXQ6ICgpID0+IHVucmVmKGN1cnJlbnRSb3V0ZSksXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAvLyB0aGlzIGluaXRpYWwgbmF2aWdhdGlvbiBpcyBvbmx5IG5lY2Vzc2FyeSBvbiBjbGllbnQsIG9uIHNlcnZlciBpdCBkb2Vzbid0XHJcbiAgICAgICAgICAgIC8vIG1ha2Ugc2Vuc2UgYmVjYXVzZSBpdCB3aWxsIGNyZWF0ZSBhbiBleHRyYSB1bm5lY2Vzc2FyeSBuYXZpZ2F0aW9uIGFuZCBjb3VsZFxyXG4gICAgICAgICAgICAvLyBsZWFkIHRvIHByb2JsZW1zXHJcbiAgICAgICAgICAgIGlmIChpc0Jyb3dzZXIgJiZcclxuICAgICAgICAgICAgICAgIC8vIHVzZWQgZm9yIHRoZSBpbml0aWFsIG5hdmlnYXRpb24gY2xpZW50IHNpZGUgdG8gYXZvaWQgcHVzaGluZ1xyXG4gICAgICAgICAgICAgICAgLy8gbXVsdGlwbGUgdGltZXMgd2hlbiB0aGUgcm91dGVyIGlzIHVzZWQgaW4gbXVsdGlwbGUgYXBwc1xyXG4gICAgICAgICAgICAgICAgIXN0YXJ0ZWQgJiZcclxuICAgICAgICAgICAgICAgIGN1cnJlbnRSb3V0ZS52YWx1ZSA9PT0gU1RBUlRfTE9DQVRJT05fTk9STUFMSVpFRCkge1xyXG4gICAgICAgICAgICAgICAgLy8gc2VlIGFib3ZlXHJcbiAgICAgICAgICAgICAgICBzdGFydGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIHB1c2gocm91dGVySGlzdG9yeS5sb2NhdGlvbikuY2F0Y2goZXJyID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB3YXJuKCdVbmV4cGVjdGVkIGVycm9yIHdoZW4gc3RhcnRpbmcgdGhlIHJvdXRlcjonLCBlcnIpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29uc3QgcmVhY3RpdmVSb3V0ZSA9IHt9O1xyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBTVEFSVF9MT0NBVElPTl9OT1JNQUxJWkVEKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yOiB0aGUga2V5IG1hdGNoZXNcclxuICAgICAgICAgICAgICAgIHJlYWN0aXZlUm91dGVba2V5XSA9IGNvbXB1dGVkKCgpID0+IGN1cnJlbnRSb3V0ZS52YWx1ZVtrZXldKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBhcHAucHJvdmlkZShyb3V0ZXJLZXksIHJvdXRlcik7XHJcbiAgICAgICAgICAgIGFwcC5wcm92aWRlKHJvdXRlTG9jYXRpb25LZXksIHJlYWN0aXZlKHJlYWN0aXZlUm91dGUpKTtcclxuICAgICAgICAgICAgYXBwLnByb3ZpZGUocm91dGVyVmlld0xvY2F0aW9uS2V5LCBjdXJyZW50Um91dGUpO1xyXG4gICAgICAgICAgICBjb25zdCB1bm1vdW50QXBwID0gYXBwLnVubW91bnQ7XHJcbiAgICAgICAgICAgIGluc3RhbGxlZEFwcHMuYWRkKGFwcCk7XHJcbiAgICAgICAgICAgIGFwcC51bm1vdW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgaW5zdGFsbGVkQXBwcy5kZWxldGUoYXBwKTtcclxuICAgICAgICAgICAgICAgIC8vIHRoZSByb3V0ZXIgaXMgbm90IGF0dGFjaGVkIHRvIGFuIGFwcCBhbnltb3JlXHJcbiAgICAgICAgICAgICAgICBpZiAoaW5zdGFsbGVkQXBwcy5zaXplIDwgMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGludmFsaWRhdGUgdGhlIGN1cnJlbnQgbmF2aWdhdGlvblxyXG4gICAgICAgICAgICAgICAgICAgIHBlbmRpbmdMb2NhdGlvbiA9IFNUQVJUX0xPQ0FUSU9OX05PUk1BTElaRUQ7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVtb3ZlSGlzdG9yeUxpc3RlbmVyICYmIHJlbW92ZUhpc3RvcnlMaXN0ZW5lcigpO1xyXG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRSb3V0ZS52YWx1ZSA9IFNUQVJUX0xPQ0FUSU9OX05PUk1BTElaRUQ7XHJcbiAgICAgICAgICAgICAgICAgICAgc3RhcnRlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlYWR5ID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB1bm1vdW50QXBwKCk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIGlmICgoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHx8IF9fVlVFX1BST0RfREVWVE9PTFNfXykgJiYgaXNCcm93c2VyKSB7XHJcbiAgICAgICAgICAgICAgICBhZGREZXZ0b29scyhhcHAsIHJvdXRlciwgbWF0Y2hlcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgfTtcclxuICAgIHJldHVybiByb3V0ZXI7XHJcbn1cclxuZnVuY3Rpb24gcnVuR3VhcmRRdWV1ZShndWFyZHMpIHtcclxuICAgIHJldHVybiBndWFyZHMucmVkdWNlKChwcm9taXNlLCBndWFyZCkgPT4gcHJvbWlzZS50aGVuKCgpID0+IGd1YXJkKCkpLCBQcm9taXNlLnJlc29sdmUoKSk7XHJcbn1cclxuZnVuY3Rpb24gZXh0cmFjdENoYW5naW5nUmVjb3Jkcyh0bywgZnJvbSkge1xyXG4gICAgY29uc3QgbGVhdmluZ1JlY29yZHMgPSBbXTtcclxuICAgIGNvbnN0IHVwZGF0aW5nUmVjb3JkcyA9IFtdO1xyXG4gICAgY29uc3QgZW50ZXJpbmdSZWNvcmRzID0gW107XHJcbiAgICBjb25zdCBsZW4gPSBNYXRoLm1heChmcm9tLm1hdGNoZWQubGVuZ3RoLCB0by5tYXRjaGVkLmxlbmd0aCk7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XHJcbiAgICAgICAgY29uc3QgcmVjb3JkRnJvbSA9IGZyb20ubWF0Y2hlZFtpXTtcclxuICAgICAgICBpZiAocmVjb3JkRnJvbSkge1xyXG4gICAgICAgICAgICBpZiAodG8ubWF0Y2hlZC5maW5kKHJlY29yZCA9PiBpc1NhbWVSb3V0ZVJlY29yZChyZWNvcmQsIHJlY29yZEZyb20pKSlcclxuICAgICAgICAgICAgICAgIHVwZGF0aW5nUmVjb3Jkcy5wdXNoKHJlY29yZEZyb20pO1xyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICBsZWF2aW5nUmVjb3Jkcy5wdXNoKHJlY29yZEZyb20pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCByZWNvcmRUbyA9IHRvLm1hdGNoZWRbaV07XHJcbiAgICAgICAgaWYgKHJlY29yZFRvKSB7XHJcbiAgICAgICAgICAgIC8vIHRoZSB0eXBlIGRvZXNuJ3QgbWF0dGVyIGJlY2F1c2Ugd2UgYXJlIGNvbXBhcmluZyBwZXIgcmVmZXJlbmNlXHJcbiAgICAgICAgICAgIGlmICghZnJvbS5tYXRjaGVkLmZpbmQocmVjb3JkID0+IGlzU2FtZVJvdXRlUmVjb3JkKHJlY29yZCwgcmVjb3JkVG8pKSkge1xyXG4gICAgICAgICAgICAgICAgZW50ZXJpbmdSZWNvcmRzLnB1c2gocmVjb3JkVG8pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIFtsZWF2aW5nUmVjb3JkcywgdXBkYXRpbmdSZWNvcmRzLCBlbnRlcmluZ1JlY29yZHNdO1xyXG59XG5cbi8qKlxyXG4gKiBSZXR1cm5zIHRoZSByb3V0ZXIgaW5zdGFuY2UuIEVxdWl2YWxlbnQgdG8gdXNpbmcgYCRyb3V0ZXJgIGluc2lkZVxyXG4gKiB0ZW1wbGF0ZXMuXHJcbiAqL1xyXG5mdW5jdGlvbiB1c2VSb3V0ZXIoKSB7XHJcbiAgICByZXR1cm4gaW5qZWN0KHJvdXRlcktleSk7XHJcbn1cclxuLyoqXHJcbiAqIFJldHVybnMgdGhlIGN1cnJlbnQgcm91dGUgbG9jYXRpb24uIEVxdWl2YWxlbnQgdG8gdXNpbmcgYCRyb3V0ZWAgaW5zaWRlXHJcbiAqIHRlbXBsYXRlcy5cclxuICovXHJcbmZ1bmN0aW9uIHVzZVJvdXRlKCkge1xyXG4gICAgcmV0dXJuIGluamVjdChyb3V0ZUxvY2F0aW9uS2V5KTtcclxufVxuXG5leHBvcnQgeyBOYXZpZ2F0aW9uRmFpbHVyZVR5cGUsIFJvdXRlckxpbmssIFJvdXRlclZpZXcsIFNUQVJUX0xPQ0FUSU9OX05PUk1BTElaRUQgYXMgU1RBUlRfTE9DQVRJT04sIGNyZWF0ZU1lbW9yeUhpc3RvcnksIGNyZWF0ZVJvdXRlciwgY3JlYXRlUm91dGVyTWF0Y2hlciwgY3JlYXRlV2ViSGFzaEhpc3RvcnksIGNyZWF0ZVdlYkhpc3RvcnksIGlzTmF2aWdhdGlvbkZhaWx1cmUsIG1hdGNoZWRSb3V0ZUtleSwgb25CZWZvcmVSb3V0ZUxlYXZlLCBvbkJlZm9yZVJvdXRlVXBkYXRlLCBwYXJzZVF1ZXJ5LCByb3V0ZUxvY2F0aW9uS2V5LCByb3V0ZXJLZXksIHJvdXRlclZpZXdMb2NhdGlvbktleSwgc3RyaW5naWZ5UXVlcnksIHVzZUxpbmssIHVzZVJvdXRlLCB1c2VSb3V0ZXIsIHZpZXdEZXB0aEtleSB9O1xuIiwiXG5jb25zdCByb3V0ZXMgPSBbXG4gIHtcbiAgICBwYXRoOiAnLycsXG4gICAgY29tcG9uZW50OiAoKSA9PiBpbXBvcnQoJ2xheW91dHMvTWFpbkxheW91dC52dWUnKSxcbiAgICBjaGlsZHJlbjogW1xuICAgICAgeyBwYXRoOiAnJywgY29tcG9uZW50OiAoKSA9PiBpbXBvcnQoJ3BhZ2VzL0luZGV4UGFnZS52dWUnKSB9XG4gICAgXVxuICB9LFxuXG4gIC8vIEFsd2F5cyBsZWF2ZSB0aGlzIGFzIGxhc3Qgb25lLFxuICAvLyBidXQgeW91IGNhbiBhbHNvIHJlbW92ZSBpdFxuICB7XG4gICAgcGF0aDogJy86Y2F0Y2hBbGwoLiopKicsXG4gICAgY29tcG9uZW50OiAoKSA9PiBpbXBvcnQoJ3BhZ2VzL0Vycm9yTm90Rm91bmQudnVlJylcbiAgfVxuXVxuXG5leHBvcnQgZGVmYXVsdCByb3V0ZXNcbiIsImltcG9ydCB7IHJvdXRlIH0gZnJvbSAncXVhc2FyL3dyYXBwZXJzJ1xuaW1wb3J0IHsgY3JlYXRlUm91dGVyLCBjcmVhdGVNZW1vcnlIaXN0b3J5LCBjcmVhdGVXZWJIaXN0b3J5LCBjcmVhdGVXZWJIYXNoSGlzdG9yeSB9IGZyb20gJ3Z1ZS1yb3V0ZXInXG5pbXBvcnQgcm91dGVzIGZyb20gJy4vcm91dGVzJ1xuXG4vKlxuICogSWYgbm90IGJ1aWxkaW5nIHdpdGggU1NSIG1vZGUsIHlvdSBjYW5cbiAqIGRpcmVjdGx5IGV4cG9ydCB0aGUgUm91dGVyIGluc3RhbnRpYXRpb247XG4gKlxuICogVGhlIGZ1bmN0aW9uIGJlbG93IGNhbiBiZSBhc3luYyB0b287IGVpdGhlciB1c2VcbiAqIGFzeW5jL2F3YWl0IG9yIHJldHVybiBhIFByb21pc2Ugd2hpY2ggcmVzb2x2ZXNcbiAqIHdpdGggdGhlIFJvdXRlciBpbnN0YW5jZS5cbiAqL1xuXG5leHBvcnQgZGVmYXVsdCByb3V0ZShmdW5jdGlvbiAoLyogeyBzdG9yZSwgc3NyQ29udGV4dCB9ICovKSB7XG4gIGNvbnN0IGNyZWF0ZUhpc3RvcnkgPSBwcm9jZXNzLmVudi5TRVJWRVJcbiAgICA/IGNyZWF0ZU1lbW9yeUhpc3RvcnlcbiAgICA6IChwcm9jZXNzLmVudi5WVUVfUk9VVEVSX01PREUgPT09ICdoaXN0b3J5JyA/IGNyZWF0ZVdlYkhpc3RvcnkgOiBjcmVhdGVXZWJIYXNoSGlzdG9yeSlcblxuICBjb25zdCBSb3V0ZXIgPSBjcmVhdGVSb3V0ZXIoe1xuICAgIHNjcm9sbEJlaGF2aW9yOiAoKSA9PiAoeyBsZWZ0OiAwLCB0b3A6IDAgfSksXG4gICAgcm91dGVzLFxuXG4gICAgLy8gTGVhdmUgdGhpcyBhcyBpcyBhbmQgbWFrZSBjaGFuZ2VzIGluIHF1YXNhci5jb25mLmpzIGluc3RlYWQhXG4gICAgLy8gcXVhc2FyLmNvbmYuanMgLT4gYnVpbGQgLT4gdnVlUm91dGVyTW9kZVxuICAgIC8vIHF1YXNhci5jb25mLmpzIC0+IGJ1aWxkIC0+IHB1YmxpY1BhdGhcbiAgICBoaXN0b3J5OiBjcmVhdGVIaXN0b3J5KHByb2Nlc3MuZW52LlZVRV9ST1VURVJfQkFTRSlcbiAgfSlcblxuICByZXR1cm4gUm91dGVyXG59KVxuIiwiLyogZXNsaW50LWRpc2FibGUgKi9cbi8qKlxuICogVEhJUyBGSUxFIElTIEdFTkVSQVRFRCBBVVRPTUFUSUNBTExZLlxuICogRE8gTk9UIEVESVQuXG4gKlxuICogWW91IGFyZSBwcm9iYWJseSBsb29raW5nIG9uIGFkZGluZyBzdGFydHVwL2luaXRpYWxpemF0aW9uIGNvZGUuXG4gKiBVc2UgXCJxdWFzYXIgbmV3IGJvb3QgPG5hbWU+XCIgYW5kIGFkZCBpdCB0aGVyZS5cbiAqIE9uZSBib290IGZpbGUgcGVyIGNvbmNlcm4uIFRoZW4gcmVmZXJlbmNlIHRoZSBmaWxlKHMpIGluIHF1YXNhci5jb25maWcuanMgPiBib290OlxuICogYm9vdDogWydmaWxlJywgLi4uXSAvLyBkbyBub3QgYWRkIFwiLmpzXCIgZXh0ZW5zaW9uIHRvIGl0LlxuICpcbiAqIEJvb3QgZmlsZXMgYXJlIHlvdXIgXCJtYWluLmpzXCJcbiAqKi9cblxuXG5cbmltcG9ydCB7IFF1YXNhciB9IGZyb20gJ3F1YXNhcidcbmltcG9ydCB7IG1hcmtSYXcgfSBmcm9tICd2dWUnXG5pbXBvcnQgUm9vdENvbXBvbmVudCBmcm9tICdhcHAvc3JjL0FwcC52dWUnXG5cbmltcG9ydCBjcmVhdGVTdG9yZSBmcm9tICdhcHAvc3JjL3N0b3Jlcy9pbmRleCdcbmltcG9ydCBjcmVhdGVSb3V0ZXIgZnJvbSAnYXBwL3NyYy9yb3V0ZXIvaW5kZXgnXG5cblxuXG5cblxuXG5cbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIChjcmVhdGVBcHBGbiwgcXVhc2FyVXNlck9wdGlvbnMpIHtcbiAgLy8gQ3JlYXRlIHRoZSBhcHAgaW5zdGFuY2UuXG4gIC8vIEhlcmUgd2UgaW5qZWN0IGludG8gaXQgdGhlIFF1YXNhciBVSSwgdGhlIHJvdXRlciAmIHBvc3NpYmx5IHRoZSBzdG9yZS5cbiAgY29uc3QgYXBwID0gY3JlYXRlQXBwRm4oUm9vdENvbXBvbmVudClcblxuICBcblxuICBhcHAudXNlKFF1YXNhciwgcXVhc2FyVXNlck9wdGlvbnMpXG5cbiAgXG5cbiAgXG4gICAgY29uc3Qgc3RvcmUgPSB0eXBlb2YgY3JlYXRlU3RvcmUgPT09ICdmdW5jdGlvbidcbiAgICAgID8gYXdhaXQgY3JlYXRlU3RvcmUoe30pXG4gICAgICA6IGNyZWF0ZVN0b3JlXG5cbiAgICBcbiAgICAgIGFwcC51c2Uoc3RvcmUpXG5cbiAgICAgIFxuICAgIFxuICBcblxuICBjb25zdCByb3V0ZXIgPSBtYXJrUmF3KFxuICAgIHR5cGVvZiBjcmVhdGVSb3V0ZXIgPT09ICdmdW5jdGlvbidcbiAgICAgID8gYXdhaXQgY3JlYXRlUm91dGVyKHtzdG9yZX0pXG4gICAgICA6IGNyZWF0ZVJvdXRlclxuICApXG5cbiAgXG4gICAgLy8gbWFrZSByb3V0ZXIgaW5zdGFuY2UgYXZhaWxhYmxlIGluIHN0b3JlXG4gICAgXG4gICAgICBzdG9yZS51c2UoKHsgc3RvcmUgfSkgPT4geyBzdG9yZS5yb3V0ZXIgPSByb3V0ZXIgfSlcbiAgICBcbiAgXG5cbiAgLy8gRXhwb3NlIHRoZSBhcHAsIHRoZSByb3V0ZXIgYW5kIHRoZSBzdG9yZS5cbiAgLy8gTm90ZSB0aGF0IHdlIGFyZSBub3QgbW91bnRpbmcgdGhlIGFwcCBoZXJlLCBzaW5jZSBib290c3RyYXBwaW5nIHdpbGwgYmVcbiAgLy8gZGlmZmVyZW50IGRlcGVuZGluZyBvbiB3aGV0aGVyIHdlIGFyZSBpbiBhIGJyb3dzZXIgb3Igb24gdGhlIHNlcnZlci5cbiAgcmV0dXJuIHtcbiAgICBhcHAsXG4gICAgc3RvcmUsXG4gICAgcm91dGVyXG4gIH1cbn1cbiIsImltcG9ydCB7IGNvbXB1dGVkIH0gZnJvbSAndnVlJ1xuXG5leHBvcnQgY29uc3QgdXNlU2l6ZURlZmF1bHRzID0ge1xuICB4czogMTgsXG4gIHNtOiAyNCxcbiAgbWQ6IDMyLFxuICBsZzogMzgsXG4gIHhsOiA0NlxufVxuXG5leHBvcnQgY29uc3QgdXNlU2l6ZVByb3BzID0ge1xuICBzaXplOiBTdHJpbmdcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gKHByb3BzLCBzaXplcyA9IHVzZVNpemVEZWZhdWx0cykge1xuICAvLyByZXR1cm4gc2l6ZVN0eWxlXG4gIHJldHVybiBjb21wdXRlZCgoKSA9PiAoXG4gICAgcHJvcHMuc2l6ZSAhPT0gdm9pZCAwXG4gICAgICA/IHsgZm9udFNpemU6IHByb3BzLnNpemUgaW4gc2l6ZXMgPyBgJHsgc2l6ZXNbIHByb3BzLnNpemUgXSB9cHhgIDogcHJvcHMuc2l6ZSB9XG4gICAgICA6IG51bGxcbiAgKSlcbn1cbiIsImltcG9ydCB7IGRlZmluZUNvbXBvbmVudCwgbWFya1JhdyB9IGZyb20gJ3Z1ZSdcblxuZXhwb3J0IGNvbnN0IGNyZWF0ZUNvbXBvbmVudCA9IHJhdyA9PiBtYXJrUmF3KGRlZmluZUNvbXBvbmVudChyYXcpKVxuZXhwb3J0IGNvbnN0IGNyZWF0ZURpcmVjdGl2ZSA9IHJhdyA9PiBtYXJrUmF3KHJhdylcbiIsImltcG9ydCB7IGgsIHdpdGhEaXJlY3RpdmVzIH0gZnJvbSAndnVlJ1xuXG5leHBvcnQgZnVuY3Rpb24gaFNsb3QgKHNsb3QsIG90aGVyd2lzZSkge1xuICByZXR1cm4gc2xvdCAhPT0gdm9pZCAwXG4gICAgPyBzbG90KCkgfHwgb3RoZXJ3aXNlXG4gICAgOiBvdGhlcndpc2Vcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGhVbmlxdWVTbG90IChzbG90LCBvdGhlcndpc2UpIHtcbiAgaWYgKHNsb3QgIT09IHZvaWQgMCkge1xuICAgIGNvbnN0IHZub2RlID0gc2xvdCgpXG4gICAgaWYgKHZub2RlICE9PSB2b2lkIDAgJiYgdm5vZGUgIT09IG51bGwpIHtcbiAgICAgIHJldHVybiB2bm9kZS5zbGljZSgpXG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIG90aGVyd2lzZVxufVxuXG4vKipcbiAqIFNvdXJjZSBkZWZpbml0ZWx5IGV4aXN0cyxcbiAqIHNvIGl0J3MgbWVyZ2VkIHdpdGggdGhlIHBvc3NpYmxlIHNsb3RcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGhNZXJnZVNsb3QgKHNsb3QsIHNvdXJjZSkge1xuICByZXR1cm4gc2xvdCAhPT0gdm9pZCAwXG4gICAgPyBzb3VyY2UuY29uY2F0KHNsb3QoKSlcbiAgICA6IHNvdXJjZVxufVxuXG4vKipcbiAqIE1lcmdlIHdpdGggcG9zc2libGUgc2xvdCxcbiAqIGV2ZW4gaWYgc291cmNlIG1pZ2h0IG5vdCBleGlzdFxuICovXG5leHBvcnQgZnVuY3Rpb24gaE1lcmdlU2xvdFNhZmVseSAoc2xvdCwgc291cmNlKSB7XG4gIGlmIChzbG90ID09PSB2b2lkIDApIHtcbiAgICByZXR1cm4gc291cmNlXG4gIH1cblxuICByZXR1cm4gc291cmNlICE9PSB2b2lkIDBcbiAgICA/IHNvdXJjZS5jb25jYXQoc2xvdCgpKVxuICAgIDogc2xvdCgpXG59XG5cbi8qXG4gKiAoU3RyaW5nKSAga2V5ICAgICAgIC0gdW5pcXVlIHZub2RlIGtleVxuICogKEJvb2xlYW4pIGNvbmRpdGlvbiAtIHNob3VsZCBjaGFuZ2UgT05MWSB3aGVuIGFkZGluZy9yZW1vdmluZyBkaXJlY3RpdmVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGhEaXIgKFxuICB0YWcsXG4gIGRhdGEsXG4gIGNoaWxkcmVuLFxuICBrZXksXG4gIGNvbmRpdGlvbixcbiAgZ2V0RGlyc0ZuXG4pIHtcbiAgZGF0YS5rZXkgPSBrZXkgKyBjb25kaXRpb25cblxuICBjb25zdCB2bm9kZSA9IGgodGFnLCBkYXRhLCBjaGlsZHJlbilcblxuICByZXR1cm4gY29uZGl0aW9uID09PSB0cnVlXG4gICAgPyB3aXRoRGlyZWN0aXZlcyh2bm9kZSwgZ2V0RGlyc0ZuKCkpXG4gICAgOiB2bm9kZVxufVxuIiwiaW1wb3J0IHsgaCwgY29tcHV0ZWQsIGdldEN1cnJlbnRJbnN0YW5jZSB9IGZyb20gJ3Z1ZSdcblxuaW1wb3J0IHVzZVNpemUsIHsgdXNlU2l6ZVByb3BzIH0gZnJvbSAnLi4vLi4vY29tcG9zYWJsZXMvcHJpdmF0ZS91c2Utc2l6ZS5qcydcblxuaW1wb3J0IHsgY3JlYXRlQ29tcG9uZW50IH0gZnJvbSAnLi4vLi4vdXRpbHMvcHJpdmF0ZS9jcmVhdGUuanMnXG5pbXBvcnQgeyBoU2xvdCwgaE1lcmdlU2xvdCB9IGZyb20gJy4uLy4uL3V0aWxzL3ByaXZhdGUvcmVuZGVyLmpzJ1xuXG5jb25zdCBkZWZhdWx0Vmlld0JveCA9ICcwIDAgMjQgMjQnXG5cbmNvbnN0IHNhbWVGbiA9IGkgPT4gaVxuY29uc3QgaW9uRm4gPSBpID0+IGBpb25pY29ucyAkeyBpIH1gXG5cbmNvbnN0IGxpYk1hcCA9IHtcbiAgJ21kaS0nOiBpID0+IGBtZGkgJHsgaSB9YCxcbiAgJ2ljb24tJzogc2FtZUZuLCAvLyBmb250YXdlc29tZSBlcXVpdlxuICAnYnQtJzogaSA9PiBgYnQgJHsgaSB9YCxcbiAgJ2V2YS0nOiBpID0+IGBldmEgJHsgaSB9YCxcbiAgJ2lvbi1tZCc6IGlvbkZuLFxuICAnaW9uLWlvcyc6IGlvbkZuLFxuICAnaW9uLWxvZ28nOiBpb25GbixcbiAgJ2ljb25mb250ICc6IHNhbWVGbixcbiAgJ3RpLSc6IGkgPT4gYHRoZW1pZnktaWNvbiAkeyBpIH1gLFxuICAnYmktJzogaSA9PiBgYm9vdHN0cmFwLWljb25zICR7IGkgfWBcbn1cblxuY29uc3QgbWF0TWFwID0ge1xuICBvXzogJy1vdXRsaW5lZCcsXG4gIHJfOiAnLXJvdW5kJyxcbiAgc186ICctc2hhcnAnXG59XG5cbmNvbnN0IGxpYlJFID0gbmV3IFJlZ0V4cCgnXignICsgT2JqZWN0LmtleXMobGliTWFwKS5qb2luKCd8JykgKyAnKScpXG5jb25zdCBtYXRSRSA9IG5ldyBSZWdFeHAoJ14oJyArIE9iamVjdC5rZXlzKG1hdE1hcCkuam9pbignfCcpICsgJyknKVxuY29uc3QgbVJFID0gL15bTW1dXFxzP1stK10/XFwuP1xcZC9cbmNvbnN0IGltZ1JFID0gL15pbWc6L1xuY29uc3Qgc3ZnVXNlUkUgPSAvXnN2Z3VzZTovXG5jb25zdCBpb25SRSA9IC9eaW9uLS9cbmNvbnN0IGZhUkUgPSAvXihmYS0oc29saWR8cmVndWxhcnxsaWdodHxicmFuZHN8ZHVvdG9uZXx0aGluKXxbbGZdYVtzcmxiZGtdPykgL1xuXG5leHBvcnQgZGVmYXVsdCBjcmVhdGVDb21wb25lbnQoe1xuICBuYW1lOiAnUUljb24nLFxuXG4gIHByb3BzOiB7XG4gICAgLi4udXNlU2l6ZVByb3BzLFxuXG4gICAgdGFnOiB7XG4gICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICBkZWZhdWx0OiAnaSdcbiAgICB9LFxuXG4gICAgbmFtZTogU3RyaW5nLFxuICAgIGNvbG9yOiBTdHJpbmcsXG4gICAgbGVmdDogQm9vbGVhbixcbiAgICByaWdodDogQm9vbGVhblxuICB9LFxuXG4gIHNldHVwIChwcm9wcywgeyBzbG90cyB9KSB7XG4gICAgY29uc3QgeyBwcm94eTogeyAkcSB9IH0gPSBnZXRDdXJyZW50SW5zdGFuY2UoKVxuICAgIGNvbnN0IHNpemVTdHlsZSA9IHVzZVNpemUocHJvcHMpXG5cbiAgICBjb25zdCBjbGFzc2VzID0gY29tcHV0ZWQoKCkgPT5cbiAgICAgICdxLWljb24nXG4gICAgICArIChwcm9wcy5sZWZ0ID09PSB0cnVlID8gJyBvbi1sZWZ0JyA6ICcnKSAvLyBUT0RPIFF2MzogZHJvcCB0aGlzXG4gICAgICArIChwcm9wcy5yaWdodCA9PT0gdHJ1ZSA/ICcgb24tcmlnaHQnIDogJycpXG4gICAgICArIChwcm9wcy5jb2xvciAhPT0gdm9pZCAwID8gYCB0ZXh0LSR7IHByb3BzLmNvbG9yIH1gIDogJycpXG4gICAgKVxuXG4gICAgY29uc3QgdHlwZSA9IGNvbXB1dGVkKCgpID0+IHtcbiAgICAgIGxldCBjbHNcbiAgICAgIGxldCBpY29uID0gcHJvcHMubmFtZVxuXG4gICAgICBpZiAoaWNvbiA9PT0gJ25vbmUnIHx8ICFpY29uKSB7XG4gICAgICAgIHJldHVybiB7IG5vbmU6IHRydWUgfVxuICAgICAgfVxuXG4gICAgICBpZiAoJHEuaWNvbk1hcEZuICE9PSBudWxsKSB7XG4gICAgICAgIGNvbnN0IHJlcyA9ICRxLmljb25NYXBGbihpY29uKVxuICAgICAgICBpZiAocmVzICE9PSB2b2lkIDApIHtcbiAgICAgICAgICBpZiAocmVzLmljb24gIT09IHZvaWQgMCkge1xuICAgICAgICAgICAgaWNvbiA9IHJlcy5pY29uXG4gICAgICAgICAgICBpZiAoaWNvbiA9PT0gJ25vbmUnIHx8ICFpY29uKSB7XG4gICAgICAgICAgICAgIHJldHVybiB7IG5vbmU6IHRydWUgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgIGNsczogcmVzLmNscyxcbiAgICAgICAgICAgICAgY29udGVudDogcmVzLmNvbnRlbnQgIT09IHZvaWQgMFxuICAgICAgICAgICAgICAgID8gcmVzLmNvbnRlbnRcbiAgICAgICAgICAgICAgICA6ICcgJ1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAobVJFLnRlc3QoaWNvbikgPT09IHRydWUpIHtcbiAgICAgICAgY29uc3QgWyBkZWYsIHZpZXdCb3ggPSBkZWZhdWx0Vmlld0JveCBdID0gaWNvbi5zcGxpdCgnfCcpXG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzdmc6IHRydWUsXG4gICAgICAgICAgdmlld0JveCxcbiAgICAgICAgICBub2RlczogZGVmLnNwbGl0KCcmJicpLm1hcChwYXRoID0+IHtcbiAgICAgICAgICAgIGNvbnN0IFsgZCwgc3R5bGUsIHRyYW5zZm9ybSBdID0gcGF0aC5zcGxpdCgnQEAnKVxuICAgICAgICAgICAgcmV0dXJuIGgoJ3BhdGgnLCB7IHN0eWxlLCBkLCB0cmFuc2Zvcm0gfSlcbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChpbWdSRS50ZXN0KGljb24pID09PSB0cnVlKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgaW1nOiB0cnVlLFxuICAgICAgICAgIHNyYzogaWNvbi5zdWJzdHJpbmcoNClcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoc3ZnVXNlUkUudGVzdChpY29uKSA9PT0gdHJ1ZSkge1xuICAgICAgICBjb25zdCBbIGRlZiwgdmlld0JveCA9IGRlZmF1bHRWaWV3Qm94IF0gPSBpY29uLnNwbGl0KCd8JylcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHN2Z3VzZTogdHJ1ZSxcbiAgICAgICAgICBzcmM6IGRlZi5zdWJzdHJpbmcoNyksXG4gICAgICAgICAgdmlld0JveFxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGxldCBjb250ZW50ID0gJyAnXG4gICAgICBjb25zdCBtYXRjaGVzID0gaWNvbi5tYXRjaChsaWJSRSlcblxuICAgICAgaWYgKG1hdGNoZXMgIT09IG51bGwpIHtcbiAgICAgICAgY2xzID0gbGliTWFwWyBtYXRjaGVzWyAxIF0gXShpY29uKVxuICAgICAgfVxuICAgICAgZWxzZSBpZiAoZmFSRS50ZXN0KGljb24pID09PSB0cnVlKSB7XG4gICAgICAgIGNscyA9IGljb25cbiAgICAgIH1cbiAgICAgIGVsc2UgaWYgKGlvblJFLnRlc3QoaWNvbikgPT09IHRydWUpIHtcbiAgICAgICAgY2xzID0gYGlvbmljb25zIGlvbi0keyAkcS5wbGF0Zm9ybS5pcy5pb3MgPT09IHRydWUgPyAnaW9zJyA6ICdtZCcgfSR7IGljb24uc3Vic3RyaW5nKDMpIH1gXG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgLy8gXCJub3RyYW5zbGF0ZVwiIGNsYXNzIGlzIGZvciBHb29nbGUgVHJhbnNsYXRlXG4gICAgICAgIC8vIHRvIGF2b2lkIHRhbXBlcmluZyB3aXRoIE1hdGVyaWFsIEljb25zIGxpZ2F0dXJlIGZvbnRcbiAgICAgICAgLy9cbiAgICAgICAgLy8gQ2F1dGlvbjogVG8gYmUgYWJsZSB0byBhZGQgc3VmZml4IHRvIHRoZSBjbGFzcyBuYW1lLFxuICAgICAgICAvLyBrZWVwIHRoZSAnbWF0ZXJpYWwtaWNvbnMnIGF0IHRoZSBlbmQgb2YgdGhlIHN0cmluZy5cbiAgICAgICAgY2xzID0gJ25vdHJhbnNsYXRlIG1hdGVyaWFsLWljb25zJ1xuXG4gICAgICAgIGNvbnN0IG1hdGNoZXMgPSBpY29uLm1hdGNoKG1hdFJFKVxuICAgICAgICBpZiAobWF0Y2hlcyAhPT0gbnVsbCkge1xuICAgICAgICAgIGljb24gPSBpY29uLnN1YnN0cmluZygyKVxuICAgICAgICAgIGNscyArPSBtYXRNYXBbIG1hdGNoZXNbIDEgXSBdXG4gICAgICAgIH1cblxuICAgICAgICBjb250ZW50ID0gaWNvblxuICAgICAgfVxuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBjbHMsXG4gICAgICAgIGNvbnRlbnRcbiAgICAgIH1cbiAgICB9KVxuXG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGNvbnN0IGRhdGEgPSB7XG4gICAgICAgIGNsYXNzOiBjbGFzc2VzLnZhbHVlLFxuICAgICAgICBzdHlsZTogc2l6ZVN0eWxlLnZhbHVlLFxuICAgICAgICAnYXJpYS1oaWRkZW4nOiAndHJ1ZScsXG4gICAgICAgIHJvbGU6ICdwcmVzZW50YXRpb24nXG4gICAgICB9XG5cbiAgICAgIGlmICh0eXBlLnZhbHVlLm5vbmUgPT09IHRydWUpIHtcbiAgICAgICAgcmV0dXJuIGgocHJvcHMudGFnLCBkYXRhLCBoU2xvdChzbG90cy5kZWZhdWx0KSlcbiAgICAgIH1cblxuICAgICAgaWYgKHR5cGUudmFsdWUuaW1nID09PSB0cnVlKSB7XG4gICAgICAgIHJldHVybiBoKCdzcGFuJywgZGF0YSwgaE1lcmdlU2xvdChzbG90cy5kZWZhdWx0LCBbXG4gICAgICAgICAgaCgnaW1nJywgeyBzcmM6IHR5cGUudmFsdWUuc3JjIH0pXG4gICAgICAgIF0pKVxuICAgICAgfVxuXG4gICAgICBpZiAodHlwZS52YWx1ZS5zdmcgPT09IHRydWUpIHtcbiAgICAgICAgcmV0dXJuIGgoJ3NwYW4nLCBkYXRhLCBoTWVyZ2VTbG90KHNsb3RzLmRlZmF1bHQsIFtcbiAgICAgICAgICBoKCdzdmcnLCB7XG4gICAgICAgICAgICB2aWV3Qm94OiB0eXBlLnZhbHVlLnZpZXdCb3hcbiAgICAgICAgICB9LCB0eXBlLnZhbHVlLm5vZGVzKVxuICAgICAgICBdKSlcbiAgICAgIH1cblxuICAgICAgaWYgKHR5cGUudmFsdWUuc3ZndXNlID09PSB0cnVlKSB7XG4gICAgICAgIHJldHVybiBoKCdzcGFuJywgZGF0YSwgaE1lcmdlU2xvdChzbG90cy5kZWZhdWx0LCBbXG4gICAgICAgICAgaCgnc3ZnJywge1xuICAgICAgICAgICAgdmlld0JveDogdHlwZS52YWx1ZS52aWV3Qm94XG4gICAgICAgICAgfSwgW1xuICAgICAgICAgICAgaCgndXNlJywgeyAneGxpbms6aHJlZic6IHR5cGUudmFsdWUuc3JjIH0pXG4gICAgICAgICAgXSlcbiAgICAgICAgXSkpXG4gICAgICB9XG5cbiAgICAgIGlmICh0eXBlLnZhbHVlLmNscyAhPT0gdm9pZCAwKSB7XG4gICAgICAgIGRhdGEuY2xhc3MgKz0gJyAnICsgdHlwZS52YWx1ZS5jbHNcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGgocHJvcHMudGFnLCBkYXRhLCBoTWVyZ2VTbG90KHNsb3RzLmRlZmF1bHQsIFtcbiAgICAgICAgdHlwZS52YWx1ZS5jb250ZW50XG4gICAgICBdKSlcbiAgICB9XG4gIH1cbn0pXG4iLCJpbXBvcnQgeyBoLCBjb21wdXRlZCB9IGZyb20gJ3Z1ZSdcblxuaW1wb3J0IFFJY29uIGZyb20gJy4uL2ljb24vUUljb24uanMnXG5cbmltcG9ydCB1c2VTaXplLCB7IHVzZVNpemVQcm9wcyB9IGZyb20gJy4uLy4uL2NvbXBvc2FibGVzL3ByaXZhdGUvdXNlLXNpemUuanMnXG5cbmltcG9ydCB7IGNyZWF0ZUNvbXBvbmVudCB9IGZyb20gJy4uLy4uL3V0aWxzL3ByaXZhdGUvY3JlYXRlLmpzJ1xuaW1wb3J0IHsgaE1lcmdlU2xvdFNhZmVseSB9IGZyb20gJy4uLy4uL3V0aWxzL3ByaXZhdGUvcmVuZGVyLmpzJ1xuXG5leHBvcnQgZGVmYXVsdCBjcmVhdGVDb21wb25lbnQoe1xuICBuYW1lOiAnUUF2YXRhcicsXG5cbiAgcHJvcHM6IHtcbiAgICAuLi51c2VTaXplUHJvcHMsXG5cbiAgICBmb250U2l6ZTogU3RyaW5nLFxuXG4gICAgY29sb3I6IFN0cmluZyxcbiAgICB0ZXh0Q29sb3I6IFN0cmluZyxcblxuICAgIGljb246IFN0cmluZyxcbiAgICBzcXVhcmU6IEJvb2xlYW4sXG4gICAgcm91bmRlZDogQm9vbGVhblxuICB9LFxuXG4gIHNldHVwIChwcm9wcywgeyBzbG90cyB9KSB7XG4gICAgY29uc3Qgc2l6ZVN0eWxlID0gdXNlU2l6ZShwcm9wcylcblxuICAgIGNvbnN0IGNsYXNzZXMgPSBjb21wdXRlZCgoKSA9PlxuICAgICAgJ3EtYXZhdGFyJ1xuICAgICAgKyAocHJvcHMuY29sb3IgPyBgIGJnLSR7IHByb3BzLmNvbG9yIH1gIDogJycpXG4gICAgICArIChwcm9wcy50ZXh0Q29sb3IgPyBgIHRleHQtJHsgcHJvcHMudGV4dENvbG9yIH0gcS1jaGlwLS1jb2xvcmVkYCA6ICcnKVxuICAgICAgKyAoXG4gICAgICAgIHByb3BzLnNxdWFyZSA9PT0gdHJ1ZVxuICAgICAgICAgID8gJyBxLWF2YXRhci0tc3F1YXJlJ1xuICAgICAgICAgIDogKHByb3BzLnJvdW5kZWQgPT09IHRydWUgPyAnIHJvdW5kZWQtYm9yZGVycycgOiAnJylcbiAgICAgIClcbiAgICApXG5cbiAgICBjb25zdCBjb250ZW50U3R5bGUgPSBjb21wdXRlZCgoKSA9PiAoXG4gICAgICBwcm9wcy5mb250U2l6ZVxuICAgICAgICA/IHsgZm9udFNpemU6IHByb3BzLmZvbnRTaXplIH1cbiAgICAgICAgOiBudWxsXG4gICAgKSlcblxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBjb25zdCBpY29uID0gcHJvcHMuaWNvbiAhPT0gdm9pZCAwXG4gICAgICAgID8gWyBoKFFJY29uLCB7IG5hbWU6IHByb3BzLmljb24gfSkgXVxuICAgICAgICA6IHZvaWQgMFxuXG4gICAgICByZXR1cm4gaCgnZGl2Jywge1xuICAgICAgICBjbGFzczogY2xhc3Nlcy52YWx1ZSxcbiAgICAgICAgc3R5bGU6IHNpemVTdHlsZS52YWx1ZVxuICAgICAgfSwgW1xuICAgICAgICBoKCdkaXYnLCB7XG4gICAgICAgICAgY2xhc3M6ICdxLWF2YXRhcl9fY29udGVudCByb3cgZmxleC1jZW50ZXIgb3ZlcmZsb3ctaGlkZGVuJyxcbiAgICAgICAgICBzdHlsZTogY29udGVudFN0eWxlLnZhbHVlXG4gICAgICAgIH0sIGhNZXJnZVNsb3RTYWZlbHkoc2xvdHMuZGVmYXVsdCwgaWNvbikpXG4gICAgICBdKVxuICAgIH1cbiAgfVxufSlcbiIsImltcG9ydCB7IGNvbXB1dGVkIH0gZnJvbSAndnVlJ1xuaW1wb3J0IHsgdXNlU2l6ZURlZmF1bHRzIH0gZnJvbSAnLi4vLi4vY29tcG9zYWJsZXMvcHJpdmF0ZS91c2Utc2l6ZS5qcydcblxuZXhwb3J0IGNvbnN0IHVzZVNwaW5uZXJQcm9wcyA9IHtcbiAgc2l6ZToge1xuICAgIHR5cGU6IFsgTnVtYmVyLCBTdHJpbmcgXSxcbiAgICBkZWZhdWx0OiAnMWVtJ1xuICB9LFxuICBjb2xvcjogU3RyaW5nXG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHVzZVNwaW5uZXIgKHByb3BzKSB7XG4gIHJldHVybiB7XG4gICAgY1NpemU6IGNvbXB1dGVkKCgpID0+IChcbiAgICAgIHByb3BzLnNpemUgaW4gdXNlU2l6ZURlZmF1bHRzXG4gICAgICAgID8gYCR7IHVzZVNpemVEZWZhdWx0c1sgcHJvcHMuc2l6ZSBdIH1weGBcbiAgICAgICAgOiBwcm9wcy5zaXplXG4gICAgKSksXG5cbiAgICBjbGFzc2VzOiBjb21wdXRlZCgoKSA9PlxuICAgICAgJ3Etc3Bpbm5lcicgKyAocHJvcHMuY29sb3IgPyBgIHRleHQtJHsgcHJvcHMuY29sb3IgfWAgOiAnJylcbiAgICApXG4gIH1cbn1cbiIsImltcG9ydCB7IGggfSBmcm9tICd2dWUnXG5cbmltcG9ydCB1c2VTcGlubmVyLCB7IHVzZVNwaW5uZXJQcm9wcyB9IGZyb20gJy4vdXNlLXNwaW5uZXIuanMnXG5cbmltcG9ydCB7IGNyZWF0ZUNvbXBvbmVudCB9IGZyb20gJy4uLy4uL3V0aWxzL3ByaXZhdGUvY3JlYXRlLmpzJ1xuXG5leHBvcnQgZGVmYXVsdCBjcmVhdGVDb21wb25lbnQoe1xuICBuYW1lOiAnUVNwaW5uZXInLFxuXG4gIHByb3BzOiB7XG4gICAgLi4udXNlU3Bpbm5lclByb3BzLFxuXG4gICAgdGhpY2tuZXNzOiB7XG4gICAgICB0eXBlOiBOdW1iZXIsXG4gICAgICBkZWZhdWx0OiA1XG4gICAgfVxuICB9LFxuXG4gIHNldHVwIChwcm9wcykge1xuICAgIGNvbnN0IHsgY1NpemUsIGNsYXNzZXMgfSA9IHVzZVNwaW5uZXIocHJvcHMpXG5cbiAgICByZXR1cm4gKCkgPT4gaCgnc3ZnJywge1xuICAgICAgY2xhc3M6IGNsYXNzZXMudmFsdWUgKyAnIHEtc3Bpbm5lci1tYXQnLFxuICAgICAgd2lkdGg6IGNTaXplLnZhbHVlLFxuICAgICAgaGVpZ2h0OiBjU2l6ZS52YWx1ZSxcbiAgICAgIHZpZXdCb3g6ICcyNSAyNSA1MCA1MCdcbiAgICB9LCBbXG4gICAgICBoKCdjaXJjbGUnLCB7XG4gICAgICAgIGNsYXNzOiAncGF0aCcsXG4gICAgICAgIGN4OiAnNTAnLFxuICAgICAgICBjeTogJzUwJyxcbiAgICAgICAgcjogJzIwJyxcbiAgICAgICAgZmlsbDogJ25vbmUnLFxuICAgICAgICBzdHJva2U6ICdjdXJyZW50Q29sb3InLFxuICAgICAgICAnc3Ryb2tlLXdpZHRoJzogcHJvcHMudGhpY2tuZXNzLFxuICAgICAgICAnc3Ryb2tlLW1pdGVybGltaXQnOiAnMTAnXG4gICAgICB9KVxuICAgIF0pXG4gIH1cbn0pXG4iLCJpbXBvcnQgeyBpc1JlZiB9IGZyb20gJ3Z1ZSdcblxuZXhwb3J0IGZ1bmN0aW9uIG9mZnNldCAoZWwpIHtcbiAgaWYgKGVsID09PSB3aW5kb3cpIHtcbiAgICByZXR1cm4geyB0b3A6IDAsIGxlZnQ6IDAgfVxuICB9XG4gIGNvbnN0IHsgdG9wLCBsZWZ0IH0gPSBlbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKVxuICByZXR1cm4geyB0b3AsIGxlZnQgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gc3R5bGUgKGVsLCBwcm9wZXJ0eSkge1xuICByZXR1cm4gd2luZG93LmdldENvbXB1dGVkU3R5bGUoZWwpLmdldFByb3BlcnR5VmFsdWUocHJvcGVydHkpXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBoZWlnaHQgKGVsKSB7XG4gIHJldHVybiBlbCA9PT0gd2luZG93XG4gICAgPyB3aW5kb3cuaW5uZXJIZWlnaHRcbiAgICA6IGVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmhlaWdodFxufVxuXG5leHBvcnQgZnVuY3Rpb24gd2lkdGggKGVsKSB7XG4gIHJldHVybiBlbCA9PT0gd2luZG93XG4gICAgPyB3aW5kb3cuaW5uZXJXaWR0aFxuICAgIDogZWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGhcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNzcyAoZWxlbWVudCwgY3NzKSB7XG4gIGNvbnN0IHN0eWxlID0gZWxlbWVudC5zdHlsZVxuXG4gIGZvciAoY29uc3QgcHJvcCBpbiBjc3MpIHtcbiAgICBzdHlsZVsgcHJvcCBdID0gY3NzWyBwcm9wIF1cbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gY3NzQmF0Y2ggKGVsZW1lbnRzLCBzdHlsZSkge1xuICBlbGVtZW50cy5mb3JFYWNoKGVsID0+IGNzcyhlbCwgc3R5bGUpKVxufVxuXG5leHBvcnQgZnVuY3Rpb24gcmVhZHkgKGZuKSB7XG4gIGlmICh0eXBlb2YgZm4gIT09ICdmdW5jdGlvbicpIHtcbiAgICByZXR1cm5cbiAgfVxuXG4gIGlmIChkb2N1bWVudC5yZWFkeVN0YXRlICE9PSAnbG9hZGluZycpIHtcbiAgICByZXR1cm4gZm4oKVxuICB9XG5cbiAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZuLCBmYWxzZSlcbn1cblxuLy8gaW50ZXJuYWxcbmV4cG9ydCBmdW5jdGlvbiBnZXRFbGVtZW50IChlbCkge1xuICBpZiAoZWwgPT09IHZvaWQgMCB8fCBlbCA9PT0gbnVsbCkge1xuICAgIHJldHVybiB2b2lkIDBcbiAgfVxuXG4gIGlmICh0eXBlb2YgZWwgPT09ICdzdHJpbmcnKSB7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGVsKSB8fCB2b2lkIDBcbiAgICB9XG4gICAgY2F0Y2ggKGVycikge1xuICAgICAgcmV0dXJuIHZvaWQgMFxuICAgIH1cbiAgfVxuXG4gIGNvbnN0IHRhcmdldCA9IGlzUmVmKGVsKSA9PT0gdHJ1ZVxuICAgID8gZWwudmFsdWVcbiAgICA6IGVsXG5cbiAgaWYgKHRhcmdldCkge1xuICAgIHJldHVybiB0YXJnZXQuJGVsIHx8IHRhcmdldFxuICB9XG59XG5cbi8vIGludGVybmFsXG5leHBvcnQgZnVuY3Rpb24gY2hpbGRIYXNGb2N1cyAoZWwsIGZvY3VzZWRFbCkge1xuICBpZiAoZWwgPT09IHZvaWQgMCB8fCBlbCA9PT0gbnVsbCB8fCBlbC5jb250YWlucyhmb2N1c2VkRWwpID09PSB0cnVlKSB7XG4gICAgcmV0dXJuIHRydWVcbiAgfVxuXG4gIGZvciAobGV0IG5leHQgPSBlbC5uZXh0RWxlbWVudFNpYmxpbmc7IG5leHQgIT09IG51bGw7IG5leHQgPSBuZXh0Lm5leHRFbGVtZW50U2libGluZykge1xuICAgIGlmIChuZXh0LmNvbnRhaW5zKGZvY3VzZWRFbCkpIHtcbiAgICAgIHJldHVybiB0cnVlXG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGZhbHNlXG59XG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgb2Zmc2V0LFxuICBzdHlsZSxcbiAgaGVpZ2h0LFxuICB3aWR0aCxcbiAgY3NzLFxuICBjc3NCYXRjaCxcbiAgcmVhZHlcbn1cbiIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIChmbiwgbGltaXQgPSAyNTApIHtcbiAgbGV0IHdhaXQgPSBmYWxzZSwgcmVzdWx0XG5cbiAgcmV0dXJuIGZ1bmN0aW9uICgvKiAuLi5hcmdzICovKSB7XG4gICAgaWYgKHdhaXQgPT09IGZhbHNlKSB7XG4gICAgICB3YWl0ID0gdHJ1ZVxuICAgICAgc2V0VGltZW91dCgoKSA9PiB7IHdhaXQgPSBmYWxzZSB9LCBsaW1pdClcbiAgICAgIHJlc3VsdCA9IGZuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cylcbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0XG4gIH1cbn1cbiIsImltcG9ydCB7IGNyZWF0ZURpcmVjdGl2ZSB9IGZyb20gJy4uL3V0aWxzL3ByaXZhdGUvY3JlYXRlLmpzJ1xuaW1wb3J0IHsgY3NzIH0gZnJvbSAnLi4vdXRpbHMvZG9tLmpzJ1xuaW1wb3J0IHsgcG9zaXRpb24sIHN0b3AsIGFkZEV2dCwgY2xlYW5FdnQgfSBmcm9tICcuLi91dGlscy9ldmVudC5qcydcbmltcG9ydCB7IGlzS2V5Q29kZSB9IGZyb20gJy4uL3V0aWxzL3ByaXZhdGUva2V5LWNvbXBvc2l0aW9uLmpzJ1xuaW1wb3J0IHRocm90dGxlIGZyb20gJy4uL3V0aWxzL3Rocm90dGxlLmpzJ1xuaW1wb3J0IGdldFNTUlByb3BzIGZyb20gJy4uL3V0aWxzL3ByaXZhdGUvbm9vcC1zc3ItZGlyZWN0aXZlLXRyYW5zZm9ybS5qcydcblxuZnVuY3Rpb24gc2hvd1JpcHBsZSAoZXZ0LCBlbCwgY3R4LCBmb3JjZUNlbnRlcikge1xuICBjdHgubW9kaWZpZXJzLnN0b3AgPT09IHRydWUgJiYgc3RvcChldnQpXG5cbiAgY29uc3QgY29sb3IgPSBjdHgubW9kaWZpZXJzLmNvbG9yXG4gIGxldCBjZW50ZXIgPSBjdHgubW9kaWZpZXJzLmNlbnRlclxuICBjZW50ZXIgPSBjZW50ZXIgPT09IHRydWUgfHwgZm9yY2VDZW50ZXIgPT09IHRydWVcblxuICBjb25zdFxuICAgIG5vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyksXG4gICAgaW5uZXJOb2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpLFxuICAgIHBvcyA9IHBvc2l0aW9uKGV2dCksXG4gICAgeyBsZWZ0LCB0b3AsIHdpZHRoLCBoZWlnaHQgfSA9IGVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLFxuICAgIGRpYW1ldGVyID0gTWF0aC5zcXJ0KHdpZHRoICogd2lkdGggKyBoZWlnaHQgKiBoZWlnaHQpLFxuICAgIHJhZGl1cyA9IGRpYW1ldGVyIC8gMixcbiAgICBjZW50ZXJYID0gYCR7ICh3aWR0aCAtIGRpYW1ldGVyKSAvIDIgfXB4YCxcbiAgICB4ID0gY2VudGVyID8gY2VudGVyWCA6IGAkeyBwb3MubGVmdCAtIGxlZnQgLSByYWRpdXMgfXB4YCxcbiAgICBjZW50ZXJZID0gYCR7IChoZWlnaHQgLSBkaWFtZXRlcikgLyAyIH1weGAsXG4gICAgeSA9IGNlbnRlciA/IGNlbnRlclkgOiBgJHsgcG9zLnRvcCAtIHRvcCAtIHJhZGl1cyB9cHhgXG5cbiAgaW5uZXJOb2RlLmNsYXNzTmFtZSA9ICdxLXJpcHBsZV9faW5uZXInXG4gIGNzcyhpbm5lck5vZGUsIHtcbiAgICBoZWlnaHQ6IGAkeyBkaWFtZXRlciB9cHhgLFxuICAgIHdpZHRoOiBgJHsgZGlhbWV0ZXIgfXB4YCxcbiAgICB0cmFuc2Zvcm06IGB0cmFuc2xhdGUzZCgkeyB4IH0sJHsgeSB9LDApIHNjYWxlM2QoLjIsLjIsMSlgLFxuICAgIG9wYWNpdHk6IDBcbiAgfSlcblxuICBub2RlLmNsYXNzTmFtZSA9IGBxLXJpcHBsZSR7IGNvbG9yID8gJyB0ZXh0LScgKyBjb2xvciA6ICcnIH1gXG4gIG5vZGUuc2V0QXR0cmlidXRlKCdkaXInLCAnbHRyJylcbiAgbm9kZS5hcHBlbmRDaGlsZChpbm5lck5vZGUpXG4gIGVsLmFwcGVuZENoaWxkKG5vZGUpXG5cbiAgY29uc3QgYWJvcnQgPSAoKSA9PiB7XG4gICAgbm9kZS5yZW1vdmUoKVxuICAgIGNsZWFyVGltZW91dCh0aW1lcilcbiAgfVxuICBjdHguYWJvcnQucHVzaChhYm9ydClcblxuICBsZXQgdGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICBpbm5lck5vZGUuY2xhc3NMaXN0LmFkZCgncS1yaXBwbGVfX2lubmVyLS1lbnRlcicpXG4gICAgaW5uZXJOb2RlLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGUzZCgkeyBjZW50ZXJYIH0sJHsgY2VudGVyWSB9LDApIHNjYWxlM2QoMSwxLDEpYFxuICAgIGlubmVyTm9kZS5zdHlsZS5vcGFjaXR5ID0gMC4yXG5cbiAgICB0aW1lciA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgaW5uZXJOb2RlLmNsYXNzTGlzdC5yZW1vdmUoJ3EtcmlwcGxlX19pbm5lci0tZW50ZXInKVxuICAgICAgaW5uZXJOb2RlLmNsYXNzTGlzdC5hZGQoJ3EtcmlwcGxlX19pbm5lci0tbGVhdmUnKVxuICAgICAgaW5uZXJOb2RlLnN0eWxlLm9wYWNpdHkgPSAwXG5cbiAgICAgIHRpbWVyID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIG5vZGUucmVtb3ZlKClcbiAgICAgICAgY3R4LmFib3J0LnNwbGljZShjdHguYWJvcnQuaW5kZXhPZihhYm9ydCksIDEpXG4gICAgICB9LCAyNzUpXG4gICAgfSwgMjUwKVxuICB9LCA1MClcbn1cblxuZnVuY3Rpb24gdXBkYXRlTW9kaWZpZXJzIChjdHgsIHsgbW9kaWZpZXJzLCB2YWx1ZSwgYXJnLCBpbnN0YW5jZSB9KSB7XG4gIGNvbnN0IGNmZyA9IE9iamVjdC5hc3NpZ24oe30sIGluc3RhbmNlLiRxLmNvbmZpZy5yaXBwbGUsIG1vZGlmaWVycywgdmFsdWUpXG4gIGN0eC5tb2RpZmllcnMgPSB7XG4gICAgZWFybHk6IGNmZy5lYXJseSA9PT0gdHJ1ZSxcbiAgICBzdG9wOiBjZmcuc3RvcCA9PT0gdHJ1ZSxcbiAgICBjZW50ZXI6IGNmZy5jZW50ZXIgPT09IHRydWUsXG4gICAgY29sb3I6IGNmZy5jb2xvciB8fCBhcmcsXG4gICAga2V5Q29kZXM6IFtdLmNvbmNhdChjZmcua2V5Q29kZXMgfHwgMTMpXG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgY3JlYXRlRGlyZWN0aXZlKF9fUVVBU0FSX1NTUl9TRVJWRVJfX1xuICA/IHsgbmFtZTogJ3JpcHBsZScsIGdldFNTUlByb3BzIH1cbiAgOiB7XG4gICAgICBuYW1lOiAncmlwcGxlJyxcblxuICAgICAgYmVmb3JlTW91bnQgKGVsLCBiaW5kaW5nKSB7XG4gICAgICAgIGNvbnN0IGN0eCA9IHtcbiAgICAgICAgICBlbmFibGVkOiBiaW5kaW5nLnZhbHVlICE9PSBmYWxzZSxcbiAgICAgICAgICBtb2RpZmllcnM6IHt9LFxuICAgICAgICAgIGFib3J0OiBbXSxcblxuICAgICAgICAgIHN0YXJ0IChldnQpIHtcbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgY3R4LmVuYWJsZWQgPT09IHRydWVcbiAgICAgICAgICAgICAgJiYgZXZ0LnFTa2lwUmlwcGxlICE9PSB0cnVlXG4gICAgICAgICAgICAgICYmIChcbiAgICAgICAgICAgICAgICBjdHgubW9kaWZpZXJzLmVhcmx5ID09PSB0cnVlXG4gICAgICAgICAgICAgICAgICA/IFsgJ21vdXNlZG93bicsICd0b3VjaHN0YXJ0JyBdLmluY2x1ZGVzKGV2dC50eXBlKSA9PT0gdHJ1ZVxuICAgICAgICAgICAgICAgICAgOiBldnQudHlwZSA9PT0gJ2NsaWNrJ1xuICAgICAgICAgICAgICApXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgc2hvd1JpcHBsZShldnQsIGVsLCBjdHgsIGV2dC5xS2V5RXZlbnQgPT09IHRydWUpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSxcblxuICAgICAgICAgIGtleXN0YXJ0OiB0aHJvdHRsZShldnQgPT4ge1xuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICBjdHguZW5hYmxlZCA9PT0gdHJ1ZVxuICAgICAgICAgICAgICAmJiBldnQucVNraXBSaXBwbGUgIT09IHRydWVcbiAgICAgICAgICAgICAgJiYgaXNLZXlDb2RlKGV2dCwgY3R4Lm1vZGlmaWVycy5rZXlDb2RlcykgPT09IHRydWVcbiAgICAgICAgICAgICAgJiYgZXZ0LnR5cGUgPT09IGBrZXkkeyBjdHgubW9kaWZpZXJzLmVhcmx5ID09PSB0cnVlID8gJ2Rvd24nIDogJ3VwJyB9YFxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgIHNob3dSaXBwbGUoZXZ0LCBlbCwgY3R4LCB0cnVlKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sIDMwMClcbiAgICAgICAgfVxuXG4gICAgICAgIHVwZGF0ZU1vZGlmaWVycyhjdHgsIGJpbmRpbmcpXG5cbiAgICAgICAgZWwuX19xcmlwcGxlID0gY3R4XG5cbiAgICAgICAgYWRkRXZ0KGN0eCwgJ21haW4nLCBbXG4gICAgICAgICAgWyBlbCwgJ21vdXNlZG93bicsICdzdGFydCcsICdwYXNzaXZlJyBdLFxuICAgICAgICAgIFsgZWwsICd0b3VjaHN0YXJ0JywgJ3N0YXJ0JywgJ3Bhc3NpdmUnIF0sXG4gICAgICAgICAgWyBlbCwgJ2NsaWNrJywgJ3N0YXJ0JywgJ3Bhc3NpdmUnIF0sXG4gICAgICAgICAgWyBlbCwgJ2tleWRvd24nLCAna2V5c3RhcnQnLCAncGFzc2l2ZScgXSxcbiAgICAgICAgICBbIGVsLCAna2V5dXAnLCAna2V5c3RhcnQnLCAncGFzc2l2ZScgXVxuICAgICAgICBdKVxuICAgICAgfSxcblxuICAgICAgdXBkYXRlZCAoZWwsIGJpbmRpbmcpIHtcbiAgICAgICAgaWYgKGJpbmRpbmcub2xkVmFsdWUgIT09IGJpbmRpbmcudmFsdWUpIHtcbiAgICAgICAgICBjb25zdCBjdHggPSBlbC5fX3FyaXBwbGVcbiAgICAgICAgICBjdHguZW5hYmxlZCA9IGJpbmRpbmcudmFsdWUgIT09IGZhbHNlXG5cbiAgICAgICAgICBpZiAoY3R4LmVuYWJsZWQgPT09IHRydWUgJiYgT2JqZWN0KGJpbmRpbmcudmFsdWUpID09PSBiaW5kaW5nLnZhbHVlKSB7XG4gICAgICAgICAgICB1cGRhdGVNb2RpZmllcnMoY3R4LCBiaW5kaW5nKVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSxcblxuICAgICAgYmVmb3JlVW5tb3VudCAoZWwpIHtcbiAgICAgICAgY29uc3QgY3R4ID0gZWwuX19xcmlwcGxlXG4gICAgICAgIGN0eC5hYm9ydC5mb3JFYWNoKGZuID0+IHsgZm4oKSB9KVxuICAgICAgICBjbGVhbkV2dChjdHgsICdtYWluJylcbiAgICAgICAgZGVsZXRlIGVsLl9xcmlwcGxlXG4gICAgICB9XG4gICAgfVxuKVxuIiwiaW1wb3J0IHsgY29tcHV0ZWQgfSBmcm9tICd2dWUnXG5cbmV4cG9ydCBjb25zdCBhbGlnbk1hcCA9IHtcbiAgbGVmdDogJ3N0YXJ0JyxcbiAgY2VudGVyOiAnY2VudGVyJyxcbiAgcmlnaHQ6ICdlbmQnLFxuICBiZXR3ZWVuOiAnYmV0d2VlbicsXG4gIGFyb3VuZDogJ2Fyb3VuZCcsXG4gIGV2ZW5seTogJ2V2ZW5seScsXG4gIHN0cmV0Y2g6ICdzdHJldGNoJ1xufVxuXG5leHBvcnQgY29uc3QgYWxpZ25WYWx1ZXMgPSBPYmplY3Qua2V5cyhhbGlnbk1hcClcblxuZXhwb3J0IGNvbnN0IHVzZUFsaWduUHJvcHMgPSB7XG4gIGFsaWduOiB7XG4gICAgdHlwZTogU3RyaW5nLFxuICAgIHZhbGlkYXRvcjogdiA9PiBhbGlnblZhbHVlcy5pbmNsdWRlcyh2KVxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIChwcm9wcykge1xuICAvLyByZXR1cm4gYWxpZ25DbGFzc1xuICByZXR1cm4gY29tcHV0ZWQoKCkgPT4ge1xuICAgIGNvbnN0IGFsaWduID0gcHJvcHMuYWxpZ24gPT09IHZvaWQgMFxuICAgICAgPyBwcm9wcy52ZXJ0aWNhbCA9PT0gdHJ1ZSA/ICdzdHJldGNoJyA6ICdsZWZ0J1xuICAgICAgOiBwcm9wcy5hbGlnblxuXG4gICAgcmV0dXJuIGAkeyBwcm9wcy52ZXJ0aWNhbCA9PT0gdHJ1ZSA/ICdpdGVtcycgOiAnanVzdGlmeScgfS0keyBhbGlnbk1hcFsgYWxpZ24gXSB9YFxuICB9KVxufVxuIiwiLy8gdXNlZCBkaXJlY3RseSBieSBkb2NzIHRvb1xuZXhwb3J0IGZ1bmN0aW9uIGdldFBhcmVudFZtICh2bSkge1xuICBpZiAoT2JqZWN0KHZtLiRwYXJlbnQpID09PSB2bS4kcGFyZW50KSB7XG4gICAgcmV0dXJuIHZtLiRwYXJlbnRcbiAgfVxuXG4gIHZtID0gdm0uJC5wYXJlbnRcblxuICB3aGlsZSAoT2JqZWN0KHZtKSA9PT0gdm0pIHtcbiAgICBpZiAoT2JqZWN0KHZtLnByb3h5KSA9PT0gdm0ucHJveHkpIHtcbiAgICAgIHJldHVybiB2bS5wcm94eVxuICAgIH1cblxuICAgIHZtID0gdm0ucGFyZW50XG4gIH1cbn1cblxuZnVuY3Rpb24gZmlsbE5vcm1hbGl6ZWRWTm9kZXMgKGNoaWxkcmVuLCB2bm9kZSkge1xuICBpZiAodHlwZW9mIHZub2RlLnR5cGUgPT09ICdzeW1ib2wnKSB7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkodm5vZGUuY2hpbGRyZW4pID09PSB0cnVlKSB7XG4gICAgICB2bm9kZS5jaGlsZHJlbi5mb3JFYWNoKGNoaWxkID0+IHtcbiAgICAgICAgZmlsbE5vcm1hbGl6ZWRWTm9kZXMoY2hpbGRyZW4sIGNoaWxkKVxuICAgICAgfSlcbiAgICB9XG4gIH1cbiAgZWxzZSB7XG4gICAgY2hpbGRyZW4uYWRkKHZub2RlKVxuICB9XG59XG5cbi8vIHZub2RlcyBmcm9tIHJlbmRlcmVkIGluIGFkdmFuY2VkIHNsb3RzXG5leHBvcnQgZnVuY3Rpb24gZ2V0Tm9ybWFsaXplZFZOb2RlcyAodm5vZGVzKSB7XG4gIGNvbnN0IGNoaWxkcmVuID0gbmV3IFNldCgpXG5cbiAgdm5vZGVzLmZvckVhY2godm5vZGUgPT4ge1xuICAgIGZpbGxOb3JtYWxpemVkVk5vZGVzKGNoaWxkcmVuLCB2bm9kZSlcbiAgfSlcblxuICByZXR1cm4gQXJyYXkuZnJvbShjaGlsZHJlbilcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHZtSGFzUm91dGVyICh2bSkge1xuICByZXR1cm4gdm0uYXBwQ29udGV4dC5jb25maWcuZ2xvYmFsUHJvcGVydGllcy4kcm91dGVyICE9PSB2b2lkIDBcbn1cbiIsIi8qXG4gKiBJbnNwaXJlZCBieSBSb3V0ZXJMaW5rIGZyb20gVnVlIFJvdXRlclxuICogIC0tPiBBUEkgc2hvdWxkIG1hdGNoIVxuICovXG5cbmltcG9ydCB7IGNvbXB1dGVkLCBnZXRDdXJyZW50SW5zdGFuY2UgfSBmcm9tICd2dWUnXG5cbmltcG9ydCB7IHByZXZlbnQgfSBmcm9tICcuLi8uLi91dGlscy9ldmVudC5qcydcbmltcG9ydCB7IHZtSGFzUm91dGVyIH0gZnJvbSAnLi4vLi4vdXRpbHMvcHJpdmF0ZS92bS5qcydcblxuLy8gR2V0IHRoZSBvcmlnaW5hbCBwYXRoIHZhbHVlIG9mIGEgcmVjb3JkIGJ5IGZvbGxvd2luZyBpdHMgYWxpYXNPZlxuZnVuY3Rpb24gZ2V0T3JpZ2luYWxQYXRoIChyZWNvcmQpIHtcbiAgcmV0dXJuIHJlY29yZFxuICAgID8gKFxuICAgICAgICByZWNvcmQuYWxpYXNPZlxuICAgICAgICAgID8gcmVjb3JkLmFsaWFzT2YucGF0aFxuICAgICAgICAgIDogcmVjb3JkLnBhdGhcbiAgICAgICkgOiAnJ1xufVxuXG5mdW5jdGlvbiBpc1NhbWVSb3V0ZVJlY29yZCAoYSwgYikge1xuICAvLyBzaW5jZSB0aGUgb3JpZ2luYWwgcmVjb3JkIGhhcyBhbiB1bmRlZmluZWQgdmFsdWUgZm9yIGFsaWFzT2ZcbiAgLy8gYnV0IGFsbCBhbGlhc2VzIHBvaW50IHRvIHRoZSBvcmlnaW5hbCByZWNvcmQsIHRoaXMgd2lsbCBhbHdheXMgY29tcGFyZVxuICAvLyB0aGUgb3JpZ2luYWwgcmVjb3JkXG4gIHJldHVybiAoYS5hbGlhc09mIHx8IGEpID09PSAoYi5hbGlhc09mIHx8IGIpXG59XG5cbmZ1bmN0aW9uIGluY2x1ZGVzUGFyYW1zIChvdXRlciwgaW5uZXIpIHtcbiAgZm9yIChjb25zdCBrZXkgaW4gaW5uZXIpIHtcbiAgICBjb25zdFxuICAgICAgaW5uZXJWYWx1ZSA9IGlubmVyWyBrZXkgXSxcbiAgICAgIG91dGVyVmFsdWUgPSBvdXRlclsga2V5IF1cblxuICAgIGlmICh0eXBlb2YgaW5uZXJWYWx1ZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgIGlmIChpbm5lclZhbHVlICE9PSBvdXRlclZhbHVlKSB7XG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgfVxuICAgIH1cbiAgICBlbHNlIGlmIChcbiAgICAgIEFycmF5LmlzQXJyYXkob3V0ZXJWYWx1ZSkgPT09IGZhbHNlXG4gICAgICB8fCBvdXRlclZhbHVlLmxlbmd0aCAhPT0gaW5uZXJWYWx1ZS5sZW5ndGhcbiAgICAgIHx8IGlubmVyVmFsdWUuc29tZSgodmFsdWUsIGkpID0+IHZhbHVlICE9PSBvdXRlclZhbHVlWyBpIF0pXG4gICAgKSB7XG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG4gIH1cblxuICByZXR1cm4gdHJ1ZVxufVxuXG5mdW5jdGlvbiBpc0VxdWl2YWxlbnRBcnJheSAoYSwgYikge1xuICByZXR1cm4gQXJyYXkuaXNBcnJheShiKSA9PT0gdHJ1ZVxuICAgID8gYS5sZW5ndGggPT09IGIubGVuZ3RoICYmIGEuZXZlcnkoKHZhbHVlLCBpKSA9PiB2YWx1ZSA9PT0gYlsgaSBdKVxuICAgIDogYS5sZW5ndGggPT09IDEgJiYgYVsgMCBdID09PSBiXG59XG5cbmZ1bmN0aW9uIGlzU2FtZVJvdXRlTG9jYXRpb25QYXJhbXNWYWx1ZSAoYSwgYikge1xuICByZXR1cm4gQXJyYXkuaXNBcnJheShhKSA9PT0gdHJ1ZVxuICAgID8gaXNFcXVpdmFsZW50QXJyYXkoYSwgYilcbiAgICA6IChcbiAgICAgICAgQXJyYXkuaXNBcnJheShiKSA9PT0gdHJ1ZVxuICAgICAgICAgID8gaXNFcXVpdmFsZW50QXJyYXkoYiwgYSlcbiAgICAgICAgICA6IGEgPT09IGJcbiAgICAgIClcbn1cblxuZnVuY3Rpb24gaXNTYW1lUm91dGVMb2NhdGlvblBhcmFtcyAoYSwgYikge1xuICBpZiAoT2JqZWN0LmtleXMoYSkubGVuZ3RoICE9PSBPYmplY3Qua2V5cyhiKS5sZW5ndGgpIHtcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIGZvciAoY29uc3Qga2V5IGluIGEpIHtcbiAgICBpZiAoaXNTYW1lUm91dGVMb2NhdGlvblBhcmFtc1ZhbHVlKGFbIGtleSBdLCBiWyBrZXkgXSkgPT09IGZhbHNlKSB7XG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG4gIH1cblxuICByZXR1cm4gdHJ1ZVxufVxuXG5leHBvcnQgY29uc3QgdXNlUm91dGVyTGlua1Byb3BzID0ge1xuICAvLyByb3V0ZXItbGlua1xuICB0bzogWyBTdHJpbmcsIE9iamVjdCBdLFxuICByZXBsYWNlOiBCb29sZWFuLFxuICBleGFjdDogQm9vbGVhbixcbiAgYWN0aXZlQ2xhc3M6IHtcbiAgICB0eXBlOiBTdHJpbmcsXG4gICAgZGVmYXVsdDogJ3Etcm91dGVyLWxpbmstLWFjdGl2ZSdcbiAgfSxcbiAgZXhhY3RBY3RpdmVDbGFzczoge1xuICAgIHR5cGU6IFN0cmluZyxcbiAgICBkZWZhdWx0OiAncS1yb3V0ZXItbGluay0tZXhhY3QtYWN0aXZlJ1xuICB9LFxuXG4gIC8vIHJlZ3VsYXIgPGE+IGxpbmtcbiAgaHJlZjogU3RyaW5nLFxuICB0YXJnZXQ6IFN0cmluZyxcblxuICAvLyBzdGF0ZVxuICBkaXNhYmxlOiBCb29sZWFuXG59XG5cbi8vIGV4dGVybmFsIHByb3BzOiB0eXBlLCB0YWdcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gKGZhbGxiYWNrVGFnKSB7XG4gIGNvbnN0IHZtID0gZ2V0Q3VycmVudEluc3RhbmNlKClcbiAgY29uc3QgeyBwcm9wcywgcHJveHkgfSA9IHZtXG5cbiAgY29uc3QgaGFzUm91dGVyID0gdm1IYXNSb3V0ZXIodm0pXG4gIGNvbnN0IGhhc0hyZWZMaW5rID0gY29tcHV0ZWQoKCkgPT4gcHJvcHMuZGlzYWJsZSAhPT0gdHJ1ZSAmJiBwcm9wcy5ocmVmICE9PSB2b2lkIDApXG5cbiAgY29uc3QgaGFzUm91dGVyTGlua1Byb3BzID0gY29tcHV0ZWQoKCkgPT5cbiAgICBoYXNSb3V0ZXIgPT09IHRydWVcbiAgICAmJiBwcm9wcy5kaXNhYmxlICE9PSB0cnVlXG4gICAgJiYgaGFzSHJlZkxpbmsudmFsdWUgIT09IHRydWVcbiAgICAmJiBwcm9wcy50byAhPT0gdm9pZCAwICYmIHByb3BzLnRvICE9PSBudWxsICYmIHByb3BzLnRvICE9PSAnJ1xuICApXG5cbiAgY29uc3QgbGlua1JvdXRlID0gY29tcHV0ZWQoKCkgPT4ge1xuICAgIGlmIChoYXNSb3V0ZXJMaW5rUHJvcHMudmFsdWUgPT09IHRydWUpIHtcbiAgICAgIHRyeSB7IHJldHVybiBwcm94eS4kcm91dGVyLnJlc29sdmUocHJvcHMudG8pIH1cbiAgICAgIGNhdGNoIChlcnIpIHt9XG4gICAgfVxuXG4gICAgcmV0dXJuIG51bGxcbiAgfSlcblxuICBjb25zdCBoYXNSb3V0ZXJMaW5rID0gY29tcHV0ZWQoKCkgPT4gbGlua1JvdXRlLnZhbHVlICE9PSBudWxsKVxuICBjb25zdCBoYXNMaW5rID0gY29tcHV0ZWQoKCkgPT4gaGFzSHJlZkxpbmsudmFsdWUgPT09IHRydWUgfHwgaGFzUm91dGVyTGluay52YWx1ZSA9PT0gdHJ1ZSlcblxuICBjb25zdCBsaW5rVGFnID0gY29tcHV0ZWQoKCkgPT4gKFxuICAgIHByb3BzLnR5cGUgPT09ICdhJyB8fCBoYXNMaW5rLnZhbHVlID09PSB0cnVlXG4gICAgICA/ICdhJ1xuICAgICAgOiAocHJvcHMudGFnIHx8IGZhbGxiYWNrVGFnIHx8ICdkaXYnKVxuICApKVxuXG4gIGNvbnN0IGxpbmtQcm9wcyA9IGNvbXB1dGVkKCgpID0+IChcbiAgICBoYXNIcmVmTGluay52YWx1ZSA9PT0gdHJ1ZVxuICAgICAgPyB7XG4gICAgICAgICAgaHJlZjogcHJvcHMuaHJlZixcbiAgICAgICAgICB0YXJnZXQ6IHByb3BzLnRhcmdldFxuICAgICAgICB9XG4gICAgICA6IChcbiAgICAgICAgICBoYXNSb3V0ZXJMaW5rLnZhbHVlID09PSB0cnVlXG4gICAgICAgICAgICA/IHtcbiAgICAgICAgICAgICAgICBocmVmOiBsaW5rUm91dGUudmFsdWUuaHJlZixcbiAgICAgICAgICAgICAgICB0YXJnZXQ6IHByb3BzLnRhcmdldFxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICA6IHt9XG4gICAgICAgIClcbiAgKSlcblxuICBjb25zdCBsaW5rQWN0aXZlSW5kZXggPSBjb21wdXRlZCgoKSA9PiB7XG4gICAgaWYgKGhhc1JvdXRlckxpbmsudmFsdWUgPT09IGZhbHNlKSB7XG4gICAgICByZXR1cm4gbnVsbFxuICAgIH1cblxuICAgIGNvbnN0XG4gICAgICB7IG1hdGNoZWQgfSA9IGxpbmtSb3V0ZS52YWx1ZSxcbiAgICAgIHsgbGVuZ3RoIH0gPSBtYXRjaGVkLFxuICAgICAgcm91dGVNYXRjaGVkID0gbWF0Y2hlZFsgbGVuZ3RoIC0gMSBdXG5cbiAgICBpZiAocm91dGVNYXRjaGVkID09PSB2b2lkIDApIHtcbiAgICAgIHJldHVybiAtMVxuICAgIH1cblxuICAgIGNvbnN0IGN1cnJlbnRNYXRjaGVkID0gcHJveHkuJHJvdXRlLm1hdGNoZWRcblxuICAgIGlmIChjdXJyZW50TWF0Y2hlZC5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiAtMVxuICAgIH1cblxuICAgIGNvbnN0IGluZGV4ID0gY3VycmVudE1hdGNoZWQuZmluZEluZGV4KFxuICAgICAgaXNTYW1lUm91dGVSZWNvcmQuYmluZChudWxsLCByb3V0ZU1hdGNoZWQpXG4gICAgKVxuXG4gICAgaWYgKGluZGV4ID4gLTEpIHtcbiAgICAgIHJldHVybiBpbmRleFxuICAgIH1cblxuICAgIC8vIHBvc3NpYmxlIHBhcmVudCByZWNvcmRcbiAgICBjb25zdCBwYXJlbnRSZWNvcmRQYXRoID0gZ2V0T3JpZ2luYWxQYXRoKG1hdGNoZWRbIGxlbmd0aCAtIDIgXSlcblxuICAgIHJldHVybiAoXG4gICAgICAvLyB3ZSBhcmUgZGVhbGluZyB3aXRoIG5lc3RlZCByb3V0ZXNcbiAgICAgIGxlbmd0aCA+IDFcbiAgICAgIC8vIGlmIHRoZSBwYXJlbnQgYW5kIG1hdGNoZWQgcm91dGUgaGF2ZSB0aGUgc2FtZSBwYXRoLCB0aGlzIGxpbmsgaXNcbiAgICAgIC8vIHJlZmVycmluZyB0byB0aGUgZW1wdHkgY2hpbGQuIE9yIHdlIGN1cnJlbnRseSBhcmUgb24gYSBkaWZmZXJlbnRcbiAgICAgIC8vIGNoaWxkIG9mIHRoZSBzYW1lIHBhcmVudFxuICAgICAgJiYgZ2V0T3JpZ2luYWxQYXRoKHJvdXRlTWF0Y2hlZCkgPT09IHBhcmVudFJlY29yZFBhdGhcbiAgICAgIC8vIGF2b2lkIGNvbXBhcmluZyB0aGUgY2hpbGQgd2l0aCBpdHMgcGFyZW50XG4gICAgICAmJiBjdXJyZW50TWF0Y2hlZFsgY3VycmVudE1hdGNoZWQubGVuZ3RoIC0gMSBdLnBhdGggIT09IHBhcmVudFJlY29yZFBhdGhcbiAgICAgICAgPyBjdXJyZW50TWF0Y2hlZC5maW5kSW5kZXgoXG4gICAgICAgICAgaXNTYW1lUm91dGVSZWNvcmQuYmluZChudWxsLCBtYXRjaGVkWyBsZW5ndGggLSAyIF0pXG4gICAgICAgIClcbiAgICAgICAgOiBpbmRleFxuICAgIClcbiAgfSlcblxuICBjb25zdCBsaW5rSXNBY3RpdmUgPSBjb21wdXRlZCgoKSA9PlxuICAgIGhhc1JvdXRlckxpbmsudmFsdWUgPT09IHRydWVcbiAgICAmJiBsaW5rQWN0aXZlSW5kZXgudmFsdWUgPiAtMVxuICAgICYmIGluY2x1ZGVzUGFyYW1zKHByb3h5LiRyb3V0ZS5wYXJhbXMsIGxpbmtSb3V0ZS52YWx1ZS5wYXJhbXMpXG4gIClcblxuICBjb25zdCBsaW5rSXNFeGFjdEFjdGl2ZSA9IGNvbXB1dGVkKCgpID0+XG4gICAgbGlua0lzQWN0aXZlLnZhbHVlID09PSB0cnVlXG4gICAgICAmJiBsaW5rQWN0aXZlSW5kZXgudmFsdWUgPT09IHByb3h5LiRyb3V0ZS5tYXRjaGVkLmxlbmd0aCAtIDFcbiAgICAgICYmIGlzU2FtZVJvdXRlTG9jYXRpb25QYXJhbXMocHJveHkuJHJvdXRlLnBhcmFtcywgbGlua1JvdXRlLnZhbHVlLnBhcmFtcylcbiAgKVxuXG4gIGNvbnN0IGxpbmtDbGFzcyA9IGNvbXB1dGVkKCgpID0+IChcbiAgICBoYXNSb3V0ZXJMaW5rLnZhbHVlID09PSB0cnVlXG4gICAgICA/IChcbiAgICAgICAgICBsaW5rSXNFeGFjdEFjdGl2ZS52YWx1ZSA9PT0gdHJ1ZVxuICAgICAgICAgICAgPyBgICR7IHByb3BzLmV4YWN0QWN0aXZlQ2xhc3MgfSAkeyBwcm9wcy5hY3RpdmVDbGFzcyB9YFxuICAgICAgICAgICAgOiAoXG4gICAgICAgICAgICAgICAgcHJvcHMuZXhhY3QgPT09IHRydWVcbiAgICAgICAgICAgICAgICAgID8gJydcbiAgICAgICAgICAgICAgICAgIDogKGxpbmtJc0FjdGl2ZS52YWx1ZSA9PT0gdHJ1ZSA/IGAgJHsgcHJvcHMuYWN0aXZlQ2xhc3MgfWAgOiAnJylcbiAgICAgICAgICAgICAgKVxuICAgICAgICApXG4gICAgICA6ICcnXG4gICkpXG5cbiAgLy8gc2hvdWxkIG1hdGNoIFJvdXRlckxpbmsgZnJvbSBWdWUgUm91dGVyXG4gIGZ1bmN0aW9uIG5hdmlnYXRlVG9Sb3V0ZXJMaW5rIChlKSB7XG4gICAgaWYgKFxuICAgICAgLy8gY29tcG9uZW50IGlzIG5vdCBkaXNhYmxlZFxuICAgICAgcHJvcHMuZGlzYWJsZSA9PT0gdHJ1ZVxuXG4gICAgICAvLyBkb24ndCByZWRpcmVjdCB3aXRoIGNvbnRyb2wga2V5c1xuICAgICAgfHwgZS5tZXRhS2V5IHx8IGUuYWx0S2V5IHx8IGUuY3RybEtleSB8fCBlLnNoaWZ0S2V5XG5cbiAgICAgIC8vIGRvbid0IHJlZGlyZWN0IHdoZW4gcHJldmVudERlZmF1bHQgY2FsbGVkXG4gICAgICAvLyAuLi51bmxlc3MgY2FsbGluZyBnbygpIGZyb20gQGNsaWNrKGUsIGdvKVxuICAgICAgfHwgKGUuX19xTmF2aWdhdGUgIT09IHRydWUgJiYgZS5kZWZhdWx0UHJldmVudGVkID09PSB0cnVlKVxuXG4gICAgICAvLyBkb24ndCByZWRpcmVjdCBvbiByaWdodCBjbGlja1xuICAgICAgfHwgKGUuYnV0dG9uICE9PSB1bmRlZmluZWQgJiYgZS5idXR0b24gIT09IDApXG5cbiAgICAgIC8vIGRvbid0IHJlZGlyZWN0IGlmIGl0IHNob3VsZCBvcGVuIGluIGEgbmV3IHdpbmRvd1xuICAgICAgfHwgcHJvcHMudGFyZ2V0ID09PSAnX2JsYW5rJ1xuICAgICkge1xuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuXG4gICAgcHJldmVudChlKVxuXG4gICAgcmV0dXJuIHByb3h5LiRyb3V0ZXJbIHByb3BzLnJlcGxhY2UgPT09IHRydWUgPyAncmVwbGFjZScgOiAncHVzaCcgXShwcm9wcy50bylcbiAgICAgIC5jYXRjaChlcnIgPT4gZXJyKVxuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBoYXNSb3V0ZXJMaW5rLFxuICAgIGhhc0hyZWZMaW5rLFxuICAgIGhhc0xpbmssXG5cbiAgICBsaW5rVGFnLFxuICAgIGxpbmtSb3V0ZSxcbiAgICBsaW5rSXNBY3RpdmUsXG4gICAgbGlua0lzRXhhY3RBY3RpdmUsXG4gICAgbGlua0NsYXNzLFxuICAgIGxpbmtQcm9wcyxcblxuICAgIG5hdmlnYXRlVG9Sb3V0ZXJMaW5rXG4gIH1cbn1cbiIsImltcG9ydCB7IGNvbXB1dGVkIH0gZnJvbSAndnVlJ1xuXG5pbXBvcnQgdXNlQWxpZ24sIHsgdXNlQWxpZ25Qcm9wcyB9IGZyb20gJy4uLy4uL2NvbXBvc2FibGVzL3ByaXZhdGUvdXNlLWFsaWduLmpzJ1xuaW1wb3J0IHVzZVNpemUsIHsgdXNlU2l6ZVByb3BzIH0gZnJvbSAnLi4vLi4vY29tcG9zYWJsZXMvcHJpdmF0ZS91c2Utc2l6ZS5qcydcbmltcG9ydCB1c2VSb3V0ZXJMaW5rLCB7IHVzZVJvdXRlckxpbmtQcm9wcyB9IGZyb20gJy4uLy4uL2NvbXBvc2FibGVzL3ByaXZhdGUvdXNlLXJvdXRlci1saW5rLmpzJ1xuXG5jb25zdCBwYWRkaW5nID0ge1xuICBub25lOiAwLFxuICB4czogNCxcbiAgc206IDgsXG4gIG1kOiAxNixcbiAgbGc6IDI0LFxuICB4bDogMzJcbn1cblxuY29uc3QgZGVmYXVsdFNpemVzID0ge1xuICB4czogOCxcbiAgc206IDEwLFxuICBtZDogMTQsXG4gIGxnOiAyMCxcbiAgeGw6IDI0XG59XG5cbmNvbnN0IGZvcm1UeXBlcyA9IFsgJ2J1dHRvbicsICdzdWJtaXQnLCAncmVzZXQnIF1cbmNvbnN0IG1lZGlhVHlwZVJFID0gL1teXFxzXVxcL1teXFxzXS9cblxuZXhwb3J0IGNvbnN0IHVzZUJ0blByb3BzID0ge1xuICAuLi51c2VTaXplUHJvcHMsXG4gIC4uLnVzZVJvdXRlckxpbmtQcm9wcyxcblxuICB0eXBlOiB7XG4gICAgdHlwZTogU3RyaW5nLFxuICAgIGRlZmF1bHQ6ICdidXR0b24nXG4gIH0sXG5cbiAgbGFiZWw6IFsgTnVtYmVyLCBTdHJpbmcgXSxcbiAgaWNvbjogU3RyaW5nLFxuICBpY29uUmlnaHQ6IFN0cmluZyxcblxuICByb3VuZDogQm9vbGVhbixcbiAgb3V0bGluZTogQm9vbGVhbixcbiAgZmxhdDogQm9vbGVhbixcbiAgdW5lbGV2YXRlZDogQm9vbGVhbixcbiAgcm91bmRlZDogQm9vbGVhbixcbiAgcHVzaDogQm9vbGVhbixcbiAgZ2xvc3N5OiBCb29sZWFuLFxuXG4gIHNpemU6IFN0cmluZyxcbiAgZmFiOiBCb29sZWFuLFxuICBmYWJNaW5pOiBCb29sZWFuLFxuICBwYWRkaW5nOiBTdHJpbmcsXG5cbiAgY29sb3I6IFN0cmluZyxcbiAgdGV4dENvbG9yOiBTdHJpbmcsXG4gIG5vQ2FwczogQm9vbGVhbixcbiAgbm9XcmFwOiBCb29sZWFuLFxuICBkZW5zZTogQm9vbGVhbixcblxuICB0YWJpbmRleDogWyBOdW1iZXIsIFN0cmluZyBdLFxuXG4gIHJpcHBsZToge1xuICAgIHR5cGU6IFsgQm9vbGVhbiwgT2JqZWN0IF0sXG4gICAgZGVmYXVsdDogdHJ1ZVxuICB9LFxuXG4gIGFsaWduOiB7XG4gICAgLi4udXNlQWxpZ25Qcm9wcy5hbGlnbixcbiAgICBkZWZhdWx0OiAnY2VudGVyJ1xuICB9LFxuICBzdGFjazogQm9vbGVhbixcbiAgc3RyZXRjaDogQm9vbGVhbixcbiAgbG9hZGluZzoge1xuICAgIHR5cGU6IEJvb2xlYW4sXG4gICAgZGVmYXVsdDogbnVsbFxuICB9LFxuICBkaXNhYmxlOiBCb29sZWFuXG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIChwcm9wcykge1xuICBjb25zdCBzaXplU3R5bGUgPSB1c2VTaXplKHByb3BzLCBkZWZhdWx0U2l6ZXMpXG4gIGNvbnN0IGFsaWduQ2xhc3MgPSB1c2VBbGlnbihwcm9wcylcbiAgY29uc3QgeyBoYXNSb3V0ZXJMaW5rLCBoYXNMaW5rLCBsaW5rVGFnLCBsaW5rUHJvcHMsIG5hdmlnYXRlVG9Sb3V0ZXJMaW5rIH0gPSB1c2VSb3V0ZXJMaW5rKCdidXR0b24nKVxuXG4gIGNvbnN0IHN0eWxlID0gY29tcHV0ZWQoKCkgPT4ge1xuICAgIGNvbnN0IG9iaiA9IHByb3BzLmZhYiA9PT0gZmFsc2UgJiYgcHJvcHMuZmFiTWluaSA9PT0gZmFsc2VcbiAgICAgID8gc2l6ZVN0eWxlLnZhbHVlXG4gICAgICA6IHt9XG5cbiAgICByZXR1cm4gcHJvcHMucGFkZGluZyAhPT0gdm9pZCAwXG4gICAgICA/IE9iamVjdC5hc3NpZ24oe30sIG9iaiwge1xuICAgICAgICBwYWRkaW5nOiBwcm9wcy5wYWRkaW5nXG4gICAgICAgICAgLnNwbGl0KC9cXHMrLylcbiAgICAgICAgICAubWFwKHYgPT4gKHYgaW4gcGFkZGluZyA/IHBhZGRpbmdbIHYgXSArICdweCcgOiB2KSlcbiAgICAgICAgICAuam9pbignICcpLFxuICAgICAgICBtaW5XaWR0aDogJzAnLFxuICAgICAgICBtaW5IZWlnaHQ6ICcwJ1xuICAgICAgfSlcbiAgICAgIDogb2JqXG4gIH0pXG5cbiAgY29uc3QgaXNSb3VuZGVkID0gY29tcHV0ZWQoKCkgPT5cbiAgICBwcm9wcy5yb3VuZGVkID09PSB0cnVlIHx8IHByb3BzLmZhYiA9PT0gdHJ1ZSB8fCBwcm9wcy5mYWJNaW5pID09PSB0cnVlXG4gIClcblxuICBjb25zdCBpc0FjdGlvbmFibGUgPSBjb21wdXRlZCgoKSA9PlxuICAgIHByb3BzLmRpc2FibGUgIT09IHRydWUgJiYgcHJvcHMubG9hZGluZyAhPT0gdHJ1ZVxuICApXG5cbiAgY29uc3QgdGFiSW5kZXggPSBjb21wdXRlZCgoKSA9PiAoXG4gICAgaXNBY3Rpb25hYmxlLnZhbHVlID09PSB0cnVlID8gcHJvcHMudGFiaW5kZXggfHwgMCA6IC0xXG4gICkpXG5cbiAgY29uc3QgZGVzaWduID0gY29tcHV0ZWQoKCkgPT4ge1xuICAgIGlmIChwcm9wcy5mbGF0ID09PSB0cnVlKSByZXR1cm4gJ2ZsYXQnXG4gICAgaWYgKHByb3BzLm91dGxpbmUgPT09IHRydWUpIHJldHVybiAnb3V0bGluZSdcbiAgICBpZiAocHJvcHMucHVzaCA9PT0gdHJ1ZSkgcmV0dXJuICdwdXNoJ1xuICAgIGlmIChwcm9wcy51bmVsZXZhdGVkID09PSB0cnVlKSByZXR1cm4gJ3VuZWxldmF0ZWQnXG4gICAgcmV0dXJuICdzdGFuZGFyZCdcbiAgfSlcblxuICBjb25zdCBhdHRyaWJ1dGVzID0gY29tcHV0ZWQoKCkgPT4ge1xuICAgIGNvbnN0IGFjYyA9IHsgdGFiaW5kZXg6IHRhYkluZGV4LnZhbHVlIH1cblxuICAgIGlmIChoYXNMaW5rLnZhbHVlID09PSB0cnVlKSB7XG4gICAgICBPYmplY3QuYXNzaWduKGFjYywgbGlua1Byb3BzLnZhbHVlKVxuICAgIH1cbiAgICBlbHNlIGlmIChmb3JtVHlwZXMuaW5jbHVkZXMocHJvcHMudHlwZSkgPT09IHRydWUpIHtcbiAgICAgIGFjYy50eXBlID0gcHJvcHMudHlwZVxuICAgIH1cblxuICAgIGlmIChsaW5rVGFnLnZhbHVlID09PSAnYScpIHtcbiAgICAgIGlmIChwcm9wcy5kaXNhYmxlID09PSB0cnVlKSB7XG4gICAgICAgIGFjY1sgJ2FyaWEtZGlzYWJsZWQnIF0gPSAndHJ1ZSdcbiAgICAgIH1cbiAgICAgIGVsc2UgaWYgKGFjYy5ocmVmID09PSB2b2lkIDApIHtcbiAgICAgICAgYWNjLnJvbGUgPSAnYnV0dG9uJ1xuICAgICAgfVxuICAgICAgaWYgKGhhc1JvdXRlckxpbmsudmFsdWUgIT09IHRydWUgJiYgbWVkaWFUeXBlUkUudGVzdChwcm9wcy50eXBlKSA9PT0gdHJ1ZSkge1xuICAgICAgICBhY2MudHlwZSA9IHByb3BzLnR5cGVcbiAgICAgIH1cbiAgICB9XG4gICAgZWxzZSBpZiAocHJvcHMuZGlzYWJsZSA9PT0gdHJ1ZSkge1xuICAgICAgYWNjLmRpc2FibGVkID0gJydcbiAgICAgIGFjY1sgJ2FyaWEtZGlzYWJsZWQnIF0gPSAndHJ1ZSdcbiAgICB9XG5cbiAgICBpZiAocHJvcHMubG9hZGluZyA9PT0gdHJ1ZSAmJiBwcm9wcy5wZXJjZW50YWdlICE9PSB2b2lkIDApIHtcbiAgICAgIE9iamVjdC5hc3NpZ24oYWNjLCB7XG4gICAgICAgIHJvbGU6ICdwcm9ncmVzc2JhcicsXG4gICAgICAgICdhcmlhLXZhbHVlbWluJzogMCxcbiAgICAgICAgJ2FyaWEtdmFsdWVtYXgnOiAxMDAsXG4gICAgICAgICdhcmlhLXZhbHVlbm93JzogcHJvcHMucGVyY2VudGFnZVxuICAgICAgfSlcbiAgICB9XG5cbiAgICByZXR1cm4gYWNjXG4gIH0pXG5cbiAgY29uc3QgY2xhc3NlcyA9IGNvbXB1dGVkKCgpID0+IHtcbiAgICBsZXQgY29sb3JzXG5cbiAgICBpZiAocHJvcHMuY29sb3IgIT09IHZvaWQgMCkge1xuICAgICAgaWYgKHByb3BzLmZsYXQgPT09IHRydWUgfHwgcHJvcHMub3V0bGluZSA9PT0gdHJ1ZSkge1xuICAgICAgICBjb2xvcnMgPSBgdGV4dC0keyBwcm9wcy50ZXh0Q29sb3IgfHwgcHJvcHMuY29sb3IgfWBcbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICBjb2xvcnMgPSBgYmctJHsgcHJvcHMuY29sb3IgfSB0ZXh0LSR7IHByb3BzLnRleHRDb2xvciB8fCAnd2hpdGUnIH1gXG4gICAgICB9XG4gICAgfVxuICAgIGVsc2UgaWYgKHByb3BzLnRleHRDb2xvcikge1xuICAgICAgY29sb3JzID0gYHRleHQtJHsgcHJvcHMudGV4dENvbG9yIH1gXG4gICAgfVxuXG4gICAgcmV0dXJuIGBxLWJ0bi0tJHsgZGVzaWduLnZhbHVlIH0gYFxuICAgICAgKyBgcS1idG4tLSR7IHByb3BzLnJvdW5kID09PSB0cnVlID8gJ3JvdW5kJyA6IGByZWN0YW5nbGUkeyBpc1JvdW5kZWQudmFsdWUgPT09IHRydWUgPyAnIHEtYnRuLS1yb3VuZGVkJyA6ICcnIH1gIH1gXG4gICAgICArIChjb2xvcnMgIT09IHZvaWQgMCA/ICcgJyArIGNvbG9ycyA6ICcnKVxuICAgICAgKyAoaXNBY3Rpb25hYmxlLnZhbHVlID09PSB0cnVlID8gJyBxLWJ0bi0tYWN0aW9uYWJsZSBxLWZvY3VzYWJsZSBxLWhvdmVyYWJsZScgOiAocHJvcHMuZGlzYWJsZSA9PT0gdHJ1ZSA/ICcgZGlzYWJsZWQnIDogJycpKVxuICAgICAgKyAocHJvcHMuZmFiID09PSB0cnVlID8gJyBxLWJ0bi0tZmFiJyA6IChwcm9wcy5mYWJNaW5pID09PSB0cnVlID8gJyBxLWJ0bi0tZmFiLW1pbmknIDogJycpKVxuICAgICAgKyAocHJvcHMubm9DYXBzID09PSB0cnVlID8gJyBxLWJ0bi0tbm8tdXBwZXJjYXNlJyA6ICcnKVxuICAgICAgKyAocHJvcHMuZGVuc2UgPT09IHRydWUgPyAnIHEtYnRuLS1kZW5zZScgOiAnJylcbiAgICAgICsgKHByb3BzLnN0cmV0Y2ggPT09IHRydWUgPyAnIG5vLWJvcmRlci1yYWRpdXMgc2VsZi1zdHJldGNoJyA6ICcnKVxuICAgICAgKyAocHJvcHMuZ2xvc3N5ID09PSB0cnVlID8gJyBnbG9zc3knIDogJycpXG4gIH0pXG5cbiAgY29uc3QgaW5uZXJDbGFzc2VzID0gY29tcHV0ZWQoKCkgPT5cbiAgICBhbGlnbkNsYXNzLnZhbHVlICsgKHByb3BzLnN0YWNrID09PSB0cnVlID8gJyBjb2x1bW4nIDogJyByb3cnKVxuICAgICsgKHByb3BzLm5vV3JhcCA9PT0gdHJ1ZSA/ICcgbm8td3JhcCB0ZXh0LW5vLXdyYXAnIDogJycpXG4gICAgKyAocHJvcHMubG9hZGluZyA9PT0gdHJ1ZSA/ICcgcS1idG5fX2NvbnRlbnQtLWhpZGRlbicgOiAnJylcbiAgKVxuXG4gIHJldHVybiB7XG4gICAgY2xhc3NlcyxcbiAgICBzdHlsZSxcbiAgICBpbm5lckNsYXNzZXMsXG4gICAgYXR0cmlidXRlcyxcbiAgICBoYXNSb3V0ZXJMaW5rLFxuICAgIGhhc0xpbmssXG4gICAgbGlua1RhZyxcbiAgICBuYXZpZ2F0ZVRvUm91dGVyTGluayxcbiAgICBpc0FjdGlvbmFibGVcbiAgfVxufVxuIiwiaW1wb3J0IHsgaCwgcmVmLCBjb21wdXRlZCwgVHJhbnNpdGlvbiwgb25CZWZvcmVVbm1vdW50LCB3aXRoRGlyZWN0aXZlcywgZ2V0Q3VycmVudEluc3RhbmNlIH0gZnJvbSAndnVlJ1xuXG5pbXBvcnQgUUljb24gZnJvbSAnLi4vaWNvbi9RSWNvbi5qcydcbmltcG9ydCBRU3Bpbm5lciBmcm9tICcuLi9zcGlubmVyL1FTcGlubmVyLmpzJ1xuXG5pbXBvcnQgUmlwcGxlIGZyb20gJy4uLy4uL2RpcmVjdGl2ZXMvUmlwcGxlLmpzJ1xuXG5pbXBvcnQgdXNlQnRuLCB7IHVzZUJ0blByb3BzIH0gZnJvbSAnLi91c2UtYnRuLmpzJ1xuXG5pbXBvcnQgeyBjcmVhdGVDb21wb25lbnQgfSBmcm9tICcuLi8uLi91dGlscy9wcml2YXRlL2NyZWF0ZS5qcydcbmltcG9ydCB7IGhNZXJnZVNsb3QgfSBmcm9tICcuLi8uLi91dGlscy9wcml2YXRlL3JlbmRlci5qcydcbmltcG9ydCB7IHN0b3AsIHByZXZlbnQsIHN0b3BBbmRQcmV2ZW50LCBsaXN0ZW5PcHRzIH0gZnJvbSAnLi4vLi4vdXRpbHMvZXZlbnQuanMnXG5pbXBvcnQgeyBpc0tleUNvZGUgfSBmcm9tICcuLi8uLi91dGlscy9wcml2YXRlL2tleS1jb21wb3NpdGlvbi5qcydcblxuY29uc3QgeyBwYXNzaXZlQ2FwdHVyZSB9ID0gbGlzdGVuT3B0c1xuXG5sZXRcbiAgdG91Y2hUYXJnZXQgPSBudWxsLFxuICBrZXlib2FyZFRhcmdldCA9IG51bGwsXG4gIG1vdXNlVGFyZ2V0ID0gbnVsbFxuXG5leHBvcnQgZGVmYXVsdCBjcmVhdGVDb21wb25lbnQoe1xuICBuYW1lOiAnUUJ0bicsXG5cbiAgcHJvcHM6IHtcbiAgICAuLi51c2VCdG5Qcm9wcyxcblxuICAgIHBlcmNlbnRhZ2U6IE51bWJlcixcbiAgICBkYXJrUGVyY2VudGFnZTogQm9vbGVhblxuICB9LFxuXG4gIGVtaXRzOiBbICdjbGljaycsICdrZXlkb3duJywgJ3RvdWNoc3RhcnQnLCAnbW91c2Vkb3duJywgJ2tleXVwJyBdLFxuXG4gIHNldHVwIChwcm9wcywgeyBzbG90cywgZW1pdCB9KSB7XG4gICAgY29uc3QgeyBwcm94eSB9ID0gZ2V0Q3VycmVudEluc3RhbmNlKClcblxuICAgIGNvbnN0IHtcbiAgICAgIGNsYXNzZXMsIHN0eWxlLCBpbm5lckNsYXNzZXMsXG4gICAgICBhdHRyaWJ1dGVzLFxuICAgICAgaGFzUm91dGVyTGluaywgaGFzTGluaywgbGlua1RhZywgbmF2aWdhdGVUb1JvdXRlckxpbmssXG4gICAgICBpc0FjdGlvbmFibGVcbiAgICB9ID0gdXNlQnRuKHByb3BzKVxuXG4gICAgY29uc3Qgcm9vdFJlZiA9IHJlZihudWxsKVxuICAgIGNvbnN0IGJsdXJUYXJnZXRSZWYgPSByZWYobnVsbClcblxuICAgIGxldCBsb2NhbFRvdWNoVGFyZ2V0RWwgPSBudWxsLCBhdm9pZE1vdXNlUmlwcGxlLCBtb3VzZVRpbWVyXG5cbiAgICBjb25zdCBoYXNMYWJlbCA9IGNvbXB1dGVkKCgpID0+XG4gICAgICBwcm9wcy5sYWJlbCAhPT0gdm9pZCAwICYmIHByb3BzLmxhYmVsICE9PSBudWxsICYmIHByb3BzLmxhYmVsICE9PSAnJ1xuICAgIClcblxuICAgIGNvbnN0IHJpcHBsZSA9IGNvbXB1dGVkKCgpID0+IChcbiAgICAgIHByb3BzLmRpc2FibGUgPT09IHRydWUgfHwgcHJvcHMucmlwcGxlID09PSBmYWxzZVxuICAgICAgICA/IGZhbHNlXG4gICAgICAgIDoge1xuICAgICAgICAgICAga2V5Q29kZXM6IGhhc0xpbmsudmFsdWUgPT09IHRydWUgPyBbIDEzLCAzMiBdIDogWyAxMyBdLFxuICAgICAgICAgICAgLi4uKHByb3BzLnJpcHBsZSA9PT0gdHJ1ZSA/IHt9IDogcHJvcHMucmlwcGxlKVxuICAgICAgICAgIH1cbiAgICApKVxuXG4gICAgY29uc3QgcmlwcGxlUHJvcHMgPSBjb21wdXRlZCgoKSA9PiAoeyBjZW50ZXI6IHByb3BzLnJvdW5kIH0pKVxuXG4gICAgY29uc3QgcGVyY2VudGFnZVN0eWxlID0gY29tcHV0ZWQoKCkgPT4ge1xuICAgICAgY29uc3QgdmFsID0gTWF0aC5tYXgoMCwgTWF0aC5taW4oMTAwLCBwcm9wcy5wZXJjZW50YWdlKSlcbiAgICAgIHJldHVybiB2YWwgPiAwXG4gICAgICAgID8geyB0cmFuc2l0aW9uOiAndHJhbnNmb3JtIDAuNnMnLCB0cmFuc2Zvcm06IGB0cmFuc2xhdGVYKCR7IHZhbCAtIDEwMCB9JSlgIH1cbiAgICAgICAgOiB7fVxuICAgIH0pXG5cbiAgICBjb25zdCBvbkV2ZW50cyA9IGNvbXB1dGVkKCgpID0+IHtcbiAgICAgIGlmIChwcm9wcy5sb2FkaW5nID09PSB0cnVlKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgb25Nb3VzZWRvd246IG9uTG9hZGluZ0V2dCxcbiAgICAgICAgICBvblRvdWNoc3RhcnRQYXNzaXZlOiBvbkxvYWRpbmdFdnQsXG4gICAgICAgICAgb25DbGljazogb25Mb2FkaW5nRXZ0LFxuICAgICAgICAgIG9uS2V5ZG93bjogb25Mb2FkaW5nRXZ0LFxuICAgICAgICAgIG9uS2V5dXA6IG9uTG9hZGluZ0V2dFxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChpc0FjdGlvbmFibGUudmFsdWUgPT09IHRydWUpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBvbkNsaWNrLFxuICAgICAgICAgIG9uS2V5ZG93bixcbiAgICAgICAgICBvbk1vdXNlZG93bixcbiAgICAgICAgICBvblRvdWNoc3RhcnRcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4ge1xuICAgICAgICAvLyBuZWVkZWQ7IGVzcGVjaWFsbHkgZm9yIGRpc2FibGVkIDxhPiB0YWdzXG4gICAgICAgIG9uQ2xpY2s6IHN0b3BBbmRQcmV2ZW50XG4gICAgICB9XG4gICAgfSlcblxuICAgIGNvbnN0IG5vZGVQcm9wcyA9IGNvbXB1dGVkKCgpID0+ICh7XG4gICAgICByZWY6IHJvb3RSZWYsXG4gICAgICBjbGFzczogJ3EtYnRuIHEtYnRuLWl0ZW0gbm9uLXNlbGVjdGFibGUgbm8tb3V0bGluZSAnICsgY2xhc3Nlcy52YWx1ZSxcbiAgICAgIHN0eWxlOiBzdHlsZS52YWx1ZSxcbiAgICAgIC4uLmF0dHJpYnV0ZXMudmFsdWUsXG4gICAgICAuLi5vbkV2ZW50cy52YWx1ZVxuICAgIH0pKVxuXG4gICAgZnVuY3Rpb24gb25DbGljayAoZSkge1xuICAgICAgLy8gaXMgaXQgYWxyZWFkeSBkZXN0cm95ZWQ/XG4gICAgICBpZiAocm9vdFJlZi52YWx1ZSA9PT0gbnVsbCkgeyByZXR1cm4gfVxuXG4gICAgICBpZiAoZSAhPT0gdm9pZCAwKSB7XG4gICAgICAgIGlmIChlLmRlZmF1bHRQcmV2ZW50ZWQgPT09IHRydWUpIHtcbiAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGVsID0gZG9jdW1lbnQuYWN0aXZlRWxlbWVudFxuICAgICAgICAvLyBmb2N1cyBidXR0b24gaWYgaXQgY2FtZSBmcm9tIEVOVEVSIG9uIGZvcm1cbiAgICAgICAgLy8gcHJldmVudCB0aGUgbmV3IHN1Ym1pdCAoYWxyZWFkeSBkb25lKVxuICAgICAgICBpZiAoXG4gICAgICAgICAgcHJvcHMudHlwZSA9PT0gJ3N1Ym1pdCdcbiAgICAgICAgICAmJiBlbCAhPT0gZG9jdW1lbnQuYm9keVxuICAgICAgICAgICYmIHJvb3RSZWYudmFsdWUuY29udGFpbnMoZWwpID09PSBmYWxzZVxuICAgICAgICAgIC8vIHJlcXVpcmVkIGZvciBpT1MgYW5kIGRlc2t0b3AgU2FmYXJpXG4gICAgICAgICAgJiYgZWwuY29udGFpbnMocm9vdFJlZi52YWx1ZSkgPT09IGZhbHNlXG4gICAgICAgICkge1xuICAgICAgICAgIHJvb3RSZWYudmFsdWUuZm9jdXMoKVxuXG4gICAgICAgICAgY29uc3Qgb25DbGlja0NsZWFudXAgPSAoKSA9PiB7XG4gICAgICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgc3RvcEFuZFByZXZlbnQsIHRydWUpXG4gICAgICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXl1cCcsIG9uQ2xpY2tDbGVhbnVwLCBwYXNzaXZlQ2FwdHVyZSlcbiAgICAgICAgICAgIHJvb3RSZWYudmFsdWUgIT09IG51bGwgJiYgcm9vdFJlZi52YWx1ZS5yZW1vdmVFdmVudExpc3RlbmVyKCdibHVyJywgb25DbGlja0NsZWFudXAsIHBhc3NpdmVDYXB0dXJlKVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBzdG9wQW5kUHJldmVudCwgdHJ1ZSlcbiAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsIG9uQ2xpY2tDbGVhbnVwLCBwYXNzaXZlQ2FwdHVyZSlcbiAgICAgICAgICByb290UmVmLnZhbHVlLmFkZEV2ZW50TGlzdGVuZXIoJ2JsdXInLCBvbkNsaWNrQ2xlYW51cCwgcGFzc2l2ZUNhcHR1cmUpXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKGhhc1JvdXRlckxpbmsudmFsdWUgPT09IHRydWUpIHtcbiAgICAgICAgY29uc3QgZ28gPSAoKSA9PiB7XG4gICAgICAgICAgZS5fX3FOYXZpZ2F0ZSA9IHRydWVcbiAgICAgICAgICBuYXZpZ2F0ZVRvUm91dGVyTGluayhlKVxuICAgICAgICB9XG5cbiAgICAgICAgZW1pdCgnY2xpY2snLCBlLCBnbylcbiAgICAgICAgZS5kZWZhdWx0UHJldmVudGVkICE9PSB0cnVlICYmIGdvKClcbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICBlbWl0KCdjbGljaycsIGUpXG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gb25LZXlkb3duIChlKSB7XG4gICAgICAvLyBpcyBpdCBhbHJlYWR5IGRlc3Ryb3llZD9cbiAgICAgIGlmIChyb290UmVmLnZhbHVlID09PSBudWxsKSB7IHJldHVybiB9XG5cbiAgICAgIGVtaXQoJ2tleWRvd24nLCBlKVxuXG4gICAgICBpZiAoaXNLZXlDb2RlKGUsIFsgMTMsIDMyIF0pID09PSB0cnVlICYmIGtleWJvYXJkVGFyZ2V0ICE9PSByb290UmVmLnZhbHVlKSB7XG4gICAgICAgIGtleWJvYXJkVGFyZ2V0ICE9PSBudWxsICYmIGNsZWFudXAoKVxuXG4gICAgICAgIGlmIChlLmRlZmF1bHRQcmV2ZW50ZWQgIT09IHRydWUpIHtcbiAgICAgICAgICAvLyBmb2N1cyBleHRlcm5hbCBidXR0b24gaWYgdGhlIGZvY3VzIGhlbHBlciB3YXMgZm9jdXNlZCBiZWZvcmVcbiAgICAgICAgICByb290UmVmLnZhbHVlLmZvY3VzKClcblxuICAgICAgICAgIGtleWJvYXJkVGFyZ2V0ID0gcm9vdFJlZi52YWx1ZVxuICAgICAgICAgIHJvb3RSZWYudmFsdWUuY2xhc3NMaXN0LmFkZCgncS1idG4tLWFjdGl2ZScpXG4gICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCBvblByZXNzRW5kLCB0cnVlKVxuICAgICAgICAgIHJvb3RSZWYudmFsdWUuYWRkRXZlbnRMaXN0ZW5lcignYmx1cicsIG9uUHJlc3NFbmQsIHBhc3NpdmVDYXB0dXJlKVxuICAgICAgICB9XG5cbiAgICAgICAgc3RvcEFuZFByZXZlbnQoZSlcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBvblRvdWNoc3RhcnQgKGUpIHtcbiAgICAgIC8vIGlzIGl0IGFscmVhZHkgZGVzdHJveWVkP1xuICAgICAgaWYgKHJvb3RSZWYudmFsdWUgPT09IG51bGwpIHsgcmV0dXJuIH1cblxuICAgICAgZW1pdCgndG91Y2hzdGFydCcsIGUpXG5cbiAgICAgIGlmIChlLmRlZmF1bHRQcmV2ZW50ZWQgPT09IHRydWUpIHsgcmV0dXJuIH1cblxuICAgICAgaWYgKHRvdWNoVGFyZ2V0ICE9PSByb290UmVmLnZhbHVlKSB7XG4gICAgICAgIHRvdWNoVGFyZ2V0ICE9PSBudWxsICYmIGNsZWFudXAoKVxuICAgICAgICB0b3VjaFRhcmdldCA9IHJvb3RSZWYudmFsdWVcblxuICAgICAgICBsb2NhbFRvdWNoVGFyZ2V0RWwgPSBlLnRhcmdldFxuICAgICAgICBsb2NhbFRvdWNoVGFyZ2V0RWwuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hjYW5jZWwnLCBvblByZXNzRW5kLCBwYXNzaXZlQ2FwdHVyZSlcbiAgICAgICAgbG9jYWxUb3VjaFRhcmdldEVsLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgb25QcmVzc0VuZCwgcGFzc2l2ZUNhcHR1cmUpXG4gICAgICB9XG5cbiAgICAgIC8vIGF2b2lkIGR1cGxpY2F0ZWQgbW91c2Vkb3duIGV2ZW50XG4gICAgICAvLyB0cmlnZ2VyaW5nIGFub3RoZXIgZWFybHkgcmlwcGxlXG4gICAgICBhdm9pZE1vdXNlUmlwcGxlID0gdHJ1ZVxuICAgICAgY2xlYXJUaW1lb3V0KG1vdXNlVGltZXIpXG4gICAgICBtb3VzZVRpbWVyID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIGF2b2lkTW91c2VSaXBwbGUgPSBmYWxzZVxuICAgICAgfSwgMjAwKVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIG9uTW91c2Vkb3duIChlKSB7XG4gICAgICAvLyBpcyBpdCBhbHJlYWR5IGRlc3Ryb3llZD9cbiAgICAgIGlmIChyb290UmVmLnZhbHVlID09PSBudWxsKSB7IHJldHVybiB9XG5cbiAgICAgIGUucVNraXBSaXBwbGUgPSBhdm9pZE1vdXNlUmlwcGxlID09PSB0cnVlXG4gICAgICBlbWl0KCdtb3VzZWRvd24nLCBlKVxuXG4gICAgICBpZiAoZS5kZWZhdWx0UHJldmVudGVkICE9PSB0cnVlICYmIG1vdXNlVGFyZ2V0ICE9PSByb290UmVmLnZhbHVlKSB7XG4gICAgICAgIG1vdXNlVGFyZ2V0ICE9PSBudWxsICYmIGNsZWFudXAoKVxuICAgICAgICBtb3VzZVRhcmdldCA9IHJvb3RSZWYudmFsdWVcbiAgICAgICAgcm9vdFJlZi52YWx1ZS5jbGFzc0xpc3QuYWRkKCdxLWJ0bi0tYWN0aXZlJylcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIG9uUHJlc3NFbmQsIHBhc3NpdmVDYXB0dXJlKVxuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIG9uUHJlc3NFbmQgKGUpIHtcbiAgICAgIC8vIGlzIGl0IGFscmVhZHkgZGVzdHJveWVkP1xuICAgICAgaWYgKHJvb3RSZWYudmFsdWUgPT09IG51bGwpIHsgcmV0dXJuIH1cblxuICAgICAgLy8gbmVlZGVkIGZvciBJRSAoYmVjYXVzZSBpdCBlbWl0cyBibHVyIHdoZW4gZm9jdXNpbmcgYnV0dG9uIGZyb20gZm9jdXMgaGVscGVyKVxuICAgICAgaWYgKGUgIT09IHZvaWQgMCAmJiBlLnR5cGUgPT09ICdibHVyJyAmJiBkb2N1bWVudC5hY3RpdmVFbGVtZW50ID09PSByb290UmVmLnZhbHVlKSB7XG4gICAgICAgIHJldHVyblxuICAgICAgfVxuXG4gICAgICBpZiAoZSAhPT0gdm9pZCAwICYmIGUudHlwZSA9PT0gJ2tleXVwJykge1xuICAgICAgICBpZiAoa2V5Ym9hcmRUYXJnZXQgPT09IHJvb3RSZWYudmFsdWUgJiYgaXNLZXlDb2RlKGUsIFsgMTMsIDMyIF0pID09PSB0cnVlKSB7XG4gICAgICAgICAgLy8gZm9yIGNsaWNrIHRyaWdnZXJcbiAgICAgICAgICBjb25zdCBldnQgPSBuZXcgTW91c2VFdmVudCgnY2xpY2snLCBlKVxuICAgICAgICAgIGV2dC5xS2V5RXZlbnQgPSB0cnVlXG4gICAgICAgICAgZS5kZWZhdWx0UHJldmVudGVkID09PSB0cnVlICYmIHByZXZlbnQoZXZ0KVxuICAgICAgICAgIGUuY2FuY2VsQnViYmxlID09PSB0cnVlICYmIHN0b3AoZXZ0KVxuICAgICAgICAgIHJvb3RSZWYudmFsdWUuZGlzcGF0Y2hFdmVudChldnQpXG5cbiAgICAgICAgICBzdG9wQW5kUHJldmVudChlKVxuXG4gICAgICAgICAgLy8gZm9yIHJpcHBsZVxuICAgICAgICAgIGUucUtleUV2ZW50ID0gdHJ1ZVxuICAgICAgICB9XG5cbiAgICAgICAgZW1pdCgna2V5dXAnLCBlKVxuICAgICAgfVxuXG4gICAgICBjbGVhbnVwKClcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjbGVhbnVwIChkZXN0cm95aW5nKSB7XG4gICAgICBjb25zdCBibHVyVGFyZ2V0ID0gYmx1clRhcmdldFJlZi52YWx1ZVxuXG4gICAgICBpZiAoXG4gICAgICAgIGRlc3Ryb3lpbmcgIT09IHRydWVcbiAgICAgICAgJiYgKHRvdWNoVGFyZ2V0ID09PSByb290UmVmLnZhbHVlIHx8IG1vdXNlVGFyZ2V0ID09PSByb290UmVmLnZhbHVlKVxuICAgICAgICAmJiBibHVyVGFyZ2V0ICE9PSBudWxsXG4gICAgICAgICYmIGJsdXJUYXJnZXQgIT09IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnRcbiAgICAgICkge1xuICAgICAgICBibHVyVGFyZ2V0LnNldEF0dHJpYnV0ZSgndGFiaW5kZXgnLCAtMSlcbiAgICAgICAgYmx1clRhcmdldC5mb2N1cygpXG4gICAgICB9XG5cbiAgICAgIGlmICh0b3VjaFRhcmdldCA9PT0gcm9vdFJlZi52YWx1ZSkge1xuICAgICAgICBpZiAobG9jYWxUb3VjaFRhcmdldEVsICE9PSBudWxsKSB7XG4gICAgICAgICAgbG9jYWxUb3VjaFRhcmdldEVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RvdWNoY2FuY2VsJywgb25QcmVzc0VuZCwgcGFzc2l2ZUNhcHR1cmUpXG4gICAgICAgICAgbG9jYWxUb3VjaFRhcmdldEVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgb25QcmVzc0VuZCwgcGFzc2l2ZUNhcHR1cmUpXG4gICAgICAgIH1cbiAgICAgICAgdG91Y2hUYXJnZXQgPSBsb2NhbFRvdWNoVGFyZ2V0RWwgPSBudWxsXG4gICAgICB9XG5cbiAgICAgIGlmIChtb3VzZVRhcmdldCA9PT0gcm9vdFJlZi52YWx1ZSkge1xuICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgb25QcmVzc0VuZCwgcGFzc2l2ZUNhcHR1cmUpXG4gICAgICAgIG1vdXNlVGFyZ2V0ID0gbnVsbFxuICAgICAgfVxuXG4gICAgICBpZiAoa2V5Ym9hcmRUYXJnZXQgPT09IHJvb3RSZWYudmFsdWUpIHtcbiAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5dXAnLCBvblByZXNzRW5kLCB0cnVlKVxuICAgICAgICByb290UmVmLnZhbHVlICE9PSBudWxsICYmIHJvb3RSZWYudmFsdWUucmVtb3ZlRXZlbnRMaXN0ZW5lcignYmx1cicsIG9uUHJlc3NFbmQsIHBhc3NpdmVDYXB0dXJlKVxuICAgICAgICBrZXlib2FyZFRhcmdldCA9IG51bGxcbiAgICAgIH1cblxuICAgICAgcm9vdFJlZi52YWx1ZSAhPT0gbnVsbCAmJiByb290UmVmLnZhbHVlLmNsYXNzTGlzdC5yZW1vdmUoJ3EtYnRuLS1hY3RpdmUnKVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIG9uTG9hZGluZ0V2dCAoZXZ0KSB7XG4gICAgICBzdG9wQW5kUHJldmVudChldnQpXG4gICAgICBldnQucVNraXBSaXBwbGUgPSB0cnVlXG4gICAgfVxuXG4gICAgb25CZWZvcmVVbm1vdW50KCgpID0+IHtcbiAgICAgIGNsZWFudXAodHJ1ZSlcbiAgICB9KVxuXG4gICAgLy8gZXhwb3NlIHB1YmxpYyBtZXRob2RzXG4gICAgT2JqZWN0LmFzc2lnbihwcm94eSwgeyBjbGljazogb25DbGljayB9KVxuXG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGxldCBpbm5lciA9IFtdXG5cbiAgICAgIHByb3BzLmljb24gIT09IHZvaWQgMCAmJiBpbm5lci5wdXNoKFxuICAgICAgICBoKFFJY29uLCB7XG4gICAgICAgICAgbmFtZTogcHJvcHMuaWNvbixcbiAgICAgICAgICBsZWZ0OiBwcm9wcy5zdGFjayA9PT0gZmFsc2UgJiYgaGFzTGFiZWwudmFsdWUgPT09IHRydWUsXG4gICAgICAgICAgcm9sZTogJ2ltZycsXG4gICAgICAgICAgJ2FyaWEtaGlkZGVuJzogJ3RydWUnXG4gICAgICAgIH0pXG4gICAgICApXG5cbiAgICAgIGhhc0xhYmVsLnZhbHVlID09PSB0cnVlICYmIGlubmVyLnB1c2goXG4gICAgICAgIGgoJ3NwYW4nLCB7IGNsYXNzOiAnYmxvY2snIH0sIFsgcHJvcHMubGFiZWwgXSlcbiAgICAgIClcblxuICAgICAgaW5uZXIgPSBoTWVyZ2VTbG90KHNsb3RzLmRlZmF1bHQsIGlubmVyKVxuXG4gICAgICBpZiAocHJvcHMuaWNvblJpZ2h0ICE9PSB2b2lkIDAgJiYgcHJvcHMucm91bmQgPT09IGZhbHNlKSB7XG4gICAgICAgIGlubmVyLnB1c2goXG4gICAgICAgICAgaChRSWNvbiwge1xuICAgICAgICAgICAgbmFtZTogcHJvcHMuaWNvblJpZ2h0LFxuICAgICAgICAgICAgcmlnaHQ6IHByb3BzLnN0YWNrID09PSBmYWxzZSAmJiBoYXNMYWJlbC52YWx1ZSA9PT0gdHJ1ZSxcbiAgICAgICAgICAgIHJvbGU6ICdpbWcnLFxuICAgICAgICAgICAgJ2FyaWEtaGlkZGVuJzogJ3RydWUnXG4gICAgICAgICAgfSlcbiAgICAgICAgKVxuICAgICAgfVxuXG4gICAgICBjb25zdCBjaGlsZCA9IFtcbiAgICAgICAgaCgnc3BhbicsIHtcbiAgICAgICAgICBjbGFzczogJ3EtZm9jdXMtaGVscGVyJyxcbiAgICAgICAgICByZWY6IGJsdXJUYXJnZXRSZWZcbiAgICAgICAgfSlcbiAgICAgIF1cblxuICAgICAgaWYgKHByb3BzLmxvYWRpbmcgPT09IHRydWUgJiYgcHJvcHMucGVyY2VudGFnZSAhPT0gdm9pZCAwKSB7XG4gICAgICAgIGNoaWxkLnB1c2goXG4gICAgICAgICAgaCgnc3BhbicsIHtcbiAgICAgICAgICAgIGNsYXNzOiAncS1idG5fX3Byb2dyZXNzIGFic29sdXRlLWZ1bGwgb3ZlcmZsb3ctaGlkZGVuJ1xuICAgICAgICAgIH0sIFtcbiAgICAgICAgICAgIGgoJ3NwYW4nLCB7XG4gICAgICAgICAgICAgIGNsYXNzOiAncS1idG5fX3Byb2dyZXNzLWluZGljYXRvciBmaXQgYmxvY2snICsgKHByb3BzLmRhcmtQZXJjZW50YWdlID09PSB0cnVlID8gJyBxLWJ0bl9fcHJvZ3Jlc3MtLWRhcmsnIDogJycpLFxuICAgICAgICAgICAgICBzdHlsZTogcGVyY2VudGFnZVN0eWxlLnZhbHVlXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIF0pXG4gICAgICAgIClcbiAgICAgIH1cblxuICAgICAgY2hpbGQucHVzaChcbiAgICAgICAgaCgnc3BhbicsIHtcbiAgICAgICAgICBjbGFzczogJ3EtYnRuX19jb250ZW50IHRleHQtY2VudGVyIGNvbCBpdGVtcy1jZW50ZXIgcS1hbmNob3ItLXNraXAgJyArIGlubmVyQ2xhc3Nlcy52YWx1ZVxuICAgICAgICB9LCBpbm5lcilcbiAgICAgIClcblxuICAgICAgcHJvcHMubG9hZGluZyAhPT0gbnVsbCAmJiBjaGlsZC5wdXNoKFxuICAgICAgICBoKFRyYW5zaXRpb24sIHtcbiAgICAgICAgICBuYW1lOiAncS10cmFuc2l0aW9uLS1mYWRlJ1xuICAgICAgICB9LCAoKSA9PiAoXG4gICAgICAgICAgcHJvcHMubG9hZGluZyA9PT0gdHJ1ZVxuICAgICAgICAgICAgPyBbXG4gICAgICAgICAgICAgICAgaCgnc3BhbicsIHtcbiAgICAgICAgICAgICAgICAgIGtleTogJ2xvYWRpbmcnLFxuICAgICAgICAgICAgICAgICAgY2xhc3M6ICdhYnNvbHV0ZS1mdWxsIGZsZXggZmxleC1jZW50ZXInXG4gICAgICAgICAgICAgICAgfSwgc2xvdHMubG9hZGluZyAhPT0gdm9pZCAwID8gc2xvdHMubG9hZGluZygpIDogWyBoKFFTcGlubmVyKSBdKVxuICAgICAgICAgICAgICBdXG4gICAgICAgICAgICA6IG51bGxcbiAgICAgICAgKSlcbiAgICAgIClcblxuICAgICAgcmV0dXJuIHdpdGhEaXJlY3RpdmVzKFxuICAgICAgICBoKFxuICAgICAgICAgIGxpbmtUYWcudmFsdWUsXG4gICAgICAgICAgbm9kZVByb3BzLnZhbHVlLFxuICAgICAgICAgIGNoaWxkXG4gICAgICAgICksXG4gICAgICAgIFsgW1xuICAgICAgICAgIFJpcHBsZSxcbiAgICAgICAgICByaXBwbGUudmFsdWUsXG4gICAgICAgICAgdm9pZCAwLFxuICAgICAgICAgIHJpcHBsZVByb3BzLnZhbHVlXG4gICAgICAgIF0gXVxuICAgICAgKVxuICAgIH1cbiAgfVxufSlcbiIsImltcG9ydCB7IGdsb2JhbENvbmZpZyB9IGZyb20gJy4vZ2xvYmFsLWNvbmZpZy5qcydcblxuY29uc3QgZ2xvYmFsTm9kZXMgPSBbXVxubGV0IHRhcmdldCA9IF9fUVVBU0FSX1NTUl9TRVJWRVJfX1xuICA/IHZvaWQgMFxuICA6IGRvY3VtZW50LmJvZHlcblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUdsb2JhbE5vZGUgKGlkKSB7XG4gIGNvbnN0IGVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcblxuICBpZiAoaWQgIT09IHZvaWQgMCkge1xuICAgIGVsLmlkID0gaWRcbiAgfVxuXG4gIGlmIChnbG9iYWxDb25maWcuZ2xvYmFsTm9kZXMgIT09IHZvaWQgMCkge1xuICAgIGNvbnN0IGNscyA9IGdsb2JhbENvbmZpZy5nbG9iYWxOb2Rlcy5jbGFzc1xuICAgIGlmIChjbHMgIT09IHZvaWQgMCkge1xuICAgICAgZWwuY2xhc3NOYW1lID0gY2xzXG4gICAgfVxuICB9XG5cbiAgdGFyZ2V0LmFwcGVuZENoaWxkKGVsKVxuICBnbG9iYWxOb2Rlcy5wdXNoKGVsKVxuXG4gIHJldHVybiBlbFxufVxuXG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlR2xvYmFsTm9kZSAoZWwpIHtcbiAgZ2xvYmFsTm9kZXMuc3BsaWNlKGdsb2JhbE5vZGVzLmluZGV4T2YoZWwpLCAxKVxuICBlbC5yZW1vdmUoKVxufVxuXG5leHBvcnQgZnVuY3Rpb24gY2hhbmdlR2xvYmFsTm9kZXNUYXJnZXQgKGVsKSB7XG4gIGlmIChlbCAhPT0gdGFyZ2V0KSB7XG4gICAgdGFyZ2V0ID0gZWxcblxuICAgIGdsb2JhbE5vZGVzLmZvckVhY2goZWwgPT4ge1xuICAgICAgaWYgKGVsLmNvbnRhaW5zKHRhcmdldCkgPT09IGZhbHNlKSB7XG4gICAgICAgIHRhcmdldC5hcHBlbmRDaGlsZChlbClcbiAgICAgIH1cbiAgICB9KVxuICB9XG59XG4iLCJpbXBvcnQgeyBoLCByZWYsIG1hcmtSYXcsIFRyYW5zaXRpb25Hcm91cCB9IGZyb20gJ3Z1ZSdcblxuaW1wb3J0IFFBdmF0YXIgZnJvbSAnLi4vY29tcG9uZW50cy9hdmF0YXIvUUF2YXRhci5qcydcbmltcG9ydCBRSWNvbiBmcm9tICcuLi9jb21wb25lbnRzL2ljb24vUUljb24uanMnXG5pbXBvcnQgUUJ0biBmcm9tICcuLi9jb21wb25lbnRzL2J0bi9RQnRuLmpzJ1xuaW1wb3J0IFFTcGlubmVyIGZyb20gJy4uL2NvbXBvbmVudHMvc3Bpbm5lci9RU3Bpbm5lci5qcydcblxuaW1wb3J0IHsgY3JlYXRlQ29tcG9uZW50IH0gZnJvbSAnLi4vdXRpbHMvcHJpdmF0ZS9jcmVhdGUuanMnXG5pbXBvcnQgeyBub29wIH0gZnJvbSAnLi4vdXRpbHMvZXZlbnQuanMnXG5pbXBvcnQgeyBjcmVhdGVHbG9iYWxOb2RlIH0gZnJvbSAnLi4vdXRpbHMvcHJpdmF0ZS9nbG9iYWwtbm9kZXMuanMnXG5pbXBvcnQgeyBjcmVhdGVDaGlsZEFwcCB9IGZyb20gJy4uL2luc3RhbGwtcXVhc2FyLmpzJ1xuaW1wb3J0IHsgaXNPYmplY3QgfSBmcm9tICcuLi91dGlscy9wcml2YXRlL2lzLmpzJ1xuXG5sZXQgdWlkID0gMFxuXG5jb25zdCBkZWZhdWx0cyA9IHt9XG5jb25zdCBncm91cHMgPSB7fVxuY29uc3Qgbm90aWZpY2F0aW9uc0xpc3QgPSB7fVxuY29uc3QgcG9zaXRpb25DbGFzcyA9IHt9XG5jb25zdCBlbXB0eVJFID0gL15cXHMqJC9cbmNvbnN0IG5vdGlmUmVmcyA9IFtdXG5cbmNvbnN0IHBvc2l0aW9uTGlzdCA9IFtcbiAgJ3RvcC1sZWZ0JywgJ3RvcC1yaWdodCcsXG4gICdib3R0b20tbGVmdCcsICdib3R0b20tcmlnaHQnLFxuICAndG9wJywgJ2JvdHRvbScsICdsZWZ0JywgJ3JpZ2h0JywgJ2NlbnRlcidcbl1cblxuY29uc3QgYmFkZ2VQb3NpdGlvbnMgPSBbXG4gICd0b3AtbGVmdCcsICd0b3AtcmlnaHQnLFxuICAnYm90dG9tLWxlZnQnLCAnYm90dG9tLXJpZ2h0J1xuXVxuXG5jb25zdCBub3RpZlR5cGVzID0ge1xuICBwb3NpdGl2ZToge1xuICAgIGljb246ICRxID0+ICRxLmljb25TZXQudHlwZS5wb3NpdGl2ZSxcbiAgICBjb2xvcjogJ3Bvc2l0aXZlJ1xuICB9LFxuXG4gIG5lZ2F0aXZlOiB7XG4gICAgaWNvbjogJHEgPT4gJHEuaWNvblNldC50eXBlLm5lZ2F0aXZlLFxuICAgIGNvbG9yOiAnbmVnYXRpdmUnXG4gIH0sXG5cbiAgd2FybmluZzoge1xuICAgIGljb246ICRxID0+ICRxLmljb25TZXQudHlwZS53YXJuaW5nLFxuICAgIGNvbG9yOiAnd2FybmluZycsXG4gICAgdGV4dENvbG9yOiAnZGFyaydcbiAgfSxcblxuICBpbmZvOiB7XG4gICAgaWNvbjogJHEgPT4gJHEuaWNvblNldC50eXBlLmluZm8sXG4gICAgY29sb3I6ICdpbmZvJ1xuICB9LFxuXG4gIG9uZ29pbmc6IHtcbiAgICBncm91cDogZmFsc2UsXG4gICAgdGltZW91dDogMCxcbiAgICBzcGlubmVyOiB0cnVlLFxuICAgIGNvbG9yOiAnZ3JleS04J1xuICB9XG59XG5cbmZ1bmN0aW9uIGFkZE5vdGlmaWNhdGlvbiAoY29uZmlnLCAkcSwgb3JpZ2luYWxBcGkpIHtcbiAgaWYgKCFjb25maWcpIHtcbiAgICByZXR1cm4gbG9nRXJyb3IoJ3BhcmFtZXRlciByZXF1aXJlZCcpXG4gIH1cblxuICBsZXQgQXBpXG4gIGNvbnN0IG5vdGlmID0geyB0ZXh0Q29sb3I6ICd3aGl0ZScgfVxuXG4gIGlmIChjb25maWcuaWdub3JlRGVmYXVsdHMgIT09IHRydWUpIHtcbiAgICBPYmplY3QuYXNzaWduKG5vdGlmLCBkZWZhdWx0cylcbiAgfVxuXG4gIGlmIChpc09iamVjdChjb25maWcpID09PSBmYWxzZSkge1xuICAgIGlmIChub3RpZi50eXBlKSB7XG4gICAgICBPYmplY3QuYXNzaWduKG5vdGlmLCBub3RpZlR5cGVzWyBub3RpZi50eXBlIF0pXG4gICAgfVxuXG4gICAgY29uZmlnID0geyBtZXNzYWdlOiBjb25maWcgfVxuICB9XG5cbiAgT2JqZWN0LmFzc2lnbihub3RpZiwgbm90aWZUeXBlc1sgY29uZmlnLnR5cGUgfHwgbm90aWYudHlwZSBdLCBjb25maWcpXG5cbiAgaWYgKHR5cGVvZiBub3RpZi5pY29uID09PSAnZnVuY3Rpb24nKSB7XG4gICAgbm90aWYuaWNvbiA9IG5vdGlmLmljb24oJHEpXG4gIH1cblxuICBpZiAoIW5vdGlmLnNwaW5uZXIpIHtcbiAgICBub3RpZi5zcGlubmVyID0gZmFsc2VcbiAgfVxuICBlbHNlIHtcbiAgICBpZiAobm90aWYuc3Bpbm5lciA9PT0gdHJ1ZSkge1xuICAgICAgbm90aWYuc3Bpbm5lciA9IFFTcGlubmVyXG4gICAgfVxuXG4gICAgbm90aWYuc3Bpbm5lciA9IG1hcmtSYXcobm90aWYuc3Bpbm5lcilcbiAgfVxuXG4gIG5vdGlmLm1ldGEgPSB7XG4gICAgaGFzTWVkaWE6IEJvb2xlYW4obm90aWYuc3Bpbm5lciAhPT0gZmFsc2UgfHwgbm90aWYuaWNvbiB8fCBub3RpZi5hdmF0YXIpLFxuICAgIGhhc1RleHQ6IGhhc0NvbnRlbnQobm90aWYubWVzc2FnZSkgfHwgaGFzQ29udGVudChub3RpZi5jYXB0aW9uKVxuICB9XG5cbiAgaWYgKG5vdGlmLnBvc2l0aW9uKSB7XG4gICAgaWYgKHBvc2l0aW9uTGlzdC5pbmNsdWRlcyhub3RpZi5wb3NpdGlvbikgPT09IGZhbHNlKSB7XG4gICAgICByZXR1cm4gbG9nRXJyb3IoJ3dyb25nIHBvc2l0aW9uJywgY29uZmlnKVxuICAgIH1cbiAgfVxuICBlbHNlIHtcbiAgICBub3RpZi5wb3NpdGlvbiA9ICdib3R0b20nXG4gIH1cblxuICBpZiAobm90aWYudGltZW91dCA9PT0gdm9pZCAwKSB7XG4gICAgbm90aWYudGltZW91dCA9IDUwMDBcbiAgfVxuICBlbHNlIHtcbiAgICBjb25zdCB0ID0gcGFyc2VJbnQobm90aWYudGltZW91dCwgMTApXG4gICAgaWYgKGlzTmFOKHQpIHx8IHQgPCAwKSB7XG4gICAgICByZXR1cm4gbG9nRXJyb3IoJ3dyb25nIHRpbWVvdXQnLCBjb25maWcpXG4gICAgfVxuICAgIG5vdGlmLnRpbWVvdXQgPSB0XG4gIH1cblxuICBpZiAobm90aWYudGltZW91dCA9PT0gMCkge1xuICAgIG5vdGlmLnByb2dyZXNzID0gZmFsc2VcbiAgfVxuICBlbHNlIGlmIChub3RpZi5wcm9ncmVzcyA9PT0gdHJ1ZSkge1xuICAgIG5vdGlmLm1ldGEucHJvZ3Jlc3NDbGFzcyA9ICdxLW5vdGlmaWNhdGlvbl9fcHJvZ3Jlc3MnICsgKFxuICAgICAgbm90aWYucHJvZ3Jlc3NDbGFzc1xuICAgICAgICA/IGAgJHsgbm90aWYucHJvZ3Jlc3NDbGFzcyB9YFxuICAgICAgICA6ICcnXG4gICAgKVxuXG4gICAgbm90aWYubWV0YS5wcm9ncmVzc1N0eWxlID0ge1xuICAgICAgYW5pbWF0aW9uRHVyYXRpb246IGAkeyBub3RpZi50aW1lb3V0ICsgMTAwMCB9bXNgXG4gICAgfVxuICB9XG5cbiAgY29uc3QgYWN0aW9ucyA9IChcbiAgICBBcnJheS5pc0FycmF5KGNvbmZpZy5hY3Rpb25zKSA9PT0gdHJ1ZVxuICAgICAgPyBjb25maWcuYWN0aW9uc1xuICAgICAgOiBbXVxuICApLmNvbmNhdChcbiAgICBjb25maWcuaWdub3JlRGVmYXVsdHMgIT09IHRydWUgJiYgQXJyYXkuaXNBcnJheShkZWZhdWx0cy5hY3Rpb25zKSA9PT0gdHJ1ZVxuICAgICAgPyBkZWZhdWx0cy5hY3Rpb25zXG4gICAgICA6IFtdXG4gICkuY29uY2F0KFxuICAgIG5vdGlmVHlwZXNbIGNvbmZpZy50eXBlIF0gIT09IHZvaWQgMCAmJiBBcnJheS5pc0FycmF5KG5vdGlmVHlwZXNbIGNvbmZpZy50eXBlIF0uYWN0aW9ucykgPT09IHRydWVcbiAgICAgID8gbm90aWZUeXBlc1sgY29uZmlnLnR5cGUgXS5hY3Rpb25zXG4gICAgICA6IFtdXG4gIClcblxuICBjb25zdCB7IGNsb3NlQnRuIH0gPSBub3RpZlxuICBjbG9zZUJ0biAmJiBhY3Rpb25zLnB1c2goe1xuICAgIGxhYmVsOiB0eXBlb2YgY2xvc2VCdG4gPT09ICdzdHJpbmcnXG4gICAgICA/IGNsb3NlQnRuXG4gICAgICA6ICRxLmxhbmcubGFiZWwuY2xvc2VcbiAgfSlcblxuICBub3RpZi5hY3Rpb25zID0gYWN0aW9ucy5tYXAoKHsgaGFuZGxlciwgbm9EaXNtaXNzLCAuLi5pdGVtIH0pID0+ICh7XG4gICAgZmxhdDogdHJ1ZSxcbiAgICAuLi5pdGVtLFxuICAgIG9uQ2xpY2s6IHR5cGVvZiBoYW5kbGVyID09PSAnZnVuY3Rpb24nXG4gICAgICA/ICgpID0+IHtcbiAgICAgICAgICBoYW5kbGVyKClcbiAgICAgICAgICBub0Rpc21pc3MgIT09IHRydWUgJiYgZGlzbWlzcygpXG4gICAgICAgIH1cbiAgICAgIDogKCkgPT4geyBkaXNtaXNzKCkgfVxuICB9KSlcblxuICBpZiAobm90aWYubXVsdGlMaW5lID09PSB2b2lkIDApIHtcbiAgICBub3RpZi5tdWx0aUxpbmUgPSBub3RpZi5hY3Rpb25zLmxlbmd0aCA+IDFcbiAgfVxuXG4gIE9iamVjdC5hc3NpZ24obm90aWYubWV0YSwge1xuICAgIGNsYXNzOiAncS1ub3RpZmljYXRpb24gcm93IGl0ZW1zLXN0cmV0Y2gnXG4gICAgICArIGAgcS1ub3RpZmljYXRpb24tLSR7IG5vdGlmLm11bHRpTGluZSA9PT0gdHJ1ZSA/ICdtdWx0aS1saW5lJyA6ICdzdGFuZGFyZCcgfWBcbiAgICAgICsgKG5vdGlmLmNvbG9yICE9PSB2b2lkIDAgPyBgIGJnLSR7IG5vdGlmLmNvbG9yIH1gIDogJycpXG4gICAgICArIChub3RpZi50ZXh0Q29sb3IgIT09IHZvaWQgMCA/IGAgdGV4dC0keyBub3RpZi50ZXh0Q29sb3IgfWAgOiAnJylcbiAgICAgICsgKG5vdGlmLmNsYXNzZXMgIT09IHZvaWQgMCA/IGAgJHsgbm90aWYuY2xhc3NlcyB9YCA6ICcnKSxcblxuICAgIHdyYXBwZXJDbGFzczogJ3Etbm90aWZpY2F0aW9uX193cmFwcGVyIGNvbCByZWxhdGl2ZS1wb3NpdGlvbiBib3JkZXItcmFkaXVzLWluaGVyaXQgJ1xuICAgICAgKyAobm90aWYubXVsdGlMaW5lID09PSB0cnVlID8gJ2NvbHVtbiBuby13cmFwIGp1c3RpZnktY2VudGVyJyA6ICdyb3cgaXRlbXMtY2VudGVyJyksXG5cbiAgICBjb250ZW50Q2xhc3M6ICdxLW5vdGlmaWNhdGlvbl9fY29udGVudCByb3cgaXRlbXMtY2VudGVyJ1xuICAgICAgKyAobm90aWYubXVsdGlMaW5lID09PSB0cnVlID8gJycgOiAnIGNvbCcpLFxuXG4gICAgbGVmdENsYXNzOiBub3RpZi5tZXRhLmhhc1RleHQgPT09IHRydWUgPyAnYWRkaXRpb25hbCcgOiAnc2luZ2xlJyxcblxuICAgIGF0dHJzOiB7XG4gICAgICByb2xlOiAnYWxlcnQnLFxuICAgICAgLi4ubm90aWYuYXR0cnNcbiAgICB9XG4gIH0pXG5cbiAgaWYgKG5vdGlmLmdyb3VwID09PSBmYWxzZSkge1xuICAgIG5vdGlmLmdyb3VwID0gdm9pZCAwXG4gICAgbm90aWYubWV0YS5ncm91cCA9IHZvaWQgMFxuICB9XG4gIGVsc2Uge1xuICAgIGlmIChub3RpZi5ncm91cCA9PT0gdm9pZCAwIHx8IG5vdGlmLmdyb3VwID09PSB0cnVlKSB7XG4gICAgICAvLyBkbyBub3QgcmVwbGFjZSBub3RpZmljYXRpb25zIHdpdGggZGlmZmVyZW50IGJ1dHRvbnNcbiAgICAgIG5vdGlmLmdyb3VwID0gW1xuICAgICAgICBub3RpZi5tZXNzYWdlLFxuICAgICAgICBub3RpZi5jYXB0aW9uLFxuICAgICAgICBub3RpZi5tdWx0aWxpbmVcbiAgICAgIF0uY29uY2F0KFxuICAgICAgICBub3RpZi5hY3Rpb25zLm1hcChwcm9wcyA9PiBgJHsgcHJvcHMubGFiZWwgfSokeyBwcm9wcy5pY29uIH1gKVxuICAgICAgKS5qb2luKCd8JylcbiAgICB9XG5cbiAgICBub3RpZi5tZXRhLmdyb3VwID0gbm90aWYuZ3JvdXAgKyAnfCcgKyBub3RpZi5wb3NpdGlvblxuICB9XG5cbiAgaWYgKG5vdGlmLmFjdGlvbnMubGVuZ3RoID09PSAwKSB7XG4gICAgbm90aWYuYWN0aW9ucyA9IHZvaWQgMFxuICB9XG4gIGVsc2Uge1xuICAgIG5vdGlmLm1ldGEuYWN0aW9uc0NsYXNzID0gJ3Etbm90aWZpY2F0aW9uX19hY3Rpb25zIHJvdyBpdGVtcy1jZW50ZXIgJ1xuICAgICAgKyAobm90aWYubXVsdGlMaW5lID09PSB0cnVlID8gJ2p1c3RpZnktZW5kJyA6ICdjb2wtYXV0bycpXG4gICAgICArIChub3RpZi5tZXRhLmhhc01lZGlhID09PSB0cnVlID8gJyBxLW5vdGlmaWNhdGlvbl9fYWN0aW9ucy0td2l0aC1tZWRpYScgOiAnJylcbiAgfVxuXG4gIGlmIChvcmlnaW5hbEFwaSAhPT0gdm9pZCAwKSB7XG4gICAgLy8gcmVzZXQgdGltZW91dCBpZiBhbnlcbiAgICBjbGVhclRpbWVvdXQob3JpZ2luYWxBcGkubm90aWYubWV0YS50aW1lcilcblxuICAgIC8vIHJldGFpbiB1aWRcbiAgICBub3RpZi5tZXRhLnVpZCA9IG9yaWdpbmFsQXBpLm5vdGlmLm1ldGEudWlkXG5cbiAgICAvLyByZXBsYWNlIG5vdGlmXG4gICAgY29uc3QgaW5kZXggPSBub3RpZmljYXRpb25zTGlzdFsgbm90aWYucG9zaXRpb24gXS52YWx1ZS5pbmRleE9mKG9yaWdpbmFsQXBpLm5vdGlmKVxuICAgIG5vdGlmaWNhdGlvbnNMaXN0WyBub3RpZi5wb3NpdGlvbiBdLnZhbHVlWyBpbmRleCBdID0gbm90aWZcbiAgfVxuICBlbHNlIHtcbiAgICBjb25zdCBvcmlnaW5hbCA9IGdyb3Vwc1sgbm90aWYubWV0YS5ncm91cCBdXG5cbiAgICAvLyB3b29ob28sIGl0J3MgYSBuZXcgbm90aWZpY2F0aW9uXG4gICAgaWYgKG9yaWdpbmFsID09PSB2b2lkIDApIHtcbiAgICAgIG5vdGlmLm1ldGEudWlkID0gdWlkKytcbiAgICAgIG5vdGlmLm1ldGEuYmFkZ2UgPSAxXG5cbiAgICAgIGlmIChbICdsZWZ0JywgJ3JpZ2h0JywgJ2NlbnRlcicgXS5pbmRleE9mKG5vdGlmLnBvc2l0aW9uKSAhPT0gLTEpIHtcbiAgICAgICAgbm90aWZpY2F0aW9uc0xpc3RbIG5vdGlmLnBvc2l0aW9uIF0udmFsdWUuc3BsaWNlKFxuICAgICAgICAgIE1hdGguZmxvb3Iobm90aWZpY2F0aW9uc0xpc3RbIG5vdGlmLnBvc2l0aW9uIF0udmFsdWUubGVuZ3RoIC8gMiksXG4gICAgICAgICAgMCxcbiAgICAgICAgICBub3RpZlxuICAgICAgICApXG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgY29uc3QgYWN0aW9uID0gbm90aWYucG9zaXRpb24uaW5kZXhPZigndG9wJykgPiAtMSA/ICd1bnNoaWZ0JyA6ICdwdXNoJ1xuICAgICAgICBub3RpZmljYXRpb25zTGlzdFsgbm90aWYucG9zaXRpb24gXS52YWx1ZVsgYWN0aW9uIF0obm90aWYpXG4gICAgICB9XG5cbiAgICAgIGlmIChub3RpZi5ncm91cCAhPT0gdm9pZCAwKSB7XG4gICAgICAgIGdyb3Vwc1sgbm90aWYubWV0YS5ncm91cCBdID0gbm90aWZcbiAgICAgIH1cbiAgICB9XG4gICAgLy8gb2ssIHNvIGl0J3MgTk9UIGEgbmV3IG9uZVxuICAgIGVsc2Uge1xuICAgICAgLy8gcmVzZXQgdGltZW91dCBpZiBhbnlcbiAgICAgIGNsZWFyVGltZW91dChvcmlnaW5hbC5tZXRhLnRpbWVyKVxuXG4gICAgICBpZiAobm90aWYuYmFkZ2VQb3NpdGlvbiAhPT0gdm9pZCAwKSB7XG4gICAgICAgIGlmIChiYWRnZVBvc2l0aW9ucy5pbmNsdWRlcyhub3RpZi5iYWRnZVBvc2l0aW9uKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICByZXR1cm4gbG9nRXJyb3IoJ3dyb25nIGJhZGdlUG9zaXRpb24nLCBjb25maWcpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICBub3RpZi5iYWRnZVBvc2l0aW9uID0gYHRvcC0keyBub3RpZi5wb3NpdGlvbi5pbmRleE9mKCdsZWZ0JykgPiAtMSA/ICdyaWdodCcgOiAnbGVmdCcgfWBcbiAgICAgIH1cblxuICAgICAgbm90aWYubWV0YS51aWQgPSBvcmlnaW5hbC5tZXRhLnVpZFxuICAgICAgbm90aWYubWV0YS5iYWRnZSA9IG9yaWdpbmFsLm1ldGEuYmFkZ2UgKyAxXG4gICAgICBub3RpZi5tZXRhLmJhZGdlQ2xhc3MgPSBgcS1ub3RpZmljYXRpb25fX2JhZGdlIHEtbm90aWZpY2F0aW9uX19iYWRnZS0tJHsgbm90aWYuYmFkZ2VQb3NpdGlvbiB9YFxuICAgICAgICArIChub3RpZi5iYWRnZUNvbG9yICE9PSB2b2lkIDAgPyBgIGJnLSR7IG5vdGlmLmJhZGdlQ29sb3IgfWAgOiAnJylcbiAgICAgICAgKyAobm90aWYuYmFkZ2VUZXh0Q29sb3IgIT09IHZvaWQgMCA/IGAgdGV4dC0keyBub3RpZi5iYWRnZVRleHRDb2xvciB9YCA6ICcnKVxuICAgICAgICArIChub3RpZi5iYWRnZUNsYXNzID8gYCAkeyBub3RpZi5iYWRnZUNsYXNzIH1gIDogJycpXG5cbiAgICAgIGNvbnN0IGluZGV4ID0gbm90aWZpY2F0aW9uc0xpc3RbIG5vdGlmLnBvc2l0aW9uIF0udmFsdWUuaW5kZXhPZihvcmlnaW5hbClcbiAgICAgIG5vdGlmaWNhdGlvbnNMaXN0WyBub3RpZi5wb3NpdGlvbiBdLnZhbHVlWyBpbmRleCBdID0gZ3JvdXBzWyBub3RpZi5tZXRhLmdyb3VwIF0gPSBub3RpZlxuICAgIH1cbiAgfVxuXG4gIGNvbnN0IGRpc21pc3MgPSAoKSA9PiB7XG4gICAgcmVtb3ZlTm90aWZpY2F0aW9uKG5vdGlmKVxuICAgIEFwaSA9IHZvaWQgMFxuICB9XG5cbiAgaWYgKG5vdGlmLnRpbWVvdXQgPiAwKSB7XG4gICAgbm90aWYubWV0YS50aW1lciA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgZGlzbWlzcygpXG4gICAgfSwgbm90aWYudGltZW91dCArIC8qIHNob3cgZHVyYXRpb24gKi8gMTAwMClcbiAgfVxuXG4gIC8vIG9ubHkgbm9uLWdyb3VwYWJsZSBjYW4gYmUgdXBkYXRlZFxuICBpZiAobm90aWYuZ3JvdXAgIT09IHZvaWQgMCkge1xuICAgIHJldHVybiBwcm9wcyA9PiB7XG4gICAgICBpZiAocHJvcHMgIT09IHZvaWQgMCkge1xuICAgICAgICBsb2dFcnJvcigndHJ5aW5nIHRvIHVwZGF0ZSBhIGdyb3VwZWQgb25lIHdoaWNoIGlzIGZvcmJpZGRlbicsIGNvbmZpZylcbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICBkaXNtaXNzKClcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBBcGkgPSB7XG4gICAgZGlzbWlzcyxcbiAgICBjb25maWcsXG4gICAgbm90aWZcbiAgfVxuXG4gIGlmIChvcmlnaW5hbEFwaSAhPT0gdm9pZCAwKSB7XG4gICAgT2JqZWN0LmFzc2lnbihvcmlnaW5hbEFwaSwgQXBpKVxuICAgIHJldHVyblxuICB9XG5cbiAgcmV0dXJuIHByb3BzID0+IHtcbiAgICAvLyBpZiBub3RpZmljYXRpb24gd2Fzbid0IHByZXZpb3VzbHkgZGlzbWlzc2VkXG4gICAgaWYgKEFwaSAhPT0gdm9pZCAwKSB7XG4gICAgICAvLyBpZiBubyBwYXJhbXMsIHRoZW4gd2UgbXVzdCBkaXNtaXNzIHRoZSBub3RpZmljYXRpb25cbiAgICAgIGlmIChwcm9wcyA9PT0gdm9pZCAwKSB7XG4gICAgICAgIEFwaS5kaXNtaXNzKClcbiAgICAgIH1cbiAgICAgIC8vIG90aGVyd2lzZSB3ZSdyZSB1cGRhdGluZyBpdFxuICAgICAgZWxzZSB7XG4gICAgICAgIGNvbnN0IG5ld05vdGlmID0gT2JqZWN0LmFzc2lnbih7fSwgQXBpLmNvbmZpZywgcHJvcHMsIHtcbiAgICAgICAgICBncm91cDogZmFsc2UsXG4gICAgICAgICAgcG9zaXRpb246IG5vdGlmLnBvc2l0aW9uXG4gICAgICAgIH0pXG5cbiAgICAgICAgYWRkTm90aWZpY2F0aW9uKG5ld05vdGlmLCAkcSwgQXBpKVxuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiByZW1vdmVOb3RpZmljYXRpb24gKG5vdGlmKSB7XG4gIGNsZWFyVGltZW91dChub3RpZi5tZXRhLnRpbWVyKVxuXG4gIGNvbnN0IGluZGV4ID0gbm90aWZpY2F0aW9uc0xpc3RbIG5vdGlmLnBvc2l0aW9uIF0udmFsdWUuaW5kZXhPZihub3RpZilcbiAgaWYgKGluZGV4ICE9PSAtMSkge1xuICAgIGlmIChub3RpZi5ncm91cCAhPT0gdm9pZCAwKSB7XG4gICAgICBkZWxldGUgZ3JvdXBzWyBub3RpZi5tZXRhLmdyb3VwIF1cbiAgICB9XG5cbiAgICBjb25zdCBlbCA9IG5vdGlmUmVmc1sgJycgKyBub3RpZi5tZXRhLnVpZCBdXG5cbiAgICBpZiAoZWwpIHtcbiAgICAgIGNvbnN0IHsgd2lkdGgsIGhlaWdodCB9ID0gZ2V0Q29tcHV0ZWRTdHlsZShlbClcblxuICAgICAgZWwuc3R5bGUubGVmdCA9IGAkeyBlbC5vZmZzZXRMZWZ0IH1weGBcbiAgICAgIGVsLnN0eWxlLndpZHRoID0gd2lkdGhcbiAgICAgIGVsLnN0eWxlLmhlaWdodCA9IGhlaWdodFxuICAgIH1cblxuICAgIG5vdGlmaWNhdGlvbnNMaXN0WyBub3RpZi5wb3NpdGlvbiBdLnZhbHVlLnNwbGljZShpbmRleCwgMSlcblxuICAgIGlmICh0eXBlb2Ygbm90aWYub25EaXNtaXNzID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBub3RpZi5vbkRpc21pc3MoKVxuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBoYXNDb250ZW50IChzdHIpIHtcbiAgcmV0dXJuIHN0ciAhPT0gdm9pZCAwXG4gICAgJiYgc3RyICE9PSBudWxsXG4gICAgJiYgZW1wdHlSRS50ZXN0KHN0cikgIT09IHRydWVcbn1cblxuZnVuY3Rpb24gbG9nRXJyb3IgKGVycm9yLCBjb25maWcpIHtcbiAgY29uc29sZS5lcnJvcihgTm90aWZ5OiAkeyBlcnJvciB9YCwgY29uZmlnKVxuICByZXR1cm4gZmFsc2Vcbn1cblxuZnVuY3Rpb24gZ2V0Q29tcG9uZW50ICgpIHtcbiAgcmV0dXJuIGNyZWF0ZUNvbXBvbmVudCh7XG4gICAgbmFtZTogJ1FOb3RpZmljYXRpb25zJyxcblxuICAgIC8vIGhpZGUgQXBwIGZyb20gVnVlIGRldnRvb2xzXG4gICAgZGV2dG9vbHM6IHsgaGlkZTogdHJ1ZSB9LFxuXG4gICAgc2V0dXAgKCkge1xuICAgICAgcmV0dXJuICgpID0+IGgoJ2RpdicsIHsgY2xhc3M6ICdxLW5vdGlmaWNhdGlvbnMnIH0sIHBvc2l0aW9uTGlzdC5tYXAocG9zID0+IHtcbiAgICAgICAgcmV0dXJuIGgoVHJhbnNpdGlvbkdyb3VwLCB7XG4gICAgICAgICAga2V5OiBwb3MsXG4gICAgICAgICAgY2xhc3M6IHBvc2l0aW9uQ2xhc3NbIHBvcyBdLFxuICAgICAgICAgIHRhZzogJ2RpdicsXG4gICAgICAgICAgbmFtZTogYHEtbm90aWZpY2F0aW9uLS0keyBwb3MgfWBcbiAgICAgICAgfSwgKCkgPT4gbm90aWZpY2F0aW9uc0xpc3RbIHBvcyBdLnZhbHVlLm1hcChub3RpZiA9PiB7XG4gICAgICAgICAgY29uc3QgbWV0YSA9IG5vdGlmLm1ldGFcbiAgICAgICAgICBjb25zdCBtYWluQ2hpbGQgPSBbXVxuXG4gICAgICAgICAgaWYgKG1ldGEuaGFzTWVkaWEgPT09IHRydWUpIHtcbiAgICAgICAgICAgIGlmIChub3RpZi5zcGlubmVyICE9PSBmYWxzZSkge1xuICAgICAgICAgICAgICBtYWluQ2hpbGQucHVzaChcbiAgICAgICAgICAgICAgICBoKG5vdGlmLnNwaW5uZXIsIHtcbiAgICAgICAgICAgICAgICAgIGNsYXNzOiAncS1ub3RpZmljYXRpb25fX3NwaW5uZXIgcS1ub3RpZmljYXRpb25fX3NwaW5uZXItLScgKyBtZXRhLmxlZnRDbGFzcyxcbiAgICAgICAgICAgICAgICAgIGNvbG9yOiBub3RpZi5zcGlubmVyQ29sb3IsXG4gICAgICAgICAgICAgICAgICBzaXplOiBub3RpZi5zcGlubmVyU2l6ZVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKG5vdGlmLmljb24pIHtcbiAgICAgICAgICAgICAgbWFpbkNoaWxkLnB1c2goXG4gICAgICAgICAgICAgICAgaChRSWNvbiwge1xuICAgICAgICAgICAgICAgICAgY2xhc3M6ICdxLW5vdGlmaWNhdGlvbl9faWNvbiBxLW5vdGlmaWNhdGlvbl9faWNvbi0tJyArIG1ldGEubGVmdENsYXNzLFxuICAgICAgICAgICAgICAgICAgbmFtZTogbm90aWYuaWNvbixcbiAgICAgICAgICAgICAgICAgIGNvbG9yOiBub3RpZi5pY29uQ29sb3IsXG4gICAgICAgICAgICAgICAgICBzaXplOiBub3RpZi5pY29uU2l6ZSxcbiAgICAgICAgICAgICAgICAgIHJvbGU6ICdpbWcnXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAobm90aWYuYXZhdGFyKSB7XG4gICAgICAgICAgICAgIG1haW5DaGlsZC5wdXNoKFxuICAgICAgICAgICAgICAgIGgoUUF2YXRhciwge1xuICAgICAgICAgICAgICAgICAgY2xhc3M6ICdxLW5vdGlmaWNhdGlvbl9fYXZhdGFyIHEtbm90aWZpY2F0aW9uX19hdmF0YXItLScgKyBtZXRhLmxlZnRDbGFzc1xuICAgICAgICAgICAgICAgIH0sICgpID0+IGgoJ2ltZycsIHsgc3JjOiBub3RpZi5hdmF0YXIsICdhcmlhLWhpZGRlbic6ICd0cnVlJyB9KSlcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChtZXRhLmhhc1RleHQgPT09IHRydWUpIHtcbiAgICAgICAgICAgIGxldCBtc2dDaGlsZFxuICAgICAgICAgICAgY29uc3QgbXNnRGF0YSA9IHsgY2xhc3M6ICdxLW5vdGlmaWNhdGlvbl9fbWVzc2FnZSBjb2wnIH1cblxuICAgICAgICAgICAgaWYgKG5vdGlmLmh0bWwgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgbXNnRGF0YS5pbm5lckhUTUwgPSBub3RpZi5jYXB0aW9uXG4gICAgICAgICAgICAgICAgPyBgPGRpdj4keyBub3RpZi5tZXNzYWdlIH08L2Rpdj48ZGl2IGNsYXNzPVwicS1ub3RpZmljYXRpb25fX2NhcHRpb25cIj4keyBub3RpZi5jYXB0aW9uIH08L2Rpdj5gXG4gICAgICAgICAgICAgICAgOiBub3RpZi5tZXNzYWdlXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgY29uc3QgbXNnTm9kZSA9IFsgbm90aWYubWVzc2FnZSBdXG4gICAgICAgICAgICAgIG1zZ0NoaWxkID0gbm90aWYuY2FwdGlvblxuICAgICAgICAgICAgICAgID8gW1xuICAgICAgICAgICAgICAgICAgICBoKCdkaXYnLCBtc2dOb2RlKSxcbiAgICAgICAgICAgICAgICAgICAgaCgnZGl2JywgeyBjbGFzczogJ3Etbm90aWZpY2F0aW9uX19jYXB0aW9uJyB9LCBbIG5vdGlmLmNhcHRpb24gXSlcbiAgICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICA6IG1zZ05vZGVcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbWFpbkNoaWxkLnB1c2goXG4gICAgICAgICAgICAgIGgoJ2RpdicsIG1zZ0RhdGEsIG1zZ0NoaWxkKVxuICAgICAgICAgICAgKVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGNvbnN0IGNoaWxkID0gW1xuICAgICAgICAgICAgaCgnZGl2JywgeyBjbGFzczogbWV0YS5jb250ZW50Q2xhc3MgfSwgbWFpbkNoaWxkKVxuICAgICAgICAgIF1cblxuICAgICAgICAgIG5vdGlmLnByb2dyZXNzID09PSB0cnVlICYmIGNoaWxkLnB1c2goXG4gICAgICAgICAgICBoKCdkaXYnLCB7XG4gICAgICAgICAgICAgIGtleTogYCR7IG1ldGEudWlkIH18cHwkeyBtZXRhLmJhZGdlIH1gLFxuICAgICAgICAgICAgICBjbGFzczogbWV0YS5wcm9ncmVzc0NsYXNzLFxuICAgICAgICAgICAgICBzdHlsZTogbWV0YS5wcm9ncmVzc1N0eWxlXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIClcblxuICAgICAgICAgIG5vdGlmLmFjdGlvbnMgIT09IHZvaWQgMCAmJiBjaGlsZC5wdXNoKFxuICAgICAgICAgICAgaCgnZGl2Jywge1xuICAgICAgICAgICAgICBjbGFzczogbWV0YS5hY3Rpb25zQ2xhc3NcbiAgICAgICAgICAgIH0sIG5vdGlmLmFjdGlvbnMubWFwKHByb3BzID0+IGgoUUJ0biwgcHJvcHMpKSlcbiAgICAgICAgICApXG5cbiAgICAgICAgICBtZXRhLmJhZGdlID4gMSAmJiBjaGlsZC5wdXNoKFxuICAgICAgICAgICAgaCgnZGl2Jywge1xuICAgICAgICAgICAgICBrZXk6IGAkeyBtZXRhLnVpZCB9fCR7IG1ldGEuYmFkZ2UgfWAsXG4gICAgICAgICAgICAgIGNsYXNzOiBub3RpZi5tZXRhLmJhZGdlQ2xhc3MsXG4gICAgICAgICAgICAgIHN0eWxlOiBub3RpZi5iYWRnZVN0eWxlXG4gICAgICAgICAgICB9LCBbIG1ldGEuYmFkZ2UgXSlcbiAgICAgICAgICApXG5cbiAgICAgICAgICByZXR1cm4gaCgnZGl2Jywge1xuICAgICAgICAgICAgcmVmOiBlbCA9PiB7IG5vdGlmUmVmc1sgJycgKyBtZXRhLnVpZCBdID0gZWwgfSxcbiAgICAgICAgICAgIGtleTogbWV0YS51aWQsXG4gICAgICAgICAgICBjbGFzczogbWV0YS5jbGFzcyxcbiAgICAgICAgICAgIC4uLm1ldGEuYXR0cnNcbiAgICAgICAgICB9LCBbXG4gICAgICAgICAgICBoKCdkaXYnLCB7IGNsYXNzOiBtZXRhLndyYXBwZXJDbGFzcyB9LCBjaGlsZClcbiAgICAgICAgICBdKVxuICAgICAgICB9KSlcbiAgICAgIH0pKVxuICAgIH1cbiAgfSlcbn1cblxuZXhwb3J0IGRlZmF1bHQge1xuICBzZXREZWZhdWx0cyAob3B0cykge1xuICAgIGlmIChfX1FVQVNBUl9TU1JfU0VSVkVSX18gIT09IHRydWUpIHtcbiAgICAgIGlzT2JqZWN0KG9wdHMpID09PSB0cnVlICYmIE9iamVjdC5hc3NpZ24oZGVmYXVsdHMsIG9wdHMpXG4gICAgfVxuICB9LFxuXG4gIHJlZ2lzdGVyVHlwZSAodHlwZU5hbWUsIHR5cGVPcHRzKSB7XG4gICAgaWYgKF9fUVVBU0FSX1NTUl9TRVJWRVJfXyAhPT0gdHJ1ZSAmJiBpc09iamVjdCh0eXBlT3B0cykgPT09IHRydWUpIHtcbiAgICAgIG5vdGlmVHlwZXNbIHR5cGVOYW1lIF0gPSB0eXBlT3B0c1xuICAgIH1cbiAgfSxcblxuICBpbnN0YWxsICh7ICRxLCBwYXJlbnRBcHAgfSkge1xuICAgICRxLm5vdGlmeSA9IHRoaXMuY3JlYXRlID0gX19RVUFTQVJfU1NSX1NFUlZFUl9fXG4gICAgICA/IG5vb3BcbiAgICAgIDogb3B0cyA9PiBhZGROb3RpZmljYXRpb24ob3B0cywgJHEpXG5cbiAgICAkcS5ub3RpZnkuc2V0RGVmYXVsdHMgPSB0aGlzLnNldERlZmF1bHRzXG4gICAgJHEubm90aWZ5LnJlZ2lzdGVyVHlwZSA9IHRoaXMucmVnaXN0ZXJUeXBlXG5cbiAgICBpZiAoJHEuY29uZmlnLm5vdGlmeSAhPT0gdm9pZCAwKSB7XG4gICAgICB0aGlzLnNldERlZmF1bHRzKCRxLmNvbmZpZy5ub3RpZnkpXG4gICAgfVxuXG4gICAgaWYgKF9fUVVBU0FSX1NTUl9TRVJWRVJfXyAhPT0gdHJ1ZSAmJiB0aGlzLl9faW5zdGFsbGVkICE9PSB0cnVlKSB7XG4gICAgICBwb3NpdGlvbkxpc3QuZm9yRWFjaChwb3MgPT4ge1xuICAgICAgICBub3RpZmljYXRpb25zTGlzdFsgcG9zIF0gPSByZWYoW10pXG5cbiAgICAgICAgY29uc3RcbiAgICAgICAgICB2ZXJ0ID0gWyAnbGVmdCcsICdjZW50ZXInLCAncmlnaHQnIF0uaW5jbHVkZXMocG9zKSA9PT0gdHJ1ZSA/ICdjZW50ZXInIDogKHBvcy5pbmRleE9mKCd0b3AnKSA+IC0xID8gJ3RvcCcgOiAnYm90dG9tJyksXG4gICAgICAgICAgYWxpZ24gPSBwb3MuaW5kZXhPZignbGVmdCcpID4gLTEgPyAnc3RhcnQnIDogKHBvcy5pbmRleE9mKCdyaWdodCcpID4gLTEgPyAnZW5kJyA6ICdjZW50ZXInKSxcbiAgICAgICAgICBjbGFzc2VzID0gWyAnbGVmdCcsICdyaWdodCcgXS5pbmNsdWRlcyhwb3MpID8gYGl0ZW1zLSR7IHBvcyA9PT0gJ2xlZnQnID8gJ3N0YXJ0JyA6ICdlbmQnIH0ganVzdGlmeS1jZW50ZXJgIDogKHBvcyA9PT0gJ2NlbnRlcicgPyAnZmxleC1jZW50ZXInIDogYGl0ZW1zLSR7IGFsaWduIH1gKVxuXG4gICAgICAgIHBvc2l0aW9uQ2xhc3NbIHBvcyBdID0gYHEtbm90aWZpY2F0aW9uc19fbGlzdCBxLW5vdGlmaWNhdGlvbnNfX2xpc3QtLSR7IHZlcnQgfSBmaXhlZCBjb2x1bW4gbm8td3JhcCAkeyBjbGFzc2VzIH1gXG4gICAgICB9KVxuXG4gICAgICBjb25zdCBlbCA9IGNyZWF0ZUdsb2JhbE5vZGUoJ3Etbm90aWZ5JylcbiAgICAgIGNyZWF0ZUNoaWxkQXBwKGdldENvbXBvbmVudCgpLCBwYXJlbnRBcHApLm1vdW50KGVsKVxuICAgIH1cbiAgfVxufVxuIiwiaW1wb3J0IHsgY3NzLCBnZXRFbGVtZW50IH0gZnJvbSAnLi9kb20uanMnXG5cbmNvbnN0IHNjcm9sbFRhcmdldHMgPSBfX1FVQVNBUl9TU1JfU0VSVkVSX19cbiAgPyBbXVxuICA6IFsgbnVsbCwgZG9jdW1lbnQsIGRvY3VtZW50LmJvZHksIGRvY3VtZW50LnNjcm9sbGluZ0VsZW1lbnQsIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCBdXG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRTY3JvbGxUYXJnZXQgKGVsLCB0YXJnZXRFbCkge1xuICBsZXQgdGFyZ2V0ID0gZ2V0RWxlbWVudCh0YXJnZXRFbClcblxuICBpZiAodGFyZ2V0ID09PSB2b2lkIDApIHtcbiAgICBpZiAoZWwgPT09IHZvaWQgMCB8fCBlbCA9PT0gbnVsbCkge1xuICAgICAgcmV0dXJuIHdpbmRvd1xuICAgIH1cblxuICAgIHRhcmdldCA9IGVsLmNsb3Nlc3QoJy5zY3JvbGwsLnNjcm9sbC15LC5vdmVyZmxvdy1hdXRvJylcbiAgfVxuXG4gIHJldHVybiBzY3JvbGxUYXJnZXRzLmluY2x1ZGVzKHRhcmdldClcbiAgICA/IHdpbmRvd1xuICAgIDogdGFyZ2V0XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRTY3JvbGxIZWlnaHQgKGVsKSB7XG4gIHJldHVybiAoZWwgPT09IHdpbmRvdyA/IGRvY3VtZW50LmJvZHkgOiBlbCkuc2Nyb2xsSGVpZ2h0XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRTY3JvbGxXaWR0aCAoZWwpIHtcbiAgcmV0dXJuIChlbCA9PT0gd2luZG93ID8gZG9jdW1lbnQuYm9keSA6IGVsKS5zY3JvbGxXaWR0aFxufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0VmVydGljYWxTY3JvbGxQb3NpdGlvbiAoc2Nyb2xsVGFyZ2V0KSB7XG4gIHJldHVybiBzY3JvbGxUYXJnZXQgPT09IHdpbmRvd1xuICAgID8gd2luZG93LnBhZ2VZT2Zmc2V0IHx8IHdpbmRvdy5zY3JvbGxZIHx8IGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wIHx8IDBcbiAgICA6IHNjcm9sbFRhcmdldC5zY3JvbGxUb3Bcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldEhvcml6b250YWxTY3JvbGxQb3NpdGlvbiAoc2Nyb2xsVGFyZ2V0KSB7XG4gIHJldHVybiBzY3JvbGxUYXJnZXQgPT09IHdpbmRvd1xuICAgID8gd2luZG93LnBhZ2VYT2Zmc2V0IHx8IHdpbmRvdy5zY3JvbGxYIHx8IGRvY3VtZW50LmJvZHkuc2Nyb2xsTGVmdCB8fCAwXG4gICAgOiBzY3JvbGxUYXJnZXQuc2Nyb2xsTGVmdFxufVxuXG5leHBvcnQgZnVuY3Rpb24gYW5pbVZlcnRpY2FsU2Nyb2xsVG8gKGVsLCB0bywgZHVyYXRpb24gPSAwIC8qICwgcHJldlRpbWUgKi8pIHtcbiAgY29uc3QgcHJldlRpbWUgPSBhcmd1bWVudHNbIDMgXSA9PT0gdm9pZCAwID8gcGVyZm9ybWFuY2Uubm93KCkgOiBhcmd1bWVudHNbIDMgXVxuICBjb25zdCBwb3MgPSBnZXRWZXJ0aWNhbFNjcm9sbFBvc2l0aW9uKGVsKVxuXG4gIGlmIChkdXJhdGlvbiA8PSAwKSB7XG4gICAgaWYgKHBvcyAhPT0gdG8pIHtcbiAgICAgIHNldFNjcm9sbChlbCwgdG8pXG4gICAgfVxuICAgIHJldHVyblxuICB9XG5cbiAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKG5vd1RpbWUgPT4ge1xuICAgIGNvbnN0IGZyYW1lVGltZSA9IG5vd1RpbWUgLSBwcmV2VGltZVxuICAgIGNvbnN0IG5ld1BvcyA9IHBvcyArICh0byAtIHBvcykgLyBNYXRoLm1heChmcmFtZVRpbWUsIGR1cmF0aW9uKSAqIGZyYW1lVGltZVxuICAgIHNldFNjcm9sbChlbCwgbmV3UG9zKVxuICAgIGlmIChuZXdQb3MgIT09IHRvKSB7XG4gICAgICBhbmltVmVydGljYWxTY3JvbGxUbyhlbCwgdG8sIGR1cmF0aW9uIC0gZnJhbWVUaW1lLCBub3dUaW1lKVxuICAgIH1cbiAgfSlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGFuaW1Ib3Jpem9udGFsU2Nyb2xsVG8gKGVsLCB0bywgZHVyYXRpb24gPSAwIC8qICwgcHJldlRpbWUgKi8pIHtcbiAgY29uc3QgcHJldlRpbWUgPSBhcmd1bWVudHNbIDMgXSA9PT0gdm9pZCAwID8gcGVyZm9ybWFuY2Uubm93KCkgOiBhcmd1bWVudHNbIDMgXVxuICBjb25zdCBwb3MgPSBnZXRIb3Jpem9udGFsU2Nyb2xsUG9zaXRpb24oZWwpXG5cbiAgaWYgKGR1cmF0aW9uIDw9IDApIHtcbiAgICBpZiAocG9zICE9PSB0bykge1xuICAgICAgc2V0SG9yaXpvbnRhbFNjcm9sbChlbCwgdG8pXG4gICAgfVxuICAgIHJldHVyblxuICB9XG5cbiAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKG5vd1RpbWUgPT4ge1xuICAgIGNvbnN0IGZyYW1lVGltZSA9IG5vd1RpbWUgLSBwcmV2VGltZVxuICAgIGNvbnN0IG5ld1BvcyA9IHBvcyArICh0byAtIHBvcykgLyBNYXRoLm1heChmcmFtZVRpbWUsIGR1cmF0aW9uKSAqIGZyYW1lVGltZVxuICAgIHNldEhvcml6b250YWxTY3JvbGwoZWwsIG5ld1BvcylcbiAgICBpZiAobmV3UG9zICE9PSB0bykge1xuICAgICAgYW5pbUhvcml6b250YWxTY3JvbGxUbyhlbCwgdG8sIGR1cmF0aW9uIC0gZnJhbWVUaW1lLCBub3dUaW1lKVxuICAgIH1cbiAgfSlcbn1cblxuZnVuY3Rpb24gc2V0U2Nyb2xsIChzY3JvbGxUYXJnZXQsIG9mZnNldCkge1xuICBpZiAoc2Nyb2xsVGFyZ2V0ID09PSB3aW5kb3cpIHtcbiAgICB3aW5kb3cuc2Nyb2xsVG8od2luZG93LnBhZ2VYT2Zmc2V0IHx8IHdpbmRvdy5zY3JvbGxYIHx8IGRvY3VtZW50LmJvZHkuc2Nyb2xsTGVmdCB8fCAwLCBvZmZzZXQpXG4gICAgcmV0dXJuXG4gIH1cbiAgc2Nyb2xsVGFyZ2V0LnNjcm9sbFRvcCA9IG9mZnNldFxufVxuXG5mdW5jdGlvbiBzZXRIb3Jpem9udGFsU2Nyb2xsIChzY3JvbGxUYXJnZXQsIG9mZnNldCkge1xuICBpZiAoc2Nyb2xsVGFyZ2V0ID09PSB3aW5kb3cpIHtcbiAgICB3aW5kb3cuc2Nyb2xsVG8ob2Zmc2V0LCB3aW5kb3cucGFnZVlPZmZzZXQgfHwgd2luZG93LnNjcm9sbFkgfHwgZG9jdW1lbnQuYm9keS5zY3JvbGxUb3AgfHwgMClcbiAgICByZXR1cm5cbiAgfVxuICBzY3JvbGxUYXJnZXQuc2Nyb2xsTGVmdCA9IG9mZnNldFxufVxuXG5leHBvcnQgZnVuY3Rpb24gc2V0VmVydGljYWxTY3JvbGxQb3NpdGlvbiAoc2Nyb2xsVGFyZ2V0LCBvZmZzZXQsIGR1cmF0aW9uKSB7XG4gIGlmIChkdXJhdGlvbikge1xuICAgIGFuaW1WZXJ0aWNhbFNjcm9sbFRvKHNjcm9sbFRhcmdldCwgb2Zmc2V0LCBkdXJhdGlvbilcbiAgICByZXR1cm5cbiAgfVxuICBzZXRTY3JvbGwoc2Nyb2xsVGFyZ2V0LCBvZmZzZXQpXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzZXRIb3Jpem9udGFsU2Nyb2xsUG9zaXRpb24gKHNjcm9sbFRhcmdldCwgb2Zmc2V0LCBkdXJhdGlvbikge1xuICBpZiAoZHVyYXRpb24pIHtcbiAgICBhbmltSG9yaXpvbnRhbFNjcm9sbFRvKHNjcm9sbFRhcmdldCwgb2Zmc2V0LCBkdXJhdGlvbilcbiAgICByZXR1cm5cbiAgfVxuICBzZXRIb3Jpem9udGFsU2Nyb2xsKHNjcm9sbFRhcmdldCwgb2Zmc2V0KVxufVxuXG5sZXQgc2l6ZVxuZXhwb3J0IGZ1bmN0aW9uIGdldFNjcm9sbGJhcldpZHRoICgpIHtcbiAgaWYgKHNpemUgIT09IHVuZGVmaW5lZCkge1xuICAgIHJldHVybiBzaXplXG4gIH1cblxuICBjb25zdFxuICAgIGlubmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpLFxuICAgIG91dGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcblxuICBjc3MoaW5uZXIsIHtcbiAgICB3aWR0aDogJzEwMCUnLFxuICAgIGhlaWdodDogJzIwMHB4J1xuICB9KVxuICBjc3Mob3V0ZXIsIHtcbiAgICBwb3NpdGlvbjogJ2Fic29sdXRlJyxcbiAgICB0b3A6ICcwcHgnLFxuICAgIGxlZnQ6ICcwcHgnLFxuICAgIHZpc2liaWxpdHk6ICdoaWRkZW4nLFxuICAgIHdpZHRoOiAnMjAwcHgnLFxuICAgIGhlaWdodDogJzE1MHB4JyxcbiAgICBvdmVyZmxvdzogJ2hpZGRlbidcbiAgfSlcblxuICBvdXRlci5hcHBlbmRDaGlsZChpbm5lcilcblxuICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKG91dGVyKVxuXG4gIGNvbnN0IHcxID0gaW5uZXIub2Zmc2V0V2lkdGhcbiAgb3V0ZXIuc3R5bGUub3ZlcmZsb3cgPSAnc2Nyb2xsJ1xuICBsZXQgdzIgPSBpbm5lci5vZmZzZXRXaWR0aFxuXG4gIGlmICh3MSA9PT0gdzIpIHtcbiAgICB3MiA9IG91dGVyLmNsaWVudFdpZHRoXG4gIH1cblxuICBvdXRlci5yZW1vdmUoKVxuICBzaXplID0gdzEgLSB3MlxuXG4gIHJldHVybiBzaXplXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBoYXNTY3JvbGxiYXIgKGVsLCBvblkgPSB0cnVlKSB7XG4gIGlmICghZWwgfHwgZWwubm9kZVR5cGUgIT09IE5vZGUuRUxFTUVOVF9OT0RFKSB7XG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICByZXR1cm4gb25ZXG4gICAgPyAoXG4gICAgICAgIGVsLnNjcm9sbEhlaWdodCA+IGVsLmNsaWVudEhlaWdodCAmJiAoXG4gICAgICAgICAgZWwuY2xhc3NMaXN0LmNvbnRhaW5zKCdzY3JvbGwnKVxuICAgICAgICAgIHx8IGVsLmNsYXNzTGlzdC5jb250YWlucygnb3ZlcmZsb3ctYXV0bycpXG4gICAgICAgICAgfHwgWyAnYXV0bycsICdzY3JvbGwnIF0uaW5jbHVkZXMod2luZG93LmdldENvbXB1dGVkU3R5bGUoZWwpWyAnb3ZlcmZsb3cteScgXSlcbiAgICAgICAgKVxuICAgICAgKVxuICAgIDogKFxuICAgICAgICBlbC5zY3JvbGxXaWR0aCA+IGVsLmNsaWVudFdpZHRoICYmIChcbiAgICAgICAgICBlbC5jbGFzc0xpc3QuY29udGFpbnMoJ3Njcm9sbCcpXG4gICAgICAgICAgfHwgZWwuY2xhc3NMaXN0LmNvbnRhaW5zKCdvdmVyZmxvdy1hdXRvJylcbiAgICAgICAgICB8fCBbICdhdXRvJywgJ3Njcm9sbCcgXS5pbmNsdWRlcyh3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShlbClbICdvdmVyZmxvdy14JyBdKVxuICAgICAgICApXG4gICAgICApXG59XG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgZ2V0U2Nyb2xsVGFyZ2V0LFxuXG4gIGdldFNjcm9sbEhlaWdodCxcbiAgZ2V0U2Nyb2xsV2lkdGgsXG5cbiAgZ2V0VmVydGljYWxTY3JvbGxQb3NpdGlvbixcbiAgZ2V0SG9yaXpvbnRhbFNjcm9sbFBvc2l0aW9uLFxuXG4gIGFuaW1WZXJ0aWNhbFNjcm9sbFRvLFxuICBhbmltSG9yaXpvbnRhbFNjcm9sbFRvLFxuXG4gIHNldFZlcnRpY2FsU2Nyb2xsUG9zaXRpb24sXG4gIHNldEhvcml6b250YWxTY3JvbGxQb3NpdGlvbixcblxuICBnZXRTY3JvbGxiYXJXaWR0aCxcbiAgaGFzU2Nyb2xsYmFyXG59XG4iLCJpbXBvcnQgeyBnZXRFdmVudFBhdGgsIGxpc3Rlbk9wdHMsIHN0b3BBbmRQcmV2ZW50IH0gZnJvbSAnLi4vdXRpbHMvZXZlbnQuanMnXG5pbXBvcnQgeyBoYXNTY3JvbGxiYXIsIGdldFZlcnRpY2FsU2Nyb2xsUG9zaXRpb24sIGdldEhvcml6b250YWxTY3JvbGxQb3NpdGlvbiB9IGZyb20gJy4uL3V0aWxzL3Njcm9sbC5qcydcbmltcG9ydCB7IGNsaWVudCB9IGZyb20gJy4uL3BsdWdpbnMvUGxhdGZvcm0uanMnXG5cbmxldFxuICByZWdpc3RlcmVkID0gMCxcbiAgc2Nyb2xsUG9zaXRpb25YLFxuICBzY3JvbGxQb3NpdGlvblksXG4gIG1heFNjcm9sbFRvcCxcbiAgdnBQZW5kaW5nVXBkYXRlID0gZmFsc2UsXG4gIGJvZHlMZWZ0LFxuICBib2R5VG9wLFxuICBjbG9zZVRpbWVyXG5cbmZ1bmN0aW9uIG9uV2hlZWwgKGUpIHtcbiAgaWYgKHNob3VsZFByZXZlbnRTY3JvbGwoZSkpIHtcbiAgICBzdG9wQW5kUHJldmVudChlKVxuICB9XG59XG5cbmZ1bmN0aW9uIHNob3VsZFByZXZlbnRTY3JvbGwgKGUpIHtcbiAgaWYgKGUudGFyZ2V0ID09PSBkb2N1bWVudC5ib2R5IHx8IGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygncS1sYXlvdXRfX2JhY2tkcm9wJykpIHtcbiAgICByZXR1cm4gdHJ1ZVxuICB9XG5cbiAgY29uc3RcbiAgICBwYXRoID0gZ2V0RXZlbnRQYXRoKGUpLFxuICAgIHNoaWZ0ID0gZS5zaGlmdEtleSAmJiAhZS5kZWx0YVgsXG4gICAgc2Nyb2xsWSA9ICFzaGlmdCAmJiBNYXRoLmFicyhlLmRlbHRhWCkgPD0gTWF0aC5hYnMoZS5kZWx0YVkpLFxuICAgIGRlbHRhID0gc2hpZnQgfHwgc2Nyb2xsWSA/IGUuZGVsdGFZIDogZS5kZWx0YVhcblxuICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgcGF0aC5sZW5ndGg7IGluZGV4KyspIHtcbiAgICBjb25zdCBlbCA9IHBhdGhbIGluZGV4IF1cblxuICAgIGlmIChoYXNTY3JvbGxiYXIoZWwsIHNjcm9sbFkpKSB7XG4gICAgICByZXR1cm4gc2Nyb2xsWVxuICAgICAgICA/IChcbiAgICAgICAgICAgIGRlbHRhIDwgMCAmJiBlbC5zY3JvbGxUb3AgPT09IDBcbiAgICAgICAgICAgICAgPyB0cnVlXG4gICAgICAgICAgICAgIDogZGVsdGEgPiAwICYmIGVsLnNjcm9sbFRvcCArIGVsLmNsaWVudEhlaWdodCA9PT0gZWwuc2Nyb2xsSGVpZ2h0XG4gICAgICAgICAgKVxuICAgICAgICA6IChcbiAgICAgICAgICAgIGRlbHRhIDwgMCAmJiBlbC5zY3JvbGxMZWZ0ID09PSAwXG4gICAgICAgICAgICAgID8gdHJ1ZVxuICAgICAgICAgICAgICA6IGRlbHRhID4gMCAmJiBlbC5zY3JvbGxMZWZ0ICsgZWwuY2xpZW50V2lkdGggPT09IGVsLnNjcm9sbFdpZHRoXG4gICAgICAgICAgKVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiB0cnVlXG59XG5cbmZ1bmN0aW9uIG9uQXBwbGVTY3JvbGwgKGUpIHtcbiAgaWYgKGUudGFyZ2V0ID09PSBkb2N1bWVudCkge1xuICAgIC8vIHJlcXVpcmVkLCBvdGhlcndpc2UgaU9TIGJsb2NrcyBmdXJ0aGVyIHNjcm9sbGluZ1xuICAgIC8vIHVudGlsIHRoZSBtb2JpbGUgc2Nyb2xsYmFyIGRpc3NhcHBlYXJzXG4gICAgZG9jdW1lbnQuc2Nyb2xsaW5nRWxlbWVudC5zY3JvbGxUb3AgPSBkb2N1bWVudC5zY3JvbGxpbmdFbGVtZW50LnNjcm9sbFRvcCAvLyBlc2xpbnQtZGlzYWJsZS1saW5lXG4gIH1cbn1cblxuZnVuY3Rpb24gb25BcHBsZVJlc2l6ZSAoZXZ0KSB7XG4gIGlmICh2cFBlbmRpbmdVcGRhdGUgPT09IHRydWUpIHtcbiAgICByZXR1cm5cbiAgfVxuXG4gIHZwUGVuZGluZ1VwZGF0ZSA9IHRydWVcblxuICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgIHZwUGVuZGluZ1VwZGF0ZSA9IGZhbHNlXG5cbiAgICBjb25zdFxuICAgICAgeyBoZWlnaHQgfSA9IGV2dC50YXJnZXQsXG4gICAgICB7IGNsaWVudEhlaWdodCwgc2Nyb2xsVG9wIH0gPSBkb2N1bWVudC5zY3JvbGxpbmdFbGVtZW50XG5cbiAgICBpZiAobWF4U2Nyb2xsVG9wID09PSB2b2lkIDAgfHwgaGVpZ2h0ICE9PSB3aW5kb3cuaW5uZXJIZWlnaHQpIHtcbiAgICAgIG1heFNjcm9sbFRvcCA9IGNsaWVudEhlaWdodCAtIGhlaWdodFxuICAgICAgZG9jdW1lbnQuc2Nyb2xsaW5nRWxlbWVudC5zY3JvbGxUb3AgPSBzY3JvbGxUb3BcbiAgICB9XG5cbiAgICBpZiAoc2Nyb2xsVG9wID4gbWF4U2Nyb2xsVG9wKSB7XG4gICAgICBkb2N1bWVudC5zY3JvbGxpbmdFbGVtZW50LnNjcm9sbFRvcCAtPSBNYXRoLmNlaWwoKHNjcm9sbFRvcCAtIG1heFNjcm9sbFRvcCkgLyA4KVxuICAgIH1cbiAgfSlcbn1cblxuZnVuY3Rpb24gYXBwbHkgKGFjdGlvbikge1xuICBjb25zdFxuICAgIGJvZHkgPSBkb2N1bWVudC5ib2R5LFxuICAgIGhhc1ZpZXdwb3J0ID0gd2luZG93LnZpc3VhbFZpZXdwb3J0ICE9PSB2b2lkIDBcblxuICBpZiAoYWN0aW9uID09PSAnYWRkJykge1xuICAgIGNvbnN0IHsgb3ZlcmZsb3dZLCBvdmVyZmxvd1ggfSA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGJvZHkpXG5cbiAgICBzY3JvbGxQb3NpdGlvblggPSBnZXRIb3Jpem9udGFsU2Nyb2xsUG9zaXRpb24od2luZG93KVxuICAgIHNjcm9sbFBvc2l0aW9uWSA9IGdldFZlcnRpY2FsU2Nyb2xsUG9zaXRpb24od2luZG93KVxuICAgIGJvZHlMZWZ0ID0gYm9keS5zdHlsZS5sZWZ0XG4gICAgYm9keVRvcCA9IGJvZHkuc3R5bGUudG9wXG5cbiAgICBib2R5LnN0eWxlLmxlZnQgPSBgLSR7IHNjcm9sbFBvc2l0aW9uWCB9cHhgXG4gICAgYm9keS5zdHlsZS50b3AgPSBgLSR7IHNjcm9sbFBvc2l0aW9uWSB9cHhgXG5cbiAgICBpZiAob3ZlcmZsb3dYICE9PSAnaGlkZGVuJyAmJiAob3ZlcmZsb3dYID09PSAnc2Nyb2xsJyB8fCBib2R5LnNjcm9sbFdpZHRoID4gd2luZG93LmlubmVyV2lkdGgpKSB7XG4gICAgICBib2R5LmNsYXNzTGlzdC5hZGQoJ3EtYm9keS0tZm9yY2Utc2Nyb2xsYmFyLXgnKVxuICAgIH1cbiAgICBpZiAob3ZlcmZsb3dZICE9PSAnaGlkZGVuJyAmJiAob3ZlcmZsb3dZID09PSAnc2Nyb2xsJyB8fCBib2R5LnNjcm9sbEhlaWdodCA+IHdpbmRvdy5pbm5lckhlaWdodCkpIHtcbiAgICAgIGJvZHkuY2xhc3NMaXN0LmFkZCgncS1ib2R5LS1mb3JjZS1zY3JvbGxiYXIteScpXG4gICAgfVxuXG4gICAgYm9keS5jbGFzc0xpc3QuYWRkKCdxLWJvZHktLXByZXZlbnQtc2Nyb2xsJylcbiAgICBkb2N1bWVudC5xU2Nyb2xsUHJldmVudGVkID0gdHJ1ZVxuICAgIGlmIChjbGllbnQuaXMuaW9zID09PSB0cnVlKSB7XG4gICAgICBpZiAoaGFzVmlld3BvcnQgPT09IHRydWUpIHtcbiAgICAgICAgd2luZG93LnNjcm9sbFRvKDAsIDApXG4gICAgICAgIHdpbmRvdy52aXN1YWxWaWV3cG9ydC5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCBvbkFwcGxlUmVzaXplLCBsaXN0ZW5PcHRzLnBhc3NpdmVDYXB0dXJlKVxuICAgICAgICB3aW5kb3cudmlzdWFsVmlld3BvcnQuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgb25BcHBsZVJlc2l6ZSwgbGlzdGVuT3B0cy5wYXNzaXZlQ2FwdHVyZSlcbiAgICAgICAgd2luZG93LnNjcm9sbFRvKDAsIDApXG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIG9uQXBwbGVTY3JvbGwsIGxpc3Rlbk9wdHMucGFzc2l2ZUNhcHR1cmUpXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgaWYgKGNsaWVudC5pcy5kZXNrdG9wID09PSB0cnVlICYmIGNsaWVudC5pcy5tYWMgPT09IHRydWUpIHtcbiAgICAvLyByZWYuIGh0dHBzOi8vZGV2ZWxvcGVycy5nb29nbGUuY29tL3dlYi91cGRhdGVzLzIwMTcvMDEvc2Nyb2xsaW5nLWludGVydmVudGlvblxuICAgIHdpbmRvd1sgYCR7IGFjdGlvbiB9RXZlbnRMaXN0ZW5lcmAgXSgnd2hlZWwnLCBvbldoZWVsLCBsaXN0ZW5PcHRzLm5vdFBhc3NpdmUpXG4gIH1cblxuICBpZiAoYWN0aW9uID09PSAncmVtb3ZlJykge1xuICAgIGlmIChjbGllbnQuaXMuaW9zID09PSB0cnVlKSB7XG4gICAgICBpZiAoaGFzVmlld3BvcnQgPT09IHRydWUpIHtcbiAgICAgICAgd2luZG93LnZpc3VhbFZpZXdwb3J0LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIG9uQXBwbGVSZXNpemUsIGxpc3Rlbk9wdHMucGFzc2l2ZUNhcHR1cmUpXG4gICAgICAgIHdpbmRvdy52aXN1YWxWaWV3cG9ydC5yZW1vdmVFdmVudExpc3RlbmVyKCdzY3JvbGwnLCBvbkFwcGxlUmVzaXplLCBsaXN0ZW5PcHRzLnBhc3NpdmVDYXB0dXJlKVxuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdzY3JvbGwnLCBvbkFwcGxlU2Nyb2xsLCBsaXN0ZW5PcHRzLnBhc3NpdmVDYXB0dXJlKVxuICAgICAgfVxuICAgIH1cblxuICAgIGJvZHkuY2xhc3NMaXN0LnJlbW92ZSgncS1ib2R5LS1wcmV2ZW50LXNjcm9sbCcpXG4gICAgYm9keS5jbGFzc0xpc3QucmVtb3ZlKCdxLWJvZHktLWZvcmNlLXNjcm9sbGJhci14JylcbiAgICBib2R5LmNsYXNzTGlzdC5yZW1vdmUoJ3EtYm9keS0tZm9yY2Utc2Nyb2xsYmFyLXknKVxuXG4gICAgZG9jdW1lbnQucVNjcm9sbFByZXZlbnRlZCA9IGZhbHNlXG5cbiAgICBib2R5LnN0eWxlLmxlZnQgPSBib2R5TGVmdFxuICAgIGJvZHkuc3R5bGUudG9wID0gYm9keVRvcFxuXG4gICAgd2luZG93LnNjcm9sbFRvKHNjcm9sbFBvc2l0aW9uWCwgc2Nyb2xsUG9zaXRpb25ZKVxuICAgIG1heFNjcm9sbFRvcCA9IHZvaWQgMFxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIChzdGF0ZSkge1xuICBsZXQgYWN0aW9uID0gJ2FkZCdcblxuICBpZiAoc3RhdGUgPT09IHRydWUpIHtcbiAgICByZWdpc3RlcmVkKytcblxuICAgIGlmIChjbG9zZVRpbWVyICE9PSB2b2lkIDApIHtcbiAgICAgIGNsZWFyVGltZW91dChjbG9zZVRpbWVyKVxuICAgICAgY2xvc2VUaW1lciA9IHZvaWQgMFxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgaWYgKHJlZ2lzdGVyZWQgPiAxKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG4gIH1cbiAgZWxzZSB7XG4gICAgaWYgKHJlZ2lzdGVyZWQgPT09IDApIHtcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIHJlZ2lzdGVyZWQtLVxuXG4gICAgaWYgKHJlZ2lzdGVyZWQgPiAwKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBhY3Rpb24gPSAncmVtb3ZlJ1xuXG4gICAgaWYgKGNsaWVudC5pcy5pb3MgPT09IHRydWUgJiYgY2xpZW50LmlzLm5hdGl2ZU1vYmlsZSA9PT0gdHJ1ZSkge1xuICAgICAgY2xlYXJUaW1lb3V0KGNsb3NlVGltZXIpXG5cbiAgICAgIGNsb3NlVGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgYXBwbHkoYWN0aW9uKVxuICAgICAgICBjbG9zZVRpbWVyID0gdm9pZCAwXG4gICAgICB9LCAxMDApXG4gICAgICByZXR1cm5cbiAgICB9XG4gIH1cblxuICBhcHBseShhY3Rpb24pXG59XG4iLCJpbXBvcnQgeyBoLCBjcmVhdGVBcHAsIFRyYW5zaXRpb24sIG9uTW91bnRlZCB9IGZyb20gJ3Z1ZSdcblxuaW1wb3J0IFFTcGlubmVyIGZyb20gJy4uL2NvbXBvbmVudHMvc3Bpbm5lci9RU3Bpbm5lci5qcydcblxuaW1wb3J0IGRlZmluZVJlYWN0aXZlUGx1Z2luIGZyb20gJy4uL3V0aWxzL3ByaXZhdGUvZGVmaW5lLXJlYWN0aXZlLXBsdWdpbi5qcydcbmltcG9ydCB7IGNyZWF0ZUdsb2JhbE5vZGUsIHJlbW92ZUdsb2JhbE5vZGUgfSBmcm9tICcuLi91dGlscy9wcml2YXRlL2dsb2JhbC1ub2Rlcy5qcydcbmltcG9ydCBwcmV2ZW50U2Nyb2xsIGZyb20gJy4uL3V0aWxzL3ByZXZlbnQtc2Nyb2xsLmpzJ1xuaW1wb3J0IHsgaXNPYmplY3QgfSBmcm9tICcuLi91dGlscy9wcml2YXRlL2lzLmpzJ1xuXG5sZXRcbiAgYXBwLFxuICB2bSxcbiAgdWlkID0gMCxcbiAgdGltZW91dCxcbiAgcHJvcHMgPSB7fVxuXG5jb25zdCBvcmlnaW5hbERlZmF1bHRzID0ge1xuICBkZWxheTogMCxcbiAgbWVzc2FnZTogZmFsc2UsXG4gIGh0bWw6IGZhbHNlLFxuICBzcGlubmVyU2l6ZTogODAsXG4gIHNwaW5uZXJDb2xvcjogJycsXG4gIG1lc3NhZ2VDb2xvcjogJycsXG4gIGJhY2tncm91bmRDb2xvcjogJycsXG4gIGJveENsYXNzOiAnJyxcbiAgc3Bpbm5lcjogUVNwaW5uZXIsXG4gIGN1c3RvbUNsYXNzOiAnJ1xufVxuXG5jb25zdCBkZWZhdWx0cyA9IHsgLi4ub3JpZ2luYWxEZWZhdWx0cyB9XG5cbmNvbnN0IFBsdWdpbiA9IGRlZmluZVJlYWN0aXZlUGx1Z2luKHtcbiAgaXNBY3RpdmU6IGZhbHNlXG59LCB7XG4gIHNob3cgKG9wdHMpIHtcbiAgICBpZiAoX19RVUFTQVJfU1NSX1NFUlZFUl9fKSB7IHJldHVybiB9XG5cbiAgICBwcm9wcyA9IGlzT2JqZWN0KG9wdHMpID09PSB0cnVlICYmIG9wdHMuaWdub3JlRGVmYXVsdHMgPT09IHRydWVcbiAgICAgID8geyAuLi5vcmlnaW5hbERlZmF1bHRzLCAuLi5vcHRzIH1cbiAgICAgIDogeyAuLi5kZWZhdWx0cywgLi4ub3B0cyB9XG5cbiAgICBQbHVnaW4uaXNBY3RpdmUgPSB0cnVlXG5cbiAgICBpZiAoYXBwICE9PSB2b2lkIDApIHtcbiAgICAgIHByb3BzLnVpZCA9IHVpZFxuICAgICAgdm0uJGZvcmNlVXBkYXRlKClcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIHByb3BzLnVpZCA9ICsrdWlkXG4gICAgY2xlYXJUaW1lb3V0KHRpbWVvdXQpXG5cbiAgICB0aW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICB0aW1lb3V0ID0gdm9pZCAwXG5cbiAgICAgIGNvbnN0IGVsID0gY3JlYXRlR2xvYmFsTm9kZSgncS1sb2FkaW5nJylcblxuICAgICAgYXBwID0gY3JlYXRlQXBwKHtcbiAgICAgICAgbmFtZTogJ1FMb2FkaW5nJyxcblxuICAgICAgICBzZXR1cCAoKSB7XG4gICAgICAgICAgb25Nb3VudGVkKCgpID0+IHtcbiAgICAgICAgICAgIHByZXZlbnRTY3JvbGwodHJ1ZSlcbiAgICAgICAgICB9KVxuXG4gICAgICAgICAgZnVuY3Rpb24gb25BZnRlckxlYXZlICgpIHtcbiAgICAgICAgICAgIC8vIG1pZ2h0IGJlIGNhbGxlZCB0byBmaW5hbGl6ZVxuICAgICAgICAgICAgLy8gcHJldmlvdXMgbGVhdmUsIGV2ZW4gaWYgaXQgd2FzIGNhbmNlbGxlZFxuICAgICAgICAgICAgaWYgKFBsdWdpbi5pc0FjdGl2ZSAhPT0gdHJ1ZSAmJiBhcHAgIT09IHZvaWQgMCkge1xuICAgICAgICAgICAgICBwcmV2ZW50U2Nyb2xsKGZhbHNlKVxuICAgICAgICAgICAgICBhcHAudW5tb3VudChlbClcbiAgICAgICAgICAgICAgcmVtb3ZlR2xvYmFsTm9kZShlbClcbiAgICAgICAgICAgICAgYXBwID0gdm9pZCAwXG4gICAgICAgICAgICAgIHZtID0gdm9pZCAwXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgZnVuY3Rpb24gZ2V0Q29udGVudCAoKSB7XG4gICAgICAgICAgICBpZiAoUGx1Z2luLmlzQWN0aXZlICE9PSB0cnVlKSB7XG4gICAgICAgICAgICAgIHJldHVybiBudWxsXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IGNvbnRlbnQgPSBbXG4gICAgICAgICAgICAgIGgocHJvcHMuc3Bpbm5lciwge1xuICAgICAgICAgICAgICAgIGNsYXNzOiAncS1sb2FkaW5nX19zcGlubmVyJyxcbiAgICAgICAgICAgICAgICBjb2xvcjogcHJvcHMuc3Bpbm5lckNvbG9yLFxuICAgICAgICAgICAgICAgIHNpemU6IHByb3BzLnNwaW5uZXJTaXplXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBdXG5cbiAgICAgICAgICAgIHByb3BzLm1lc3NhZ2UgJiYgY29udGVudC5wdXNoKFxuICAgICAgICAgICAgICBoKCdkaXYnLCB7XG4gICAgICAgICAgICAgICAgY2xhc3M6ICdxLWxvYWRpbmdfX21lc3NhZ2UnXG4gICAgICAgICAgICAgICAgICArIChwcm9wcy5tZXNzYWdlQ29sb3IgPyBgIHRleHQtJHsgcHJvcHMubWVzc2FnZUNvbG9yIH1gIDogJycpLFxuICAgICAgICAgICAgICAgIFsgcHJvcHMuaHRtbCA9PT0gdHJ1ZSA/ICdpbm5lckhUTUwnIDogJ3RleHRDb250ZW50JyBdOiBwcm9wcy5tZXNzYWdlXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICApXG5cbiAgICAgICAgICAgIHJldHVybiBoKCdkaXYnLCB7XG4gICAgICAgICAgICAgIGNsYXNzOiAncS1sb2FkaW5nIGZ1bGxzY3JlZW4gZmxleCBmbGV4LWNlbnRlciB6LW1heCAnICsgcHJvcHMuY3VzdG9tQ2xhc3MudHJpbSgpLFxuICAgICAgICAgICAgICBrZXk6IHByb3BzLnVpZFxuICAgICAgICAgICAgfSwgW1xuICAgICAgICAgICAgICBoKCdkaXYnLCB7XG4gICAgICAgICAgICAgICAgY2xhc3M6ICdxLWxvYWRpbmdfX2JhY2tkcm9wJ1xuICAgICAgICAgICAgICAgICAgKyAocHJvcHMuYmFja2dyb3VuZENvbG9yID8gYCBiZy0keyBwcm9wcy5iYWNrZ3JvdW5kQ29sb3IgfWAgOiAnJylcbiAgICAgICAgICAgICAgfSksXG5cbiAgICAgICAgICAgICAgaCgnZGl2Jywge1xuICAgICAgICAgICAgICAgIGNsYXNzOiAncS1sb2FkaW5nX19ib3ggY29sdW1uIGl0ZW1zLWNlbnRlciAnICsgcHJvcHMuYm94Q2xhc3NcbiAgICAgICAgICAgICAgfSwgY29udGVudClcbiAgICAgICAgICAgIF0pXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcmV0dXJuICgpID0+IGgoVHJhbnNpdGlvbiwge1xuICAgICAgICAgICAgbmFtZTogJ3EtdHJhbnNpdGlvbi0tZmFkZScsXG4gICAgICAgICAgICBhcHBlYXI6IHRydWUsXG4gICAgICAgICAgICBvbkFmdGVyTGVhdmVcbiAgICAgICAgICB9LCBnZXRDb250ZW50KVxuICAgICAgICB9XG4gICAgICB9KVxuXG4gICAgICB2bSA9IGFwcC5tb3VudChlbClcbiAgICB9LCBwcm9wcy5kZWxheSlcbiAgfSxcblxuICBoaWRlICgpIHtcbiAgICBpZiAoX19RVUFTQVJfU1NSX1NFUlZFUl9fICE9PSB0cnVlICYmIFBsdWdpbi5pc0FjdGl2ZSA9PT0gdHJ1ZSkge1xuICAgICAgaWYgKHRpbWVvdXQgIT09IHZvaWQgMCkge1xuICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dClcbiAgICAgICAgdGltZW91dCA9IHZvaWQgMFxuICAgICAgfVxuXG4gICAgICBQbHVnaW4uaXNBY3RpdmUgPSBmYWxzZVxuICAgIH1cbiAgfSxcblxuICBzZXREZWZhdWx0cyAob3B0cykge1xuICAgIGlmIChfX1FVQVNBUl9TU1JfU0VSVkVSX18gIT09IHRydWUpIHtcbiAgICAgIGlzT2JqZWN0KG9wdHMpID09PSB0cnVlICYmIE9iamVjdC5hc3NpZ24oZGVmYXVsdHMsIG9wdHMpXG4gICAgfVxuICB9LFxuXG4gIGluc3RhbGwgKHsgJHEgfSkge1xuICAgICRxLmxvYWRpbmcgPSB0aGlzXG5cbiAgICBpZiAoX19RVUFTQVJfU1NSX1NFUlZFUl9fICE9PSB0cnVlICYmICRxLmNvbmZpZy5sb2FkaW5nICE9PSB2b2lkIDApIHtcbiAgICAgIHRoaXMuc2V0RGVmYXVsdHMoJHEuY29uZmlnLmxvYWRpbmcpXG4gICAgfVxuICB9XG59KVxuXG5leHBvcnQgZGVmYXVsdCBQbHVnaW5cbiIsImltcG9ydCB7IG9uQmVmb3JlVW5tb3VudCB9IGZyb20gJ3Z1ZSdcblxuaW1wb3J0IEhpc3RvcnkgZnJvbSAnLi4vLi4vaGlzdG9yeS5qcydcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gKHNob3dpbmcsIGhpZGUsIGhpZGVPblJvdXRlQ2hhbmdlKSB7XG4gIGxldCBoaXN0b3J5RW50cnlcblxuICBmdW5jdGlvbiByZW1vdmVGcm9tSGlzdG9yeSAoKSB7XG4gICAgaWYgKGhpc3RvcnlFbnRyeSAhPT0gdm9pZCAwKSB7XG4gICAgICBIaXN0b3J5LnJlbW92ZShoaXN0b3J5RW50cnkpXG4gICAgICBoaXN0b3J5RW50cnkgPSB2b2lkIDBcbiAgICB9XG4gIH1cblxuICBvbkJlZm9yZVVubW91bnQoKCkgPT4ge1xuICAgIHNob3dpbmcudmFsdWUgPT09IHRydWUgJiYgcmVtb3ZlRnJvbUhpc3RvcnkoKVxuICB9KVxuXG4gIHJldHVybiB7XG4gICAgcmVtb3ZlRnJvbUhpc3RvcnksXG5cbiAgICBhZGRUb0hpc3RvcnkgKCkge1xuICAgICAgaGlzdG9yeUVudHJ5ID0ge1xuICAgICAgICBjb25kaXRpb246ICgpID0+IGhpZGVPblJvdXRlQ2hhbmdlLnZhbHVlID09PSB0cnVlLFxuICAgICAgICBoYW5kbGVyOiBoaWRlXG4gICAgICB9XG5cbiAgICAgIEhpc3RvcnkuYWRkKGhpc3RvcnlFbnRyeSlcbiAgICB9XG4gIH1cbn1cbiIsImltcG9ydCB7IG9uQmVmb3JlVW5tb3VudCB9IGZyb20gJ3Z1ZSdcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gKCkge1xuICBsZXQgdGltZXJcblxuICBvbkJlZm9yZVVubW91bnQoKCkgPT4ge1xuICAgIGNsZWFyVGltZW91dCh0aW1lcilcbiAgfSlcblxuICByZXR1cm4ge1xuICAgIHJlZ2lzdGVyVGltZW91dCAoZm4sIGRlbGF5KSB7XG4gICAgICBjbGVhclRpbWVvdXQodGltZXIpXG4gICAgICB0aW1lciA9IHNldFRpbWVvdXQoZm4sIGRlbGF5KVxuICAgIH0sXG5cbiAgICByZW1vdmVUaW1lb3V0ICgpIHtcbiAgICAgIGNsZWFyVGltZW91dCh0aW1lcilcbiAgICB9XG4gIH1cbn1cbiIsImltcG9ydCB7IG5leHRUaWNrLCBvbkJlZm9yZVVubW91bnQgfSBmcm9tICd2dWUnXG5cbi8qXG4gKiBVc2FnZTpcbiAqICAgIHJlZ2lzdGVyVGljayhmbilcbiAqICAgIHJlZ2lzdGVyVGljayhmbilcbiAqL1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiAoKSB7XG4gIGxldCB0aWNrRm5cblxuICBvbkJlZm9yZVVubW91bnQoKCkgPT4ge1xuICAgIHRpY2tGbiA9IHZvaWQgMFxuICB9KVxuXG4gIHJldHVybiB7XG4gICAgcmVnaXN0ZXJUaWNrIChmbikge1xuICAgICAgdGlja0ZuID0gZm5cblxuICAgICAgbmV4dFRpY2soKCkgPT4ge1xuICAgICAgICBpZiAodGlja0ZuID09PSBmbikge1xuICAgICAgICAgIHRpY2tGbigpXG4gICAgICAgICAgdGlja0ZuID0gdm9pZCAwXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfSxcblxuICAgIHJlbW92ZVRpY2sgKCkge1xuICAgICAgdGlja0ZuID0gdm9pZCAwXG4gICAgfVxuICB9XG59XG4iLCJpbXBvcnQgeyB3YXRjaCwgbmV4dFRpY2ssIG9uTW91bnRlZCwgZ2V0Q3VycmVudEluc3RhbmNlIH0gZnJvbSAndnVlJ1xuXG5pbXBvcnQgeyB2bUhhc1JvdXRlciB9IGZyb20gJy4uLy4uL3V0aWxzL3ByaXZhdGUvdm0uanMnXG5cbmV4cG9ydCBjb25zdCB1c2VNb2RlbFRvZ2dsZVByb3BzID0ge1xuICBtb2RlbFZhbHVlOiB7XG4gICAgdHlwZTogQm9vbGVhbixcbiAgICBkZWZhdWx0OiBudWxsXG4gIH0sXG5cbiAgJ29uVXBkYXRlOm1vZGVsVmFsdWUnOiBbIEZ1bmN0aW9uLCBBcnJheSBdXG59XG5cbmV4cG9ydCBjb25zdCB1c2VNb2RlbFRvZ2dsZUVtaXRzID0gW1xuICAnYmVmb3JlLXNob3cnLCAnc2hvdycsICdiZWZvcmUtaGlkZScsICdoaWRlJ1xuXVxuXG4vLyBoYW5kbGVTaG93L2hhbmRsZUhpZGUgLT4gcmVtb3ZlVGljaygpLCBzZWxmICgmIGVtaXQgc2hvdylcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gKHtcbiAgc2hvd2luZyxcbiAgY2FuU2hvdywgLy8gb3B0aW9uYWxcbiAgaGlkZU9uUm91dGVDaGFuZ2UsIC8vIG9wdGlvbmFsXG4gIGhhbmRsZVNob3csIC8vIG9wdGlvbmFsXG4gIGhhbmRsZUhpZGUsIC8vIG9wdGlvbmFsXG4gIHByb2Nlc3NPbk1vdW50IC8vIG9wdGlvbmFsXG59KSB7XG4gIGNvbnN0IHZtID0gZ2V0Q3VycmVudEluc3RhbmNlKClcbiAgY29uc3QgeyBwcm9wcywgZW1pdCwgcHJveHkgfSA9IHZtXG5cbiAgbGV0IHBheWxvYWRcblxuICBmdW5jdGlvbiB0b2dnbGUgKGV2dCkge1xuICAgIGlmIChzaG93aW5nLnZhbHVlID09PSB0cnVlKSB7XG4gICAgICBoaWRlKGV2dClcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICBzaG93KGV2dClcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBzaG93IChldnQpIHtcbiAgICBpZiAoXG4gICAgICBwcm9wcy5kaXNhYmxlID09PSB0cnVlXG4gICAgICB8fCAoZXZ0ICE9PSB2b2lkIDAgJiYgZXZ0LnFBbmNob3JIYW5kbGVkID09PSB0cnVlKVxuICAgICAgfHwgKGNhblNob3cgIT09IHZvaWQgMCAmJiBjYW5TaG93KGV2dCkgIT09IHRydWUpXG4gICAgKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBjb25zdCBsaXN0ZW5lciA9IHByb3BzWyAnb25VcGRhdGU6bW9kZWxWYWx1ZScgXSAhPT0gdm9pZCAwXG5cbiAgICBpZiAobGlzdGVuZXIgPT09IHRydWUgJiYgX19RVUFTQVJfU1NSX1NFUlZFUl9fICE9PSB0cnVlKSB7XG4gICAgICBlbWl0KCd1cGRhdGU6bW9kZWxWYWx1ZScsIHRydWUpXG4gICAgICBwYXlsb2FkID0gZXZ0XG4gICAgICBuZXh0VGljaygoKSA9PiB7XG4gICAgICAgIGlmIChwYXlsb2FkID09PSBldnQpIHtcbiAgICAgICAgICBwYXlsb2FkID0gdm9pZCAwXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfVxuXG4gICAgaWYgKHByb3BzLm1vZGVsVmFsdWUgPT09IG51bGwgfHwgbGlzdGVuZXIgPT09IGZhbHNlIHx8IF9fUVVBU0FSX1NTUl9TRVJWRVJfXykge1xuICAgICAgcHJvY2Vzc1Nob3coZXZ0KVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHByb2Nlc3NTaG93IChldnQpIHtcbiAgICBpZiAoc2hvd2luZy52YWx1ZSA9PT0gdHJ1ZSkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgc2hvd2luZy52YWx1ZSA9IHRydWVcblxuICAgIGVtaXQoJ2JlZm9yZS1zaG93JywgZXZ0KVxuXG4gICAgaWYgKGhhbmRsZVNob3cgIT09IHZvaWQgMCkge1xuICAgICAgaGFuZGxlU2hvdyhldnQpXG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgZW1pdCgnc2hvdycsIGV2dClcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBoaWRlIChldnQpIHtcbiAgICBpZiAoX19RVUFTQVJfU1NSX1NFUlZFUl9fIHx8IHByb3BzLmRpc2FibGUgPT09IHRydWUpIHtcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGNvbnN0IGxpc3RlbmVyID0gcHJvcHNbICdvblVwZGF0ZTptb2RlbFZhbHVlJyBdICE9PSB2b2lkIDBcblxuICAgIGlmIChsaXN0ZW5lciA9PT0gdHJ1ZSAmJiBfX1FVQVNBUl9TU1JfU0VSVkVSX18gIT09IHRydWUpIHtcbiAgICAgIGVtaXQoJ3VwZGF0ZTptb2RlbFZhbHVlJywgZmFsc2UpXG4gICAgICBwYXlsb2FkID0gZXZ0XG4gICAgICBuZXh0VGljaygoKSA9PiB7XG4gICAgICAgIGlmIChwYXlsb2FkID09PSBldnQpIHtcbiAgICAgICAgICBwYXlsb2FkID0gdm9pZCAwXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfVxuXG4gICAgaWYgKHByb3BzLm1vZGVsVmFsdWUgPT09IG51bGwgfHwgbGlzdGVuZXIgPT09IGZhbHNlIHx8IF9fUVVBU0FSX1NTUl9TRVJWRVJfXykge1xuICAgICAgcHJvY2Vzc0hpZGUoZXZ0KVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHByb2Nlc3NIaWRlIChldnQpIHtcbiAgICBpZiAoc2hvd2luZy52YWx1ZSA9PT0gZmFsc2UpIHtcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIHNob3dpbmcudmFsdWUgPSBmYWxzZVxuXG4gICAgZW1pdCgnYmVmb3JlLWhpZGUnLCBldnQpXG5cbiAgICBpZiAoaGFuZGxlSGlkZSAhPT0gdm9pZCAwKSB7XG4gICAgICBoYW5kbGVIaWRlKGV2dClcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICBlbWl0KCdoaWRlJywgZXZ0KVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHByb2Nlc3NNb2RlbENoYW5nZSAodmFsKSB7XG4gICAgaWYgKHByb3BzLmRpc2FibGUgPT09IHRydWUgJiYgdmFsID09PSB0cnVlKSB7XG4gICAgICBpZiAocHJvcHNbICdvblVwZGF0ZTptb2RlbFZhbHVlJyBdICE9PSB2b2lkIDApIHtcbiAgICAgICAgZW1pdCgndXBkYXRlOm1vZGVsVmFsdWUnLCBmYWxzZSlcbiAgICAgIH1cbiAgICB9XG4gICAgZWxzZSBpZiAoKHZhbCA9PT0gdHJ1ZSkgIT09IHNob3dpbmcudmFsdWUpIHtcbiAgICAgIGNvbnN0IGZuID0gdmFsID09PSB0cnVlID8gcHJvY2Vzc1Nob3cgOiBwcm9jZXNzSGlkZVxuICAgICAgZm4ocGF5bG9hZClcbiAgICB9XG4gIH1cblxuICB3YXRjaCgoKSA9PiBwcm9wcy5tb2RlbFZhbHVlLCBwcm9jZXNzTW9kZWxDaGFuZ2UpXG5cbiAgaWYgKGhpZGVPblJvdXRlQ2hhbmdlICE9PSB2b2lkIDAgJiYgdm1IYXNSb3V0ZXIodm0pID09PSB0cnVlKSB7XG4gICAgd2F0Y2goKCkgPT4gcHJveHkuJHJvdXRlLmZ1bGxQYXRoLCAoKSA9PiB7XG4gICAgICBpZiAoaGlkZU9uUm91dGVDaGFuZ2UudmFsdWUgPT09IHRydWUgJiYgc2hvd2luZy52YWx1ZSA9PT0gdHJ1ZSkge1xuICAgICAgICBoaWRlKClcbiAgICAgIH1cbiAgICB9KVxuICB9XG5cbiAgcHJvY2Vzc09uTW91bnQgPT09IHRydWUgJiYgb25Nb3VudGVkKCgpID0+IHtcbiAgICBwcm9jZXNzTW9kZWxDaGFuZ2UocHJvcHMubW9kZWxWYWx1ZSlcbiAgfSlcblxuICAvLyBleHBvc2UgcHVibGljIG1ldGhvZHNcbiAgY29uc3QgcHVibGljTWV0aG9kcyA9IHsgc2hvdywgaGlkZSwgdG9nZ2xlIH1cbiAgT2JqZWN0LmFzc2lnbihwcm94eSwgcHVibGljTWV0aG9kcylcblxuICByZXR1cm4gcHVibGljTWV0aG9kc1xufVxuIiwiaW1wb3J0IHsgcmVmLCBjb21wdXRlZCwgd2F0Y2gsIG5leHRUaWNrIH0gZnJvbSAndnVlJ1xuXG5leHBvcnQgY29uc3QgdXNlVHJhbnNpdGlvblByb3BzID0ge1xuICB0cmFuc2l0aW9uU2hvdzoge1xuICAgIHR5cGU6IFN0cmluZyxcbiAgICBkZWZhdWx0OiAnZmFkZSdcbiAgfSxcblxuICB0cmFuc2l0aW9uSGlkZToge1xuICAgIHR5cGU6IFN0cmluZyxcbiAgICBkZWZhdWx0OiAnZmFkZSdcbiAgfSxcblxuICB0cmFuc2l0aW9uRHVyYXRpb246IHtcbiAgICB0eXBlOiBbIFN0cmluZywgTnVtYmVyIF0sXG4gICAgZGVmYXVsdDogMzAwXG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gKHByb3BzLCBzaG93aW5nKSB7XG4gIGNvbnN0IHRyYW5zaXRpb25TdGF0ZSA9IHJlZihzaG93aW5nLnZhbHVlKVxuXG4gIHdhdGNoKHNob3dpbmcsIHZhbCA9PiB7XG4gICAgbmV4dFRpY2soKCkgPT4geyB0cmFuc2l0aW9uU3RhdGUudmFsdWUgPSB2YWwgfSlcbiAgfSlcblxuICAvLyByZXR1cm4gdHJhbnNpdGlvblxuICByZXR1cm4ge1xuICAgIHRyYW5zaXRpb246IGNvbXB1dGVkKCgpID0+ICdxLXRyYW5zaXRpb24tLScgKyAoXG4gICAgICB0cmFuc2l0aW9uU3RhdGUudmFsdWUgPT09IHRydWUgPyBwcm9wcy50cmFuc2l0aW9uSGlkZSA6IHByb3BzLnRyYW5zaXRpb25TaG93XG4gICAgKSksXG5cbiAgICB0cmFuc2l0aW9uU3R5bGU6IGNvbXB1dGVkKCgpID0+IGAtLXEtdHJhbnNpdGlvbi1kdXJhdGlvbjogJHsgcHJvcHMudHJhbnNpdGlvbkR1cmF0aW9uIH1tc2ApXG4gIH1cbn1cbiIsImxldCBxdWV1ZSA9IFtdXG5sZXQgd2FpdEZsYWdzID0gW11cblxuZnVuY3Rpb24gY2xlYXJGbGFnIChmbGFnKSB7XG4gIHdhaXRGbGFncyA9IHdhaXRGbGFncy5maWx0ZXIoZW50cnkgPT4gZW50cnkgIT09IGZsYWcpXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBhZGRGb2N1c1dhaXRGbGFnIChmbGFnKSB7XG4gIGNsZWFyRmxhZyhmbGFnKVxuICB3YWl0RmxhZ3MucHVzaChmbGFnKVxufVxuXG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlRm9jdXNXYWl0RmxhZyAoZmxhZykge1xuICBjbGVhckZsYWcoZmxhZylcblxuICBpZiAod2FpdEZsYWdzLmxlbmd0aCA9PT0gMCAmJiBxdWV1ZS5sZW5ndGggPiAwKSB7XG4gICAgLy8gb25seSBjYWxsIGxhc3QgZm9jdXMgaGFuZGxlciAoY2FuJ3QgZm9jdXMgbXVsdGlwbGUgdGhpbmdzIGF0IG9uY2UpXG4gICAgcXVldWVbIHF1ZXVlLmxlbmd0aCAtIDEgXSgpXG4gICAgcXVldWUgPSBbXVxuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBhZGRGb2N1c0ZuIChmbikge1xuICBpZiAod2FpdEZsYWdzLmxlbmd0aCA9PT0gMCkge1xuICAgIGZuKClcbiAgfVxuICBlbHNlIHtcbiAgICBxdWV1ZS5wdXNoKGZuKVxuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiByZW1vdmVGb2N1c0ZuIChmbikge1xuICBxdWV1ZSA9IHF1ZXVlLmZpbHRlcihlbnRyeSA9PiBlbnRyeSAhPT0gZm4pXG59XG4iLCJpbXBvcnQgeyBnZXRQYXJlbnRWbSB9IGZyb20gJy4vdm0uanMnXG5cbmV4cG9ydCBjb25zdCBwb3J0YWxMaXN0ID0gW11cblxuZXhwb3J0IGZ1bmN0aW9uIGdldFBvcnRhbFZtIChlbCkge1xuICByZXR1cm4gcG9ydGFsTGlzdC5maW5kKHZtID0+XG4gICAgdm0uX19xUG9ydGFsSW5uZXJSZWYudmFsdWUgIT09IG51bGxcbiAgICAmJiB2bS5fX3FQb3J0YWxJbm5lclJlZi52YWx1ZS5jb250YWlucyhlbClcbiAgKVxufVxuXG5leHBvcnQgZnVuY3Rpb24gY2xvc2VQb3J0YWxNZW51cyAodm0sIGV2dCkge1xuICBkbyB7XG4gICAgaWYgKHZtLiRvcHRpb25zLm5hbWUgPT09ICdRTWVudScpIHtcbiAgICAgIHZtLmhpZGUoZXZ0KVxuXG4gICAgICAvLyBpcyB0aGlzIGEgcG9pbnQgb2Ygc2VwYXJhdGlvbj9cbiAgICAgIGlmICh2bS4kcHJvcHMuc2VwYXJhdGVDbG9zZVBvcHVwID09PSB0cnVlKSB7XG4gICAgICAgIHJldHVybiBnZXRQYXJlbnRWbSh2bSlcbiAgICAgIH1cbiAgICB9XG4gICAgZWxzZSBpZiAodm0uX19xUG9ydGFsSW5uZXJSZWYgIT09IHZvaWQgMCkge1xuICAgICAgLy8gdHJlYXQgaXQgYXMgcG9pbnQgb2Ygc2VwYXJhdGlvbiBpZiBwYXJlbnQgaXMgUVBvcHVwUHJveHlcbiAgICAgIC8vIChzbyBtb2JpbGUgbWF0Y2hlcyBkZXNrdG9wIGJlaGF2aW9yKVxuICAgICAgLy8gYW5kIGhpZGUgaXQgdG9vXG4gICAgICBjb25zdCBwYXJlbnQgPSBnZXRQYXJlbnRWbSh2bSlcblxuICAgICAgaWYgKHBhcmVudCAhPT0gdm9pZCAwICYmIHBhcmVudC4kb3B0aW9ucy5uYW1lID09PSAnUVBvcHVwUHJveHknKSB7XG4gICAgICAgIHZtLmhpZGUoZXZ0KVxuICAgICAgICByZXR1cm4gcGFyZW50XG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHZtXG4gICAgICB9XG4gICAgfVxuXG4gICAgdm0gPSBnZXRQYXJlbnRWbSh2bSlcbiAgfSB3aGlsZSAodm0gIT09IHZvaWQgMCAmJiB2bSAhPT0gbnVsbClcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNsb3NlUG9ydGFscyAodm0sIGV2dCwgZGVwdGgpIHtcbiAgd2hpbGUgKGRlcHRoICE9PSAwICYmIHZtICE9PSB2b2lkIDAgJiYgdm0gIT09IG51bGwpIHtcbiAgICBpZiAodm0uX19xUG9ydGFsSW5uZXJSZWYgIT09IHZvaWQgMCkge1xuICAgICAgZGVwdGgtLVxuXG4gICAgICBpZiAodm0uJG9wdGlvbnMubmFtZSA9PT0gJ1FNZW51Jykge1xuICAgICAgICB2bSA9IGNsb3NlUG9ydGFsTWVudXModm0sIGV2dClcbiAgICAgICAgY29udGludWVcbiAgICAgIH1cblxuICAgICAgdm0uaGlkZShldnQpXG4gICAgfVxuXG4gICAgdm0gPSBnZXRQYXJlbnRWbSh2bSlcbiAgfVxufVxuIiwiaW1wb3J0IHsgaCwgcmVmLCBvblVubW91bnRlZCwgVGVsZXBvcnQgfSBmcm9tICd2dWUnXG5cbmltcG9ydCB7IG5vb3AgfSBmcm9tICcuLi8uLi91dGlscy9ldmVudC5qcydcbmltcG9ydCB7IGFkZEZvY3VzV2FpdEZsYWcsIHJlbW92ZUZvY3VzV2FpdEZsYWcgfSBmcm9tICcuLi8uLi91dGlscy9wcml2YXRlL2ZvY3VzLW1hbmFnZXIuanMnXG5pbXBvcnQgeyBjcmVhdGVHbG9iYWxOb2RlLCByZW1vdmVHbG9iYWxOb2RlIH0gZnJvbSAnLi4vLi4vdXRpbHMvcHJpdmF0ZS9nbG9iYWwtbm9kZXMuanMnXG5pbXBvcnQgeyBwb3J0YWxMaXN0IH0gZnJvbSAnLi4vLi4vdXRpbHMvcHJpdmF0ZS9wb3J0YWwuanMnXG5cbmZ1bmN0aW9uIGlzT25HbG9iYWxEaWFsb2cgKHZtKSB7XG4gIHZtID0gdm0ucGFyZW50XG5cbiAgd2hpbGUgKHZtICE9PSB2b2lkIDAgJiYgdm0gIT09IG51bGwpIHtcbiAgICBpZiAodm0udHlwZS5uYW1lID09PSAnUUdsb2JhbERpYWxvZycpIHtcbiAgICAgIHJldHVybiB0cnVlXG4gICAgfVxuICAgIGlmICh2bS50eXBlLm5hbWUgPT09ICdRRGlhbG9nJyB8fCB2bS50eXBlLm5hbWUgPT09ICdRTWVudScpIHtcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cblxuICAgIHZtID0gdm0ucGFyZW50XG4gIH1cblxuICByZXR1cm4gZmFsc2Vcbn1cblxuLy8gV2FybmluZyFcbi8vIFlvdSBNVVNUIHNwZWNpZnkgXCJpbmhlcml0QXR0cnM6IGZhbHNlXCIgaW4geW91ciBjb21wb25lbnRcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gKHZtLCBpbm5lclJlZiwgcmVuZGVyUG9ydGFsQ29udGVudCwgY2hlY2tHbG9iYWxEaWFsb2cpIHtcbiAgLy8gc2hvd2luZywgaW5jbHVkaW5nIHdoaWxlIGluIHNob3cvaGlkZSB0cmFuc2l0aW9uXG4gIGNvbnN0IHBvcnRhbElzQWN0aXZlID0gcmVmKGZhbHNlKVxuXG4gIC8vIHNob3dpbmcgJiBub3QgaW4gYW55IHNob3cvaGlkZSB0cmFuc2l0aW9uXG4gIGNvbnN0IHBvcnRhbElzQWNjZXNzaWJsZSA9IHJlZihmYWxzZSlcblxuICBpZiAoX19RVUFTQVJfU1NSX1NFUlZFUl9fKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHBvcnRhbElzQWN0aXZlLFxuICAgICAgcG9ydGFsSXNBY2Nlc3NpYmxlLFxuXG4gICAgICBzaG93UG9ydGFsOiBub29wLFxuICAgICAgaGlkZVBvcnRhbDogbm9vcCxcbiAgICAgIHJlbmRlclBvcnRhbDogbm9vcFxuICAgIH1cbiAgfVxuXG4gIGxldCBwb3J0YWxFbCA9IG51bGxcbiAgY29uc3QgZm9jdXNPYmogPSB7fVxuICBjb25zdCBvbkdsb2JhbERpYWxvZyA9IGNoZWNrR2xvYmFsRGlhbG9nID09PSB0cnVlICYmIGlzT25HbG9iYWxEaWFsb2codm0pXG5cbiAgZnVuY3Rpb24gc2hvd1BvcnRhbCAoaXNSZWFkeSkge1xuICAgIGlmIChpc1JlYWR5ID09PSB0cnVlKSB7XG4gICAgICByZW1vdmVGb2N1c1dhaXRGbGFnKGZvY3VzT2JqKVxuICAgICAgcG9ydGFsSXNBY2Nlc3NpYmxlLnZhbHVlID0gdHJ1ZVxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgcG9ydGFsSXNBY2Nlc3NpYmxlLnZhbHVlID0gZmFsc2VcblxuICAgIGlmIChwb3J0YWxJc0FjdGl2ZS52YWx1ZSA9PT0gZmFsc2UpIHtcbiAgICAgIGlmIChvbkdsb2JhbERpYWxvZyA9PT0gZmFsc2UgJiYgcG9ydGFsRWwgPT09IG51bGwpIHtcbiAgICAgICAgcG9ydGFsRWwgPSBjcmVhdGVHbG9iYWxOb2RlKClcbiAgICAgIH1cblxuICAgICAgcG9ydGFsSXNBY3RpdmUudmFsdWUgPSB0cnVlXG5cbiAgICAgIC8vIHJlZ2lzdGVyIHBvcnRhbFxuICAgICAgcG9ydGFsTGlzdC5wdXNoKHZtLnByb3h5KVxuXG4gICAgICBhZGRGb2N1c1dhaXRGbGFnKGZvY3VzT2JqKVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGhpZGVQb3J0YWwgKGlzUmVhZHkpIHtcbiAgICBwb3J0YWxJc0FjY2Vzc2libGUudmFsdWUgPSBmYWxzZVxuXG4gICAgaWYgKGlzUmVhZHkgIT09IHRydWUpIHsgcmV0dXJuIH1cblxuICAgIHJlbW92ZUZvY3VzV2FpdEZsYWcoZm9jdXNPYmopXG4gICAgcG9ydGFsSXNBY3RpdmUudmFsdWUgPSBmYWxzZVxuXG4gICAgLy8gdW5yZWdpc3RlciBwb3J0YWxcbiAgICBjb25zdCBpbmRleCA9IHBvcnRhbExpc3QuaW5kZXhPZih2bS5wcm94eSlcbiAgICBpZiAoaW5kZXggPiAtMSkge1xuICAgICAgcG9ydGFsTGlzdC5zcGxpY2UoaW5kZXgsIDEpXG4gICAgfVxuXG4gICAgaWYgKHBvcnRhbEVsICE9PSBudWxsKSB7XG4gICAgICByZW1vdmVHbG9iYWxOb2RlKHBvcnRhbEVsKVxuICAgICAgcG9ydGFsRWwgPSBudWxsXG4gICAgfVxuICB9XG5cbiAgb25Vbm1vdW50ZWQoKCkgPT4geyBoaWRlUG9ydGFsKHRydWUpIH0pXG5cbiAgLy8gZXhwb3NlIHB1YmxpY2x5IG5lZWRlZCBzdHVmZiBmb3IgcG9ydGFsIHV0aWxzXG4gIE9iamVjdC5hc3NpZ24odm0ucHJveHksIHsgX19xUG9ydGFsSW5uZXJSZWY6IGlubmVyUmVmIH0pXG5cbiAgcmV0dXJuIHtcbiAgICBzaG93UG9ydGFsLFxuICAgIGhpZGVQb3J0YWwsXG5cbiAgICBwb3J0YWxJc0FjdGl2ZSxcbiAgICBwb3J0YWxJc0FjY2Vzc2libGUsXG5cbiAgICByZW5kZXJQb3J0YWw6ICgpID0+IChcbiAgICAgIG9uR2xvYmFsRGlhbG9nID09PSB0cnVlXG4gICAgICAgID8gcmVuZGVyUG9ydGFsQ29udGVudCgpXG4gICAgICAgIDogKFxuICAgICAgICAgICAgcG9ydGFsSXNBY3RpdmUudmFsdWUgPT09IHRydWVcbiAgICAgICAgICAgICAgPyBbIGgoVGVsZXBvcnQsIHsgdG86IHBvcnRhbEVsIH0sIHJlbmRlclBvcnRhbENvbnRlbnQoKSkgXVxuICAgICAgICAgICAgICA6IHZvaWQgMFxuICAgICAgICAgIClcbiAgICApXG4gIH1cbn1cbiIsImltcG9ydCBwcmV2ZW50U2Nyb2xsIGZyb20gJy4uLy4uL3V0aWxzL3ByZXZlbnQtc2Nyb2xsLmpzJ1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiAoKSB7XG4gIGxldCBjdXJyZW50U3RhdGVcblxuICByZXR1cm4ge1xuICAgIHByZXZlbnRCb2R5U2Nyb2xsIChzdGF0ZSkge1xuICAgICAgaWYgKFxuICAgICAgICBzdGF0ZSAhPT0gY3VycmVudFN0YXRlXG4gICAgICAgICYmIChjdXJyZW50U3RhdGUgIT09IHZvaWQgMCB8fCBzdGF0ZSA9PT0gdHJ1ZSlcbiAgICAgICkge1xuICAgICAgICBjdXJyZW50U3RhdGUgPSBzdGF0ZVxuICAgICAgICBwcmV2ZW50U2Nyb2xsKHN0YXRlKVxuICAgICAgfVxuICAgIH1cbiAgfVxufVxuIiwiaW1wb3J0IHsgY2xpZW50IH0gZnJvbSAnLi4vLi4vcGx1Z2lucy9QbGF0Zm9ybS5qcydcbmltcG9ydCB7IGlzS2V5Q29kZSB9IGZyb20gJy4va2V5LWNvbXBvc2l0aW9uLmpzJ1xuXG5jb25zdCBoYW5kbGVycyA9IFtdXG5sZXQgZXNjRG93blxuXG5mdW5jdGlvbiBvbktleWRvd24gKGV2dCkge1xuICBlc2NEb3duID0gZXZ0LmtleUNvZGUgPT09IDI3XG59XG5cbmZ1bmN0aW9uIG9uQmx1ciAoKSB7XG4gIGlmIChlc2NEb3duID09PSB0cnVlKSB7XG4gICAgZXNjRG93biA9IGZhbHNlXG4gIH1cbn1cblxuZnVuY3Rpb24gb25LZXl1cCAoZXZ0KSB7XG4gIGlmIChlc2NEb3duID09PSB0cnVlKSB7XG4gICAgZXNjRG93biA9IGZhbHNlXG5cbiAgICBpZiAoaXNLZXlDb2RlKGV2dCwgMjcpID09PSB0cnVlKSB7XG4gICAgICBoYW5kbGVyc1sgaGFuZGxlcnMubGVuZ3RoIC0gMSBdKGV2dClcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gdXBkYXRlIChhY3Rpb24pIHtcbiAgd2luZG93WyBhY3Rpb24gXSgna2V5ZG93bicsIG9uS2V5ZG93bilcbiAgd2luZG93WyBhY3Rpb24gXSgnYmx1cicsIG9uQmx1cilcbiAgd2luZG93WyBhY3Rpb24gXSgna2V5dXAnLCBvbktleXVwKVxuICBlc2NEb3duID0gZmFsc2Vcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGFkZEVzY2FwZUtleSAoZm4pIHtcbiAgaWYgKGNsaWVudC5pcy5kZXNrdG9wID09PSB0cnVlKSB7XG4gICAgaGFuZGxlcnMucHVzaChmbilcblxuICAgIGlmIChoYW5kbGVycy5sZW5ndGggPT09IDEpIHtcbiAgICAgIHVwZGF0ZSgnYWRkRXZlbnRMaXN0ZW5lcicpXG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiByZW1vdmVFc2NhcGVLZXkgKGZuKSB7XG4gIGNvbnN0IGluZGV4ID0gaGFuZGxlcnMuaW5kZXhPZihmbilcbiAgaWYgKGluZGV4ID4gLTEpIHtcbiAgICBoYW5kbGVycy5zcGxpY2UoaW5kZXgsIDEpXG5cbiAgICBpZiAoaGFuZGxlcnMubGVuZ3RoID09PSAwKSB7XG4gICAgICB1cGRhdGUoJ3JlbW92ZUV2ZW50TGlzdGVuZXInKVxuICAgIH1cbiAgfVxufVxuIiwiaW1wb3J0IHsgY2xpZW50IH0gZnJvbSAnLi4vLi4vcGx1Z2lucy9QbGF0Zm9ybS5qcydcblxuY29uc3QgaGFuZGxlcnMgPSBbXVxuXG5mdW5jdGlvbiB0cmlnZ2VyIChlKSB7XG4gIGhhbmRsZXJzWyBoYW5kbGVycy5sZW5ndGggLSAxIF0oZSlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGFkZEZvY3Vzb3V0IChmbikge1xuICBpZiAoY2xpZW50LmlzLmRlc2t0b3AgPT09IHRydWUpIHtcbiAgICBoYW5kbGVycy5wdXNoKGZuKVxuXG4gICAgaWYgKGhhbmRsZXJzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgZG9jdW1lbnQuYm9keS5hZGRFdmVudExpc3RlbmVyKCdmb2N1c2luJywgdHJpZ2dlcilcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZUZvY3Vzb3V0IChmbikge1xuICBjb25zdCBpbmRleCA9IGhhbmRsZXJzLmluZGV4T2YoZm4pXG4gIGlmIChpbmRleCA+IC0xKSB7XG4gICAgaGFuZGxlcnMuc3BsaWNlKGluZGV4LCAxKVxuXG4gICAgaWYgKGhhbmRsZXJzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVFdmVudExpc3RlbmVyKCdmb2N1c2luJywgdHJpZ2dlcilcbiAgICB9XG4gIH1cbn1cbiIsImltcG9ydCB7IGgsIHJlZiwgY29tcHV0ZWQsIHdhdGNoLCBvbkJlZm9yZVVubW91bnQsIG5leHRUaWNrLCBUcmFuc2l0aW9uLCBnZXRDdXJyZW50SW5zdGFuY2UgfSBmcm9tICd2dWUnXG5cbmltcG9ydCB1c2VIaXN0b3J5IGZyb20gJy4uLy4uL2NvbXBvc2FibGVzL3ByaXZhdGUvdXNlLWhpc3RvcnkuanMnXG5pbXBvcnQgdXNlVGltZW91dCBmcm9tICcuLi8uLi9jb21wb3NhYmxlcy9wcml2YXRlL3VzZS10aW1lb3V0LmpzJ1xuaW1wb3J0IHVzZVRpY2sgZnJvbSAnLi4vLi4vY29tcG9zYWJsZXMvcHJpdmF0ZS91c2UtdGljay5qcydcbmltcG9ydCB1c2VNb2RlbFRvZ2dsZSwgeyB1c2VNb2RlbFRvZ2dsZVByb3BzLCB1c2VNb2RlbFRvZ2dsZUVtaXRzIH0gZnJvbSAnLi4vLi4vY29tcG9zYWJsZXMvcHJpdmF0ZS91c2UtbW9kZWwtdG9nZ2xlLmpzJ1xuaW1wb3J0IHsgdXNlVHJhbnNpdGlvblByb3BzIH0gZnJvbSAnLi4vLi4vY29tcG9zYWJsZXMvcHJpdmF0ZS91c2UtdHJhbnNpdGlvbi5qcydcbmltcG9ydCB1c2VQb3J0YWwgZnJvbSAnLi4vLi4vY29tcG9zYWJsZXMvcHJpdmF0ZS91c2UtcG9ydGFsLmpzJ1xuaW1wb3J0IHVzZVByZXZlbnRTY3JvbGwgZnJvbSAnLi4vLi4vY29tcG9zYWJsZXMvcHJpdmF0ZS91c2UtcHJldmVudC1zY3JvbGwuanMnXG5cbmltcG9ydCB7IGNyZWF0ZUNvbXBvbmVudCB9IGZyb20gJy4uLy4uL3V0aWxzL3ByaXZhdGUvY3JlYXRlLmpzJ1xuaW1wb3J0IHsgY2hpbGRIYXNGb2N1cyB9IGZyb20gJy4uLy4uL3V0aWxzL2RvbS5qcydcbmltcG9ydCB7IGhTbG90IH0gZnJvbSAnLi4vLi4vdXRpbHMvcHJpdmF0ZS9yZW5kZXIuanMnXG5pbXBvcnQgeyBhZGRFc2NhcGVLZXksIHJlbW92ZUVzY2FwZUtleSB9IGZyb20gJy4uLy4uL3V0aWxzL3ByaXZhdGUvZXNjYXBlLWtleS5qcydcbmltcG9ydCB7IGFkZEZvY3Vzb3V0LCByZW1vdmVGb2N1c291dCB9IGZyb20gJy4uLy4uL3V0aWxzL3ByaXZhdGUvZm9jdXNvdXQuanMnXG5pbXBvcnQgeyBhZGRGb2N1c0ZuIH0gZnJvbSAnLi4vLi4vdXRpbHMvcHJpdmF0ZS9mb2N1cy1tYW5hZ2VyLmpzJ1xuXG5sZXQgbWF4aW1pemVkTW9kYWxzID0gMFxuXG5jb25zdCBwb3NpdGlvbkNsYXNzID0ge1xuICBzdGFuZGFyZDogJ2ZpeGVkLWZ1bGwgZmxleC1jZW50ZXInLFxuICB0b3A6ICdmaXhlZC10b3AganVzdGlmeS1jZW50ZXInLFxuICBib3R0b206ICdmaXhlZC1ib3R0b20ganVzdGlmeS1jZW50ZXInLFxuICByaWdodDogJ2ZpeGVkLXJpZ2h0IGl0ZW1zLWNlbnRlcicsXG4gIGxlZnQ6ICdmaXhlZC1sZWZ0IGl0ZW1zLWNlbnRlcidcbn1cblxuY29uc3QgdHJhbnNpdGlvbnMgPSB7XG4gIHN0YW5kYXJkOiBbICdzY2FsZScsICdzY2FsZScgXSxcbiAgdG9wOiBbICdzbGlkZS1kb3duJywgJ3NsaWRlLXVwJyBdLFxuICBib3R0b206IFsgJ3NsaWRlLXVwJywgJ3NsaWRlLWRvd24nIF0sXG4gIHJpZ2h0OiBbICdzbGlkZS1sZWZ0JywgJ3NsaWRlLXJpZ2h0JyBdLFxuICBsZWZ0OiBbICdzbGlkZS1yaWdodCcsICdzbGlkZS1sZWZ0JyBdXG59XG5cbmV4cG9ydCBkZWZhdWx0IGNyZWF0ZUNvbXBvbmVudCh7XG4gIG5hbWU6ICdRRGlhbG9nJyxcblxuICBpbmhlcml0QXR0cnM6IGZhbHNlLFxuXG4gIHByb3BzOiB7XG4gICAgLi4udXNlTW9kZWxUb2dnbGVQcm9wcyxcbiAgICAuLi51c2VUcmFuc2l0aW9uUHJvcHMsXG5cbiAgICB0cmFuc2l0aW9uU2hvdzogU3RyaW5nLFxuICAgIHRyYW5zaXRpb25IaWRlOiBTdHJpbmcsXG5cbiAgICBwZXJzaXN0ZW50OiBCb29sZWFuLFxuICAgIGF1dG9DbG9zZTogQm9vbGVhbixcblxuICAgIG5vRXNjRGlzbWlzczogQm9vbGVhbixcbiAgICBub0JhY2tkcm9wRGlzbWlzczogQm9vbGVhbixcbiAgICBub1JvdXRlRGlzbWlzczogQm9vbGVhbixcbiAgICBub1JlZm9jdXM6IEJvb2xlYW4sXG4gICAgbm9Gb2N1czogQm9vbGVhbixcbiAgICBub1NoYWtlOiBCb29sZWFuLFxuXG4gICAgc2VhbWxlc3M6IEJvb2xlYW4sXG5cbiAgICBtYXhpbWl6ZWQ6IEJvb2xlYW4sXG4gICAgZnVsbFdpZHRoOiBCb29sZWFuLFxuICAgIGZ1bGxIZWlnaHQ6IEJvb2xlYW4sXG5cbiAgICBzcXVhcmU6IEJvb2xlYW4sXG5cbiAgICBwb3NpdGlvbjoge1xuICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgZGVmYXVsdDogJ3N0YW5kYXJkJyxcbiAgICAgIHZhbGlkYXRvcjogdmFsID0+IHZhbCA9PT0gJ3N0YW5kYXJkJ1xuICAgICAgICB8fCBbICd0b3AnLCAnYm90dG9tJywgJ2xlZnQnLCAncmlnaHQnIF0uaW5jbHVkZXModmFsKVxuICAgIH1cbiAgfSxcblxuICBlbWl0czogW1xuICAgIC4uLnVzZU1vZGVsVG9nZ2xlRW1pdHMsXG4gICAgJ3NoYWtlJywgJ2NsaWNrJywgJ2VzY2FwZS1rZXknXG4gIF0sXG5cbiAgc2V0dXAgKHByb3BzLCB7IHNsb3RzLCBlbWl0LCBhdHRycyB9KSB7XG4gICAgY29uc3Qgdm0gPSBnZXRDdXJyZW50SW5zdGFuY2UoKVxuXG4gICAgY29uc3QgaW5uZXJSZWYgPSByZWYobnVsbClcbiAgICBjb25zdCBzaG93aW5nID0gcmVmKGZhbHNlKVxuICAgIGNvbnN0IHRyYW5zaXRpb25TdGF0ZSA9IHJlZihmYWxzZSlcbiAgICBjb25zdCBhbmltYXRpbmcgPSByZWYoZmFsc2UpXG5cbiAgICBsZXQgc2hha2VUaW1lb3V0LCByZWZvY3VzVGFyZ2V0ID0gbnVsbCwgaXNNYXhpbWl6ZWQsIGF2b2lkQXV0b0Nsb3NlXG5cbiAgICBjb25zdCBoaWRlT25Sb3V0ZUNoYW5nZSA9IGNvbXB1dGVkKCgpID0+XG4gICAgICBwcm9wcy5wZXJzaXN0ZW50ICE9PSB0cnVlXG4gICAgICAmJiBwcm9wcy5ub1JvdXRlRGlzbWlzcyAhPT0gdHJ1ZVxuICAgICAgJiYgcHJvcHMuc2VhbWxlc3MgIT09IHRydWVcbiAgICApXG5cbiAgICBjb25zdCB7IHByZXZlbnRCb2R5U2Nyb2xsIH0gPSB1c2VQcmV2ZW50U2Nyb2xsKClcbiAgICBjb25zdCB7IHJlZ2lzdGVyVGltZW91dCwgcmVtb3ZlVGltZW91dCB9ID0gdXNlVGltZW91dCgpXG4gICAgY29uc3QgeyByZWdpc3RlclRpY2ssIHJlbW92ZVRpY2sgfSA9IHVzZVRpY2soKVxuXG4gICAgY29uc3QgeyBzaG93UG9ydGFsLCBoaWRlUG9ydGFsLCBwb3J0YWxJc0FjY2Vzc2libGUsIHJlbmRlclBvcnRhbCB9ID0gdXNlUG9ydGFsKFxuICAgICAgdm0sIGlubmVyUmVmLCByZW5kZXJQb3J0YWxDb250ZW50LCAvKiBwbHMgZG8gY2hlY2sgaWYgb24gYSBnbG9iYWwgZGlhbG9nICovIHRydWVcbiAgICApXG5cbiAgICBjb25zdCB7IGhpZGUgfSA9IHVzZU1vZGVsVG9nZ2xlKHtcbiAgICAgIHNob3dpbmcsXG4gICAgICBoaWRlT25Sb3V0ZUNoYW5nZSxcbiAgICAgIGhhbmRsZVNob3csXG4gICAgICBoYW5kbGVIaWRlLFxuICAgICAgcHJvY2Vzc09uTW91bnQ6IHRydWVcbiAgICB9KVxuXG4gICAgY29uc3QgeyBhZGRUb0hpc3RvcnksIHJlbW92ZUZyb21IaXN0b3J5IH0gPSB1c2VIaXN0b3J5KHNob3dpbmcsIGhpZGUsIGhpZGVPblJvdXRlQ2hhbmdlKVxuXG4gICAgY29uc3QgY2xhc3NlcyA9IGNvbXB1dGVkKCgpID0+XG4gICAgICAncS1kaWFsb2dfX2lubmVyIGZsZXggbm8tcG9pbnRlci1ldmVudHMnXG4gICAgICArIGAgcS1kaWFsb2dfX2lubmVyLS0keyBwcm9wcy5tYXhpbWl6ZWQgPT09IHRydWUgPyAnbWF4aW1pemVkJyA6ICdtaW5pbWl6ZWQnIH1gXG4gICAgICArIGAgcS1kaWFsb2dfX2lubmVyLS0keyBwcm9wcy5wb3NpdGlvbiB9ICR7IHBvc2l0aW9uQ2xhc3NbIHByb3BzLnBvc2l0aW9uIF0gfWBcbiAgICAgICsgKGFuaW1hdGluZy52YWx1ZSA9PT0gdHJ1ZSA/ICcgcS1kaWFsb2dfX2lubmVyLS1hbmltYXRpbmcnIDogJycpXG4gICAgICArIChwcm9wcy5mdWxsV2lkdGggPT09IHRydWUgPyAnIHEtZGlhbG9nX19pbm5lci0tZnVsbHdpZHRoJyA6ICcnKVxuICAgICAgKyAocHJvcHMuZnVsbEhlaWdodCA9PT0gdHJ1ZSA/ICcgcS1kaWFsb2dfX2lubmVyLS1mdWxsaGVpZ2h0JyA6ICcnKVxuICAgICAgKyAocHJvcHMuc3F1YXJlID09PSB0cnVlID8gJyBxLWRpYWxvZ19faW5uZXItLXNxdWFyZScgOiAnJylcbiAgICApXG5cbiAgICBjb25zdCB0cmFuc2l0aW9uU2hvdyA9IGNvbXB1dGVkKCgpID0+XG4gICAgICAncS10cmFuc2l0aW9uLS0nXG4gICAgICArIChwcm9wcy50cmFuc2l0aW9uU2hvdyA9PT0gdm9pZCAwID8gdHJhbnNpdGlvbnNbIHByb3BzLnBvc2l0aW9uIF1bIDAgXSA6IHByb3BzLnRyYW5zaXRpb25TaG93KVxuICAgIClcblxuICAgIGNvbnN0IHRyYW5zaXRpb25IaWRlID0gY29tcHV0ZWQoKCkgPT5cbiAgICAgICdxLXRyYW5zaXRpb24tLSdcbiAgICAgICsgKHByb3BzLnRyYW5zaXRpb25IaWRlID09PSB2b2lkIDAgPyB0cmFuc2l0aW9uc1sgcHJvcHMucG9zaXRpb24gXVsgMSBdIDogcHJvcHMudHJhbnNpdGlvbkhpZGUpXG4gICAgKVxuXG4gICAgY29uc3QgdHJhbnNpdGlvbiA9IGNvbXB1dGVkKCgpID0+IChcbiAgICAgIHRyYW5zaXRpb25TdGF0ZS52YWx1ZSA9PT0gdHJ1ZVxuICAgICAgICA/IHRyYW5zaXRpb25IaWRlLnZhbHVlXG4gICAgICAgIDogdHJhbnNpdGlvblNob3cudmFsdWVcbiAgICApKVxuXG4gICAgY29uc3QgdHJhbnNpdGlvblN0eWxlID0gY29tcHV0ZWQoXG4gICAgICAoKSA9PiBgLS1xLXRyYW5zaXRpb24tZHVyYXRpb246ICR7IHByb3BzLnRyYW5zaXRpb25EdXJhdGlvbiB9bXNgXG4gICAgKVxuXG4gICAgY29uc3QgdXNlQmFja2Ryb3AgPSBjb21wdXRlZCgoKSA9PiBzaG93aW5nLnZhbHVlID09PSB0cnVlICYmIHByb3BzLnNlYW1sZXNzICE9PSB0cnVlKVxuXG4gICAgY29uc3Qgb25FdmVudHMgPSBjb21wdXRlZCgoKSA9PiAoXG4gICAgICBwcm9wcy5hdXRvQ2xvc2UgPT09IHRydWVcbiAgICAgICAgPyB7IG9uQ2xpY2s6IG9uQXV0b0Nsb3NlIH1cbiAgICAgICAgOiB7fVxuICAgICkpXG5cbiAgICBjb25zdCByb290Q2xhc3NlcyA9IGNvbXB1dGVkKCgpID0+IFtcbiAgICAgICdxLWRpYWxvZyBmdWxsc2NyZWVuIG5vLXBvaW50ZXItZXZlbnRzICdcbiAgICAgICAgKyBgcS1kaWFsb2ctLSR7IHVzZUJhY2tkcm9wLnZhbHVlID09PSB0cnVlID8gJ21vZGFsJyA6ICdzZWFtbGVzcycgfWAsXG4gICAgICBhdHRycy5jbGFzc1xuICAgIF0pXG5cbiAgICB3YXRjaChzaG93aW5nLCB2YWwgPT4ge1xuICAgICAgbmV4dFRpY2soKCkgPT4ge1xuICAgICAgICB0cmFuc2l0aW9uU3RhdGUudmFsdWUgPSB2YWxcbiAgICAgIH0pXG4gICAgfSlcblxuICAgIHdhdGNoKCgpID0+IHByb3BzLm1heGltaXplZCwgc3RhdGUgPT4ge1xuICAgICAgc2hvd2luZy52YWx1ZSA9PT0gdHJ1ZSAmJiB1cGRhdGVNYXhpbWl6ZWQoc3RhdGUpXG4gICAgfSlcblxuICAgIHdhdGNoKHVzZUJhY2tkcm9wLCB2YWwgPT4ge1xuICAgICAgcHJldmVudEJvZHlTY3JvbGwodmFsKVxuXG4gICAgICBpZiAodmFsID09PSB0cnVlKSB7XG4gICAgICAgIGFkZEZvY3Vzb3V0KG9uRm9jdXNDaGFuZ2UpXG4gICAgICAgIGFkZEVzY2FwZUtleShvbkVzY2FwZUtleSlcbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICByZW1vdmVGb2N1c291dChvbkZvY3VzQ2hhbmdlKVxuICAgICAgICByZW1vdmVFc2NhcGVLZXkob25Fc2NhcGVLZXkpXG4gICAgICB9XG4gICAgfSlcblxuICAgIGZ1bmN0aW9uIGhhbmRsZVNob3cgKGV2dCkge1xuICAgICAgcmVtb3ZlVGltZW91dCgpXG4gICAgICByZW1vdmVUaWNrKClcbiAgICAgIGFkZFRvSGlzdG9yeSgpXG5cbiAgICAgIHJlZm9jdXNUYXJnZXQgPSBwcm9wcy5ub1JlZm9jdXMgPT09IGZhbHNlICYmIGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgIT09IG51bGxcbiAgICAgICAgPyBkb2N1bWVudC5hY3RpdmVFbGVtZW50XG4gICAgICAgIDogbnVsbFxuXG4gICAgICB1cGRhdGVNYXhpbWl6ZWQocHJvcHMubWF4aW1pemVkKVxuICAgICAgc2hvd1BvcnRhbCgpXG4gICAgICBhbmltYXRpbmcudmFsdWUgPSB0cnVlXG5cbiAgICAgIGlmIChwcm9wcy5ub0ZvY3VzICE9PSB0cnVlKSB7XG4gICAgICAgIGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgIT09IG51bGwgJiYgZG9jdW1lbnQuYWN0aXZlRWxlbWVudC5ibHVyKClcbiAgICAgICAgcmVnaXN0ZXJUaWNrKGZvY3VzKVxuICAgICAgfVxuXG4gICAgICByZWdpc3RlclRpbWVvdXQoKCkgPT4ge1xuICAgICAgICBpZiAodm0ucHJveHkuJHEucGxhdGZvcm0uaXMuaW9zID09PSB0cnVlKSB7XG4gICAgICAgICAgaWYgKHByb3BzLnNlYW1sZXNzICE9PSB0cnVlICYmIGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQpIHtcbiAgICAgICAgICAgIGNvbnN0XG4gICAgICAgICAgICAgIHsgdG9wLCBib3R0b20gfSA9IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksXG4gICAgICAgICAgICAgIHsgaW5uZXJIZWlnaHQgfSA9IHdpbmRvdyxcbiAgICAgICAgICAgICAgaGVpZ2h0ID0gd2luZG93LnZpc3VhbFZpZXdwb3J0ICE9PSB2b2lkIDBcbiAgICAgICAgICAgICAgICA/IHdpbmRvdy52aXN1YWxWaWV3cG9ydC5oZWlnaHRcbiAgICAgICAgICAgICAgICA6IGlubmVySGVpZ2h0XG5cbiAgICAgICAgICAgIGlmICh0b3AgPiAwICYmIGJvdHRvbSA+IGhlaWdodCAvIDIpIHtcbiAgICAgICAgICAgICAgZG9jdW1lbnQuc2Nyb2xsaW5nRWxlbWVudC5zY3JvbGxUb3AgPSBNYXRoLm1pbihcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5zY3JvbGxpbmdFbGVtZW50LnNjcm9sbEhlaWdodCAtIGhlaWdodCxcbiAgICAgICAgICAgICAgICBib3R0b20gPj0gaW5uZXJIZWlnaHRcbiAgICAgICAgICAgICAgICAgID8gSW5maW5pdHlcbiAgICAgICAgICAgICAgICAgIDogTWF0aC5jZWlsKGRvY3VtZW50LnNjcm9sbGluZ0VsZW1lbnQuc2Nyb2xsVG9wICsgYm90dG9tIC0gaGVpZ2h0IC8gMilcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBkb2N1bWVudC5hY3RpdmVFbGVtZW50LnNjcm9sbEludG9WaWV3KClcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyByZXF1aXJlZCBpbiBvcmRlciB0byBhdm9pZCB0aGUgXCJkb3VibGUtdGFwIG5lZWRlZFwiIGlzc3VlXG4gICAgICAgICAgYXZvaWRBdXRvQ2xvc2UgPSB0cnVlXG4gICAgICAgICAgaW5uZXJSZWYudmFsdWUuY2xpY2soKVxuICAgICAgICAgIGF2b2lkQXV0b0Nsb3NlID0gZmFsc2VcbiAgICAgICAgfVxuXG4gICAgICAgIHNob3dQb3J0YWwodHJ1ZSkgLy8gZG9uZSBzaG93aW5nIHBvcnRhbFxuICAgICAgICBhbmltYXRpbmcudmFsdWUgPSBmYWxzZVxuICAgICAgICBlbWl0KCdzaG93JywgZXZ0KVxuICAgICAgfSwgcHJvcHMudHJhbnNpdGlvbkR1cmF0aW9uKVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGhhbmRsZUhpZGUgKGV2dCkge1xuICAgICAgcmVtb3ZlVGltZW91dCgpXG4gICAgICByZW1vdmVUaWNrKClcbiAgICAgIHJlbW92ZUZyb21IaXN0b3J5KClcbiAgICAgIGNsZWFudXAodHJ1ZSlcbiAgICAgIGFuaW1hdGluZy52YWx1ZSA9IHRydWVcbiAgICAgIGhpZGVQb3J0YWwoKVxuXG4gICAgICBpZiAocmVmb2N1c1RhcmdldCAhPT0gbnVsbCkge1xuICAgICAgICByZWZvY3VzVGFyZ2V0LmZvY3VzKClcbiAgICAgICAgcmVmb2N1c1RhcmdldCA9IG51bGxcbiAgICAgIH1cblxuICAgICAgcmVnaXN0ZXJUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgaGlkZVBvcnRhbCh0cnVlKSAvLyBkb25lIGhpZGluZywgbm93IGRlc3Ryb3lcbiAgICAgICAgYW5pbWF0aW5nLnZhbHVlID0gZmFsc2VcbiAgICAgICAgZW1pdCgnaGlkZScsIGV2dClcbiAgICAgIH0sIHByb3BzLnRyYW5zaXRpb25EdXJhdGlvbilcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBmb2N1cyAoc2VsZWN0b3IpIHtcbiAgICAgIGFkZEZvY3VzRm4oKCkgPT4ge1xuICAgICAgICBsZXQgbm9kZSA9IGlubmVyUmVmLnZhbHVlXG5cbiAgICAgICAgaWYgKG5vZGUgPT09IG51bGwgfHwgbm9kZS5jb250YWlucyhkb2N1bWVudC5hY3RpdmVFbGVtZW50KSA9PT0gdHJ1ZSkge1xuICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG5cbiAgICAgICAgbm9kZSA9IG5vZGUucXVlcnlTZWxlY3RvcihzZWxlY3RvciB8fCAnW2F1dG9mb2N1c10sIFtkYXRhLWF1dG9mb2N1c10nKSB8fCBub2RlXG4gICAgICAgIG5vZGUuZm9jdXMoeyBwcmV2ZW50U2Nyb2xsOiB0cnVlIH0pXG4gICAgICB9KVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNoYWtlICgpIHtcbiAgICAgIGZvY3VzKClcbiAgICAgIGVtaXQoJ3NoYWtlJylcblxuICAgICAgY29uc3Qgbm9kZSA9IGlubmVyUmVmLnZhbHVlXG5cbiAgICAgIGlmIChub2RlICE9PSBudWxsKSB7XG4gICAgICAgIG5vZGUuY2xhc3NMaXN0LnJlbW92ZSgncS1hbmltYXRlLS1zY2FsZScpXG4gICAgICAgIG5vZGUuY2xhc3NMaXN0LmFkZCgncS1hbmltYXRlLS1zY2FsZScpXG4gICAgICAgIGNsZWFyVGltZW91dChzaGFrZVRpbWVvdXQpXG4gICAgICAgIHNoYWtlVGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgIGlmIChpbm5lclJlZi52YWx1ZSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgbm9kZS5jbGFzc0xpc3QucmVtb3ZlKCdxLWFuaW1hdGUtLXNjYWxlJylcbiAgICAgICAgICAgIC8vIHNvbWUgcGxhdGZvcm1zIChsaWtlIGRlc2t0b3AgQ2hyb21lKVxuICAgICAgICAgICAgLy8gcmVxdWlyZSBjYWxsaW5nIGZvY3VzKCkgYWdhaW5cbiAgICAgICAgICAgIGZvY3VzKClcbiAgICAgICAgICB9XG4gICAgICAgIH0sIDE3MClcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBvbkVzY2FwZUtleSAoKSB7XG4gICAgICBpZiAocHJvcHMuc2VhbWxlc3MgIT09IHRydWUpIHtcbiAgICAgICAgaWYgKHByb3BzLnBlcnNpc3RlbnQgPT09IHRydWUgfHwgcHJvcHMubm9Fc2NEaXNtaXNzID09PSB0cnVlKSB7XG4gICAgICAgICAgcHJvcHMubWF4aW1pemVkICE9PSB0cnVlICYmIHByb3BzLm5vU2hha2UgIT09IHRydWUgJiYgc2hha2UoKVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgIGVtaXQoJ2VzY2FwZS1rZXknKVxuICAgICAgICAgIGhpZGUoKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY2xlYW51cCAoaGlkaW5nKSB7XG4gICAgICBjbGVhclRpbWVvdXQoc2hha2VUaW1lb3V0KVxuXG4gICAgICBpZiAoaGlkaW5nID09PSB0cnVlIHx8IHNob3dpbmcudmFsdWUgPT09IHRydWUpIHtcbiAgICAgICAgdXBkYXRlTWF4aW1pemVkKGZhbHNlKVxuXG4gICAgICAgIGlmIChwcm9wcy5zZWFtbGVzcyAhPT0gdHJ1ZSkge1xuICAgICAgICAgIHByZXZlbnRCb2R5U2Nyb2xsKGZhbHNlKVxuICAgICAgICAgIHJlbW92ZUZvY3Vzb3V0KG9uRm9jdXNDaGFuZ2UpXG4gICAgICAgICAgcmVtb3ZlRXNjYXBlS2V5KG9uRXNjYXBlS2V5KVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChoaWRpbmcgIT09IHRydWUpIHtcbiAgICAgICAgcmVmb2N1c1RhcmdldCA9IG51bGxcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiB1cGRhdGVNYXhpbWl6ZWQgKGFjdGl2ZSkge1xuICAgICAgaWYgKGFjdGl2ZSA9PT0gdHJ1ZSkge1xuICAgICAgICBpZiAoaXNNYXhpbWl6ZWQgIT09IHRydWUpIHtcbiAgICAgICAgICBtYXhpbWl6ZWRNb2RhbHMgPCAxICYmIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmFkZCgncS1ib2R5LS1kaWFsb2cnKVxuICAgICAgICAgIG1heGltaXplZE1vZGFscysrXG5cbiAgICAgICAgICBpc01heGltaXplZCA9IHRydWVcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgZWxzZSBpZiAoaXNNYXhpbWl6ZWQgPT09IHRydWUpIHtcbiAgICAgICAgaWYgKG1heGltaXplZE1vZGFscyA8IDIpIHtcbiAgICAgICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5yZW1vdmUoJ3EtYm9keS0tZGlhbG9nJylcbiAgICAgICAgfVxuXG4gICAgICAgIG1heGltaXplZE1vZGFscy0tXG4gICAgICAgIGlzTWF4aW1pemVkID0gZmFsc2VcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBvbkF1dG9DbG9zZSAoZSkge1xuICAgICAgaWYgKGF2b2lkQXV0b0Nsb3NlICE9PSB0cnVlKSB7XG4gICAgICAgIGhpZGUoZSlcbiAgICAgICAgZW1pdCgnY2xpY2snLCBlKVxuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIG9uQmFja2Ryb3BDbGljayAoZSkge1xuICAgICAgaWYgKHByb3BzLnBlcnNpc3RlbnQgIT09IHRydWUgJiYgcHJvcHMubm9CYWNrZHJvcERpc21pc3MgIT09IHRydWUpIHtcbiAgICAgICAgaGlkZShlKVxuICAgICAgfVxuICAgICAgZWxzZSBpZiAocHJvcHMubm9TaGFrZSAhPT0gdHJ1ZSkge1xuICAgICAgICBzaGFrZSgpXG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gb25Gb2N1c0NoYW5nZSAoZXZ0KSB7XG4gICAgICAvLyB0aGUgZm9jdXMgaXMgbm90IGluIGEgdnVlIGNoaWxkIGNvbXBvbmVudFxuICAgICAgaWYgKFxuICAgICAgICBwb3J0YWxJc0FjY2Vzc2libGUudmFsdWUgPT09IHRydWVcbiAgICAgICAgJiYgY2hpbGRIYXNGb2N1cyhpbm5lclJlZi52YWx1ZSwgZXZ0LnRhcmdldCkgIT09IHRydWVcbiAgICAgICkge1xuICAgICAgICBmb2N1cygnW3RhYmluZGV4XTpub3QoW3RhYmluZGV4PVwiLTFcIl0pJylcbiAgICAgIH1cbiAgICB9XG5cbiAgICBPYmplY3QuYXNzaWduKHZtLnByb3h5LCB7XG4gICAgICAvLyBleHBvc2UgcHVibGljIG1ldGhvZHNcbiAgICAgIGZvY3VzLCBzaGFrZSxcblxuICAgICAgLy8gcHJpdmF0ZSBidXQgbmVlZGVkIGJ5IFFTZWxlY3RcbiAgICAgIF9fdXBkYXRlUmVmb2N1c1RhcmdldCAodGFyZ2V0KSB7XG4gICAgICAgIHJlZm9jdXNUYXJnZXQgPSB0YXJnZXQgfHwgbnVsbFxuICAgICAgfVxuICAgIH0pXG5cbiAgICBvbkJlZm9yZVVubW91bnQoY2xlYW51cClcblxuICAgIGZ1bmN0aW9uIHJlbmRlclBvcnRhbENvbnRlbnQgKCkge1xuICAgICAgcmV0dXJuIGgoJ2RpdicsIHtcbiAgICAgICAgLi4uYXR0cnMsXG4gICAgICAgIGNsYXNzOiByb290Q2xhc3Nlcy52YWx1ZVxuICAgICAgfSwgW1xuICAgICAgICBoKFRyYW5zaXRpb24sIHtcbiAgICAgICAgICBuYW1lOiAncS10cmFuc2l0aW9uLS1mYWRlJyxcbiAgICAgICAgICBhcHBlYXI6IHRydWVcbiAgICAgICAgfSwgKCkgPT4gKFxuICAgICAgICAgIHVzZUJhY2tkcm9wLnZhbHVlID09PSB0cnVlXG4gICAgICAgICAgICA/IGgoJ2RpdicsIHtcbiAgICAgICAgICAgICAgY2xhc3M6ICdxLWRpYWxvZ19fYmFja2Ryb3AgZml4ZWQtZnVsbCcsXG4gICAgICAgICAgICAgIHN0eWxlOiB0cmFuc2l0aW9uU3R5bGUudmFsdWUsXG4gICAgICAgICAgICAgICdhcmlhLWhpZGRlbic6ICd0cnVlJyxcbiAgICAgICAgICAgICAgb25Nb3VzZWRvd246IG9uQmFja2Ryb3BDbGlja1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIDogbnVsbFxuICAgICAgICApKSxcblxuICAgICAgICBoKFxuICAgICAgICAgIFRyYW5zaXRpb24sXG4gICAgICAgICAgeyBuYW1lOiB0cmFuc2l0aW9uLnZhbHVlLCBhcHBlYXI6IHRydWUgfSxcbiAgICAgICAgICAoKSA9PiAoXG4gICAgICAgICAgICBzaG93aW5nLnZhbHVlID09PSB0cnVlXG4gICAgICAgICAgICAgID8gaCgnZGl2Jywge1xuICAgICAgICAgICAgICAgIHJlZjogaW5uZXJSZWYsXG4gICAgICAgICAgICAgICAgY2xhc3M6IGNsYXNzZXMudmFsdWUsXG4gICAgICAgICAgICAgICAgc3R5bGU6IHRyYW5zaXRpb25TdHlsZS52YWx1ZSxcbiAgICAgICAgICAgICAgICB0YWJpbmRleDogLTEsXG4gICAgICAgICAgICAgICAgLi4ub25FdmVudHMudmFsdWVcbiAgICAgICAgICAgICAgfSwgaFNsb3Qoc2xvdHMuZGVmYXVsdCkpXG4gICAgICAgICAgICAgIDogbnVsbFxuICAgICAgICAgIClcbiAgICAgICAgKVxuICAgICAgXSlcbiAgICB9XG5cbiAgICByZXR1cm4gcmVuZGVyUG9ydGFsXG4gIH1cbn0pXG4iLCJpbXBvcnQgeyBjb21wdXRlZCB9IGZyb20gJ3Z1ZSdcblxuZXhwb3J0IGNvbnN0IHVzZURhcmtQcm9wcyA9IHtcbiAgZGFyazoge1xuICAgIHR5cGU6IEJvb2xlYW4sXG4gICAgZGVmYXVsdDogbnVsbFxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIChwcm9wcywgJHEpIHtcbiAgLy8gcmV0dXJuIGlzRGFya1xuICByZXR1cm4gY29tcHV0ZWQoKCkgPT4gKFxuICAgIHByb3BzLmRhcmsgPT09IG51bGxcbiAgICAgID8gJHEuZGFyay5pc0FjdGl2ZVxuICAgICAgOiBwcm9wcy5kYXJrXG4gICkpXG59XG4iLCJpbXBvcnQgeyBoLCBjb21wdXRlZCwgZ2V0Q3VycmVudEluc3RhbmNlIH0gZnJvbSAndnVlJ1xuXG5pbXBvcnQgdXNlRGFyaywgeyB1c2VEYXJrUHJvcHMgfSBmcm9tICcuLi8uLi9jb21wb3NhYmxlcy9wcml2YXRlL3VzZS1kYXJrLmpzJ1xuXG5pbXBvcnQgeyBjcmVhdGVDb21wb25lbnQgfSBmcm9tICcuLi8uLi91dGlscy9wcml2YXRlL2NyZWF0ZS5qcydcbmltcG9ydCB7IGhTbG90IH0gZnJvbSAnLi4vLi4vdXRpbHMvcHJpdmF0ZS9yZW5kZXIuanMnXG5cbmV4cG9ydCBkZWZhdWx0IGNyZWF0ZUNvbXBvbmVudCh7XG4gIG5hbWU6ICdRQ2FyZCcsXG5cbiAgcHJvcHM6IHtcbiAgICAuLi51c2VEYXJrUHJvcHMsXG5cbiAgICB0YWc6IHtcbiAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgIGRlZmF1bHQ6ICdkaXYnXG4gICAgfSxcblxuICAgIHNxdWFyZTogQm9vbGVhbixcbiAgICBmbGF0OiBCb29sZWFuLFxuICAgIGJvcmRlcmVkOiBCb29sZWFuXG4gIH0sXG5cbiAgc2V0dXAgKHByb3BzLCB7IHNsb3RzIH0pIHtcbiAgICBjb25zdCB2bSA9IGdldEN1cnJlbnRJbnN0YW5jZSgpXG4gICAgY29uc3QgaXNEYXJrID0gdXNlRGFyayhwcm9wcywgdm0ucHJveHkuJHEpXG5cbiAgICBjb25zdCBjbGFzc2VzID0gY29tcHV0ZWQoKCkgPT5cbiAgICAgICdxLWNhcmQnXG4gICAgICArIChpc0RhcmsudmFsdWUgPT09IHRydWUgPyAnIHEtY2FyZC0tZGFyayBxLWRhcmsnIDogJycpXG4gICAgICArIChwcm9wcy5ib3JkZXJlZCA9PT0gdHJ1ZSA/ICcgcS1jYXJkLS1ib3JkZXJlZCcgOiAnJylcbiAgICAgICsgKHByb3BzLnNxdWFyZSA9PT0gdHJ1ZSA/ICcgcS1jYXJkLS1zcXVhcmUgbm8tYm9yZGVyLXJhZGl1cycgOiAnJylcbiAgICAgICsgKHByb3BzLmZsYXQgPT09IHRydWUgPyAnIHEtY2FyZC0tZmxhdCBuby1zaGFkb3cnIDogJycpXG4gICAgKVxuXG4gICAgcmV0dXJuICgpID0+IGgocHJvcHMudGFnLCB7IGNsYXNzOiBjbGFzc2VzLnZhbHVlIH0sIGhTbG90KHNsb3RzLmRlZmF1bHQpKVxuICB9XG59KVxuIiwiaW1wb3J0IHsgaCwgY29tcHV0ZWQgfSBmcm9tICd2dWUnXG5cbmltcG9ydCB7IGNyZWF0ZUNvbXBvbmVudCB9IGZyb20gJy4uLy4uL3V0aWxzL3ByaXZhdGUvY3JlYXRlLmpzJ1xuaW1wb3J0IHsgaFNsb3QgfSBmcm9tICcuLi8uLi91dGlscy9wcml2YXRlL3JlbmRlci5qcydcblxuZXhwb3J0IGRlZmF1bHQgY3JlYXRlQ29tcG9uZW50KHtcbiAgbmFtZTogJ1FDYXJkU2VjdGlvbicsXG5cbiAgcHJvcHM6IHtcbiAgICB0YWc6IHtcbiAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgIGRlZmF1bHQ6ICdkaXYnXG4gICAgfSxcblxuICAgIGhvcml6b250YWw6IEJvb2xlYW5cbiAgfSxcblxuICBzZXR1cCAocHJvcHMsIHsgc2xvdHMgfSkge1xuICAgIGNvbnN0IGNsYXNzZXMgPSBjb21wdXRlZCgoKSA9PlxuICAgICAgJ3EtY2FyZF9fc2VjdGlvbidcbiAgICAgICsgYCBxLWNhcmRfX3NlY3Rpb24tLSR7IHByb3BzLmhvcml6b250YWwgPT09IHRydWUgPyAnaG9yaXogcm93IG5vLXdyYXAnIDogJ3ZlcnQnIH1gXG4gICAgKVxuXG4gICAgcmV0dXJuICgpID0+IGgocHJvcHMudGFnLCB7IGNsYXNzOiBjbGFzc2VzLnZhbHVlIH0sIGhTbG90KHNsb3RzLmRlZmF1bHQpKVxuICB9XG59KVxuIiwiaW1wb3J0IHsgaCwgY29tcHV0ZWQgfSBmcm9tICd2dWUnXG5cbmltcG9ydCB1c2VBbGlnbiwgeyB1c2VBbGlnblByb3BzIH0gZnJvbSAnLi4vLi4vY29tcG9zYWJsZXMvcHJpdmF0ZS91c2UtYWxpZ24uanMnXG5cbmltcG9ydCB7IGNyZWF0ZUNvbXBvbmVudCB9IGZyb20gJy4uLy4uL3V0aWxzL3ByaXZhdGUvY3JlYXRlLmpzJ1xuaW1wb3J0IHsgaFNsb3QgfSBmcm9tICcuLi8uLi91dGlscy9wcml2YXRlL3JlbmRlci5qcydcblxuZXhwb3J0IGRlZmF1bHQgY3JlYXRlQ29tcG9uZW50KHtcbiAgbmFtZTogJ1FDYXJkQWN0aW9ucycsXG5cbiAgcHJvcHM6IHtcbiAgICAuLi51c2VBbGlnblByb3BzLFxuICAgIHZlcnRpY2FsOiBCb29sZWFuXG4gIH0sXG5cbiAgc2V0dXAgKHByb3BzLCB7IHNsb3RzIH0pIHtcbiAgICBjb25zdCBhbGlnbkNsYXNzID0gdXNlQWxpZ24ocHJvcHMpXG5cbiAgICBjb25zdCBjbGFzc2VzID0gY29tcHV0ZWQoKCkgPT5cbiAgICAgIGBxLWNhcmRfX2FjdGlvbnMgJHsgYWxpZ25DbGFzcy52YWx1ZSB9YFxuICAgICAgKyBgIHEtY2FyZF9fYWN0aW9ucy0tJHsgcHJvcHMudmVydGljYWwgPT09IHRydWUgPyAndmVydCBjb2x1bW4nIDogJ2hvcml6IHJvdycgfWBcbiAgICApXG5cbiAgICByZXR1cm4gKCkgPT4gaCgnZGl2JywgeyBjbGFzczogY2xhc3Nlcy52YWx1ZSB9LCBoU2xvdChzbG90cy5kZWZhdWx0KSlcbiAgfVxufSlcbiIsImltcG9ydCB7IGgsIGNvbXB1dGVkLCBnZXRDdXJyZW50SW5zdGFuY2UgfSBmcm9tICd2dWUnXG5cbmltcG9ydCB1c2VEYXJrLCB7IHVzZURhcmtQcm9wcyB9IGZyb20gJy4uLy4uL2NvbXBvc2FibGVzL3ByaXZhdGUvdXNlLWRhcmsuanMnXG5cbmltcG9ydCB7IGNyZWF0ZUNvbXBvbmVudCB9IGZyb20gJy4uLy4uL3V0aWxzL3ByaXZhdGUvY3JlYXRlLmpzJ1xuXG5jb25zdCBpbnNldE1hcCA9IHtcbiAgdHJ1ZTogJ2luc2V0JyxcbiAgaXRlbTogJ2l0ZW0taW5zZXQnLFxuICAnaXRlbS10aHVtYm5haWwnOiAnaXRlbS10aHVtYm5haWwtaW5zZXQnXG59XG5cbmV4cG9ydCBjb25zdCBtYXJnaW5zID0ge1xuICB4czogMixcbiAgc206IDQsXG4gIG1kOiA4LFxuICBsZzogMTYsXG4gIHhsOiAyNFxufVxuXG5leHBvcnQgZGVmYXVsdCBjcmVhdGVDb21wb25lbnQoe1xuICBuYW1lOiAnUVNlcGFyYXRvcicsXG5cbiAgcHJvcHM6IHtcbiAgICAuLi51c2VEYXJrUHJvcHMsXG5cbiAgICBzcGFjZWQ6IFsgQm9vbGVhbiwgU3RyaW5nIF0sXG4gICAgaW5zZXQ6IFsgQm9vbGVhbiwgU3RyaW5nIF0sXG4gICAgdmVydGljYWw6IEJvb2xlYW4sXG4gICAgY29sb3I6IFN0cmluZyxcbiAgICBzaXplOiBTdHJpbmdcbiAgfSxcblxuICBzZXR1cCAocHJvcHMpIHtcbiAgICBjb25zdCB2bSA9IGdldEN1cnJlbnRJbnN0YW5jZSgpXG4gICAgY29uc3QgaXNEYXJrID0gdXNlRGFyayhwcm9wcywgdm0ucHJveHkuJHEpXG5cbiAgICBjb25zdCBvcmllbnRhdGlvbiA9IGNvbXB1dGVkKCgpID0+IChcbiAgICAgIHByb3BzLnZlcnRpY2FsID09PSB0cnVlXG4gICAgICAgID8gJ3ZlcnRpY2FsJ1xuICAgICAgICA6ICdob3Jpem9udGFsJ1xuICAgICkpXG5cbiAgICBjb25zdCBvcmllbnRDbGFzcyA9IGNvbXB1dGVkKCgpID0+IGAgcS1zZXBhcmF0b3ItLSR7IG9yaWVudGF0aW9uLnZhbHVlIH1gKVxuXG4gICAgY29uc3QgaW5zZXRDbGFzcyA9IGNvbXB1dGVkKCgpID0+IChcbiAgICAgIHByb3BzLmluc2V0ICE9PSBmYWxzZVxuICAgICAgICA/IGAkeyBvcmllbnRDbGFzcy52YWx1ZSB9LSR7IGluc2V0TWFwWyBwcm9wcy5pbnNldCBdIH1gXG4gICAgICAgIDogJydcbiAgICApKVxuXG4gICAgY29uc3QgY2xhc3NlcyA9IGNvbXB1dGVkKCgpID0+XG4gICAgICBgcS1zZXBhcmF0b3IkeyBvcmllbnRDbGFzcy52YWx1ZSB9JHsgaW5zZXRDbGFzcy52YWx1ZSB9YFxuICAgICAgKyAocHJvcHMuY29sb3IgIT09IHZvaWQgMCA/IGAgYmctJHsgcHJvcHMuY29sb3IgfWAgOiAnJylcbiAgICAgICsgKGlzRGFyay52YWx1ZSA9PT0gdHJ1ZSA/ICcgcS1zZXBhcmF0b3ItLWRhcmsnIDogJycpXG4gICAgKVxuXG4gICAgY29uc3Qgc3R5bGUgPSBjb21wdXRlZCgoKSA9PiB7XG4gICAgICBjb25zdCBhY2MgPSB7fVxuXG4gICAgICBpZiAocHJvcHMuc2l6ZSAhPT0gdm9pZCAwKSB7XG4gICAgICAgIGFjY1sgcHJvcHMudmVydGljYWwgPT09IHRydWUgPyAnd2lkdGgnIDogJ2hlaWdodCcgXSA9IHByb3BzLnNpemVcbiAgICAgIH1cblxuICAgICAgaWYgKHByb3BzLnNwYWNlZCAhPT0gZmFsc2UpIHtcbiAgICAgICAgY29uc3Qgc2l6ZSA9IHByb3BzLnNwYWNlZCA9PT0gdHJ1ZVxuICAgICAgICAgID8gYCR7IG1hcmdpbnMubWQgfXB4YFxuICAgICAgICAgIDogcHJvcHMuc3BhY2VkIGluIG1hcmdpbnMgPyBgJHsgbWFyZ2luc1sgcHJvcHMuc3BhY2VkIF0gfXB4YCA6IHByb3BzLnNwYWNlZFxuXG4gICAgICAgIGNvbnN0IGRpciA9IHByb3BzLnZlcnRpY2FsID09PSB0cnVlXG4gICAgICAgICAgPyBbICdMZWZ0JywgJ1JpZ2h0JyBdXG4gICAgICAgICAgOiBbICdUb3AnLCAnQm90dG9tJyBdXG5cbiAgICAgICAgYWNjWyBgbWFyZ2luJHsgZGlyWyAwIF0gfWAgXSA9IGFjY1sgYG1hcmdpbiR7IGRpclsgMSBdIH1gIF0gPSBzaXplXG4gICAgICB9XG5cbiAgICAgIHJldHVybiBhY2NcbiAgICB9KVxuXG4gICAgcmV0dXJuICgpID0+IGgoJ2hyJywge1xuICAgICAgY2xhc3M6IGNsYXNzZXMudmFsdWUsXG4gICAgICBzdHlsZTogc3R5bGUudmFsdWUsXG4gICAgICAnYXJpYS1vcmllbnRhdGlvbic6IG9yaWVudGF0aW9uLnZhbHVlXG4gICAgfSlcbiAgfVxufSlcbiIsImltcG9ydCB7IGluamVjdCwgd2F0Y2gsIG9uQmVmb3JlVW5tb3VudCwgZ2V0Q3VycmVudEluc3RhbmNlIH0gZnJvbSAndnVlJ1xuXG5pbXBvcnQgeyBmb3JtS2V5IH0gZnJvbSAnLi4vdXRpbHMvcHJpdmF0ZS9zeW1ib2xzLmpzJ1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiAoeyB2YWxpZGF0ZSwgcmVzZXRWYWxpZGF0aW9uLCByZXF1aXJlc1FGb3JtIH0pIHtcbiAgY29uc3QgJGZvcm0gPSBpbmplY3QoZm9ybUtleSwgZmFsc2UpXG5cbiAgaWYgKCRmb3JtICE9PSBmYWxzZSkge1xuICAgIGNvbnN0IHsgcHJvcHMsIHByb3h5IH0gPSBnZXRDdXJyZW50SW5zdGFuY2UoKVxuXG4gICAgLy8gZXhwb3J0IHB1YmxpYyBtZXRob2QgKHNvIGl0IGNhbiBiZSB1c2VkIGluIFFGb3JtKVxuICAgIE9iamVjdC5hc3NpZ24ocHJveHksIHsgdmFsaWRhdGUsIHJlc2V0VmFsaWRhdGlvbiB9KVxuXG4gICAgd2F0Y2goKCkgPT4gcHJvcHMuZGlzYWJsZSwgdmFsID0+IHtcbiAgICAgIGlmICh2YWwgPT09IHRydWUpIHtcbiAgICAgICAgdHlwZW9mIHJlc2V0VmFsaWRhdGlvbiA9PT0gJ2Z1bmN0aW9uJyAmJiByZXNldFZhbGlkYXRpb24oKVxuICAgICAgICAkZm9ybS51bmJpbmRDb21wb25lbnQocHJveHkpXG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgJGZvcm0uYmluZENvbXBvbmVudChwcm94eSlcbiAgICAgIH1cbiAgICB9KVxuXG4gICAgLy8gcmVnaXN0ZXIgY29tcG9uZW50IHRvIHBhcmVudCBRRm9ybVxuICAgIHByb3BzLmRpc2FibGUgIT09IHRydWUgJiYgJGZvcm0uYmluZENvbXBvbmVudChwcm94eSlcblxuICAgIG9uQmVmb3JlVW5tb3VudCgoKSA9PiB7XG4gICAgICAvLyB1bnJlZ2lzdGVyIGNvbXBvbmVudFxuICAgICAgcHJvcHMuZGlzYWJsZSAhPT0gdHJ1ZSAmJiAkZm9ybS51bmJpbmRDb21wb25lbnQocHJveHkpXG4gICAgfSlcbiAgfVxuICBlbHNlIGlmIChyZXF1aXJlc1FGb3JtID09PSB0cnVlKSB7XG4gICAgY29uc29sZS5lcnJvcignUGFyZW50IFFGb3JtIG5vdCBmb3VuZCBvbiB1c2VGb3JtQ2hpbGQoKSEnKVxuICB9XG59XG4iLCIvLyBmaWxlIHJlZmVyZW5jZWQgZnJvbSBkb2NzXG5cbmNvbnN0XG4gIGhleCA9IC9eI1swLTlhLWZBLUZdezN9KFswLTlhLWZBLUZdezN9KT8kLyxcbiAgaGV4YSA9IC9eI1swLTlhLWZBLUZdezR9KFswLTlhLWZBLUZdezR9KT8kLyxcbiAgaGV4T3JIZXhhID0gL14jKFswLTlhLWZBLUZdezN9fFswLTlhLWZBLUZdezR9fFswLTlhLWZBLUZdezZ9fFswLTlhLWZBLUZdezh9KSQvLFxuICByZ2IgPSAvXnJnYlxcKCgoMHxbMS05XVtcXGRdP3wxW1xcZF17MCwyfXwyW1xcZF0/fDJbMC00XVtcXGRdfDI1WzAtNV0pLCl7Mn0oMHxbMS05XVtcXGRdP3wxW1xcZF17MCwyfXwyW1xcZF0/fDJbMC00XVtcXGRdfDI1WzAtNV0pXFwpJC8sXG4gIHJnYmEgPSAvXnJnYmFcXCgoKDB8WzEtOV1bXFxkXT98MVtcXGRdezAsMn18MltcXGRdP3wyWzAtNF1bXFxkXXwyNVswLTVdKSwpezJ9KDB8WzEtOV1bXFxkXT98MVtcXGRdezAsMn18MltcXGRdP3wyWzAtNF1bXFxkXXwyNVswLTVdKSwoMHwwXFwuWzAtOV0rWzEtOV18MFxcLlsxLTldK3wxKVxcKSQvXG5cbi8vIEtlZXAgaW4gc3luYyB3aXRoIHVpL3R5cGVzL2FwaS92YWxpZGF0aW9uLmQudHNcbmV4cG9ydCBjb25zdCB0ZXN0UGF0dGVybiA9IHtcbiAgZGF0ZTogdiA9PiAvXi0/W1xcZF0rXFwvWzAtMV1cXGRcXC9bMC0zXVxcZCQvLnRlc3QodiksXG4gIHRpbWU6IHYgPT4gL14oWzAtMV0/XFxkfDJbMC0zXSk6WzAtNV1cXGQkLy50ZXN0KHYpLFxuICBmdWxsdGltZTogdiA9PiAvXihbMC0xXT9cXGR8MlswLTNdKTpbMC01XVxcZDpbMC01XVxcZCQvLnRlc3QodiksXG4gIHRpbWVPckZ1bGx0aW1lOiB2ID0+IC9eKFswLTFdP1xcZHwyWzAtM10pOlswLTVdXFxkKDpbMC01XVxcZCk/JC8udGVzdCh2KSxcblxuICAvLyAtLSBSRkMgNTMyMiAtLVxuICAvLyAtLSBBZGRlZCBpbiB2Mi42LjYgLS1cbiAgLy8gVGhpcyBpcyBhIGJhc2ljIGhlbHBlciB2YWxpZGF0aW9uLlxuICAvLyBGb3Igc29tZXRoaW5nIG1vcmUgY29tcGxleCAobGlrZSBSRkMgODIyKSB5b3Ugc2hvdWxkIHdyaXRlIGFuZCB1c2UgeW91ciBvd24gcnVsZS5cbiAgLy8gV2Ugd29uJ3QgYmUgYWNjZXB0aW5nIFBScyB0byBlbmhhbmNlIHRoZSBvbmUgYmVsb3cgYmVjYXVzZSBvZiB0aGUgcmVhc29uIGFib3ZlLlxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmVcbiAgZW1haWw6IHYgPT4gL14oKFtePD4oKVxcW1xcXVxcXFwuLDs6XFxzQFwiXSsoXFwuW148PigpXFxbXFxdXFxcXC4sOzpcXHNAXCJdKykqKXwoXCIuK1wiKSlAKChcXFtbMC05XXsxLDN9XFwuWzAtOV17MSwzfVxcLlswLTldezEsM31cXC5bMC05XXsxLDN9XSl8KChbYS16QS1aXFwtMC05XStcXC4pK1thLXpBLVpdezIsfSkpJC8udGVzdCh2KSxcblxuICBoZXhDb2xvcjogdiA9PiBoZXgudGVzdCh2KSxcbiAgaGV4YUNvbG9yOiB2ID0+IGhleGEudGVzdCh2KSxcbiAgaGV4T3JIZXhhQ29sb3I6IHYgPT4gaGV4T3JIZXhhLnRlc3QodiksXG5cbiAgcmdiQ29sb3I6IHYgPT4gcmdiLnRlc3QodiksXG4gIHJnYmFDb2xvcjogdiA9PiByZ2JhLnRlc3QodiksXG4gIHJnYk9yUmdiYUNvbG9yOiB2ID0+IHJnYi50ZXN0KHYpIHx8IHJnYmEudGVzdCh2KSxcblxuICBoZXhPclJnYkNvbG9yOiB2ID0+IGhleC50ZXN0KHYpIHx8IHJnYi50ZXN0KHYpLFxuICBoZXhhT3JSZ2JhQ29sb3I6IHYgPT4gaGV4YS50ZXN0KHYpIHx8IHJnYmEudGVzdCh2KSxcbiAgYW55Q29sb3I6IHYgPT4gaGV4T3JIZXhhLnRlc3QodikgfHwgcmdiLnRlc3QodikgfHwgcmdiYS50ZXN0KHYpXG59XG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgdGVzdFBhdHRlcm5cbn1cbiIsImNvbnN0XG4gIHRvU3RyaW5nID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZyxcbiAgaGFzT3duID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eSxcbiAgY2xhc3MydHlwZSA9IHt9XG5cbidCb29sZWFuIE51bWJlciBTdHJpbmcgRnVuY3Rpb24gQXJyYXkgRGF0ZSBSZWdFeHAgT2JqZWN0Jy5zcGxpdCgnICcpLmZvckVhY2gobmFtZSA9PiB7XG4gIGNsYXNzMnR5cGVbICdbb2JqZWN0ICcgKyBuYW1lICsgJ10nIF0gPSBuYW1lLnRvTG93ZXJDYXNlKClcbn0pXG5cbmZ1bmN0aW9uIHR5cGUgKG9iaikge1xuICByZXR1cm4gb2JqID09PSBudWxsID8gU3RyaW5nKG9iaikgOiBjbGFzczJ0eXBlWyB0b1N0cmluZy5jYWxsKG9iaikgXSB8fCAnb2JqZWN0J1xufVxuXG5mdW5jdGlvbiBpc1BsYWluT2JqZWN0IChvYmopIHtcbiAgaWYgKCFvYmogfHwgdHlwZShvYmopICE9PSAnb2JqZWN0Jykge1xuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgaWYgKG9iai5jb25zdHJ1Y3RvclxuICAgICYmICFoYXNPd24uY2FsbChvYmosICdjb25zdHJ1Y3RvcicpXG4gICAgJiYgIWhhc093bi5jYWxsKG9iai5jb25zdHJ1Y3Rvci5wcm90b3R5cGUsICdpc1Byb3RvdHlwZU9mJykpIHtcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIGxldCBrZXlcbiAgZm9yIChrZXkgaW4gb2JqKSB7fSAvLyBlc2xpbnQtZGlzYWJsZS1saW5lXG5cbiAgcmV0dXJuIGtleSA9PT0gdm9pZCAwIHx8IGhhc093bi5jYWxsKG9iaiwga2V5KVxufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBleHRlbmQgKCkge1xuICBsZXRcbiAgICBvcHRpb25zLCBuYW1lLCBzcmMsIGNvcHksIGNvcHlJc0FycmF5LCBjbG9uZSxcbiAgICB0YXJnZXQgPSBhcmd1bWVudHNbIDAgXSB8fCB7fSxcbiAgICBpID0gMSxcbiAgICBkZWVwID0gZmFsc2VcbiAgY29uc3QgbGVuZ3RoID0gYXJndW1lbnRzLmxlbmd0aFxuXG4gIGlmICh0eXBlb2YgdGFyZ2V0ID09PSAnYm9vbGVhbicpIHtcbiAgICBkZWVwID0gdGFyZ2V0XG4gICAgdGFyZ2V0ID0gYXJndW1lbnRzWyAxIF0gfHwge31cbiAgICBpID0gMlxuICB9XG5cbiAgaWYgKE9iamVjdCh0YXJnZXQpICE9PSB0YXJnZXQgJiYgdHlwZSh0YXJnZXQpICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgdGFyZ2V0ID0ge31cbiAgfVxuXG4gIGlmIChsZW5ndGggPT09IGkpIHtcbiAgICB0YXJnZXQgPSB0aGlzXG4gICAgaS0tXG4gIH1cblxuICBmb3IgKDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgaWYgKChvcHRpb25zID0gYXJndW1lbnRzWyBpIF0pICE9PSBudWxsKSB7XG4gICAgICBmb3IgKG5hbWUgaW4gb3B0aW9ucykge1xuICAgICAgICBzcmMgPSB0YXJnZXRbIG5hbWUgXVxuICAgICAgICBjb3B5ID0gb3B0aW9uc1sgbmFtZSBdXG5cbiAgICAgICAgaWYgKHRhcmdldCA9PT0gY29weSkge1xuICAgICAgICAgIGNvbnRpbnVlXG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZGVlcCAmJiBjb3B5ICYmIChpc1BsYWluT2JqZWN0KGNvcHkpIHx8IChjb3B5SXNBcnJheSA9IHR5cGUoY29weSkgPT09ICdhcnJheScpKSkge1xuICAgICAgICAgIGlmIChjb3B5SXNBcnJheSkge1xuICAgICAgICAgICAgY29weUlzQXJyYXkgPSBmYWxzZVxuICAgICAgICAgICAgY2xvbmUgPSBzcmMgJiYgdHlwZShzcmMpID09PSAnYXJyYXknID8gc3JjIDogW11cbiAgICAgICAgICB9XG4gICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjbG9uZSA9IHNyYyAmJiBpc1BsYWluT2JqZWN0KHNyYykgPyBzcmMgOiB7fVxuICAgICAgICAgIH1cblxuICAgICAgICAgIHRhcmdldFsgbmFtZSBdID0gZXh0ZW5kKGRlZXAsIGNsb25lLCBjb3B5KVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGNvcHkgIT09IHZvaWQgMCkge1xuICAgICAgICAgIHRhcmdldFsgbmFtZSBdID0gY29weVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHRhcmdldFxufVxuIiwiaW1wb3J0IHsgdXNlU2l6ZVByb3BzIH0gZnJvbSAnLi4vLi4vY29tcG9zYWJsZXMvcHJpdmF0ZS91c2Utc2l6ZS5qcydcblxuLy8gYWxzbyB1c2VkIGJ5IFFLbm9iXG5leHBvcnQgY29uc3QgdXNlQ2lyY3VsYXJDb21tb25Qcm9wcyA9IHtcbiAgLi4udXNlU2l6ZVByb3BzLFxuXG4gIG1pbjoge1xuICAgIHR5cGU6IE51bWJlcixcbiAgICBkZWZhdWx0OiAwXG4gIH0sXG4gIG1heDoge1xuICAgIHR5cGU6IE51bWJlcixcbiAgICBkZWZhdWx0OiAxMDBcbiAgfSxcblxuICBjb2xvcjogU3RyaW5nLFxuICBjZW50ZXJDb2xvcjogU3RyaW5nLFxuICB0cmFja0NvbG9yOiBTdHJpbmcsXG5cbiAgZm9udFNpemU6IFN0cmluZyxcblxuICAvLyByYXRpb1xuICB0aGlja25lc3M6IHtcbiAgICB0eXBlOiBOdW1iZXIsXG4gICAgZGVmYXVsdDogMC4yLFxuICAgIHZhbGlkYXRvcjogdiA9PiB2ID49IDAgJiYgdiA8PSAxXG4gIH0sXG5cbiAgYW5nbGU6IHtcbiAgICB0eXBlOiBOdW1iZXIsXG4gICAgZGVmYXVsdDogMFxuICB9LFxuXG4gIHNob3dWYWx1ZTogQm9vbGVhbixcbiAgcmV2ZXJzZTogQm9vbGVhbixcblxuICBpbnN0YW50RmVlZGJhY2s6IEJvb2xlYW5cbn1cbiIsImNvbnN0IHVuaXRzID0gWyAnQicsICdLQicsICdNQicsICdHQicsICdUQicsICdQQicgXVxuXG5leHBvcnQgZnVuY3Rpb24gaHVtYW5TdG9yYWdlU2l6ZSAoYnl0ZXMpIHtcbiAgbGV0IHUgPSAwXG5cbiAgd2hpbGUgKHBhcnNlSW50KGJ5dGVzLCAxMCkgPj0gMTAyNCAmJiB1IDwgdW5pdHMubGVuZ3RoIC0gMSkge1xuICAgIGJ5dGVzIC89IDEwMjRcbiAgICArK3VcbiAgfVxuXG4gIHJldHVybiBgJHsgYnl0ZXMudG9GaXhlZCgxKSB9JHsgdW5pdHNbIHUgXSB9YFxufVxuXG5leHBvcnQgZnVuY3Rpb24gY2FwaXRhbGl6ZSAoc3RyKSB7XG4gIHJldHVybiBzdHIuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBzdHIuc2xpY2UoMSlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGJldHdlZW4gKHYsIG1pbiwgbWF4KSB7XG4gIHJldHVybiBtYXggPD0gbWluXG4gICAgPyBtaW5cbiAgICA6IE1hdGgubWluKG1heCwgTWF0aC5tYXgobWluLCB2KSlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIG5vcm1hbGl6ZVRvSW50ZXJ2YWwgKHYsIG1pbiwgbWF4KSB7XG4gIGlmIChtYXggPD0gbWluKSB7XG4gICAgcmV0dXJuIG1pblxuICB9XG5cbiAgY29uc3Qgc2l6ZSA9IChtYXggLSBtaW4gKyAxKVxuXG4gIGxldCBpbmRleCA9IG1pbiArICh2IC0gbWluKSAlIHNpemVcbiAgaWYgKGluZGV4IDwgbWluKSB7XG4gICAgaW5kZXggPSBzaXplICsgaW5kZXhcbiAgfVxuXG4gIHJldHVybiBpbmRleCA9PT0gMCA/IDAgOiBpbmRleCAvLyBmaXggZm9yICgtYSAlIGEpID0+IC0wXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBwYWQgKHYsIGxlbmd0aCA9IDIsIGNoYXIgPSAnMCcpIHtcbiAgaWYgKHYgPT09IHZvaWQgMCB8fCB2ID09PSBudWxsKSB7XG4gICAgcmV0dXJuIHZcbiAgfVxuXG4gIGNvbnN0IHZhbCA9ICcnICsgdlxuICByZXR1cm4gdmFsLmxlbmd0aCA+PSBsZW5ndGhcbiAgICA/IHZhbFxuICAgIDogbmV3IEFycmF5KGxlbmd0aCAtIHZhbC5sZW5ndGggKyAxKS5qb2luKGNoYXIpICsgdmFsXG59XG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgaHVtYW5TdG9yYWdlU2l6ZSxcbiAgY2FwaXRhbGl6ZSxcbiAgYmV0d2VlbixcbiAgbm9ybWFsaXplVG9JbnRlcnZhbCxcbiAgcGFkXG59XG4iLCJpbXBvcnQgeyBoLCBjb21wdXRlZCwgZ2V0Q3VycmVudEluc3RhbmNlIH0gZnJvbSAndnVlJ1xuXG5pbXBvcnQgdXNlU2l6ZSBmcm9tICcuLi8uLi9jb21wb3NhYmxlcy9wcml2YXRlL3VzZS1zaXplLmpzJ1xuaW1wb3J0IHsgdXNlQ2lyY3VsYXJDb21tb25Qcm9wcyB9IGZyb20gJy4vdXNlLWNpcmN1bGFyLXByb2dyZXNzLmpzJ1xuXG5pbXBvcnQgeyBjcmVhdGVDb21wb25lbnQgfSBmcm9tICcuLi8uLi91dGlscy9wcml2YXRlL2NyZWF0ZS5qcydcbmltcG9ydCB7IGhNZXJnZVNsb3RTYWZlbHkgfSBmcm9tICcuLi8uLi91dGlscy9wcml2YXRlL3JlbmRlci5qcydcbmltcG9ydCB7IGJldHdlZW4gfSBmcm9tICcuLi8uLi91dGlscy9mb3JtYXQuanMnXG5cbmNvbnN0XG4gIHJhZGl1cyA9IDUwLFxuICBkaWFtZXRlciA9IDIgKiByYWRpdXMsXG4gIGNpcmN1bWZlcmVuY2UgPSBkaWFtZXRlciAqIE1hdGguUEksXG4gIHN0cm9rZURhc2hBcnJheSA9IE1hdGgucm91bmQoY2lyY3VtZmVyZW5jZSAqIDEwMDApIC8gMTAwMFxuXG5leHBvcnQgZGVmYXVsdCBjcmVhdGVDb21wb25lbnQoe1xuICBuYW1lOiAnUUNpcmN1bGFyUHJvZ3Jlc3MnLFxuXG4gIHByb3BzOiB7XG4gICAgLi4udXNlQ2lyY3VsYXJDb21tb25Qcm9wcyxcblxuICAgIHZhbHVlOiB7XG4gICAgICB0eXBlOiBOdW1iZXIsXG4gICAgICBkZWZhdWx0OiAwXG4gICAgfSxcblxuICAgIGFuaW1hdGlvblNwZWVkOiB7XG4gICAgICB0eXBlOiBbIFN0cmluZywgTnVtYmVyIF0sXG4gICAgICBkZWZhdWx0OiA2MDBcbiAgICB9LFxuXG4gICAgaW5kZXRlcm1pbmF0ZTogQm9vbGVhblxuICB9LFxuXG4gIHNldHVwIChwcm9wcywgeyBzbG90cyB9KSB7XG4gICAgY29uc3QgeyBwcm94eTogeyAkcSB9IH0gPSBnZXRDdXJyZW50SW5zdGFuY2UoKVxuICAgIGNvbnN0IHNpemVTdHlsZSA9IHVzZVNpemUocHJvcHMpXG5cbiAgICBjb25zdCBzdmdTdHlsZSA9IGNvbXB1dGVkKCgpID0+IHtcbiAgICAgIGNvbnN0IGFuZ2xlID0gKCRxLmxhbmcucnRsID09PSB0cnVlID8gLTEgOiAxKSAqIHByb3BzLmFuZ2xlXG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIHRyYW5zZm9ybTogcHJvcHMucmV2ZXJzZSAhPT0gKCRxLmxhbmcucnRsID09PSB0cnVlKVxuICAgICAgICAgID8gYHNjYWxlM2QoLTEsIDEsIDEpIHJvdGF0ZTNkKDAsIDAsIDEsICR7IC05MCAtIGFuZ2xlIH1kZWcpYFxuICAgICAgICAgIDogYHJvdGF0ZTNkKDAsIDAsIDEsICR7IGFuZ2xlIC0gOTAgfWRlZylgXG4gICAgICB9XG4gICAgfSlcblxuICAgIGNvbnN0IGNpcmNsZVN0eWxlID0gY29tcHV0ZWQoKCkgPT4gKFxuICAgICAgcHJvcHMuaW5zdGFudEZlZWRiYWNrICE9PSB0cnVlICYmIHByb3BzLmluZGV0ZXJtaW5hdGUgIT09IHRydWVcbiAgICAgICAgPyB7IHRyYW5zaXRpb246IGBzdHJva2UtZGFzaG9mZnNldCAkeyBwcm9wcy5hbmltYXRpb25TcGVlZCB9bXMgZWFzZSAwcywgc3Ryb2tlICR7IHByb3BzLmFuaW1hdGlvblNwZWVkIH1tcyBlYXNlYCB9XG4gICAgICAgIDogJydcbiAgICApKVxuXG4gICAgY29uc3Qgdmlld0JveCA9IGNvbXB1dGVkKCgpID0+IGRpYW1ldGVyIC8gKDEgLSBwcm9wcy50aGlja25lc3MgLyAyKSlcblxuICAgIGNvbnN0IHZpZXdCb3hBdHRyID0gY29tcHV0ZWQoKCkgPT5cbiAgICAgIGAkeyB2aWV3Qm94LnZhbHVlIC8gMiB9ICR7IHZpZXdCb3gudmFsdWUgLyAyIH0gJHsgdmlld0JveC52YWx1ZSB9ICR7IHZpZXdCb3gudmFsdWUgfWBcbiAgICApXG5cbiAgICBjb25zdCBub3JtYWxpemVkID0gY29tcHV0ZWQoKCkgPT4gYmV0d2Vlbihwcm9wcy52YWx1ZSwgcHJvcHMubWluLCBwcm9wcy5tYXgpKVxuXG4gICAgY29uc3Qgc3Ryb2tlRGFzaE9mZnNldCA9IGNvbXB1dGVkKCgpID0+IGNpcmN1bWZlcmVuY2UgKiAoXG4gICAgICAxIC0gKG5vcm1hbGl6ZWQudmFsdWUgLSBwcm9wcy5taW4pIC8gKHByb3BzLm1heCAtIHByb3BzLm1pbilcbiAgICApKVxuXG4gICAgY29uc3Qgc3Ryb2tlV2lkdGggPSBjb21wdXRlZCgoKSA9PiBwcm9wcy50aGlja25lc3MgLyAyICogdmlld0JveC52YWx1ZSlcblxuICAgIGZ1bmN0aW9uIGdldENpcmNsZSAoeyB0aGlja25lc3MsIG9mZnNldCwgY29sb3IsIGNscyB9KSB7XG4gICAgICByZXR1cm4gaCgnY2lyY2xlJywge1xuICAgICAgICBjbGFzczogJ3EtY2lyY3VsYXItcHJvZ3Jlc3NfXycgKyBjbHMgKyAoY29sb3IgIT09IHZvaWQgMCA/IGAgdGV4dC0keyBjb2xvciB9YCA6ICcnKSxcbiAgICAgICAgc3R5bGU6IGNpcmNsZVN0eWxlLnZhbHVlLFxuICAgICAgICBmaWxsOiAndHJhbnNwYXJlbnQnLFxuICAgICAgICBzdHJva2U6ICdjdXJyZW50Q29sb3InLFxuICAgICAgICAnc3Ryb2tlLXdpZHRoJzogdGhpY2tuZXNzLFxuICAgICAgICAnc3Ryb2tlLWRhc2hhcnJheSc6IHN0cm9rZURhc2hBcnJheSxcbiAgICAgICAgJ3N0cm9rZS1kYXNob2Zmc2V0Jzogb2Zmc2V0LFxuICAgICAgICBjeDogdmlld0JveC52YWx1ZSxcbiAgICAgICAgY3k6IHZpZXdCb3gudmFsdWUsXG4gICAgICAgIHI6IHJhZGl1c1xuICAgICAgfSlcbiAgICB9XG5cbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgY29uc3Qgc3ZnQ2hpbGQgPSBbXVxuXG4gICAgICBwcm9wcy5jZW50ZXJDb2xvciAhPT0gdm9pZCAwICYmIHByb3BzLmNlbnRlckNvbG9yICE9PSAndHJhbnNwYXJlbnQnICYmIHN2Z0NoaWxkLnB1c2goXG4gICAgICAgIGgoJ2NpcmNsZScsIHtcbiAgICAgICAgICBjbGFzczogYHEtY2lyY3VsYXItcHJvZ3Jlc3NfX2NlbnRlciB0ZXh0LSR7IHByb3BzLmNlbnRlckNvbG9yIH1gLFxuICAgICAgICAgIGZpbGw6ICdjdXJyZW50Q29sb3InLFxuICAgICAgICAgIHI6IHJhZGl1cyAtIHN0cm9rZVdpZHRoLnZhbHVlIC8gMixcbiAgICAgICAgICBjeDogdmlld0JveC52YWx1ZSxcbiAgICAgICAgICBjeTogdmlld0JveC52YWx1ZVxuICAgICAgICB9KVxuICAgICAgKVxuXG4gICAgICBwcm9wcy50cmFja0NvbG9yICE9PSB2b2lkIDAgJiYgcHJvcHMudHJhY2tDb2xvciAhPT0gJ3RyYW5zcGFyZW50JyAmJiBzdmdDaGlsZC5wdXNoKFxuICAgICAgICBnZXRDaXJjbGUoe1xuICAgICAgICAgIGNsczogJ3RyYWNrJyxcbiAgICAgICAgICB0aGlja25lc3M6IHN0cm9rZVdpZHRoLnZhbHVlLFxuICAgICAgICAgIG9mZnNldDogMCxcbiAgICAgICAgICBjb2xvcjogcHJvcHMudHJhY2tDb2xvclxuICAgICAgICB9KVxuICAgICAgKVxuXG4gICAgICBzdmdDaGlsZC5wdXNoKFxuICAgICAgICBnZXRDaXJjbGUoe1xuICAgICAgICAgIGNsczogJ2NpcmNsZScsXG4gICAgICAgICAgdGhpY2tuZXNzOiBzdHJva2VXaWR0aC52YWx1ZSxcbiAgICAgICAgICBvZmZzZXQ6IHN0cm9rZURhc2hPZmZzZXQudmFsdWUsXG4gICAgICAgICAgY29sb3I6IHByb3BzLmNvbG9yXG4gICAgICAgIH0pXG4gICAgICApXG5cbiAgICAgIGNvbnN0IGNoaWxkID0gW1xuICAgICAgICBoKCdzdmcnLCB7XG4gICAgICAgICAgY2xhc3M6ICdxLWNpcmN1bGFyLXByb2dyZXNzX19zdmcnLFxuICAgICAgICAgIHN0eWxlOiBzdmdTdHlsZS52YWx1ZSxcbiAgICAgICAgICB2aWV3Qm94OiB2aWV3Qm94QXR0ci52YWx1ZSxcbiAgICAgICAgICAnYXJpYS1oaWRkZW4nOiAndHJ1ZSdcbiAgICAgICAgfSwgc3ZnQ2hpbGQpXG4gICAgICBdXG5cbiAgICAgIHByb3BzLnNob3dWYWx1ZSA9PT0gdHJ1ZSAmJiBjaGlsZC5wdXNoKFxuICAgICAgICBoKCdkaXYnLCB7XG4gICAgICAgICAgY2xhc3M6ICdxLWNpcmN1bGFyLXByb2dyZXNzX190ZXh0IGFic29sdXRlLWZ1bGwgcm93IGZsZXgtY2VudGVyIGNvbnRlbnQtY2VudGVyJyxcbiAgICAgICAgICBzdHlsZTogeyBmb250U2l6ZTogcHJvcHMuZm9udFNpemUgfVxuICAgICAgICB9LCBzbG90cy5kZWZhdWx0ICE9PSB2b2lkIDAgPyBzbG90cy5kZWZhdWx0KCkgOiBbIGgoJ2RpdicsIG5vcm1hbGl6ZWQudmFsdWUpIF0pXG4gICAgICApXG5cbiAgICAgIHJldHVybiBoKCdkaXYnLCB7XG4gICAgICAgIGNsYXNzOiBgcS1jaXJjdWxhci1wcm9ncmVzcyBxLWNpcmN1bGFyLXByb2dyZXNzLS0keyBwcm9wcy5pbmRldGVybWluYXRlID09PSB0cnVlID8gJ2luJyA6ICcnIH1kZXRlcm1pbmF0ZWAsXG4gICAgICAgIHN0eWxlOiBzaXplU3R5bGUudmFsdWUsXG4gICAgICAgIHJvbGU6ICdwcm9ncmVzc2JhcicsXG4gICAgICAgICdhcmlhLXZhbHVlbWluJzogcHJvcHMubWluLFxuICAgICAgICAnYXJpYS12YWx1ZW1heCc6IHByb3BzLm1heCxcbiAgICAgICAgJ2FyaWEtdmFsdWVub3cnOiBwcm9wcy5pbmRldGVybWluYXRlID09PSB0cnVlID8gdm9pZCAwIDogbm9ybWFsaXplZC52YWx1ZVxuICAgICAgfSwgaE1lcmdlU2xvdFNhZmVseShzbG90cy5pbnRlcm5hbCwgY2hpbGQpKSAvLyBcImludGVybmFsXCIgaXMgdXNlZCBieSBRS25vYlxuICAgIH1cbiAgfVxufSlcbiIsImltcG9ydCB7IGgsIHJlZiwgY29tcHV0ZWQsIGdldEN1cnJlbnRJbnN0YW5jZSB9IGZyb20gJ3Z1ZSdcblxuaW1wb3J0IHsgc3RvcCwgc3RvcEFuZFByZXZlbnQgfSBmcm9tICcuLi8uLi91dGlscy9ldmVudC5qcydcblxuZnVuY3Rpb24gZmlsdGVyRmlsZXMgKGZpbGVzLCByZWplY3RlZEZpbGVzLCBmYWlsZWRQcm9wVmFsaWRhdGlvbiwgZmlsdGVyRm4pIHtcbiAgY29uc3QgYWNjZXB0ZWRGaWxlcyA9IFtdXG5cbiAgZmlsZXMuZm9yRWFjaChmaWxlID0+IHtcbiAgICBpZiAoZmlsdGVyRm4oZmlsZSkgPT09IHRydWUpIHtcbiAgICAgIGFjY2VwdGVkRmlsZXMucHVzaChmaWxlKVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIHJlamVjdGVkRmlsZXMucHVzaCh7IGZhaWxlZFByb3BWYWxpZGF0aW9uLCBmaWxlIH0pXG4gICAgfVxuICB9KVxuXG4gIHJldHVybiBhY2NlcHRlZEZpbGVzXG59XG5cbmZ1bmN0aW9uIHN0b3BBbmRQcmV2ZW50RHJhZyAoZSkge1xuICBlICYmIGUuZGF0YVRyYW5zZmVyICYmIChlLmRhdGFUcmFuc2Zlci5kcm9wRWZmZWN0ID0gJ2NvcHknKVxuICBzdG9wQW5kUHJldmVudChlKVxufVxuXG5leHBvcnQgY29uc3QgdXNlRmlsZVByb3BzID0ge1xuICBtdWx0aXBsZTogQm9vbGVhbixcbiAgYWNjZXB0OiBTdHJpbmcsXG4gIGNhcHR1cmU6IFN0cmluZyxcbiAgbWF4RmlsZVNpemU6IFsgTnVtYmVyLCBTdHJpbmcgXSxcbiAgbWF4VG90YWxTaXplOiBbIE51bWJlciwgU3RyaW5nIF0sXG4gIG1heEZpbGVzOiBbIE51bWJlciwgU3RyaW5nIF0sXG4gIGZpbHRlcjogRnVuY3Rpb25cbn1cblxuZXhwb3J0IGNvbnN0IHVzZUZpbGVFbWl0cyA9IFsgJ3JlamVjdGVkJyBdXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uICh7XG4gIGVkaXRhYmxlLFxuICBkbmQsXG4gIGdldEZpbGVJbnB1dCxcbiAgYWRkRmlsZXNUb1F1ZXVlXG59KSB7XG4gIGNvbnN0IHsgcHJvcHMsIGVtaXQsIHByb3h5IH0gPSBnZXRDdXJyZW50SW5zdGFuY2UoKVxuXG4gIGNvbnN0IGRuZFJlZiA9IHJlZihudWxsKVxuXG4gIGNvbnN0IGV4dGVuc2lvbnMgPSBjb21wdXRlZCgoKSA9PiAoXG4gICAgcHJvcHMuYWNjZXB0ICE9PSB2b2lkIDBcbiAgICAgID8gcHJvcHMuYWNjZXB0LnNwbGl0KCcsJykubWFwKGV4dCA9PiB7XG4gICAgICAgIGV4dCA9IGV4dC50cmltKClcbiAgICAgICAgaWYgKGV4dCA9PT0gJyonKSB7IC8vIHN1cHBvcnQgXCIqXCJcbiAgICAgICAgICByZXR1cm4gJyovJ1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGV4dC5lbmRzV2l0aCgnLyonKSkgeyAvLyBzdXBwb3J0IFwiaW1hZ2UvKlwiIG9yIFwiKi8qXCJcbiAgICAgICAgICBleHQgPSBleHQuc2xpY2UoMCwgZXh0Lmxlbmd0aCAtIDEpXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGV4dC50b1VwcGVyQ2FzZSgpXG4gICAgICB9KVxuICAgICAgOiBudWxsXG4gICkpXG5cbiAgY29uc3QgbWF4RmlsZXNOdW1iZXIgPSBjb21wdXRlZCgoKSA9PiBwYXJzZUludChwcm9wcy5tYXhGaWxlcywgMTApKVxuICBjb25zdCBtYXhUb3RhbFNpemVOdW1iZXIgPSBjb21wdXRlZCgoKSA9PiBwYXJzZUludChwcm9wcy5tYXhUb3RhbFNpemUsIDEwKSlcblxuICBmdW5jdGlvbiBwaWNrRmlsZXMgKGUpIHtcbiAgICBpZiAoZWRpdGFibGUudmFsdWUpIHtcbiAgICAgIGlmIChlICE9PSBPYmplY3QoZSkpIHtcbiAgICAgICAgZSA9IHsgdGFyZ2V0OiBudWxsIH1cbiAgICAgIH1cblxuICAgICAgaWYgKGUudGFyZ2V0ICE9PSBudWxsICYmIGUudGFyZ2V0Lm1hdGNoZXMoJ2lucHV0W3R5cGU9XCJmaWxlXCJdJykgPT09IHRydWUpIHtcbiAgICAgICAgLy8gc3RvcCBwcm9wYWdhdGlvbiBpZiBpdCdzIG5vdCBhIHJlYWwgcG9pbnRlciBldmVudFxuICAgICAgICBlLmNsaWVudFggPT09IDAgJiYgZS5jbGllbnRZID09PSAwICYmIHN0b3AoZSlcbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICBjb25zdCBpbnB1dCA9IGdldEZpbGVJbnB1dCgpXG4gICAgICAgIGlucHV0ICYmIGlucHV0ICE9PSBlLnRhcmdldCAmJiBpbnB1dC5jbGljayhlKVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGFkZEZpbGVzIChmaWxlcykge1xuICAgIGlmIChlZGl0YWJsZS52YWx1ZSAmJiBmaWxlcykge1xuICAgICAgYWRkRmlsZXNUb1F1ZXVlKG51bGwsIGZpbGVzKVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHByb2Nlc3NGaWxlcyAoZSwgZmlsZXNUb1Byb2Nlc3MsIGN1cnJlbnRGaWxlTGlzdCwgYXBwZW5kKSB7XG4gICAgbGV0IGZpbGVzID0gQXJyYXkuZnJvbShmaWxlc1RvUHJvY2VzcyB8fCBlLnRhcmdldC5maWxlcylcbiAgICBjb25zdCByZWplY3RlZEZpbGVzID0gW11cblxuICAgIGNvbnN0IGRvbmUgPSAoKSA9PiB7XG4gICAgICBpZiAocmVqZWN0ZWRGaWxlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIGVtaXQoJ3JlamVjdGVkJywgcmVqZWN0ZWRGaWxlcylcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBmaWx0ZXIgZmlsZSB0eXBlc1xuICAgIGlmIChwcm9wcy5hY2NlcHQgIT09IHZvaWQgMCAmJiBleHRlbnNpb25zLnZhbHVlLmluZGV4T2YoJyovJykgPT09IC0xKSB7XG4gICAgICBmaWxlcyA9IGZpbHRlckZpbGVzKGZpbGVzLCByZWplY3RlZEZpbGVzLCAnYWNjZXB0JywgZmlsZSA9PiB7XG4gICAgICAgIHJldHVybiBleHRlbnNpb25zLnZhbHVlLnNvbWUoZXh0ID0+IChcbiAgICAgICAgICBmaWxlLnR5cGUudG9VcHBlckNhc2UoKS5zdGFydHNXaXRoKGV4dClcbiAgICAgICAgICB8fCBmaWxlLm5hbWUudG9VcHBlckNhc2UoKS5lbmRzV2l0aChleHQpXG4gICAgICAgICkpXG4gICAgICB9KVxuXG4gICAgICBpZiAoZmlsZXMubGVuZ3RoID09PSAwKSB7IHJldHVybiBkb25lKCkgfVxuICAgIH1cblxuICAgIC8vIGZpbHRlciBtYXggZmlsZSBzaXplXG4gICAgaWYgKHByb3BzLm1heEZpbGVTaXplICE9PSB2b2lkIDApIHtcbiAgICAgIGNvbnN0IG1heEZpbGVTaXplID0gcGFyc2VJbnQocHJvcHMubWF4RmlsZVNpemUsIDEwKVxuICAgICAgZmlsZXMgPSBmaWx0ZXJGaWxlcyhmaWxlcywgcmVqZWN0ZWRGaWxlcywgJ21heC1maWxlLXNpemUnLCBmaWxlID0+IHtcbiAgICAgICAgcmV0dXJuIGZpbGUuc2l6ZSA8PSBtYXhGaWxlU2l6ZVxuICAgICAgfSlcblxuICAgICAgaWYgKGZpbGVzLmxlbmd0aCA9PT0gMCkgeyByZXR1cm4gZG9uZSgpIH1cbiAgICB9XG5cbiAgICAvLyBDb3Jkb3ZhL2lPUyBhbGxvd3Mgc2VsZWN0aW5nIG11bHRpcGxlIGZpbGVzIGV2ZW4gd2hlbiB0aGVcbiAgICAvLyBtdWx0aXBsZSBhdHRyaWJ1dGUgaXMgbm90IHNwZWNpZmllZC4gV2UgYWxzbyBub3JtYWxpemUgZHJhZyduJ2Ryb3BwZWRcbiAgICAvLyBmaWxlcyBoZXJlOlxuICAgIGlmIChwcm9wcy5tdWx0aXBsZSAhPT0gdHJ1ZSAmJiBmaWxlcy5sZW5ndGggPiAwKSB7XG4gICAgICBmaWxlcyA9IFsgZmlsZXNbIDAgXSBdXG4gICAgfVxuXG4gICAgLy8gQ29tcHV0ZSBrZXkgdG8gdXNlIGZvciBlYWNoIGZpbGVcbiAgICBmaWxlcy5mb3JFYWNoKGZpbGUgPT4ge1xuICAgICAgZmlsZS5fX2tleSA9IGZpbGUud2Via2l0UmVsYXRpdmVQYXRoICsgZmlsZS5sYXN0TW9kaWZpZWQgKyBmaWxlLm5hbWUgKyBmaWxlLnNpemVcbiAgICB9KVxuXG4gICAgLy8gQXZvaWQgZHVwbGljYXRlIGZpbGVzXG4gICAgY29uc3QgZmlsZW5hbWVNYXAgPSBjdXJyZW50RmlsZUxpc3QubWFwKGVudHJ5ID0+IGVudHJ5Ll9fa2V5KVxuICAgIGZpbGVzID0gZmlsdGVyRmlsZXMoZmlsZXMsIHJlamVjdGVkRmlsZXMsICdkdXBsaWNhdGUnLCBmaWxlID0+IHtcbiAgICAgIHJldHVybiBmaWxlbmFtZU1hcC5pbmNsdWRlcyhmaWxlLl9fa2V5KSA9PT0gZmFsc2VcbiAgICB9KVxuXG4gICAgaWYgKGZpbGVzLmxlbmd0aCA9PT0gMCkgeyByZXR1cm4gZG9uZSgpIH1cblxuICAgIGlmIChwcm9wcy5tYXhUb3RhbFNpemUgIT09IHZvaWQgMCkge1xuICAgICAgbGV0IHNpemUgPSBhcHBlbmQgPT09IHRydWVcbiAgICAgICAgPyBjdXJyZW50RmlsZUxpc3QucmVkdWNlKCh0b3RhbCwgZmlsZSkgPT4gdG90YWwgKyBmaWxlLnNpemUsIDApXG4gICAgICAgIDogMFxuXG4gICAgICBmaWxlcyA9IGZpbHRlckZpbGVzKGZpbGVzLCByZWplY3RlZEZpbGVzLCAnbWF4LXRvdGFsLXNpemUnLCBmaWxlID0+IHtcbiAgICAgICAgc2l6ZSArPSBmaWxlLnNpemVcbiAgICAgICAgcmV0dXJuIHNpemUgPD0gbWF4VG90YWxTaXplTnVtYmVyLnZhbHVlXG4gICAgICB9KVxuXG4gICAgICBpZiAoZmlsZXMubGVuZ3RoID09PSAwKSB7IHJldHVybiBkb25lKCkgfVxuICAgIH1cblxuICAgIC8vIGRvIHdlIGhhdmUgY3VzdG9tIGZpbHRlciBmdW5jdGlvbj9cbiAgICBpZiAodHlwZW9mIHByb3BzLmZpbHRlciA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgY29uc3QgZmlsdGVyZWRGaWxlcyA9IHByb3BzLmZpbHRlcihmaWxlcylcbiAgICAgIGZpbGVzID0gZmlsdGVyRmlsZXMoZmlsZXMsIHJlamVjdGVkRmlsZXMsICdmaWx0ZXInLCBmaWxlID0+IHtcbiAgICAgICAgcmV0dXJuIGZpbHRlcmVkRmlsZXMuaW5jbHVkZXMoZmlsZSlcbiAgICAgIH0pXG4gICAgfVxuXG4gICAgaWYgKHByb3BzLm1heEZpbGVzICE9PSB2b2lkIDApIHtcbiAgICAgIGxldCBmaWxlc051bWJlciA9IGFwcGVuZCA9PT0gdHJ1ZVxuICAgICAgICA/IGN1cnJlbnRGaWxlTGlzdC5sZW5ndGhcbiAgICAgICAgOiAwXG5cbiAgICAgIGZpbGVzID0gZmlsdGVyRmlsZXMoZmlsZXMsIHJlamVjdGVkRmlsZXMsICdtYXgtZmlsZXMnLCAoKSA9PiB7XG4gICAgICAgIGZpbGVzTnVtYmVyKytcbiAgICAgICAgcmV0dXJuIGZpbGVzTnVtYmVyIDw9IG1heEZpbGVzTnVtYmVyLnZhbHVlXG4gICAgICB9KVxuXG4gICAgICBpZiAoZmlsZXMubGVuZ3RoID09PSAwKSB7IHJldHVybiBkb25lKCkgfVxuICAgIH1cblxuICAgIGRvbmUoKVxuXG4gICAgaWYgKGZpbGVzLmxlbmd0aCA+IDApIHtcbiAgICAgIHJldHVybiBmaWxlc1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIG9uRHJhZ292ZXIgKGUpIHtcbiAgICBzdG9wQW5kUHJldmVudERyYWcoZSlcbiAgICBkbmQudmFsdWUgIT09IHRydWUgJiYgKGRuZC52YWx1ZSA9IHRydWUpXG4gIH1cblxuICBmdW5jdGlvbiBvbkRyYWdsZWF2ZSAoZSkge1xuICAgIHN0b3BBbmRQcmV2ZW50KGUpXG4gICAgZS5yZWxhdGVkVGFyZ2V0ICE9PSBkbmRSZWYudmFsdWUgJiYgKGRuZC52YWx1ZSA9IGZhbHNlKVxuICB9XG5cbiAgZnVuY3Rpb24gb25Ecm9wIChlKSB7XG4gICAgc3RvcEFuZFByZXZlbnREcmFnKGUpXG4gICAgY29uc3QgZmlsZXMgPSBlLmRhdGFUcmFuc2Zlci5maWxlc1xuXG4gICAgaWYgKGZpbGVzLmxlbmd0aCA+IDApIHtcbiAgICAgIGFkZEZpbGVzVG9RdWV1ZShudWxsLCBmaWxlcylcbiAgICB9XG5cbiAgICBkbmQudmFsdWUgPSBmYWxzZVxuICB9XG5cbiAgZnVuY3Rpb24gZ2V0RG5kTm9kZSAodHlwZSkge1xuICAgIGlmIChkbmQudmFsdWUgPT09IHRydWUpIHtcbiAgICAgIHJldHVybiBoKCdkaXYnLCB7XG4gICAgICAgIHJlZjogZG5kUmVmLFxuICAgICAgICBjbGFzczogYHEtJHsgdHlwZSB9X19kbmQgYWJzb2x1dGUtZnVsbGAsXG4gICAgICAgIG9uRHJhZ2VudGVyOiBzdG9wQW5kUHJldmVudERyYWcsXG4gICAgICAgIG9uRHJhZ292ZXI6IHN0b3BBbmRQcmV2ZW50RHJhZyxcbiAgICAgICAgb25EcmFnbGVhdmUsXG4gICAgICAgIG9uRHJvcFxuICAgICAgfSlcbiAgICB9XG4gIH1cblxuICAvLyBleHBvc2UgcHVibGljIG1ldGhvZHNcbiAgT2JqZWN0LmFzc2lnbihwcm94eSwgeyBwaWNrRmlsZXMsIGFkZEZpbGVzIH0pXG5cbiAgcmV0dXJuIHtcbiAgICBwaWNrRmlsZXMsXG4gICAgYWRkRmlsZXMsXG4gICAgb25EcmFnb3ZlcixcbiAgICBwcm9jZXNzRmlsZXMsXG4gICAgZ2V0RG5kTm9kZSxcbiAgICBtYXhGaWxlc051bWJlcixcbiAgICBtYXhUb3RhbFNpemVOdW1iZXJcbiAgfVxufVxuIiwiaW1wb3J0IHsgaCwgcmVmLCBpc1JlZiwgY29tcHV0ZWQsIHdhdGNoLCBwcm92aWRlLCBvbkJlZm9yZVVubW91bnQsIGdldEN1cnJlbnRJbnN0YW5jZSB9IGZyb20gJ3Z1ZSdcblxuaW1wb3J0IFFCdG4gZnJvbSAnLi4vYnRuL1FCdG4uanMnXG5pbXBvcnQgUUljb24gZnJvbSAnLi4vaWNvbi9RSWNvbi5qcydcbmltcG9ydCBRU3Bpbm5lciBmcm9tICcuLi9zcGlubmVyL1FTcGlubmVyLmpzJ1xuaW1wb3J0IFFDaXJjdWxhclByb2dyZXNzIGZyb20gJy4uL2NpcmN1bGFyLXByb2dyZXNzL1FDaXJjdWxhclByb2dyZXNzLmpzJ1xuXG5pbXBvcnQgdXNlRGFyaywgeyB1c2VEYXJrUHJvcHMgfSBmcm9tICcuLi8uLi9jb21wb3NhYmxlcy9wcml2YXRlL3VzZS1kYXJrLmpzJ1xuaW1wb3J0IHVzZUZpbGUsIHsgdXNlRmlsZVByb3BzLCB1c2VGaWxlRW1pdHMgfSBmcm9tICcuLi8uLi9jb21wb3NhYmxlcy9wcml2YXRlL3VzZS1maWxlLmpzJ1xuXG5pbXBvcnQgeyBzdG9wIH0gZnJvbSAnLi4vLi4vdXRpbHMvZXZlbnQuanMnXG5pbXBvcnQgeyBodW1hblN0b3JhZ2VTaXplIH0gZnJvbSAnLi4vLi4vdXRpbHMvZm9ybWF0LmpzJ1xuaW1wb3J0IHsgdXBsb2FkZXJLZXkgfSBmcm9tICcuLi8uLi91dGlscy9wcml2YXRlL3N5bWJvbHMuanMnXG5cbmZ1bmN0aW9uIGdldFByb2dyZXNzTGFiZWwgKHApIHtcbiAgcmV0dXJuIChwICogMTAwKS50b0ZpeGVkKDIpICsgJyUnXG59XG5cbmV4cG9ydCBjb25zdCBjb3JlUHJvcHMgPSB7XG4gIC4uLnVzZURhcmtQcm9wcyxcbiAgLi4udXNlRmlsZVByb3BzLFxuXG4gIGxhYmVsOiBTdHJpbmcsXG5cbiAgY29sb3I6IFN0cmluZyxcbiAgdGV4dENvbG9yOiBTdHJpbmcsXG5cbiAgc3F1YXJlOiBCb29sZWFuLFxuICBmbGF0OiBCb29sZWFuLFxuICBib3JkZXJlZDogQm9vbGVhbixcblxuICBub1RodW1ibmFpbHM6IEJvb2xlYW4sXG4gIGF1dG9VcGxvYWQ6IEJvb2xlYW4sXG4gIGhpZGVVcGxvYWRCdG46IEJvb2xlYW4sXG5cbiAgZGlzYWJsZTogQm9vbGVhbixcbiAgcmVhZG9ubHk6IEJvb2xlYW5cbn1cblxuZXhwb3J0IGNvbnN0IGNvcmVFbWl0cyA9IFtcbiAgLi4udXNlRmlsZUVtaXRzLFxuICAnc3RhcnQnLCAnZmluaXNoJywgJ2FkZGVkJywgJ3JlbW92ZWQnXG5dXG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRSZW5kZXJlciAoZ2V0UGx1Z2luKSB7XG4gIGNvbnN0IHZtID0gZ2V0Q3VycmVudEluc3RhbmNlKClcbiAgY29uc3QgeyBwcm9wcywgc2xvdHMsIGVtaXQsIHByb3h5IH0gPSB2bVxuICBjb25zdCB7ICRxIH0gPSBwcm94eVxuXG4gIGNvbnN0IGlzRGFyayA9IHVzZURhcmsocHJvcHMsICRxKVxuXG4gIGZ1bmN0aW9uIHVwZGF0ZUZpbGVTdGF0dXMgKGZpbGUsIHN0YXR1cywgdXBsb2FkZWRTaXplKSB7XG4gICAgZmlsZS5fX3N0YXR1cyA9IHN0YXR1c1xuXG4gICAgaWYgKHN0YXR1cyA9PT0gJ2lkbGUnKSB7XG4gICAgICBmaWxlLl9fdXBsb2FkZWQgPSAwXG4gICAgICBmaWxlLl9fcHJvZ3Jlc3MgPSAwXG4gICAgICBmaWxlLl9fc2l6ZUxhYmVsID0gaHVtYW5TdG9yYWdlU2l6ZShmaWxlLnNpemUpXG4gICAgICBmaWxlLl9fcHJvZ3Jlc3NMYWJlbCA9ICcwLjAwJSdcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBpZiAoc3RhdHVzID09PSAnZmFpbGVkJykge1xuICAgICAgcHJveHkuJGZvcmNlVXBkYXRlKClcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGZpbGUuX191cGxvYWRlZCA9IHN0YXR1cyA9PT0gJ3VwbG9hZGVkJ1xuICAgICAgPyBmaWxlLnNpemVcbiAgICAgIDogdXBsb2FkZWRTaXplXG5cbiAgICBmaWxlLl9fcHJvZ3Jlc3MgPSBzdGF0dXMgPT09ICd1cGxvYWRlZCdcbiAgICAgID8gMVxuICAgICAgOiBNYXRoLm1pbigwLjk5OTksIGZpbGUuX191cGxvYWRlZCAvIGZpbGUuc2l6ZSlcblxuICAgIGZpbGUuX19wcm9ncmVzc0xhYmVsID0gZ2V0UHJvZ3Jlc3NMYWJlbChmaWxlLl9fcHJvZ3Jlc3MpXG4gICAgcHJveHkuJGZvcmNlVXBkYXRlKClcbiAgfVxuXG4gIGNvbnN0IHN0YXRlID0ge1xuICAgIGZpbGVzOiByZWYoW10pLFxuICAgIHF1ZXVlZEZpbGVzOiByZWYoW10pLFxuICAgIHVwbG9hZGVkRmlsZXM6IHJlZihbXSksXG4gICAgdXBsb2FkZWRTaXplOiByZWYoMCksXG5cbiAgICB1cGRhdGVGaWxlU3RhdHVzLFxuICAgIGlzQWxpdmUgKCkge1xuICAgICAgcmV0dXJuIHZtLmlzRGVhY3RpdmF0ZWQgIT09IHRydWUgJiYgdm0uaXNVbm1vdW50ZWQgIT09IHRydWVcbiAgICB9XG4gIH1cblxuICBPYmplY3QuYXNzaWduKHN0YXRlLCBnZXRQbHVnaW4oeyBwcm9wcywgc2xvdHMsIGVtaXQsIGhlbHBlcnM6IHN0YXRlIH0pKVxuXG4gIGNvbnN0IHVwbG9hZFNpemUgPSByZWYoMClcbiAgY29uc3QgZWRpdGFibGUgPSBjb21wdXRlZCgoKSA9PiBwcm9wcy5kaXNhYmxlICE9PSB0cnVlICYmIHByb3BzLnJlYWRvbmx5ICE9PSB0cnVlKVxuXG4gIGlmIChzdGF0ZS5pc0J1c3kgPT09IHZvaWQgMCkge1xuICAgIHN0YXRlLmlzQnVzeSA9IHJlZihmYWxzZSlcbiAgfVxuXG4gIGNvbnN0IGRuZCA9IHJlZihmYWxzZSlcblxuICBjb25zdCByb290UmVmID0gcmVmKG51bGwpXG4gIGNvbnN0IGlucHV0UmVmID0gcmVmKG51bGwpXG5cbiAgcHJvdmlkZSh1cGxvYWRlcktleSwgcmVuZGVySW5wdXQpXG5cbiAgY29uc3Qge1xuICAgIHBpY2tGaWxlcyxcbiAgICBhZGRGaWxlcyxcbiAgICBvbkRyYWdvdmVyLFxuICAgIG9uRHJhZ2xlYXZlLFxuICAgIHByb2Nlc3NGaWxlcyxcbiAgICBnZXREbmROb2RlLFxuICAgIG1heEZpbGVzTnVtYmVyLFxuICAgIG1heFRvdGFsU2l6ZU51bWJlclxuICB9ID0gdXNlRmlsZSh7IGVkaXRhYmxlLCBkbmQsIGdldEZpbGVJbnB1dCwgYWRkRmlsZXNUb1F1ZXVlIH0pXG5cbiAgY29uc3QgY2FuQWRkRmlsZXMgPSBjb21wdXRlZCgoKSA9PlxuICAgIGVkaXRhYmxlLnZhbHVlID09PSB0cnVlXG4gICAgJiYgc3RhdGUuaXNVcGxvYWRpbmcudmFsdWUgIT09IHRydWVcbiAgICAvLyBpZiBzaW5nbGUgc2VsZWN0aW9uIGFuZCBubyBmaWxlcyBhcmUgcXVldWVkOlxuICAgICYmIChwcm9wcy5tdWx0aXBsZSA9PT0gdHJ1ZSB8fCBzdGF0ZS5xdWV1ZWRGaWxlcy52YWx1ZS5sZW5ndGggPT09IDApXG4gICAgLy8gaWYgbWF4LWZpbGVzIGlzIHNldCBhbmQgY3VycmVudCBudW1iZXIgb2YgZmlsZXMgZG9lcyBub3QgZXhjZWVkcyBpdDpcbiAgICAmJiAocHJvcHMubWF4RmlsZXMgPT09IHZvaWQgMCB8fCBzdGF0ZS5maWxlcy52YWx1ZS5sZW5ndGggPCBtYXhGaWxlc051bWJlci52YWx1ZSlcbiAgICAvLyBpZiBtYXgtdG90YWwtc2l6ZSBpcyBzZXQgYW5kIGN1cnJlbnQgdXBsb2FkIHNpemUgZG9lcyBub3QgZXhjZWVkcyBpdDpcbiAgICAmJiAocHJvcHMubWF4VG90YWxTaXplID09PSB2b2lkIDAgfHwgdXBsb2FkU2l6ZS52YWx1ZSA8IG1heFRvdGFsU2l6ZU51bWJlci52YWx1ZSlcbiAgKVxuXG4gIGNvbnN0IGNhblVwbG9hZCA9IGNvbXB1dGVkKCgpID0+XG4gICAgZWRpdGFibGUudmFsdWUgPT09IHRydWVcbiAgICAmJiBzdGF0ZS5pc0J1c3kudmFsdWUgIT09IHRydWVcbiAgICAmJiBzdGF0ZS5pc1VwbG9hZGluZy52YWx1ZSAhPT0gdHJ1ZVxuICAgICYmIHN0YXRlLnF1ZXVlZEZpbGVzLnZhbHVlLmxlbmd0aCA+IDBcbiAgKVxuXG4gIGNvbnN0IHVwbG9hZFByb2dyZXNzID0gY29tcHV0ZWQoKCkgPT4gKFxuICAgIHVwbG9hZFNpemUudmFsdWUgPT09IDBcbiAgICAgID8gMFxuICAgICAgOiBzdGF0ZS51cGxvYWRlZFNpemUudmFsdWUgLyB1cGxvYWRTaXplLnZhbHVlXG4gICkpXG5cbiAgY29uc3QgdXBsb2FkUHJvZ3Jlc3NMYWJlbCA9IGNvbXB1dGVkKCgpID0+IGdldFByb2dyZXNzTGFiZWwodXBsb2FkUHJvZ3Jlc3MudmFsdWUpKVxuICBjb25zdCB1cGxvYWRTaXplTGFiZWwgPSBjb21wdXRlZCgoKSA9PiBodW1hblN0b3JhZ2VTaXplKHVwbG9hZFNpemUudmFsdWUpKVxuXG4gIGNvbnN0IGNsYXNzZXMgPSBjb21wdXRlZCgoKSA9PlxuICAgICdxLXVwbG9hZGVyIGNvbHVtbiBuby13cmFwJ1xuICAgICsgKGlzRGFyay52YWx1ZSA9PT0gdHJ1ZSA/ICcgcS11cGxvYWRlci0tZGFyayBxLWRhcmsnIDogJycpXG4gICAgKyAocHJvcHMuYm9yZGVyZWQgPT09IHRydWUgPyAnIHEtdXBsb2FkZXItLWJvcmRlcmVkJyA6ICcnKVxuICAgICsgKHByb3BzLnNxdWFyZSA9PT0gdHJ1ZSA/ICcgcS11cGxvYWRlci0tc3F1YXJlIG5vLWJvcmRlci1yYWRpdXMnIDogJycpXG4gICAgKyAocHJvcHMuZmxhdCA9PT0gdHJ1ZSA/ICcgcS11cGxvYWRlci0tZmxhdCBuby1zaGFkb3cnIDogJycpXG4gICAgKyAocHJvcHMuZGlzYWJsZSA9PT0gdHJ1ZSA/ICcgZGlzYWJsZWQgcS11cGxvYWRlci0tZGlzYWJsZScgOiAnJylcbiAgKVxuXG4gIGNvbnN0IGNvbG9yQ2xhc3MgPSBjb21wdXRlZCgoKSA9PlxuICAgICdxLXVwbG9hZGVyX19oZWFkZXInXG4gICAgKyAocHJvcHMuY29sb3IgIT09IHZvaWQgMCA/IGAgYmctJHsgcHJvcHMuY29sb3IgfWAgOiAnJylcbiAgICArIChwcm9wcy50ZXh0Q29sb3IgIT09IHZvaWQgMCA/IGAgdGV4dC0keyBwcm9wcy50ZXh0Q29sb3IgfWAgOiAnJylcbiAgKVxuXG4gIHdhdGNoKHN0YXRlLmlzVXBsb2FkaW5nLCAobmV3VmFsLCBvbGRWYWwpID0+IHtcbiAgICBpZiAob2xkVmFsID09PSBmYWxzZSAmJiBuZXdWYWwgPT09IHRydWUpIHtcbiAgICAgIGVtaXQoJ3N0YXJ0JylcbiAgICB9XG4gICAgZWxzZSBpZiAob2xkVmFsID09PSB0cnVlICYmIG5ld1ZhbCA9PT0gZmFsc2UpIHtcbiAgICAgIGVtaXQoJ2ZpbmlzaCcpXG4gICAgfVxuICB9KVxuXG4gIGZ1bmN0aW9uIHJlc2V0ICgpIHtcbiAgICBpZiAocHJvcHMuZGlzYWJsZSA9PT0gZmFsc2UpIHtcbiAgICAgIHN0YXRlLmFib3J0KClcbiAgICAgIHN0YXRlLnVwbG9hZGVkU2l6ZS52YWx1ZSA9IDBcbiAgICAgIHVwbG9hZFNpemUudmFsdWUgPSAwXG4gICAgICByZXZva2VJbWdVUkxzKClcbiAgICAgIHN0YXRlLmZpbGVzLnZhbHVlID0gW11cbiAgICAgIHN0YXRlLnF1ZXVlZEZpbGVzLnZhbHVlID0gW11cbiAgICAgIHN0YXRlLnVwbG9hZGVkRmlsZXMudmFsdWUgPSBbXVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHJlbW92ZVVwbG9hZGVkRmlsZXMgKCkge1xuICAgIGlmIChwcm9wcy5kaXNhYmxlID09PSBmYWxzZSkge1xuICAgICAgYmF0Y2hSZW1vdmVGaWxlcyhbICd1cGxvYWRlZCcgXSwgKCkgPT4ge1xuICAgICAgICBzdGF0ZS51cGxvYWRlZEZpbGVzLnZhbHVlID0gW11cbiAgICAgIH0pXG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gcmVtb3ZlUXVldWVkRmlsZXMgKCkge1xuICAgIGJhdGNoUmVtb3ZlRmlsZXMoWyAnaWRsZScsICdmYWlsZWQnIF0sICh7IHNpemUgfSkgPT4ge1xuICAgICAgdXBsb2FkU2l6ZS52YWx1ZSAtPSBzaXplXG4gICAgICBzdGF0ZS5xdWV1ZWRGaWxlcy52YWx1ZSA9IFtdXG4gICAgfSlcbiAgfVxuXG4gIGZ1bmN0aW9uIGJhdGNoUmVtb3ZlRmlsZXMgKHN0YXR1c0xpc3QsIGNiKSB7XG4gICAgaWYgKHByb3BzLmRpc2FibGUgPT09IHRydWUpIHtcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGNvbnN0IHJlbW92ZWQgPSB7XG4gICAgICBmaWxlczogW10sXG4gICAgICBzaXplOiAwXG4gICAgfVxuXG4gICAgY29uc3QgbG9jYWxGaWxlcyA9IHN0YXRlLmZpbGVzLnZhbHVlLmZpbHRlcihmID0+IHtcbiAgICAgIGlmIChzdGF0dXNMaXN0LmluZGV4T2YoZi5fX3N0YXR1cykgPT09IC0xKSB7XG4gICAgICAgIHJldHVybiB0cnVlXG4gICAgICB9XG5cbiAgICAgIHJlbW92ZWQuc2l6ZSArPSBmLnNpemVcbiAgICAgIHJlbW92ZWQuZmlsZXMucHVzaChmKVxuXG4gICAgICBmLl9faW1nICE9PSB2b2lkIDAgJiYgd2luZG93LlVSTC5yZXZva2VPYmplY3RVUkwoZi5fX2ltZy5zcmMpXG5cbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH0pXG5cbiAgICBpZiAocmVtb3ZlZC5maWxlcy5sZW5ndGggPiAwKSB7XG4gICAgICBzdGF0ZS5maWxlcy52YWx1ZSA9IGxvY2FsRmlsZXNcbiAgICAgIGNiKHJlbW92ZWQpXG4gICAgICBlbWl0KCdyZW1vdmVkJywgcmVtb3ZlZC5maWxlcylcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiByZW1vdmVGaWxlIChmaWxlKSB7XG4gICAgaWYgKHByb3BzLmRpc2FibGUpIHsgcmV0dXJuIH1cblxuICAgIGlmIChmaWxlLl9fc3RhdHVzID09PSAndXBsb2FkZWQnKSB7XG4gICAgICBzdGF0ZS51cGxvYWRlZEZpbGVzLnZhbHVlID0gc3RhdGUudXBsb2FkZWRGaWxlcy52YWx1ZS5maWx0ZXIoZiA9PiBmLl9fa2V5ICE9PSBmaWxlLl9fa2V5KVxuICAgIH1cbiAgICBlbHNlIGlmIChmaWxlLl9fc3RhdHVzID09PSAndXBsb2FkaW5nJykge1xuICAgICAgZmlsZS5fX2Fib3J0KClcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICB1cGxvYWRTaXplLnZhbHVlIC09IGZpbGUuc2l6ZVxuICAgIH1cblxuICAgIHN0YXRlLmZpbGVzLnZhbHVlID0gc3RhdGUuZmlsZXMudmFsdWUuZmlsdGVyKGYgPT4ge1xuICAgICAgaWYgKGYuX19rZXkgIT09IGZpbGUuX19rZXkpIHtcbiAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgIH1cblxuICAgICAgZi5fX2ltZyAhPT0gdm9pZCAwICYmIHdpbmRvdy5VUkwucmV2b2tlT2JqZWN0VVJMKGYuX19pbWcuc3JjKVxuXG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9KVxuXG4gICAgc3RhdGUucXVldWVkRmlsZXMudmFsdWUgPSBzdGF0ZS5xdWV1ZWRGaWxlcy52YWx1ZS5maWx0ZXIoZiA9PiBmLl9fa2V5ICE9PSBmaWxlLl9fa2V5KVxuICAgIGVtaXQoJ3JlbW92ZWQnLCBbIGZpbGUgXSlcbiAgfVxuXG4gIGZ1bmN0aW9uIHJldm9rZUltZ1VSTHMgKCkge1xuICAgIHN0YXRlLmZpbGVzLnZhbHVlLmZvckVhY2goZiA9PiB7XG4gICAgICBmLl9faW1nICE9PSB2b2lkIDAgJiYgd2luZG93LlVSTC5yZXZva2VPYmplY3RVUkwoZi5fX2ltZy5zcmMpXG4gICAgfSlcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldEZpbGVJbnB1dCAoKSB7XG4gICAgcmV0dXJuIGlucHV0UmVmLnZhbHVlXG4gICAgICB8fCByb290UmVmLnZhbHVlLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ3EtdXBsb2FkZXJfX2lucHV0JylbIDAgXVxuICB9XG5cbiAgZnVuY3Rpb24gYWRkRmlsZXNUb1F1ZXVlIChlLCBmaWxlTGlzdCkge1xuICAgIGNvbnN0IGxvY2FsRmlsZXMgPSBwcm9jZXNzRmlsZXMoZSwgZmlsZUxpc3QsIHN0YXRlLmZpbGVzLnZhbHVlLCB0cnVlKVxuXG4gICAgaWYgKGxvY2FsRmlsZXMgPT09IHZvaWQgMCkgeyByZXR1cm4gfVxuXG4gICAgY29uc3QgZmlsZUlucHV0ID0gZ2V0RmlsZUlucHV0KClcbiAgICBpZiAoZmlsZUlucHV0ICE9PSB2b2lkIDAgJiYgZmlsZUlucHV0ICE9PSBudWxsKSB7XG4gICAgICBmaWxlSW5wdXQudmFsdWUgPSAnJ1xuICAgIH1cblxuICAgIGxvY2FsRmlsZXMuZm9yRWFjaChmaWxlID0+IHtcbiAgICAgIHN0YXRlLnVwZGF0ZUZpbGVTdGF0dXMoZmlsZSwgJ2lkbGUnKVxuICAgICAgdXBsb2FkU2l6ZS52YWx1ZSArPSBmaWxlLnNpemVcblxuICAgICAgaWYgKHByb3BzLm5vVGh1bWJuYWlscyAhPT0gdHJ1ZSAmJiBmaWxlLnR5cGUudG9VcHBlckNhc2UoKS5zdGFydHNXaXRoKCdJTUFHRScpKSB7XG4gICAgICAgIGNvbnN0IGltZyA9IG5ldyBJbWFnZSgpXG4gICAgICAgIGltZy5zcmMgPSB3aW5kb3cuVVJMLmNyZWF0ZU9iamVjdFVSTChmaWxlKVxuICAgICAgICBmaWxlLl9faW1nID0gaW1nXG4gICAgICB9XG4gICAgfSlcblxuICAgIHN0YXRlLmZpbGVzLnZhbHVlID0gc3RhdGUuZmlsZXMudmFsdWUuY29uY2F0KGxvY2FsRmlsZXMpXG4gICAgc3RhdGUucXVldWVkRmlsZXMudmFsdWUgPSBzdGF0ZS5xdWV1ZWRGaWxlcy52YWx1ZS5jb25jYXQobG9jYWxGaWxlcylcbiAgICBlbWl0KCdhZGRlZCcsIGxvY2FsRmlsZXMpXG4gICAgcHJvcHMuYXV0b1VwbG9hZCA9PT0gdHJ1ZSAmJiBzdGF0ZS51cGxvYWQoKVxuICB9XG5cbiAgZnVuY3Rpb24gdXBsb2FkICgpIHtcbiAgICBjYW5VcGxvYWQudmFsdWUgPT09IHRydWUgJiYgc3RhdGUudXBsb2FkKClcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldEJ0biAoc2hvdywgaWNvbiwgZm4pIHtcbiAgICBpZiAoc2hvdyA9PT0gdHJ1ZSkge1xuICAgICAgY29uc3QgZGF0YSA9IHtcbiAgICAgICAgdHlwZTogJ2EnLFxuICAgICAgICBrZXk6IGljb24sXG4gICAgICAgIGljb246ICRxLmljb25TZXQudXBsb2FkZXJbIGljb24gXSxcbiAgICAgICAgZmxhdDogdHJ1ZSxcbiAgICAgICAgZGVuc2U6IHRydWVcbiAgICAgIH1cblxuICAgICAgbGV0IGNoaWxkID0gdm9pZCAwXG5cbiAgICAgIGlmIChpY29uID09PSAnYWRkJykge1xuICAgICAgICBkYXRhLm9uQ2xpY2sgPSBwaWNrRmlsZXNcbiAgICAgICAgY2hpbGQgPSByZW5kZXJJbnB1dFxuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIGRhdGEub25DbGljayA9IGZuXG4gICAgICB9XG5cbiAgICAgIHJldHVybiBoKFFCdG4sIGRhdGEsIGNoaWxkKVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHJlbmRlcklucHV0ICgpIHtcbiAgICByZXR1cm4gaCgnaW5wdXQnLCB7XG4gICAgICByZWY6IGlucHV0UmVmLFxuICAgICAgY2xhc3M6ICdxLXVwbG9hZGVyX19pbnB1dCBvdmVyZmxvdy1oaWRkZW4gYWJzb2x1dGUtZnVsbCcsXG4gICAgICB0YWJpbmRleDogLTEsXG4gICAgICB0eXBlOiAnZmlsZScsXG4gICAgICB0aXRsZTogJycsIC8vIHRyeSB0byByZW1vdmUgZGVmYXVsdCB0b29sdGlwXG4gICAgICBhY2NlcHQ6IHByb3BzLmFjY2VwdCxcbiAgICAgIG11bHRpcGxlOiBwcm9wcy5tdWx0aXBsZSA9PT0gdHJ1ZSA/ICdtdWx0aXBsZScgOiB2b2lkIDAsXG4gICAgICBjYXB0dXJlOiBwcm9wcy5jYXB0dXJlLFxuICAgICAgb25Nb3VzZWRvd246IHN0b3AsIC8vIG5lZWQgdG8gc3RvcCByZWZvY3VzIGZyb20gUUJ0blxuICAgICAgb25DbGljazogcGlja0ZpbGVzLFxuICAgICAgb25DaGFuZ2U6IGFkZEZpbGVzVG9RdWV1ZVxuICAgIH0pXG4gIH1cblxuICBmdW5jdGlvbiBnZXRIZWFkZXIgKCkge1xuICAgIGlmIChzbG90cy5oZWFkZXIgIT09IHZvaWQgMCkge1xuICAgICAgcmV0dXJuIHNsb3RzLmhlYWRlcihzbG90U2NvcGUudmFsdWUpXG4gICAgfVxuXG4gICAgcmV0dXJuIFtcbiAgICAgIGgoJ2RpdicsIHtcbiAgICAgICAgY2xhc3M6ICdxLXVwbG9hZGVyX19oZWFkZXItY29udGVudCBmbGV4IGZsZXgtY2VudGVyIG5vLXdyYXAgcS1ndXR0ZXIteHMnXG4gICAgICB9LCBbXG4gICAgICAgIGdldEJ0bihzdGF0ZS5xdWV1ZWRGaWxlcy52YWx1ZS5sZW5ndGggPiAwLCAncmVtb3ZlUXVldWUnLCByZW1vdmVRdWV1ZWRGaWxlcyksXG4gICAgICAgIGdldEJ0bihzdGF0ZS51cGxvYWRlZEZpbGVzLnZhbHVlLmxlbmd0aCA+IDAsICdyZW1vdmVVcGxvYWRlZCcsIHJlbW92ZVVwbG9hZGVkRmlsZXMpLFxuXG4gICAgICAgIHN0YXRlLmlzVXBsb2FkaW5nLnZhbHVlID09PSB0cnVlXG4gICAgICAgICAgPyBoKFFTcGlubmVyLCB7IGNsYXNzOiAncS11cGxvYWRlcl9fc3Bpbm5lcicgfSlcbiAgICAgICAgICA6IG51bGwsXG5cbiAgICAgICAgaCgnZGl2JywgeyBjbGFzczogJ2NvbCBjb2x1bW4ganVzdGlmeS1jZW50ZXInIH0sIFtcbiAgICAgICAgICBwcm9wcy5sYWJlbCAhPT0gdm9pZCAwXG4gICAgICAgICAgICA/IGgoJ2RpdicsIHsgY2xhc3M6ICdxLXVwbG9hZGVyX190aXRsZScgfSwgWyBwcm9wcy5sYWJlbCBdKVxuICAgICAgICAgICAgOiBudWxsLFxuXG4gICAgICAgICAgaCgnZGl2JywgeyBjbGFzczogJ3EtdXBsb2FkZXJfX3N1YnRpdGxlJyB9LCBbXG4gICAgICAgICAgICB1cGxvYWRTaXplTGFiZWwudmFsdWUgKyAnIC8gJyArIHVwbG9hZFByb2dyZXNzTGFiZWwudmFsdWVcbiAgICAgICAgICBdKVxuICAgICAgICBdKSxcblxuICAgICAgICBnZXRCdG4oY2FuQWRkRmlsZXMudmFsdWUsICdhZGQnKSxcbiAgICAgICAgZ2V0QnRuKHByb3BzLmhpZGVVcGxvYWRCdG4gPT09IGZhbHNlICYmIGNhblVwbG9hZC52YWx1ZSA9PT0gdHJ1ZSwgJ3VwbG9hZCcsIHN0YXRlLnVwbG9hZCksXG4gICAgICAgIGdldEJ0bihzdGF0ZS5pc1VwbG9hZGluZy52YWx1ZSwgJ2NsZWFyJywgc3RhdGUuYWJvcnQpXG4gICAgICBdKVxuICAgIF1cbiAgfVxuXG4gIGZ1bmN0aW9uIGdldExpc3QgKCkge1xuICAgIGlmIChzbG90cy5saXN0ICE9PSB2b2lkIDApIHtcbiAgICAgIHJldHVybiBzbG90cy5saXN0KHNsb3RTY29wZS52YWx1ZSlcbiAgICB9XG5cbiAgICByZXR1cm4gc3RhdGUuZmlsZXMudmFsdWUubWFwKGZpbGUgPT4gaCgnZGl2Jywge1xuICAgICAga2V5OiBmaWxlLl9fa2V5LFxuICAgICAgY2xhc3M6ICdxLXVwbG9hZGVyX19maWxlIHJlbGF0aXZlLXBvc2l0aW9uJ1xuICAgICAgICArIChwcm9wcy5ub1RodW1ibmFpbHMgIT09IHRydWUgJiYgZmlsZS5fX2ltZyAhPT0gdm9pZCAwID8gJyBxLXVwbG9hZGVyX19maWxlLS1pbWcnIDogJycpXG4gICAgICAgICsgKFxuICAgICAgICAgIGZpbGUuX19zdGF0dXMgPT09ICdmYWlsZWQnXG4gICAgICAgICAgICA/ICcgcS11cGxvYWRlcl9fZmlsZS0tZmFpbGVkJ1xuICAgICAgICAgICAgOiAoZmlsZS5fX3N0YXR1cyA9PT0gJ3VwbG9hZGVkJyA/ICcgcS11cGxvYWRlcl9fZmlsZS0tdXBsb2FkZWQnIDogJycpXG4gICAgICAgICksXG4gICAgICBzdHlsZTogcHJvcHMubm9UaHVtYm5haWxzICE9PSB0cnVlICYmIGZpbGUuX19pbWcgIT09IHZvaWQgMFxuICAgICAgICA/IHsgYmFja2dyb3VuZEltYWdlOiAndXJsKFwiJyArIGZpbGUuX19pbWcuc3JjICsgJ1wiKScgfVxuICAgICAgICA6IG51bGxcbiAgICB9LCBbXG4gICAgICBoKCdkaXYnLCB7XG4gICAgICAgIGNsYXNzOiAncS11cGxvYWRlcl9fZmlsZS1oZWFkZXIgcm93IGZsZXgtY2VudGVyIG5vLXdyYXAnXG4gICAgICB9LCBbXG4gICAgICAgIGZpbGUuX19zdGF0dXMgPT09ICdmYWlsZWQnXG4gICAgICAgICAgPyBoKFFJY29uLCB7XG4gICAgICAgICAgICBjbGFzczogJ3EtdXBsb2FkZXJfX2ZpbGUtc3RhdHVzJyxcbiAgICAgICAgICAgIG5hbWU6ICRxLmljb25TZXQudHlwZS5uZWdhdGl2ZSxcbiAgICAgICAgICAgIGNvbG9yOiAnbmVnYXRpdmUnXG4gICAgICAgICAgfSlcbiAgICAgICAgICA6IG51bGwsXG5cbiAgICAgICAgaCgnZGl2JywgeyBjbGFzczogJ3EtdXBsb2FkZXJfX2ZpbGUtaGVhZGVyLWNvbnRlbnQgY29sJyB9LCBbXG4gICAgICAgICAgaCgnZGl2JywgeyBjbGFzczogJ3EtdXBsb2FkZXJfX3RpdGxlJyB9LCBbIGZpbGUubmFtZSBdKSxcbiAgICAgICAgICBoKCdkaXYnLCB7XG4gICAgICAgICAgICBjbGFzczogJ3EtdXBsb2FkZXJfX3N1YnRpdGxlIHJvdyBpdGVtcy1jZW50ZXIgbm8td3JhcCdcbiAgICAgICAgICB9LCBbXG4gICAgICAgICAgICBmaWxlLl9fc2l6ZUxhYmVsICsgJyAvICcgKyBmaWxlLl9fcHJvZ3Jlc3NMYWJlbFxuICAgICAgICAgIF0pXG4gICAgICAgIF0pLFxuXG4gICAgICAgIGZpbGUuX19zdGF0dXMgPT09ICd1cGxvYWRpbmcnXG4gICAgICAgICAgPyBoKFFDaXJjdWxhclByb2dyZXNzLCB7XG4gICAgICAgICAgICB2YWx1ZTogZmlsZS5fX3Byb2dyZXNzLFxuICAgICAgICAgICAgbWluOiAwLFxuICAgICAgICAgICAgbWF4OiAxLFxuICAgICAgICAgICAgaW5kZXRlcm1pbmF0ZTogZmlsZS5fX3Byb2dyZXNzID09PSAwXG4gICAgICAgICAgfSlcbiAgICAgICAgICA6IGgoUUJ0biwge1xuICAgICAgICAgICAgcm91bmQ6IHRydWUsXG4gICAgICAgICAgICBkZW5zZTogdHJ1ZSxcbiAgICAgICAgICAgIGZsYXQ6IHRydWUsXG4gICAgICAgICAgICBpY29uOiAkcS5pY29uU2V0LnVwbG9hZGVyWyBmaWxlLl9fc3RhdHVzID09PSAndXBsb2FkZWQnID8gJ2RvbmUnIDogJ2NsZWFyJyBdLFxuICAgICAgICAgICAgb25DbGljazogKCkgPT4geyByZW1vdmVGaWxlKGZpbGUpIH1cbiAgICAgICAgICB9KVxuICAgICAgXSlcbiAgICBdKSlcbiAgfVxuXG4gIG9uQmVmb3JlVW5tb3VudCgoKSA9PiB7XG4gICAgc3RhdGUuaXNVcGxvYWRpbmcudmFsdWUgPT09IHRydWUgJiYgc3RhdGUuYWJvcnQoKVxuICAgIHN0YXRlLmZpbGVzLnZhbHVlLmxlbmd0aCA+IDAgJiYgcmV2b2tlSW1nVVJMcygpXG4gIH0pXG5cbiAgY29uc3QgcHVibGljTWV0aG9kcyA9IHtcbiAgICBwaWNrRmlsZXMsXG4gICAgYWRkRmlsZXMsXG4gICAgcmVzZXQsXG4gICAgcmVtb3ZlVXBsb2FkZWRGaWxlcyxcbiAgICByZW1vdmVRdWV1ZWRGaWxlcyxcbiAgICByZW1vdmVGaWxlLFxuICAgIHVwbG9hZCxcbiAgICBhYm9ydDogc3RhdGUuYWJvcnRcbiAgfVxuXG4gIC8vIFRPRE86IHRoZSByZXN1bHQgb2YgdGhpcyBjb21wdXRlZCwgZXNwZWNpYWxseSB0aGUgZHluYW1pYyBwYXJ0LCBpc24ndCBjdXJyZW50bHkgdHlwZWRcbiAgLy8gVGhpcyByZXN1bHQgaW4gYW4gZXJyb3Igd2l0aCBWb2xhciB3aGVuIGFjY2Vzc2luZyB0aGUgc3RhdGUgKGVnLiBmaWxlcyBhcnJheSlcbiAgY29uc3Qgc2xvdFNjb3BlID0gY29tcHV0ZWQoKCkgPT4ge1xuICAgIGNvbnN0IGFjYyA9IHtcbiAgICAgIGNhbkFkZEZpbGVzOiBjYW5BZGRGaWxlcy52YWx1ZSxcbiAgICAgIGNhblVwbG9hZDogY2FuVXBsb2FkLnZhbHVlLFxuICAgICAgdXBsb2FkU2l6ZUxhYmVsOiB1cGxvYWRTaXplTGFiZWwudmFsdWUsXG4gICAgICB1cGxvYWRQcm9ncmVzc0xhYmVsOiB1cGxvYWRQcm9ncmVzc0xhYmVsLnZhbHVlXG4gICAgfVxuXG4gICAgZm9yIChjb25zdCBrZXkgaW4gc3RhdGUpIHtcbiAgICAgIGFjY1sga2V5IF0gPSBpc1JlZihzdGF0ZVsga2V5IF0pID09PSB0cnVlXG4gICAgICAgID8gc3RhdGVbIGtleSBdLnZhbHVlXG4gICAgICAgIDogc3RhdGVbIGtleSBdXG4gICAgfVxuXG4gICAgLy8gVE9ETzogKFF2MykgUHV0IHRoZSBRVXBsb2FkZXIgaW5zdGFuY2UgdW5kZXIgYHJlZmBcbiAgICAvLyBwcm9wZXJ0eSBmb3IgY29uc2lzdGVuY3kgYW5kIGZsZXhpYmlsaXR5XG4gICAgLy8gcmV0dXJuIHsgcmVmOiB7IC4uLmFjYywgLi4ucHVibGljTWV0aG9kcyB9IH1cbiAgICByZXR1cm4geyAuLi5hY2MsIC4uLnB1YmxpY01ldGhvZHMgfVxuICB9KVxuXG4gIC8vIGV4cG9zZSBwdWJsaWMgbWV0aG9kc1xuICBPYmplY3QuYXNzaWduKHByb3h5LCBwdWJsaWNNZXRob2RzKVxuXG4gIHJldHVybiAoKSA9PiB7XG4gICAgY29uc3QgY2hpbGRyZW4gPSBbXG4gICAgICBoKCdkaXYnLCB7IGNsYXNzOiBjb2xvckNsYXNzLnZhbHVlIH0sIGdldEhlYWRlcigpKSxcbiAgICAgIGgoJ2RpdicsIHsgY2xhc3M6ICdxLXVwbG9hZGVyX19saXN0IHNjcm9sbCcgfSwgZ2V0TGlzdCgpKSxcbiAgICAgIGdldERuZE5vZGUoJ3VwbG9hZGVyJylcbiAgICBdXG5cbiAgICBzdGF0ZS5pc0J1c3kudmFsdWUgPT09IHRydWUgJiYgY2hpbGRyZW4ucHVzaChcbiAgICAgIGgoJ2RpdicsIHtcbiAgICAgICAgY2xhc3M6ICdxLXVwbG9hZGVyX19vdmVybGF5IGFic29sdXRlLWZ1bGwgZmxleCBmbGV4LWNlbnRlcidcbiAgICAgIH0sIFsgaChRU3Bpbm5lcikgXSlcbiAgICApXG5cbiAgICBjb25zdCBkYXRhID0geyByZWY6IHJvb3RSZWYsIGNsYXNzOiBjbGFzc2VzLnZhbHVlIH1cblxuICAgIGlmIChjYW5BZGRGaWxlcy52YWx1ZSA9PT0gdHJ1ZSkge1xuICAgICAgT2JqZWN0LmFzc2lnbihkYXRhLCB7IG9uRHJhZ292ZXIsIG9uRHJhZ2xlYXZlIH0pXG4gICAgfVxuXG4gICAgcmV0dXJuIGgoJ2RpdicsIGRhdGEsIGNoaWxkcmVuKVxuICB9XG59XG4iLCJjb25zdCB0cnVlRm4gPSAoKSA9PiB0cnVlXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIChlbWl0c0FycmF5KSB7XG4gIGNvbnN0IGVtaXRzT2JqZWN0ID0ge31cblxuICBlbWl0c0FycmF5LmZvckVhY2godmFsID0+IHtcbiAgICBlbWl0c09iamVjdFsgdmFsIF0gPSB0cnVlRm5cbiAgfSlcblxuICByZXR1cm4gZW1pdHNPYmplY3Rcbn1cbiIsImltcG9ydCB7IGNvcmVQcm9wcywgY29yZUVtaXRzLCBnZXRSZW5kZXJlciB9IGZyb20gJy4uL2NvbXBvbmVudHMvdXBsb2FkZXIvdXBsb2FkZXItY29yZS5qcydcblxuaW1wb3J0IHsgY3JlYXRlQ29tcG9uZW50IH0gZnJvbSAnLi9wcml2YXRlL2NyZWF0ZS5qcydcbmltcG9ydCBnZXRFbWl0c09iamVjdCBmcm9tICcuL3ByaXZhdGUvZ2V0LWVtaXRzLW9iamVjdC5qcydcbmltcG9ydCB7IGlzT2JqZWN0IH0gZnJvbSAnLi9wcml2YXRlL2lzLmpzJ1xuXG5jb25zdCBjb3JlRW1pdHNPYmplY3QgPSBnZXRFbWl0c09iamVjdChjb3JlRW1pdHMpXG5cbmV4cG9ydCBkZWZhdWx0ICh7IG5hbWUsIHByb3BzLCBlbWl0cywgaW5qZWN0UGx1Z2luIH0pID0+IGNyZWF0ZUNvbXBvbmVudCh7XG4gIG5hbWUsXG5cbiAgcHJvcHM6IHtcbiAgICAuLi5jb3JlUHJvcHMsXG4gICAgLi4ucHJvcHNcbiAgfSxcblxuICBlbWl0czogaXNPYmplY3QoZW1pdHMpID09PSB0cnVlXG4gICAgPyB7IC4uLmNvcmVFbWl0c09iamVjdCwgLi4uZW1pdHMgfVxuICAgIDogWyAuLi5jb3JlRW1pdHMsIC4uLmVtaXRzIF0sXG5cbiAgc2V0dXAgKCkge1xuICAgIHJldHVybiBnZXRSZW5kZXJlcihpbmplY3RQbHVnaW4pXG4gIH1cbn0pXG4iLCIvKipcbiAqIEJhc2VkIG9uIHRoZSB3b3JrIG9mIGh0dHBzOi8vZ2l0aHViLmNvbS9qY2hvb2svdXVpZC1yYW5kb21cbiAqL1xuXG5sZXRcbiAgYnVmLFxuICBidWZJZHggPSAwXG5jb25zdCBoZXhCeXRlcyA9IG5ldyBBcnJheSgyNTYpXG5cbi8vIFByZS1jYWxjdWxhdGUgdG9TdHJpbmcoMTYpIGZvciBzcGVlZFxuZm9yIChsZXQgaSA9IDA7IGkgPCAyNTY7IGkrKykge1xuICBoZXhCeXRlc1sgaSBdID0gKGkgKyAweDEwMCkudG9TdHJpbmcoMTYpLnN1YnN0cmluZygxKVxufVxuXG4vLyBVc2UgYmVzdCBhdmFpbGFibGUgUFJOR1xuY29uc3QgcmFuZG9tQnl0ZXMgPSAoKCkgPT4ge1xuICAvLyBOb2RlICYgQnJvd3NlciBzdXBwb3J0XG4gIGNvbnN0IGxpYiA9IHR5cGVvZiBjcnlwdG8gIT09ICd1bmRlZmluZWQnXG4gICAgPyBjcnlwdG9cbiAgICA6IChcbiAgICAgICAgdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCdcbiAgICAgICAgICA/IHdpbmRvdy5jcnlwdG8gfHwgd2luZG93Lm1zQ3J5cHRvXG4gICAgICAgICAgOiB2b2lkIDBcbiAgICAgIClcblxuICBpZiAobGliICE9PSB2b2lkIDApIHtcbiAgICBpZiAobGliLnJhbmRvbUJ5dGVzICE9PSB2b2lkIDApIHtcbiAgICAgIHJldHVybiBsaWIucmFuZG9tQnl0ZXNcbiAgICB9XG4gICAgaWYgKGxpYi5nZXRSYW5kb21WYWx1ZXMgIT09IHZvaWQgMCkge1xuICAgICAgcmV0dXJuIG4gPT4ge1xuICAgICAgICBjb25zdCBieXRlcyA9IG5ldyBVaW50OEFycmF5KG4pXG4gICAgICAgIGxpYi5nZXRSYW5kb21WYWx1ZXMoYnl0ZXMpXG4gICAgICAgIHJldHVybiBieXRlc1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBuID0+IHtcbiAgICBjb25zdCByID0gW11cbiAgICBmb3IgKGxldCBpID0gbjsgaSA+IDA7IGktLSkge1xuICAgICAgci5wdXNoKE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDI1NikpXG4gICAgfVxuICAgIHJldHVybiByXG4gIH1cbn0pKClcblxuLy8gQnVmZmVyIHJhbmRvbSBudW1iZXJzIGZvciBzcGVlZFxuLy8gUmVkdWNlIG1lbW9yeSB1c2FnZSBieSBkZWNyZWFzaW5nIHRoaXMgbnVtYmVyIChtaW4gMTYpXG4vLyBvciBpbXByb3ZlIHNwZWVkIGJ5IGluY3JlYXNpbmcgdGhpcyBudW1iZXIgKHRyeSAxNjM4NClcbmNvbnN0IEJVRkZFUl9TSVpFID0gNDA5NlxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiAoKSB7XG4gIC8vIEJ1ZmZlciBzb21lIHJhbmRvbSBieXRlcyBmb3Igc3BlZWRcbiAgaWYgKGJ1ZiA9PT0gdm9pZCAwIHx8IChidWZJZHggKyAxNiA+IEJVRkZFUl9TSVpFKSkge1xuICAgIGJ1ZklkeCA9IDBcbiAgICBidWYgPSByYW5kb21CeXRlcyhCVUZGRVJfU0laRSlcbiAgfVxuXG4gIGNvbnN0IGIgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChidWYsIGJ1ZklkeCwgKGJ1ZklkeCArPSAxNikpXG4gIGJbIDYgXSA9IChiWyA2IF0gJiAweDBmKSB8IDB4NDBcbiAgYlsgOCBdID0gKGJbIDggXSAmIDB4M2YpIHwgMHg4MFxuXG4gIHJldHVybiBoZXhCeXRlc1sgYlsgMCBdIF0gKyBoZXhCeXRlc1sgYlsgMSBdIF1cbiAgICArIGhleEJ5dGVzWyBiWyAyIF0gXSArIGhleEJ5dGVzWyBiWyAzIF0gXSArICctJ1xuICAgICsgaGV4Qnl0ZXNbIGJbIDQgXSBdICsgaGV4Qnl0ZXNbIGJbIDUgXSBdICsgJy0nXG4gICAgKyBoZXhCeXRlc1sgYlsgNiBdIF0gKyBoZXhCeXRlc1sgYlsgNyBdIF0gKyAnLSdcbiAgICArIGhleEJ5dGVzWyBiWyA4IF0gXSArIGhleEJ5dGVzWyBiWyA5IF0gXSArICctJ1xuICAgICsgaGV4Qnl0ZXNbIGJbIDEwIF0gXSArIGhleEJ5dGVzWyBiWyAxMSBdIF1cbiAgICArIGhleEJ5dGVzWyBiWyAxMiBdIF0gKyBoZXhCeXRlc1sgYlsgMTMgXSBdXG4gICAgKyBoZXhCeXRlc1sgYlsgMTQgXSBdICsgaGV4Qnl0ZXNbIGJbIDE1IF0gXVxufVxuIiwiaW1wb3J0IHsgcmVmLCBjb21wdXRlZCwgd2F0Y2gsIG9uQmVmb3JlVW5tb3VudCwgZ2V0Q3VycmVudEluc3RhbmNlIH0gZnJvbSAndnVlJ1xuXG5pbXBvcnQgdXNlRm9ybUNoaWxkIGZyb20gJy4uL3VzZS1mb3JtLWNoaWxkLmpzJ1xuaW1wb3J0IHsgdGVzdFBhdHRlcm4gfSBmcm9tICcuLi8uLi91dGlscy9wYXR0ZXJucy5qcydcbmltcG9ydCB7IGRlYm91bmNlIH0gZnJvbSAnLi4vLi4vdXRpbHMuanMnXG5pbXBvcnQgeyBpbmplY3RQcm9wIH0gZnJvbSAnLi4vLi4vdXRpbHMvcHJpdmF0ZS9pbmplY3Qtb2JqLXByb3AuanMnXG5cbmNvbnN0IGxhenlSdWxlc1ZhbHVlcyA9IFsgdHJ1ZSwgZmFsc2UsICdvbmRlbWFuZCcgXVxuXG5leHBvcnQgY29uc3QgdXNlVmFsaWRhdGVQcm9wcyA9IHtcbiAgbW9kZWxWYWx1ZToge30sXG5cbiAgZXJyb3I6IHtcbiAgICB0eXBlOiBCb29sZWFuLFxuICAgIGRlZmF1bHQ6IG51bGxcbiAgfSxcbiAgZXJyb3JNZXNzYWdlOiBTdHJpbmcsXG4gIG5vRXJyb3JJY29uOiBCb29sZWFuLFxuXG4gIHJ1bGVzOiBBcnJheSxcbiAgcmVhY3RpdmVSdWxlczogQm9vbGVhbixcbiAgbGF6eVJ1bGVzOiB7XG4gICAgdHlwZTogWyBCb29sZWFuLCBTdHJpbmcgXSxcbiAgICB2YWxpZGF0b3I6IHYgPT4gbGF6eVJ1bGVzVmFsdWVzLmluY2x1ZGVzKHYpXG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gKGZvY3VzZWQsIGlubmVyTG9hZGluZykge1xuICBjb25zdCB7IHByb3BzLCBwcm94eSB9ID0gZ2V0Q3VycmVudEluc3RhbmNlKClcblxuICBjb25zdCBpbm5lckVycm9yID0gcmVmKGZhbHNlKVxuICBjb25zdCBpbm5lckVycm9yTWVzc2FnZSA9IHJlZihudWxsKVxuICBjb25zdCBpc0RpcnR5TW9kZWwgPSByZWYobnVsbClcblxuICB1c2VGb3JtQ2hpbGQoeyB2YWxpZGF0ZSwgcmVzZXRWYWxpZGF0aW9uIH0pXG5cbiAgbGV0IHZhbGlkYXRlSW5kZXggPSAwLCB1bndhdGNoUnVsZXNcblxuICBjb25zdCBoYXNSdWxlcyA9IGNvbXB1dGVkKCgpID0+XG4gICAgcHJvcHMucnVsZXMgIT09IHZvaWQgMFxuICAgICYmIHByb3BzLnJ1bGVzICE9PSBudWxsXG4gICAgJiYgcHJvcHMucnVsZXMubGVuZ3RoID4gMFxuICApXG5cbiAgY29uc3QgaGFzQWN0aXZlUnVsZXMgPSBjb21wdXRlZCgoKSA9PlxuICAgIHByb3BzLmRpc2FibGUgIT09IHRydWVcbiAgICAmJiBoYXNSdWxlcy52YWx1ZSA9PT0gdHJ1ZVxuICApXG5cbiAgY29uc3QgaGFzRXJyb3IgPSBjb21wdXRlZCgoKSA9PlxuICAgIHByb3BzLmVycm9yID09PSB0cnVlIHx8IGlubmVyRXJyb3IudmFsdWUgPT09IHRydWVcbiAgKVxuXG4gIGNvbnN0IGVycm9yTWVzc2FnZSA9IGNvbXB1dGVkKCgpID0+IChcbiAgICB0eXBlb2YgcHJvcHMuZXJyb3JNZXNzYWdlID09PSAnc3RyaW5nJyAmJiBwcm9wcy5lcnJvck1lc3NhZ2UubGVuZ3RoID4gMFxuICAgICAgPyBwcm9wcy5lcnJvck1lc3NhZ2VcbiAgICAgIDogaW5uZXJFcnJvck1lc3NhZ2UudmFsdWVcbiAgKSlcblxuICB3YXRjaCgoKSA9PiBwcm9wcy5tb2RlbFZhbHVlLCAoKSA9PiB7XG4gICAgdmFsaWRhdGVJZk5lZWRlZCgpXG4gIH0pXG5cbiAgd2F0Y2goKCkgPT4gcHJvcHMucmVhY3RpdmVSdWxlcywgdmFsID0+IHtcbiAgICBpZiAodmFsID09PSB0cnVlKSB7XG4gICAgICBpZiAodW53YXRjaFJ1bGVzID09PSB2b2lkIDApIHtcbiAgICAgICAgdW53YXRjaFJ1bGVzID0gd2F0Y2goKCkgPT4gcHJvcHMucnVsZXMsICgpID0+IHtcbiAgICAgICAgICB2YWxpZGF0ZUlmTmVlZGVkKHRydWUpXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfVxuICAgIGVsc2UgaWYgKHVud2F0Y2hSdWxlcyAhPT0gdm9pZCAwKSB7XG4gICAgICB1bndhdGNoUnVsZXMoKVxuICAgICAgdW53YXRjaFJ1bGVzID0gdm9pZCAwXG4gICAgfVxuICB9LCB7IGltbWVkaWF0ZTogdHJ1ZSB9KVxuXG4gIHdhdGNoKGZvY3VzZWQsIHZhbCA9PiB7XG4gICAgaWYgKHZhbCA9PT0gdHJ1ZSkge1xuICAgICAgaWYgKGlzRGlydHlNb2RlbC52YWx1ZSA9PT0gbnVsbCkge1xuICAgICAgICBpc0RpcnR5TW9kZWwudmFsdWUgPSBmYWxzZVxuICAgICAgfVxuICAgIH1cbiAgICBlbHNlIGlmIChpc0RpcnR5TW9kZWwudmFsdWUgPT09IGZhbHNlKSB7XG4gICAgICBpc0RpcnR5TW9kZWwudmFsdWUgPSB0cnVlXG5cbiAgICAgIGlmIChcbiAgICAgICAgaGFzQWN0aXZlUnVsZXMudmFsdWUgPT09IHRydWVcbiAgICAgICAgJiYgcHJvcHMubGF6eVJ1bGVzICE9PSAnb25kZW1hbmQnXG4gICAgICAgIC8vIERvbid0IHJlLXRyaWdnZXIgaWYgaXQncyBhbHJlYWR5IGluIHByb2dyZXNzO1xuICAgICAgICAvLyBJdCBtaWdodCBtZWFuIHRoYXQgZm9jdXMgc3dpdGNoZWQgdG8gc3VibWl0IGJ0biBhbmRcbiAgICAgICAgLy8gUUZvcm0ncyBzdWJtaXQoKSBoYXMgYmVlbiBjYWxsZWQgYWxyZWFkeSAoRU5URVIga2V5KVxuICAgICAgICAmJiBpbm5lckxvYWRpbmcudmFsdWUgPT09IGZhbHNlXG4gICAgICApIHtcbiAgICAgICAgZGVib3VuY2VkVmFsaWRhdGUoKVxuICAgICAgfVxuICAgIH1cbiAgfSlcblxuICBmdW5jdGlvbiByZXNldFZhbGlkYXRpb24gKCkge1xuICAgIHZhbGlkYXRlSW5kZXgrK1xuICAgIGlubmVyTG9hZGluZy52YWx1ZSA9IGZhbHNlXG4gICAgaXNEaXJ0eU1vZGVsLnZhbHVlID0gbnVsbFxuICAgIGlubmVyRXJyb3IudmFsdWUgPSBmYWxzZVxuICAgIGlubmVyRXJyb3JNZXNzYWdlLnZhbHVlID0gbnVsbFxuICAgIGRlYm91bmNlZFZhbGlkYXRlLmNhbmNlbCgpXG4gIH1cblxuICAvKlxuICAgKiBSZXR1cm4gdmFsdWVcbiAgICogICAtIHRydWUgKHZhbGlkYXRpb24gc3VjY2VlZGVkKVxuICAgKiAgIC0gZmFsc2UgKHZhbGlkYXRpb24gZmFpbGVkKVxuICAgKiAgIC0gUHJvbWlzZSAocGVuZGluZyBhc3luYyB2YWxpZGF0aW9uKVxuICAgKi9cbiAgZnVuY3Rpb24gdmFsaWRhdGUgKHZhbCA9IHByb3BzLm1vZGVsVmFsdWUpIHtcbiAgICBpZiAoaGFzQWN0aXZlUnVsZXMudmFsdWUgIT09IHRydWUpIHtcbiAgICAgIHJldHVybiB0cnVlXG4gICAgfVxuXG4gICAgY29uc3QgaW5kZXggPSArK3ZhbGlkYXRlSW5kZXhcblxuICAgIGlmIChpbm5lckxvYWRpbmcudmFsdWUgIT09IHRydWUgJiYgcHJvcHMubGF6eVJ1bGVzICE9PSB0cnVlKSB7XG4gICAgICBpc0RpcnR5TW9kZWwudmFsdWUgPSB0cnVlXG4gICAgfVxuXG4gICAgY29uc3QgdXBkYXRlID0gKGVyciwgbXNnKSA9PiB7XG4gICAgICBpZiAoaW5uZXJFcnJvci52YWx1ZSAhPT0gZXJyKSB7XG4gICAgICAgIGlubmVyRXJyb3IudmFsdWUgPSBlcnJcbiAgICAgIH1cblxuICAgICAgY29uc3QgbSA9IG1zZyB8fCB2b2lkIDBcblxuICAgICAgaWYgKGlubmVyRXJyb3JNZXNzYWdlLnZhbHVlICE9PSBtKSB7XG4gICAgICAgIGlubmVyRXJyb3JNZXNzYWdlLnZhbHVlID0gbVxuICAgICAgfVxuXG4gICAgICBpbm5lckxvYWRpbmcudmFsdWUgPSBmYWxzZVxuICAgIH1cblxuICAgIGNvbnN0IHByb21pc2VzID0gW11cblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcHJvcHMucnVsZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IHJ1bGUgPSBwcm9wcy5ydWxlc1sgaSBdXG4gICAgICBsZXQgcmVzXG5cbiAgICAgIGlmICh0eXBlb2YgcnVsZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICByZXMgPSBydWxlKHZhbClcbiAgICAgIH1cbiAgICAgIGVsc2UgaWYgKHR5cGVvZiBydWxlID09PSAnc3RyaW5nJyAmJiB0ZXN0UGF0dGVyblsgcnVsZSBdICE9PSB2b2lkIDApIHtcbiAgICAgICAgcmVzID0gdGVzdFBhdHRlcm5bIHJ1bGUgXSh2YWwpXG4gICAgICB9XG5cbiAgICAgIGlmIChyZXMgPT09IGZhbHNlIHx8IHR5cGVvZiByZXMgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHVwZGF0ZSh0cnVlLCByZXMpXG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgfVxuICAgICAgZWxzZSBpZiAocmVzICE9PSB0cnVlICYmIHJlcyAhPT0gdm9pZCAwKSB7XG4gICAgICAgIHByb21pc2VzLnB1c2gocmVzKVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChwcm9taXNlcy5sZW5ndGggPT09IDApIHtcbiAgICAgIHVwZGF0ZShmYWxzZSlcbiAgICAgIHJldHVybiB0cnVlXG4gICAgfVxuXG4gICAgaW5uZXJMb2FkaW5nLnZhbHVlID0gdHJ1ZVxuXG4gICAgcmV0dXJuIFByb21pc2UuYWxsKHByb21pc2VzKS50aGVuKFxuICAgICAgcmVzID0+IHtcbiAgICAgICAgaWYgKHJlcyA9PT0gdm9pZCAwIHx8IEFycmF5LmlzQXJyYXkocmVzKSA9PT0gZmFsc2UgfHwgcmVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgIGluZGV4ID09PSB2YWxpZGF0ZUluZGV4ICYmIHVwZGF0ZShmYWxzZSlcbiAgICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgbXNnID0gcmVzLmZpbmQociA9PiByID09PSBmYWxzZSB8fCB0eXBlb2YgciA9PT0gJ3N0cmluZycpXG4gICAgICAgIGluZGV4ID09PSB2YWxpZGF0ZUluZGV4ICYmIHVwZGF0ZShtc2cgIT09IHZvaWQgMCwgbXNnKVxuICAgICAgICByZXR1cm4gbXNnID09PSB2b2lkIDBcbiAgICAgIH0sXG4gICAgICBlID0+IHtcbiAgICAgICAgaWYgKGluZGV4ID09PSB2YWxpZGF0ZUluZGV4KSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcihlKVxuICAgICAgICAgIHVwZGF0ZSh0cnVlKVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICB9XG4gICAgKVxuICB9XG5cbiAgZnVuY3Rpb24gdmFsaWRhdGVJZk5lZWRlZCAoY2hhbmdlZFJ1bGVzKSB7XG4gICAgaWYgKFxuICAgICAgaGFzQWN0aXZlUnVsZXMudmFsdWUgPT09IHRydWVcbiAgICAgICYmIHByb3BzLmxhenlSdWxlcyAhPT0gJ29uZGVtYW5kJ1xuICAgICAgJiYgKGlzRGlydHlNb2RlbC52YWx1ZSA9PT0gdHJ1ZSB8fCAocHJvcHMubGF6eVJ1bGVzICE9PSB0cnVlICYmIGNoYW5nZWRSdWxlcyAhPT0gdHJ1ZSkpXG4gICAgKSB7XG4gICAgICBkZWJvdW5jZWRWYWxpZGF0ZSgpXG4gICAgfVxuICB9XG5cbiAgY29uc3QgZGVib3VuY2VkVmFsaWRhdGUgPSBkZWJvdW5jZSh2YWxpZGF0ZSwgMClcblxuICBvbkJlZm9yZVVubW91bnQoKCkgPT4ge1xuICAgIHVud2F0Y2hSdWxlcyAhPT0gdm9pZCAwICYmIHVud2F0Y2hSdWxlcygpXG4gICAgZGVib3VuY2VkVmFsaWRhdGUuY2FuY2VsKClcbiAgfSlcblxuICAvLyBleHBvc2UgcHVibGljIG1ldGhvZHMgJiBwcm9wc1xuICBPYmplY3QuYXNzaWduKHByb3h5LCB7IHJlc2V0VmFsaWRhdGlvbiwgdmFsaWRhdGUgfSlcbiAgaW5qZWN0UHJvcChwcm94eSwgJ2hhc0Vycm9yJywgKCkgPT4gaGFzRXJyb3IudmFsdWUpXG5cbiAgcmV0dXJuIHtcbiAgICBpc0RpcnR5TW9kZWwsXG4gICAgaGFzUnVsZXMsXG4gICAgaGFzRXJyb3IsXG4gICAgZXJyb3JNZXNzYWdlLFxuXG4gICAgdmFsaWRhdGUsXG4gICAgcmVzZXRWYWxpZGF0aW9uXG4gIH1cbn1cbiIsImltcG9ydCB7IHJlZiwgb25CZWZvcmVVcGRhdGUgfSBmcm9tICd2dWUnXG5cbmNvbnN0IGxpc3RlbmVyUkUgPSAvXm9uW0EtWl0vXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIChhdHRycywgdm5vZGUpIHtcbiAgY29uc3QgYWNjID0ge1xuICAgIGxpc3RlbmVyczogcmVmKHt9KSxcbiAgICBhdHRyaWJ1dGVzOiByZWYoe30pXG4gIH1cblxuICBmdW5jdGlvbiB1cGRhdGUgKCkge1xuICAgIGNvbnN0IGF0dHJpYnV0ZXMgPSB7fVxuICAgIGNvbnN0IGxpc3RlbmVycyA9IHt9XG5cbiAgICBmb3IgKGNvbnN0IGtleSBpbiBhdHRycykge1xuICAgICAgaWYgKGtleSAhPT0gJ2NsYXNzJyAmJiBrZXkgIT09ICdzdHlsZScgJiYgbGlzdGVuZXJSRS50ZXN0KGtleSkgPT09IGZhbHNlKSB7XG4gICAgICAgIGF0dHJpYnV0ZXNbIGtleSBdID0gYXR0cnNbIGtleSBdXG4gICAgICB9XG4gICAgfVxuXG4gICAgZm9yIChjb25zdCBrZXkgaW4gdm5vZGUucHJvcHMpIHtcbiAgICAgIGlmIChsaXN0ZW5lclJFLnRlc3Qoa2V5KSA9PT0gdHJ1ZSkge1xuICAgICAgICBsaXN0ZW5lcnNbIGtleSBdID0gdm5vZGUucHJvcHNbIGtleSBdXG4gICAgICB9XG4gICAgfVxuXG4gICAgYWNjLmF0dHJpYnV0ZXMudmFsdWUgPSBhdHRyaWJ1dGVzXG4gICAgYWNjLmxpc3RlbmVycy52YWx1ZSA9IGxpc3RlbmVyc1xuICB9XG5cbiAgb25CZWZvcmVVcGRhdGUodXBkYXRlKVxuXG4gIHVwZGF0ZSgpXG5cbiAgcmV0dXJuIGFjY1xufVxuIiwiaW1wb3J0IHsgaCwgcmVmLCBjb21wdXRlZCwgd2F0Y2gsIFRyYW5zaXRpb24sIG5leHRUaWNrLCBvbkFjdGl2YXRlZCwgb25EZWFjdGl2YXRlZCwgb25CZWZvcmVVbm1vdW50LCBvbk1vdW50ZWQsIGdldEN1cnJlbnRJbnN0YW5jZSB9IGZyb20gJ3Z1ZSdcblxuaW1wb3J0IHsgaXNSdW50aW1lU3NyUHJlSHlkcmF0aW9uIH0gZnJvbSAnLi4vLi4vcGx1Z2lucy9QbGF0Zm9ybS5qcydcblxuaW1wb3J0IFFJY29uIGZyb20gJy4uLy4uL2NvbXBvbmVudHMvaWNvbi9RSWNvbi5qcydcbmltcG9ydCBRU3Bpbm5lciBmcm9tICcuLi8uLi9jb21wb25lbnRzL3NwaW5uZXIvUVNwaW5uZXIuanMnXG5cbmltcG9ydCB1c2VEYXJrLCB7IHVzZURhcmtQcm9wcyB9IGZyb20gJy4uLy4uL2NvbXBvc2FibGVzL3ByaXZhdGUvdXNlLWRhcmsuanMnXG5pbXBvcnQgdXNlVmFsaWRhdGUsIHsgdXNlVmFsaWRhdGVQcm9wcyB9IGZyb20gJy4vdXNlLXZhbGlkYXRlLmpzJ1xuaW1wb3J0IHVzZVNwbGl0QXR0cnMgZnJvbSAnLi91c2Utc3BsaXQtYXR0cnMuanMnXG5cbmltcG9ydCB7IGhTbG90IH0gZnJvbSAnLi4vLi4vdXRpbHMvcHJpdmF0ZS9yZW5kZXIuanMnXG5pbXBvcnQgdWlkIGZyb20gJy4uLy4uL3V0aWxzL3VpZC5qcydcbmltcG9ydCB7IHByZXZlbnQsIHN0b3BBbmRQcmV2ZW50IH0gZnJvbSAnLi4vLi4vdXRpbHMvZXZlbnQuanMnXG5pbXBvcnQgeyBhZGRGb2N1c0ZuLCByZW1vdmVGb2N1c0ZuIH0gZnJvbSAnLi4vLi4vdXRpbHMvcHJpdmF0ZS9mb2N1cy1tYW5hZ2VyLmpzJ1xuXG5mdW5jdGlvbiBnZXRUYXJnZXRVaWQgKHZhbCkge1xuICByZXR1cm4gdmFsID09PSB2b2lkIDAgPyBgZl8keyB1aWQoKSB9YCA6IHZhbFxufVxuXG5leHBvcnQgZnVuY3Rpb24gZmllbGRWYWx1ZUlzRmlsbGVkICh2YWwpIHtcbiAgcmV0dXJuIHZhbCAhPT0gdm9pZCAwXG4gICAgJiYgdmFsICE9PSBudWxsXG4gICAgJiYgKCcnICsgdmFsKS5sZW5ndGggPiAwXG59XG5cbmV4cG9ydCBjb25zdCB1c2VGaWVsZFByb3BzID0ge1xuICAuLi51c2VEYXJrUHJvcHMsXG4gIC4uLnVzZVZhbGlkYXRlUHJvcHMsXG5cbiAgbGFiZWw6IFN0cmluZyxcbiAgc3RhY2tMYWJlbDogQm9vbGVhbixcbiAgaGludDogU3RyaW5nLFxuICBoaWRlSGludDogQm9vbGVhbixcbiAgcHJlZml4OiBTdHJpbmcsXG4gIHN1ZmZpeDogU3RyaW5nLFxuXG4gIGxhYmVsQ29sb3I6IFN0cmluZyxcbiAgY29sb3I6IFN0cmluZyxcbiAgYmdDb2xvcjogU3RyaW5nLFxuXG4gIGZpbGxlZDogQm9vbGVhbixcbiAgb3V0bGluZWQ6IEJvb2xlYW4sXG4gIGJvcmRlcmxlc3M6IEJvb2xlYW4sXG4gIHN0YW5kb3V0OiBbIEJvb2xlYW4sIFN0cmluZyBdLFxuXG4gIHNxdWFyZTogQm9vbGVhbixcblxuICBsb2FkaW5nOiBCb29sZWFuLFxuXG4gIGxhYmVsU2xvdDogQm9vbGVhbixcblxuICBib3R0b21TbG90czogQm9vbGVhbixcbiAgaGlkZUJvdHRvbVNwYWNlOiBCb29sZWFuLFxuXG4gIHJvdW5kZWQ6IEJvb2xlYW4sXG4gIGRlbnNlOiBCb29sZWFuLFxuICBpdGVtQWxpZ25lZDogQm9vbGVhbixcblxuICBjb3VudGVyOiBCb29sZWFuLFxuXG4gIGNsZWFyYWJsZTogQm9vbGVhbixcbiAgY2xlYXJJY29uOiBTdHJpbmcsXG5cbiAgZGlzYWJsZTogQm9vbGVhbixcbiAgcmVhZG9ubHk6IEJvb2xlYW4sXG5cbiAgYXV0b2ZvY3VzOiBCb29sZWFuLFxuXG4gIGZvcjogU3RyaW5nLFxuXG4gIG1heGxlbmd0aDogWyBOdW1iZXIsIFN0cmluZyBdXG59XG5cbmV4cG9ydCBjb25zdCB1c2VGaWVsZEVtaXRzID0gWyAndXBkYXRlOm1vZGVsVmFsdWUnLCAnY2xlYXInLCAnZm9jdXMnLCAnYmx1cicsICdwb3B1cC1zaG93JywgJ3BvcHVwLWhpZGUnIF1cblxuZXhwb3J0IGZ1bmN0aW9uIHVzZUZpZWxkU3RhdGUgKCkge1xuICBjb25zdCB7IHByb3BzLCBhdHRycywgcHJveHksIHZub2RlIH0gPSBnZXRDdXJyZW50SW5zdGFuY2UoKVxuXG4gIGNvbnN0IGlzRGFyayA9IHVzZURhcmsocHJvcHMsIHByb3h5LiRxKVxuXG4gIHJldHVybiB7XG4gICAgaXNEYXJrLFxuXG4gICAgZWRpdGFibGU6IGNvbXB1dGVkKCgpID0+XG4gICAgICBwcm9wcy5kaXNhYmxlICE9PSB0cnVlICYmIHByb3BzLnJlYWRvbmx5ICE9PSB0cnVlXG4gICAgKSxcblxuICAgIGlubmVyTG9hZGluZzogcmVmKGZhbHNlKSxcbiAgICBmb2N1c2VkOiByZWYoZmFsc2UpLFxuICAgIGhhc1BvcHVwT3BlbjogZmFsc2UsXG5cbiAgICBzcGxpdEF0dHJzOiB1c2VTcGxpdEF0dHJzKGF0dHJzLCB2bm9kZSksXG4gICAgdGFyZ2V0VWlkOiByZWYoZ2V0VGFyZ2V0VWlkKHByb3BzLmZvcikpLFxuXG4gICAgcm9vdFJlZjogcmVmKG51bGwpLFxuICAgIHRhcmdldFJlZjogcmVmKG51bGwpLFxuICAgIGNvbnRyb2xSZWY6IHJlZihudWxsKVxuXG4gICAgLyoqXG4gICAgICogdXNlciBzdXBwbGllZCBhZGRpdGlvbmFsczpcblxuICAgICAqIGlubmVyVmFsdWUgLSBjb21wdXRlZFxuICAgICAqIGZsb2F0aW5nTGFiZWwgLSBjb21wdXRlZFxuICAgICAqIGlucHV0UmVmIC0gY29tcHV0ZWRcblxuICAgICAqIGZpZWxkQ2xhc3MgLSBjb21wdXRlZFxuICAgICAqIGhhc1NoYWRvdyAtIGNvbXB1dGVkXG5cbiAgICAgKiBjb250cm9sRXZlbnRzIC0gT2JqZWN0IHdpdGggZm4oZSlcblxuICAgICAqIGdldENvbnRyb2wgLSBmblxuICAgICAqIGdldElubmVyQXBwZW5kIC0gZm5cbiAgICAgKiBnZXRDb250cm9sQ2hpbGQgLSBmblxuICAgICAqIGdldFNoYWRvd0NvbnRyb2wgLSBmblxuICAgICAqIHNob3dQb3B1cCAtIGZuXG4gICAgICovXG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gKHN0YXRlKSB7XG4gIGNvbnN0IHsgcHJvcHMsIGVtaXQsIHNsb3RzLCBhdHRycywgcHJveHkgfSA9IGdldEN1cnJlbnRJbnN0YW5jZSgpXG4gIGNvbnN0IHsgJHEgfSA9IHByb3h5XG5cbiAgbGV0IGZvY3Vzb3V0VGltZXJcblxuICBpZiAoc3RhdGUuaGFzVmFsdWUgPT09IHZvaWQgMCkge1xuICAgIHN0YXRlLmhhc1ZhbHVlID0gY29tcHV0ZWQoKCkgPT4gZmllbGRWYWx1ZUlzRmlsbGVkKHByb3BzLm1vZGVsVmFsdWUpKVxuICB9XG5cbiAgaWYgKHN0YXRlLmVtaXRWYWx1ZSA9PT0gdm9pZCAwKSB7XG4gICAgc3RhdGUuZW1pdFZhbHVlID0gdmFsdWUgPT4ge1xuICAgICAgZW1pdCgndXBkYXRlOm1vZGVsVmFsdWUnLCB2YWx1ZSlcbiAgICB9XG4gIH1cblxuICBpZiAoc3RhdGUuY29udHJvbEV2ZW50cyA9PT0gdm9pZCAwKSB7XG4gICAgc3RhdGUuY29udHJvbEV2ZW50cyA9IHtcbiAgICAgIG9uRm9jdXNpbjogb25Db250cm9sRm9jdXNpbixcbiAgICAgIG9uRm9jdXNvdXQ6IG9uQ29udHJvbEZvY3Vzb3V0XG4gICAgfVxuICB9XG5cbiAgT2JqZWN0LmFzc2lnbihzdGF0ZSwge1xuICAgIGNsZWFyVmFsdWUsXG4gICAgb25Db250cm9sRm9jdXNpbixcbiAgICBvbkNvbnRyb2xGb2N1c291dCxcbiAgICBmb2N1c1xuICB9KVxuXG4gIGlmIChzdGF0ZS5jb21wdXRlZENvdW50ZXIgPT09IHZvaWQgMCkge1xuICAgIHN0YXRlLmNvbXB1dGVkQ291bnRlciA9IGNvbXB1dGVkKCgpID0+IHtcbiAgICAgIGlmIChwcm9wcy5jb3VudGVyICE9PSBmYWxzZSkge1xuICAgICAgICBjb25zdCBsZW4gPSB0eXBlb2YgcHJvcHMubW9kZWxWYWx1ZSA9PT0gJ3N0cmluZycgfHwgdHlwZW9mIHByb3BzLm1vZGVsVmFsdWUgPT09ICdudW1iZXInXG4gICAgICAgICAgPyAoJycgKyBwcm9wcy5tb2RlbFZhbHVlKS5sZW5ndGhcbiAgICAgICAgICA6IChBcnJheS5pc0FycmF5KHByb3BzLm1vZGVsVmFsdWUpID09PSB0cnVlID8gcHJvcHMubW9kZWxWYWx1ZS5sZW5ndGggOiAwKVxuXG4gICAgICAgIGNvbnN0IG1heCA9IHByb3BzLm1heGxlbmd0aCAhPT0gdm9pZCAwXG4gICAgICAgICAgPyBwcm9wcy5tYXhsZW5ndGhcbiAgICAgICAgICA6IHByb3BzLm1heFZhbHVlc1xuXG4gICAgICAgIHJldHVybiBsZW4gKyAobWF4ICE9PSB2b2lkIDAgPyAnIC8gJyArIG1heCA6ICcnKVxuICAgICAgfVxuICAgIH0pXG4gIH1cblxuICBjb25zdCB7XG4gICAgaXNEaXJ0eU1vZGVsLFxuICAgIGhhc1J1bGVzLFxuICAgIGhhc0Vycm9yLFxuICAgIGVycm9yTWVzc2FnZSxcbiAgICByZXNldFZhbGlkYXRpb25cbiAgfSA9IHVzZVZhbGlkYXRlKHN0YXRlLmZvY3VzZWQsIHN0YXRlLmlubmVyTG9hZGluZylcblxuICBjb25zdCBmbG9hdGluZ0xhYmVsID0gc3RhdGUuZmxvYXRpbmdMYWJlbCAhPT0gdm9pZCAwXG4gICAgPyBjb21wdXRlZCgoKSA9PiBwcm9wcy5zdGFja0xhYmVsID09PSB0cnVlIHx8IHN0YXRlLmZvY3VzZWQudmFsdWUgPT09IHRydWUgfHwgc3RhdGUuZmxvYXRpbmdMYWJlbC52YWx1ZSA9PT0gdHJ1ZSlcbiAgICA6IGNvbXB1dGVkKCgpID0+IHByb3BzLnN0YWNrTGFiZWwgPT09IHRydWUgfHwgc3RhdGUuZm9jdXNlZC52YWx1ZSA9PT0gdHJ1ZSB8fCBzdGF0ZS5oYXNWYWx1ZS52YWx1ZSA9PT0gdHJ1ZSlcblxuICBjb25zdCBzaG91bGRSZW5kZXJCb3R0b20gPSBjb21wdXRlZCgoKSA9PlxuICAgIHByb3BzLmJvdHRvbVNsb3RzID09PSB0cnVlXG4gICAgfHwgcHJvcHMuaGludCAhPT0gdm9pZCAwXG4gICAgfHwgaGFzUnVsZXMudmFsdWUgPT09IHRydWVcbiAgICB8fCBwcm9wcy5jb3VudGVyID09PSB0cnVlXG4gICAgfHwgcHJvcHMuZXJyb3IgIT09IG51bGxcbiAgKVxuXG4gIGNvbnN0IHN0eWxlVHlwZSA9IGNvbXB1dGVkKCgpID0+IHtcbiAgICBpZiAocHJvcHMuZmlsbGVkID09PSB0cnVlKSB7IHJldHVybiAnZmlsbGVkJyB9XG4gICAgaWYgKHByb3BzLm91dGxpbmVkID09PSB0cnVlKSB7IHJldHVybiAnb3V0bGluZWQnIH1cbiAgICBpZiAocHJvcHMuYm9yZGVybGVzcyA9PT0gdHJ1ZSkgeyByZXR1cm4gJ2JvcmRlcmxlc3MnIH1cbiAgICBpZiAocHJvcHMuc3RhbmRvdXQpIHsgcmV0dXJuICdzdGFuZG91dCcgfVxuICAgIHJldHVybiAnc3RhbmRhcmQnXG4gIH0pXG5cbiAgY29uc3QgY2xhc3NlcyA9IGNvbXB1dGVkKCgpID0+XG4gICAgYHEtZmllbGQgcm93IG5vLXdyYXAgaXRlbXMtc3RhcnQgcS1maWVsZC0tJHsgc3R5bGVUeXBlLnZhbHVlIH1gXG4gICAgKyAoc3RhdGUuZmllbGRDbGFzcyAhPT0gdm9pZCAwID8gYCAkeyBzdGF0ZS5maWVsZENsYXNzLnZhbHVlIH1gIDogJycpXG4gICAgKyAocHJvcHMucm91bmRlZCA9PT0gdHJ1ZSA/ICcgcS1maWVsZC0tcm91bmRlZCcgOiAnJylcbiAgICArIChwcm9wcy5zcXVhcmUgPT09IHRydWUgPyAnIHEtZmllbGQtLXNxdWFyZScgOiAnJylcbiAgICArIChmbG9hdGluZ0xhYmVsLnZhbHVlID09PSB0cnVlID8gJyBxLWZpZWxkLS1mbG9hdCcgOiAnJylcbiAgICArIChoYXNMYWJlbC52YWx1ZSA9PT0gdHJ1ZSA/ICcgcS1maWVsZC0tbGFiZWxlZCcgOiAnJylcbiAgICArIChwcm9wcy5kZW5zZSA9PT0gdHJ1ZSA/ICcgcS1maWVsZC0tZGVuc2UnIDogJycpXG4gICAgKyAocHJvcHMuaXRlbUFsaWduZWQgPT09IHRydWUgPyAnIHEtZmllbGQtLWl0ZW0tYWxpZ25lZCBxLWl0ZW0tdHlwZScgOiAnJylcbiAgICArIChzdGF0ZS5pc0RhcmsudmFsdWUgPT09IHRydWUgPyAnIHEtZmllbGQtLWRhcmsnIDogJycpXG4gICAgKyAoc3RhdGUuZ2V0Q29udHJvbCA9PT0gdm9pZCAwID8gJyBxLWZpZWxkLS1hdXRvLWhlaWdodCcgOiAnJylcbiAgICArIChzdGF0ZS5mb2N1c2VkLnZhbHVlID09PSB0cnVlID8gJyBxLWZpZWxkLS1mb2N1c2VkJyA6ICcnKVxuICAgICsgKGhhc0Vycm9yLnZhbHVlID09PSB0cnVlID8gJyBxLWZpZWxkLS1lcnJvcicgOiAnJylcbiAgICArIChoYXNFcnJvci52YWx1ZSA9PT0gdHJ1ZSB8fCBzdGF0ZS5mb2N1c2VkLnZhbHVlID09PSB0cnVlID8gJyBxLWZpZWxkLS1oaWdobGlnaHRlZCcgOiAnJylcbiAgICArIChwcm9wcy5oaWRlQm90dG9tU3BhY2UgIT09IHRydWUgJiYgc2hvdWxkUmVuZGVyQm90dG9tLnZhbHVlID09PSB0cnVlID8gJyBxLWZpZWxkLS13aXRoLWJvdHRvbScgOiAnJylcbiAgICArIChwcm9wcy5kaXNhYmxlID09PSB0cnVlID8gJyBxLWZpZWxkLS1kaXNhYmxlZCcgOiAocHJvcHMucmVhZG9ubHkgPT09IHRydWUgPyAnIHEtZmllbGQtLXJlYWRvbmx5JyA6ICcnKSlcbiAgKVxuXG4gIGNvbnN0IGNvbnRlbnRDbGFzcyA9IGNvbXB1dGVkKCgpID0+XG4gICAgJ3EtZmllbGRfX2NvbnRyb2wgcmVsYXRpdmUtcG9zaXRpb24gcm93IG5vLXdyYXAnXG4gICAgKyAocHJvcHMuYmdDb2xvciAhPT0gdm9pZCAwID8gYCBiZy0keyBwcm9wcy5iZ0NvbG9yIH1gIDogJycpXG4gICAgKyAoXG4gICAgICBoYXNFcnJvci52YWx1ZSA9PT0gdHJ1ZVxuICAgICAgICA/ICcgdGV4dC1uZWdhdGl2ZSdcbiAgICAgICAgOiAoXG4gICAgICAgICAgICB0eXBlb2YgcHJvcHMuc3RhbmRvdXQgPT09ICdzdHJpbmcnICYmIHByb3BzLnN0YW5kb3V0Lmxlbmd0aCA+IDAgJiYgc3RhdGUuZm9jdXNlZC52YWx1ZSA9PT0gdHJ1ZVxuICAgICAgICAgICAgICA/IGAgJHsgcHJvcHMuc3RhbmRvdXQgfWBcbiAgICAgICAgICAgICAgOiAocHJvcHMuY29sb3IgIT09IHZvaWQgMCA/IGAgdGV4dC0keyBwcm9wcy5jb2xvciB9YCA6ICcnKVxuICAgICAgICAgIClcbiAgICApXG4gIClcblxuICBjb25zdCBoYXNMYWJlbCA9IGNvbXB1dGVkKCgpID0+XG4gICAgcHJvcHMubGFiZWxTbG90ID09PSB0cnVlIHx8IHByb3BzLmxhYmVsICE9PSB2b2lkIDBcbiAgKVxuXG4gIGNvbnN0IGxhYmVsQ2xhc3MgPSBjb21wdXRlZCgoKSA9PlxuICAgICdxLWZpZWxkX19sYWJlbCBuby1wb2ludGVyLWV2ZW50cyBhYnNvbHV0ZSBlbGxpcHNpcydcbiAgICArIChwcm9wcy5sYWJlbENvbG9yICE9PSB2b2lkIDAgJiYgaGFzRXJyb3IudmFsdWUgIT09IHRydWUgPyBgIHRleHQtJHsgcHJvcHMubGFiZWxDb2xvciB9YCA6ICcnKVxuICApXG5cbiAgY29uc3QgY29udHJvbFNsb3RTY29wZSA9IGNvbXB1dGVkKCgpID0+ICh7XG4gICAgaWQ6IHN0YXRlLnRhcmdldFVpZC52YWx1ZSxcbiAgICBlZGl0YWJsZTogc3RhdGUuZWRpdGFibGUudmFsdWUsXG4gICAgZm9jdXNlZDogc3RhdGUuZm9jdXNlZC52YWx1ZSxcbiAgICBmbG9hdGluZ0xhYmVsOiBmbG9hdGluZ0xhYmVsLnZhbHVlLFxuICAgIG1vZGVsVmFsdWU6IHByb3BzLm1vZGVsVmFsdWUsXG4gICAgZW1pdFZhbHVlOiBzdGF0ZS5lbWl0VmFsdWVcbiAgfSkpXG5cbiAgY29uc3QgYXR0cmlidXRlcyA9IGNvbXB1dGVkKCgpID0+IHtcbiAgICBjb25zdCBhY2MgPSB7XG4gICAgICBmb3I6IHN0YXRlLnRhcmdldFVpZC52YWx1ZVxuICAgIH1cblxuICAgIGlmIChwcm9wcy5kaXNhYmxlID09PSB0cnVlKSB7XG4gICAgICBhY2NbICdhcmlhLWRpc2FibGVkJyBdID0gJ3RydWUnXG4gICAgfVxuICAgIGVsc2UgaWYgKHByb3BzLnJlYWRvbmx5ID09PSB0cnVlKSB7XG4gICAgICBhY2NbICdhcmlhLXJlYWRvbmx5JyBdID0gJ3RydWUnXG4gICAgfVxuXG4gICAgcmV0dXJuIGFjY1xuICB9KVxuXG4gIHdhdGNoKCgpID0+IHByb3BzLmZvciwgdmFsID0+IHtcbiAgICAvLyBkb24ndCB0cmFuc2Zvcm0gdGFyZ2V0VWlkIGludG8gYSBjb21wdXRlZFxuICAgIC8vIHByb3AgYXMgaXQgd2lsbCBicmVhayBTU1JcbiAgICBzdGF0ZS50YXJnZXRVaWQudmFsdWUgPSBnZXRUYXJnZXRVaWQodmFsKVxuICB9KVxuXG4gIGZ1bmN0aW9uIGZvY3VzSGFuZGxlciAoKSB7XG4gICAgY29uc3QgZWwgPSBkb2N1bWVudC5hY3RpdmVFbGVtZW50XG4gICAgbGV0IHRhcmdldCA9IHN0YXRlLnRhcmdldFJlZiAhPT0gdm9pZCAwICYmIHN0YXRlLnRhcmdldFJlZi52YWx1ZVxuXG4gICAgaWYgKHRhcmdldCAmJiAoZWwgPT09IG51bGwgfHwgZWwuaWQgIT09IHN0YXRlLnRhcmdldFVpZC52YWx1ZSkpIHtcbiAgICAgIHRhcmdldC5oYXNBdHRyaWJ1dGUoJ3RhYmluZGV4JykgPT09IHRydWUgfHwgKHRhcmdldCA9IHRhcmdldC5xdWVyeVNlbGVjdG9yKCdbdGFiaW5kZXhdJykpXG4gICAgICBpZiAodGFyZ2V0ICYmIHRhcmdldCAhPT0gZWwpIHtcbiAgICAgICAgdGFyZ2V0LmZvY3VzKHsgcHJldmVudFNjcm9sbDogdHJ1ZSB9KVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGZvY3VzICgpIHtcbiAgICBhZGRGb2N1c0ZuKGZvY3VzSGFuZGxlcilcbiAgfVxuXG4gIGZ1bmN0aW9uIGJsdXIgKCkge1xuICAgIHJlbW92ZUZvY3VzRm4oZm9jdXNIYW5kbGVyKVxuICAgIGNvbnN0IGVsID0gZG9jdW1lbnQuYWN0aXZlRWxlbWVudFxuICAgIGlmIChlbCAhPT0gbnVsbCAmJiBzdGF0ZS5yb290UmVmLnZhbHVlLmNvbnRhaW5zKGVsKSkge1xuICAgICAgZWwuYmx1cigpXG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gb25Db250cm9sRm9jdXNpbiAoZSkge1xuICAgIGNsZWFyVGltZW91dChmb2N1c291dFRpbWVyKVxuICAgIGlmIChzdGF0ZS5lZGl0YWJsZS52YWx1ZSA9PT0gdHJ1ZSAmJiBzdGF0ZS5mb2N1c2VkLnZhbHVlID09PSBmYWxzZSkge1xuICAgICAgc3RhdGUuZm9jdXNlZC52YWx1ZSA9IHRydWVcbiAgICAgIGVtaXQoJ2ZvY3VzJywgZSlcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBvbkNvbnRyb2xGb2N1c291dCAoZSwgdGhlbikge1xuICAgIGNsZWFyVGltZW91dChmb2N1c291dFRpbWVyKVxuICAgIGZvY3Vzb3V0VGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIGlmIChcbiAgICAgICAgZG9jdW1lbnQuaGFzRm9jdXMoKSA9PT0gdHJ1ZSAmJiAoXG4gICAgICAgICAgc3RhdGUuaGFzUG9wdXBPcGVuID09PSB0cnVlXG4gICAgICAgICAgfHwgc3RhdGUuY29udHJvbFJlZiA9PT0gdm9pZCAwXG4gICAgICAgICAgfHwgc3RhdGUuY29udHJvbFJlZi52YWx1ZSA9PT0gbnVsbFxuICAgICAgICAgIHx8IHN0YXRlLmNvbnRyb2xSZWYudmFsdWUuY29udGFpbnMoZG9jdW1lbnQuYWN0aXZlRWxlbWVudCkgIT09IGZhbHNlXG4gICAgICAgIClcbiAgICAgICkge1xuICAgICAgICByZXR1cm5cbiAgICAgIH1cblxuICAgICAgaWYgKHN0YXRlLmZvY3VzZWQudmFsdWUgPT09IHRydWUpIHtcbiAgICAgICAgc3RhdGUuZm9jdXNlZC52YWx1ZSA9IGZhbHNlXG4gICAgICAgIGVtaXQoJ2JsdXInLCBlKVxuICAgICAgfVxuXG4gICAgICB0aGVuICE9PSB2b2lkIDAgJiYgdGhlbigpXG4gICAgfSlcbiAgfVxuXG4gIGZ1bmN0aW9uIGNsZWFyVmFsdWUgKGUpIHtcbiAgICAvLyBwcmV2ZW50IGFjdGl2YXRpbmcgdGhlIGZpZWxkIGJ1dCBrZWVwIGZvY3VzIG9uIGRlc2t0b3BcbiAgICBzdG9wQW5kUHJldmVudChlKVxuXG4gICAgaWYgKCRxLnBsYXRmb3JtLmlzLm1vYmlsZSAhPT0gdHJ1ZSkge1xuICAgICAgY29uc3QgZWwgPSAoc3RhdGUudGFyZ2V0UmVmICE9PSB2b2lkIDAgJiYgc3RhdGUudGFyZ2V0UmVmLnZhbHVlKSB8fCBzdGF0ZS5yb290UmVmLnZhbHVlXG4gICAgICBlbC5mb2N1cygpXG4gICAgfVxuICAgIGVsc2UgaWYgKHN0YXRlLnJvb3RSZWYudmFsdWUuY29udGFpbnMoZG9jdW1lbnQuYWN0aXZlRWxlbWVudCkgPT09IHRydWUpIHtcbiAgICAgIGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQuYmx1cigpXG4gICAgfVxuXG4gICAgaWYgKHByb3BzLnR5cGUgPT09ICdmaWxlJykgeyAvLyBUT0RPIHZ1ZTNcbiAgICAgIC8vIGRvIG5vdCBsZXQgZm9jdXMgYmUgdHJpZ2dlcmVkXG4gICAgICAvLyBhcyBpdCB3aWxsIG1ha2UgdGhlIG5hdGl2ZSBmaWxlIGRpYWxvZ1xuICAgICAgLy8gYXBwZWFyIGZvciBhbm90aGVyIHNlbGVjdGlvblxuICAgICAgc3RhdGUuaW5wdXRSZWYudmFsdWUudmFsdWUgPSBudWxsXG4gICAgfVxuXG4gICAgZW1pdCgndXBkYXRlOm1vZGVsVmFsdWUnLCBudWxsKVxuICAgIGVtaXQoJ2NsZWFyJywgcHJvcHMubW9kZWxWYWx1ZSlcblxuICAgIG5leHRUaWNrKCgpID0+IHtcbiAgICAgIHJlc2V0VmFsaWRhdGlvbigpXG5cbiAgICAgIGlmICgkcS5wbGF0Zm9ybS5pcy5tb2JpbGUgIT09IHRydWUpIHtcbiAgICAgICAgaXNEaXJ0eU1vZGVsLnZhbHVlID0gZmFsc2VcbiAgICAgIH1cbiAgICB9KVxuICB9XG5cbiAgZnVuY3Rpb24gZ2V0Q29udGVudCAoKSB7XG4gICAgY29uc3Qgbm9kZSA9IFtdXG5cbiAgICBzbG90cy5wcmVwZW5kICE9PSB2b2lkIDAgJiYgbm9kZS5wdXNoKFxuICAgICAgaCgnZGl2Jywge1xuICAgICAgICBjbGFzczogJ3EtZmllbGRfX3ByZXBlbmQgcS1maWVsZF9fbWFyZ2luYWwgcm93IG5vLXdyYXAgaXRlbXMtY2VudGVyJyxcbiAgICAgICAga2V5OiAncHJlcGVuZCcsXG4gICAgICAgIG9uQ2xpY2s6IHByZXZlbnRcbiAgICAgIH0sIHNsb3RzLnByZXBlbmQoKSlcbiAgICApXG5cbiAgICBub2RlLnB1c2goXG4gICAgICBoKCdkaXYnLCB7XG4gICAgICAgIGNsYXNzOiAncS1maWVsZF9fY29udHJvbC1jb250YWluZXIgY29sIHJlbGF0aXZlLXBvc2l0aW9uIHJvdyBuby13cmFwIHEtYW5jaG9yLS1za2lwJ1xuICAgICAgfSwgZ2V0Q29udHJvbENvbnRhaW5lcigpKVxuICAgIClcblxuICAgIGhhc0Vycm9yLnZhbHVlID09PSB0cnVlICYmIHByb3BzLm5vRXJyb3JJY29uID09PSBmYWxzZSAmJiBub2RlLnB1c2goXG4gICAgICBnZXRJbm5lckFwcGVuZE5vZGUoJ2Vycm9yJywgW1xuICAgICAgICBoKFFJY29uLCB7IG5hbWU6ICRxLmljb25TZXQuZmllbGQuZXJyb3IsIGNvbG9yOiAnbmVnYXRpdmUnIH0pXG4gICAgICBdKVxuICAgIClcblxuICAgIGlmIChwcm9wcy5sb2FkaW5nID09PSB0cnVlIHx8IHN0YXRlLmlubmVyTG9hZGluZy52YWx1ZSA9PT0gdHJ1ZSkge1xuICAgICAgbm9kZS5wdXNoKFxuICAgICAgICBnZXRJbm5lckFwcGVuZE5vZGUoXG4gICAgICAgICAgJ2lubmVyLWxvYWRpbmctYXBwZW5kJyxcbiAgICAgICAgICBzbG90cy5sb2FkaW5nICE9PSB2b2lkIDBcbiAgICAgICAgICAgID8gc2xvdHMubG9hZGluZygpXG4gICAgICAgICAgICA6IFsgaChRU3Bpbm5lciwgeyBjb2xvcjogcHJvcHMuY29sb3IgfSkgXVxuICAgICAgICApXG4gICAgICApXG4gICAgfVxuICAgIGVsc2UgaWYgKHByb3BzLmNsZWFyYWJsZSA9PT0gdHJ1ZSAmJiBzdGF0ZS5oYXNWYWx1ZS52YWx1ZSA9PT0gdHJ1ZSAmJiBzdGF0ZS5lZGl0YWJsZS52YWx1ZSA9PT0gdHJ1ZSkge1xuICAgICAgbm9kZS5wdXNoKFxuICAgICAgICBnZXRJbm5lckFwcGVuZE5vZGUoJ2lubmVyLWNsZWFyYWJsZS1hcHBlbmQnLCBbXG4gICAgICAgICAgaChRSWNvbiwge1xuICAgICAgICAgICAgY2xhc3M6ICdxLWZpZWxkX19mb2N1c2FibGUtYWN0aW9uJyxcbiAgICAgICAgICAgIHRhZzogJ2J1dHRvbicsXG4gICAgICAgICAgICBuYW1lOiBwcm9wcy5jbGVhckljb24gfHwgJHEuaWNvblNldC5maWVsZC5jbGVhcixcbiAgICAgICAgICAgIHRhYmluZGV4OiAwLFxuICAgICAgICAgICAgdHlwZTogJ2J1dHRvbicsXG4gICAgICAgICAgICAnYXJpYS1oaWRkZW4nOiBudWxsLFxuICAgICAgICAgICAgcm9sZTogbnVsbCxcbiAgICAgICAgICAgIG9uQ2xpY2s6IGNsZWFyVmFsdWVcbiAgICAgICAgICB9KVxuICAgICAgICBdKVxuICAgICAgKVxuICAgIH1cblxuICAgIHNsb3RzLmFwcGVuZCAhPT0gdm9pZCAwICYmIG5vZGUucHVzaChcbiAgICAgIGgoJ2RpdicsIHtcbiAgICAgICAgY2xhc3M6ICdxLWZpZWxkX19hcHBlbmQgcS1maWVsZF9fbWFyZ2luYWwgcm93IG5vLXdyYXAgaXRlbXMtY2VudGVyJyxcbiAgICAgICAga2V5OiAnYXBwZW5kJyxcbiAgICAgICAgb25DbGljazogcHJldmVudFxuICAgICAgfSwgc2xvdHMuYXBwZW5kKCkpXG4gICAgKVxuXG4gICAgc3RhdGUuZ2V0SW5uZXJBcHBlbmQgIT09IHZvaWQgMCAmJiBub2RlLnB1c2goXG4gICAgICBnZXRJbm5lckFwcGVuZE5vZGUoJ2lubmVyLWFwcGVuZCcsIHN0YXRlLmdldElubmVyQXBwZW5kKCkpXG4gICAgKVxuXG4gICAgc3RhdGUuZ2V0Q29udHJvbENoaWxkICE9PSB2b2lkIDAgJiYgbm9kZS5wdXNoKFxuICAgICAgc3RhdGUuZ2V0Q29udHJvbENoaWxkKClcbiAgICApXG5cbiAgICByZXR1cm4gbm9kZVxuICB9XG5cbiAgZnVuY3Rpb24gZ2V0Q29udHJvbENvbnRhaW5lciAoKSB7XG4gICAgY29uc3Qgbm9kZSA9IFtdXG5cbiAgICBwcm9wcy5wcmVmaXggIT09IHZvaWQgMCAmJiBwcm9wcy5wcmVmaXggIT09IG51bGwgJiYgbm9kZS5wdXNoKFxuICAgICAgaCgnZGl2Jywge1xuICAgICAgICBjbGFzczogJ3EtZmllbGRfX3ByZWZpeCBuby1wb2ludGVyLWV2ZW50cyByb3cgaXRlbXMtY2VudGVyJ1xuICAgICAgfSwgcHJvcHMucHJlZml4KVxuICAgIClcblxuICAgIGlmIChzdGF0ZS5nZXRTaGFkb3dDb250cm9sICE9PSB2b2lkIDAgJiYgc3RhdGUuaGFzU2hhZG93LnZhbHVlID09PSB0cnVlKSB7XG4gICAgICBub2RlLnB1c2goXG4gICAgICAgIHN0YXRlLmdldFNoYWRvd0NvbnRyb2woKVxuICAgICAgKVxuICAgIH1cblxuICAgIGlmIChzdGF0ZS5nZXRDb250cm9sICE9PSB2b2lkIDApIHtcbiAgICAgIG5vZGUucHVzaChzdGF0ZS5nZXRDb250cm9sKCkpXG4gICAgfVxuICAgIC8vIGludGVybmFsIHVzYWdlIG9ubHk6XG4gICAgZWxzZSBpZiAoc2xvdHMucmF3Q29udHJvbCAhPT0gdm9pZCAwKSB7XG4gICAgICBub2RlLnB1c2goc2xvdHMucmF3Q29udHJvbCgpKVxuICAgIH1cbiAgICBlbHNlIGlmIChzbG90cy5jb250cm9sICE9PSB2b2lkIDApIHtcbiAgICAgIG5vZGUucHVzaChcbiAgICAgICAgaCgnZGl2Jywge1xuICAgICAgICAgIHJlZjogc3RhdGUudGFyZ2V0UmVmLFxuICAgICAgICAgIGNsYXNzOiAncS1maWVsZF9fbmF0aXZlIHJvdycsXG4gICAgICAgICAgLi4uc3RhdGUuc3BsaXRBdHRycy5hdHRyaWJ1dGVzLnZhbHVlLFxuICAgICAgICAgICdkYXRhLWF1dG9mb2N1cyc6IHByb3BzLmF1dG9mb2N1cyA9PT0gdHJ1ZSB8fCB2b2lkIDBcbiAgICAgICAgfSwgc2xvdHMuY29udHJvbChjb250cm9sU2xvdFNjb3BlLnZhbHVlKSlcbiAgICAgIClcbiAgICB9XG5cbiAgICBoYXNMYWJlbC52YWx1ZSA9PT0gdHJ1ZSAmJiBub2RlLnB1c2goXG4gICAgICBoKCdkaXYnLCB7XG4gICAgICAgIGNsYXNzOiBsYWJlbENsYXNzLnZhbHVlXG4gICAgICB9LCBoU2xvdChzbG90cy5sYWJlbCwgcHJvcHMubGFiZWwpKVxuICAgIClcblxuICAgIHByb3BzLnN1ZmZpeCAhPT0gdm9pZCAwICYmIHByb3BzLnN1ZmZpeCAhPT0gbnVsbCAmJiBub2RlLnB1c2goXG4gICAgICBoKCdkaXYnLCB7XG4gICAgICAgIGNsYXNzOiAncS1maWVsZF9fc3VmZml4IG5vLXBvaW50ZXItZXZlbnRzIHJvdyBpdGVtcy1jZW50ZXInXG4gICAgICB9LCBwcm9wcy5zdWZmaXgpXG4gICAgKVxuXG4gICAgcmV0dXJuIG5vZGUuY29uY2F0KGhTbG90KHNsb3RzLmRlZmF1bHQpKVxuICB9XG5cbiAgZnVuY3Rpb24gZ2V0Qm90dG9tICgpIHtcbiAgICBsZXQgbXNnLCBrZXlcblxuICAgIGlmIChoYXNFcnJvci52YWx1ZSA9PT0gdHJ1ZSkge1xuICAgICAgaWYgKGVycm9yTWVzc2FnZS52YWx1ZSAhPT0gbnVsbCkge1xuICAgICAgICBtc2cgPSBbIGgoJ2RpdicsIHsgcm9sZTogJ2FsZXJ0JyB9LCBlcnJvck1lc3NhZ2UudmFsdWUpIF1cbiAgICAgICAga2V5ID0gYHEtLXNsb3QtZXJyb3ItJHsgZXJyb3JNZXNzYWdlLnZhbHVlIH1gXG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgbXNnID0gaFNsb3Qoc2xvdHMuZXJyb3IpXG4gICAgICAgIGtleSA9ICdxLS1zbG90LWVycm9yJ1xuICAgICAgfVxuICAgIH1cbiAgICBlbHNlIGlmIChwcm9wcy5oaWRlSGludCAhPT0gdHJ1ZSB8fCBzdGF0ZS5mb2N1c2VkLnZhbHVlID09PSB0cnVlKSB7XG4gICAgICBpZiAocHJvcHMuaGludCAhPT0gdm9pZCAwKSB7XG4gICAgICAgIG1zZyA9IFsgaCgnZGl2JywgcHJvcHMuaGludCkgXVxuICAgICAgICBrZXkgPSBgcS0tc2xvdC1oaW50LSR7IHByb3BzLmhpbnQgfWBcbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICBtc2cgPSBoU2xvdChzbG90cy5oaW50KVxuICAgICAgICBrZXkgPSAncS0tc2xvdC1oaW50J1xuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IGhhc0NvdW50ZXIgPSBwcm9wcy5jb3VudGVyID09PSB0cnVlIHx8IHNsb3RzLmNvdW50ZXIgIT09IHZvaWQgMFxuXG4gICAgaWYgKHByb3BzLmhpZGVCb3R0b21TcGFjZSA9PT0gdHJ1ZSAmJiBoYXNDb3VudGVyID09PSBmYWxzZSAmJiBtc2cgPT09IHZvaWQgMCkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgY29uc3QgbWFpbiA9IGgoJ2RpdicsIHtcbiAgICAgIGtleSxcbiAgICAgIGNsYXNzOiAncS1maWVsZF9fbWVzc2FnZXMgY29sJ1xuICAgIH0sIG1zZylcblxuICAgIHJldHVybiBoKCdkaXYnLCB7XG4gICAgICBjbGFzczogJ3EtZmllbGRfX2JvdHRvbSByb3cgaXRlbXMtc3RhcnQgcS1maWVsZF9fYm90dG9tLS0nXG4gICAgICAgICsgKHByb3BzLmhpZGVCb3R0b21TcGFjZSAhPT0gdHJ1ZSA/ICdhbmltYXRlZCcgOiAnc3RhbGUnKVxuICAgIH0sIFtcbiAgICAgIHByb3BzLmhpZGVCb3R0b21TcGFjZSA9PT0gdHJ1ZVxuICAgICAgICA/IG1haW5cbiAgICAgICAgOiBoKFRyYW5zaXRpb24sIHsgbmFtZTogJ3EtdHJhbnNpdGlvbi0tZmllbGQtbWVzc2FnZScgfSwgKCkgPT4gbWFpbiksXG5cbiAgICAgIGhhc0NvdW50ZXIgPT09IHRydWVcbiAgICAgICAgPyBoKCdkaXYnLCB7XG4gICAgICAgICAgY2xhc3M6ICdxLWZpZWxkX19jb3VudGVyJ1xuICAgICAgICB9LCBzbG90cy5jb3VudGVyICE9PSB2b2lkIDAgPyBzbG90cy5jb3VudGVyKCkgOiBzdGF0ZS5jb21wdXRlZENvdW50ZXIudmFsdWUpXG4gICAgICAgIDogbnVsbFxuICAgIF0pXG4gIH1cblxuICBmdW5jdGlvbiBnZXRJbm5lckFwcGVuZE5vZGUgKGtleSwgY29udGVudCkge1xuICAgIHJldHVybiBjb250ZW50ID09PSBudWxsXG4gICAgICA/IG51bGxcbiAgICAgIDogaCgnZGl2Jywge1xuICAgICAgICBrZXksXG4gICAgICAgIGNsYXNzOiAncS1maWVsZF9fYXBwZW5kIHEtZmllbGRfX21hcmdpbmFsIHJvdyBuby13cmFwIGl0ZW1zLWNlbnRlciBxLWFuY2hvci0tc2tpcCdcbiAgICAgIH0sIGNvbnRlbnQpXG4gIH1cblxuICAvLyBleHBvc2UgcHVibGljIG1ldGhvZHNcbiAgT2JqZWN0LmFzc2lnbihwcm94eSwgeyBmb2N1cywgYmx1ciB9KVxuXG4gIGxldCBzaG91bGRBY3RpdmF0ZSA9IGZhbHNlXG5cbiAgb25EZWFjdGl2YXRlZCgoKSA9PiB7XG4gICAgc2hvdWxkQWN0aXZhdGUgPSB0cnVlXG4gIH0pXG5cbiAgb25BY3RpdmF0ZWQoKCkgPT4ge1xuICAgIHNob3VsZEFjdGl2YXRlID09PSB0cnVlICYmIHByb3BzLmF1dG9mb2N1cyA9PT0gdHJ1ZSAmJiBwcm94eS5mb2N1cygpXG4gIH0pXG5cbiAgb25Nb3VudGVkKCgpID0+IHtcbiAgICBpZiAoaXNSdW50aW1lU3NyUHJlSHlkcmF0aW9uLnZhbHVlID09PSB0cnVlICYmIHByb3BzLmZvciA9PT0gdm9pZCAwKSB7XG4gICAgICBzdGF0ZS50YXJnZXRVaWQudmFsdWUgPSBnZXRUYXJnZXRVaWQoKVxuICAgIH1cblxuICAgIHByb3BzLmF1dG9mb2N1cyA9PT0gdHJ1ZSAmJiBwcm94eS5mb2N1cygpXG4gIH0pXG5cbiAgb25CZWZvcmVVbm1vdW50KCgpID0+IHtcbiAgICBjbGVhclRpbWVvdXQoZm9jdXNvdXRUaW1lcilcbiAgfSlcblxuICByZXR1cm4gZnVuY3Rpb24gcmVuZGVyRmllbGQgKCkge1xuICAgIGNvbnN0IGxhYmVsQXR0cnMgPSBzdGF0ZS5nZXRDb250cm9sID09PSB2b2lkIDAgJiYgc2xvdHMuY29udHJvbCA9PT0gdm9pZCAwXG4gICAgICA/IHtcbiAgICAgICAgICAuLi5zdGF0ZS5zcGxpdEF0dHJzLmF0dHJpYnV0ZXMudmFsdWUsXG4gICAgICAgICAgJ2RhdGEtYXV0b2ZvY3VzJzogcHJvcHMuYXV0b2ZvY3VzLFxuICAgICAgICAgIC4uLmF0dHJpYnV0ZXMudmFsdWVcbiAgICAgICAgfVxuICAgICAgOiBhdHRyaWJ1dGVzLnZhbHVlXG5cbiAgICByZXR1cm4gaCgnbGFiZWwnLCB7XG4gICAgICByZWY6IHN0YXRlLnJvb3RSZWYsXG4gICAgICBjbGFzczogW1xuICAgICAgICBjbGFzc2VzLnZhbHVlLFxuICAgICAgICBhdHRycy5jbGFzc1xuICAgICAgXSxcbiAgICAgIHN0eWxlOiBhdHRycy5zdHlsZSxcbiAgICAgIC4uLmxhYmVsQXR0cnNcbiAgICB9LCBbXG4gICAgICBzbG90cy5iZWZvcmUgIT09IHZvaWQgMFxuICAgICAgICA/IGgoJ2RpdicsIHtcbiAgICAgICAgICBjbGFzczogJ3EtZmllbGRfX2JlZm9yZSBxLWZpZWxkX19tYXJnaW5hbCByb3cgbm8td3JhcCBpdGVtcy1jZW50ZXInLFxuICAgICAgICAgIG9uQ2xpY2s6IHByZXZlbnRcbiAgICAgICAgfSwgc2xvdHMuYmVmb3JlKCkpXG4gICAgICAgIDogbnVsbCxcblxuICAgICAgaCgnZGl2Jywge1xuICAgICAgICBjbGFzczogJ3EtZmllbGRfX2lubmVyIHJlbGF0aXZlLXBvc2l0aW9uIGNvbCBzZWxmLXN0cmV0Y2gnXG4gICAgICB9LCBbXG4gICAgICAgIGgoJ2RpdicsIHtcbiAgICAgICAgICByZWY6IHN0YXRlLmNvbnRyb2xSZWYsXG4gICAgICAgICAgY2xhc3M6IGNvbnRlbnRDbGFzcy52YWx1ZSxcbiAgICAgICAgICB0YWJpbmRleDogLTEsXG4gICAgICAgICAgLi4uc3RhdGUuY29udHJvbEV2ZW50c1xuICAgICAgICB9LCBnZXRDb250ZW50KCkpLFxuXG4gICAgICAgIHNob3VsZFJlbmRlckJvdHRvbS52YWx1ZSA9PT0gdHJ1ZVxuICAgICAgICAgID8gZ2V0Qm90dG9tKClcbiAgICAgICAgICA6IG51bGxcbiAgICAgIF0pLFxuXG4gICAgICBzbG90cy5hZnRlciAhPT0gdm9pZCAwXG4gICAgICAgID8gaCgnZGl2Jywge1xuICAgICAgICAgIGNsYXNzOiAncS1maWVsZF9fYWZ0ZXIgcS1maWVsZF9fbWFyZ2luYWwgcm93IG5vLXdyYXAgaXRlbXMtY2VudGVyJyxcbiAgICAgICAgICBvbkNsaWNrOiBwcmV2ZW50XG4gICAgICAgIH0sIHNsb3RzLmFmdGVyKCkpXG4gICAgICAgIDogbnVsbFxuICAgIF0pXG4gIH1cbn1cbiIsImltcG9ydCB7IHJlZiwgd2F0Y2gsIG5leHRUaWNrIH0gZnJvbSAndnVlJ1xuXG5pbXBvcnQgeyBzaG91bGRJZ25vcmVLZXkgfSBmcm9tICcuLi8uLi91dGlscy9wcml2YXRlL2tleS1jb21wb3NpdGlvbi5qcydcblxuLy8gbGVhdmUgTkFNRURfTUFTS1MgYXQgdG9wIG9mIGZpbGUgKGNvZGUgcmVmZXJlbmNlZCBmcm9tIGRvY3MpXG5jb25zdCBOQU1FRF9NQVNLUyA9IHtcbiAgZGF0ZTogJyMjIyMvIyMvIyMnLFxuICBkYXRldGltZTogJyMjIyMvIyMvIyMgIyM6IyMnLFxuICB0aW1lOiAnIyM6IyMnLFxuICBmdWxsdGltZTogJyMjOiMjOiMjJyxcbiAgcGhvbmU6ICcoIyMjKSAjIyMgLSAjIyMjJyxcbiAgY2FyZDogJyMjIyMgIyMjIyAjIyMjICMjIyMnXG59XG5cbmNvbnN0IFRPS0VOUyA9IHtcbiAgJyMnOiB7IHBhdHRlcm46ICdbXFxcXGRdJywgbmVnYXRlOiAnW15cXFxcZF0nIH0sXG5cbiAgUzogeyBwYXR0ZXJuOiAnW2EtekEtWl0nLCBuZWdhdGU6ICdbXmEtekEtWl0nIH0sXG4gIE46IHsgcGF0dGVybjogJ1swLTlhLXpBLVpdJywgbmVnYXRlOiAnW14wLTlhLXpBLVpdJyB9LFxuXG4gIEE6IHsgcGF0dGVybjogJ1thLXpBLVpdJywgbmVnYXRlOiAnW15hLXpBLVpdJywgdHJhbnNmb3JtOiB2ID0+IHYudG9Mb2NhbGVVcHBlckNhc2UoKSB9LFxuICBhOiB7IHBhdHRlcm46ICdbYS16QS1aXScsIG5lZ2F0ZTogJ1teYS16QS1aXScsIHRyYW5zZm9ybTogdiA9PiB2LnRvTG9jYWxlTG93ZXJDYXNlKCkgfSxcblxuICBYOiB7IHBhdHRlcm46ICdbMC05YS16QS1aXScsIG5lZ2F0ZTogJ1teMC05YS16QS1aXScsIHRyYW5zZm9ybTogdiA9PiB2LnRvTG9jYWxlVXBwZXJDYXNlKCkgfSxcbiAgeDogeyBwYXR0ZXJuOiAnWzAtOWEtekEtWl0nLCBuZWdhdGU6ICdbXjAtOWEtekEtWl0nLCB0cmFuc2Zvcm06IHYgPT4gdi50b0xvY2FsZUxvd2VyQ2FzZSgpIH1cbn1cblxuY29uc3QgS0VZUyA9IE9iamVjdC5rZXlzKFRPS0VOUylcbktFWVMuZm9yRWFjaChrZXkgPT4ge1xuICBUT0tFTlNbIGtleSBdLnJlZ2V4ID0gbmV3IFJlZ0V4cChUT0tFTlNbIGtleSBdLnBhdHRlcm4pXG59KVxuXG5jb25zdFxuICB0b2tlblJlZ2V4TWFzayA9IG5ldyBSZWdFeHAoJ1xcXFxcXFxcKFteLiorP14ke30oKXwoW1xcXFxdXSl8KFsuKis/XiR7fSgpfFtcXFxcXV0pfChbJyArIEtFWVMuam9pbignJykgKyAnXSl8KC4pJywgJ2cnKSxcbiAgZXNjUmVnZXggPSAvWy4qKz9eJHt9KCl8W1xcXVxcXFxdL2dcblxuY29uc3QgTUFSS0VSID0gU3RyaW5nLmZyb21DaGFyQ29kZSgxKVxuXG5leHBvcnQgY29uc3QgdXNlTWFza1Byb3BzID0ge1xuICBtYXNrOiBTdHJpbmcsXG4gIHJldmVyc2VGaWxsTWFzazogQm9vbGVhbixcbiAgZmlsbE1hc2s6IFsgQm9vbGVhbiwgU3RyaW5nIF0sXG4gIHVubWFza2VkVmFsdWU6IEJvb2xlYW5cbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gKHByb3BzLCBlbWl0LCBlbWl0VmFsdWUsIGlucHV0UmVmKSB7XG4gIGxldCBtYXNrTWFya2VkLCBtYXNrUmVwbGFjZWQsIGNvbXB1dGVkTWFzaywgY29tcHV0ZWRVbm1hc2tcblxuICBjb25zdCBoYXNNYXNrID0gcmVmKG51bGwpXG4gIGNvbnN0IGlubmVyVmFsdWUgPSByZWYoZ2V0SW5pdGlhbE1hc2tlZFZhbHVlKCkpXG5cbiAgZnVuY3Rpb24gZ2V0SXNUeXBlVGV4dCAoKSB7XG4gICAgcmV0dXJuIHByb3BzLmF1dG9ncm93ID09PSB0cnVlXG4gICAgICB8fCBbICd0ZXh0YXJlYScsICd0ZXh0JywgJ3NlYXJjaCcsICd1cmwnLCAndGVsJywgJ3Bhc3N3b3JkJyBdLmluY2x1ZGVzKHByb3BzLnR5cGUpXG4gIH1cblxuICB3YXRjaCgoKSA9PiBwcm9wcy50eXBlICsgcHJvcHMuYXV0b2dyb3csIHVwZGF0ZU1hc2tJbnRlcm5hbHMpXG5cbiAgd2F0Y2goKCkgPT4gcHJvcHMubWFzaywgdiA9PiB7XG4gICAgaWYgKHYgIT09IHZvaWQgMCkge1xuICAgICAgdXBkYXRlTWFza1ZhbHVlKGlubmVyVmFsdWUudmFsdWUsIHRydWUpXG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgY29uc3QgdmFsID0gdW5tYXNrVmFsdWUoaW5uZXJWYWx1ZS52YWx1ZSlcbiAgICAgIHVwZGF0ZU1hc2tJbnRlcm5hbHMoKVxuICAgICAgcHJvcHMubW9kZWxWYWx1ZSAhPT0gdmFsICYmIGVtaXQoJ3VwZGF0ZTptb2RlbFZhbHVlJywgdmFsKVxuICAgIH1cbiAgfSlcblxuICB3YXRjaCgoKSA9PiBwcm9wcy5maWxsTWFzayArIHByb3BzLnJldmVyc2VGaWxsTWFzaywgKCkgPT4ge1xuICAgIGhhc01hc2sudmFsdWUgPT09IHRydWUgJiYgdXBkYXRlTWFza1ZhbHVlKGlubmVyVmFsdWUudmFsdWUsIHRydWUpXG4gIH0pXG5cbiAgd2F0Y2goKCkgPT4gcHJvcHMudW5tYXNrZWRWYWx1ZSwgKCkgPT4ge1xuICAgIGhhc01hc2sudmFsdWUgPT09IHRydWUgJiYgdXBkYXRlTWFza1ZhbHVlKGlubmVyVmFsdWUudmFsdWUpXG4gIH0pXG5cbiAgZnVuY3Rpb24gZ2V0SW5pdGlhbE1hc2tlZFZhbHVlICgpIHtcbiAgICB1cGRhdGVNYXNrSW50ZXJuYWxzKClcblxuICAgIGlmIChoYXNNYXNrLnZhbHVlID09PSB0cnVlKSB7XG4gICAgICBjb25zdCBtYXNrZWQgPSBtYXNrVmFsdWUodW5tYXNrVmFsdWUocHJvcHMubW9kZWxWYWx1ZSkpXG5cbiAgICAgIHJldHVybiBwcm9wcy5maWxsTWFzayAhPT0gZmFsc2VcbiAgICAgICAgPyBmaWxsV2l0aE1hc2sobWFza2VkKVxuICAgICAgICA6IG1hc2tlZFxuICAgIH1cblxuICAgIHJldHVybiBwcm9wcy5tb2RlbFZhbHVlXG4gIH1cblxuICBmdW5jdGlvbiBnZXRQYWRkZWRNYXNrTWFya2VkIChzaXplKSB7XG4gICAgaWYgKHNpemUgPCBtYXNrTWFya2VkLmxlbmd0aCkge1xuICAgICAgcmV0dXJuIG1hc2tNYXJrZWQuc2xpY2UoLXNpemUpXG4gICAgfVxuXG4gICAgbGV0IHBhZCA9ICcnLCBsb2NhbE1hc2tNYXJrZWQgPSBtYXNrTWFya2VkXG4gICAgY29uc3QgcGFkUG9zID0gbG9jYWxNYXNrTWFya2VkLmluZGV4T2YoTUFSS0VSKVxuXG4gICAgaWYgKHBhZFBvcyA+IC0xKSB7XG4gICAgICBmb3IgKGxldCBpID0gc2l6ZSAtIGxvY2FsTWFza01hcmtlZC5sZW5ndGg7IGkgPiAwOyBpLS0pIHtcbiAgICAgICAgcGFkICs9IE1BUktFUlxuICAgICAgfVxuXG4gICAgICBsb2NhbE1hc2tNYXJrZWQgPSBsb2NhbE1hc2tNYXJrZWQuc2xpY2UoMCwgcGFkUG9zKSArIHBhZCArIGxvY2FsTWFza01hcmtlZC5zbGljZShwYWRQb3MpXG4gICAgfVxuXG4gICAgcmV0dXJuIGxvY2FsTWFza01hcmtlZFxuICB9XG5cbiAgZnVuY3Rpb24gdXBkYXRlTWFza0ludGVybmFscyAoKSB7XG4gICAgaGFzTWFzay52YWx1ZSA9IHByb3BzLm1hc2sgIT09IHZvaWQgMFxuICAgICAgJiYgcHJvcHMubWFzay5sZW5ndGggPiAwXG4gICAgICAmJiBnZXRJc1R5cGVUZXh0KClcblxuICAgIGlmIChoYXNNYXNrLnZhbHVlID09PSBmYWxzZSkge1xuICAgICAgY29tcHV0ZWRVbm1hc2sgPSB2b2lkIDBcbiAgICAgIG1hc2tNYXJrZWQgPSAnJ1xuICAgICAgbWFza1JlcGxhY2VkID0gJydcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGNvbnN0XG4gICAgICBsb2NhbENvbXB1dGVkTWFzayA9IE5BTUVEX01BU0tTWyBwcm9wcy5tYXNrIF0gPT09IHZvaWQgMFxuICAgICAgICA/IHByb3BzLm1hc2tcbiAgICAgICAgOiBOQU1FRF9NQVNLU1sgcHJvcHMubWFzayBdLFxuICAgICAgZmlsbENoYXIgPSB0eXBlb2YgcHJvcHMuZmlsbE1hc2sgPT09ICdzdHJpbmcnICYmIHByb3BzLmZpbGxNYXNrLmxlbmd0aCA+IDBcbiAgICAgICAgPyBwcm9wcy5maWxsTWFzay5zbGljZSgwLCAxKVxuICAgICAgICA6ICdfJyxcbiAgICAgIGZpbGxDaGFyRXNjYXBlZCA9IGZpbGxDaGFyLnJlcGxhY2UoZXNjUmVnZXgsICdcXFxcJCYnKSxcbiAgICAgIHVubWFzayA9IFtdLFxuICAgICAgZXh0cmFjdCA9IFtdLFxuICAgICAgbWFzayA9IFtdXG5cbiAgICBsZXRcbiAgICAgIGZpcnN0TWF0Y2ggPSBwcm9wcy5yZXZlcnNlRmlsbE1hc2sgPT09IHRydWUsXG4gICAgICB1bm1hc2tDaGFyID0gJycsXG4gICAgICBuZWdhdGVDaGFyID0gJydcblxuICAgIGxvY2FsQ29tcHV0ZWRNYXNrLnJlcGxhY2UodG9rZW5SZWdleE1hc2ssIChfLCBjaGFyMSwgZXNjLCB0b2tlbiwgY2hhcjIpID0+IHtcbiAgICAgIGlmICh0b2tlbiAhPT0gdm9pZCAwKSB7XG4gICAgICAgIGNvbnN0IGMgPSBUT0tFTlNbIHRva2VuIF1cbiAgICAgICAgbWFzay5wdXNoKGMpXG4gICAgICAgIG5lZ2F0ZUNoYXIgPSBjLm5lZ2F0ZVxuICAgICAgICBpZiAoZmlyc3RNYXRjaCA9PT0gdHJ1ZSkge1xuICAgICAgICAgIGV4dHJhY3QucHVzaCgnKD86JyArIG5lZ2F0ZUNoYXIgKyAnKyk/KCcgKyBjLnBhdHRlcm4gKyAnKyk/KD86JyArIG5lZ2F0ZUNoYXIgKyAnKyk/KCcgKyBjLnBhdHRlcm4gKyAnKyk/JylcbiAgICAgICAgICBmaXJzdE1hdGNoID0gZmFsc2VcbiAgICAgICAgfVxuICAgICAgICBleHRyYWN0LnB1c2goJyg/OicgKyBuZWdhdGVDaGFyICsgJyspPygnICsgYy5wYXR0ZXJuICsgJyk/JylcbiAgICAgIH1cbiAgICAgIGVsc2UgaWYgKGVzYyAhPT0gdm9pZCAwKSB7XG4gICAgICAgIHVubWFza0NoYXIgPSAnXFxcXCcgKyAoZXNjID09PSAnXFxcXCcgPyAnJyA6IGVzYylcbiAgICAgICAgbWFzay5wdXNoKGVzYylcbiAgICAgICAgdW5tYXNrLnB1c2goJyhbXicgKyB1bm1hc2tDaGFyICsgJ10rKT8nICsgdW5tYXNrQ2hhciArICc/JylcbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICBjb25zdCBjID0gY2hhcjEgIT09IHZvaWQgMCA/IGNoYXIxIDogY2hhcjJcbiAgICAgICAgdW5tYXNrQ2hhciA9IGMgPT09ICdcXFxcJyA/ICdcXFxcXFxcXFxcXFxcXFxcJyA6IGMucmVwbGFjZShlc2NSZWdleCwgJ1xcXFxcXFxcJCYnKVxuICAgICAgICBtYXNrLnB1c2goYylcbiAgICAgICAgdW5tYXNrLnB1c2goJyhbXicgKyB1bm1hc2tDaGFyICsgJ10rKT8nICsgdW5tYXNrQ2hhciArICc/JylcbiAgICAgIH1cbiAgICB9KVxuXG4gICAgY29uc3RcbiAgICAgIHVubWFza01hdGNoZXIgPSBuZXcgUmVnRXhwKFxuICAgICAgICAnXidcbiAgICAgICAgKyB1bm1hc2suam9pbignJylcbiAgICAgICAgKyAnKCcgKyAodW5tYXNrQ2hhciA9PT0gJycgPyAnLicgOiAnW14nICsgdW5tYXNrQ2hhciArICddJykgKyAnKyk/J1xuICAgICAgICArICckJ1xuICAgICAgKSxcbiAgICAgIGV4dHJhY3RMYXN0ID0gZXh0cmFjdC5sZW5ndGggLSAxLFxuICAgICAgZXh0cmFjdE1hdGNoZXIgPSBleHRyYWN0Lm1hcCgocmUsIGluZGV4KSA9PiB7XG4gICAgICAgIGlmIChpbmRleCA9PT0gMCAmJiBwcm9wcy5yZXZlcnNlRmlsbE1hc2sgPT09IHRydWUpIHtcbiAgICAgICAgICByZXR1cm4gbmV3IFJlZ0V4cCgnXicgKyBmaWxsQ2hhckVzY2FwZWQgKyAnKicgKyByZSlcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChpbmRleCA9PT0gZXh0cmFjdExhc3QpIHtcbiAgICAgICAgICByZXR1cm4gbmV3IFJlZ0V4cChcbiAgICAgICAgICAgICdeJyArIHJlXG4gICAgICAgICAgICArICcoJyArIChuZWdhdGVDaGFyID09PSAnJyA/ICcuJyA6IG5lZ2F0ZUNoYXIpICsgJyspPydcbiAgICAgICAgICAgICsgKHByb3BzLnJldmVyc2VGaWxsTWFzayA9PT0gdHJ1ZSA/ICckJyA6IGZpbGxDaGFyRXNjYXBlZCArICcqJylcbiAgICAgICAgICApXG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbmV3IFJlZ0V4cCgnXicgKyByZSlcbiAgICAgIH0pXG5cbiAgICBjb21wdXRlZE1hc2sgPSBtYXNrXG4gICAgY29tcHV0ZWRVbm1hc2sgPSB2YWwgPT4ge1xuICAgICAgY29uc3QgdW5tYXNrTWF0Y2ggPSB1bm1hc2tNYXRjaGVyLmV4ZWModmFsKVxuICAgICAgaWYgKHVubWFza01hdGNoICE9PSBudWxsKSB7XG4gICAgICAgIHZhbCA9IHVubWFza01hdGNoLnNsaWNlKDEpLmpvaW4oJycpXG4gICAgICB9XG5cbiAgICAgIGNvbnN0XG4gICAgICAgIGV4dHJhY3RNYXRjaCA9IFtdLFxuICAgICAgICBleHRyYWN0TWF0Y2hlckxlbmd0aCA9IGV4dHJhY3RNYXRjaGVyLmxlbmd0aFxuXG4gICAgICBmb3IgKGxldCBpID0gMCwgc3RyID0gdmFsOyBpIDwgZXh0cmFjdE1hdGNoZXJMZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCBtID0gZXh0cmFjdE1hdGNoZXJbIGkgXS5leGVjKHN0cilcblxuICAgICAgICBpZiAobSA9PT0gbnVsbCkge1xuICAgICAgICAgIGJyZWFrXG4gICAgICAgIH1cblxuICAgICAgICBzdHIgPSBzdHIuc2xpY2UobS5zaGlmdCgpLmxlbmd0aClcbiAgICAgICAgZXh0cmFjdE1hdGNoLnB1c2goLi4ubSlcbiAgICAgIH1cbiAgICAgIGlmIChleHRyYWN0TWF0Y2gubGVuZ3RoID4gMCkge1xuICAgICAgICByZXR1cm4gZXh0cmFjdE1hdGNoLmpvaW4oJycpXG4gICAgICB9XG5cbiAgICAgIHJldHVybiB2YWxcbiAgICB9XG4gICAgbWFza01hcmtlZCA9IG1hc2subWFwKHYgPT4gKHR5cGVvZiB2ID09PSAnc3RyaW5nJyA/IHYgOiBNQVJLRVIpKS5qb2luKCcnKVxuICAgIG1hc2tSZXBsYWNlZCA9IG1hc2tNYXJrZWQuc3BsaXQoTUFSS0VSKS5qb2luKGZpbGxDaGFyKVxuICB9XG5cbiAgZnVuY3Rpb24gdXBkYXRlTWFza1ZhbHVlIChyYXdWYWwsIHVwZGF0ZU1hc2tJbnRlcm5hbHNGbGFnLCBpbnB1dFR5cGUpIHtcbiAgICBjb25zdFxuICAgICAgaW5wID0gaW5wdXRSZWYudmFsdWUsXG4gICAgICBlbmQgPSBpbnAuc2VsZWN0aW9uRW5kLFxuICAgICAgZW5kUmV2ZXJzZSA9IGlucC52YWx1ZS5sZW5ndGggLSBlbmQsXG4gICAgICB1bm1hc2tlZCA9IHVubWFza1ZhbHVlKHJhd1ZhbClcblxuICAgIC8vIFVwZGF0ZSBoZXJlIHNvIHVubWFzayB1c2VzIHRoZSBvcmlnaW5hbCBmaWxsQ2hhclxuICAgIHVwZGF0ZU1hc2tJbnRlcm5hbHNGbGFnID09PSB0cnVlICYmIHVwZGF0ZU1hc2tJbnRlcm5hbHMoKVxuXG4gICAgY29uc3RcbiAgICAgIHByZU1hc2tlZCA9IG1hc2tWYWx1ZSh1bm1hc2tlZCksXG4gICAgICBtYXNrZWQgPSBwcm9wcy5maWxsTWFzayAhPT0gZmFsc2VcbiAgICAgICAgPyBmaWxsV2l0aE1hc2socHJlTWFza2VkKVxuICAgICAgICA6IHByZU1hc2tlZCxcbiAgICAgIGNoYW5nZWQgPSBpbm5lclZhbHVlLnZhbHVlICE9PSBtYXNrZWRcblxuICAgIC8vIFdlIHdhbnQgdG8gYXZvaWQgXCJmbGlja2VyaW5nXCIgc28gd2Ugc2V0IHZhbHVlIGltbWVkaWF0ZWx5XG4gICAgaW5wLnZhbHVlICE9PSBtYXNrZWQgJiYgKGlucC52YWx1ZSA9IG1hc2tlZClcblxuICAgIGNoYW5nZWQgPT09IHRydWUgJiYgKGlubmVyVmFsdWUudmFsdWUgPSBtYXNrZWQpXG5cbiAgICBkb2N1bWVudC5hY3RpdmVFbGVtZW50ID09PSBpbnAgJiYgbmV4dFRpY2soKCkgPT4ge1xuICAgICAgaWYgKG1hc2tlZCA9PT0gbWFza1JlcGxhY2VkKSB7XG4gICAgICAgIGNvbnN0IGN1cnNvciA9IHByb3BzLnJldmVyc2VGaWxsTWFzayA9PT0gdHJ1ZSA/IG1hc2tSZXBsYWNlZC5sZW5ndGggOiAwXG4gICAgICAgIGlucC5zZXRTZWxlY3Rpb25SYW5nZShjdXJzb3IsIGN1cnNvciwgJ2ZvcndhcmQnKVxuXG4gICAgICAgIHJldHVyblxuICAgICAgfVxuXG4gICAgICBpZiAoaW5wdXRUeXBlID09PSAnaW5zZXJ0RnJvbVBhc3RlJyAmJiBwcm9wcy5yZXZlcnNlRmlsbE1hc2sgIT09IHRydWUpIHtcbiAgICAgICAgY29uc3QgY3Vyc29yID0gZW5kIC0gMVxuICAgICAgICBtb3ZlQ3Vyc29yLnJpZ2h0KGlucCwgY3Vyc29yLCBjdXJzb3IpXG5cbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG5cbiAgICAgIGlmIChbICdkZWxldGVDb250ZW50QmFja3dhcmQnLCAnZGVsZXRlQ29udGVudEZvcndhcmQnIF0uaW5kZXhPZihpbnB1dFR5cGUpID4gLTEpIHtcbiAgICAgICAgY29uc3QgY3Vyc29yID0gcHJvcHMucmV2ZXJzZUZpbGxNYXNrID09PSB0cnVlXG4gICAgICAgICAgPyAoXG4gICAgICAgICAgICAgIGVuZCA9PT0gMFxuICAgICAgICAgICAgICAgID8gKG1hc2tlZC5sZW5ndGggPiBwcmVNYXNrZWQubGVuZ3RoID8gMSA6IDApXG4gICAgICAgICAgICAgICAgOiBNYXRoLm1heCgwLCBtYXNrZWQubGVuZ3RoIC0gKG1hc2tlZCA9PT0gbWFza1JlcGxhY2VkID8gMCA6IE1hdGgubWluKHByZU1hc2tlZC5sZW5ndGgsIGVuZFJldmVyc2UpICsgMSkpICsgMVxuICAgICAgICAgICAgKVxuICAgICAgICAgIDogZW5kXG5cbiAgICAgICAgaW5wLnNldFNlbGVjdGlvblJhbmdlKGN1cnNvciwgY3Vyc29yLCAnZm9yd2FyZCcpXG4gICAgICAgIHJldHVyblxuICAgICAgfVxuXG4gICAgICBpZiAocHJvcHMucmV2ZXJzZUZpbGxNYXNrID09PSB0cnVlKSB7XG4gICAgICAgIGlmIChjaGFuZ2VkID09PSB0cnVlKSB7XG4gICAgICAgICAgY29uc3QgY3Vyc29yID0gTWF0aC5tYXgoMCwgbWFza2VkLmxlbmd0aCAtIChtYXNrZWQgPT09IG1hc2tSZXBsYWNlZCA/IDAgOiBNYXRoLm1pbihwcmVNYXNrZWQubGVuZ3RoLCBlbmRSZXZlcnNlICsgMSkpKVxuXG4gICAgICAgICAgaWYgKGN1cnNvciA9PT0gMSAmJiBlbmQgPT09IDEpIHtcbiAgICAgICAgICAgIGlucC5zZXRTZWxlY3Rpb25SYW5nZShjdXJzb3IsIGN1cnNvciwgJ2ZvcndhcmQnKVxuICAgICAgICAgIH1cbiAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG1vdmVDdXJzb3IucmlnaHRSZXZlcnNlKGlucCwgY3Vyc29yLCBjdXJzb3IpXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgIGNvbnN0IGN1cnNvciA9IG1hc2tlZC5sZW5ndGggLSBlbmRSZXZlcnNlXG4gICAgICAgICAgaW5wLnNldFNlbGVjdGlvblJhbmdlKGN1cnNvciwgY3Vyc29yLCAnYmFja3dhcmQnKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgaWYgKGNoYW5nZWQgPT09IHRydWUpIHtcbiAgICAgICAgICBjb25zdCBjdXJzb3IgPSBNYXRoLm1heCgwLCBtYXNrTWFya2VkLmluZGV4T2YoTUFSS0VSKSwgTWF0aC5taW4ocHJlTWFza2VkLmxlbmd0aCwgZW5kKSAtIDEpXG4gICAgICAgICAgbW92ZUN1cnNvci5yaWdodChpbnAsIGN1cnNvciwgY3Vyc29yKVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgIGNvbnN0IGN1cnNvciA9IGVuZCAtIDFcbiAgICAgICAgICBtb3ZlQ3Vyc29yLnJpZ2h0KGlucCwgY3Vyc29yLCBjdXJzb3IpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KVxuXG4gICAgY29uc3QgdmFsID0gcHJvcHMudW5tYXNrZWRWYWx1ZSA9PT0gdHJ1ZVxuICAgICAgPyB1bm1hc2tWYWx1ZShtYXNrZWQpXG4gICAgICA6IG1hc2tlZFxuXG4gICAgU3RyaW5nKHByb3BzLm1vZGVsVmFsdWUpICE9PSB2YWwgJiYgZW1pdFZhbHVlKHZhbCwgdHJ1ZSlcbiAgfVxuXG4gIGZ1bmN0aW9uIG1vdmVDdXJzb3JGb3JQYXN0ZSAoaW5wLCBzdGFydCwgZW5kKSB7XG4gICAgY29uc3QgcHJlTWFza2VkID0gbWFza1ZhbHVlKHVubWFza1ZhbHVlKGlucC52YWx1ZSkpXG5cbiAgICBzdGFydCA9IE1hdGgubWF4KDAsIG1hc2tNYXJrZWQuaW5kZXhPZihNQVJLRVIpLCBNYXRoLm1pbihwcmVNYXNrZWQubGVuZ3RoLCBzdGFydCkpXG5cbiAgICBpbnAuc2V0U2VsZWN0aW9uUmFuZ2Uoc3RhcnQsIGVuZCwgJ2ZvcndhcmQnKVxuICB9XG5cbiAgY29uc3QgbW92ZUN1cnNvciA9IHtcbiAgICBsZWZ0IChpbnAsIHN0YXJ0LCBlbmQsIHNlbGVjdGlvbikge1xuICAgICAgY29uc3Qgbm9NYXJrQmVmb3JlID0gbWFza01hcmtlZC5zbGljZShzdGFydCAtIDEpLmluZGV4T2YoTUFSS0VSKSA9PT0gLTFcbiAgICAgIGxldCBpID0gTWF0aC5tYXgoMCwgc3RhcnQgLSAxKVxuXG4gICAgICBmb3IgKDsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgaWYgKG1hc2tNYXJrZWRbIGkgXSA9PT0gTUFSS0VSKSB7XG4gICAgICAgICAgc3RhcnQgPSBpXG4gICAgICAgICAgbm9NYXJrQmVmb3JlID09PSB0cnVlICYmIHN0YXJ0KytcbiAgICAgICAgICBicmVha1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChcbiAgICAgICAgaSA8IDBcbiAgICAgICAgJiYgbWFza01hcmtlZFsgc3RhcnQgXSAhPT0gdm9pZCAwXG4gICAgICAgICYmIG1hc2tNYXJrZWRbIHN0YXJ0IF0gIT09IE1BUktFUlxuICAgICAgKSB7XG4gICAgICAgIHJldHVybiBtb3ZlQ3Vyc29yLnJpZ2h0KGlucCwgMCwgMClcbiAgICAgIH1cblxuICAgICAgc3RhcnQgPj0gMCAmJiBpbnAuc2V0U2VsZWN0aW9uUmFuZ2UoXG4gICAgICAgIHN0YXJ0LFxuICAgICAgICBzZWxlY3Rpb24gPT09IHRydWUgPyBlbmQgOiBzdGFydCwgJ2JhY2t3YXJkJ1xuICAgICAgKVxuICAgIH0sXG5cbiAgICByaWdodCAoaW5wLCBzdGFydCwgZW5kLCBzZWxlY3Rpb24pIHtcbiAgICAgIGNvbnN0IGxpbWl0ID0gaW5wLnZhbHVlLmxlbmd0aFxuICAgICAgbGV0IGkgPSBNYXRoLm1pbihsaW1pdCwgZW5kICsgMSlcblxuICAgICAgZm9yICg7IGkgPD0gbGltaXQ7IGkrKykge1xuICAgICAgICBpZiAobWFza01hcmtlZFsgaSBdID09PSBNQVJLRVIpIHtcbiAgICAgICAgICBlbmQgPSBpXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChtYXNrTWFya2VkWyBpIC0gMSBdID09PSBNQVJLRVIpIHtcbiAgICAgICAgICBlbmQgPSBpXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKFxuICAgICAgICBpID4gbGltaXRcbiAgICAgICAgJiYgbWFza01hcmtlZFsgZW5kIC0gMSBdICE9PSB2b2lkIDBcbiAgICAgICAgJiYgbWFza01hcmtlZFsgZW5kIC0gMSBdICE9PSBNQVJLRVJcbiAgICAgICkge1xuICAgICAgICByZXR1cm4gbW92ZUN1cnNvci5sZWZ0KGlucCwgbGltaXQsIGxpbWl0KVxuICAgICAgfVxuXG4gICAgICBpbnAuc2V0U2VsZWN0aW9uUmFuZ2Uoc2VsZWN0aW9uID8gc3RhcnQgOiBlbmQsIGVuZCwgJ2ZvcndhcmQnKVxuICAgIH0sXG5cbiAgICBsZWZ0UmV2ZXJzZSAoaW5wLCBzdGFydCwgZW5kLCBzZWxlY3Rpb24pIHtcbiAgICAgIGNvbnN0XG4gICAgICAgIGxvY2FsTWFza01hcmtlZCA9IGdldFBhZGRlZE1hc2tNYXJrZWQoaW5wLnZhbHVlLmxlbmd0aClcbiAgICAgIGxldCBpID0gTWF0aC5tYXgoMCwgc3RhcnQgLSAxKVxuXG4gICAgICBmb3IgKDsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgaWYgKGxvY2FsTWFza01hcmtlZFsgaSAtIDEgXSA9PT0gTUFSS0VSKSB7XG4gICAgICAgICAgc3RhcnQgPSBpXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChsb2NhbE1hc2tNYXJrZWRbIGkgXSA9PT0gTUFSS0VSKSB7XG4gICAgICAgICAgc3RhcnQgPSBpXG4gICAgICAgICAgaWYgKGkgPT09IDApIHtcbiAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChcbiAgICAgICAgaSA8IDBcbiAgICAgICAgJiYgbG9jYWxNYXNrTWFya2VkWyBzdGFydCBdICE9PSB2b2lkIDBcbiAgICAgICAgJiYgbG9jYWxNYXNrTWFya2VkWyBzdGFydCBdICE9PSBNQVJLRVJcbiAgICAgICkge1xuICAgICAgICByZXR1cm4gbW92ZUN1cnNvci5yaWdodFJldmVyc2UoaW5wLCAwLCAwKVxuICAgICAgfVxuXG4gICAgICBzdGFydCA+PSAwICYmIGlucC5zZXRTZWxlY3Rpb25SYW5nZShcbiAgICAgICAgc3RhcnQsXG4gICAgICAgIHNlbGVjdGlvbiA9PT0gdHJ1ZSA/IGVuZCA6IHN0YXJ0LCAnYmFja3dhcmQnXG4gICAgICApXG4gICAgfSxcblxuICAgIHJpZ2h0UmV2ZXJzZSAoaW5wLCBzdGFydCwgZW5kLCBzZWxlY3Rpb24pIHtcbiAgICAgIGNvbnN0XG4gICAgICAgIGxpbWl0ID0gaW5wLnZhbHVlLmxlbmd0aCxcbiAgICAgICAgbG9jYWxNYXNrTWFya2VkID0gZ2V0UGFkZGVkTWFza01hcmtlZChsaW1pdCksXG4gICAgICAgIG5vTWFya0JlZm9yZSA9IGxvY2FsTWFza01hcmtlZC5zbGljZSgwLCBlbmQgKyAxKS5pbmRleE9mKE1BUktFUikgPT09IC0xXG4gICAgICBsZXQgaSA9IE1hdGgubWluKGxpbWl0LCBlbmQgKyAxKVxuXG4gICAgICBmb3IgKDsgaSA8PSBsaW1pdDsgaSsrKSB7XG4gICAgICAgIGlmIChsb2NhbE1hc2tNYXJrZWRbIGkgLSAxIF0gPT09IE1BUktFUikge1xuICAgICAgICAgIGVuZCA9IGlcbiAgICAgICAgICBlbmQgPiAwICYmIG5vTWFya0JlZm9yZSA9PT0gdHJ1ZSAmJiBlbmQtLVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKFxuICAgICAgICBpID4gbGltaXRcbiAgICAgICAgJiYgbG9jYWxNYXNrTWFya2VkWyBlbmQgLSAxIF0gIT09IHZvaWQgMFxuICAgICAgICAmJiBsb2NhbE1hc2tNYXJrZWRbIGVuZCAtIDEgXSAhPT0gTUFSS0VSXG4gICAgICApIHtcbiAgICAgICAgcmV0dXJuIG1vdmVDdXJzb3IubGVmdFJldmVyc2UoaW5wLCBsaW1pdCwgbGltaXQpXG4gICAgICB9XG5cbiAgICAgIGlucC5zZXRTZWxlY3Rpb25SYW5nZShzZWxlY3Rpb24gPT09IHRydWUgPyBzdGFydCA6IGVuZCwgZW5kLCAnZm9yd2FyZCcpXG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gb25NYXNrZWRLZXlkb3duIChlKSB7XG4gICAgaWYgKHNob3VsZElnbm9yZUtleShlKSA9PT0gdHJ1ZSkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgY29uc3RcbiAgICAgIGlucCA9IGlucHV0UmVmLnZhbHVlLFxuICAgICAgc3RhcnQgPSBpbnAuc2VsZWN0aW9uU3RhcnQsXG4gICAgICBlbmQgPSBpbnAuc2VsZWN0aW9uRW5kXG5cbiAgICBpZiAoZS5rZXlDb2RlID09PSAzNyB8fCBlLmtleUNvZGUgPT09IDM5KSB7IC8vIExlZnQgLyBSaWdodFxuICAgICAgY29uc3QgZm4gPSBtb3ZlQ3Vyc29yWyAoZS5rZXlDb2RlID09PSAzOSA/ICdyaWdodCcgOiAnbGVmdCcpICsgKHByb3BzLnJldmVyc2VGaWxsTWFzayA9PT0gdHJ1ZSA/ICdSZXZlcnNlJyA6ICcnKSBdXG5cbiAgICAgIGUucHJldmVudERlZmF1bHQoKVxuICAgICAgZm4oaW5wLCBzdGFydCwgZW5kLCBlLnNoaWZ0S2V5KVxuICAgIH1cbiAgICBlbHNlIGlmIChcbiAgICAgIGUua2V5Q29kZSA9PT0gOCAvLyBCYWNrc3BhY2VcbiAgICAgICYmIHByb3BzLnJldmVyc2VGaWxsTWFzayAhPT0gdHJ1ZVxuICAgICAgJiYgc3RhcnQgPT09IGVuZFxuICAgICkge1xuICAgICAgbW92ZUN1cnNvci5sZWZ0KGlucCwgc3RhcnQsIGVuZCwgdHJ1ZSlcbiAgICB9XG4gICAgZWxzZSBpZiAoXG4gICAgICBlLmtleUNvZGUgPT09IDQ2IC8vIERlbGV0ZVxuICAgICAgJiYgcHJvcHMucmV2ZXJzZUZpbGxNYXNrID09PSB0cnVlXG4gICAgICAmJiBzdGFydCA9PT0gZW5kXG4gICAgKSB7XG4gICAgICBtb3ZlQ3Vyc29yLnJpZ2h0UmV2ZXJzZShpbnAsIHN0YXJ0LCBlbmQsIHRydWUpXG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gbWFza1ZhbHVlICh2YWwpIHtcbiAgICBpZiAodmFsID09PSB2b2lkIDAgfHwgdmFsID09PSBudWxsIHx8IHZhbCA9PT0gJycpIHsgcmV0dXJuICcnIH1cblxuICAgIGlmIChwcm9wcy5yZXZlcnNlRmlsbE1hc2sgPT09IHRydWUpIHtcbiAgICAgIHJldHVybiBtYXNrVmFsdWVSZXZlcnNlKHZhbClcbiAgICB9XG5cbiAgICBjb25zdCBtYXNrID0gY29tcHV0ZWRNYXNrXG5cbiAgICBsZXQgdmFsSW5kZXggPSAwLCBvdXRwdXQgPSAnJ1xuXG4gICAgZm9yIChsZXQgbWFza0luZGV4ID0gMDsgbWFza0luZGV4IDwgbWFzay5sZW5ndGg7IG1hc2tJbmRleCsrKSB7XG4gICAgICBjb25zdFxuICAgICAgICB2YWxDaGFyID0gdmFsWyB2YWxJbmRleCBdLFxuICAgICAgICBtYXNrRGVmID0gbWFza1sgbWFza0luZGV4IF1cblxuICAgICAgaWYgKHR5cGVvZiBtYXNrRGVmID09PSAnc3RyaW5nJykge1xuICAgICAgICBvdXRwdXQgKz0gbWFza0RlZlxuICAgICAgICB2YWxDaGFyID09PSBtYXNrRGVmICYmIHZhbEluZGV4KytcbiAgICAgIH1cbiAgICAgIGVsc2UgaWYgKHZhbENoYXIgIT09IHZvaWQgMCAmJiBtYXNrRGVmLnJlZ2V4LnRlc3QodmFsQ2hhcikpIHtcbiAgICAgICAgb3V0cHV0ICs9IG1hc2tEZWYudHJhbnNmb3JtICE9PSB2b2lkIDBcbiAgICAgICAgICA/IG1hc2tEZWYudHJhbnNmb3JtKHZhbENoYXIpXG4gICAgICAgICAgOiB2YWxDaGFyXG4gICAgICAgIHZhbEluZGV4KytcbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gb3V0cHV0XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIG91dHB1dFxuICB9XG5cbiAgZnVuY3Rpb24gbWFza1ZhbHVlUmV2ZXJzZSAodmFsKSB7XG4gICAgY29uc3RcbiAgICAgIG1hc2sgPSBjb21wdXRlZE1hc2ssXG4gICAgICBmaXJzdFRva2VuSW5kZXggPSBtYXNrTWFya2VkLmluZGV4T2YoTUFSS0VSKVxuXG4gICAgbGV0IHZhbEluZGV4ID0gdmFsLmxlbmd0aCAtIDEsIG91dHB1dCA9ICcnXG5cbiAgICBmb3IgKGxldCBtYXNrSW5kZXggPSBtYXNrLmxlbmd0aCAtIDE7IG1hc2tJbmRleCA+PSAwICYmIHZhbEluZGV4ID4gLTE7IG1hc2tJbmRleC0tKSB7XG4gICAgICBjb25zdCBtYXNrRGVmID0gbWFza1sgbWFza0luZGV4IF1cblxuICAgICAgbGV0IHZhbENoYXIgPSB2YWxbIHZhbEluZGV4IF1cblxuICAgICAgaWYgKHR5cGVvZiBtYXNrRGVmID09PSAnc3RyaW5nJykge1xuICAgICAgICBvdXRwdXQgPSBtYXNrRGVmICsgb3V0cHV0XG4gICAgICAgIHZhbENoYXIgPT09IG1hc2tEZWYgJiYgdmFsSW5kZXgtLVxuICAgICAgfVxuICAgICAgZWxzZSBpZiAodmFsQ2hhciAhPT0gdm9pZCAwICYmIG1hc2tEZWYucmVnZXgudGVzdCh2YWxDaGFyKSkge1xuICAgICAgICBkbyB7XG4gICAgICAgICAgb3V0cHV0ID0gKG1hc2tEZWYudHJhbnNmb3JtICE9PSB2b2lkIDAgPyBtYXNrRGVmLnRyYW5zZm9ybSh2YWxDaGFyKSA6IHZhbENoYXIpICsgb3V0cHV0XG4gICAgICAgICAgdmFsSW5kZXgtLVxuICAgICAgICAgIHZhbENoYXIgPSB2YWxbIHZhbEluZGV4IF1cbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVubW9kaWZpZWQtbG9vcC1jb25kaXRpb25cbiAgICAgICAgfSB3aGlsZSAoZmlyc3RUb2tlbkluZGV4ID09PSBtYXNrSW5kZXggJiYgdmFsQ2hhciAhPT0gdm9pZCAwICYmIG1hc2tEZWYucmVnZXgudGVzdCh2YWxDaGFyKSlcbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gb3V0cHV0XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIG91dHB1dFxuICB9XG5cbiAgZnVuY3Rpb24gdW5tYXNrVmFsdWUgKHZhbCkge1xuICAgIHJldHVybiB0eXBlb2YgdmFsICE9PSAnc3RyaW5nJyB8fCBjb21wdXRlZFVubWFzayA9PT0gdm9pZCAwXG4gICAgICA/ICh0eXBlb2YgdmFsID09PSAnbnVtYmVyJyA/IGNvbXB1dGVkVW5tYXNrKCcnICsgdmFsKSA6IHZhbClcbiAgICAgIDogY29tcHV0ZWRVbm1hc2sodmFsKVxuICB9XG5cbiAgZnVuY3Rpb24gZmlsbFdpdGhNYXNrICh2YWwpIHtcbiAgICBpZiAobWFza1JlcGxhY2VkLmxlbmd0aCAtIHZhbC5sZW5ndGggPD0gMCkge1xuICAgICAgcmV0dXJuIHZhbFxuICAgIH1cblxuICAgIHJldHVybiBwcm9wcy5yZXZlcnNlRmlsbE1hc2sgPT09IHRydWUgJiYgdmFsLmxlbmd0aCA+IDBcbiAgICAgID8gbWFza1JlcGxhY2VkLnNsaWNlKDAsIC12YWwubGVuZ3RoKSArIHZhbFxuICAgICAgOiB2YWwgKyBtYXNrUmVwbGFjZWQuc2xpY2UodmFsLmxlbmd0aClcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgaW5uZXJWYWx1ZSxcbiAgICBoYXNNYXNrLFxuICAgIG1vdmVDdXJzb3JGb3JQYXN0ZSxcbiAgICB1cGRhdGVNYXNrVmFsdWUsXG4gICAgb25NYXNrZWRLZXlkb3duXG4gIH1cbn1cbiIsImltcG9ydCB7IGgsIGNvbXB1dGVkIH0gZnJvbSAndnVlJ1xuXG5leHBvcnQgY29uc3QgdXNlRm9ybVByb3BzID0ge1xuICBuYW1lOiBTdHJpbmdcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHVzZUZvcm1BdHRycyAocHJvcHMpIHtcbiAgcmV0dXJuIGNvbXB1dGVkKCgpID0+ICh7XG4gICAgdHlwZTogJ2hpZGRlbicsXG4gICAgbmFtZTogcHJvcHMubmFtZSxcbiAgICB2YWx1ZTogcHJvcHMubW9kZWxWYWx1ZVxuICB9KSlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHVzZUZvcm1JbmplY3QgKGZvcm1BdHRycyA9IHt9KSB7XG4gIHJldHVybiAoY2hpbGQsIGFjdGlvbiwgY2xhc3NOYW1lKSA9PiB7XG4gICAgY2hpbGRbIGFjdGlvbiBdKFxuICAgICAgaCgnaW5wdXQnLCB7XG4gICAgICAgIGNsYXNzOiAnaGlkZGVuJyArIChjbGFzc05hbWUgfHwgJycpLFxuICAgICAgICAuLi5mb3JtQXR0cnMudmFsdWVcbiAgICAgIH0pXG4gICAgKVxuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1c2VGb3JtSW5wdXROYW1lQXR0ciAocHJvcHMpIHtcbiAgcmV0dXJuIGNvbXB1dGVkKCgpID0+IHByb3BzLm5hbWUgfHwgcHJvcHMuZm9yKVxufVxuIiwiaW1wb3J0IHsgY29tcHV0ZWQgfSBmcm9tICd2dWUnXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIChwcm9wcywgdHlwZUd1YXJkKSB7XG4gIGZ1bmN0aW9uIGdldEZvcm1Eb21Qcm9wcyAoKSB7XG4gICAgY29uc3QgbW9kZWwgPSBwcm9wcy5tb2RlbFZhbHVlXG5cbiAgICB0cnkge1xuICAgICAgY29uc3QgZHQgPSAnRGF0YVRyYW5zZmVyJyBpbiB3aW5kb3dcbiAgICAgICAgPyBuZXcgRGF0YVRyYW5zZmVyKClcbiAgICAgICAgOiAoJ0NsaXBib2FyZEV2ZW50JyBpbiB3aW5kb3dcbiAgICAgICAgICAgID8gbmV3IENsaXBib2FyZEV2ZW50KCcnKS5jbGlwYm9hcmREYXRhXG4gICAgICAgICAgICA6IHZvaWQgMFxuICAgICAgICAgIClcblxuICAgICAgaWYgKE9iamVjdChtb2RlbCkgPT09IG1vZGVsKSB7XG4gICAgICAgICgnbGVuZ3RoJyBpbiBtb2RlbFxuICAgICAgICAgID8gQXJyYXkuZnJvbShtb2RlbClcbiAgICAgICAgICA6IFsgbW9kZWwgXVxuICAgICAgICApLmZvckVhY2goZmlsZSA9PiB7XG4gICAgICAgICAgZHQuaXRlbXMuYWRkKGZpbGUpXG4gICAgICAgIH0pXG4gICAgICB9XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIGZpbGVzOiBkdC5maWxlc1xuICAgICAgfVxuICAgIH1cbiAgICBjYXRjaCAoZSkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgZmlsZXM6IHZvaWQgMFxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiB0eXBlR3VhcmQgPT09IHRydWVcbiAgICA/IGNvbXB1dGVkKCgpID0+IHtcbiAgICAgIGlmIChwcm9wcy50eXBlICE9PSAnZmlsZScpIHtcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG5cbiAgICAgIHJldHVybiBnZXRGb3JtRG9tUHJvcHMoKVxuICAgIH0pXG4gICAgOiBjb21wdXRlZChnZXRGb3JtRG9tUHJvcHMpXG59XG4iLCJjb25zdCBpc0phcGFuZXNlID0gL1tcXHUzMDAwLVxcdTMwM2ZcXHUzMDQwLVxcdTMwOWZcXHUzMGEwLVxcdTMwZmZcXHVmZjAwLVxcdWZmOWZcXHU0ZTAwLVxcdTlmYWZcXHUzNDAwLVxcdTRkYmZdL1xuY29uc3QgaXNDaGluZXNlID0gL1tcXHU0ZTAwLVxcdTlmZmZcXHUzNDAwLVxcdTRkYmZcXHV7MjAwMDB9LVxcdXsyYTZkZn1cXHV7MmE3MDB9LVxcdXsyYjczZn1cXHV7MmI3NDB9LVxcdXsyYjgxZn1cXHV7MmI4MjB9LVxcdXsyY2VhZn1cXHVmOTAwLVxcdWZhZmZcXHUzMzAwLVxcdTMzZmZcXHVmZTMwLVxcdWZlNGZcXHVmOTAwLVxcdWZhZmZcXHV7MmY4MDB9LVxcdXsyZmExZn1dL3VcbmNvbnN0IGlzS29yZWFuID0gL1tcXHUzMTMxLVxcdTMxNGVcXHUzMTRmLVxcdTMxNjNcXHVhYzAwLVxcdWQ3YTNdL1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiAob25JbnB1dCkge1xuICByZXR1cm4gZnVuY3Rpb24gb25Db21wb3NpdGlvbiAoZSkge1xuICAgIGlmIChlLnR5cGUgPT09ICdjb21wb3NpdGlvbmVuZCcgfHwgZS50eXBlID09PSAnY2hhbmdlJykge1xuICAgICAgaWYgKGUudGFyZ2V0LmNvbXBvc2luZyAhPT0gdHJ1ZSkgeyByZXR1cm4gfVxuICAgICAgZS50YXJnZXQuY29tcG9zaW5nID0gZmFsc2VcbiAgICAgIG9uSW5wdXQoZSlcbiAgICB9XG4gICAgZWxzZSBpZiAoZS50eXBlID09PSAnY29tcG9zaXRpb251cGRhdGUnKSB7XG4gICAgICBpZiAoXG4gICAgICAgIHR5cGVvZiBlLmRhdGEgPT09ICdzdHJpbmcnXG4gICAgICAgICYmIGlzSmFwYW5lc2UudGVzdChlLmRhdGEpID09PSBmYWxzZVxuICAgICAgICAmJiBpc0NoaW5lc2UudGVzdChlLmRhdGEpID09PSBmYWxzZVxuICAgICAgICAmJiBpc0tvcmVhbi50ZXN0KGUuZGF0YSkgPT09IGZhbHNlXG4gICAgICApIHtcbiAgICAgICAgZS50YXJnZXQuY29tcG9zaW5nID0gZmFsc2VcbiAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICBlLnRhcmdldC5jb21wb3NpbmcgPSB0cnVlXG4gICAgfVxuICB9XG59XG4iLCJpbXBvcnQgeyBoLCByZWYsIGNvbXB1dGVkLCB3YXRjaCwgb25CZWZvcmVVbm1vdW50LCBvbk1vdW50ZWQsIG5leHRUaWNrLCBnZXRDdXJyZW50SW5zdGFuY2UgfSBmcm9tICd2dWUnXG5cbmltcG9ydCB1c2VGaWVsZCwgeyB1c2VGaWVsZFN0YXRlLCB1c2VGaWVsZFByb3BzLCB1c2VGaWVsZEVtaXRzLCBmaWVsZFZhbHVlSXNGaWxsZWQgfSBmcm9tICcuLi8uLi9jb21wb3NhYmxlcy9wcml2YXRlL3VzZS1maWVsZC5qcydcbmltcG9ydCB1c2VNYXNrLCB7IHVzZU1hc2tQcm9wcyB9IGZyb20gJy4vdXNlLW1hc2suanMnXG5pbXBvcnQgeyB1c2VGb3JtUHJvcHMsIHVzZUZvcm1JbnB1dE5hbWVBdHRyIH0gZnJvbSAnLi4vLi4vY29tcG9zYWJsZXMvcHJpdmF0ZS91c2UtZm9ybS5qcydcbmltcG9ydCB1c2VGaWxlRm9ybURvbVByb3BzIGZyb20gJy4uLy4uL2NvbXBvc2FibGVzL3ByaXZhdGUvdXNlLWZpbGUtZG9tLXByb3BzLmpzJ1xuaW1wb3J0IHVzZUtleUNvbXBvc2l0aW9uIGZyb20gJy4uLy4uL2NvbXBvc2FibGVzL3ByaXZhdGUvdXNlLWtleS1jb21wb3NpdGlvbi5qcydcblxuaW1wb3J0IHsgY3JlYXRlQ29tcG9uZW50IH0gZnJvbSAnLi4vLi4vdXRpbHMvcHJpdmF0ZS9jcmVhdGUuanMnXG5pbXBvcnQgeyBzdG9wIH0gZnJvbSAnLi4vLi4vdXRpbHMvZXZlbnQuanMnXG5pbXBvcnQgeyBhZGRGb2N1c0ZuIH0gZnJvbSAnLi4vLi4vdXRpbHMvcHJpdmF0ZS9mb2N1cy1tYW5hZ2VyLmpzJ1xuXG5leHBvcnQgZGVmYXVsdCBjcmVhdGVDb21wb25lbnQoe1xuICBuYW1lOiAnUUlucHV0JyxcblxuICBpbmhlcml0QXR0cnM6IGZhbHNlLFxuXG4gIHByb3BzOiB7XG4gICAgLi4udXNlRmllbGRQcm9wcyxcbiAgICAuLi51c2VNYXNrUHJvcHMsXG4gICAgLi4udXNlRm9ybVByb3BzLFxuXG4gICAgbW9kZWxWYWx1ZTogeyByZXF1aXJlZDogZmFsc2UgfSxcblxuICAgIHNoYWRvd1RleHQ6IFN0cmluZyxcblxuICAgIHR5cGU6IHtcbiAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgIGRlZmF1bHQ6ICd0ZXh0J1xuICAgIH0sXG5cbiAgICBkZWJvdW5jZTogWyBTdHJpbmcsIE51bWJlciBdLFxuXG4gICAgYXV0b2dyb3c6IEJvb2xlYW4sIC8vIG1ha2VzIGEgdGV4dGFyZWFcblxuICAgIGlucHV0Q2xhc3M6IFsgQXJyYXksIFN0cmluZywgT2JqZWN0IF0sXG4gICAgaW5wdXRTdHlsZTogWyBBcnJheSwgU3RyaW5nLCBPYmplY3QgXVxuICB9LFxuXG4gIGVtaXRzOiBbXG4gICAgLi4udXNlRmllbGRFbWl0cyxcbiAgICAncGFzdGUnLCAnY2hhbmdlJ1xuICBdLFxuXG4gIHNldHVwIChwcm9wcywgeyBlbWl0LCBhdHRycyB9KSB7XG4gICAgY29uc3QgdGVtcCA9IHt9XG4gICAgbGV0IGVtaXRDYWNoZWRWYWx1ZSA9IE5hTiwgdHlwZWROdW1iZXIsIHN0b3BWYWx1ZVdhdGNoZXIsIGVtaXRUaW1lciwgZW1pdFZhbHVlRm5cblxuICAgIGNvbnN0IGlucHV0UmVmID0gcmVmKG51bGwpXG4gICAgY29uc3QgbmFtZVByb3AgPSB1c2VGb3JtSW5wdXROYW1lQXR0cihwcm9wcylcblxuICAgIGNvbnN0IHtcbiAgICAgIGlubmVyVmFsdWUsXG4gICAgICBoYXNNYXNrLFxuICAgICAgbW92ZUN1cnNvckZvclBhc3RlLFxuICAgICAgdXBkYXRlTWFza1ZhbHVlLFxuICAgICAgb25NYXNrZWRLZXlkb3duXG4gICAgfSA9IHVzZU1hc2socHJvcHMsIGVtaXQsIGVtaXRWYWx1ZSwgaW5wdXRSZWYpXG5cbiAgICBjb25zdCBmb3JtRG9tUHJvcHMgPSB1c2VGaWxlRm9ybURvbVByb3BzKHByb3BzLCAvKiB0eXBlIGd1YXJkICovIHRydWUpXG4gICAgY29uc3QgaGFzVmFsdWUgPSBjb21wdXRlZCgoKSA9PiBmaWVsZFZhbHVlSXNGaWxsZWQoaW5uZXJWYWx1ZS52YWx1ZSkpXG5cbiAgICBjb25zdCBvbkNvbXBvc2l0aW9uID0gdXNlS2V5Q29tcG9zaXRpb24ob25JbnB1dClcblxuICAgIGNvbnN0IHN0YXRlID0gdXNlRmllbGRTdGF0ZSgpXG5cbiAgICBjb25zdCBpc1RleHRhcmVhID0gY29tcHV0ZWQoKCkgPT5cbiAgICAgIHByb3BzLnR5cGUgPT09ICd0ZXh0YXJlYScgfHwgcHJvcHMuYXV0b2dyb3cgPT09IHRydWVcbiAgICApXG5cbiAgICBjb25zdCBpc1R5cGVUZXh0ID0gY29tcHV0ZWQoKCkgPT5cbiAgICAgIGlzVGV4dGFyZWEudmFsdWUgPT09IHRydWVcbiAgICAgIHx8IFsgJ3RleHQnLCAnc2VhcmNoJywgJ3VybCcsICd0ZWwnLCAncGFzc3dvcmQnIF0uaW5jbHVkZXMocHJvcHMudHlwZSlcbiAgICApXG5cbiAgICBjb25zdCBvbkV2ZW50cyA9IGNvbXB1dGVkKCgpID0+IHtcbiAgICAgIGNvbnN0IGV2dCA9IHtcbiAgICAgICAgLi4uc3RhdGUuc3BsaXRBdHRycy5saXN0ZW5lcnMudmFsdWUsXG4gICAgICAgIG9uSW5wdXQsXG4gICAgICAgIG9uUGFzdGUsXG4gICAgICAgIC8vIFNhZmFyaSA8IDEwLjIgJiBVSVdlYlZpZXcgZG9lc24ndCBmaXJlIGNvbXBvc2l0aW9uZW5kIHdoZW5cbiAgICAgICAgLy8gc3dpdGNoaW5nIGZvY3VzIGJlZm9yZSBjb25maXJtaW5nIGNvbXBvc2l0aW9uIGNob2ljZVxuICAgICAgICAvLyB0aGlzIGFsc28gZml4ZXMgdGhlIGlzc3VlIHdoZXJlIHNvbWUgYnJvd3NlcnMgZS5nLiBpT1MgQ2hyb21lXG4gICAgICAgIC8vIGZpcmVzIFwiY2hhbmdlXCIgaW5zdGVhZCBvZiBcImlucHV0XCIgb24gYXV0b2NvbXBsZXRlLlxuICAgICAgICBvbkNoYW5nZSxcbiAgICAgICAgb25CbHVyOiBvbkZpbmlzaEVkaXRpbmcsXG4gICAgICAgIG9uRm9jdXM6IHN0b3BcbiAgICAgIH1cblxuICAgICAgZXZ0Lm9uQ29tcG9zaXRpb25zdGFydCA9IGV2dC5vbkNvbXBvc2l0aW9udXBkYXRlID0gZXZ0Lm9uQ29tcG9zaXRpb25lbmQgPSBvbkNvbXBvc2l0aW9uXG5cbiAgICAgIGlmIChoYXNNYXNrLnZhbHVlID09PSB0cnVlKSB7XG4gICAgICAgIGV2dC5vbktleWRvd24gPSBvbk1hc2tlZEtleWRvd25cbiAgICAgIH1cblxuICAgICAgaWYgKHByb3BzLmF1dG9ncm93ID09PSB0cnVlKSB7XG4gICAgICAgIGV2dC5vbkFuaW1hdGlvbmVuZCA9IGFkanVzdEhlaWdodFxuICAgICAgfVxuXG4gICAgICByZXR1cm4gZXZ0XG4gICAgfSlcblxuICAgIGNvbnN0IGlucHV0QXR0cnMgPSBjb21wdXRlZCgoKSA9PiB7XG4gICAgICBjb25zdCBhdHRycyA9IHtcbiAgICAgICAgdGFiaW5kZXg6IDAsXG4gICAgICAgICdkYXRhLWF1dG9mb2N1cyc6IHByb3BzLmF1dG9mb2N1cyA9PT0gdHJ1ZSB8fCB2b2lkIDAsXG4gICAgICAgIHJvd3M6IHByb3BzLnR5cGUgPT09ICd0ZXh0YXJlYScgPyA2IDogdm9pZCAwLFxuICAgICAgICAnYXJpYS1sYWJlbCc6IHByb3BzLmxhYmVsLFxuICAgICAgICBuYW1lOiBuYW1lUHJvcC52YWx1ZSxcbiAgICAgICAgLi4uc3RhdGUuc3BsaXRBdHRycy5hdHRyaWJ1dGVzLnZhbHVlLFxuICAgICAgICBpZDogc3RhdGUudGFyZ2V0VWlkLnZhbHVlLFxuICAgICAgICBtYXhsZW5ndGg6IHByb3BzLm1heGxlbmd0aCxcbiAgICAgICAgZGlzYWJsZWQ6IHByb3BzLmRpc2FibGUgPT09IHRydWUsXG4gICAgICAgIHJlYWRvbmx5OiBwcm9wcy5yZWFkb25seSA9PT0gdHJ1ZVxuICAgICAgfVxuXG4gICAgICBpZiAoaXNUZXh0YXJlYS52YWx1ZSA9PT0gZmFsc2UpIHtcbiAgICAgICAgYXR0cnMudHlwZSA9IHByb3BzLnR5cGVcbiAgICAgIH1cblxuICAgICAgaWYgKHByb3BzLmF1dG9ncm93ID09PSB0cnVlKSB7XG4gICAgICAgIGF0dHJzLnJvd3MgPSAxXG4gICAgICB9XG5cbiAgICAgIHJldHVybiBhdHRyc1xuICAgIH0pXG5cbiAgICAvLyBzb21lIGJyb3dzZXJzIGxvc2UgdGhlIG5hdGl2ZSBpbnB1dCB2YWx1ZVxuICAgIC8vIHNvIHdlIG5lZWQgdG8gcmVhdHRhY2ggaXQgZHluYW1pY2FsbHlcbiAgICAvLyAobGlrZSB0eXBlPVwicGFzc3dvcmRcIiA8LT4gdHlwZT1cInRleHRcIjsgc2VlICMxMjA3OClcbiAgICB3YXRjaCgoKSA9PiBwcm9wcy50eXBlLCAoKSA9PiB7XG4gICAgICBpZiAoaW5wdXRSZWYudmFsdWUpIHtcbiAgICAgICAgaW5wdXRSZWYudmFsdWUudmFsdWUgPSBwcm9wcy5tb2RlbFZhbHVlXG4gICAgICB9XG4gICAgfSlcblxuICAgIHdhdGNoKCgpID0+IHByb3BzLm1vZGVsVmFsdWUsIHYgPT4ge1xuICAgICAgaWYgKGhhc01hc2sudmFsdWUgPT09IHRydWUpIHtcbiAgICAgICAgaWYgKHN0b3BWYWx1ZVdhdGNoZXIgPT09IHRydWUpIHtcbiAgICAgICAgICBzdG9wVmFsdWVXYXRjaGVyID0gZmFsc2VcblxuICAgICAgICAgIGlmIChTdHJpbmcodikgPT09IGVtaXRDYWNoZWRWYWx1ZSkge1xuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgdXBkYXRlTWFza1ZhbHVlKHYpXG4gICAgICB9XG4gICAgICBlbHNlIGlmIChpbm5lclZhbHVlLnZhbHVlICE9PSB2KSB7XG4gICAgICAgIGlubmVyVmFsdWUudmFsdWUgPSB2XG5cbiAgICAgICAgaWYgKFxuICAgICAgICAgIHByb3BzLnR5cGUgPT09ICdudW1iZXInXG4gICAgICAgICAgJiYgdGVtcC5oYXNPd25Qcm9wZXJ0eSgndmFsdWUnKSA9PT0gdHJ1ZVxuICAgICAgICApIHtcbiAgICAgICAgICBpZiAodHlwZWROdW1iZXIgPT09IHRydWUpIHtcbiAgICAgICAgICAgIHR5cGVkTnVtYmVyID0gZmFsc2VcbiAgICAgICAgICB9XG4gICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBkZWxldGUgdGVtcC52YWx1ZVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyB0ZXh0YXJlYSBvbmx5XG4gICAgICBwcm9wcy5hdXRvZ3JvdyA9PT0gdHJ1ZSAmJiBuZXh0VGljayhhZGp1c3RIZWlnaHQpXG4gICAgfSlcblxuICAgIHdhdGNoKCgpID0+IHByb3BzLmF1dG9ncm93LCB2YWwgPT4ge1xuICAgICAgLy8gdGV4dGFyZWEgb25seVxuICAgICAgaWYgKHZhbCA9PT0gdHJ1ZSkge1xuICAgICAgICBuZXh0VGljayhhZGp1c3RIZWlnaHQpXG4gICAgICB9XG4gICAgICAvLyBpZiBpdCBoYXMgYSBudW1iZXIgb2Ygcm93cyBzZXQgcmVzcGVjdCBpdFxuICAgICAgZWxzZSBpZiAoaW5wdXRSZWYudmFsdWUgIT09IG51bGwgJiYgYXR0cnMucm93cyA+IDApIHtcbiAgICAgICAgaW5wdXRSZWYudmFsdWUuc3R5bGUuaGVpZ2h0ID0gJ2F1dG8nXG4gICAgICB9XG4gICAgfSlcblxuICAgIHdhdGNoKCgpID0+IHByb3BzLmRlbnNlLCAoKSA9PiB7XG4gICAgICBwcm9wcy5hdXRvZ3JvdyA9PT0gdHJ1ZSAmJiBuZXh0VGljayhhZGp1c3RIZWlnaHQpXG4gICAgfSlcblxuICAgIGZ1bmN0aW9uIGZvY3VzICgpIHtcbiAgICAgIGFkZEZvY3VzRm4oKCkgPT4ge1xuICAgICAgICBjb25zdCBlbCA9IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnRcbiAgICAgICAgaWYgKFxuICAgICAgICAgIGlucHV0UmVmLnZhbHVlICE9PSBudWxsXG4gICAgICAgICAgJiYgaW5wdXRSZWYudmFsdWUgIT09IGVsXG4gICAgICAgICAgJiYgKGVsID09PSBudWxsIHx8IGVsLmlkICE9PSBzdGF0ZS50YXJnZXRVaWQudmFsdWUpXG4gICAgICAgICkge1xuICAgICAgICAgIGlucHV0UmVmLnZhbHVlLmZvY3VzKHsgcHJldmVudFNjcm9sbDogdHJ1ZSB9KVxuICAgICAgICB9XG4gICAgICB9KVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNlbGVjdCAoKSB7XG4gICAgICBpbnB1dFJlZi52YWx1ZSAhPT0gbnVsbCAmJiBpbnB1dFJlZi52YWx1ZS5zZWxlY3QoKVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIG9uUGFzdGUgKGUpIHtcbiAgICAgIGlmIChoYXNNYXNrLnZhbHVlID09PSB0cnVlICYmIHByb3BzLnJldmVyc2VGaWxsTWFzayAhPT0gdHJ1ZSkge1xuICAgICAgICBjb25zdCBpbnAgPSBlLnRhcmdldFxuICAgICAgICBtb3ZlQ3Vyc29yRm9yUGFzdGUoaW5wLCBpbnAuc2VsZWN0aW9uU3RhcnQsIGlucC5zZWxlY3Rpb25FbmQpXG4gICAgICB9XG5cbiAgICAgIGVtaXQoJ3Bhc3RlJywgZSlcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBvbklucHV0IChlKSB7XG4gICAgICBpZiAoIWUgfHwgIWUudGFyZ2V0IHx8IGUudGFyZ2V0LmNvbXBvc2luZyA9PT0gdHJ1ZSkge1xuICAgICAgICByZXR1cm5cbiAgICAgIH1cblxuICAgICAgaWYgKHByb3BzLnR5cGUgPT09ICdmaWxlJykge1xuICAgICAgICBlbWl0KCd1cGRhdGU6bW9kZWxWYWx1ZScsIGUudGFyZ2V0LmZpbGVzKVxuICAgICAgICByZXR1cm5cbiAgICAgIH1cblxuICAgICAgY29uc3QgdmFsID0gZS50YXJnZXQudmFsdWVcblxuICAgICAgaWYgKGhhc01hc2sudmFsdWUgPT09IHRydWUpIHtcbiAgICAgICAgdXBkYXRlTWFza1ZhbHVlKHZhbCwgZmFsc2UsIGUuaW5wdXRUeXBlKVxuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIGVtaXRWYWx1ZSh2YWwpXG5cbiAgICAgICAgaWYgKGlzVHlwZVRleHQudmFsdWUgPT09IHRydWUgJiYgZS50YXJnZXQgPT09IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQpIHtcbiAgICAgICAgICBjb25zdCB7IHNlbGVjdGlvblN0YXJ0LCBzZWxlY3Rpb25FbmQgfSA9IGUudGFyZ2V0XG5cbiAgICAgICAgICBpZiAoc2VsZWN0aW9uU3RhcnQgIT09IHZvaWQgMCAmJiBzZWxlY3Rpb25FbmQgIT09IHZvaWQgMCkge1xuICAgICAgICAgICAgbmV4dFRpY2soKCkgPT4ge1xuICAgICAgICAgICAgICBpZiAoZS50YXJnZXQgPT09IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgJiYgdmFsLmluZGV4T2YoZS50YXJnZXQudmFsdWUpID09PSAwKSB7XG4gICAgICAgICAgICAgICAgZS50YXJnZXQuc2V0U2VsZWN0aW9uUmFuZ2Uoc2VsZWN0aW9uU3RhcnQsIHNlbGVjdGlvbkVuZClcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gd2UgbmVlZCB0byB0cmlnZ2VyIGl0IGltbWVkaWF0ZWx5IHRvbyxcbiAgICAgIC8vIHRvIGF2b2lkIFwiZmxpY2tlcmluZ1wiXG4gICAgICBwcm9wcy5hdXRvZ3JvdyA9PT0gdHJ1ZSAmJiBhZGp1c3RIZWlnaHQoKVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGVtaXRWYWx1ZSAodmFsLCBzdG9wV2F0Y2hlcikge1xuICAgICAgZW1pdFZhbHVlRm4gPSAoKSA9PiB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICBwcm9wcy50eXBlICE9PSAnbnVtYmVyJ1xuICAgICAgICAgICYmIHRlbXAuaGFzT3duUHJvcGVydHkoJ3ZhbHVlJykgPT09IHRydWVcbiAgICAgICAgKSB7XG4gICAgICAgICAgZGVsZXRlIHRlbXAudmFsdWVcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChwcm9wcy5tb2RlbFZhbHVlICE9PSB2YWwgJiYgZW1pdENhY2hlZFZhbHVlICE9PSB2YWwpIHtcbiAgICAgICAgICBzdG9wV2F0Y2hlciA9PT0gdHJ1ZSAmJiAoc3RvcFZhbHVlV2F0Y2hlciA9IHRydWUpXG4gICAgICAgICAgZW1pdCgndXBkYXRlOm1vZGVsVmFsdWUnLCB2YWwpXG5cbiAgICAgICAgICBuZXh0VGljaygoKSA9PiB7XG4gICAgICAgICAgICBlbWl0Q2FjaGVkVmFsdWUgPT09IHZhbCAmJiAoZW1pdENhY2hlZFZhbHVlID0gTmFOKVxuICAgICAgICAgIH0pXG4gICAgICAgIH1cblxuICAgICAgICBlbWl0VmFsdWVGbiA9IHZvaWQgMFxuICAgICAgfVxuXG4gICAgICBpZiAocHJvcHMudHlwZSA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgdHlwZWROdW1iZXIgPSB0cnVlXG4gICAgICAgIHRlbXAudmFsdWUgPSB2YWxcbiAgICAgIH1cblxuICAgICAgaWYgKHByb3BzLmRlYm91bmNlICE9PSB2b2lkIDApIHtcbiAgICAgICAgY2xlYXJUaW1lb3V0KGVtaXRUaW1lcilcbiAgICAgICAgdGVtcC52YWx1ZSA9IHZhbFxuICAgICAgICBlbWl0VGltZXIgPSBzZXRUaW1lb3V0KGVtaXRWYWx1ZUZuLCBwcm9wcy5kZWJvdW5jZSlcbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICBlbWl0VmFsdWVGbigpXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gdGV4dGFyZWEgb25seVxuICAgIGZ1bmN0aW9uIGFkanVzdEhlaWdodCAoKSB7XG4gICAgICBjb25zdCBpbnAgPSBpbnB1dFJlZi52YWx1ZVxuICAgICAgaWYgKGlucCAhPT0gbnVsbCkge1xuICAgICAgICBjb25zdCBwYXJlbnRTdHlsZSA9IGlucC5wYXJlbnROb2RlLnN0eWxlXG5cbiAgICAgICAgLy8gcmVzZXQgaGVpZ2h0IG9mIHRleHRhcmVhIHRvIGEgc21hbGwgc2l6ZSB0byBkZXRlY3QgdGhlIHJlYWwgaGVpZ2h0XG4gICAgICAgIC8vIGJ1dCBrZWVwIHRoZSB0b3RhbCBjb250cm9sIHNpemUgdGhlIHNhbWVcbiAgICAgICAgcGFyZW50U3R5bGUubWFyZ2luQm90dG9tID0gKGlucC5zY3JvbGxIZWlnaHQgLSAxKSArICdweCdcbiAgICAgICAgaW5wLnN0eWxlLmhlaWdodCA9ICcxcHgnXG5cbiAgICAgICAgaW5wLnN0eWxlLmhlaWdodCA9IGlucC5zY3JvbGxIZWlnaHQgKyAncHgnXG4gICAgICAgIHBhcmVudFN0eWxlLm1hcmdpbkJvdHRvbSA9ICcnXG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gb25DaGFuZ2UgKGUpIHtcbiAgICAgIG9uQ29tcG9zaXRpb24oZSlcblxuICAgICAgY2xlYXJUaW1lb3V0KGVtaXRUaW1lcilcbiAgICAgIGVtaXRWYWx1ZUZuICE9PSB2b2lkIDAgJiYgZW1pdFZhbHVlRm4oKVxuXG4gICAgICBlbWl0KCdjaGFuZ2UnLCBlLnRhcmdldC52YWx1ZSlcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBvbkZpbmlzaEVkaXRpbmcgKGUpIHtcbiAgICAgIGUgIT09IHZvaWQgMCAmJiBzdG9wKGUpXG5cbiAgICAgIGNsZWFyVGltZW91dChlbWl0VGltZXIpXG4gICAgICBlbWl0VmFsdWVGbiAhPT0gdm9pZCAwICYmIGVtaXRWYWx1ZUZuKClcblxuICAgICAgdHlwZWROdW1iZXIgPSBmYWxzZVxuICAgICAgc3RvcFZhbHVlV2F0Y2hlciA9IGZhbHNlXG4gICAgICBkZWxldGUgdGVtcC52YWx1ZVxuXG4gICAgICAvLyB3ZSBuZWVkIHRvIHVzZSBzZXRUaW1lb3V0IGluc3RlYWQgb2YgdGhpcy4kbmV4dFRpY2tcbiAgICAgIC8vIHRvIGF2b2lkIGEgYnVnIHdoZXJlIGZvY3Vzb3V0IGlzIG5vdCBlbWl0dGVkIGZvciB0eXBlIGRhdGUvdGltZS93ZWVrLy4uLlxuICAgICAgcHJvcHMudHlwZSAhPT0gJ2ZpbGUnICYmIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICBpZiAoaW5wdXRSZWYudmFsdWUgIT09IG51bGwpIHtcbiAgICAgICAgICBpbnB1dFJlZi52YWx1ZS52YWx1ZSA9IGlubmVyVmFsdWUudmFsdWUgIT09IHZvaWQgMCA/IGlubmVyVmFsdWUudmFsdWUgOiAnJ1xuICAgICAgICB9XG4gICAgICB9KVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldEN1clZhbHVlICgpIHtcbiAgICAgIHJldHVybiB0ZW1wLmhhc093blByb3BlcnR5KCd2YWx1ZScpID09PSB0cnVlXG4gICAgICAgID8gdGVtcC52YWx1ZVxuICAgICAgICA6IChpbm5lclZhbHVlLnZhbHVlICE9PSB2b2lkIDAgPyBpbm5lclZhbHVlLnZhbHVlIDogJycpXG4gICAgfVxuXG4gICAgb25CZWZvcmVVbm1vdW50KCgpID0+IHtcbiAgICAgIG9uRmluaXNoRWRpdGluZygpXG4gICAgfSlcblxuICAgIG9uTW91bnRlZCgoKSA9PiB7XG4gICAgICAvLyB0ZXh0YXJlYSBvbmx5XG4gICAgICBwcm9wcy5hdXRvZ3JvdyA9PT0gdHJ1ZSAmJiBhZGp1c3RIZWlnaHQoKVxuICAgIH0pXG5cbiAgICBPYmplY3QuYXNzaWduKHN0YXRlLCB7XG4gICAgICBpbm5lclZhbHVlLFxuXG4gICAgICBmaWVsZENsYXNzOiBjb21wdXRlZCgoKSA9PlxuICAgICAgICBgcS0keyBpc1RleHRhcmVhLnZhbHVlID09PSB0cnVlID8gJ3RleHRhcmVhJyA6ICdpbnB1dCcgfWBcbiAgICAgICAgKyAocHJvcHMuYXV0b2dyb3cgPT09IHRydWUgPyAnIHEtdGV4dGFyZWEtLWF1dG9ncm93JyA6ICcnKVxuICAgICAgKSxcblxuICAgICAgaGFzU2hhZG93OiBjb21wdXRlZCgoKSA9PlxuICAgICAgICBwcm9wcy50eXBlICE9PSAnZmlsZSdcbiAgICAgICAgJiYgdHlwZW9mIHByb3BzLnNoYWRvd1RleHQgPT09ICdzdHJpbmcnXG4gICAgICAgICYmIHByb3BzLnNoYWRvd1RleHQubGVuZ3RoID4gMFxuICAgICAgKSxcblxuICAgICAgaW5wdXRSZWYsXG5cbiAgICAgIGVtaXRWYWx1ZSxcblxuICAgICAgaGFzVmFsdWUsXG5cbiAgICAgIGZsb2F0aW5nTGFiZWw6IGNvbXB1dGVkKCgpID0+XG4gICAgICAgIGhhc1ZhbHVlLnZhbHVlID09PSB0cnVlXG4gICAgICAgIHx8IGZpZWxkVmFsdWVJc0ZpbGxlZChwcm9wcy5kaXNwbGF5VmFsdWUpXG4gICAgICApLFxuXG4gICAgICBnZXRDb250cm9sOiAoKSA9PiB7XG4gICAgICAgIHJldHVybiBoKGlzVGV4dGFyZWEudmFsdWUgPT09IHRydWUgPyAndGV4dGFyZWEnIDogJ2lucHV0Jywge1xuICAgICAgICAgIHJlZjogaW5wdXRSZWYsXG4gICAgICAgICAgY2xhc3M6IFtcbiAgICAgICAgICAgICdxLWZpZWxkX19uYXRpdmUgcS1wbGFjZWhvbGRlcicsXG4gICAgICAgICAgICBwcm9wcy5pbnB1dENsYXNzXG4gICAgICAgICAgXSxcbiAgICAgICAgICBzdHlsZTogcHJvcHMuaW5wdXRTdHlsZSxcbiAgICAgICAgICAuLi5pbnB1dEF0dHJzLnZhbHVlLFxuICAgICAgICAgIC4uLm9uRXZlbnRzLnZhbHVlLFxuICAgICAgICAgIC4uLihcbiAgICAgICAgICAgIHByb3BzLnR5cGUgIT09ICdmaWxlJ1xuICAgICAgICAgICAgICA/IHsgdmFsdWU6IGdldEN1clZhbHVlKCkgfVxuICAgICAgICAgICAgICA6IGZvcm1Eb21Qcm9wcy52YWx1ZVxuICAgICAgICAgIClcbiAgICAgICAgfSlcbiAgICAgIH0sXG5cbiAgICAgIGdldFNoYWRvd0NvbnRyb2w6ICgpID0+IHtcbiAgICAgICAgcmV0dXJuIGgoJ2RpdicsIHtcbiAgICAgICAgICBjbGFzczogJ3EtZmllbGRfX25hdGl2ZSBxLWZpZWxkX19zaGFkb3cgYWJzb2x1dGUtYm90dG9tIG5vLXBvaW50ZXItZXZlbnRzJ1xuICAgICAgICAgICAgKyAoaXNUZXh0YXJlYS52YWx1ZSA9PT0gdHJ1ZSA/ICcnIDogJyB0ZXh0LW5vLXdyYXAnKVxuICAgICAgICB9LCBbXG4gICAgICAgICAgaCgnc3BhbicsIHsgY2xhc3M6ICdpbnZpc2libGUnIH0sIGdldEN1clZhbHVlKCkpLFxuICAgICAgICAgIGgoJ3NwYW4nLCBwcm9wcy5zaGFkb3dUZXh0KVxuICAgICAgICBdKVxuICAgICAgfVxuICAgIH0pXG5cbiAgICBjb25zdCByZW5kZXJGbiA9IHVzZUZpZWxkKHN0YXRlKVxuXG4gICAgLy8gZXhwb3NlIHB1YmxpYyBtZXRob2RzXG4gICAgY29uc3Qgdm0gPSBnZXRDdXJyZW50SW5zdGFuY2UoKVxuICAgIE9iamVjdC5hc3NpZ24odm0ucHJveHksIHtcbiAgICAgIGZvY3VzLFxuICAgICAgc2VsZWN0LFxuICAgICAgZ2V0TmF0aXZlRWxlbWVudDogKCkgPT4gaW5wdXRSZWYudmFsdWVcbiAgICB9KVxuXG4gICAgcmV0dXJuIHJlbmRlckZuXG4gIH1cbn0pXG4iLCJpbXBvcnQgeyBoLCBjb21wdXRlZCwgcmVmIH0gZnJvbSAndnVlJ1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiAocHJvcHMsIHJvb3RSZWYpIHtcbiAgY29uc3QgcmVmb2N1c1JlZiA9IHJlZihudWxsKVxuXG4gIGNvbnN0IHJlZm9jdXNUYXJnZXRFbCA9IGNvbXB1dGVkKCgpID0+IHtcbiAgICBpZiAocHJvcHMuZGlzYWJsZSAhPT0gdHJ1ZSkge1xuICAgICAgcmV0dXJuIG51bGxcbiAgICB9XG5cbiAgICByZXR1cm4gaCgnc3BhbicsIHtcbiAgICAgIHJlZjogcmVmb2N1c1JlZixcbiAgICAgIGNsYXNzOiAnbm8tb3V0bGluZScsXG4gICAgICB0YWJpbmRleDogLTFcbiAgICB9KVxuICB9KVxuXG4gIGZ1bmN0aW9uIHJlZm9jdXNUYXJnZXQgKGUpIHtcbiAgICBjb25zdCByb290ID0gcm9vdFJlZi52YWx1ZVxuXG4gICAgaWYgKGUgIT09IHZvaWQgMCAmJiBlLnR5cGUuaW5kZXhPZigna2V5JykgPT09IDApIHtcbiAgICAgIGlmIChcbiAgICAgICAgcm9vdCAhPT0gbnVsbFxuICAgICAgICAmJiBkb2N1bWVudC5hY3RpdmVFbGVtZW50ICE9PSByb290XG4gICAgICAgICYmIHJvb3QuY29udGFpbnMoZG9jdW1lbnQuYWN0aXZlRWxlbWVudCkgPT09IHRydWVcbiAgICAgICkge1xuICAgICAgICByb290LmZvY3VzKClcbiAgICAgIH1cbiAgICB9XG4gICAgZWxzZSBpZiAoXG4gICAgICByZWZvY3VzUmVmLnZhbHVlICE9PSBudWxsXG4gICAgICAmJiAoZSA9PT0gdm9pZCAwIHx8IChyb290ICE9PSBudWxsICYmIHJvb3QuY29udGFpbnMoZS50YXJnZXQpID09PSB0cnVlKSlcbiAgICApIHtcbiAgICAgIHJlZm9jdXNSZWYudmFsdWUuZm9jdXMoKVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiB7XG4gICAgcmVmb2N1c1RhcmdldEVsLFxuICAgIHJlZm9jdXNUYXJnZXRcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQge1xuICB4czogMzAsXG4gIHNtOiAzNSxcbiAgbWQ6IDQwLFxuICBsZzogNTAsXG4gIHhsOiA2MFxufVxuIiwiaW1wb3J0IHsgaCwgcmVmLCBjb21wdXRlZCwgZ2V0Q3VycmVudEluc3RhbmNlIH0gZnJvbSAndnVlJ1xuXG5pbXBvcnQgUUljb24gZnJvbSAnLi4vaWNvbi9RSWNvbi5qcydcblxuaW1wb3J0IHVzZURhcmssIHsgdXNlRGFya1Byb3BzIH0gZnJvbSAnLi4vLi4vY29tcG9zYWJsZXMvcHJpdmF0ZS91c2UtZGFyay5qcydcbmltcG9ydCB1c2VTaXplLCB7IHVzZVNpemVQcm9wcyB9IGZyb20gJy4uLy4uL2NvbXBvc2FibGVzL3ByaXZhdGUvdXNlLXNpemUuanMnXG5pbXBvcnQgdXNlUmVmb2N1c1RhcmdldCBmcm9tICcuLi8uLi9jb21wb3NhYmxlcy9wcml2YXRlL3VzZS1yZWZvY3VzLXRhcmdldC5qcydcbmltcG9ydCB7IHVzZUZvcm1Qcm9wcywgdXNlRm9ybUluamVjdCB9IGZyb20gJy4uLy4uL2NvbXBvc2FibGVzL3ByaXZhdGUvdXNlLWZvcm0uanMnXG5cbmltcG9ydCB7IGNyZWF0ZUNvbXBvbmVudCB9IGZyb20gJy4uLy4uL3V0aWxzL3ByaXZhdGUvY3JlYXRlLmpzJ1xuaW1wb3J0IG9wdGlvblNpemVzIGZyb20gJy4uLy4uL3V0aWxzL3ByaXZhdGUvb3B0aW9uLXNpemVzLmpzJ1xuaW1wb3J0IHsgc3RvcEFuZFByZXZlbnQgfSBmcm9tICcuLi8uLi91dGlscy9ldmVudC5qcydcbmltcG9ydCB7IGhTbG90LCBoTWVyZ2VTbG90IH0gZnJvbSAnLi4vLi4vdXRpbHMvcHJpdmF0ZS9yZW5kZXIuanMnXG5cbmNvbnN0IHN2ZyA9IGgoJ3N2ZycsIHtcbiAga2V5OiAnc3ZnJyxcbiAgY2xhc3M6ICdxLXJhZGlvX19iZyBhYnNvbHV0ZSBub24tc2VsZWN0YWJsZScsXG4gIHZpZXdCb3g6ICcwIDAgMjQgMjQnLFxuICAnYXJpYS1oaWRkZW4nOiAndHJ1ZSdcbn0sIFtcbiAgaCgncGF0aCcsIHtcbiAgICBkOiAnTTEyLDIyYTEwLDEwIDAgMCAxIC0xMCwtMTBhMTAsMTAgMCAwIDEgMTAsLTEwYTEwLDEwIDAgMCAxIDEwLDEwYTEwLDEwIDAgMCAxIC0xMCwxMG0wLC0yMmExMiwxMiAwIDAgMCAtMTIsMTJhMTIsMTIgMCAwIDAgMTIsMTJhMTIsMTIgMCAwIDAgMTIsLTEyYTEyLDEyIDAgMCAwIC0xMiwtMTInXG4gIH0pLFxuXG4gIGgoJ3BhdGgnLCB7XG4gICAgY2xhc3M6ICdxLXJhZGlvX19jaGVjaycsXG4gICAgZDogJ00xMiw2YTYsNiAwIDAgMCAtNiw2YTYsNiAwIDAgMCA2LDZhNiw2IDAgMCAwIDYsLTZhNiw2IDAgMCAwIC02LC02J1xuICB9KVxuXSlcblxuZXhwb3J0IGRlZmF1bHQgY3JlYXRlQ29tcG9uZW50KHtcbiAgbmFtZTogJ1FSYWRpbycsXG5cbiAgcHJvcHM6IHtcbiAgICAuLi51c2VEYXJrUHJvcHMsXG4gICAgLi4udXNlU2l6ZVByb3BzLFxuICAgIC4uLnVzZUZvcm1Qcm9wcyxcblxuICAgIG1vZGVsVmFsdWU6IHsgcmVxdWlyZWQ6IHRydWUgfSxcbiAgICB2YWw6IHsgcmVxdWlyZWQ6IHRydWUgfSxcblxuICAgIGxhYmVsOiBTdHJpbmcsXG4gICAgbGVmdExhYmVsOiBCb29sZWFuLFxuXG4gICAgY2hlY2tlZEljb246IFN0cmluZyxcbiAgICB1bmNoZWNrZWRJY29uOiBTdHJpbmcsXG5cbiAgICBjb2xvcjogU3RyaW5nLFxuICAgIGtlZXBDb2xvcjogQm9vbGVhbixcbiAgICBkZW5zZTogQm9vbGVhbixcblxuICAgIGRpc2FibGU6IEJvb2xlYW4sXG4gICAgdGFiaW5kZXg6IFsgU3RyaW5nLCBOdW1iZXIgXVxuICB9LFxuXG4gIGVtaXRzOiBbICd1cGRhdGU6bW9kZWxWYWx1ZScgXSxcblxuICBzZXR1cCAocHJvcHMsIHsgc2xvdHMsIGVtaXQgfSkge1xuICAgIGNvbnN0IHsgcHJveHkgfSA9IGdldEN1cnJlbnRJbnN0YW5jZSgpXG5cbiAgICBjb25zdCBpc0RhcmsgPSB1c2VEYXJrKHByb3BzLCBwcm94eS4kcSlcbiAgICBjb25zdCBzaXplU3R5bGUgPSB1c2VTaXplKHByb3BzLCBvcHRpb25TaXplcylcblxuICAgIGNvbnN0IHJvb3RSZWYgPSByZWYobnVsbClcbiAgICBjb25zdCB7IHJlZm9jdXNUYXJnZXRFbCwgcmVmb2N1c1RhcmdldCB9ID0gdXNlUmVmb2N1c1RhcmdldChwcm9wcywgcm9vdFJlZilcblxuICAgIGNvbnN0IGlzVHJ1ZSA9IGNvbXB1dGVkKCgpID0+IHByb3BzLm1vZGVsVmFsdWUgPT09IHByb3BzLnZhbClcblxuICAgIGNvbnN0IGNsYXNzZXMgPSBjb21wdXRlZCgoKSA9PlxuICAgICAgJ3EtcmFkaW8gY3Vyc29yLXBvaW50ZXIgbm8tb3V0bGluZSByb3cgaW5saW5lIG5vLXdyYXAgaXRlbXMtY2VudGVyJ1xuICAgICAgKyAocHJvcHMuZGlzYWJsZSA9PT0gdHJ1ZSA/ICcgZGlzYWJsZWQnIDogJycpXG4gICAgICArIChpc0RhcmsudmFsdWUgPT09IHRydWUgPyAnIHEtcmFkaW8tLWRhcmsnIDogJycpXG4gICAgICArIChwcm9wcy5kZW5zZSA9PT0gdHJ1ZSA/ICcgcS1yYWRpby0tZGVuc2UnIDogJycpXG4gICAgICArIChwcm9wcy5sZWZ0TGFiZWwgPT09IHRydWUgPyAnIHJldmVyc2UnIDogJycpXG4gICAgKVxuXG4gICAgY29uc3QgaW5uZXJDbGFzcyA9IGNvbXB1dGVkKCgpID0+IHtcbiAgICAgIGNvbnN0IGNvbG9yID0gcHJvcHMuY29sb3IgIT09IHZvaWQgMCAmJiAoXG4gICAgICAgIHByb3BzLmtlZXBDb2xvciA9PT0gdHJ1ZVxuICAgICAgICB8fCBpc1RydWUudmFsdWUgPT09IHRydWVcbiAgICAgIClcbiAgICAgICAgPyBgIHRleHQtJHsgcHJvcHMuY29sb3IgfWBcbiAgICAgICAgOiAnJ1xuXG4gICAgICByZXR1cm4gJ3EtcmFkaW9fX2lubmVyIHJlbGF0aXZlLXBvc2l0aW9uICdcbiAgICAgICAgKyBgcS1yYWRpb19faW5uZXItLSR7IGlzVHJ1ZS52YWx1ZSA9PT0gdHJ1ZSA/ICd0cnV0aHknIDogJ2ZhbHN5JyB9JHsgY29sb3IgfWBcbiAgICB9KVxuXG4gICAgY29uc3QgaWNvbiA9IGNvbXB1dGVkKCgpID0+XG4gICAgICAoaXNUcnVlLnZhbHVlID09PSB0cnVlXG4gICAgICAgID8gcHJvcHMuY2hlY2tlZEljb25cbiAgICAgICAgOiBwcm9wcy51bmNoZWNrZWRJY29uXG4gICAgICApIHx8IG51bGxcbiAgICApXG5cbiAgICBjb25zdCB0YWJpbmRleCA9IGNvbXB1dGVkKCgpID0+IChcbiAgICAgIHByb3BzLmRpc2FibGUgPT09IHRydWUgPyAtMSA6IHByb3BzLnRhYmluZGV4IHx8IDBcbiAgICApKVxuXG4gICAgY29uc3QgZm9ybUF0dHJzID0gY29tcHV0ZWQoKCkgPT4ge1xuICAgICAgY29uc3QgcHJvcCA9IHsgdHlwZTogJ3JhZGlvJyB9XG5cbiAgICAgIHByb3BzLm5hbWUgIT09IHZvaWQgMCAmJiBPYmplY3QuYXNzaWduKHByb3AsIHtcbiAgICAgICAgJ15jaGVja2VkJzogaXNUcnVlLnZhbHVlID09PSB0cnVlID8gJ2NoZWNrZWQnIDogdm9pZCAwLFxuICAgICAgICBuYW1lOiBwcm9wcy5uYW1lLFxuICAgICAgICB2YWx1ZTogcHJvcHMudmFsXG4gICAgICB9KVxuXG4gICAgICByZXR1cm4gcHJvcFxuICAgIH0pXG5cbiAgICBjb25zdCBpbmplY3RGb3JtSW5wdXQgPSB1c2VGb3JtSW5qZWN0KGZvcm1BdHRycylcblxuICAgIGZ1bmN0aW9uIG9uQ2xpY2sgKGUpIHtcbiAgICAgIGlmIChlICE9PSB2b2lkIDApIHtcbiAgICAgICAgc3RvcEFuZFByZXZlbnQoZSlcbiAgICAgICAgcmVmb2N1c1RhcmdldChlKVxuICAgICAgfVxuXG4gICAgICBpZiAocHJvcHMuZGlzYWJsZSAhPT0gdHJ1ZSAmJiBpc1RydWUudmFsdWUgIT09IHRydWUpIHtcbiAgICAgICAgZW1pdCgndXBkYXRlOm1vZGVsVmFsdWUnLCBwcm9wcy52YWwsIGUpXG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gb25LZXlkb3duIChlKSB7XG4gICAgICBpZiAoZS5rZXlDb2RlID09PSAxMyB8fCBlLmtleUNvZGUgPT09IDMyKSB7XG4gICAgICAgIHN0b3BBbmRQcmV2ZW50KGUpXG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gb25LZXl1cCAoZSkge1xuICAgICAgaWYgKGUua2V5Q29kZSA9PT0gMTMgfHwgZS5rZXlDb2RlID09PSAzMikge1xuICAgICAgICBvbkNsaWNrKGUpXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gZXhwb3NlIHB1YmxpYyBtZXRob2RzXG4gICAgT2JqZWN0LmFzc2lnbihwcm94eSwgeyBzZXQ6IG9uQ2xpY2sgfSlcblxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBjb25zdCBjb250ZW50ID0gaWNvbi52YWx1ZSAhPT0gbnVsbFxuICAgICAgICA/IFtcbiAgICAgICAgICAgIGgoJ2RpdicsIHtcbiAgICAgICAgICAgICAga2V5OiAnaWNvbicsXG4gICAgICAgICAgICAgIGNsYXNzOiAncS1yYWRpb19faWNvbi1jb250YWluZXIgYWJzb2x1dGUtZnVsbCBmbGV4IGZsZXgtY2VudGVyIG5vLXdyYXAnXG4gICAgICAgICAgICB9LCBbXG4gICAgICAgICAgICAgIGgoUUljb24sIHtcbiAgICAgICAgICAgICAgICBjbGFzczogJ3EtcmFkaW9fX2ljb24nLFxuICAgICAgICAgICAgICAgIG5hbWU6IGljb24udmFsdWVcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIF0pXG4gICAgICAgICAgXVxuICAgICAgICA6IFsgc3ZnIF1cblxuICAgICAgcHJvcHMuZGlzYWJsZSAhPT0gdHJ1ZSAmJiBpbmplY3RGb3JtSW5wdXQoXG4gICAgICAgIGNvbnRlbnQsXG4gICAgICAgICd1bnNoaWZ0JyxcbiAgICAgICAgJyBxLXJhZGlvX19uYXRpdmUgcS1tYS1ub25lIHEtcGEtbm9uZSdcbiAgICAgIClcblxuICAgICAgY29uc3QgY2hpbGQgPSBbXG4gICAgICAgIGgoJ2RpdicsIHtcbiAgICAgICAgICBjbGFzczogaW5uZXJDbGFzcy52YWx1ZSxcbiAgICAgICAgICBzdHlsZTogc2l6ZVN0eWxlLnZhbHVlXG4gICAgICAgIH0sIGNvbnRlbnQpXG4gICAgICBdXG5cbiAgICAgIGlmIChyZWZvY3VzVGFyZ2V0RWwudmFsdWUgIT09IG51bGwpIHtcbiAgICAgICAgY2hpbGQucHVzaChyZWZvY3VzVGFyZ2V0RWwudmFsdWUpXG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGxhYmVsID0gcHJvcHMubGFiZWwgIT09IHZvaWQgMFxuICAgICAgICA/IGhNZXJnZVNsb3Qoc2xvdHMuZGVmYXVsdCwgWyBwcm9wcy5sYWJlbCBdKVxuICAgICAgICA6IGhTbG90KHNsb3RzLmRlZmF1bHQpXG5cbiAgICAgIGxhYmVsICE9PSB2b2lkIDAgJiYgY2hpbGQucHVzaChcbiAgICAgICAgaCgnZGl2Jywge1xuICAgICAgICAgIGNsYXNzOiAncS1yYWRpb19fbGFiZWwgcS1hbmNob3ItLXNraXAnXG4gICAgICAgIH0sIGxhYmVsKVxuICAgICAgKVxuXG4gICAgICByZXR1cm4gaCgnZGl2Jywge1xuICAgICAgICByZWY6IHJvb3RSZWYsXG4gICAgICAgIGNsYXNzOiBjbGFzc2VzLnZhbHVlLFxuICAgICAgICB0YWJpbmRleDogdGFiaW5kZXgudmFsdWUsXG4gICAgICAgIHJvbGU6ICdyYWRpbycsXG4gICAgICAgICdhcmlhLWxhYmVsJzogcHJvcHMubGFiZWwsXG4gICAgICAgICdhcmlhLWNoZWNrZWQnOiBpc1RydWUudmFsdWUgPT09IHRydWUgPyAndHJ1ZScgOiAnZmFsc2UnLFxuICAgICAgICAnYXJpYS1kaXNhYmxlZCc6IHByb3BzLmRpc2FibGUgPT09IHRydWUgPyAndHJ1ZScgOiB2b2lkIDAsXG4gICAgICAgIG9uQ2xpY2ssXG4gICAgICAgIG9uS2V5ZG93bixcbiAgICAgICAgb25LZXl1cFxuICAgICAgfSwgY2hpbGQpXG4gICAgfVxuICB9XG59KVxuIiwiaW1wb3J0IHsgaCwgcmVmLCBjb21wdXRlZCwgZ2V0Q3VycmVudEluc3RhbmNlIH0gZnJvbSAndnVlJ1xuXG5pbXBvcnQgdXNlRGFyaywgeyB1c2VEYXJrUHJvcHMgfSBmcm9tICcuLi8uLi9jb21wb3NhYmxlcy9wcml2YXRlL3VzZS1kYXJrLmpzJ1xuaW1wb3J0IHVzZVNpemUsIHsgdXNlU2l6ZVByb3BzIH0gZnJvbSAnLi4vLi4vY29tcG9zYWJsZXMvcHJpdmF0ZS91c2Utc2l6ZS5qcydcbmltcG9ydCB1c2VSZWZvY3VzVGFyZ2V0IGZyb20gJy4uLy4uL2NvbXBvc2FibGVzL3ByaXZhdGUvdXNlLXJlZm9jdXMtdGFyZ2V0LmpzJ1xuaW1wb3J0IHsgdXNlRm9ybUluamVjdCwgdXNlRm9ybVByb3BzIH0gZnJvbSAnLi4vLi4vY29tcG9zYWJsZXMvcHJpdmF0ZS91c2UtZm9ybS5qcydcblxuaW1wb3J0IG9wdGlvblNpemVzIGZyb20gJy4uLy4uL3V0aWxzL3ByaXZhdGUvb3B0aW9uLXNpemVzLmpzJ1xuaW1wb3J0IHsgc3RvcEFuZFByZXZlbnQgfSBmcm9tICcuLi8uLi91dGlscy9ldmVudC5qcydcbmltcG9ydCB7IGhTbG90LCBoTWVyZ2VTbG90IH0gZnJvbSAnLi4vLi4vdXRpbHMvcHJpdmF0ZS9yZW5kZXIuanMnXG5cbmV4cG9ydCBjb25zdCB1c2VDaGVja2JveFByb3BzID0ge1xuICAuLi51c2VEYXJrUHJvcHMsXG4gIC4uLnVzZVNpemVQcm9wcyxcbiAgLi4udXNlRm9ybVByb3BzLFxuXG4gIG1vZGVsVmFsdWU6IHtcbiAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICBkZWZhdWx0OiBudWxsXG4gIH0sXG4gIHZhbDoge30sXG5cbiAgdHJ1ZVZhbHVlOiB7IGRlZmF1bHQ6IHRydWUgfSxcbiAgZmFsc2VWYWx1ZTogeyBkZWZhdWx0OiBmYWxzZSB9LFxuICBpbmRldGVybWluYXRlVmFsdWU6IHsgZGVmYXVsdDogbnVsbCB9LFxuXG4gIGNoZWNrZWRJY29uOiBTdHJpbmcsXG4gIHVuY2hlY2tlZEljb246IFN0cmluZyxcbiAgaW5kZXRlcm1pbmF0ZUljb246IFN0cmluZyxcblxuICB0b2dnbGVPcmRlcjoge1xuICAgIHR5cGU6IFN0cmluZyxcbiAgICB2YWxpZGF0b3I6IHYgPT4gdiA9PT0gJ3RmJyB8fCB2ID09PSAnZnQnXG4gIH0sXG4gIHRvZ2dsZUluZGV0ZXJtaW5hdGU6IEJvb2xlYW4sXG5cbiAgbGFiZWw6IFN0cmluZyxcbiAgbGVmdExhYmVsOiBCb29sZWFuLFxuXG4gIGNvbG9yOiBTdHJpbmcsXG4gIGtlZXBDb2xvcjogQm9vbGVhbixcbiAgZGVuc2U6IEJvb2xlYW4sXG5cbiAgZGlzYWJsZTogQm9vbGVhbixcbiAgdGFiaW5kZXg6IFsgU3RyaW5nLCBOdW1iZXIgXVxufVxuXG5leHBvcnQgY29uc3QgdXNlQ2hlY2tib3hFbWl0cyA9IFsgJ3VwZGF0ZTptb2RlbFZhbHVlJyBdXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uICh0eXBlLCBnZXRJbm5lcikge1xuICBjb25zdCB7IHByb3BzLCBzbG90cywgZW1pdCwgcHJveHkgfSA9IGdldEN1cnJlbnRJbnN0YW5jZSgpXG4gIGNvbnN0IHsgJHEgfSA9IHByb3h5XG5cbiAgY29uc3QgaXNEYXJrID0gdXNlRGFyayhwcm9wcywgJHEpXG5cbiAgY29uc3Qgcm9vdFJlZiA9IHJlZihudWxsKVxuICBjb25zdCB7IHJlZm9jdXNUYXJnZXRFbCwgcmVmb2N1c1RhcmdldCB9ID0gdXNlUmVmb2N1c1RhcmdldChwcm9wcywgcm9vdFJlZilcbiAgY29uc3Qgc2l6ZVN0eWxlID0gdXNlU2l6ZShwcm9wcywgb3B0aW9uU2l6ZXMpXG5cbiAgY29uc3QgbW9kZWxJc0FycmF5ID0gY29tcHV0ZWQoKCkgPT5cbiAgICBwcm9wcy52YWwgIT09IHZvaWQgMCAmJiBBcnJheS5pc0FycmF5KHByb3BzLm1vZGVsVmFsdWUpXG4gIClcblxuICBjb25zdCBpbmRleCA9IGNvbXB1dGVkKCgpID0+IChcbiAgICBtb2RlbElzQXJyYXkudmFsdWUgPT09IHRydWVcbiAgICAgID8gcHJvcHMubW9kZWxWYWx1ZS5pbmRleE9mKHByb3BzLnZhbClcbiAgICAgIDogLTFcbiAgKSlcblxuICBjb25zdCBpc1RydWUgPSBjb21wdXRlZCgoKSA9PiAoXG4gICAgbW9kZWxJc0FycmF5LnZhbHVlID09PSB0cnVlXG4gICAgICA/IGluZGV4LnZhbHVlID4gLTFcbiAgICAgIDogcHJvcHMubW9kZWxWYWx1ZSA9PT0gcHJvcHMudHJ1ZVZhbHVlXG4gICkpXG5cbiAgY29uc3QgaXNGYWxzZSA9IGNvbXB1dGVkKCgpID0+IChcbiAgICBtb2RlbElzQXJyYXkudmFsdWUgPT09IHRydWVcbiAgICAgID8gaW5kZXgudmFsdWUgPT09IC0xXG4gICAgICA6IHByb3BzLm1vZGVsVmFsdWUgPT09IHByb3BzLmZhbHNlVmFsdWVcbiAgKSlcblxuICBjb25zdCBpc0luZGV0ZXJtaW5hdGUgPSBjb21wdXRlZCgoKSA9PlxuICAgIGlzVHJ1ZS52YWx1ZSA9PT0gZmFsc2UgJiYgaXNGYWxzZS52YWx1ZSA9PT0gZmFsc2VcbiAgKVxuXG4gIGNvbnN0IHRhYmluZGV4ID0gY29tcHV0ZWQoKCkgPT4gKFxuICAgIHByb3BzLmRpc2FibGUgPT09IHRydWUgPyAtMSA6IHByb3BzLnRhYmluZGV4IHx8IDBcbiAgKSlcblxuICBjb25zdCBjbGFzc2VzID0gY29tcHV0ZWQoKCkgPT5cbiAgICBgcS0keyB0eXBlIH0gY3Vyc29yLXBvaW50ZXIgbm8tb3V0bGluZSByb3cgaW5saW5lIG5vLXdyYXAgaXRlbXMtY2VudGVyYFxuICAgICsgKHByb3BzLmRpc2FibGUgPT09IHRydWUgPyAnIGRpc2FibGVkJyA6ICcnKVxuICAgICsgKGlzRGFyay52YWx1ZSA9PT0gdHJ1ZSA/IGAgcS0keyB0eXBlIH0tLWRhcmtgIDogJycpXG4gICAgKyAocHJvcHMuZGVuc2UgPT09IHRydWUgPyBgIHEtJHsgdHlwZSB9LS1kZW5zZWAgOiAnJylcbiAgICArIChwcm9wcy5sZWZ0TGFiZWwgPT09IHRydWUgPyAnIHJldmVyc2UnIDogJycpXG4gIClcblxuICBjb25zdCBpbm5lckNsYXNzID0gY29tcHV0ZWQoKCkgPT4ge1xuICAgIGNvbnN0IHN0YXRlID0gaXNUcnVlLnZhbHVlID09PSB0cnVlID8gJ3RydXRoeScgOiAoaXNGYWxzZS52YWx1ZSA9PT0gdHJ1ZSA/ICdmYWxzeScgOiAnaW5kZXQnKVxuICAgIGNvbnN0IGNvbG9yID0gcHJvcHMuY29sb3IgIT09IHZvaWQgMCAmJiAoXG4gICAgICBwcm9wcy5rZWVwQ29sb3IgPT09IHRydWVcbiAgICAgIHx8ICh0eXBlID09PSAndG9nZ2xlJyA/IGlzVHJ1ZS52YWx1ZSA9PT0gdHJ1ZSA6IGlzRmFsc2UudmFsdWUgIT09IHRydWUpXG4gICAgKVxuICAgICAgPyBgIHRleHQtJHsgcHJvcHMuY29sb3IgfWBcbiAgICAgIDogJydcblxuICAgIHJldHVybiBgcS0keyB0eXBlIH1fX2lubmVyIHJlbGF0aXZlLXBvc2l0aW9uIG5vbi1zZWxlY3RhYmxlIHEtJHsgdHlwZSB9X19pbm5lci0tJHsgc3RhdGUgfSR7IGNvbG9yIH1gXG4gIH0pXG5cbiAgY29uc3QgZm9ybUF0dHJzID0gY29tcHV0ZWQoKCkgPT4ge1xuICAgIGNvbnN0IHByb3AgPSB7IHR5cGU6ICdjaGVja2JveCcgfVxuXG4gICAgcHJvcHMubmFtZSAhPT0gdm9pZCAwICYmIE9iamVjdC5hc3NpZ24ocHJvcCwge1xuICAgICAgJ15jaGVja2VkJzogaXNUcnVlLnZhbHVlID09PSB0cnVlID8gJ2NoZWNrZWQnIDogdm9pZCAwLFxuICAgICAgbmFtZTogcHJvcHMubmFtZSxcbiAgICAgIHZhbHVlOiBtb2RlbElzQXJyYXkudmFsdWUgPT09IHRydWVcbiAgICAgICAgPyBwcm9wcy52YWxcbiAgICAgICAgOiBwcm9wcy50cnVlVmFsdWVcbiAgICB9KVxuXG4gICAgcmV0dXJuIHByb3BcbiAgfSlcblxuICBjb25zdCBpbmplY3RGb3JtSW5wdXQgPSB1c2VGb3JtSW5qZWN0KGZvcm1BdHRycylcblxuICBjb25zdCBhdHRyaWJ1dGVzID0gY29tcHV0ZWQoKCkgPT4ge1xuICAgIGNvbnN0IGF0dHJzID0ge1xuICAgICAgdGFiaW5kZXg6IHRhYmluZGV4LnZhbHVlLFxuICAgICAgcm9sZTogJ2NoZWNrYm94JyxcbiAgICAgICdhcmlhLWxhYmVsJzogcHJvcHMubGFiZWwsXG4gICAgICAnYXJpYS1jaGVja2VkJzogaXNJbmRldGVybWluYXRlLnZhbHVlID09PSB0cnVlXG4gICAgICAgID8gJ21peGVkJ1xuICAgICAgICA6IChpc1RydWUudmFsdWUgPT09IHRydWUgPyAndHJ1ZScgOiAnZmFsc2UnKVxuICAgIH1cblxuICAgIGlmIChwcm9wcy5kaXNhYmxlID09PSB0cnVlKSB7XG4gICAgICBhdHRyc1sgJ2FyaWEtZGlzYWJsZWQnIF0gPSAndHJ1ZSdcbiAgICB9XG5cbiAgICByZXR1cm4gYXR0cnNcbiAgfSlcblxuICBmdW5jdGlvbiBvbkNsaWNrIChlKSB7XG4gICAgaWYgKGUgIT09IHZvaWQgMCkge1xuICAgICAgc3RvcEFuZFByZXZlbnQoZSlcbiAgICAgIHJlZm9jdXNUYXJnZXQoZSlcbiAgICB9XG5cbiAgICBpZiAocHJvcHMuZGlzYWJsZSAhPT0gdHJ1ZSkge1xuICAgICAgZW1pdCgndXBkYXRlOm1vZGVsVmFsdWUnLCBnZXROZXh0VmFsdWUoKSwgZSlcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBnZXROZXh0VmFsdWUgKCkge1xuICAgIGlmIChtb2RlbElzQXJyYXkudmFsdWUgPT09IHRydWUpIHtcbiAgICAgIGlmIChpc1RydWUudmFsdWUgPT09IHRydWUpIHtcbiAgICAgICAgY29uc3QgdmFsID0gcHJvcHMubW9kZWxWYWx1ZS5zbGljZSgpXG4gICAgICAgIHZhbC5zcGxpY2UoaW5kZXgudmFsdWUsIDEpXG4gICAgICAgIHJldHVybiB2YWxcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHByb3BzLm1vZGVsVmFsdWUuY29uY2F0KFsgcHJvcHMudmFsIF0pXG4gICAgfVxuXG4gICAgaWYgKGlzVHJ1ZS52YWx1ZSA9PT0gdHJ1ZSkge1xuICAgICAgaWYgKHByb3BzLnRvZ2dsZU9yZGVyICE9PSAnZnQnIHx8IHByb3BzLnRvZ2dsZUluZGV0ZXJtaW5hdGUgPT09IGZhbHNlKSB7XG4gICAgICAgIHJldHVybiBwcm9wcy5mYWxzZVZhbHVlXG4gICAgICB9XG4gICAgfVxuICAgIGVsc2UgaWYgKGlzRmFsc2UudmFsdWUgPT09IHRydWUpIHtcbiAgICAgIGlmIChwcm9wcy50b2dnbGVPcmRlciA9PT0gJ2Z0JyB8fCBwcm9wcy50b2dnbGVJbmRldGVybWluYXRlID09PSBmYWxzZSkge1xuICAgICAgICByZXR1cm4gcHJvcHMudHJ1ZVZhbHVlXG4gICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgcmV0dXJuIHByb3BzLnRvZ2dsZU9yZGVyICE9PSAnZnQnXG4gICAgICAgID8gcHJvcHMudHJ1ZVZhbHVlXG4gICAgICAgIDogcHJvcHMuZmFsc2VWYWx1ZVxuICAgIH1cblxuICAgIHJldHVybiBwcm9wcy5pbmRldGVybWluYXRlVmFsdWVcbiAgfVxuXG4gIGZ1bmN0aW9uIG9uS2V5ZG93biAoZSkge1xuICAgIGlmIChlLmtleUNvZGUgPT09IDEzIHx8IGUua2V5Q29kZSA9PT0gMzIpIHtcbiAgICAgIHN0b3BBbmRQcmV2ZW50KGUpXG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gb25LZXl1cCAoZSkge1xuICAgIGlmIChlLmtleUNvZGUgPT09IDEzIHx8IGUua2V5Q29kZSA9PT0gMzIpIHtcbiAgICAgIG9uQ2xpY2soZSlcbiAgICB9XG4gIH1cblxuICBjb25zdCBnZXRJbm5lckNvbnRlbnQgPSBnZXRJbm5lcihpc1RydWUsIGlzSW5kZXRlcm1pbmF0ZSlcblxuICAvLyBleHBvc2UgcHVibGljIG1ldGhvZHNcbiAgT2JqZWN0LmFzc2lnbihwcm94eSwgeyB0b2dnbGU6IG9uQ2xpY2sgfSlcblxuICByZXR1cm4gKCkgPT4ge1xuICAgIGNvbnN0IGlubmVyID0gZ2V0SW5uZXJDb250ZW50KClcblxuICAgIHByb3BzLmRpc2FibGUgIT09IHRydWUgJiYgaW5qZWN0Rm9ybUlucHV0KFxuICAgICAgaW5uZXIsXG4gICAgICAndW5zaGlmdCcsXG4gICAgICBgIHEtJHsgdHlwZSB9X19uYXRpdmUgYWJzb2x1dGUgcS1tYS1ub25lIHEtcGEtbm9uZWBcbiAgICApXG5cbiAgICBjb25zdCBjaGlsZCA9IFtcbiAgICAgIGgoJ2RpdicsIHtcbiAgICAgICAgY2xhc3M6IGlubmVyQ2xhc3MudmFsdWUsXG4gICAgICAgIHN0eWxlOiBzaXplU3R5bGUudmFsdWVcbiAgICAgIH0sIGlubmVyKVxuICAgIF1cblxuICAgIGlmIChyZWZvY3VzVGFyZ2V0RWwudmFsdWUgIT09IG51bGwpIHtcbiAgICAgIGNoaWxkLnB1c2gocmVmb2N1c1RhcmdldEVsLnZhbHVlKVxuICAgIH1cblxuICAgIGNvbnN0IGxhYmVsID0gcHJvcHMubGFiZWwgIT09IHZvaWQgMFxuICAgICAgPyBoTWVyZ2VTbG90KHNsb3RzLmRlZmF1bHQsIFsgcHJvcHMubGFiZWwgXSlcbiAgICAgIDogaFNsb3Qoc2xvdHMuZGVmYXVsdClcblxuICAgIGxhYmVsICE9PSB2b2lkIDAgJiYgY2hpbGQucHVzaChcbiAgICAgIGgoJ2RpdicsIHtcbiAgICAgICAgY2xhc3M6IGBxLSR7IHR5cGUgfV9fbGFiZWwgcS1hbmNob3ItLXNraXBgXG4gICAgICB9LCBsYWJlbClcbiAgICApXG5cbiAgICByZXR1cm4gaCgnZGl2Jywge1xuICAgICAgcmVmOiByb290UmVmLFxuICAgICAgY2xhc3M6IGNsYXNzZXMudmFsdWUsXG4gICAgICAuLi5hdHRyaWJ1dGVzLnZhbHVlLFxuICAgICAgb25DbGljayxcbiAgICAgIG9uS2V5ZG93bixcbiAgICAgIG9uS2V5dXBcbiAgICB9LCBjaGlsZClcbiAgfVxufVxuIiwiaW1wb3J0IHsgaCwgY29tcHV0ZWQgfSBmcm9tICd2dWUnXG5cbmltcG9ydCBRSWNvbiBmcm9tICcuLi9pY29uL1FJY29uLmpzJ1xuXG5pbXBvcnQgeyBjcmVhdGVDb21wb25lbnQgfSBmcm9tICcuLi8uLi91dGlscy9wcml2YXRlL2NyZWF0ZS5qcydcbmltcG9ydCB1c2VDaGVja2JveCwgeyB1c2VDaGVja2JveFByb3BzLCB1c2VDaGVja2JveEVtaXRzIH0gZnJvbSAnLi91c2UtY2hlY2tib3guanMnXG5cbmNvbnN0IGJnTm9kZSA9IGgoJ2RpdicsIHtcbiAga2V5OiAnc3ZnJyxcbiAgY2xhc3M6ICdxLWNoZWNrYm94X19iZyBhYnNvbHV0ZSdcbn0sIFtcbiAgaCgnc3ZnJywge1xuICAgIGNsYXNzOiAncS1jaGVja2JveF9fc3ZnIGZpdCBhYnNvbHV0ZS1mdWxsJyxcbiAgICB2aWV3Qm94OiAnMCAwIDI0IDI0JyxcbiAgICAnYXJpYS1oaWRkZW4nOiAndHJ1ZSdcbiAgfSwgW1xuICAgIGgoJ3BhdGgnLCB7XG4gICAgICBjbGFzczogJ3EtY2hlY2tib3hfX3RydXRoeScsXG4gICAgICBmaWxsOiAnbm9uZScsXG4gICAgICBkOiAnTTEuNzMsMTIuOTEgOC4xLDE5LjI4IDIyLjc5LDQuNTknXG4gICAgfSksXG5cbiAgICBoKCdwYXRoJywge1xuICAgICAgY2xhc3M6ICdxLWNoZWNrYm94X19pbmRldCcsXG4gICAgICBkOiAnTTQsMTRIMjBWMTBINCdcbiAgICB9KVxuICBdKVxuXSlcblxuZXhwb3J0IGRlZmF1bHQgY3JlYXRlQ29tcG9uZW50KHtcbiAgbmFtZTogJ1FDaGVja2JveCcsXG5cbiAgcHJvcHM6IHVzZUNoZWNrYm94UHJvcHMsXG4gIGVtaXRzOiB1c2VDaGVja2JveEVtaXRzLFxuXG4gIHNldHVwIChwcm9wcykge1xuICAgIGZ1bmN0aW9uIGdldElubmVyIChpc1RydWUsIGlzSW5kZXRlcm1pbmF0ZSkge1xuICAgICAgY29uc3QgaWNvbiA9IGNvbXB1dGVkKCgpID0+XG4gICAgICAgIChpc1RydWUudmFsdWUgPT09IHRydWVcbiAgICAgICAgICA/IHByb3BzLmNoZWNrZWRJY29uXG4gICAgICAgICAgOiAoaXNJbmRldGVybWluYXRlLnZhbHVlID09PSB0cnVlXG4gICAgICAgICAgICAgID8gcHJvcHMuaW5kZXRlcm1pbmF0ZUljb25cbiAgICAgICAgICAgICAgOiBwcm9wcy51bmNoZWNrZWRJY29uXG4gICAgICAgICAgICApXG4gICAgICAgICkgfHwgbnVsbFxuICAgICAgKVxuXG4gICAgICByZXR1cm4gKCkgPT4gKFxuICAgICAgICBpY29uLnZhbHVlICE9PSBudWxsXG4gICAgICAgICAgPyBbXG4gICAgICAgICAgICAgIGgoJ2RpdicsIHtcbiAgICAgICAgICAgICAgICBrZXk6ICdpY29uJyxcbiAgICAgICAgICAgICAgICBjbGFzczogJ3EtY2hlY2tib3hfX2ljb24tY29udGFpbmVyIGFic29sdXRlLWZ1bGwgZmxleCBmbGV4LWNlbnRlciBuby13cmFwJ1xuICAgICAgICAgICAgICB9LCBbXG4gICAgICAgICAgICAgICAgaChRSWNvbiwge1xuICAgICAgICAgICAgICAgICAgY2xhc3M6ICdxLWNoZWNrYm94X19pY29uJyxcbiAgICAgICAgICAgICAgICAgIG5hbWU6IGljb24udmFsdWVcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICBdKVxuICAgICAgICAgICAgXVxuICAgICAgICAgIDogWyBiZ05vZGUgXVxuICAgICAgKVxuICAgIH1cblxuICAgIHJldHVybiB1c2VDaGVja2JveCgnY2hlY2tib3gnLCBnZXRJbm5lcilcbiAgfVxufSlcbiIsImltcG9ydCB7IGgsIGNvbXB1dGVkIH0gZnJvbSAndnVlJ1xuXG5pbXBvcnQgUUljb24gZnJvbSAnLi4vaWNvbi9RSWNvbi5qcydcblxuaW1wb3J0IHVzZUNoZWNrYm94LCB7IHVzZUNoZWNrYm94UHJvcHMsIHVzZUNoZWNrYm94RW1pdHMgfSBmcm9tICcuLi9jaGVja2JveC91c2UtY2hlY2tib3guanMnXG5cbmltcG9ydCB7IGNyZWF0ZUNvbXBvbmVudCB9IGZyb20gJy4uLy4uL3V0aWxzL3ByaXZhdGUvY3JlYXRlLmpzJ1xuXG5leHBvcnQgZGVmYXVsdCBjcmVhdGVDb21wb25lbnQoe1xuICBuYW1lOiAnUVRvZ2dsZScsXG5cbiAgcHJvcHM6IHtcbiAgICAuLi51c2VDaGVja2JveFByb3BzLFxuXG4gICAgaWNvbjogU3RyaW5nLFxuICAgIGljb25Db2xvcjogU3RyaW5nXG4gIH0sXG5cbiAgZW1pdHM6IHVzZUNoZWNrYm94RW1pdHMsXG5cbiAgc2V0dXAgKHByb3BzKSB7XG4gICAgZnVuY3Rpb24gZ2V0SW5uZXIgKGlzVHJ1ZSwgaXNJbmRldGVybWluYXRlKSB7XG4gICAgICBjb25zdCBpY29uID0gY29tcHV0ZWQoKCkgPT5cbiAgICAgICAgKGlzVHJ1ZS52YWx1ZSA9PT0gdHJ1ZVxuICAgICAgICAgID8gcHJvcHMuY2hlY2tlZEljb25cbiAgICAgICAgICA6IChpc0luZGV0ZXJtaW5hdGUudmFsdWUgPT09IHRydWUgPyBwcm9wcy5pbmRldGVybWluYXRlSWNvbiA6IHByb3BzLnVuY2hlY2tlZEljb24pXG4gICAgICAgICkgfHwgcHJvcHMuaWNvblxuICAgICAgKVxuXG4gICAgICBjb25zdCBjb2xvciA9IGNvbXB1dGVkKCgpID0+IChpc1RydWUudmFsdWUgPT09IHRydWUgPyBwcm9wcy5pY29uQ29sb3IgOiBudWxsKSlcblxuICAgICAgcmV0dXJuICgpID0+IFtcbiAgICAgICAgaCgnZGl2JywgeyBjbGFzczogJ3EtdG9nZ2xlX190cmFjaycgfSksXG5cbiAgICAgICAgaCgnZGl2Jywge1xuICAgICAgICAgIGNsYXNzOiAncS10b2dnbGVfX3RodW1iIGFic29sdXRlIGZsZXggZmxleC1jZW50ZXIgbm8td3JhcCdcbiAgICAgICAgfSwgaWNvbi52YWx1ZSAhPT0gdm9pZCAwXG4gICAgICAgICAgPyBbXG4gICAgICAgICAgICAgIGgoUUljb24sIHtcbiAgICAgICAgICAgICAgICBuYW1lOiBpY29uLnZhbHVlLFxuICAgICAgICAgICAgICAgIGNvbG9yOiBjb2xvci52YWx1ZVxuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgXVxuICAgICAgICAgIDogdm9pZCAwXG4gICAgICAgIClcbiAgICAgIF1cbiAgICB9XG5cbiAgICByZXR1cm4gdXNlQ2hlY2tib3goJ3RvZ2dsZScsIGdldElubmVyKVxuICB9XG59KVxuIiwiaW1wb3J0IHsgaCwgY29tcHV0ZWQsIGdldEN1cnJlbnRJbnN0YW5jZSB9IGZyb20gJ3Z1ZSdcblxuaW1wb3J0IFFSYWRpbyBmcm9tICcuLi9yYWRpby9RUmFkaW8uanMnXG5pbXBvcnQgUUNoZWNrYm94IGZyb20gJy4uL2NoZWNrYm94L1FDaGVja2JveC5qcydcbmltcG9ydCBRVG9nZ2xlIGZyb20gJy4uL3RvZ2dsZS9RVG9nZ2xlLmpzJ1xuXG5pbXBvcnQgeyBjcmVhdGVDb21wb25lbnQgfSBmcm9tICcuLi8uLi91dGlscy9wcml2YXRlL2NyZWF0ZS5qcydcblxuaW1wb3J0IHVzZURhcmssIHsgdXNlRGFya1Byb3BzIH0gZnJvbSAnLi4vLi4vY29tcG9zYWJsZXMvcHJpdmF0ZS91c2UtZGFyay5qcydcblxuY29uc3QgY29tcG9uZW50cyA9IHtcbiAgcmFkaW86IFFSYWRpbyxcbiAgY2hlY2tib3g6IFFDaGVja2JveCxcbiAgdG9nZ2xlOiBRVG9nZ2xlXG59XG5cbmNvbnN0IHR5cGVWYWx1ZXMgPSBPYmplY3Qua2V5cyhjb21wb25lbnRzKVxuXG5leHBvcnQgZGVmYXVsdCBjcmVhdGVDb21wb25lbnQoe1xuICBuYW1lOiAnUU9wdGlvbkdyb3VwJyxcblxuICBwcm9wczoge1xuICAgIC4uLnVzZURhcmtQcm9wcyxcblxuICAgIG1vZGVsVmFsdWU6IHtcbiAgICAgIHJlcXVpcmVkOiB0cnVlXG4gICAgfSxcbiAgICBvcHRpb25zOiB7XG4gICAgICB0eXBlOiBBcnJheSxcbiAgICAgIHZhbGlkYXRvcjogb3B0cyA9PiBvcHRzLmV2ZXJ5KG9wdCA9PiAndmFsdWUnIGluIG9wdCAmJiAnbGFiZWwnIGluIG9wdClcbiAgICB9LFxuXG4gICAgbmFtZTogU3RyaW5nLFxuXG4gICAgdHlwZToge1xuICAgICAgZGVmYXVsdDogJ3JhZGlvJyxcbiAgICAgIHZhbGlkYXRvcjogdiA9PiB0eXBlVmFsdWVzLmluY2x1ZGVzKHYpXG4gICAgfSxcblxuICAgIGNvbG9yOiBTdHJpbmcsXG4gICAga2VlcENvbG9yOiBCb29sZWFuLFxuICAgIGRlbnNlOiBCb29sZWFuLFxuXG4gICAgc2l6ZTogU3RyaW5nLFxuXG4gICAgbGVmdExhYmVsOiBCb29sZWFuLFxuICAgIGlubGluZTogQm9vbGVhbixcbiAgICBkaXNhYmxlOiBCb29sZWFuXG4gIH0sXG5cbiAgZW1pdHM6IFsgJ3VwZGF0ZTptb2RlbFZhbHVlJyBdLFxuXG4gIHNldHVwIChwcm9wcywgeyBlbWl0LCBzbG90cyB9KSB7XG4gICAgY29uc3QgeyBwcm94eTogeyAkcSB9IH0gPSBnZXRDdXJyZW50SW5zdGFuY2UoKVxuXG4gICAgY29uc3QgYXJyYXlNb2RlbCA9IEFycmF5LmlzQXJyYXkocHJvcHMubW9kZWxWYWx1ZSlcblxuICAgIGlmIChwcm9wcy50eXBlID09PSAncmFkaW8nKSB7XG4gICAgICBpZiAoYXJyYXlNb2RlbCA9PT0gdHJ1ZSkge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdxLW9wdGlvbi1ncm91cDogbW9kZWwgc2hvdWxkIG5vdCBiZSBhcnJheScpXG4gICAgICB9XG4gICAgfVxuICAgIGVsc2UgaWYgKGFycmF5TW9kZWwgPT09IGZhbHNlKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdxLW9wdGlvbi1ncm91cDogbW9kZWwgc2hvdWxkIGJlIGFycmF5IGluIHlvdXIgY2FzZScpXG4gICAgfVxuXG4gICAgY29uc3QgaXNEYXJrID0gdXNlRGFyayhwcm9wcywgJHEpXG5cbiAgICBjb25zdCBjb21wb25lbnQgPSBjb21wdXRlZCgoKSA9PiBjb21wb25lbnRzWyBwcm9wcy50eXBlIF0pXG5cbiAgICBjb25zdCBjbGFzc2VzID0gY29tcHV0ZWQoKCkgPT5cbiAgICAgICdxLW9wdGlvbi1ncm91cCBxLWd1dHRlci14LXNtJ1xuICAgICAgKyAocHJvcHMuaW5saW5lID09PSB0cnVlID8gJyBxLW9wdGlvbi1ncm91cC0taW5saW5lJyA6ICcnKVxuICAgIClcblxuICAgIGNvbnN0IGF0dHJzID0gY29tcHV0ZWQoKCkgPT4ge1xuICAgICAgY29uc3QgYXR0cnMgPSB7fVxuXG4gICAgICBpZiAocHJvcHMudHlwZSA9PT0gJ3JhZGlvJykge1xuICAgICAgICBhdHRycy5yb2xlID0gJ3JhZGlvZ3JvdXAnXG5cbiAgICAgICAgaWYgKHByb3BzLmRpc2FibGUgPT09IHRydWUpIHtcbiAgICAgICAgICBhdHRyc1sgJ2FyaWEtZGlzYWJsZWQnIF0gPSAndHJ1ZSdcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gYXR0cnNcbiAgICB9KVxuXG4gICAgZnVuY3Rpb24gb25VcGRhdGVNb2RlbFZhbHVlICh2YWx1ZSkge1xuICAgICAgZW1pdCgndXBkYXRlOm1vZGVsVmFsdWUnLCB2YWx1ZSlcbiAgICB9XG5cbiAgICByZXR1cm4gKCkgPT4gaCgnZGl2Jywge1xuICAgICAgY2xhc3M6IGNsYXNzZXMudmFsdWUsXG4gICAgICAuLi5hdHRycy52YWx1ZVxuICAgIH0sIHByb3BzLm9wdGlvbnMubWFwKChvcHQsIGkpID0+IHtcbiAgICAgIC8vIFRPRE86IChRdjMpIE1ha2UgdGhlICdvcHQnIGEgc2VwYXJhdGUgcHJvcGVydHkgaW5zdGVhZCBvZlxuICAgICAgLy8gdGhlIHdob2xlIHNjb3BlIGZvciBjb25zaXN0ZW5jeSBhbmQgZmxleGliaWxpdHlcbiAgICAgIC8vIChlLmcuIHsgb3B0IH0gaW5zdGVhZCBvZiBvcHQpXG4gICAgICBjb25zdCBjaGlsZCA9IHNsb3RzWyAnbGFiZWwtJyArIGkgXSAhPT0gdm9pZCAwXG4gICAgICAgID8gKCkgPT4gc2xvdHNbICdsYWJlbC0nICsgaSBdKG9wdClcbiAgICAgICAgOiAoXG4gICAgICAgICAgICBzbG90cy5sYWJlbCAhPT0gdm9pZCAwXG4gICAgICAgICAgICAgID8gKCkgPT4gc2xvdHMubGFiZWwob3B0KVxuICAgICAgICAgICAgICA6IHZvaWQgMFxuICAgICAgICAgIClcblxuICAgICAgcmV0dXJuIGgoJ2RpdicsIFtcbiAgICAgICAgaChjb21wb25lbnQudmFsdWUsIHtcbiAgICAgICAgICBtb2RlbFZhbHVlOiBwcm9wcy5tb2RlbFZhbHVlLFxuICAgICAgICAgIHZhbDogb3B0LnZhbHVlLFxuICAgICAgICAgIG5hbWU6IG9wdC5uYW1lID09PSB2b2lkIDAgPyBwcm9wcy5uYW1lIDogb3B0Lm5hbWUsXG4gICAgICAgICAgZGlzYWJsZTogcHJvcHMuZGlzYWJsZSB8fCBvcHQuZGlzYWJsZSxcbiAgICAgICAgICBsYWJlbDogY2hpbGQgPT09IHZvaWQgMCA/IG9wdC5sYWJlbCA6IG51bGwsXG4gICAgICAgICAgbGVmdExhYmVsOiBvcHQubGVmdExhYmVsID09PSB2b2lkIDAgPyBwcm9wcy5sZWZ0TGFiZWwgOiBvcHQubGVmdExhYmVsLFxuICAgICAgICAgIGNvbG9yOiBvcHQuY29sb3IgPT09IHZvaWQgMCA/IHByb3BzLmNvbG9yIDogb3B0LmNvbG9yLFxuICAgICAgICAgIGNoZWNrZWRJY29uOiBvcHQuY2hlY2tlZEljb24sXG4gICAgICAgICAgdW5jaGVja2VkSWNvbjogb3B0LnVuY2hlY2tlZEljb24sXG4gICAgICAgICAgZGFyazogb3B0LmRhcmsgfHwgaXNEYXJrLnZhbHVlLFxuICAgICAgICAgIHNpemU6IG9wdC5zaXplID09PSB2b2lkIDAgPyBwcm9wcy5zaXplIDogb3B0LnNpemUsXG4gICAgICAgICAgZGVuc2U6IHByb3BzLmRlbnNlLFxuICAgICAgICAgIGtlZXBDb2xvcjogb3B0LmtlZXBDb2xvciA9PT0gdm9pZCAwID8gcHJvcHMua2VlcENvbG9yIDogb3B0LmtlZXBDb2xvcixcbiAgICAgICAgICAnb25VcGRhdGU6bW9kZWxWYWx1ZSc6IG9uVXBkYXRlTW9kZWxWYWx1ZVxuICAgICAgICB9LCBjaGlsZClcbiAgICAgIF0pXG4gICAgfSkpXG4gIH1cbn0pXG4iLCJpbXBvcnQgeyBoLCByZWYsIGNvbXB1dGVkLCB3YXRjaCwgdG9SYXcsIGdldEN1cnJlbnRJbnN0YW5jZSB9IGZyb20gJ3Z1ZSdcblxuaW1wb3J0IFFEaWFsb2cgZnJvbSAnLi4vZGlhbG9nL1FEaWFsb2cuanMnXG5pbXBvcnQgUUJ0biBmcm9tICcuLi9idG4vUUJ0bi5qcydcblxuaW1wb3J0IFFDYXJkIGZyb20gJy4uL2NhcmQvUUNhcmQuanMnXG5pbXBvcnQgUUNhcmRTZWN0aW9uIGZyb20gJy4uL2NhcmQvUUNhcmRTZWN0aW9uLmpzJ1xuaW1wb3J0IFFDYXJkQWN0aW9ucyBmcm9tICcuLi9jYXJkL1FDYXJkQWN0aW9ucy5qcydcbmltcG9ydCBRU2VwYXJhdG9yIGZyb20gJy4uL3NlcGFyYXRvci9RU2VwYXJhdG9yLmpzJ1xuXG5pbXBvcnQgUUlucHV0IGZyb20gJy4uL2lucHV0L1FJbnB1dC5qcydcbmltcG9ydCBRT3B0aW9uR3JvdXAgZnJvbSAnLi4vb3B0aW9uLWdyb3VwL1FPcHRpb25Hcm91cC5qcydcblxuaW1wb3J0IFFTcGlubmVyIGZyb20gJy4uL3NwaW5uZXIvUVNwaW5uZXIuanMnXG5cbmltcG9ydCB7IGNyZWF0ZUNvbXBvbmVudCB9IGZyb20gJy4uLy4uL3V0aWxzL3ByaXZhdGUvY3JlYXRlLmpzJ1xuaW1wb3J0IHVzZURhcmssIHsgdXNlRGFya1Byb3BzIH0gZnJvbSAnLi4vLi4vY29tcG9zYWJsZXMvcHJpdmF0ZS91c2UtZGFyay5qcydcblxuaW1wb3J0IHsgaXNLZXlDb2RlIH0gZnJvbSAnLi4vLi4vdXRpbHMvcHJpdmF0ZS9rZXktY29tcG9zaXRpb24uanMnXG5pbXBvcnQgeyBpc09iamVjdCB9IGZyb20gJy4uLy4uL3V0aWxzL3ByaXZhdGUvaXMuanMnXG5cbmV4cG9ydCBkZWZhdWx0IGNyZWF0ZUNvbXBvbmVudCh7XG4gIG5hbWU6ICdEaWFsb2dQbHVnaW4nLFxuXG4gIHByb3BzOiB7XG4gICAgLi4udXNlRGFya1Byb3BzLFxuXG4gICAgdGl0bGU6IFN0cmluZyxcbiAgICBtZXNzYWdlOiBTdHJpbmcsXG4gICAgcHJvbXB0OiBPYmplY3QsXG4gICAgb3B0aW9uczogT2JqZWN0LFxuICAgIHByb2dyZXNzOiBbIEJvb2xlYW4sIE9iamVjdCBdLFxuXG4gICAgaHRtbDogQm9vbGVhbixcblxuICAgIG9rOiB7XG4gICAgICB0eXBlOiBbIFN0cmluZywgT2JqZWN0LCBCb29sZWFuIF0sXG4gICAgICBkZWZhdWx0OiB0cnVlXG4gICAgfSxcbiAgICBjYW5jZWw6IFsgU3RyaW5nLCBPYmplY3QsIEJvb2xlYW4gXSxcbiAgICBmb2N1czoge1xuICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgZGVmYXVsdDogJ29rJyxcbiAgICAgIHZhbGlkYXRvcjogdiA9PiBbICdvaycsICdjYW5jZWwnLCAnbm9uZScgXS5pbmNsdWRlcyh2KVxuICAgIH0sXG5cbiAgICBzdGFja0J1dHRvbnM6IEJvb2xlYW4sXG4gICAgY29sb3I6IFN0cmluZyxcblxuICAgIGNhcmRDbGFzczogWyBTdHJpbmcsIEFycmF5LCBPYmplY3QgXSxcbiAgICBjYXJkU3R5bGU6IFsgU3RyaW5nLCBBcnJheSwgT2JqZWN0IF1cbiAgfSxcblxuICBlbWl0czogWyAnb2snLCAnaGlkZScgXSxcblxuICBzZXR1cCAocHJvcHMsIHsgZW1pdCB9KSB7XG4gICAgY29uc3QgeyBwcm94eSB9ID0gZ2V0Q3VycmVudEluc3RhbmNlKClcbiAgICBjb25zdCB7ICRxIH0gPSBwcm94eVxuXG4gICAgY29uc3QgaXNEYXJrID0gdXNlRGFyayhwcm9wcywgJHEpXG5cbiAgICBjb25zdCBkaWFsb2dSZWYgPSByZWYobnVsbClcblxuICAgIGNvbnN0IG1vZGVsID0gcmVmKFxuICAgICAgcHJvcHMucHJvbXB0ICE9PSB2b2lkIDBcbiAgICAgICAgPyBwcm9wcy5wcm9tcHQubW9kZWxcbiAgICAgICAgOiAocHJvcHMub3B0aW9ucyAhPT0gdm9pZCAwID8gcHJvcHMub3B0aW9ucy5tb2RlbCA6IHZvaWQgMClcbiAgICApXG5cbiAgICBjb25zdCBjbGFzc2VzID0gY29tcHV0ZWQoKCkgPT5cbiAgICAgICdxLWRpYWxvZy1wbHVnaW4nXG4gICAgICArIChpc0RhcmsudmFsdWUgPT09IHRydWUgPyAnIHEtZGlhbG9nLXBsdWdpbi0tZGFyayBxLWRhcmsnIDogJycpXG4gICAgICArIChwcm9wcy5wcm9ncmVzcyAhPT0gZmFsc2UgPyAnIHEtZGlhbG9nLXBsdWdpbi0tcHJvZ3Jlc3MnIDogJycpXG4gICAgKVxuXG4gICAgY29uc3Qgdm1Db2xvciA9IGNvbXB1dGVkKCgpID0+XG4gICAgICBwcm9wcy5jb2xvciB8fCAoaXNEYXJrLnZhbHVlID09PSB0cnVlID8gJ2FtYmVyJyA6ICdwcmltYXJ5JylcbiAgICApXG5cbiAgICBjb25zdCBzcGlubmVyID0gY29tcHV0ZWQoKCkgPT4gKFxuICAgICAgcHJvcHMucHJvZ3Jlc3MgPT09IGZhbHNlXG4gICAgICAgID8gbnVsbFxuICAgICAgICA6IChcbiAgICAgICAgICAgIGlzT2JqZWN0KHByb3BzLnByb2dyZXNzKSA9PT0gdHJ1ZVxuICAgICAgICAgICAgICA/IHtcbiAgICAgICAgICAgICAgICAgIGNvbXBvbmVudDogcHJvcHMucHJvZ3Jlc3Muc3Bpbm5lciB8fCBRU3Bpbm5lcixcbiAgICAgICAgICAgICAgICAgIHByb3BzOiB7IGNvbG9yOiBwcm9wcy5wcm9ncmVzcy5jb2xvciB8fCB2bUNvbG9yLnZhbHVlIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIDoge1xuICAgICAgICAgICAgICAgICAgY29tcG9uZW50OiBRU3Bpbm5lcixcbiAgICAgICAgICAgICAgICAgIHByb3BzOiB7IGNvbG9yOiB2bUNvbG9yLnZhbHVlIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgKVxuICAgICkpXG5cbiAgICBjb25zdCBoYXNGb3JtID0gY29tcHV0ZWQoKCkgPT5cbiAgICAgIHByb3BzLnByb21wdCAhPT0gdm9pZCAwIHx8IHByb3BzLm9wdGlvbnMgIT09IHZvaWQgMFxuICAgIClcblxuICAgIGNvbnN0IGZvcm1Qcm9wcyA9IGNvbXB1dGVkKCgpID0+IHtcbiAgICAgIGlmIChoYXNGb3JtLnZhbHVlICE9PSB0cnVlKSB7XG4gICAgICAgIHJldHVybiB7fVxuICAgICAgfVxuXG4gICAgICBjb25zdCB7IG1vZGVsLCBpc1ZhbGlkLCBpdGVtcywgLi4uZm9ybVByb3BzIH0gPSBwcm9wcy5wcm9tcHQgIT09IHZvaWQgMFxuICAgICAgICA/IHByb3BzLnByb21wdFxuICAgICAgICA6IHByb3BzLm9wdGlvbnNcblxuICAgICAgcmV0dXJuIGZvcm1Qcm9wc1xuICAgIH0pXG5cbiAgICBjb25zdCBva0xhYmVsID0gY29tcHV0ZWQoKCkgPT4gKFxuICAgICAgaXNPYmplY3QocHJvcHMub2spID09PSB0cnVlXG4gICAgICAgID8gJHEubGFuZy5sYWJlbC5va1xuICAgICAgICA6IChcbiAgICAgICAgICAgIHByb3BzLm9rID09PSB0cnVlXG4gICAgICAgICAgICAgID8gJHEubGFuZy5sYWJlbC5va1xuICAgICAgICAgICAgICA6IHByb3BzLm9rXG4gICAgICAgICAgKVxuICAgICkpXG5cbiAgICBjb25zdCBjYW5jZWxMYWJlbCA9IGNvbXB1dGVkKCgpID0+IChcbiAgICAgIGlzT2JqZWN0KHByb3BzLmNhbmNlbCkgPT09IHRydWVcbiAgICAgICAgPyAkcS5sYW5nLmxhYmVsLmNhbmNlbFxuICAgICAgICA6IChcbiAgICAgICAgICAgIHByb3BzLmNhbmNlbCA9PT0gdHJ1ZVxuICAgICAgICAgICAgICA/ICRxLmxhbmcubGFiZWwuY2FuY2VsXG4gICAgICAgICAgICAgIDogcHJvcHMuY2FuY2VsXG4gICAgICAgICAgKVxuICAgICkpXG5cbiAgICBjb25zdCBva0Rpc2FibGVkID0gY29tcHV0ZWQoKCkgPT4ge1xuICAgICAgaWYgKHByb3BzLnByb21wdCAhPT0gdm9pZCAwKSB7XG4gICAgICAgIHJldHVybiBwcm9wcy5wcm9tcHQuaXNWYWxpZCAhPT0gdm9pZCAwXG4gICAgICAgICAgJiYgcHJvcHMucHJvbXB0LmlzVmFsaWQobW9kZWwudmFsdWUpICE9PSB0cnVlXG4gICAgICB9XG4gICAgICBpZiAocHJvcHMub3B0aW9ucyAhPT0gdm9pZCAwKSB7XG4gICAgICAgIHJldHVybiBwcm9wcy5vcHRpb25zLmlzVmFsaWQgIT09IHZvaWQgMFxuICAgICAgICAgICYmIHByb3BzLm9wdGlvbnMuaXNWYWxpZChtb2RlbC52YWx1ZSkgIT09IHRydWVcbiAgICAgIH1cbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH0pXG5cbiAgICBjb25zdCBva1Byb3BzID0gY29tcHV0ZWQoKCkgPT4gKHtcbiAgICAgIGNvbG9yOiB2bUNvbG9yLnZhbHVlLFxuICAgICAgbGFiZWw6IG9rTGFiZWwudmFsdWUsXG4gICAgICByaXBwbGU6IGZhbHNlLFxuICAgICAgZGlzYWJsZTogb2tEaXNhYmxlZC52YWx1ZSxcbiAgICAgIC4uLihpc09iamVjdChwcm9wcy5vaykgPT09IHRydWUgPyBwcm9wcy5vayA6IHsgZmxhdDogdHJ1ZSB9KSxcbiAgICAgICdkYXRhLWF1dG9mb2N1cyc6IChwcm9wcy5mb2N1cyA9PT0gJ29rJyAmJiBoYXNGb3JtLnZhbHVlICE9PSB0cnVlKSB8fCB2b2lkIDAsXG4gICAgICBvbkNsaWNrOiBvbk9rXG4gICAgfSkpXG5cbiAgICBjb25zdCBjYW5jZWxQcm9wcyA9IGNvbXB1dGVkKCgpID0+ICh7XG4gICAgICBjb2xvcjogdm1Db2xvci52YWx1ZSxcbiAgICAgIGxhYmVsOiBjYW5jZWxMYWJlbC52YWx1ZSxcbiAgICAgIHJpcHBsZTogZmFsc2UsXG4gICAgICAuLi4oaXNPYmplY3QocHJvcHMuY2FuY2VsKSA9PT0gdHJ1ZSA/IHByb3BzLmNhbmNlbCA6IHsgZmxhdDogdHJ1ZSB9KSxcbiAgICAgICdkYXRhLWF1dG9mb2N1cyc6IChwcm9wcy5mb2N1cyA9PT0gJ2NhbmNlbCcgJiYgaGFzRm9ybS52YWx1ZSAhPT0gdHJ1ZSkgfHwgdm9pZCAwLFxuICAgICAgb25DbGljazogb25DYW5jZWxcbiAgICB9KSlcblxuICAgIHdhdGNoKCgpID0+IHByb3BzLnByb21wdCAmJiBwcm9wcy5wcm9tcHQubW9kZWwsIG9uVXBkYXRlTW9kZWwpXG4gICAgd2F0Y2goKCkgPT4gcHJvcHMub3B0aW9ucyAmJiBwcm9wcy5vcHRpb25zLm1vZGVsLCBvblVwZGF0ZU1vZGVsKVxuXG4gICAgZnVuY3Rpb24gc2hvdyAoKSB7XG4gICAgICBkaWFsb2dSZWYudmFsdWUuc2hvdygpXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaGlkZSAoKSB7XG4gICAgICBkaWFsb2dSZWYudmFsdWUuaGlkZSgpXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gb25PayAoKSB7XG4gICAgICBlbWl0KCdvaycsIHRvUmF3KG1vZGVsLnZhbHVlKSlcbiAgICAgIGhpZGUoKVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIG9uQ2FuY2VsICgpIHtcbiAgICAgIGhpZGUoKVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIG9uRGlhbG9nSGlkZSAoKSB7XG4gICAgICBlbWl0KCdoaWRlJylcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBvblVwZGF0ZU1vZGVsICh2YWwpIHtcbiAgICAgIG1vZGVsLnZhbHVlID0gdmFsXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gb25JbnB1dEtleXVwIChldnQpIHtcbiAgICAgIC8vIGlmIEVOVEVSIGtleVxuICAgICAgaWYgKFxuICAgICAgICBva0Rpc2FibGVkLnZhbHVlICE9PSB0cnVlXG4gICAgICAgICYmIHByb3BzLnByb21wdC50eXBlICE9PSAndGV4dGFyZWEnXG4gICAgICAgICYmIGlzS2V5Q29kZShldnQsIDEzKSA9PT0gdHJ1ZVxuICAgICAgKSB7XG4gICAgICAgIG9uT2soKVxuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldFNlY3Rpb24gKGNsYXNzZXMsIHRleHQpIHtcbiAgICAgIHJldHVybiBwcm9wcy5odG1sID09PSB0cnVlXG4gICAgICAgID8gaChRQ2FyZFNlY3Rpb24sIHtcbiAgICAgICAgICBjbGFzczogY2xhc3NlcyxcbiAgICAgICAgICBpbm5lckhUTUw6IHRleHRcbiAgICAgICAgfSlcbiAgICAgICAgOiBoKFFDYXJkU2VjdGlvbiwgeyBjbGFzczogY2xhc3NlcyB9LCAoKSA9PiB0ZXh0KVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldFByb21wdCAoKSB7XG4gICAgICByZXR1cm4gW1xuICAgICAgICBoKFFJbnB1dCwge1xuICAgICAgICAgIG1vZGVsVmFsdWU6IG1vZGVsLnZhbHVlLFxuICAgICAgICAgIC4uLmZvcm1Qcm9wcy52YWx1ZSxcbiAgICAgICAgICBjb2xvcjogdm1Db2xvci52YWx1ZSxcbiAgICAgICAgICBkZW5zZTogdHJ1ZSxcbiAgICAgICAgICBhdXRvZm9jdXM6IHRydWUsXG4gICAgICAgICAgZGFyazogaXNEYXJrLnZhbHVlLFxuICAgICAgICAgICdvblVwZGF0ZTptb2RlbFZhbHVlJzogb25VcGRhdGVNb2RlbCxcbiAgICAgICAgICBvbktleXVwOiBvbklucHV0S2V5dXBcbiAgICAgICAgfSlcbiAgICAgIF1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXRPcHRpb25zICgpIHtcbiAgICAgIHJldHVybiBbXG4gICAgICAgIGgoUU9wdGlvbkdyb3VwLCB7XG4gICAgICAgICAgbW9kZWxWYWx1ZTogbW9kZWwudmFsdWUsXG4gICAgICAgICAgLi4uZm9ybVByb3BzLnZhbHVlLFxuICAgICAgICAgIGNvbG9yOiB2bUNvbG9yLnZhbHVlLFxuICAgICAgICAgIG9wdGlvbnM6IHByb3BzLm9wdGlvbnMuaXRlbXMsXG4gICAgICAgICAgZGFyazogaXNEYXJrLnZhbHVlLFxuICAgICAgICAgICdvblVwZGF0ZTptb2RlbFZhbHVlJzogb25VcGRhdGVNb2RlbFxuICAgICAgICB9KVxuICAgICAgXVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldEJ1dHRvbnMgKCkge1xuICAgICAgY29uc3QgY2hpbGQgPSBbXVxuXG4gICAgICBwcm9wcy5jYW5jZWwgJiYgY2hpbGQucHVzaChcbiAgICAgICAgaChRQnRuLCBjYW5jZWxQcm9wcy52YWx1ZSlcbiAgICAgIClcblxuICAgICAgcHJvcHMub2sgJiYgY2hpbGQucHVzaChcbiAgICAgICAgaChRQnRuLCBva1Byb3BzLnZhbHVlKVxuICAgICAgKVxuXG4gICAgICByZXR1cm4gaChRQ2FyZEFjdGlvbnMsIHtcbiAgICAgICAgY2xhc3M6IHByb3BzLnN0YWNrQnV0dG9ucyA9PT0gdHJ1ZSA/ICdpdGVtcy1lbmQnIDogJycsXG4gICAgICAgIHZlcnRpY2FsOiBwcm9wcy5zdGFja0J1dHRvbnMsXG4gICAgICAgIGFsaWduOiAncmlnaHQnXG4gICAgICB9LCAoKSA9PiBjaGlsZClcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXRDYXJkQ29udGVudCAoKSB7XG4gICAgICBjb25zdCBjaGlsZCA9IFtdXG5cbiAgICAgIHByb3BzLnRpdGxlICYmIGNoaWxkLnB1c2goXG4gICAgICAgIGdldFNlY3Rpb24oJ3EtZGlhbG9nX190aXRsZScsIHByb3BzLnRpdGxlKVxuICAgICAgKVxuXG4gICAgICBwcm9wcy5wcm9ncmVzcyAhPT0gZmFsc2UgJiYgY2hpbGQucHVzaChcbiAgICAgICAgaChcbiAgICAgICAgICBRQ2FyZFNlY3Rpb24sXG4gICAgICAgICAgeyBjbGFzczogJ3EtZGlhbG9nX19wcm9ncmVzcycgfSxcbiAgICAgICAgICAoKSA9PiBoKHNwaW5uZXIudmFsdWUuY29tcG9uZW50LCBzcGlubmVyLnZhbHVlLnByb3BzKVxuICAgICAgICApXG4gICAgICApXG5cbiAgICAgIHByb3BzLm1lc3NhZ2UgJiYgY2hpbGQucHVzaChcbiAgICAgICAgZ2V0U2VjdGlvbigncS1kaWFsb2dfX21lc3NhZ2UnLCBwcm9wcy5tZXNzYWdlKVxuICAgICAgKVxuXG4gICAgICBpZiAocHJvcHMucHJvbXB0ICE9PSB2b2lkIDApIHtcbiAgICAgICAgY2hpbGQucHVzaChcbiAgICAgICAgICBoKFxuICAgICAgICAgICAgUUNhcmRTZWN0aW9uLFxuICAgICAgICAgICAgeyBjbGFzczogJ3Njcm9sbCBxLWRpYWxvZy1wbHVnaW5fX2Zvcm0nIH0sXG4gICAgICAgICAgICBnZXRQcm9tcHRcbiAgICAgICAgICApXG4gICAgICAgIClcbiAgICAgIH1cbiAgICAgIGVsc2UgaWYgKHByb3BzLm9wdGlvbnMgIT09IHZvaWQgMCkge1xuICAgICAgICBjaGlsZC5wdXNoKFxuICAgICAgICAgIGgoUVNlcGFyYXRvciwgeyBkYXJrOiBpc0RhcmsudmFsdWUgfSksXG4gICAgICAgICAgaChcbiAgICAgICAgICAgIFFDYXJkU2VjdGlvbixcbiAgICAgICAgICAgIHsgY2xhc3M6ICdzY3JvbGwgcS1kaWFsb2ctcGx1Z2luX19mb3JtJyB9LFxuICAgICAgICAgICAgZ2V0T3B0aW9uc1xuICAgICAgICAgICksXG4gICAgICAgICAgaChRU2VwYXJhdG9yLCB7IGRhcms6IGlzRGFyay52YWx1ZSB9KVxuICAgICAgICApXG4gICAgICB9XG5cbiAgICAgIGlmIChwcm9wcy5vayB8fCBwcm9wcy5jYW5jZWwpIHtcbiAgICAgICAgY2hpbGQucHVzaChnZXRCdXR0b25zKCkpXG4gICAgICB9XG5cbiAgICAgIHJldHVybiBjaGlsZFxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldENvbnRlbnQgKCkge1xuICAgICAgcmV0dXJuIFtcbiAgICAgICAgaChRQ2FyZCwge1xuICAgICAgICAgIGNsYXNzOiBbXG4gICAgICAgICAgICBjbGFzc2VzLnZhbHVlLFxuICAgICAgICAgICAgcHJvcHMuY2FyZENsYXNzXG4gICAgICAgICAgXSxcbiAgICAgICAgICBzdHlsZTogcHJvcHMuY2FyZFN0eWxlLFxuICAgICAgICAgIGRhcms6IGlzRGFyay52YWx1ZVxuICAgICAgICB9LCBnZXRDYXJkQ29udGVudClcbiAgICAgIF1cbiAgICB9XG5cbiAgICAvLyBleHBvc2UgcHVibGljIG1ldGhvZHNcbiAgICBPYmplY3QuYXNzaWduKHByb3h5LCB7IHNob3csIGhpZGUgfSlcblxuICAgIHJldHVybiAoKSA9PiBoKFFEaWFsb2csIHtcbiAgICAgIHJlZjogZGlhbG9nUmVmLFxuICAgICAgb25IaWRlOiBvbkRpYWxvZ0hpZGVcbiAgICB9LCBnZXRDb250ZW50KVxuICB9XG59KVxuIiwiaW1wb3J0IHsgaCwgcmVmLCBuZXh0VGljayB9IGZyb20gJ3Z1ZSdcblxuaW1wb3J0IHsgY3JlYXRlQ2hpbGRBcHAgfSBmcm9tICcuLi8uLi9pbnN0YWxsLXF1YXNhci5qcydcbmltcG9ydCB7IGNyZWF0ZUdsb2JhbE5vZGUsIHJlbW92ZUdsb2JhbE5vZGUgfSBmcm9tICcuL2dsb2JhbC1ub2Rlcy5qcydcblxuY29uc3Qgc3NyQVBJID0ge1xuICBvbk9rOiAoKSA9PiBzc3JBUEksXG4gIG9uQ2FuY2VsOiAoKSA9PiBzc3JBUEksXG4gIG9uRGlzbWlzczogKCkgPT4gc3NyQVBJLFxuICBoaWRlOiAoKSA9PiBzc3JBUEksXG4gIHVwZGF0ZTogKCkgPT4gc3NyQVBJXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBtZXJnZSAodGFyZ2V0LCBzb3VyY2UpIHtcbiAgZm9yIChjb25zdCBrZXkgaW4gc291cmNlKSB7XG4gICAgaWYgKGtleSAhPT0gJ3NwaW5uZXInICYmIE9iamVjdChzb3VyY2VbIGtleSBdKSA9PT0gc291cmNlWyBrZXkgXSkge1xuICAgICAgdGFyZ2V0WyBrZXkgXSA9IE9iamVjdCh0YXJnZXRbIGtleSBdKSAhPT0gdGFyZ2V0WyBrZXkgXVxuICAgICAgICA/IHt9XG4gICAgICAgIDogeyAuLi50YXJnZXRbIGtleSBdIH1cblxuICAgICAgbWVyZ2UodGFyZ2V0WyBrZXkgXSwgc291cmNlWyBrZXkgXSlcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICB0YXJnZXRbIGtleSBdID0gc291cmNlWyBrZXkgXVxuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiAoRGVmYXVsdENvbXBvbmVudCwgc3VwcG9ydHNDdXN0b21Db21wb25lbnQsIHBhcmVudEFwcCkge1xuICByZXR1cm4gcGx1Z2luUHJvcHMgPT4ge1xuICAgIGlmIChfX1FVQVNBUl9TU1JfU0VSVkVSX18pIHsgcmV0dXJuIHNzckFQSSB9XG5cbiAgICBsZXQgRGlhbG9nQ29tcG9uZW50LCBwcm9wc1xuICAgIGNvbnN0IGlzQ3VzdG9tID0gc3VwcG9ydHNDdXN0b21Db21wb25lbnQgPT09IHRydWVcbiAgICAgICYmIHBsdWdpblByb3BzLmNvbXBvbmVudCAhPT0gdm9pZCAwXG5cbiAgICBpZiAoaXNDdXN0b20gPT09IHRydWUpIHtcbiAgICAgIGNvbnN0IHsgY29tcG9uZW50LCBjb21wb25lbnRQcm9wcyB9ID0gcGx1Z2luUHJvcHNcblxuICAgICAgRGlhbG9nQ29tcG9uZW50ID0gKHR5cGVvZiBjb21wb25lbnQgPT09ICdzdHJpbmcnKVxuICAgICAgICA/IHBhcmVudEFwcC5jb21wb25lbnQoY29tcG9uZW50KVxuICAgICAgICA6IGNvbXBvbmVudFxuXG4gICAgICBwcm9wcyA9IGNvbXBvbmVudFByb3BzXG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgY29uc3QgeyBjbGFzczoga2xhc3MsIHN0eWxlLCAuLi5vdGhlclByb3BzIH0gPSBwbHVnaW5Qcm9wc1xuXG4gICAgICBEaWFsb2dDb21wb25lbnQgPSBEZWZhdWx0Q29tcG9uZW50XG4gICAgICBwcm9wcyA9IG90aGVyUHJvcHNcbiAgICAgIGtsYXNzICE9PSB2b2lkIDAgJiYgKG90aGVyUHJvcHMuY2FyZENsYXNzID0ga2xhc3MpXG4gICAgICBzdHlsZSAhPT0gdm9pZCAwICYmIChvdGhlclByb3BzLmNhcmRTdHlsZSA9IHN0eWxlKVxuICAgIH1cblxuICAgIGxldCB2bSwgZW1pdHRlZE9LID0gZmFsc2VcbiAgICBjb25zdCBkaWFsb2dSZWYgPSByZWYobnVsbClcbiAgICBjb25zdCBlbCA9IGNyZWF0ZUdsb2JhbE5vZGUoKVxuXG4gICAgY29uc3QgYXBwbHlTdGF0ZSA9IGNtZCA9PiB7XG4gICAgICBpZiAoZGlhbG9nUmVmLnZhbHVlICE9PSBudWxsICYmIGRpYWxvZ1JlZi52YWx1ZVsgY21kIF0gIT09IHZvaWQgMCkge1xuICAgICAgICBkaWFsb2dSZWYudmFsdWVbIGNtZCBdKClcbiAgICAgIH1cbiAgICAgIGVsc2UgaWYgKFxuICAgICAgICAvLyBhY2NvdW50IGZvciBcInNjcmlwdCBzZXR1cFwiIHdheSBvZiBkZWNsYXJpbmcgY29tcG9uZW50XG4gICAgICAgIHZtLiQuc3ViVHJlZVxuICAgICAgICAmJiB2bS4kLnN1YlRyZWUuY29tcG9uZW50XG4gICAgICAgICYmIHZtLiQuc3ViVHJlZS5jb21wb25lbnQucHJveHlcbiAgICAgICAgJiYgdm0uJC5zdWJUcmVlLmNvbXBvbmVudC5wcm94eVsgY21kIF1cbiAgICAgICkge1xuICAgICAgICB2bS4kLnN1YlRyZWUuY29tcG9uZW50LnByb3h5WyBjbWQgXSgpXG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignW1F1YXNhcl0gSW5jb3JyZWN0bHkgZGVmaW5lZCBEaWFsb2cgY29tcG9uZW50JylcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdFxuICAgICAgb2tGbnMgPSBbXSxcbiAgICAgIGNhbmNlbEZucyA9IFtdLFxuICAgICAgQVBJID0ge1xuICAgICAgICBvbk9rIChmbikge1xuICAgICAgICAgIG9rRm5zLnB1c2goZm4pXG4gICAgICAgICAgcmV0dXJuIEFQSVxuICAgICAgICB9LFxuICAgICAgICBvbkNhbmNlbCAoZm4pIHtcbiAgICAgICAgICBjYW5jZWxGbnMucHVzaChmbilcbiAgICAgICAgICByZXR1cm4gQVBJXG4gICAgICAgIH0sXG4gICAgICAgIG9uRGlzbWlzcyAoZm4pIHtcbiAgICAgICAgICBva0Zucy5wdXNoKGZuKVxuICAgICAgICAgIGNhbmNlbEZucy5wdXNoKGZuKVxuICAgICAgICAgIHJldHVybiBBUElcbiAgICAgICAgfSxcbiAgICAgICAgaGlkZSAoKSB7XG4gICAgICAgICAgYXBwbHlTdGF0ZSgnaGlkZScpXG4gICAgICAgICAgcmV0dXJuIEFQSVxuICAgICAgICB9LFxuICAgICAgICB1cGRhdGUgKGNvbXBvbmVudFByb3BzKSB7XG4gICAgICAgICAgaWYgKHZtICE9PSBudWxsKSB7XG4gICAgICAgICAgICBpZiAoaXNDdXN0b20gPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihwcm9wcywgY29tcG9uZW50UHJvcHMpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgY29uc3QgeyBjbGFzczoga2xhc3MsIHN0eWxlLCAuLi5jZmcgfSA9IGNvbXBvbmVudFByb3BzXG5cbiAgICAgICAgICAgICAga2xhc3MgIT09IHZvaWQgMCAmJiAoY2ZnLmNhcmRDbGFzcyA9IGtsYXNzKVxuICAgICAgICAgICAgICBzdHlsZSAhPT0gdm9pZCAwICYmIChjZmcuY2FyZFN0eWxlID0gc3R5bGUpXG4gICAgICAgICAgICAgIG1lcmdlKHByb3BzLCBjZmcpXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZtLiRmb3JjZVVwZGF0ZSgpXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcmV0dXJuIEFQSVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICBjb25zdCBvbk9rID0gZGF0YSA9PiB7XG4gICAgICBlbWl0dGVkT0sgPSB0cnVlXG4gICAgICBva0Zucy5mb3JFYWNoKGZuID0+IHsgZm4oZGF0YSkgfSlcbiAgICB9XG5cbiAgICBjb25zdCBvbkhpZGUgPSAoKSA9PiB7XG4gICAgICBhcHAudW5tb3VudChlbClcbiAgICAgIHJlbW92ZUdsb2JhbE5vZGUoZWwpXG4gICAgICBhcHAgPSBudWxsXG4gICAgICB2bSA9IG51bGxcblxuICAgICAgaWYgKGVtaXR0ZWRPSyAhPT0gdHJ1ZSkge1xuICAgICAgICBjYW5jZWxGbnMuZm9yRWFjaChmbiA9PiB7IGZuKCkgfSlcbiAgICAgIH1cbiAgICB9XG5cbiAgICBsZXQgYXBwID0gY3JlYXRlQ2hpbGRBcHAoe1xuICAgICAgbmFtZTogJ1FHbG9iYWxEaWFsb2cnLFxuICAgICAgc2V0dXA6ICgpID0+ICgpID0+IGgoRGlhbG9nQ29tcG9uZW50LCB7XG4gICAgICAgIC4uLnByb3BzLFxuICAgICAgICByZWY6IGRpYWxvZ1JlZixcbiAgICAgICAgb25PayxcbiAgICAgICAgb25IaWRlXG4gICAgICB9KVxuICAgIH0sIHBhcmVudEFwcClcblxuICAgIHZtID0gYXBwLm1vdW50KGVsKVxuXG4gICAgZnVuY3Rpb24gc2hvdyAoKSB7XG4gICAgICBhcHBseVN0YXRlKCdzaG93JylcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIERpYWxvZ0NvbXBvbmVudC5fX2FzeW5jTG9hZGVyID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBEaWFsb2dDb21wb25lbnQuX19hc3luY0xvYWRlcigpLnRoZW4oKCkgPT4ge1xuICAgICAgICBuZXh0VGljayhzaG93KVxuICAgICAgfSlcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICBuZXh0VGljayhzaG93KVxuICAgIH1cblxuICAgIHJldHVybiBBUElcbiAgfVxufVxuIiwiaW1wb3J0IERpYWxvZ1BsdWdpbiBmcm9tICcuLi9jb21wb25lbnRzL2RpYWxvZy1wbHVnaW4vRGlhbG9nUGx1Z2luLmpzJ1xuaW1wb3J0IGdsb2JhbERpYWxvZyBmcm9tICcuLi91dGlscy9wcml2YXRlL2dsb2JhbC1kaWFsb2cuanMnXG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgaW5zdGFsbCAoeyAkcSwgcGFyZW50QXBwIH0pIHtcbiAgICAkcS5kaWFsb2cgPSBnbG9iYWxEaWFsb2coRGlhbG9nUGx1Z2luLCB0cnVlLCBwYXJlbnRBcHApXG4gICAgaWYgKHRoaXMuX19pbnN0YWxsZWQgIT09IHRydWUpIHtcbiAgICAgIHRoaXMuY3JlYXRlID0gJHEuZGlhbG9nXG4gICAgfVxuICB9XG59XG4iLCIvKiBlc2xpbnQtZGlzYWJsZSAqL1xuLyoqXG4gKiBUSElTIEZJTEUgSVMgR0VORVJBVEVEIEFVVE9NQVRJQ0FMTFkuXG4gKiBETyBOT1QgRURJVC5cbiAqXG4gKiBZb3UgYXJlIHByb2JhYmx5IGxvb2tpbmcgb24gYWRkaW5nIHN0YXJ0dXAvaW5pdGlhbGl6YXRpb24gY29kZS5cbiAqIFVzZSBcInF1YXNhciBuZXcgYm9vdCA8bmFtZT5cIiBhbmQgYWRkIGl0IHRoZXJlLlxuICogT25lIGJvb3QgZmlsZSBwZXIgY29uY2Vybi4gVGhlbiByZWZlcmVuY2UgdGhlIGZpbGUocykgaW4gcXVhc2FyLmNvbmZpZy5qcyA+IGJvb3Q6XG4gKiBib290OiBbJ2ZpbGUnLCAuLi5dIC8vIGRvIG5vdCBhZGQgXCIuanNcIiBleHRlbnNpb24gdG8gaXQuXG4gKlxuICogQm9vdCBmaWxlcyBhcmUgeW91ciBcIm1haW4uanNcIlxuICoqL1xuXG5cblxuaW1wb3J0IHtOb3RpZnksTG9hZGluZyxEaWFsb2d9IGZyb20gJ3F1YXNhcidcblxuXG5cbmV4cG9ydCBkZWZhdWx0IHsgY29uZmlnOiB7fSxwbHVnaW5zOiB7Tm90aWZ5LExvYWRpbmcsRGlhbG9nfSB9XG5cbiIsIi8qIGVzbGludC1kaXNhYmxlICovXG4vKipcbiAqIFRISVMgRklMRSBJUyBHRU5FUkFURUQgQVVUT01BVElDQUxMWS5cbiAqIERPIE5PVCBFRElULlxuICpcbiAqIFlvdSBhcmUgcHJvYmFibHkgbG9va2luZyBvbiBhZGRpbmcgc3RhcnR1cC9pbml0aWFsaXphdGlvbiBjb2RlLlxuICogVXNlIFwicXVhc2FyIG5ldyBib290IDxuYW1lPlwiIGFuZCBhZGQgaXQgdGhlcmUuXG4gKiBPbmUgYm9vdCBmaWxlIHBlciBjb25jZXJuLiBUaGVuIHJlZmVyZW5jZSB0aGUgZmlsZShzKSBpbiBxdWFzYXIuY29uZmlnLmpzID4gYm9vdDpcbiAqIGJvb3Q6IFsnZmlsZScsIC4uLl0gLy8gZG8gbm90IGFkZCBcIi5qc1wiIGV4dGVuc2lvbiB0byBpdC5cbiAqXG4gKiBCb290IGZpbGVzIGFyZSB5b3VyIFwibWFpbi5qc1wiXG4gKiovXG5cblxuaW1wb3J0IHsgY3JlYXRlQXBwIH0gZnJvbSAndnVlJ1xuXG5cblxuXG5cblxuXG5pbXBvcnQgJ0BxdWFzYXIvZXh0cmFzL2ZvbnRhd2Vzb21lLXY2L2ZvbnRhd2Vzb21lLXY2LmNzcydcblxuaW1wb3J0ICdAcXVhc2FyL2V4dHJhcy9yb2JvdG8tZm9udC9yb2JvdG8tZm9udC5jc3MnXG5cbmltcG9ydCAnQHF1YXNhci9leHRyYXMvbWF0ZXJpYWwtaWNvbnMvbWF0ZXJpYWwtaWNvbnMuY3NzJ1xuXG5cblxuaW1wb3J0ICdAcXVhc2FyL2V4dHJhcy9hbmltYXRlL3NsaWRlSW5MZWZ0LmNzcydcblxuaW1wb3J0ICdAcXVhc2FyL2V4dHJhcy9hbmltYXRlL3NsaWRlT3V0UmlnaHQuY3NzJ1xuXG5cbi8vIFdlIGxvYWQgUXVhc2FyIHN0eWxlc2hlZXQgZmlsZVxuaW1wb3J0ICdxdWFzYXIvZGlzdC9xdWFzYXIuc2FzcydcblxuXG5cblxuaW1wb3J0ICdzcmMvY3NzL2FwcC5zY3NzJ1xuXG5cbmltcG9ydCBjcmVhdGVRdWFzYXJBcHAgZnJvbSAnLi9hcHAuanMnXG5pbXBvcnQgcXVhc2FyVXNlck9wdGlvbnMgZnJvbSAnLi9xdWFzYXItdXNlci1vcHRpb25zLmpzJ1xuXG5cblxuXG5cblxuXG5cblxuY29uc3QgcHVibGljUGF0aCA9IGAvYFxuXG5hc3luYyBmdW5jdGlvbiBzdGFydCAoe1xuICBhcHAsXG4gIHJvdXRlclxuICAsIHN0b3JlXG59LCBib290RmlsZXMpIHtcbiAgXG5cbiAgXG4gIGxldCBoYXNSZWRpcmVjdGVkID0gZmFsc2VcbiAgY29uc3QgZ2V0UmVkaXJlY3RVcmwgPSB1cmwgPT4ge1xuICAgIHRyeSB7IHJldHVybiByb3V0ZXIucmVzb2x2ZSh1cmwpLmhyZWYgfVxuICAgIGNhdGNoIChlcnIpIHt9XG5cbiAgICByZXR1cm4gT2JqZWN0KHVybCkgPT09IHVybFxuICAgICAgPyBudWxsXG4gICAgICA6IHVybFxuICB9XG4gIGNvbnN0IHJlZGlyZWN0ID0gdXJsID0+IHtcbiAgICBoYXNSZWRpcmVjdGVkID0gdHJ1ZVxuXG4gICAgaWYgKHR5cGVvZiB1cmwgPT09ICdzdHJpbmcnICYmIC9eaHR0cHM/OlxcL1xcLy8udGVzdCh1cmwpKSB7XG4gICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IHVybFxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgY29uc3QgaHJlZiA9IGdldFJlZGlyZWN0VXJsKHVybClcblxuICAgIC8vIGNvbnRpbnVlIGlmIHdlIGRpZG4ndCBmYWlsIHRvIHJlc29sdmUgdGhlIHVybFxuICAgIGlmIChocmVmICE9PSBudWxsKSB7XG4gICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IGhyZWZcbiAgICAgIFxuICAgIH1cbiAgfVxuXG4gIGNvbnN0IHVybFBhdGggPSB3aW5kb3cubG9jYXRpb24uaHJlZi5yZXBsYWNlKHdpbmRvdy5sb2NhdGlvbi5vcmlnaW4sICcnKVxuXG4gIGZvciAobGV0IGkgPSAwOyBoYXNSZWRpcmVjdGVkID09PSBmYWxzZSAmJiBpIDwgYm9vdEZpbGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IGJvb3RGaWxlc1tpXSh7XG4gICAgICAgIGFwcCxcbiAgICAgICAgcm91dGVyLFxuICAgICAgICBzdG9yZSxcbiAgICAgICAgc3NyQ29udGV4dDogbnVsbCxcbiAgICAgICAgcmVkaXJlY3QsXG4gICAgICAgIHVybFBhdGgsXG4gICAgICAgIHB1YmxpY1BhdGhcbiAgICAgIH0pXG4gICAgfVxuICAgIGNhdGNoIChlcnIpIHtcbiAgICAgIGlmIChlcnIgJiYgZXJyLnVybCkge1xuICAgICAgICByZWRpcmVjdChlcnIudXJsKVxuICAgICAgICByZXR1cm5cbiAgICAgIH1cblxuICAgICAgY29uc29sZS5lcnJvcignW1F1YXNhcl0gYm9vdCBlcnJvcjonLCBlcnIpXG4gICAgICByZXR1cm5cbiAgICB9XG4gIH1cblxuICBpZiAoaGFzUmVkaXJlY3RlZCA9PT0gdHJ1ZSkge1xuICAgIHJldHVyblxuICB9XG4gIFxuXG4gIGFwcC51c2Uocm91dGVyKVxuICBcblxuICBcblxuICAgIFxuXG4gICAgXG4gICAgICBhcHAubW91bnQoJyNxLWFwcCcpXG4gICAgXG5cbiAgICBcblxuICBcblxufVxuXG5jcmVhdGVRdWFzYXJBcHAoY3JlYXRlQXBwLCBxdWFzYXJVc2VyT3B0aW9ucylcblxuICAudGhlbihhcHAgPT4ge1xuICAgIHJldHVybiBQcm9taXNlLmFsbChbXG4gICAgICBcbiAgICAgIGltcG9ydCgnYm9vdC9pMThuJyksXG4gICAgICBcbiAgICAgIGltcG9ydCgnYm9vdC9heGlvcycpXG4gICAgICBcbiAgICBdKS50aGVuKGJvb3RGaWxlcyA9PiB7XG4gICAgICBjb25zdCBib290ID0gYm9vdEZpbGVzXG4gICAgICAgIC5tYXAoZW50cnkgPT4gZW50cnkuZGVmYXVsdClcbiAgICAgICAgLmZpbHRlcihlbnRyeSA9PiB0eXBlb2YgZW50cnkgPT09ICdmdW5jdGlvbicpXG5cbiAgICAgIHN0YXJ0KGFwcCwgYm9vdClcbiAgICB9KVxuICB9KVxuXG4iXSwibmFtZXMiOlsiaXNPYmplY3QiLCJ0cmlnZ2VyIiwic2l6ZSIsImxvZ0Vycm9yIiwicXVldWUiLCJpc1NoYWxsb3ckMSIsImNhbGxIb29rIiwibWVyZ2VPcHRpb25zIiwibm9ybWFsaXplU2xvdCIsInVpZCIsInVpZCQxIiwibm9vcCIsIlBsdWdpbiIsIkRhcmsiLCJMYW5nIiwiSWNvblNldCIsImxhbmciLCJpY29uU2V0IiwiX2NyZWF0ZUJsb2NrIiwiaXNTYW1lUm91dGVSZWNvcmQiLCJpc1NhbWVSb3V0ZUxvY2F0aW9uUGFyYW1zIiwiaXNTYW1lUm91dGVMb2NhdGlvblBhcmFtc1ZhbHVlIiwiaXNFcXVpdmFsZW50QXJyYXkiLCJnZXRPcmlnaW5hbFBhdGgiLCJpbmNsdWRlc1BhcmFtcyIsImNyZWF0ZVJvdXRlciIsImRlZmF1bHRzIiwicG9zaXRpb25DbGFzcyIsImhhbmRsZXJzIiwiTG9hZGluZyJdLCJtYXBwaW5ncyI6InFtQkFBQSxLQUFNLElBQWEsVUFBMkIsQ0FFMUMsS0FBTSxHQUFVLFNBQVMsY0FBYyxNQUFNLEVBQUUsUUFFL0MsTUFBTyxJQUFXLEVBQVEsVUFBWSxFQUFRLFNBQVMsZUFBZSxFQUNoRSxnQkFDQSxTQUNWLEVBQUMsRUFBVSxHQUFPLENBQUUsRUFBTyxHQUFPLElBQWlCLEdBQWdCLFNBQWlCLEVBQVksRUFBTSxDQUVsRyxNQUFJLEFBQXVCLENBQUMsR0FBUSxFQUFLLFNBQVcsRUFDekMsRUFBVSxFQUVkLFFBQVEsSUFBSSxFQUFLLElBQUksQUFBQyxHQUFRLENBSWpDLEdBRkEsRUFBTSxHQUFHLEtBQU8sSUFFWixJQUFPLElBQ1AsT0FFSixHQUFLLEdBQU8sR0FDWixLQUFNLEdBQVEsRUFBSSxTQUFTLE1BQU0sRUFDM0IsRUFBYyxFQUFRLHFCQUF1QixHQUVuRCxHQUFJLFNB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
